import{$a as $p,$c as Zi,A as yp,Aa as Ap,Ab as hi,B as Sn,Ba as Yt,Bb as pi,Bc as nm,D as Bs,Da as Ip,E as bt,Ea as js,F as Lu,Fa as Tp,G as li,Ga as Gi,Gb as Ze,Gc as im,H as ui,Ha as Xr,Hb as Vp,Hc as om,Ia as Zr,Ib as Wu,Ic as am,J as $u,Ja as Dr,Jc as sa,K as Or,Ka as Jr,Kb as Ku,Kc as en,La as Pp,Lc as Re,M as Hi,Ma as On,Mc as Hs,N as Wi,Na as Mp,Nc as ca,O as Rn,Oa as Uu,Oc as Xi,P as Bu,Pa as Us,Pc as Ws,Q as bp,Qa as zs,Qc as mi,R as _p,Ra as Jt,S as Fu,Sa as Xt,Sc as Gu,T as xp,Ta as Nt,Tb as qs,Tc as Qu,U as na,Ua as Np,Ub as qp,Uc as Yu,V as dr,Va as Se,W as Ue,Wa as Lp,Wc as sm,X as Ki,Xa as Qi,Xb as Hp,Xc as cm,Y as wp,Ya as re,Yc as lm,Z as me,Za as qt,Zb as Wp,Zc as um,_ as Ce,_a as hr,_c as rn,a as F,aa as ct,ab as Bp,ac as Kp,b as gt,ba as Qt,bb as Fp,bc as Ar,ca as Cp,cb as zu,d as yx,da as lt,db as Vu,dc as ge,e as Ls,ea as zt,eb as Vs,ec as Gp,f as bx,fa as k,fb as pr,fd as En,g as U,ga as Sp,gb as jp,gc as Qp,gd as la,h as Rr,hb as Up,hc as Yp,hd as Je,i as pp,ia as fr,j as qi,ja as Er,k as ta,ka as Rp,kc as Xp,l as ci,la as Op,lc as aa,ld as dm,m as at,mb as tn,n as we,nb as kr,nc as Zp,nd as fm,o as mp,oa as xt,ob as mr,oc as Ir,p as Qr,pa as le,pc as Jp,q as pe,qa as Ep,r as nt,s as ea,sa as Fs,sb as zp,t as ra,tb as qu,u as gp,ua as ia,ub as di,uc as tm,v as vp,va as Dp,vb as Hu,vc as em,w as ut,wa as ju,wb as oa,x as $s,xa as kp,xb as fi,xc as rm,y as Wt,ya as Yr,z as Nu,za as ze,zb as Yi}from"./chunk-NTB3RZ4U.js";var Kb=yx((ih,oh)=>{"use strict";(function(t,e){typeof ih=="object"&&typeof oh<"u"?oh.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self).Dexie=e()})(ih,function(){"use strict";var t=function(a,c){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(a,c)},e=function(){return(e=Object.assign||function(a){for(var c,u=1,f=arguments.length;u<f;u++)for(var h in c=arguments[u])Object.prototype.hasOwnProperty.call(c,h)&&(a[h]=c[h]);return a}).apply(this,arguments)};function r(a,c,u){if(u||arguments.length===2)for(var f,h=0,g=c.length;h<g;h++)!f&&h in c||((f=f||Array.prototype.slice.call(c,0,h))[h]=c[h]);return a.concat(f||Array.prototype.slice.call(c))}var n=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,i=Object.keys,o=Array.isArray;function s(a,c){return typeof c!="object"||i(c).forEach(function(u){a[u]=c[u]}),a}typeof Promise>"u"||n.Promise||(n.Promise=Promise);var l=Object.getPrototypeOf,d={}.hasOwnProperty;function p(a,c){return d.call(a,c)}function m(a,c){typeof c=="function"&&(c=c(l(a))),(typeof Reflect>"u"?i:Reflect.ownKeys)(c).forEach(function(u){S(a,u,c[u])})}var y=Object.defineProperty;function S(a,c,u,f){y(a,c,s(u&&p(u,"get")&&typeof u.get=="function"?{get:u.get,set:u.set,configurable:!0}:{value:u,configurable:!0,writable:!0},f))}function D(a){return{from:function(c){return a.prototype=Object.create(c.prototype),S(a.prototype,"constructor",a),{extend:m.bind(null,a.prototype)}}}}var M=Object.getOwnPropertyDescriptor,j=[].slice;function G(a,c,u){return j.call(a,c,u)}function J(a,c){return c(a)}function rt(a){if(!a)throw new Error("Assertion Failed")}function tt(a){n.setImmediate?setImmediate(a):setTimeout(a,0)}function At(a,c){if(typeof c=="string"&&p(a,c))return a[c];if(!c)return a;if(typeof c!="string"){for(var u=[],f=0,h=c.length;f<h;++f){var g=At(a,c[f]);u.push(g)}return u}var v=c.indexOf(".");if(v!==-1){var b=a[c.substr(0,v)];return b==null?void 0:At(b,c.substr(v+1))}}function st(a,c,u){if(a&&c!==void 0&&!("isFrozen"in Object&&Object.isFrozen(a)))if(typeof c!="string"&&"length"in c){rt(typeof u!="string"&&"length"in u);for(var f=0,h=c.length;f<h;++f)st(a,c[f],u[f])}else{var g,v,b=c.indexOf(".");b!==-1?(g=c.substr(0,b),(v=c.substr(b+1))===""?u===void 0?o(a)&&!isNaN(parseInt(g))?a.splice(g,1):delete a[g]:a[g]=u:st(b=!(b=a[g])||!p(a,g)?a[g]={}:b,v,u)):u===void 0?o(a)&&!isNaN(parseInt(c))?a.splice(c,1):delete a[c]:a[c]=u}}function Pt(a){var c,u={};for(c in a)p(a,c)&&(u[c]=a[c]);return u}var Dt=[].concat;function Ft(a){return Dt.apply([],a)}var Kr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ft([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(c){return c+a+"Array"})}))).filter(function(a){return n[a]}),he=new Set(Kr.map(function(a){return n[a]})),Be=null;function cr(a){return Be=new WeakMap,a=function c(u){if(!u||typeof u!="object")return u;var f=Be.get(u);if(f)return f;if(o(u)){f=[],Be.set(u,f);for(var h=0,g=u.length;h<g;++h)f.push(c(u[h]))}else if(he.has(u.constructor))f=u;else{var v,b=l(u);for(v in f=b===Object.prototype?{}:Object.create(b),Be.set(u,f),u)p(u,v)&&(f[v]=c(u[v]))}return f}(a),Be=null,a}var Xn={}.toString;function lr(a){return Xn.call(a).slice(8,-1)}var Bo=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Xl=typeof Bo=="symbol"?function(a){var c;return a!=null&&(c=a[Bo])&&c.apply(a)}:function(){return null};function Hr(a,c){return c=a.indexOf(c),0<=c&&a.splice(c,1),0<=c}var pn={};function Me(a){var c,u,f,h;if(arguments.length===1){if(o(a))return a.slice();if(this===pn&&typeof a=="string")return[a];if(h=Xl(a)){for(u=[];!(f=h.next()).done;)u.push(f.value);return u}if(a==null)return[a];if(typeof(c=a.length)!="number")return[a];for(u=new Array(c);c--;)u[c]=a[c];return u}for(c=arguments.length,u=new Array(c);c--;)u[c]=arguments[c];return u}var mn=typeof Symbol<"u"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},zo=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Xe=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(zo),Fo={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ur(a,c){this.name=a,this.message=c}function cs(a,c){return a+". Errors: "+Object.keys(c).map(function(u){return c[u].toString()}).filter(function(u,f,h){return h.indexOf(u)===f}).join(`
`)}function oe(a,c,u,f){this.failures=c,this.failedKeys=f,this.successCount=u,this.message=cs(a,c)}function ae(a,c){this.name="BulkError",this.failures=Object.keys(c).map(function(u){return c[u]}),this.failuresByPos=c,this.message=cs(a,this.failures)}D(ur).from(Error).extend({toString:function(){return this.name+": "+this.message}}),D(oe).from(ur),D(ae).from(ur);var gn=Xe.reduce(function(a,c){return a[c]=c+"Error",a},{}),Zl=ur,it=Xe.reduce(function(a,c){var u=c+"Error";function f(h,g){this.name=u,h?typeof h=="string"?(this.message="".concat(h).concat(g?`
 `+g:""),this.inner=g||null):typeof h=="object"&&(this.message="".concat(h.name," ").concat(h.message),this.inner=h):(this.message=Fo[c]||u,this.inner=null)}return D(f).from(Zl),a[c]=f,a},{});it.Syntax=SyntaxError,it.Type=TypeError,it.Range=RangeError;var Mh=zo.reduce(function(a,c){return a[c+"Error"]=it[c],a},{}),ls=Xe.reduce(function(a,c){return["Syntax","Type","Range"].indexOf(c)===-1&&(a[c+"Error"]=it[c]),a},{});function It(){}function jo(a){return a}function z_(a,c){return a==null||a===jo?c:function(u){return c(a(u))}}function Zn(a,c){return function(){a.apply(this,arguments),c.apply(this,arguments)}}function V_(a,c){return a===It?c:function(){var u=a.apply(this,arguments);u!==void 0&&(arguments[0]=u);var f=this.onsuccess,h=this.onerror;this.onsuccess=null,this.onerror=null;var g=c.apply(this,arguments);return f&&(this.onsuccess=this.onsuccess?Zn(f,this.onsuccess):f),h&&(this.onerror=this.onerror?Zn(h,this.onerror):h),g!==void 0?g:u}}function q_(a,c){return a===It?c:function(){a.apply(this,arguments);var u=this.onsuccess,f=this.onerror;this.onsuccess=this.onerror=null,c.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?Zn(u,this.onsuccess):u),f&&(this.onerror=this.onerror?Zn(f,this.onerror):f)}}function H_(a,c){return a===It?c:function(u){var f=a.apply(this,arguments);s(u,f);var h=this.onsuccess,g=this.onerror;return this.onsuccess=null,this.onerror=null,u=c.apply(this,arguments),h&&(this.onsuccess=this.onsuccess?Zn(h,this.onsuccess):h),g&&(this.onerror=this.onerror?Zn(g,this.onerror):g),f===void 0?u===void 0?void 0:u:s(f,u)}}function W_(a,c){return a===It?c:function(){return c.apply(this,arguments)!==!1&&a.apply(this,arguments)}}function Jl(a,c){return a===It?c:function(){var u=a.apply(this,arguments);if(u&&typeof u.then=="function"){for(var f=this,h=arguments.length,g=new Array(h);h--;)g[h]=arguments[h];return u.then(function(){return c.apply(f,g)})}return c.apply(this,arguments)}}ls.ModifyError=oe,ls.DexieError=ur,ls.BulkError=ae;var wr=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Nh(a){wr=a}var Uo={},Lh=100,Kr=typeof Promise>"u"?[]:function(){var a=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[a,l(a),a];var c=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[c,l(c),a]}(),zo=Kr[0],Xe=Kr[1],Kr=Kr[2],Xe=Xe&&Xe.then,Jn=zo&&zo.constructor,tu=!!Kr,Vo=function(a,c){qo.push([a,c]),us&&(queueMicrotask(G_),us=!1)},eu=!0,us=!0,ti=[],ds=[],ru=jo,vn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:It,pgp:!1,env:{},finalize:It},et=vn,qo=[],ei=0,fs=[];function Y(a){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var c=this._PSD=et;if(typeof a!="function"){if(a!==Uo)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&iu(this,this._value))}this._state=null,this._value=null,++c.ref,function u(f,h){try{h(function(g){if(f._state===null){if(g===f)throw new TypeError("A promise cannot be resolved with itself.");var v=f._lib&&$i();g&&typeof g.then=="function"?u(f,function(b,x){g instanceof Y?g._then(b,x):g.then(b,x)}):(f._state=!0,f._value=g,Bh(f)),v&&Bi()}},iu.bind(null,f))}catch(g){iu(f,g)}}(this,a)}var nu={get:function(){var a=et,c=gs;function u(f,h){var g=this,v=!a.global&&(a!==et||c!==gs),b=v&&!bn(),x=new Y(function(C,E){ou(g,new $h(jh(f,a,v,b),jh(h,a,v,b),C,E,a))});return this._consoleTask&&(x._consoleTask=this._consoleTask),x}return u.prototype=Uo,u},set:function(a){S(this,"then",a&&a.prototype===Uo?nu:{get:function(){return a},set:nu.set})}};function $h(a,c,u,f,h){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof c=="function"?c:null,this.resolve=u,this.reject=f,this.psd=h}function iu(a,c){var u,f;ds.push(c),a._state===null&&(u=a._lib&&$i(),c=ru(c),a._state=!1,a._value=c,f=a,ti.some(function(h){return h._value===f._value})||ti.push(f),Bh(a),u&&Bi())}function Bh(a){var c=a._listeners;a._listeners=[];for(var u=0,f=c.length;u<f;++u)ou(a,c[u]);var h=a._PSD;--h.ref||h.finalize(),ei===0&&(++ei,Vo(function(){--ei==0&&au()},[]))}function ou(a,c){if(a._state!==null){var u=a._state?c.onFulfilled:c.onRejected;if(u===null)return(a._state?c.resolve:c.reject)(a._value);++c.psd.ref,++ei,Vo(K_,[u,a,c])}else a._listeners.push(c)}function K_(a,c,u){try{var f,h=c._value;!c._state&&ds.length&&(ds=[]),f=wr&&c._consoleTask?c._consoleTask.run(function(){return a(h)}):a(h),c._state||ds.indexOf(h)!==-1||function(g){for(var v=ti.length;v;)if(ti[--v]._value===g._value)return ti.splice(v,1)}(c),u.resolve(f)}catch(g){u.reject(g)}finally{--ei==0&&au(),--u.psd.ref||u.psd.finalize()}}function G_(){ri(vn,function(){$i()&&Bi()})}function $i(){var a=eu;return us=eu=!1,a}function Bi(){var a,c,u;do for(;0<qo.length;)for(a=qo,qo=[],u=a.length,c=0;c<u;++c){var f=a[c];f[0].apply(null,f[1])}while(0<qo.length);us=eu=!0}function au(){var a=ti;ti=[],a.forEach(function(f){f._PSD.onunhandled.call(null,f._value,f)});for(var c=fs.slice(0),u=c.length;u;)c[--u]()}function hs(a){return new Y(Uo,!1,a)}function Ut(a,c){var u=et;return function(){var f=$i(),h=et;try{return _n(u,!0),a.apply(this,arguments)}catch(g){c&&c(g)}finally{_n(h,!1),f&&Bi()}}}m(Y.prototype,{then:nu,_then:function(a,c){ou(this,new $h(null,null,a,c,et))},catch:function(a){if(arguments.length===1)return this.then(null,a);var c=a,u=arguments[1];return typeof c=="function"?this.then(null,function(f){return(f instanceof c?u:hs)(f)}):this.then(null,function(f){return(f&&f.name===c?u:hs)(f)})},finally:function(a){return this.then(function(c){return Y.resolve(a()).then(function(){return c})},function(c){return Y.resolve(a()).then(function(){return hs(c)})})},timeout:function(a,c){var u=this;return a<1/0?new Y(function(f,h){var g=setTimeout(function(){return h(new it.Timeout(c))},a);u.then(f,h).finally(clearTimeout.bind(null,g))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&S(Y.prototype,Symbol.toStringTag,"Dexie.Promise"),vn.env=Fh(),m(Y,{all:function(){var a=Me.apply(null,arguments).map(vs);return new Y(function(c,u){a.length===0&&c([]);var f=a.length;a.forEach(function(h,g){return Y.resolve(h).then(function(v){a[g]=v,--f||c(a)},u)})})},resolve:function(a){return a instanceof Y?a:a&&typeof a.then=="function"?new Y(function(c,u){a.then(c,u)}):new Y(Uo,!0,a)},reject:hs,race:function(){var a=Me.apply(null,arguments).map(vs);return new Y(function(c,u){a.map(function(f){return Y.resolve(f).then(c,u)})})},PSD:{get:function(){return et},set:function(a){return et=a}},totalEchoes:{get:function(){return gs}},newPSD:yn,usePSD:ri,scheduler:{get:function(){return Vo},set:function(a){Vo=a}},rejectionMapper:{get:function(){return ru},set:function(a){ru=a}},follow:function(a,c){return new Y(function(u,f){return yn(function(h,g){var v=et;v.unhandleds=[],v.onunhandled=g,v.finalize=Zn(function(){var b,x=this;b=function(){x.unhandleds.length===0?h():g(x.unhandleds[0])},fs.push(function C(){b(),fs.splice(fs.indexOf(C),1)}),++ei,Vo(function(){--ei==0&&au()},[])},v.finalize),a()},c,u,f)})}}),Jn&&(Jn.allSettled&&S(Y,"allSettled",function(){var a=Me.apply(null,arguments).map(vs);return new Y(function(c){a.length===0&&c([]);var u=a.length,f=new Array(u);a.forEach(function(h,g){return Y.resolve(h).then(function(v){return f[g]={status:"fulfilled",value:v}},function(v){return f[g]={status:"rejected",reason:v}}).then(function(){return--u||c(f)})})})}),Jn.any&&typeof AggregateError<"u"&&S(Y,"any",function(){var a=Me.apply(null,arguments).map(vs);return new Y(function(c,u){a.length===0&&u(new AggregateError([]));var f=a.length,h=new Array(f);a.forEach(function(g,v){return Y.resolve(g).then(function(b){return c(b)},function(b){h[v]=b,--f||u(new AggregateError(h))})})})}),Jn.withResolvers&&(Y.withResolvers=Jn.withResolvers));var se={awaits:0,echoes:0,id:0},Q_=0,ps=[],ms=0,gs=0,Y_=0;function yn(a,c,u,f){var h=et,g=Object.create(h);return g.parent=h,g.ref=0,g.global=!1,g.id=++Y_,vn.env,g.env=tu?{Promise:Y,PromiseProp:{value:Y,configurable:!0,writable:!0},all:Y.all,race:Y.race,allSettled:Y.allSettled,any:Y.any,resolve:Y.resolve,reject:Y.reject}:{},c&&s(g,c),++h.ref,g.finalize=function(){--this.parent.ref||this.parent.finalize()},f=ri(g,a,u,f),g.ref===0&&g.finalize(),f}function Fi(){return se.id||(se.id=++Q_),++se.awaits,se.echoes+=Lh,se.id}function bn(){return!!se.awaits&&(--se.awaits==0&&(se.id=0),se.echoes=se.awaits*Lh,!0)}function vs(a){return se.echoes&&a&&a.constructor===Jn?(Fi(),a.then(function(c){return bn(),c},function(c){return bn(),Kt(c)})):a}function X_(){var a=ps[ps.length-1];ps.pop(),_n(a,!1)}function _n(a,c){var u,f=et;(c?!se.echoes||ms++&&a===et:!ms||--ms&&a===et)||queueMicrotask(c?(function(h){++gs,se.echoes&&--se.echoes!=0||(se.echoes=se.awaits=se.id=0),ps.push(et),_n(h,!0)}).bind(null,a):X_),a!==et&&(et=a,f===vn&&(vn.env=Fh()),tu&&(u=vn.env.Promise,c=a.env,(f.global||a.global)&&(Object.defineProperty(n,"Promise",c.PromiseProp),u.all=c.all,u.race=c.race,u.resolve=c.resolve,u.reject=c.reject,c.allSettled&&(u.allSettled=c.allSettled),c.any&&(u.any=c.any))))}function Fh(){var a=n.Promise;return tu?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(n,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject}:{}}function ri(a,c,u,f,h){var g=et;try{return _n(a,!0),c(u,f,h)}finally{_n(g,!1)}}function jh(a,c,u,f){return typeof a!="function"?a:function(){var h=et;u&&Fi(),_n(c,!0);try{return a.apply(this,arguments)}finally{_n(h,!1),f&&queueMicrotask(bn)}}}function su(a){Promise===Jn&&se.echoes===0?ms===0?a():enqueueNativeMicroTask(a):setTimeout(a,0)}(""+Xe).indexOf("[native code]")===-1&&(Fi=bn=It);var Kt=Y.reject,ni="\uFFFF",Wr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Uh="String expected.",ji=[],ys="__dbnames",cu="readonly",lu="readwrite";function ii(a,c){return a?c?function(){return a.apply(this,arguments)&&c.apply(this,arguments)}:a:c}var zh={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function bs(a){return typeof a!="string"||/\./.test(a)?function(c){return c}:function(c){return c[a]===void 0&&a in c&&delete(c=cr(c))[a],c}}function Vh(){throw it.Type()}function _t(a,c){try{var u=qh(a),f=qh(c);if(u!==f)return u==="Array"?1:f==="Array"?-1:u==="binary"?1:f==="binary"?-1:u==="string"?1:f==="string"?-1:u==="Date"?1:f!=="Date"?NaN:-1;switch(u){case"number":case"Date":case"string":return c<a?1:a<c?-1:0;case"binary":return function(h,g){for(var v=h.length,b=g.length,x=v<b?v:b,C=0;C<x;++C)if(h[C]!==g[C])return h[C]<g[C]?-1:1;return v===b?0:v<b?-1:1}(Hh(a),Hh(c));case"Array":return function(h,g){for(var v=h.length,b=g.length,x=v<b?v:b,C=0;C<x;++C){var E=_t(h[C],g[C]);if(E!==0)return E}return v===b?0:v<b?-1:1}(a,c)}}catch{}return NaN}function qh(a){var c=typeof a;return c!="object"?c:ArrayBuffer.isView(a)?"binary":(a=lr(a),a==="ArrayBuffer"?"binary":a)}function Hh(a){return a instanceof Uint8Array?a:ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var Wh=(jt.prototype._trans=function(a,c,u){var f=this._tx||et.trans,h=this.name,g=wr&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(a==="readonly"?"read":"write"," ").concat(this.name));function v(C,E,_){if(!_.schema[h])throw new it.NotFound("Table "+h+" not part of transaction");return c(_.idbtrans,_)}var b=$i();try{var x=f&&f.db._novip===this.db._novip?f===et.trans?f._promise(a,v,u):yn(function(){return f._promise(a,v,u)},{trans:f,transless:et.transless||et}):function C(E,_,I,w){if(E.idbdb&&(E._state.openComplete||et.letThrough||E._vip)){var O=E._createTransaction(_,I,E._dbSchema);try{O.create(),E._state.PR1398_maxLoop=3}catch(A){return A.name===gn.InvalidState&&E.isOpen()&&0<--E._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),E.close({disableAutoOpen:!1}),E.open().then(function(){return C(E,_,I,w)})):Kt(A)}return O._promise(_,function(A,R){return yn(function(){return et.trans=O,w(A,R,O)})}).then(function(A){if(_==="readwrite")try{O.idbtrans.commit()}catch{}return _==="readonly"?A:O._completion.then(function(){return A})})}if(E._state.openComplete)return Kt(new it.DatabaseClosed(E._state.dbOpenError));if(!E._state.isBeingOpened){if(!E._state.autoOpen)return Kt(new it.DatabaseClosed);E.open().catch(It)}return E._state.dbReadyPromise.then(function(){return C(E,_,I,w)})}(this.db,a,[this.name],v);return g&&(x._consoleTask=g,x=x.catch(function(C){return console.trace(C),Kt(C)})),x}finally{b&&Bi()}},jt.prototype.get=function(a,c){var u=this;return a&&a.constructor===Object?this.where(a).first(c):a==null?Kt(new it.Type("Invalid argument to Table.get()")):this._trans("readonly",function(f){return u.core.get({trans:f,key:a}).then(function(h){return u.hook.reading.fire(h)})}).then(c)},jt.prototype.where=function(a){if(typeof a=="string")return new this.db.WhereClause(this,a);if(o(a))return new this.db.WhereClause(this,"[".concat(a.join("+"),"]"));var c=i(a);if(c.length===1)return this.where(c[0]).equals(a[c[0]]);var u=this.schema.indexes.concat(this.schema.primKey).filter(function(b){if(b.compound&&c.every(function(C){return 0<=b.keyPath.indexOf(C)})){for(var x=0;x<c.length;++x)if(c.indexOf(b.keyPath[x])===-1)return!1;return!0}return!1}).sort(function(b,x){return b.keyPath.length-x.keyPath.length})[0];if(u&&this.db._maxKey!==ni){var g=u.keyPath.slice(0,c.length);return this.where(g).equals(g.map(function(x){return a[x]}))}!u&&wr&&console.warn("The query ".concat(JSON.stringify(a)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(c.join("+"),"]"));var f=this.schema.idxByName;function h(b,x){return _t(b,x)===0}var v=c.reduce(function(_,x){var C=_[0],E=_[1],_=f[x],I=a[x];return[C||_,C||!_?ii(E,_&&_.multi?function(w){return w=At(w,x),o(w)&&w.some(function(O){return h(I,O)})}:function(w){return h(I,At(w,x))}):E]},[null,null]),g=v[0],v=v[1];return g?this.where(g.name).equals(a[g.keyPath]).filter(v):u?this.filter(v):this.where(c).equals("")},jt.prototype.filter=function(a){return this.toCollection().and(a)},jt.prototype.count=function(a){return this.toCollection().count(a)},jt.prototype.offset=function(a){return this.toCollection().offset(a)},jt.prototype.limit=function(a){return this.toCollection().limit(a)},jt.prototype.each=function(a){return this.toCollection().each(a)},jt.prototype.toArray=function(a){return this.toCollection().toArray(a)},jt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},jt.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,o(a)?"[".concat(a.join("+"),"]"):a))},jt.prototype.reverse=function(){return this.toCollection().reverse()},jt.prototype.mapToClass=function(a){var c,u=this.db,f=this.name;function h(){return c!==null&&c.apply(this,arguments)||this}(this.schema.mappedClass=a).prototype instanceof Vh&&(function(x,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function E(){this.constructor=x}t(x,C),x.prototype=C===null?Object.create(C):(E.prototype=C.prototype,new E)}(h,c=a),Object.defineProperty(h.prototype,"db",{get:function(){return u},enumerable:!1,configurable:!0}),h.prototype.table=function(){return f},a=h);for(var g=new Set,v=a.prototype;v;v=l(v))Object.getOwnPropertyNames(v).forEach(function(x){return g.add(x)});function b(x){if(!x)return x;var C,E=Object.create(a.prototype);for(C in x)if(!g.has(C))try{E[C]=x[C]}catch{}return E}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=b,this.hook("reading",b),a},jt.prototype.defineClass=function(){return this.mapToClass(function(a){s(this,a)})},jt.prototype.add=function(a,c){var u=this,f=this.schema.primKey,h=f.auto,g=f.keyPath,v=a;return g&&h&&(v=bs(g)(a)),this._trans("readwrite",function(b){return u.core.mutate({trans:b,type:"add",keys:c!=null?[c]:null,values:[v]})}).then(function(b){return b.numFailures?Y.reject(b.failures[0]):b.lastResult}).then(function(b){if(g)try{st(a,g,b)}catch{}return b})},jt.prototype.update=function(a,c){return typeof a!="object"||o(a)?this.where(":id").equals(a).modify(c):(a=At(a,this.schema.primKey.keyPath),a===void 0?Kt(new it.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(a).modify(c))},jt.prototype.put=function(a,c){var u=this,f=this.schema.primKey,h=f.auto,g=f.keyPath,v=a;return g&&h&&(v=bs(g)(a)),this._trans("readwrite",function(b){return u.core.mutate({trans:b,type:"put",values:[v],keys:c!=null?[c]:null})}).then(function(b){return b.numFailures?Y.reject(b.failures[0]):b.lastResult}).then(function(b){if(g)try{st(a,g,b)}catch{}return b})},jt.prototype.delete=function(a){var c=this;return this._trans("readwrite",function(u){return c.core.mutate({trans:u,type:"delete",keys:[a]})}).then(function(u){return u.numFailures?Y.reject(u.failures[0]):void 0})},jt.prototype.clear=function(){var a=this;return this._trans("readwrite",function(c){return a.core.mutate({trans:c,type:"deleteRange",range:zh})}).then(function(c){return c.numFailures?Y.reject(c.failures[0]):void 0})},jt.prototype.bulkGet=function(a){var c=this;return this._trans("readonly",function(u){return c.core.getMany({keys:a,trans:u}).then(function(f){return f.map(function(h){return c.hook.reading.fire(h)})})})},jt.prototype.bulkAdd=function(a,c,u){var f=this,h=Array.isArray(c)?c:void 0,g=(u=u||(h?void 0:c))?u.allKeys:void 0;return this._trans("readwrite",function(v){var C=f.schema.primKey,b=C.auto,C=C.keyPath;if(C&&h)throw new it.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(h&&h.length!==a.length)throw new it.InvalidArgument("Arguments objects and keys must have the same length");var x=a.length,C=C&&b?a.map(bs(C)):a;return f.core.mutate({trans:v,type:"add",keys:h,values:C,wantResults:g}).then(function(O){var _=O.numFailures,I=O.results,w=O.lastResult,O=O.failures;if(_===0)return g?I:w;throw new ae("".concat(f.name,".bulkAdd(): ").concat(_," of ").concat(x," operations failed"),O)})})},jt.prototype.bulkPut=function(a,c,u){var f=this,h=Array.isArray(c)?c:void 0,g=(u=u||(h?void 0:c))?u.allKeys:void 0;return this._trans("readwrite",function(v){var C=f.schema.primKey,b=C.auto,C=C.keyPath;if(C&&h)throw new it.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(h&&h.length!==a.length)throw new it.InvalidArgument("Arguments objects and keys must have the same length");var x=a.length,C=C&&b?a.map(bs(C)):a;return f.core.mutate({trans:v,type:"put",keys:h,values:C,wantResults:g}).then(function(O){var _=O.numFailures,I=O.results,w=O.lastResult,O=O.failures;if(_===0)return g?I:w;throw new ae("".concat(f.name,".bulkPut(): ").concat(_," of ").concat(x," operations failed"),O)})})},jt.prototype.bulkUpdate=function(a){var c=this,u=this.core,f=a.map(function(v){return v.key}),h=a.map(function(v){return v.changes}),g=[];return this._trans("readwrite",function(v){return u.getMany({trans:v,keys:f,cache:"clone"}).then(function(b){var x=[],C=[];a.forEach(function(_,I){var w=_.key,O=_.changes,A=b[I];if(A){for(var R=0,T=Object.keys(O);R<T.length;R++){var P=T[R],N=O[P];if(P===c.schema.primKey.keyPath){if(_t(N,w)!==0)throw new it.Constraint("Cannot update primary key in bulkUpdate()")}else st(A,P,N)}g.push(I),x.push(w),C.push(A)}});var E=x.length;return u.mutate({trans:v,type:"put",keys:x,values:C,updates:{keys:f,changeSpecs:h}}).then(function(_){var I=_.numFailures,w=_.failures;if(I===0)return E;for(var O=0,A=Object.keys(w);O<A.length;O++){var R,T=A[O],P=g[Number(T)];P!=null&&(R=w[T],delete w[T],w[P]=R)}throw new ae("".concat(c.name,".bulkUpdate(): ").concat(I," of ").concat(E," operations failed"),w)})})})},jt.prototype.bulkDelete=function(a){var c=this,u=a.length;return this._trans("readwrite",function(f){return c.core.mutate({trans:f,type:"delete",keys:a})}).then(function(v){var h=v.numFailures,g=v.lastResult,v=v.failures;if(h===0)return g;throw new ae("".concat(c.name,".bulkDelete(): ").concat(h," of ").concat(u," operations failed"),v)})},jt);function jt(){}function Ho(a){function c(v,b){if(b){for(var x=arguments.length,C=new Array(x-1);--x;)C[x-1]=arguments[x];return u[v].subscribe.apply(null,C),a}if(typeof v=="string")return u[v]}var u={};c.addEventType=g;for(var f=1,h=arguments.length;f<h;++f)g(arguments[f]);return c;function g(v,b,x){if(typeof v!="object"){var C;b=b||W_;var E={subscribers:[],fire:x=x||It,subscribe:function(_){E.subscribers.indexOf(_)===-1&&(E.subscribers.push(_),E.fire=b(E.fire,_))},unsubscribe:function(_){E.subscribers=E.subscribers.filter(function(I){return I!==_}),E.fire=E.subscribers.reduce(b,x)}};return u[v]=c[v]=E}i(C=v).forEach(function(_){var I=C[_];if(o(I))g(_,C[_][0],C[_][1]);else{if(I!=="asap")throw new it.InvalidArgument("Invalid event config");var w=g(_,jo,function(){for(var O=arguments.length,A=new Array(O);O--;)A[O]=arguments[O];w.subscribers.forEach(function(R){tt(function(){R.apply(null,A)})})})}})}}function Wo(a,c){return D(c).from({prototype:a}),c}function Ui(a,c){return!(a.filter||a.algorithm||a.or)&&(c?a.justLimit:!a.replayFilter)}function uu(a,c){a.filter=ii(a.filter,c)}function du(a,c,u){var f=a.replayFilter;a.replayFilter=f?function(){return ii(f(),c())}:c,a.justLimit=u&&!f}function _s(a,c){if(a.isPrimKey)return c.primaryKey;var u=c.getIndexByKeyPath(a.index);if(!u)throw new it.Schema("KeyPath "+a.index+" on object store "+c.name+" is not indexed");return u}function Kh(a,c,u){var f=_s(a,c.schema);return c.openCursor({trans:u,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:f,range:a.range}})}function xs(a,c,u,f){var h=a.replayFilter?ii(a.filter,a.replayFilter()):a.filter;if(a.or){var g={},v=function(b,x,C){var E,_;h&&!h(x,C,function(I){return x.stop(I)},function(I){return x.fail(I)})||((_=""+(E=x.primaryKey))=="[object ArrayBuffer]"&&(_=""+new Uint8Array(E)),p(g,_)||(g[_]=!0,c(b,x,C)))};return Promise.all([a.or._iterate(v,u),Gh(Kh(a,f,u),a.algorithm,v,!a.keysOnly&&a.valueMapper)])}return Gh(Kh(a,f,u),ii(a.algorithm,h),c,!a.keysOnly&&a.valueMapper)}function Gh(a,c,u,f){var h=Ut(f?function(g,v,b){return u(f(g),v,b)}:u);return a.then(function(g){if(g)return g.start(function(){var v=function(){return g.continue()};c&&!c(g,function(b){return v=b},function(b){g.stop(b),v=It},function(b){g.fail(b),v=It})||h(g.value,g,function(b){return v=b}),v()})})}var Kr=Symbol(),Ko=(Qh.prototype.execute=function(a){if(this.add!==void 0){var c=this.add;if(o(c))return r(r([],o(a)?a:[],!0),c,!0).sort();if(typeof c=="number")return(Number(a)||0)+c;if(typeof c=="bigint")try{return BigInt(a)+c}catch{return BigInt(0)+c}throw new TypeError("Invalid term ".concat(c))}if(this.remove!==void 0){var u=this.remove;if(o(u))return o(a)?a.filter(function(f){return!u.includes(f)}).sort():[];if(typeof u=="number")return Number(a)-u;if(typeof u=="bigint")try{return BigInt(a)-u}catch{return BigInt(0)-u}throw new TypeError("Invalid subtrahend ".concat(u))}return c=(c=this.replacePrefix)===null||c===void 0?void 0:c[0],c&&typeof a=="string"&&a.startsWith(c)?this.replacePrefix[1]+a.substring(c.length):a},Qh);function Qh(a){Object.assign(this,a)}var Z_=(wt.prototype._read=function(a,c){var u=this._ctx;return u.error?u.table._trans(null,Kt.bind(null,u.error)):u.table._trans("readonly",a).then(c)},wt.prototype._write=function(a){var c=this._ctx;return c.error?c.table._trans(null,Kt.bind(null,c.error)):c.table._trans("readwrite",a,"locked")},wt.prototype._addAlgorithm=function(a){var c=this._ctx;c.algorithm=ii(c.algorithm,a)},wt.prototype._iterate=function(a,c){return xs(this._ctx,a,c,this._ctx.table.core)},wt.prototype.clone=function(a){var c=Object.create(this.constructor.prototype),u=Object.create(this._ctx);return a&&s(u,a),c._ctx=u,c},wt.prototype.raw=function(){return this._ctx.valueMapper=null,this},wt.prototype.each=function(a){var c=this._ctx;return this._read(function(u){return xs(c,a,u,c.table.core)})},wt.prototype.count=function(a){var c=this;return this._read(function(u){var f=c._ctx,h=f.table.core;if(Ui(f,!0))return h.count({trans:u,query:{index:_s(f,h.schema),range:f.range}}).then(function(v){return Math.min(v,f.limit)});var g=0;return xs(f,function(){return++g,!1},u,h).then(function(){return g})}).then(a)},wt.prototype.sortBy=function(a,c){var u=a.split(".").reverse(),f=u[0],h=u.length-1;function g(x,C){return C?g(x[u[C]],C-1):x[f]}var v=this._ctx.dir==="next"?1:-1;function b(x,C){return _t(g(x,h),g(C,h))*v}return this.toArray(function(x){return x.sort(b)}).then(c)},wt.prototype.toArray=function(a){var c=this;return this._read(function(u){var f=c._ctx;if(f.dir==="next"&&Ui(f,!0)&&0<f.limit){var h=f.valueMapper,g=_s(f,f.table.core.schema);return f.table.core.query({trans:u,limit:f.limit,values:!0,query:{index:g,range:f.range}}).then(function(b){return b=b.result,h?b.map(h):b})}var v=[];return xs(f,function(b){return v.push(b)},u,f.table.core).then(function(){return v})},a)},wt.prototype.offset=function(a){var c=this._ctx;return a<=0||(c.offset+=a,Ui(c)?du(c,function(){var u=a;return function(f,h){return u===0||(u===1?--u:h(function(){f.advance(u),u=0}),!1)}}):du(c,function(){var u=a;return function(){return--u<0}})),this},wt.prototype.limit=function(a){return this._ctx.limit=Math.min(this._ctx.limit,a),du(this._ctx,function(){var c=a;return function(u,f,h){return--c<=0&&f(h),0<=c}},!0),this},wt.prototype.until=function(a,c){return uu(this._ctx,function(u,f,h){return!a(u.value)||(f(h),c)}),this},wt.prototype.first=function(a){return this.limit(1).toArray(function(c){return c[0]}).then(a)},wt.prototype.last=function(a){return this.reverse().first(a)},wt.prototype.filter=function(a){var c;return uu(this._ctx,function(u){return a(u.value)}),(c=this._ctx).isMatch=ii(c.isMatch,a),this},wt.prototype.and=function(a){return this.filter(a)},wt.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)},wt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},wt.prototype.desc=function(){return this.reverse()},wt.prototype.eachKey=function(a){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(u,f){a(f.key,f)})},wt.prototype.eachUniqueKey=function(a){return this._ctx.unique="unique",this.eachKey(a)},wt.prototype.eachPrimaryKey=function(a){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(u,f){a(f.primaryKey,f)})},wt.prototype.keys=function(a){var c=this._ctx;c.keysOnly=!c.isMatch;var u=[];return this.each(function(f,h){u.push(h.key)}).then(function(){return u}).then(a)},wt.prototype.primaryKeys=function(a){var c=this._ctx;if(c.dir==="next"&&Ui(c,!0)&&0<c.limit)return this._read(function(f){var h=_s(c,c.table.core.schema);return c.table.core.query({trans:f,values:!1,limit:c.limit,query:{index:h,range:c.range}})}).then(function(f){return f.result}).then(a);c.keysOnly=!c.isMatch;var u=[];return this.each(function(f,h){u.push(h.primaryKey)}).then(function(){return u}).then(a)},wt.prototype.uniqueKeys=function(a){return this._ctx.unique="unique",this.keys(a)},wt.prototype.firstKey=function(a){return this.limit(1).keys(function(c){return c[0]}).then(a)},wt.prototype.lastKey=function(a){return this.reverse().firstKey(a)},wt.prototype.distinct=function(){var a=this._ctx,a=a.index&&a.table.schema.idxByName[a.index];if(!a||!a.multi)return this;var c={};return uu(this._ctx,function(h){var f=h.primaryKey.toString(),h=p(c,f);return c[f]=!0,!h}),this},wt.prototype.modify=function(a){var c=this,u=this._ctx;return this._write(function(f){var h,g,v;v=typeof a=="function"?a:(h=i(a),g=h.length,function(R){for(var T=!1,P=0;P<g;++P){var N=h[P],B=a[N],V=At(R,N);B instanceof Ko?(st(R,N,B.execute(V)),T=!0):V!==B&&(st(R,N,B),T=!0)}return T});var b=u.table.core,_=b.schema.primaryKey,x=_.outbound,C=_.extractKey,E=200,_=c.db._options.modifyChunkSize;_&&(E=typeof _=="object"?_[b.name]||_["*"]||200:_);function I(R,N){var P=N.failures,N=N.numFailures;O+=R-N;for(var B=0,V=i(P);B<V.length;B++){var K=V[B];w.push(P[K])}}var w=[],O=0,A=[];return c.clone().primaryKeys().then(function(R){function T(N){var B=Math.min(E,R.length-N);return b.getMany({trans:f,keys:R.slice(N,N+B),cache:"immutable"}).then(function(V){for(var K=[],q=[],H=x?[]:null,Q=[],W=0;W<B;++W){var Z=V[W],mt={value:cr(Z),primKey:R[N+W]};v.call(mt,mt.value,mt)!==!1&&(mt.value==null?Q.push(R[N+W]):x||_t(C(Z),C(mt.value))===0?(q.push(mt.value),x&&H.push(R[N+W])):(Q.push(R[N+W]),K.push(mt.value)))}return Promise.resolve(0<K.length&&b.mutate({trans:f,type:"add",values:K}).then(function(vt){for(var yt in vt.failures)Q.splice(parseInt(yt),1);I(K.length,vt)})).then(function(){return(0<q.length||P&&typeof a=="object")&&b.mutate({trans:f,type:"put",keys:H,values:q,criteria:P,changeSpec:typeof a!="function"&&a,isAdditionalChunk:0<N}).then(function(vt){return I(q.length,vt)})}).then(function(){return(0<Q.length||P&&a===fu)&&b.mutate({trans:f,type:"delete",keys:Q,criteria:P,isAdditionalChunk:0<N}).then(function(vt){return I(Q.length,vt)})}).then(function(){return R.length>N+B&&T(N+E)})})}var P=Ui(u)&&u.limit===1/0&&(typeof a!="function"||a===fu)&&{index:u.index,range:u.range};return T(0).then(function(){if(0<w.length)throw new oe("Error modifying one or more objects",w,O,A);return R.length})})})},wt.prototype.delete=function(){var a=this._ctx,c=a.range;return Ui(a)&&(a.isPrimKey||c.type===3)?this._write(function(u){var f=a.table.core.schema.primaryKey,h=c;return a.table.core.count({trans:u,query:{index:f,range:h}}).then(function(g){return a.table.core.mutate({trans:u,type:"deleteRange",range:h}).then(function(v){var b=v.failures;if(v.lastResult,v.results,v=v.numFailures,v)throw new oe("Could not delete some values",Object.keys(b).map(function(x){return b[x]}),g-v);return g-v})})}):this.modify(fu)},wt);function wt(){}var fu=function(a,c){return c.value=null};function J_(a,c){return a<c?-1:a===c?0:1}function tx(a,c){return c<a?-1:a===c?0:1}function Fe(a,c,u){return a=a instanceof Xh?new a.Collection(a):a,a._ctx.error=new(u||TypeError)(c),a}function zi(a){return new a.Collection(a,function(){return Yh("")}).limit(0)}function ws(a,c,u,f){var h,g,v,b,x,C,E,_=u.length;if(!u.every(function(O){return typeof O=="string"}))return Fe(a,Uh);function I(O){h=O==="next"?function(R){return R.toUpperCase()}:function(R){return R.toLowerCase()},g=O==="next"?function(R){return R.toLowerCase()}:function(R){return R.toUpperCase()},v=O==="next"?J_:tx;var A=u.map(function(R){return{lower:g(R),upper:h(R)}}).sort(function(R,T){return v(R.lower,T.lower)});b=A.map(function(R){return R.upper}),x=A.map(function(R){return R.lower}),E=(C=O)==="next"?"":f}I("next"),a=new a.Collection(a,function(){return xn(b[0],x[_-1]+f)}),a._ondirectionchange=function(O){I(O)};var w=0;return a._addAlgorithm(function(O,A,R){var T=O.key;if(typeof T!="string")return!1;var P=g(T);if(c(P,x,w))return!0;for(var N=null,B=w;B<_;++B){var V=function(K,q,H,Q,W,Z){for(var mt=Math.min(K.length,Q.length),vt=-1,yt=0;yt<mt;++yt){var je=q[yt];if(je!==Q[yt])return W(K[yt],H[yt])<0?K.substr(0,yt)+H[yt]+H.substr(yt+1):W(K[yt],Q[yt])<0?K.substr(0,yt)+Q[yt]+H.substr(yt+1):0<=vt?K.substr(0,vt)+q[vt]+H.substr(vt+1):null;W(K[yt],je)<0&&(vt=yt)}return mt<Q.length&&Z==="next"?K+H.substr(K.length):mt<K.length&&Z==="prev"?K.substr(0,H.length):vt<0?null:K.substr(0,vt)+Q[vt]+H.substr(vt+1)}(T,P,b[B],x[B],v,C);V===null&&N===null?w=B+1:(N===null||0<v(N,V))&&(N=V)}return A(N!==null?function(){O.continue(N+E)}:R),!1}),a}function xn(a,c,u,f){return{type:2,lower:a,upper:c,lowerOpen:u,upperOpen:f}}function Yh(a){return{type:1,lower:a,upper:a}}var Xh=(Object.defineProperty(ce.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),ce.prototype.between=function(a,c,u,f){u=u!==!1,f=f===!0;try{return 0<this._cmp(a,c)||this._cmp(a,c)===0&&(u||f)&&(!u||!f)?zi(this):new this.Collection(this,function(){return xn(a,c,!u,!f)})}catch{return Fe(this,Wr)}},ce.prototype.equals=function(a){return a==null?Fe(this,Wr):new this.Collection(this,function(){return Yh(a)})},ce.prototype.above=function(a){return a==null?Fe(this,Wr):new this.Collection(this,function(){return xn(a,void 0,!0)})},ce.prototype.aboveOrEqual=function(a){return a==null?Fe(this,Wr):new this.Collection(this,function(){return xn(a,void 0,!1)})},ce.prototype.below=function(a){return a==null?Fe(this,Wr):new this.Collection(this,function(){return xn(void 0,a,!1,!0)})},ce.prototype.belowOrEqual=function(a){return a==null?Fe(this,Wr):new this.Collection(this,function(){return xn(void 0,a)})},ce.prototype.startsWith=function(a){return typeof a!="string"?Fe(this,Uh):this.between(a,a+ni,!0,!0)},ce.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):ws(this,function(c,u){return c.indexOf(u[0])===0},[a],ni)},ce.prototype.equalsIgnoreCase=function(a){return ws(this,function(c,u){return c===u[0]},[a],"")},ce.prototype.anyOfIgnoreCase=function(){var a=Me.apply(pn,arguments);return a.length===0?zi(this):ws(this,function(c,u){return u.indexOf(c)!==-1},a,"")},ce.prototype.startsWithAnyOfIgnoreCase=function(){var a=Me.apply(pn,arguments);return a.length===0?zi(this):ws(this,function(c,u){return u.some(function(f){return c.indexOf(f)===0})},a,ni)},ce.prototype.anyOf=function(){var a=this,c=Me.apply(pn,arguments),u=this._cmp;try{c.sort(u)}catch{return Fe(this,Wr)}if(c.length===0)return zi(this);var f=new this.Collection(this,function(){return xn(c[0],c[c.length-1])});f._ondirectionchange=function(g){u=g==="next"?a._ascending:a._descending,c.sort(u)};var h=0;return f._addAlgorithm(function(g,v,b){for(var x=g.key;0<u(x,c[h]);)if(++h===c.length)return v(b),!1;return u(x,c[h])===0||(v(function(){g.continue(c[h])}),!1)}),f},ce.prototype.notEqual=function(a){return this.inAnyRange([[-1/0,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},ce.prototype.noneOf=function(){var a=Me.apply(pn,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch{return Fe(this,Wr)}var c=a.reduce(function(u,f){return u?u.concat([[u[u.length-1][1],f]]):[[-1/0,f]]},null);return c.push([a[a.length-1],this.db._maxKey]),this.inAnyRange(c,{includeLowers:!1,includeUppers:!1})},ce.prototype.inAnyRange=function(T,c){var u=this,f=this._cmp,h=this._ascending,g=this._descending,v=this._min,b=this._max;if(T.length===0)return zi(this);if(!T.every(function(P){return P[0]!==void 0&&P[1]!==void 0&&h(P[0],P[1])<=0}))return Fe(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",it.InvalidArgument);var x=!c||c.includeLowers!==!1,C=c&&c.includeUppers===!0,E,_=h;function I(P,N){return _(P[0],N[0])}try{(E=T.reduce(function(P,N){for(var B=0,V=P.length;B<V;++B){var K=P[B];if(f(N[0],K[1])<0&&0<f(N[1],K[0])){K[0]=v(K[0],N[0]),K[1]=b(K[1],N[1]);break}}return B===V&&P.push(N),P},[])).sort(I)}catch{return Fe(this,Wr)}var w=0,O=C?function(P){return 0<h(P,E[w][1])}:function(P){return 0<=h(P,E[w][1])},A=x?function(P){return 0<g(P,E[w][0])}:function(P){return 0<=g(P,E[w][0])},R=O,T=new this.Collection(this,function(){return xn(E[0][0],E[E.length-1][1],!x,!C)});return T._ondirectionchange=function(P){_=P==="next"?(R=O,h):(R=A,g),E.sort(I)},T._addAlgorithm(function(P,N,B){for(var V,K=P.key;R(K);)if(++w===E.length)return N(B),!1;return!O(V=K)&&!A(V)||(u._cmp(K,E[w][1])===0||u._cmp(K,E[w][0])===0||N(function(){_===h?P.continue(E[w][0]):P.continue(E[w][1])}),!1)}),T},ce.prototype.startsWithAnyOf=function(){var a=Me.apply(pn,arguments);return a.every(function(c){return typeof c=="string"})?a.length===0?zi(this):this.inAnyRange(a.map(function(c){return[c,c+ni]})):Fe(this,"startsWithAnyOf() only works with strings")},ce);function ce(){}function Cr(a){return Ut(function(c){return Go(c),a(c.target.error),!1})}function Go(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var Qo="storagemutated",hu="x-storagemutated-1",wn=Ho(null,Qo),ex=(Sr.prototype._lock=function(){return rt(!et.global),++this._reculock,this._reculock!==1||et.global||(et.lockOwnerFor=this),this},Sr.prototype._unlock=function(){if(rt(!et.global),--this._reculock==0)for(et.global||(et.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var a=this._blockedFuncs.shift();try{ri(a[1],a[0])}catch{}}return this},Sr.prototype._locked=function(){return this._reculock&&et.lockOwnerFor!==this},Sr.prototype.create=function(a){var c=this;if(!this.mode)return this;var u=this.db.idbdb,f=this.db._state.dbOpenError;if(rt(!this.idbtrans),!a&&!u)switch(f&&f.name){case"DatabaseClosedError":throw new it.DatabaseClosed(f);case"MissingAPIError":throw new it.MissingAPI(f.message,f);default:throw new it.OpenFailed(f)}if(!this.active)throw new it.TransactionInactive;return rt(this._completion._state===null),(a=this.idbtrans=a||(this.db.core||u).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ut(function(h){Go(h),c._reject(a.error)}),a.onabort=Ut(function(h){Go(h),c.active&&c._reject(new it.Abort(a.error)),c.active=!1,c.on("abort").fire(h)}),a.oncomplete=Ut(function(){c.active=!1,c._resolve(),"mutatedParts"in a&&wn.storagemutated.fire(a.mutatedParts)}),this},Sr.prototype._promise=function(a,c,u){var f=this;if(a==="readwrite"&&this.mode!=="readwrite")return Kt(new it.ReadOnly("Transaction is readonly"));if(!this.active)return Kt(new it.TransactionInactive);if(this._locked())return new Y(function(g,v){f._blockedFuncs.push([function(){f._promise(a,c,u).then(g,v)},et])});if(u)return yn(function(){var g=new Y(function(v,b){f._lock();var x=c(v,b,f);x&&x.then&&x.then(v,b)});return g.finally(function(){return f._unlock()}),g._lib=!0,g});var h=new Y(function(g,v){var b=c(g,v,f);b&&b.then&&b.then(g,v)});return h._lib=!0,h},Sr.prototype._root=function(){return this.parent?this.parent._root():this},Sr.prototype.waitFor=function(a){var c,u=this._root(),f=Y.resolve(a);u._waitingFor?u._waitingFor=u._waitingFor.then(function(){return f}):(u._waitingFor=f,u._waitingQueue=[],c=u.idbtrans.objectStore(u.storeNames[0]),function g(){for(++u._spinCount;u._waitingQueue.length;)u._waitingQueue.shift()();u._waitingFor&&(c.get(-1/0).onsuccess=g)}());var h=u._waitingFor;return new Y(function(g,v){f.then(function(b){return u._waitingQueue.push(Ut(g.bind(null,b)))},function(b){return u._waitingQueue.push(Ut(v.bind(null,b)))}).finally(function(){u._waitingFor===h&&(u._waitingFor=null)})})},Sr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new it.Abort))},Sr.prototype.table=function(a){var c=this._memoizedTables||(this._memoizedTables={});if(p(c,a))return c[a];var u=this.schema[a];if(!u)throw new it.NotFound("Table "+a+" not part of transaction");return u=new this.db.Table(a,u,this),u.core=this.db.core.table(a),c[a]=u},Sr);function Sr(){}function pu(a,c,u,f,h,g,v){return{name:a,keyPath:c,unique:u,multi:f,auto:h,compound:g,src:(u&&!v?"&":"")+(f?"*":"")+(h?"++":"")+Zh(c)}}function Zh(a){return typeof a=="string"?a:a?"["+[].join.call(a,"+")+"]":""}function mu(a,c,u){return{name:a,primKey:c,indexes:u,mappedClass:null,idxByName:(f=function(h){return[h.name,h]},u.reduce(function(h,g,v){return v=f(g,v),v&&(h[v[0]]=v[1]),h},{}))};var f}var Yo=function(a){try{return a.only([[]]),Yo=function(){return[[]]},[[]]}catch{return Yo=function(){return ni},ni}};function gu(a){return a==null?function(){}:typeof a=="string"?(c=a).split(".").length===1?function(u){return u[c]}:function(u){return At(u,c)}:function(u){return At(u,a)};var c}function Jh(a){return[].slice.call(a)}var rx=0;function Xo(a){return a==null?":id":typeof a=="string"?a:"[".concat(a.join("+"),"]")}function nx(a,c,x){function f(R){if(R.type===3)return null;if(R.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var w=R.lower,O=R.upper,A=R.lowerOpen,R=R.upperOpen;return w===void 0?O===void 0?null:c.upperBound(O,!!R):O===void 0?c.lowerBound(w,!!A):c.bound(w,O,!!A,!!R)}function h(I){var w,O=I.name;return{name:O,schema:I,mutate:function(A){var R=A.trans,T=A.type,P=A.keys,N=A.values,B=A.range;return new Promise(function(V,K){V=Ut(V);var q=R.objectStore(O),H=q.keyPath==null,Q=T==="put"||T==="add";if(!Q&&T!=="delete"&&T!=="deleteRange")throw new Error("Invalid operation type: "+T);var W,Z=(P||N||{length:1}).length;if(P&&N&&P.length!==N.length)throw new Error("Given keys array must have same length as given values array.");if(Z===0)return V({numFailures:0,failures:{},results:[],lastResult:void 0});function mt(Ee){++je,Go(Ee)}var vt=[],yt=[],je=0;if(T==="deleteRange"){if(B.type===4)return V({numFailures:je,failures:yt,results:[],lastResult:void 0});B.type===3?vt.push(W=q.clear()):vt.push(W=q.delete(f(B)))}else{var H=Q?H?[N,P]:[N,null]:[P,null],pt=H[0],_e=H[1];if(Q)for(var xe=0;xe<Z;++xe)vt.push(W=_e&&_e[xe]!==void 0?q[T](pt[xe],_e[xe]):q[T](pt[xe])),W.onerror=mt;else for(xe=0;xe<Z;++xe)vt.push(W=q[T](pt[xe])),W.onerror=mt}function Ns(Ee){Ee=Ee.target.result,vt.forEach(function(si,Mu){return si.error!=null&&(yt[Mu]=si.error)}),V({numFailures:je,failures:yt,results:T==="delete"?P:vt.map(function(si){return si.result}),lastResult:Ee})}W.onerror=function(Ee){mt(Ee),Ns(Ee)},W.onsuccess=Ns})},getMany:function(A){var R=A.trans,T=A.keys;return new Promise(function(P,N){P=Ut(P);for(var B,V=R.objectStore(O),K=T.length,q=new Array(K),H=0,Q=0,W=function(vt){vt=vt.target,q[vt._pos]=vt.result,++Q===H&&P(q)},Z=Cr(N),mt=0;mt<K;++mt)T[mt]!=null&&((B=V.get(T[mt]))._pos=mt,B.onsuccess=W,B.onerror=Z,++H);H===0&&P(q)})},get:function(A){var R=A.trans,T=A.key;return new Promise(function(P,N){P=Ut(P);var B=R.objectStore(O).get(T);B.onsuccess=function(V){return P(V.target.result)},B.onerror=Cr(N)})},query:(w=C,function(A){return new Promise(function(R,T){R=Ut(R);var P,N,B,H=A.trans,V=A.values,K=A.limit,W=A.query,q=K===1/0?void 0:K,Q=W.index,W=W.range,H=H.objectStore(O),Q=Q.isPrimaryKey?H:H.index(Q.name),W=f(W);if(K===0)return R({result:[]});w?((q=V?Q.getAll(W,q):Q.getAllKeys(W,q)).onsuccess=function(Z){return R({result:Z.target.result})},q.onerror=Cr(T)):(P=0,N=!V&&"openKeyCursor"in Q?Q.openKeyCursor(W):Q.openCursor(W),B=[],N.onsuccess=function(Z){var mt=N.result;return mt?(B.push(V?mt.value:mt.primaryKey),++P===K?R({result:B}):void mt.continue()):R({result:B})},N.onerror=Cr(T))})}),openCursor:function(A){var R=A.trans,T=A.values,P=A.query,N=A.reverse,B=A.unique;return new Promise(function(V,K){V=Ut(V);var Q=P.index,q=P.range,H=R.objectStore(O),H=Q.isPrimaryKey?H:H.index(Q.name),Q=N?B?"prevunique":"prev":B?"nextunique":"next",W=!T&&"openKeyCursor"in H?H.openKeyCursor(f(q),Q):H.openCursor(f(q),Q);W.onerror=Cr(K),W.onsuccess=Ut(function(Z){var mt,vt,yt,je,pt=W.result;pt?(pt.___id=++rx,pt.done=!1,mt=pt.continue.bind(pt),vt=(vt=pt.continuePrimaryKey)&&vt.bind(pt),yt=pt.advance.bind(pt),je=function(){throw new Error("Cursor not stopped")},pt.trans=R,pt.stop=pt.continue=pt.continuePrimaryKey=pt.advance=function(){throw new Error("Cursor not started")},pt.fail=Ut(K),pt.next=function(){var _e=this,xe=1;return this.start(function(){return xe--?_e.continue():_e.stop()}).then(function(){return _e})},pt.start=function(_e){function xe(){if(W.result)try{_e()}catch(Ee){pt.fail(Ee)}else pt.done=!0,pt.start=function(){throw new Error("Cursor behind last entry")},pt.stop()}var Ns=new Promise(function(Ee,si){Ee=Ut(Ee),W.onerror=Cr(si),pt.fail=si,pt.stop=function(Mu){pt.stop=pt.continue=pt.continuePrimaryKey=pt.advance=je,Ee(Mu)}});return W.onsuccess=Ut(function(Ee){W.onsuccess=xe,xe()}),pt.continue=mt,pt.continuePrimaryKey=vt,pt.advance=yt,xe(),Ns},V(pt)):V(null)},K)})},count:function(A){var R=A.query,T=A.trans,P=R.index,N=R.range;return new Promise(function(B,V){var K=T.objectStore(O),q=P.isPrimaryKey?K:K.index(P.name),K=f(N),q=K?q.count(K):q.count();q.onsuccess=Ut(function(H){return B(H.target.result)}),q.onerror=Cr(V)})}}}var g,v,b,E=(v=x,b=Jh((g=a).objectStoreNames),{schema:{name:g.name,tables:b.map(function(I){return v.objectStore(I)}).map(function(I){var w=I.keyPath,R=I.autoIncrement,O=o(w),A={},R={name:I.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:w==null,compound:O,keyPath:w,autoIncrement:R,unique:!0,extractKey:gu(w)},indexes:Jh(I.indexNames).map(function(T){return I.index(T)}).map(function(B){var P=B.name,N=B.unique,V=B.multiEntry,B=B.keyPath,V={name:P,compound:o(B),keyPath:B,unique:N,multiEntry:V,extractKey:gu(B)};return A[Xo(B)]=V}),getIndexByKeyPath:function(T){return A[Xo(T)]}};return A[":id"]=R.primaryKey,w!=null&&(A[Xo(w)]=R.primaryKey),R})},hasGetAll:0<b.length&&"getAll"in v.objectStore(b[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),x=E.schema,C=E.hasGetAll,E=x.tables.map(h),_={};return E.forEach(function(I){return _[I.name]=I}),{stack:"dbcore",transaction:a.transaction.bind(a),table:function(I){if(!_[I])throw new Error("Table '".concat(I,"' not found"));return _[I]},MIN_KEY:-1/0,MAX_KEY:Yo(c),schema:x}}function ix(a,c,u,f){var h=u.IDBKeyRange;return u.indexedDB,{dbcore:(f=nx(c,h,f),a.dbcore.reduce(function(g,v){return v=v.create,e(e({},g),v(g))},f))}}function Cs(a,f){var u=f.db,f=ix(a._middlewares,u,a._deps,f);a.core=f.dbcore,a.tables.forEach(function(h){var g=h.name;a.core.schema.tables.some(function(v){return v.name===g})&&(h.core=a.core.table(g),a[g]instanceof a.Table&&(a[g].core=h.core))})}function Ss(a,c,u,f){u.forEach(function(h){var g=f[h];c.forEach(function(v){var b=function x(C,E){return M(C,E)||(C=l(C))&&x(C,E)}(v,h);(!b||"value"in b&&b.value===void 0)&&(v===a.Transaction.prototype||v instanceof a.Transaction?S(v,h,{get:function(){return this.table(h)},set:function(x){y(this,h,{value:x,writable:!0,configurable:!0,enumerable:!0})}}):v[h]=new a.Table(h,g))})})}function vu(a,c){c.forEach(function(u){for(var f in u)u[f]instanceof a.Table&&delete u[f]})}function ox(a,c){return a._cfg.version-c._cfg.version}function ax(a,c,u,f){var h=a._dbSchema;u.objectStoreNames.contains("$meta")&&!h.$meta&&(h.$meta=mu("$meta",ep("")[0],[]),a._storeNames.push("$meta"));var g=a._createTransaction("readwrite",a._storeNames,h);g.create(u),g._completion.catch(f);var v=g._reject.bind(g),b=et.transless||et;yn(function(){return et.trans=g,et.transless=b,c!==0?(Cs(a,u),C=c,((x=g).storeNames.includes("$meta")?x.table("$meta").get("version").then(function(E){return E??C}):Y.resolve(C)).then(function(E){return I=E,w=g,O=u,A=[],E=(_=a)._versions,R=_._dbSchema=Os(0,_.idbdb,O),(E=E.filter(function(T){return T._cfg.version>=I})).length!==0?(E.forEach(function(T){A.push(function(){var P=R,N=T._cfg.dbschema;Es(_,P,O),Es(_,N,O),R=_._dbSchema=N;var B=yu(P,N);B.add.forEach(function(Q){bu(O,Q[0],Q[1].primKey,Q[1].indexes)}),B.change.forEach(function(Q){if(Q.recreate)throw new it.Upgrade("Not yet support for changing primary key");var W=O.objectStore(Q.name);Q.add.forEach(function(Z){return Rs(W,Z)}),Q.change.forEach(function(Z){W.deleteIndex(Z.name),Rs(W,Z)}),Q.del.forEach(function(Z){return W.deleteIndex(Z)})});var V=T._cfg.contentUpgrade;if(V&&T._cfg.version>I){Cs(_,O),w._memoizedTables={};var K=Pt(N);B.del.forEach(function(Q){K[Q]=P[Q]}),vu(_,[_.Transaction.prototype]),Ss(_,[_.Transaction.prototype],i(K),K),w.schema=K;var q,H=mn(V);return H&&Fi(),B=Y.follow(function(){var Q;(q=V(w))&&H&&(Q=bn.bind(null,null),q.then(Q,Q))}),q&&typeof q.then=="function"?Y.resolve(q):B.then(function(){return q})}}),A.push(function(P){var N,B,V=T._cfg.dbschema;N=V,B=P,[].slice.call(B.db.objectStoreNames).forEach(function(K){return N[K]==null&&B.db.deleteObjectStore(K)}),vu(_,[_.Transaction.prototype]),Ss(_,[_.Transaction.prototype],_._storeNames,_._dbSchema),w.schema=_._dbSchema}),A.push(function(P){_.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(_.idbdb.version/10)===T._cfg.version?(_.idbdb.deleteObjectStore("$meta"),delete _._dbSchema.$meta,_._storeNames=_._storeNames.filter(function(N){return N!=="$meta"})):P.objectStore("$meta").put(T._cfg.version,"version"))})}),function T(){return A.length?Y.resolve(A.shift()(w.idbtrans)).then(T):Y.resolve()}().then(function(){tp(R,O)})):Y.resolve();var _,I,w,O,A,R}).catch(v)):(i(h).forEach(function(E){bu(u,E,h[E].primKey,h[E].indexes)}),Cs(a,u),void Y.follow(function(){return a.on.populate.fire(g)}).catch(v));var x,C})}function sx(a,c){tp(a._dbSchema,c),c.db.version%10!=0||c.objectStoreNames.contains("$meta")||c.db.createObjectStore("$meta").add(Math.ceil(c.db.version/10-1),"version");var u=Os(0,a.idbdb,c);Es(a,a._dbSchema,c);for(var f=0,h=yu(u,a._dbSchema).change;f<h.length;f++){var g=function(v){if(v.change.length||v.recreate)return console.warn("Unable to patch indexes of table ".concat(v.name," because it has changes on the type of index or primary key.")),{value:void 0};var b=c.objectStore(v.name);v.add.forEach(function(x){wr&&console.debug("Dexie upgrade patch: Creating missing index ".concat(v.name,".").concat(x.src)),Rs(b,x)})}(h[f]);if(typeof g=="object")return g.value}}function yu(a,c){var u,f={del:[],add:[],change:[]};for(u in a)c[u]||f.del.push(u);for(u in c){var h=a[u],g=c[u];if(h){var v={name:u,def:g,recreate:!1,del:[],add:[],change:[]};if(""+(h.primKey.keyPath||"")!=""+(g.primKey.keyPath||"")||h.primKey.auto!==g.primKey.auto)v.recreate=!0,f.change.push(v);else{var b=h.idxByName,x=g.idxByName,C=void 0;for(C in b)x[C]||v.del.push(C);for(C in x){var E=b[C],_=x[C];E?E.src!==_.src&&v.change.push(_):v.add.push(_)}(0<v.del.length||0<v.add.length||0<v.change.length)&&f.change.push(v)}}else f.add.push([u,g])}return f}function bu(a,c,u,f){var h=a.db.createObjectStore(c,u.keyPath?{keyPath:u.keyPath,autoIncrement:u.auto}:{autoIncrement:u.auto});return f.forEach(function(g){return Rs(h,g)}),h}function tp(a,c){i(a).forEach(function(u){c.db.objectStoreNames.contains(u)||(wr&&console.debug("Dexie: Creating missing table",u),bu(c,u,a[u].primKey,a[u].indexes))})}function Rs(a,c){a.createIndex(c.name,c.keyPath,{unique:c.unique,multiEntry:c.multi})}function Os(a,c,u){var f={};return G(c.objectStoreNames,0).forEach(function(h){for(var g=u.objectStore(h),v=pu(Zh(C=g.keyPath),C||"",!0,!1,!!g.autoIncrement,C&&typeof C!="string",!0),b=[],x=0;x<g.indexNames.length;++x){var E=g.index(g.indexNames[x]),C=E.keyPath,E=pu(E.name,C,!!E.unique,!!E.multiEntry,!1,C&&typeof C!="string",!1);b.push(E)}f[h]=mu(h,v,b)}),f}function Es(a,c,u){for(var f=u.db.objectStoreNames,h=0;h<f.length;++h){var g=f[h],v=u.objectStore(g);a._hasGetAll="getAll"in v;for(var b=0;b<v.indexNames.length;++b){var x=v.indexNames[b],C=v.index(x).keyPath,E=typeof C=="string"?C:"["+G(C).join("+")+"]";!c[g]||(C=c[g].idxByName[E])&&(C.name=x,delete c[g].idxByName[E],c[g].idxByName[x]=C)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&n.WorkerGlobalScope&&n instanceof n.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function ep(a){return a.split(",").map(function(c,u){var f=(c=c.trim()).replace(/([&*]|\+\+)/g,""),h=/^\[/.test(f)?f.match(/^\[(.*)\]$/)[1].split("+"):f;return pu(f,h||null,/\&/.test(c),/\*/.test(c),/\+\+/.test(c),o(h),u===0)})}var cx=(Ds.prototype._parseStoresSpec=function(a,c){i(a).forEach(function(u){if(a[u]!==null){var f=ep(a[u]),h=f.shift();if(h.unique=!0,h.multi)throw new it.Schema("Primary key cannot be multi-valued");f.forEach(function(g){if(g.auto)throw new it.Schema("Only primary key can be marked as autoIncrement (++)");if(!g.keyPath)throw new it.Schema("Index must have a name and cannot be an empty string")}),c[u]=mu(u,h,f)}})},Ds.prototype.stores=function(u){var c=this.db;this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,u):u;var u=c._versions,f={},h={};return u.forEach(function(g){s(f,g._cfg.storesSource),h=g._cfg.dbschema={},g._parseStoresSpec(f,h)}),c._dbSchema=h,vu(c,[c._allTables,c,c.Transaction.prototype]),Ss(c,[c._allTables,c,c.Transaction.prototype,this._cfg.tables],i(h),h),c._storeNames=i(h),this},Ds.prototype.upgrade=function(a){return this._cfg.contentUpgrade=Jl(this._cfg.contentUpgrade||It,a),this},Ds);function Ds(){}function _u(a,c){var u=a._dbNamesDB;return u||(u=a._dbNamesDB=new Gr(ys,{addons:[],indexedDB:a,IDBKeyRange:c})).version(1).stores({dbnames:"name"}),u.table("dbnames")}function xu(a){return a&&typeof a.databases=="function"}function wu(a){return yn(function(){return et.letThrough=!0,a()})}function Cu(a){return!("from"in a)}var be=function(a,c){if(!this){var u=new be;return a&&"d"in a&&s(u,a),u}s(this,arguments.length?{d:1,from:a,to:1<arguments.length?c:a}:{d:0})};function Zo(a,c,u){var f=_t(c,u);if(!isNaN(f)){if(0<f)throw RangeError();if(Cu(a))return s(a,{from:c,to:u,d:1});var h=a.l,f=a.r;if(_t(u,a.from)<0)return h?Zo(h,c,u):a.l={from:c,to:u,d:1,l:null,r:null},np(a);if(0<_t(c,a.to))return f?Zo(f,c,u):a.r={from:c,to:u,d:1,l:null,r:null},np(a);_t(c,a.from)<0&&(a.from=c,a.l=null,a.d=f?f.d+1:1),0<_t(u,a.to)&&(a.to=u,a.r=null,a.d=a.l?a.l.d+1:1),u=!a.r,h&&!a.l&&Jo(a,h),f&&u&&Jo(a,f)}}function Jo(a,c){Cu(c)||function u(f,x){var g=x.from,v=x.to,b=x.l,x=x.r;Zo(f,g,v),b&&u(f,b),x&&u(f,x)}(a,c)}function rp(a,c){var u=ks(c),f=u.next();if(f.done)return!1;for(var h=f.value,g=ks(a),v=g.next(h.from),b=v.value;!f.done&&!v.done;){if(_t(b.from,h.to)<=0&&0<=_t(b.to,h.from))return!0;_t(h.from,b.from)<0?h=(f=u.next(b.from)).value:b=(v=g.next(h.from)).value}return!1}function ks(a){var c=Cu(a)?null:{s:0,n:a};return{next:function(u){for(var f=0<arguments.length;c;)switch(c.s){case 0:if(c.s=1,f)for(;c.n.l&&_t(u,c.n.from)<0;)c={up:c,n:c.n.l,s:1};else for(;c.n.l;)c={up:c,n:c.n.l,s:1};case 1:if(c.s=2,!f||_t(u,c.n.to)<=0)return{value:c.n,done:!1};case 2:if(c.n.r){c.s=3,c={up:c,n:c.n.r,s:0};continue}case 3:c=c.up}return{done:!0}}}}function np(a){var c,u,f=(((c=a.r)===null||c===void 0?void 0:c.d)||0)-(((u=a.l)===null||u===void 0?void 0:u.d)||0),h=1<f?"r":f<-1?"l":"";h&&(c=h=="r"?"l":"r",u=e({},a),f=a[h],a.from=f.from,a.to=f.to,a[h]=f[h],u[h]=f[c],(a[c]=u).d=ip(u)),a.d=ip(a)}function ip(u){var c=u.r,u=u.l;return(c?u?Math.max(c.d,u.d):c.d:u?u.d:0)+1}function As(a,c){return i(c).forEach(function(u){a[u]?Jo(a[u],c[u]):a[u]=function f(h){var g,v,b={};for(g in h)p(h,g)&&(v=h[g],b[g]=!v||typeof v!="object"||he.has(v.constructor)?v:f(v));return b}(c[u])}),a}function Su(a,c){return a.all||c.all||Object.keys(a).some(function(u){return c[u]&&rp(c[u],a[u])})}m(be.prototype,((Xe={add:function(a){return Jo(this,a),this},addKey:function(a){return Zo(this,a,a),this},addKeys:function(a){var c=this;return a.forEach(function(u){return Zo(c,u,u)}),this},hasKey:function(a){var c=ks(this).next(a).value;return c&&_t(c.from,a)<=0&&0<=_t(c.to,a)}})[Bo]=function(){return ks(this)},Xe));var oi={},Ru={},Ou=!1;function Is(a){As(Ru,a),Ou||(Ou=!0,setTimeout(function(){Ou=!1,Eu(Ru,!(Ru={}))},0))}function Eu(a,c){c===void 0&&(c=!1);var u=new Set;if(a.all)for(var f=0,h=Object.values(oi);f<h.length;f++)op(v=h[f],a,u,c);else for(var g in a){var v,b=/^idb\:\/\/(.*)\/(.*)\//.exec(g);b&&(g=b[1],b=b[2],(v=oi["idb://".concat(g,"/").concat(b)])&&op(v,a,u,c))}u.forEach(function(x){return x()})}function op(a,c,u,f){for(var h=[],g=0,v=Object.entries(a.queries.query);g<v.length;g++){for(var b=v[g],x=b[0],C=[],E=0,_=b[1];E<_.length;E++){var I=_[E];Su(c,I.obsSet)?I.subscribers.forEach(function(R){return u.add(R)}):f&&C.push(I)}f&&h.push([x,C])}if(f)for(var w=0,O=h;w<O.length;w++){var A=O[w],x=A[0],C=A[1];a.queries.query[x]=C}}function lx(a){var c=a._state,u=a._deps.indexedDB;if(c.isBeingOpened||a.idbdb)return c.dbReadyPromise.then(function(){return c.dbOpenError?Kt(c.dbOpenError):a});c.isBeingOpened=!0,c.dbOpenError=null,c.openComplete=!1;var f=c.openCanceller,h=Math.round(10*a.verno),g=!1;function v(){if(c.openCanceller!==f)throw new it.DatabaseClosed("db.open() was cancelled")}function b(){return new Y(function(I,w){if(v(),!u)throw new it.MissingAPI;var O=a.name,A=c.autoSchema||!h?u.open(O):u.open(O,h);if(!A)throw new it.MissingAPI;A.onerror=Cr(w),A.onblocked=Ut(a._fireOnBlocked),A.onupgradeneeded=Ut(function(R){var T;E=A.transaction,c.autoSchema&&!a._options.allowEmptyDB?(A.onerror=Go,E.abort(),A.result.close(),(T=u.deleteDatabase(O)).onsuccess=T.onerror=Ut(function(){w(new it.NoSuchDatabase("Database ".concat(O," doesnt exist")))})):(E.onerror=Cr(w),R=R.oldVersion>Math.pow(2,62)?0:R.oldVersion,_=R<1,a.idbdb=A.result,g&&sx(a,E),ax(a,R/10,E,w))},w),A.onsuccess=Ut(function(){E=null;var R,T,P,N,B,V=a.idbdb=A.result,K=G(V.objectStoreNames);if(0<K.length)try{var q=V.transaction((N=K).length===1?N[0]:N,"readonly");if(c.autoSchema)T=V,P=q,(R=a).verno=T.version/10,P=R._dbSchema=Os(0,T,P),R._storeNames=G(T.objectStoreNames,0),Ss(R,[R._allTables],i(P),P);else if(Es(a,a._dbSchema,q),((B=yu(Os(0,(B=a).idbdb,q),B._dbSchema)).add.length||B.change.some(function(H){return H.add.length||H.change.length}))&&!g)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),V.close(),h=V.version+1,g=!0,I(b());Cs(a,q)}catch{}ji.push(a),V.onversionchange=Ut(function(H){c.vcFired=!0,a.on("versionchange").fire(H)}),V.onclose=Ut(function(H){a.on("close").fire(H)}),_&&(B=a._deps,q=O,V=B.indexedDB,B=B.IDBKeyRange,xu(V)||q===ys||_u(V,B).put({name:q}).catch(It)),I()},w)}).catch(function(I){switch(I?.name){case"UnknownError":if(0<c.PR1398_maxLoop)return c.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),b();break;case"VersionError":if(0<h)return h=0,b()}return Y.reject(I)})}var x,C=c.dbReadyResolve,E=null,_=!1;return Y.race([f,(typeof navigator>"u"?Y.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(I){function w(){return indexedDB.databases().finally(I)}x=setInterval(w,100),w()}).finally(function(){return clearInterval(x)}):Promise.resolve()).then(b)]).then(function(){return v(),c.onReadyBeingFired=[],Y.resolve(wu(function(){return a.on.ready.fire(a.vip)})).then(function I(){if(0<c.onReadyBeingFired.length){var w=c.onReadyBeingFired.reduce(Jl,It);return c.onReadyBeingFired=[],Y.resolve(wu(function(){return w(a.vip)})).then(I)}})}).finally(function(){c.openCanceller===f&&(c.onReadyBeingFired=null,c.isBeingOpened=!1)}).catch(function(I){c.dbOpenError=I;try{E&&E.abort()}catch{}return f===c.openCanceller&&a._close(),Kt(I)}).finally(function(){c.openComplete=!0,C()}).then(function(){var I;return _&&(I={},a.tables.forEach(function(w){w.schema.indexes.forEach(function(O){O.name&&(I["idb://".concat(a.name,"/").concat(w.name,"/").concat(O.name)]=new be(-1/0,[[[]]]))}),I["idb://".concat(a.name,"/").concat(w.name,"/")]=I["idb://".concat(a.name,"/").concat(w.name,"/:dels")]=new be(-1/0,[[[]]])}),wn(Qo).fire(I),Eu(I,!0)),a})}function Du(a){function c(g){return a.next(g)}var u=h(c),f=h(function(g){return a.throw(g)});function h(g){return function(x){var b=g(x),x=b.value;return b.done?x:x&&typeof x.then=="function"?x.then(u,f):o(x)?Promise.all(x).then(u,f):u(x)}}return h(c)()}function Ts(a,c,u){for(var f=o(a)?a.slice():[a],h=0;h<u;++h)f.push(c);return f}var ux={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(a){return e(e({},a),{table:function(c){var u=a.table(c),f=u.schema,h={},g=[];function v(_,I,w){var O=Xo(_),A=h[O]=h[O]||[],R=_==null?0:typeof _=="string"?1:_.length,T=0<I,T=e(e({},w),{name:T?"".concat(O,"(virtual-from:").concat(w.name,")"):w.name,lowLevelIndex:w,isVirtual:T,keyTail:I,keyLength:R,extractKey:gu(_),unique:!T&&w.unique});return A.push(T),T.isPrimaryKey||g.push(T),1<R&&v(R===2?_[0]:_.slice(0,R-1),I+1,w),A.sort(function(P,N){return P.keyTail-N.keyTail}),T}c=v(f.primaryKey.keyPath,0,f.primaryKey),h[":id"]=[c];for(var b=0,x=f.indexes;b<x.length;b++){var C=x[b];v(C.keyPath,0,C)}function E(_){var I,w=_.query.index;return w.isVirtual?e(e({},_),{query:{index:w.lowLevelIndex,range:(I=_.query.range,w=w.keyTail,{type:I.type===1?2:I.type,lower:Ts(I.lower,I.lowerOpen?a.MAX_KEY:a.MIN_KEY,w),lowerOpen:!0,upper:Ts(I.upper,I.upperOpen?a.MIN_KEY:a.MAX_KEY,w),upperOpen:!0})}}):_}return e(e({},u),{schema:e(e({},f),{primaryKey:c,indexes:g,getIndexByKeyPath:function(_){return(_=h[Xo(_)])&&_[0]}}),count:function(_){return u.count(E(_))},query:function(_){return u.query(E(_))},openCursor:function(_){var I=_.query.index,w=I.keyTail,O=I.isVirtual,A=I.keyLength;return O?u.openCursor(E(_)).then(function(T){return T&&R(T)}):u.openCursor(_);function R(T){return Object.create(T,{continue:{value:function(P){P!=null?T.continue(Ts(P,_.reverse?a.MAX_KEY:a.MIN_KEY,w)):_.unique?T.continue(T.key.slice(0,A).concat(_.reverse?a.MIN_KEY:a.MAX_KEY,w)):T.continue()}},continuePrimaryKey:{value:function(P,N){T.continuePrimaryKey(Ts(P,a.MAX_KEY,w),N)}},primaryKey:{get:function(){return T.primaryKey}},key:{get:function(){var P=T.key;return A===1?P[0]:P.slice(0,A)}},value:{get:function(){return T.value}}})}}})}})}};function ku(a,c,u,f){return u=u||{},f=f||"",i(a).forEach(function(h){var g,v,b;p(c,h)?(g=a[h],v=c[h],typeof g=="object"&&typeof v=="object"&&g&&v?(b=lr(g))!==lr(v)?u[f+h]=c[h]:b==="Object"?ku(g,v,u,f+h+"."):g!==v&&(u[f+h]=c[h]):g!==v&&(u[f+h]=c[h])):u[f+h]=void 0}),i(c).forEach(function(h){p(a,h)||(u[f+h]=c[h])}),u}function Au(a,c){return c.type==="delete"?c.keys:c.keys||c.values.map(a.extractKey)}var dx={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return e(e({},a),{table:function(c){var u=a.table(c),f=u.schema.primaryKey;return e(e({},u),{mutate:function(h){var g=et.trans,v=g.table(c).hook,b=v.deleting,x=v.creating,C=v.updating;switch(h.type){case"add":if(x.fire===It)break;return g._promise("readwrite",function(){return E(h)},!0);case"put":if(x.fire===It&&C.fire===It)break;return g._promise("readwrite",function(){return E(h)},!0);case"delete":if(b.fire===It)break;return g._promise("readwrite",function(){return E(h)},!0);case"deleteRange":if(b.fire===It)break;return g._promise("readwrite",function(){return function _(I,w,O){return u.query({trans:I,values:!1,query:{index:f,range:w},limit:O}).then(function(A){var R=A.result;return E({type:"delete",keys:R,trans:I}).then(function(T){return 0<T.numFailures?Promise.reject(T.failures[0]):R.length<O?{failures:[],numFailures:0,lastResult:void 0}:_(I,e(e({},w),{lower:R[R.length-1],lowerOpen:!0}),O)})})}(h.trans,h.range,1e4)},!0)}return u.mutate(h);function E(_){var I,w,O,A=et.trans,R=_.keys||Au(f,_);if(!R)throw new Error("Keys missing");return(_=_.type==="add"||_.type==="put"?e(e({},_),{keys:R}):e({},_)).type!=="delete"&&(_.values=r([],_.values,!0)),_.keys&&(_.keys=r([],_.keys,!0)),I=u,O=R,((w=_).type==="add"?Promise.resolve([]):I.getMany({trans:w.trans,keys:O,cache:"immutable"})).then(function(T){var P=R.map(function(N,B){var V,K,q,H=T[B],Q={onerror:null,onsuccess:null};return _.type==="delete"?b.fire.call(Q,N,H,A):_.type==="add"||H===void 0?(V=x.fire.call(Q,N,_.values[B],A),N==null&&V!=null&&(_.keys[B]=N=V,f.outbound||st(_.values[B],f.keyPath,N))):(V=ku(H,_.values[B]),(K=C.fire.call(Q,V,N,H,A))&&(q=_.values[B],Object.keys(K).forEach(function(W){p(q,W)?q[W]=K[W]:st(q,W,K[W])}))),Q});return u.mutate(_).then(function(N){for(var B=N.failures,V=N.results,K=N.numFailures,N=N.lastResult,q=0;q<R.length;++q){var H=(V||R)[q],Q=P[q];H==null?Q.onerror&&Q.onerror(B[q]):Q.onsuccess&&Q.onsuccess(_.type==="put"&&T[q]?_.values[q]:H)}return{failures:B,results:V,numFailures:K,lastResult:N}}).catch(function(N){return P.forEach(function(B){return B.onerror&&B.onerror(N)}),Promise.reject(N)})})}}})}})}};function ap(a,c,u){try{if(!c||c.keys.length<a.length)return null;for(var f=[],h=0,g=0;h<c.keys.length&&g<a.length;++h)_t(c.keys[h],a[g])===0&&(f.push(u?cr(c.values[h]):c.values[h]),++g);return f.length===a.length?f:null}catch{return null}}var fx={stack:"dbcore",level:-1,create:function(a){return{table:function(c){var u=a.table(c);return e(e({},u),{getMany:function(f){if(!f.cache)return u.getMany(f);var h=ap(f.keys,f.trans._cache,f.cache==="clone");return h?Y.resolve(h):u.getMany(f).then(function(g){return f.trans._cache={keys:f.keys,values:f.cache==="clone"?cr(g):g},g})},mutate:function(f){return f.type!=="add"&&(f.trans._cache=null),u.mutate(f)}})}}}};function sp(a,c){return a.trans.mode==="readonly"&&!!a.subscr&&!a.trans.explicit&&a.trans.db._options.cache!=="disabled"&&!c.schema.primaryKey.outbound}function cp(a,c){switch(a){case"query":return c.values&&!c.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var hx={stack:"dbcore",level:0,name:"Observability",create:function(a){var c=a.schema.name,u=new be(a.MIN_KEY,a.MAX_KEY);return e(e({},a),{transaction:function(f,h,g){if(et.subscr&&h!=="readonly")throw new it.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(et.querier));return a.transaction(f,h,g)},table:function(f){var h=a.table(f),g=h.schema,v=g.primaryKey,_=g.indexes,b=v.extractKey,x=v.outbound,C=v.autoIncrement&&_.filter(function(w){return w.compound&&w.keyPath.includes(v.keyPath)}),E=e(e({},h),{mutate:function(w){function O(W){return W="idb://".concat(c,"/").concat(f,"/").concat(W),N[W]||(N[W]=new be)}var A,R,T,P=w.trans,N=w.mutatedParts||(w.mutatedParts={}),B=O(""),V=O(":dels"),K=w.type,Q=w.type==="deleteRange"?[w.range]:w.type==="delete"?[w.keys]:w.values.length<50?[Au(v,w).filter(function(W){return W}),w.values]:[],q=Q[0],H=Q[1],Q=w.trans._cache;return o(q)?(B.addKeys(q),(Q=K==="delete"||q.length===H.length?ap(q,Q):null)||V.addKeys(q),(Q||H)&&(A=O,R=Q,T=H,g.indexes.forEach(function(W){var Z=A(W.name||"");function mt(yt){return yt!=null?W.extractKey(yt):null}function vt(yt){return W.multiEntry&&o(yt)?yt.forEach(function(je){return Z.addKey(je)}):Z.addKey(yt)}(R||T).forEach(function(yt,_e){var pt=R&&mt(R[_e]),_e=T&&mt(T[_e]);_t(pt,_e)!==0&&(pt!=null&&vt(pt),_e!=null&&vt(_e))})}))):q?(H={from:(H=q.lower)!==null&&H!==void 0?H:a.MIN_KEY,to:(H=q.upper)!==null&&H!==void 0?H:a.MAX_KEY},V.add(H),B.add(H)):(B.add(u),V.add(u),g.indexes.forEach(function(W){return O(W.name).add(u)})),h.mutate(w).then(function(W){return!q||w.type!=="add"&&w.type!=="put"||(B.addKeys(W.results),C&&C.forEach(function(Z){for(var mt=w.values.map(function(pt){return Z.extractKey(pt)}),vt=Z.keyPath.findIndex(function(pt){return pt===v.keyPath}),yt=0,je=W.results.length;yt<je;++yt)mt[yt][vt]=W.results[yt];O(Z.name).addKeys(mt)})),P.mutatedParts=As(P.mutatedParts||{},N),W})}}),_=function(O){var A=O.query,O=A.index,A=A.range;return[O,new be((O=A.lower)!==null&&O!==void 0?O:a.MIN_KEY,(A=A.upper)!==null&&A!==void 0?A:a.MAX_KEY)]},I={get:function(w){return[v,new be(w.key)]},getMany:function(w){return[v,new be().addKeys(w.keys)]},count:_,query:_,openCursor:_};return i(I).forEach(function(w){E[w]=function(O){var A=et.subscr,R=!!A,T=sp(et,h)&&cp(w,O)?O.obsSet={}:A;if(R){var P=function(H){return H="idb://".concat(c,"/").concat(f,"/").concat(H),T[H]||(T[H]=new be)},N=P(""),B=P(":dels"),A=I[w](O),R=A[0],A=A[1];if((w==="query"&&R.isPrimaryKey&&!O.values?B:P(R.name||"")).add(A),!R.isPrimaryKey){if(w!=="count"){var V=w==="query"&&x&&O.values&&h.query(e(e({},O),{values:!1}));return h[w].apply(this,arguments).then(function(H){if(w==="query"){if(x&&O.values)return V.then(function(mt){return mt=mt.result,N.addKeys(mt),H});var Q=O.values?H.result.map(b):H.result;(O.values?N:B).addKeys(Q)}else if(w==="openCursor"){var W=H,Z=O.values;return W&&Object.create(W,{key:{get:function(){return B.addKey(W.primaryKey),W.key}},primaryKey:{get:function(){var mt=W.primaryKey;return B.addKey(mt),mt}},value:{get:function(){return Z&&N.addKey(W.primaryKey),W.value}}})}return H})}B.add(u)}}return h[w].apply(this,arguments)}}),E}})}};function lp(a,c,u){if(u.numFailures===0)return c;if(c.type==="deleteRange")return null;var f=c.keys?c.keys.length:"values"in c&&c.values?c.values.length:1;return u.numFailures===f?null:(c=e({},c),o(c.keys)&&(c.keys=c.keys.filter(function(h,g){return!(g in u.failures)})),"values"in c&&o(c.values)&&(c.values=c.values.filter(function(h,g){return!(g in u.failures)})),c)}function Iu(a,c){return u=a,((f=c).lower===void 0||(f.lowerOpen?0<_t(u,f.lower):0<=_t(u,f.lower)))&&(a=a,(c=c).upper===void 0||(c.upperOpen?_t(a,c.upper)<0:_t(a,c.upper)<=0));var u,f}function up(a,c,I,f,h,g){if(!I||I.length===0)return a;var v=c.query.index,b=v.multiEntry,x=c.query.range,C=f.schema.primaryKey.extractKey,E=v.extractKey,_=(v.lowLevelIndex||v).extractKey,I=I.reduce(function(w,O){var A=w,R=[];if(O.type==="add"||O.type==="put")for(var T=new be,P=O.values.length-1;0<=P;--P){var N,B=O.values[P],V=C(B);T.hasKey(V)||(N=E(B),(b&&o(N)?N.some(function(W){return Iu(W,x)}):Iu(N,x))&&(T.addKey(V),R.push(B)))}switch(O.type){case"add":var K=new be().addKeys(c.values?w.map(function(Z){return C(Z)}):w),A=w.concat(c.values?R.filter(function(Z){return Z=C(Z),!K.hasKey(Z)&&(K.addKey(Z),!0)}):R.map(function(Z){return C(Z)}).filter(function(Z){return!K.hasKey(Z)&&(K.addKey(Z),!0)}));break;case"put":var q=new be().addKeys(O.values.map(function(Z){return C(Z)}));A=w.filter(function(Z){return!q.hasKey(c.values?C(Z):Z)}).concat(c.values?R:R.map(function(Z){return C(Z)}));break;case"delete":var H=new be().addKeys(O.keys);A=w.filter(function(Z){return!H.hasKey(c.values?C(Z):Z)});break;case"deleteRange":var Q=O.range;A=w.filter(function(Z){return!Iu(C(Z),Q)})}return A},a);return I===a?a:(I.sort(function(w,O){return _t(_(w),_(O))||_t(C(w),C(O))}),c.limit&&c.limit<1/0&&(I.length>c.limit?I.length=c.limit:a.length===c.limit&&I.length<c.limit&&(h.dirty=!0)),g?Object.freeze(I):I)}function dp(a,c){return _t(a.lower,c.lower)===0&&_t(a.upper,c.upper)===0&&!!a.lowerOpen==!!c.lowerOpen&&!!a.upperOpen==!!c.upperOpen}function px(a,c){return function(u,f,h,g){if(u===void 0)return f!==void 0?-1:0;if(f===void 0)return 1;if((f=_t(u,f))===0){if(h&&g)return 0;if(h)return 1;if(g)return-1}return f}(a.lower,c.lower,a.lowerOpen,c.lowerOpen)<=0&&0<=function(u,f,h,g){if(u===void 0)return f!==void 0?1:0;if(f===void 0)return-1;if((f=_t(u,f))===0){if(h&&g)return 0;if(h)return-1;if(g)return 1}return f}(a.upper,c.upper,a.upperOpen,c.upperOpen)}function mx(a,c,u,f){a.subscribers.add(u),f.addEventListener("abort",function(){var h,g;a.subscribers.delete(u),a.subscribers.size===0&&(h=a,g=c,setTimeout(function(){h.subscribers.size===0&&Hr(g,h)},3e3))})}var gx={stack:"dbcore",level:0,name:"Cache",create:function(a){var c=a.schema.name;return e(e({},a),{transaction:function(u,f,h){var g,v,b=a.transaction(u,f,h);return f==="readwrite"&&(v=(g=new AbortController).signal,h=function(x){return function(){if(g.abort(),f==="readwrite"){for(var C=new Set,E=0,_=u;E<_.length;E++){var I=_[E],w=oi["idb://".concat(c,"/").concat(I)];if(w){var O=a.table(I),A=w.optimisticOps.filter(function(Z){return Z.trans===b});if(b._explicit&&x&&b.mutatedParts)for(var R=0,T=Object.values(w.queries.query);R<T.length;R++)for(var P=0,N=(K=T[R]).slice();P<N.length;P++)Su((q=N[P]).obsSet,b.mutatedParts)&&(Hr(K,q),q.subscribers.forEach(function(Z){return C.add(Z)}));else if(0<A.length){w.optimisticOps=w.optimisticOps.filter(function(Z){return Z.trans!==b});for(var B=0,V=Object.values(w.queries.query);B<V.length;B++)for(var K,q,H,Q=0,W=(K=V[B]).slice();Q<W.length;Q++)(q=W[Q]).res!=null&&b.mutatedParts&&(x&&!q.dirty?(H=Object.isFrozen(q.res),H=up(q.res,q.req,A,O,q,H),q.dirty?(Hr(K,q),q.subscribers.forEach(function(Z){return C.add(Z)})):H!==q.res&&(q.res=H,q.promise=Y.resolve({result:H}))):(q.dirty&&Hr(K,q),q.subscribers.forEach(function(Z){return C.add(Z)})))}}}C.forEach(function(Z){return Z()})}}},b.addEventListener("abort",h(!1),{signal:v}),b.addEventListener("error",h(!1),{signal:v}),b.addEventListener("complete",h(!0),{signal:v})),b},table:function(u){var f=a.table(u),h=f.schema.primaryKey;return e(e({},f),{mutate:function(g){var v=et.trans;if(h.outbound||v.db._options.cache==="disabled"||v.explicit||v.idbtrans.mode!=="readwrite")return f.mutate(g);var b=oi["idb://".concat(c,"/").concat(u)];return b?(v=f.mutate(g),g.type!=="add"&&g.type!=="put"||!(50<=g.values.length||Au(h,g).some(function(x){return x==null}))?(b.optimisticOps.push(g),g.mutatedParts&&Is(g.mutatedParts),v.then(function(x){0<x.numFailures&&(Hr(b.optimisticOps,g),(x=lp(0,g,x))&&b.optimisticOps.push(x),g.mutatedParts&&Is(g.mutatedParts))}),v.catch(function(){Hr(b.optimisticOps,g),g.mutatedParts&&Is(g.mutatedParts)})):v.then(function(x){var C=lp(0,e(e({},g),{values:g.values.map(function(E,_){var I;return x.failures[_]?E:(E=(I=h.keyPath)!==null&&I!==void 0&&I.includes(".")?cr(E):e({},E),st(E,h.keyPath,x.results[_]),E)})}),x);b.optimisticOps.push(C),queueMicrotask(function(){return g.mutatedParts&&Is(g.mutatedParts)})}),v):f.mutate(g)},query:function(g){if(!sp(et,f)||!cp("query",g))return f.query(g);var v=((C=et.trans)===null||C===void 0?void 0:C.db._options.cache)==="immutable",_=et,b=_.requery,x=_.signal,C=function(O,A,R,T){var P=oi["idb://".concat(O,"/").concat(A)];if(!P)return[];if(!(A=P.queries[R]))return[null,!1,P,null];var N=A[(T.query?T.query.index.name:null)||""];if(!N)return[null,!1,P,null];switch(R){case"query":var B=N.find(function(V){return V.req.limit===T.limit&&V.req.values===T.values&&dp(V.req.query.range,T.query.range)});return B?[B,!0,P,N]:[N.find(function(V){return("limit"in V.req?V.req.limit:1/0)>=T.limit&&(!T.values||V.req.values)&&px(V.req.query.range,T.query.range)}),!1,P,N];case"count":return B=N.find(function(V){return dp(V.req.query.range,T.query.range)}),[B,!!B,P,N]}}(c,u,"query",g),E=C[0],_=C[1],I=C[2],w=C[3];return E&&_?E.obsSet=g.obsSet:(_=f.query(g).then(function(O){var A=O.result;if(E&&(E.res=A),v){for(var R=0,T=A.length;R<T;++R)Object.freeze(A[R]);Object.freeze(A)}else O.result=cr(A);return O}).catch(function(O){return w&&E&&Hr(w,E),Promise.reject(O)}),E={obsSet:g.obsSet,promise:_,subscribers:new Set,type:"query",req:g,dirty:!1},w?w.push(E):(w=[E],(I=I||(oi["idb://".concat(c,"/").concat(u)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[g.query.index.name||""]=w)),mx(E,w,b,x),E.promise.then(function(O){return{result:up(O.result,g,I?.optimisticOps,f,E,v)}})}})}})}};function Ps(a,c){return new Proxy(a,{get:function(u,f,h){return f==="db"?c:Reflect.get(u,f,h)}})}var Gr=(Gt.prototype.version=function(a){if(isNaN(a)||a<.1)throw new it.Type("Given version is not a positive number");if(a=Math.round(10*a)/10,this.idbdb||this._state.isBeingOpened)throw new it.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var c=this._versions,u=c.filter(function(f){return f._cfg.version===a})[0];return u||(u=new this.Version(a),c.push(u),c.sort(ox),u.stores({}),this._state.autoSchema=!1,u)},Gt.prototype._whenReady=function(a){var c=this;return this.idbdb&&(this._state.openComplete||et.letThrough||this._vip)?a():new Y(function(u,f){if(c._state.openComplete)return f(new it.DatabaseClosed(c._state.dbOpenError));if(!c._state.isBeingOpened){if(!c._state.autoOpen)return void f(new it.DatabaseClosed);c.open().catch(It)}c._state.dbReadyPromise.then(u,f)}).then(a)},Gt.prototype.use=function(a){var c=a.stack,u=a.create,f=a.level,h=a.name;return h&&this.unuse({stack:c,name:h}),a=this._middlewares[c]||(this._middlewares[c]=[]),a.push({stack:c,create:u,level:f??10,name:h}),a.sort(function(g,v){return g.level-v.level}),this},Gt.prototype.unuse=function(a){var c=a.stack,u=a.name,f=a.create;return c&&this._middlewares[c]&&(this._middlewares[c]=this._middlewares[c].filter(function(h){return f?h.create!==f:!!u&&h.name!==u})),this},Gt.prototype.open=function(){var a=this;return ri(vn,function(){return lx(a)})},Gt.prototype._close=function(){var a=this._state,c=ji.indexOf(this);if(0<=c&&ji.splice(c,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}a.isBeingOpened||(a.dbReadyPromise=new Y(function(u){a.dbReadyResolve=u}),a.openCanceller=new Y(function(u,f){a.cancelOpen=f}))},Gt.prototype.close=function(u){var c=(u===void 0?{disableAutoOpen:!0}:u).disableAutoOpen,u=this._state;c?(u.isBeingOpened&&u.cancelOpen(new it.DatabaseClosed),this._close(),u.autoOpen=!1,u.dbOpenError=new it.DatabaseClosed):(this._close(),u.autoOpen=this._options.autoOpen||u.isBeingOpened,u.openComplete=!1,u.dbOpenError=null)},Gt.prototype.delete=function(a){var c=this;a===void 0&&(a={disableAutoOpen:!0});var u=0<arguments.length&&typeof arguments[0]!="object",f=this._state;return new Y(function(h,g){function v(){c.close(a);var b=c._deps.indexedDB.deleteDatabase(c.name);b.onsuccess=Ut(function(){var x,C,E;x=c._deps,C=c.name,E=x.indexedDB,x=x.IDBKeyRange,xu(E)||C===ys||_u(E,x).delete(C).catch(It),h()}),b.onerror=Cr(g),b.onblocked=c._fireOnBlocked}if(u)throw new it.InvalidArgument("Invalid closeOptions argument to db.delete()");f.isBeingOpened?f.dbReadyPromise.then(v):v()})},Gt.prototype.backendDB=function(){return this.idbdb},Gt.prototype.isOpen=function(){return this.idbdb!==null},Gt.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"},Gt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Gt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Gt.prototype,"tables",{get:function(){var a=this;return i(this._allTables).map(function(c){return a._allTables[c]})},enumerable:!1,configurable:!0}),Gt.prototype.transaction=function(){var a=(function(c,u,f){var h=arguments.length;if(h<2)throw new it.InvalidArgument("Too few arguments");for(var g=new Array(h-1);--h;)g[h-1]=arguments[h];return f=g.pop(),[c,Ft(g),f]}).apply(this,arguments);return this._transaction.apply(this,a)},Gt.prototype._transaction=function(a,c,u){var f=this,h=et.trans;h&&h.db===this&&a.indexOf("!")===-1||(h=null);var g,v,b=a.indexOf("?")!==-1;a=a.replace("!","").replace("?","");try{if(v=c.map(function(C){if(C=C instanceof f.Table?C.name:C,typeof C!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return C}),a=="r"||a===cu)g=cu;else{if(a!="rw"&&a!=lu)throw new it.InvalidArgument("Invalid transaction mode: "+a);g=lu}if(h){if(h.mode===cu&&g===lu){if(!b)throw new it.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");h=null}h&&v.forEach(function(C){if(h&&h.storeNames.indexOf(C)===-1){if(!b)throw new it.SubTransaction("Table "+C+" not included in parent transaction.");h=null}}),b&&h&&!h.active&&(h=null)}}catch(C){return h?h._promise(null,function(E,_){_(C)}):Kt(C)}var x=(function C(E,_,I,w,O){return Y.resolve().then(function(){var A=et.transless||et,R=E._createTransaction(_,I,E._dbSchema,w);if(R.explicit=!0,A={trans:R,transless:A},w)R.idbtrans=w.idbtrans;else try{R.create(),R.idbtrans._explicit=!0,E._state.PR1398_maxLoop=3}catch(N){return N.name===gn.InvalidState&&E.isOpen()&&0<--E._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),E.close({disableAutoOpen:!1}),E.open().then(function(){return C(E,_,I,null,O)})):Kt(N)}var T,P=mn(O);return P&&Fi(),A=Y.follow(function(){var N;(T=O.call(R,R))&&(P?(N=bn.bind(null,null),T.then(N,N)):typeof T.next=="function"&&typeof T.throw=="function"&&(T=Du(T)))},A),(T&&typeof T.then=="function"?Y.resolve(T).then(function(N){return R.active?N:Kt(new it.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):A.then(function(){return T})).then(function(N){return w&&R._resolve(),R._completion.then(function(){return N})}).catch(function(N){return R._reject(N),Kt(N)})})}).bind(null,this,g,v,h,u);return h?h._promise(g,x,"lock"):et.trans?ri(et.transless,function(){return f._whenReady(x)}):this._whenReady(x)},Gt.prototype.table=function(a){if(!p(this._allTables,a))throw new it.InvalidTable("Table ".concat(a," does not exist"));return this._allTables[a]},Gt);function Gt(a,c){var u=this;this._middlewares={},this.verno=0;var f=Gt.dependencies;this._options=c=e({addons:Gt.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange,cache:"cloned"},c),this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange},f=c.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var h,g,v,b,x,C={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:It,dbReadyPromise:null,cancelOpen:It,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:c.autoOpen};C.dbReadyPromise=new Y(function(_){C.dbReadyResolve=_}),C.openCanceller=new Y(function(_,I){C.cancelOpen=I}),this._state=C,this.name=a,this.on=Ho(this,"populate","blocked","versionchange","close",{ready:[Jl,It]}),this.on.ready.subscribe=J(this.on.ready.subscribe,function(_){return function(I,w){Gt.vip(function(){var O,A=u._state;A.openComplete?(A.dbOpenError||Y.resolve().then(I),w&&_(I)):A.onReadyBeingFired?(A.onReadyBeingFired.push(I),w&&_(I)):(_(I),O=u,w||_(function R(){O.on.ready.unsubscribe(I),O.on.ready.unsubscribe(R)}))})}}),this.Collection=(h=this,Wo(Z_.prototype,function(T,R){this.db=h;var w=zh,O=null;if(R)try{w=R()}catch(P){O=P}var A=T._ctx,R=A.table,T=R.hook.reading.fire;this._ctx={table:R,index:A.index,isPrimKey:!A.index||R.schema.primKey.keyPath&&A.index===R.schema.primKey.name,range:w,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:O,or:A.or,valueMapper:T!==jo?T:null}})),this.Table=(g=this,Wo(Wh.prototype,function(_,I,w){this.db=g,this._tx=w,this.name=_,this.schema=I,this.hook=g._allTables[_]?g._allTables[_].hook:Ho(null,{creating:[V_,It],reading:[z_,jo],updating:[H_,It],deleting:[q_,It]})})),this.Transaction=(v=this,Wo(ex.prototype,function(_,I,w,O,A){var R=this;this.db=v,this.mode=_,this.storeNames=I,this.schema=w,this.chromeTransactionDurability=O,this.idbtrans=null,this.on=Ho(this,"complete","error","abort"),this.parent=A||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Y(function(T,P){R._resolve=T,R._reject=P}),this._completion.then(function(){R.active=!1,R.on.complete.fire()},function(T){var P=R.active;return R.active=!1,R.on.error.fire(T),R.parent?R.parent._reject(T):P&&R.idbtrans&&R.idbtrans.abort(),Kt(T)})})),this.Version=(b=this,Wo(cx.prototype,function(_){this.db=b,this._cfg={version:_,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(x=this,Wo(Xh.prototype,function(_,I,w){if(this.db=x,this._ctx={table:_,index:I===":id"?null:I,or:w},this._cmp=this._ascending=_t,this._descending=function(O,A){return _t(A,O)},this._max=function(O,A){return 0<_t(O,A)?O:A},this._min=function(O,A){return _t(O,A)<0?O:A},this._IDBKeyRange=x._deps.IDBKeyRange,!this._IDBKeyRange)throw new it.MissingAPI})),this.on("versionchange",function(_){0<_.newVersion?console.warn("Another connection wants to upgrade database '".concat(u.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(u.name,"'. Closing db now to resume the delete request.")),u.close({disableAutoOpen:!1})}),this.on("blocked",function(_){!_.newVersion||_.newVersion<_.oldVersion?console.warn("Dexie.delete('".concat(u.name,"') was blocked")):console.warn("Upgrade '".concat(u.name,"' blocked by other connection holding version ").concat(_.oldVersion/10))}),this._maxKey=Yo(c.IDBKeyRange),this._createTransaction=function(_,I,w,O){return new u.Transaction(_,I,w,u._options.chromeTransactionDurability,O)},this._fireOnBlocked=function(_){u.on("blocked").fire(_),ji.filter(function(I){return I.name===u.name&&I!==u&&!I._state.vcFired}).map(function(I){return I.on("versionchange").fire(_)})},this.use(fx),this.use(gx),this.use(hx),this.use(ux),this.use(dx);var E=new Proxy(this,{get:function(_,I,w){if(I==="_vip")return!0;if(I==="table")return function(A){return Ps(u.table(A),E)};var O=Reflect.get(_,I,w);return O instanceof Wh?Ps(O,E):I==="tables"?O.map(function(A){return Ps(A,E)}):I==="_createTransaction"?function(){return Ps(O.apply(this,arguments),E)}:O}});this.vip=E,f.forEach(function(_){return _(u)})}var Ms,Xe=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",vx=(Tu.prototype.subscribe=function(a,c,u){return this._subscribe(a&&typeof a!="function"?a:{next:a,error:c,complete:u})},Tu.prototype[Xe]=function(){return this},Tu);function Tu(a){this._subscribe=a}try{Ms={indexedDB:n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB,IDBKeyRange:n.IDBKeyRange||n.webkitIDBKeyRange}}catch{Ms={indexedDB:null,IDBKeyRange:null}}function fp(a){var c,u=!1,f=new vx(function(h){var g=mn(a),v,b=!1,x={},C={},E={get closed(){return b},unsubscribe:function(){b||(b=!0,v&&v.abort(),_&&wn.storagemutated.unsubscribe(w))}};h.start&&h.start(E);var _=!1,I=function(){return su(O)},w=function(A){As(x,A),Su(C,x)&&I()},O=function(){var A,R,T;!b&&Ms.indexedDB&&(x={},A={},v&&v.abort(),v=new AbortController,T=function(P){var N=$i();try{g&&Fi();var B=yn(a,P);return B=g?B.finally(bn):B}finally{N&&Bi()}}(R={subscr:A,signal:v.signal,requery:I,querier:a,trans:null}),Promise.resolve(T).then(function(P){u=!0,c=P,b||R.signal.aborted||(x={},function(N){for(var B in N)if(p(N,B))return;return 1}(C=A)||_||(wn(Qo,w),_=!0),su(function(){return!b&&h.next&&h.next(P)}))},function(P){u=!1,["DatabaseClosedError","AbortError"].includes(P?.name)||b||su(function(){b||h.error&&h.error(P)})}))};return setTimeout(I,0),E});return f.hasValue=function(){return u},f.getValue=function(){return c},f}var ai=Gr;function Pu(a){var c=Cn;try{Cn=!0,wn.storagemutated.fire(a),Eu(a,!0)}finally{Cn=c}}m(ai,e(e({},ls),{delete:function(a){return new ai(a,{addons:[]}).delete()},exists:function(a){return new ai(a,{addons:[]}).open().then(function(c){return c.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return c=ai.dependencies,u=c.indexedDB,c=c.IDBKeyRange,(xu(u)?Promise.resolve(u.databases()).then(function(f){return f.map(function(h){return h.name}).filter(function(h){return h!==ys})}):_u(u,c).toCollection().primaryKeys()).then(a)}catch{return Kt(new it.MissingAPI)}var c,u},defineClass:function(){return function(a){s(this,a)}},ignoreTransaction:function(a){return et.trans?ri(et.transless,a):a()},vip:wu,async:function(a){return function(){try{var c=Du(a.apply(this,arguments));return c&&typeof c.then=="function"?c:Y.resolve(c)}catch(u){return Kt(u)}}},spawn:function(a,c,u){try{var f=Du(a.apply(u,c||[]));return f&&typeof f.then=="function"?f:Y.resolve(f)}catch(h){return Kt(h)}},currentTransaction:{get:function(){return et.trans||null}},waitFor:function(a,c){return c=Y.resolve(typeof a=="function"?ai.ignoreTransaction(a):a).timeout(c||6e4),et.trans?et.trans.waitFor(c):c},Promise:Y,debug:{get:function(){return wr},set:function(a){Nh(a)}},derive:D,extend:s,props:m,override:J,Events:Ho,on:wn,liveQuery:fp,extendObservabilitySet:As,getByKeyPath:At,setByKeyPath:st,delByKeyPath:function(a,c){typeof c=="string"?st(a,c,void 0):"length"in c&&[].map.call(c,function(u){st(a,u,void 0)})},shallowClone:Pt,deepClone:cr,getObjectDiff:ku,cmp:_t,asap:tt,minKey:-1/0,addons:[],connections:ji,errnames:gn,dependencies:Ms,cache:oi,semVer:"4.0.10",version:"4.0.10".split(".").map(function(a){return parseInt(a)}).reduce(function(a,c,u){return a+c/Math.pow(10,2*u)})})),ai.maxKey=Yo(ai.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(wn(Qo,function(a){Cn||(a=new CustomEvent(hu,{detail:a}),Cn=!0,dispatchEvent(a),Cn=!1)}),addEventListener(hu,function(a){a=a.detail,Cn||Pu(a)}));var Vi,Cn=!1,hp=function(){};return typeof BroadcastChannel<"u"&&((hp=function(){(Vi=new BroadcastChannel(hu)).onmessage=function(a){return a.data&&Pu(a.data)}})(),typeof Vi.unref=="function"&&Vi.unref(),wn(Qo,function(a){Cn||Vi.postMessage(a)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(a){if(!Gr.disableBfCache&&a.persisted){wr&&console.debug("Dexie: handling persisted pagehide"),Vi?.close();for(var c=0,u=ji;c<u.length;c++)u[c].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(a){!Gr.disableBfCache&&a.persisted&&(wr&&console.debug("Dexie: handling persisted pageshow"),hp(),Pu({all:new be(-1/0,[[]])}))})),Y.rejectionMapper=function(a,c){return!a||a instanceof ur||a instanceof TypeError||a instanceof SyntaxError||!a.name||!Mh[a.name]?a:(c=new Mh[a.name](c||a.message,a),"stack"in a&&S(c,"stack",{get:function(){return this.inner.stack}}),c)},Nh(wr),e(Gr,Object.freeze({__proto__:null,Dexie:Gr,liveQuery:fp,Entity:Vh,cmp:_t,PropModSymbol:Kr,PropModification:Ko,replacePrefix:function(a,c){return new Ko({replacePrefix:[a,c]})},add:function(a){return new Ko({add:a})},remove:function(a){return new Ko({remove:a})},default:Gr,RangeSet:be,mergeRanges:Jo,rangesOverlap:rp}),{default:Gr}),Gr})});var ua=class{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},nn=class extends ua{component;viewContainerRef;injector;projectableNodes;constructor(e,r,n,i){super(),this.component=e,this.viewContainerRef=r,this.injector=n,this.projectableNodes=i}},Tr=class extends ua{templateRef;viewContainerRef;context;injector;constructor(e,r,n,i){super(),this.templateRef=e,this.viewContainerRef=r,this.context=n,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,r=this.context){return this.context=r,super.attach(e)}detach(){return this.context=void 0,super.detach()}},Xu=class extends ua{element;constructor(e){super(),this.element=e instanceof Yt?e.nativeElement:e}},Dn=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof nn)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof Tr)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof Xu)return this._attachedPortal=e,this.attachDomPortal(e)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},Ks=class extends Dn{outletElement;_appRef;_defaultInjector;constructor(e,r,n){super(),this.outletElement=e,this._appRef=r,this._defaultInjector=n}attachComponentPortal(e){let r;if(e.viewContainerRef){let n=e.injector||e.viewContainerRef.injector,i=n.get(Uu,null,{optional:!0})||void 0;r=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:n,ngModuleRef:i,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>r.destroy())}else{let n=this._appRef,i=e.injector||this._defaultInjector||xt.NULL,o=i.get(fr,n.injector);r=Qp(e.component,{elementInjector:i,environmentInjector:o,projectableNodes:e.projectableNodes||void 0}),n.attachView(r.hostView),this.setDisposeFn(()=>{n.viewCount>0&&n.detachView(r.hostView),r.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let r=e.viewContainerRef,n=r.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return n.rootNodes.forEach(i=>this.outletElement.appendChild(i)),n.detectChanges(),this.setDisposeFn(()=>{let i=r.indexOf(n);i!==-1&&r.remove(i)}),this._attachedPortal=e,n}attachDomPortal=e=>{let r=e.element;r.parentNode;let n=this.outletElement.ownerDocument.createComment("dom-portal");r.parentNode.insertBefore(n,r),this.outletElement.appendChild(r),this._attachedPortal=e,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(r,n)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}},uE=(()=>{class t extends Tr{constructor(){let r=k(Xr),n=k(On);super(r,n)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[Se]})}return t})();var kn=(()=>{class t extends Dn{_moduleRef=k(Uu,{optional:!0});_document=k(le);_viewContainerRef=k(On);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(r){this.hasAttached()&&!r&&!this._isInitialized||(this.hasAttached()&&super.detach(),r&&super.attach(r),this._attachedPortal=r||null)}attached=new re;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(r){r.setAttachedHost(this);let n=r.viewContainerRef!=null?r.viewContainerRef:this._viewContainerRef,i=n.createComponent(r.component,{index:n.length,injector:r.injector||n.injector,projectableNodes:r.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return n!==this._viewContainerRef&&this._getRootNode().appendChild(i.hostView.rootNodes[0]),super.setDisposeFn(()=>i.destroy()),this._attachedPortal=r,this._attachedRef=i,this.attached.emit(i),i}attachTemplatePortal(r){r.setAttachedHost(this);let n=this._viewContainerRef.createEmbeddedView(r.templateRef,r.context,{injector:r.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=r,this._attachedRef=n,this.attached.emit(n),n}attachDomPortal=r=>{let n=r.element;n.parentNode;let i=this._document.createComment("dom-portal");r.setAttachedHost(this),n.parentNode.insertBefore(i,n),this._getRootNode().appendChild(n),this._attachedPortal=r,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(n,i)})};_getRootNode(){let r=this._viewContainerRef.element.nativeElement;return r.nodeType===r.ELEMENT_NODE?r:r.parentNode}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Se]})}return t})();var on=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Xt({type:t});static \u0275inj=Qt({})}return t})();var gr=function(t){return t[t.NORMAL=0]="NORMAL",t[t.NEGATED=1]="NEGATED",t[t.INVERTED=2]="INVERTED",t}(gr||{}),Gs,gi;function Qs(){if(gi==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return gi=!1,gi;if("scrollBehavior"in document.documentElement.style)gi=!0;else{let t=Element.prototype.scrollTo;t?gi=!/\{\s*\[native code\]\s*\}/.test(t.toString()):gi=!1}}return gi}function Ji(){if(typeof document!="object"||!document)return gr.NORMAL;if(Gs==null){let t=document.createElement("div"),e=t.style;t.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";let r=document.createElement("div"),n=r.style;n.width="2px",n.height="1px",t.appendChild(r),document.body.appendChild(t),Gs=gr.NORMAL,t.scrollLeft===0&&(t.scrollLeft=1,Gs=t.scrollLeft===0?gr.NEGATED:gr.INVERTED),t.remove()}return Gs}function Zu(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var to,hm=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function vE(){if(to)return to;if(typeof document!="object"||!document)return to=new Set(hm),to;let t=document.createElement("input");return to=new Set(hm.filter(e=>(t.setAttribute("type",e),t.type===e))),to}var pm={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};var xx=new lt("MATERIAL_ANIMATIONS");function tr(){return k(xx,{optional:!0})?.animationsDisabled||k(js,{optional:!0})==="NoopAnimations"?!0:k(Qu).matchMedia("(prefers-reduced-motion)").matches}function Zt(t){return t==null?"":typeof t=="string"?t:`${t}px`}function kE(t){return t!=null&&`${t}`!="false"}var er=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(er||{}),Ju=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=er.HIDDEN;constructor(e,r,n,i=!1){this._renderer=e,this.element=r,this.config=n,this._animationForciblyDisabledThroughCss=i}fadeOut(){this._renderer.fadeOutRipple(this)}},mm=Hs({passive:!0,capture:!0}),td=class{_events=new Map;addHandler(e,r,n,i){let o=this._events.get(r);if(o){let s=o.get(n);s?s.add(i):o.set(n,new Set([i]))}else this._events.set(r,new Map([[n,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(r,this._delegateEventHandler,mm)})}removeHandler(e,r,n){let i=this._events.get(e);if(!i)return;let o=i.get(r);o&&(o.delete(n),o.size===0&&i.delete(r),i.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,mm)))}_delegateEventHandler=e=>{let r=en(e);r&&this._events.get(e.type)?.forEach((n,i)=>{(i===r||i.contains(r))&&n.forEach(o=>o.handleEvent(e))})}},da={enterDuration:225,exitDuration:150},wx=800,gm=Hs({passive:!0,capture:!0}),vm=["mousedown","touchstart"],ym=["mouseup","mouseleave","touchend","touchcancel"],Cx=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Jt({type:t,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(n,i){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return t})(),fa=class t{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new td;constructor(e,r,n,i,o){this._target=e,this._ngZone=r,this._platform=i,i.isBrowser&&(this._containerElement=Xi(n)),o&&o.get(mi).load(Cx)}fadeInRipple(e,r,n={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=F(F({},da),n.animation);n.centered&&(e=i.left+i.width/2,r=i.top+i.height/2);let s=n.radius||Sx(e,r,i),l=e-i.left,d=r-i.top,p=o.enterDuration,m=document.createElement("div");m.classList.add("mat-ripple-element"),m.style.left=`${l-s}px`,m.style.top=`${d-s}px`,m.style.height=`${s*2}px`,m.style.width=`${s*2}px`,n.color!=null&&(m.style.backgroundColor=n.color),m.style.transitionDuration=`${p}ms`,this._containerElement.appendChild(m);let y=window.getComputedStyle(m),S=y.transitionProperty,D=y.transitionDuration,M=S==="none"||D==="0s"||D==="0s, 0s"||i.width===0&&i.height===0,j=new Ju(this,m,n,M);m.style.transform="scale3d(1, 1, 1)",j.state=er.FADING_IN,n.persistent||(this._mostRecentTransientRipple=j);let G=null;return!M&&(p||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let J=()=>{G&&(G.fallbackTimer=null),clearTimeout(tt),this._finishRippleTransition(j)},rt=()=>this._destroyRipple(j),tt=setTimeout(rt,p+100);m.addEventListener("transitionend",J),m.addEventListener("transitioncancel",rt),G={onTransitionEnd:J,onTransitionCancel:rt,fallbackTimer:tt}}),this._activeRipples.set(j,G),(M||!p)&&this._finishRippleTransition(j),j}fadeOutRipple(e){if(e.state===er.FADING_OUT||e.state===er.HIDDEN)return;let r=e.element,n=F(F({},da),e.config.animation);r.style.transitionDuration=`${n.exitDuration}ms`,r.style.opacity="0",e.state=er.FADING_OUT,(e._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let r=Xi(e);!this._platform.isBrowser||!r||r===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=r,vm.forEach(n=>{t._eventManager.addHandler(this._ngZone,n,r,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{ym.forEach(r=>{this._triggerElement.addEventListener(r,this,gm)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===er.FADING_IN?this._startFadeOutTransition(e):e.state===er.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let r=e===this._mostRecentTransientRipple,{persistent:n}=e.config;e.state=er.VISIBLE,!n&&(!r||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let r=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=er.HIDDEN,r!==null&&(e.element.removeEventListener("transitionend",r.onTransitionEnd),e.element.removeEventListener("transitioncancel",r.onTransitionCancel),r.fallbackTimer!==null&&clearTimeout(r.fallbackTimer)),e.element.remove()}_onMousedown(e){let r=om(e),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+wx;!this._target.rippleDisabled&&!r&&!n&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!am(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let r=e.changedTouches;if(r)for(let n=0;n<r.length;n++)this.fadeInRipple(r[n].clientX,r[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let r=e.state===er.VISIBLE||e.config.terminateOnPointerUp&&e.state===er.FADING_IN;!e.config.persistent&&r&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(vm.forEach(r=>t._eventManager.removeHandler(r,e,this)),this._pointerUpEventsRegistered&&(ym.forEach(r=>e.removeEventListener(r,this,gm)),this._pointerUpEventsRegistered=!1))}};function Sx(t,e,r){let n=Math.max(Math.abs(t-r.left),Math.abs(t-r.right)),i=Math.max(Math.abs(e-r.top),Math.abs(e-r.bottom));return Math.sqrt(n*n+i*i)}var ed=new lt("mat-ripple-global-options"),VE=(()=>{class t{_elementRef=k(Yt);_animationsDisabled=tr();color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(r){r&&this.fadeOutAllNonPersistent(),this._disabled=r,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(r){this._trigger=r,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){let r=k(qt),n=k(Re),i=k(ed,{optional:!0}),o=k(xt);this._globalOptions=i||{},this._rippleRenderer=new fa(this,r,this._elementRef,n,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:F(F(F({},this._globalOptions.animation),this._animationsDisabled?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(r,n=0,i){return typeof r=="number"?this._rippleRenderer.fadeInRipple(r,n,F(F({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,F(F({},this.rippleConfig),r))}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(n,i){n&2&&Ze("mat-ripple-unbounded",i.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return t})();var Rx={capture:!0},Ox=["focus","mousedown","mouseenter","touchstart"],rd="mat-ripple-loader-uninitialized",nd="mat-ripple-loader-class-name",bm="mat-ripple-loader-centered",Ys="mat-ripple-loader-disabled",_m=(()=>{class t{_document=k(le);_animationsDisabled=tr();_globalRippleOptions=k(ed,{optional:!0});_platform=k(Re);_ngZone=k(qt);_injector=k(xt);_eventCleanups;_hosts=new Map;constructor(){let r=k(Zr).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>Ox.map(n=>r.listen(this._document,n,this._onInteraction,Rx)))}ngOnDestroy(){let r=this._hosts.keys();for(let n of r)this.destroyRipple(n);this._eventCleanups.forEach(n=>n())}configureRipple(r,n){r.setAttribute(rd,this._globalRippleOptions?.namespace??""),(n.className||!r.hasAttribute(nd))&&r.setAttribute(nd,n.className||""),n.centered&&r.setAttribute(bm,""),n.disabled&&r.setAttribute(Ys,"")}setDisabled(r,n){let i=this._hosts.get(r);i?(i.target.rippleDisabled=n,!n&&!i.hasSetUpEvents&&(i.hasSetUpEvents=!0,i.renderer.setupTriggerEvents(r))):n?r.setAttribute(Ys,""):r.removeAttribute(Ys)}_onInteraction=r=>{let n=en(r);if(n instanceof HTMLElement){let i=n.closest(`[${rd}="${this._globalRippleOptions?.namespace??""}"]`);i&&this._createRipple(i)}};_createRipple(r){if(!this._document||this._hosts.has(r))return;r.querySelector(".mat-ripple")?.remove();let n=this._document.createElement("span");n.classList.add("mat-ripple",r.getAttribute(nd)),r.append(n);let i=this._globalRippleOptions,o=this._animationsDisabled?0:i?.animation?.enterDuration??da.enterDuration,s=this._animationsDisabled?0:i?.animation?.exitDuration??da.exitDuration,l={rippleDisabled:this._animationsDisabled||i?.disabled||r.hasAttribute(Ys),rippleConfig:{centered:r.hasAttribute(bm),terminateOnPointerUp:i?.terminateOnPointerUp,animation:{enterDuration:o,exitDuration:s}}},d=new fa(l,this._ngZone,n,this._platform,this._injector),p=!l.rippleDisabled;p&&d.setupTriggerEvents(r),this._hosts.set(r,{target:l,renderer:d,hasSetUpEvents:p}),r.removeAttribute(rd)}destroyRipple(r){let n=this._hosts.get(r);n&&(n.renderer._removeTriggerEvents(),this._hosts.delete(r))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var xm=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Jt({type:t,selectors:[["structural-styles"]],decls:0,vars:0,template:function(n,i){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return t})();var Ex=["mat-icon-button",""],Dx=["*"],kx=new lt("MAT_BUTTON_CONFIG");function wm(t){return t==null?void 0:Gp(t)}var id=(()=>{class t{_elementRef=k(Yt);_ngZone=k(qt);_animationsDisabled=tr();_config=k(kx,{optional:!0});_focusMonitor=k(Ws);_cleanupClick;_renderer=k(Dr);_rippleLoader=k(_m);_isAnchor;_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(r){this._disableRipple=r,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(r){this._disabled=r,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;tabIndex;set _tabindex(r){this.tabIndex=r}constructor(){k(mi).load(xm);let r=this._elementRef.nativeElement;this._isAnchor=r.tagName==="A",this.disabledInteractive=this._config?.disabledInteractive??!1,this.color=this._config?.color??null,this._rippleLoader?.configureRipple(r,{className:"mat-mdc-button-ripple"})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0),this._isAnchor&&this._setupAsAnchor()}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(r="program",n){r?this._focusMonitor.focusVia(this._elementRef.nativeElement,r,n):this._elementRef.nativeElement.focus(n)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this._isAnchor?this.disabled||null:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}_getTabIndex(){return this._isAnchor?this.disabled&&!this.disabledInteractive?-1:this.tabIndex:this.tabIndex}_setupAsAnchor(){this._cleanupClick=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"click",r=>{this.disabled&&(r.preventDefault(),r.stopImmediatePropagation())}))}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,hostAttrs:[1,"mat-mdc-button-base"],hostVars:13,hostBindings:function(n,i){n&2&&(pr("disabled",i._getDisabledAttribute())("aria-disabled",i._getAriaDisabled())("tabindex",i._getTabIndex()),Vp(i.color?"mat-"+i.color:""),Ze("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("mat-unthemed",!i.color)("_mat-animation-noopable",i._animationsDisabled))},inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",ge],disabled:[2,"disabled","disabled",ge],ariaDisabled:[2,"aria-disabled","ariaDisabled",ge],disabledInteractive:[2,"disabledInteractive","disabledInteractive",ge],tabIndex:[2,"tabIndex","tabIndex",wm],_tabindex:[2,"tabindex","_tabindex",wm]}})}return t})(),Ax=(()=>{class t extends id{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Jt({type:t,selectors:[["button","mat-icon-button",""],["a","mat-icon-button",""],["button","matIconButton",""],["a","matIconButton",""]],hostAttrs:[1,"mdc-icon-button","mat-mdc-icon-button"],exportAs:["matButton","matAnchor"],features:[Se],attrs:Ex,ngContentSelectors:Dx,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,i){n&1&&(oa(),mr(0,"span",0),fi(1),mr(2,"span",1)(3,"span",2))},styles:[`.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%));flex-shrink:0;text-align:center;width:var(--mat-icon-button-state-layer-size, 40px);height:var(--mat-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mat-icon-button-state-layer-size, 40px) - var(--mat-icon-button-icon-size, 24px)) / 2);font-size:var(--mat-icon-button-icon-size, 24px);color:var(--mat-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-icon-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-icon-button-touch-target-display, block);left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mat-icon-button-icon-size, 24px);height:var(--mat-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%))}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return t})();var Cm=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Xt({type:t});static \u0275inj=Qt({imports:[Je,Je]})}return t})();var Ix=["matButton",""],Tx=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Px=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var Sm=new Map([["text",["mat-mdc-button"]],["filled",["mdc-button--unelevated","mat-mdc-unelevated-button"]],["elevated",["mdc-button--raised","mat-mdc-raised-button"]],["outlined",["mdc-button--outlined","mat-mdc-outlined-button"]],["tonal",["mat-tonal-button"]]]),Rm=(()=>{class t extends id{get appearance(){return this._appearance}set appearance(r){this.setAppearance(r||this._config?.defaultAppearance||"text")}_appearance=null;constructor(){super();let r=Mx(this._elementRef.nativeElement);r&&this.setAppearance(r)}setAppearance(r){if(r===this._appearance)return;let n=this._elementRef.nativeElement.classList,i=this._appearance?Sm.get(this._appearance):null,o=Sm.get(r);i&&n.remove(...i),n.add(...o),this._appearance=r}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Jt({type:t,selectors:[["button","matButton",""],["a","matButton",""],["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""],["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostAttrs:[1,"mdc-button"],inputs:{appearance:[0,"matButton","appearance"]},exportAs:["matButton","matAnchor"],features:[Se],attrs:Ix,ngContentSelectors:Px,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,i){n&1&&(oa(Tx),mr(0,"span",0),fi(1),tn(2,"span",1),fi(3,1),kr(),fi(4,2),mr(5,"span",2)(6,"span",3)),n&2&&Ze("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab)},styles:[`.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-button-text-horizontal-padding, 12px);height:var(--mat-button-text-container-height, 40px);font-family:var(--mat-button-text-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-text-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-text-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-text-label-text-transform);font-weight:var(--mat-button-text-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mat-button-text-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mat-button-text-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-text-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-button-text-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-button-text-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-button-text-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-filled-container-height, 40px);font-family:var(--mat-button-filled-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-filled-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-filled-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-filled-label-text-transform);font-weight:var(--mat-button-filled-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-filled-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-button-filled-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-button-filled-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mat-button-filled-label-text-color, var(--mat-sys-on-primary));background-color:var(--mat-button-filled-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mat-button-filled-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mat-button-protected-container-elevation-shadow, var(--mat-sys-level1));height:var(--mat-button-protected-container-height, 40px);font-family:var(--mat-button-protected-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-protected-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-protected-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-protected-label-text-transform);font-weight:var(--mat-button-protected-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-protected-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-button-protected-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-button-protected-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-raised-button:not(:disabled){color:var(--mat-button-protected-label-text-color, var(--mat-sys-primary));background-color:var(--mat-button-protected-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mat-button-protected-container-shape, var(--mat-sys-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mat-button-protected-hover-container-elevation-shadow, var(--mat-sys-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mat-button-protected-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mat-button-protected-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-protected-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-protected-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mat-button-protected-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-outlined-container-height, 40px);font-family:var(--mat-button-outlined-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-outlined-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-outlined-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-outlined-label-text-transform);font-weight:var(--mat-button-outlined-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mat-button-outlined-container-shape, var(--mat-sys-corner-full));border-width:var(--mat-button-outlined-outline-width, 1px);padding:0 var(--mat-button-outlined-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-button-outlined-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-button-outlined-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-outlined-button:not(:disabled){color:var(--mat-button-outlined-label-text-color, var(--mat-sys-primary));border-color:var(--mat-button-outlined-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mat-button-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-tonal-container-height, 40px);font-family:var(--mat-button-tonal-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-tonal-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-tonal-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-tonal-label-text-transform);font-weight:var(--mat-button-tonal-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-tonal-horizontal-padding, 24px)}.mat-tonal-button:not(:disabled){color:var(--mat-button-tonal-label-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-button-tonal-container-color, var(--mat-sys-secondary-container))}.mat-tonal-button,.mat-tonal-button .mdc-button__ripple{border-radius:var(--mat-button-tonal-container-shape, var(--mat-sys-corner-full))}.mat-tonal-button[disabled],.mat-tonal-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-tonal-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-tonal-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-tonal-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}[dir=rtl] .mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}.mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}[dir=rtl] .mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}.mat-tonal-button .mat-ripple-element{background-color:var(--mat-button-tonal-ripple-color, color-mix(in srgb, var(--mat-sys-on-secondary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-tonal-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-tonal-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-tonal-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-tonal-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-tonal-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-tonal-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-button-tonal-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button,.mat-tonal-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon,.mat-tonal-button .mdc-button__label,.mat-tonal-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator,.mat-tonal-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-button:focus>.mat-focus-indicator::before,.mat-mdc-unelevated-button:focus>.mat-focus-indicator::before,.mat-mdc-raised-button:focus>.mat-focus-indicator::before,.mat-mdc-outlined-button:focus>.mat-focus-indicator::before,.mat-tonal-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable,.mat-tonal-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon,.mat-tonal-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-tonal-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return t})();function Mx(t){return t.hasAttribute("mat-raised-button")?"elevated":t.hasAttribute("mat-stroked-button")?"outlined":t.hasAttribute("mat-flat-button")?"filled":t.hasAttribute("mat-button")?"text":null}var Om=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Xt({type:t});static \u0275inj=Qt({imports:[Je,Cm,Je]})}return t})();var dt="primary",Ra=Symbol("RouteTitle"),ld=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let r=this.params[e];return Array.isArray(r)?r[0]:r}return null}getAll(e){if(this.has(e)){let r=this.params[e];return Array.isArray(r)?r:[r]}return[]}get keys(){return Object.keys(this.params)}};function bi(t){return new ld(t)}function Mm(t,e,r){let n=r.path.split("/");if(n.length>t.length||r.pathMatch==="full"&&(e.hasChildren()||n.length<t.length))return null;let i={};for(let o=0;o<n.length;o++){let s=n[o],l=t[o];if(s[0]===":")i[s.substring(1)]=l;else if(s!==l.path)return null}return{consumed:t.slice(0,n.length),posParams:i}}function Nx(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!Pr(t[r],e[r]))return!1;return!0}function Pr(t,e){let r=t?ud(t):void 0,n=e?ud(e):void 0;if(!r||!n||r.length!=n.length)return!1;let i;for(let o=0;o<r.length;o++)if(i=r[o],!Nm(t[i],e[i]))return!1;return!0}function ud(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Nm(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let r=[...t].sort(),n=[...e].sort();return r.every((i,o)=>n[o]===i)}else return t===e}function Lm(t){return t.length>0?t[t.length-1]:null}function an(t){return ra(t)?t:Bp(t)?pe(Promise.resolve(t)):nt(t)}var Lx={exact:Bm,subset:Fm},$m={exact:$x,subset:Bx,ignored:()=>!0};function Em(t,e,r){return Lx[r.paths](t.root,e.root,r.matrixParams)&&$m[r.queryParams](t.queryParams,e.queryParams)&&!(r.fragment==="exact"&&t.fragment!==e.fragment)}function $x(t,e){return Pr(t,e)}function Bm(t,e,r){if(!vi(t.segments,e.segments)||!Js(t.segments,e.segments,r)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let n in e.children)if(!t.children[n]||!Bm(t.children[n],e.children[n],r))return!1;return!0}function Bx(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(r=>Nm(t[r],e[r]))}function Fm(t,e,r){return jm(t,e,e.segments,r)}function jm(t,e,r,n){if(t.segments.length>r.length){let i=t.segments.slice(0,r.length);return!(!vi(i,r)||e.hasChildren()||!Js(i,r,n))}else if(t.segments.length===r.length){if(!vi(t.segments,r)||!Js(t.segments,r,n))return!1;for(let i in e.children)if(!t.children[i]||!Fm(t.children[i],e.children[i],n))return!1;return!0}else{let i=r.slice(0,t.segments.length),o=r.slice(t.segments.length);return!vi(t.segments,i)||!Js(t.segments,i,n)||!t.children[dt]?!1:jm(t.children[dt],e,o,n)}}function Js(t,e,r){return e.every((n,i)=>$m[r](t[i].parameters,n.parameters))}var Mr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Rt([],{}),r={},n=null){this.root=e,this.queryParams=r,this.fragment=n}get queryParamMap(){return this._queryParamMap??=bi(this.queryParams),this._queryParamMap}toString(){return Ux.serialize(this)}},Rt=class{segments;children;parent=null;constructor(e,r){this.segments=e,this.children=r,Object.values(r).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tc(this)}},An=class{path;parameters;_parameterMap;constructor(e,r){this.path=e,this.parameters=r}get parameterMap(){return this._parameterMap??=bi(this.parameters),this._parameterMap}toString(){return zm(this)}};function Fx(t,e){return vi(t,e)&&t.every((r,n)=>Pr(r.parameters,e[n].parameters))}function vi(t,e){return t.length!==e.length?!1:t.every((r,n)=>r.path===e[n].path)}function jx(t,e){let r=[];return Object.entries(t.children).forEach(([n,i])=>{n===dt&&(r=r.concat(e(i,n)))}),Object.entries(t.children).forEach(([n,i])=>{n!==dt&&(r=r.concat(e(i,n)))}),r}var _i=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:()=>new In,providedIn:"root"})}return t})(),In=class{parse(e){let r=new fd(e);return new Mr(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}serialize(e){let r=`/${ha(e.root,!0)}`,n=qx(e.queryParams),i=typeof e.fragment=="string"?`#${zx(e.fragment)}`:"";return`${r}${n}${i}`}},Ux=new In;function tc(t){return t.segments.map(e=>zm(e)).join("/")}function ha(t,e){if(!t.hasChildren())return tc(t);if(e){let r=t.children[dt]?ha(t.children[dt],!1):"",n=[];return Object.entries(t.children).forEach(([i,o])=>{i!==dt&&n.push(`${i}:${ha(o,!1)}`)}),n.length>0?`${r}(${n.join("//")})`:r}else{let r=jx(t,(n,i)=>i===dt?[ha(t.children[dt],!1)]:[`${i}:${ha(n,!1)}`]);return Object.keys(t.children).length===1&&t.children[dt]!=null?`${tc(t)}/${r[0]}`:`${tc(t)}/(${r.join("//")})`}}function Um(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xs(t){return Um(t).replace(/%3B/gi,";")}function zx(t){return encodeURI(t)}function dd(t){return Um(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ec(t){return decodeURIComponent(t)}function Dm(t){return ec(t.replace(/\+/g,"%20"))}function zm(t){return`${dd(t.path)}${Vx(t.parameters)}`}function Vx(t){return Object.entries(t).map(([e,r])=>`;${dd(e)}=${dd(r)}`).join("")}function qx(t){let e=Object.entries(t).map(([r,n])=>Array.isArray(n)?n.map(i=>`${Xs(r)}=${Xs(i)}`).join("&"):`${Xs(r)}=${Xs(n)}`).filter(r=>r);return e.length?`?${e.join("&")}`:""}var Hx=/^[^\/()?;#]+/;function od(t){let e=t.match(Hx);return e?e[0]:""}var Wx=/^[^\/()?;=#]+/;function Kx(t){let e=t.match(Wx);return e?e[0]:""}var Gx=/^[^=?&#]+/;function Qx(t){let e=t.match(Gx);return e?e[0]:""}var Yx=/^[^&#]+/;function Xx(t){let e=t.match(Yx);return e?e[0]:""}var fd=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Rt([],{}):new Rt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(r).length>0)&&(n[dt]=new Rt(e,r)),n}parseSegment(){let e=od(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Ce(4009,!1);return this.capture(e),new An(ec(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let r=Kx(this.remaining);if(!r)return;this.capture(r);let n="";if(this.consumeOptional("=")){let i=od(this.remaining);i&&(n=i,this.capture(n))}e[ec(r)]=ec(n)}parseQueryParam(e){let r=Qx(this.remaining);if(!r)return;this.capture(r);let n="";if(this.consumeOptional("=")){let s=Xx(this.remaining);s&&(n=s,this.capture(n))}let i=Dm(r),o=Dm(n);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=od(this.remaining),i=this.remaining[n.length];if(i!=="/"&&i!==")"&&i!==";")throw new Ce(4010,!1);let o;n.indexOf(":")>-1?(o=n.slice(0,n.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=dt);let s=this.parseChildren();r[o]=Object.keys(s).length===1?s[dt]:new Rt([],s),this.consumeOptional("//")}return r}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Ce(4011,!1)}};function Vm(t){return t.segments.length>0?new Rt([],{[dt]:t}):t}function qm(t){let e={};for(let[n,i]of Object.entries(t.children)){let o=qm(i);if(n===dt&&o.segments.length===0&&o.hasChildren())for(let[s,l]of Object.entries(o.children))e[s]=l;else(o.segments.length>0||o.hasChildren())&&(e[n]=o)}let r=new Rt(t.segments,e);return Zx(r)}function Zx(t){if(t.numberOfChildren===1&&t.children[dt]){let e=t.children[dt];return new Rt(t.segments.concat(e.segments),e.children)}return t}function Tn(t){return t instanceof Mr}function Hm(t,e,r=null,n=null){let i=Wm(t);return Km(i,e,r,n)}function Wm(t){let e;function r(o){let s={};for(let d of o.children){let p=r(d);s[d.outlet]=p}let l=new Rt(o.url,s);return o===t&&(e=l),l}let n=r(t.root),i=Vm(n);return e??i}function Km(t,e,r,n){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return ad(i,i,i,r,n);let o=Jx(e);if(o.toRoot())return ad(i,i,new Rt([],{}),r,n);let s=tw(o,i,t),l=s.processChildren?ma(s.segmentGroup,s.index,o.commands):Qm(s.segmentGroup,s.index,o.commands);return ad(i,s.segmentGroup,l,r,n)}function rc(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function va(t){return typeof t=="object"&&t!=null&&t.outlets}function ad(t,e,r,n,i){let o={};n&&Object.entries(n).forEach(([d,p])=>{o[d]=Array.isArray(p)?p.map(m=>`${m}`):`${p}`});let s;t===e?s=r:s=Gm(t,e,r);let l=Vm(qm(s));return new Mr(l,o,i)}function Gm(t,e,r){let n={};return Object.entries(t.children).forEach(([i,o])=>{o===e?n[i]=r:n[i]=Gm(o,e,r)}),new Rt(t.segments,n)}var nc=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,r,n){if(this.isAbsolute=e,this.numberOfDoubleDots=r,this.commands=n,e&&n.length>0&&rc(n[0]))throw new Ce(4003,!1);let i=n.find(va);if(i&&i!==Lm(n))throw new Ce(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Jx(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new nc(!0,0,t);let e=0,r=!1,n=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let l={};return Object.entries(o.outlets).forEach(([d,p])=>{l[d]=typeof p=="string"?p.split("/"):p}),[...i,{outlets:l}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((l,d)=>{d==0&&l==="."||(d==0&&l===""?r=!0:l===".."?e++:l!=""&&i.push(l))}),i):[...i,o]},[]);return new nc(r,e,n)}var no=class{segmentGroup;processChildren;index;constructor(e,r,n){this.segmentGroup=e,this.processChildren=r,this.index=n}};function tw(t,e,r){if(t.isAbsolute)return new no(e,!0,0);if(!r)return new no(e,!1,NaN);if(r.parent===null)return new no(r,!0,0);let n=rc(t.commands[0])?0:1,i=r.segments.length-1+n;return ew(r,i,t.numberOfDoubleDots)}function ew(t,e,r){let n=t,i=e,o=r;for(;o>i;){if(o-=i,n=n.parent,!n)throw new Ce(4005,!1);i=n.segments.length}return new no(n,!1,i-o)}function rw(t){return va(t[0])?t[0].outlets:{[dt]:t}}function Qm(t,e,r){if(t??=new Rt([],{}),t.segments.length===0&&t.hasChildren())return ma(t,e,r);let n=nw(t,e,r),i=r.slice(n.commandIndex);if(n.match&&n.pathIndex<t.segments.length){let o=new Rt(t.segments.slice(0,n.pathIndex),{});return o.children[dt]=new Rt(t.segments.slice(n.pathIndex),t.children),ma(o,0,i)}else return n.match&&i.length===0?new Rt(t.segments,{}):n.match&&!t.hasChildren()?hd(t,e,r):n.match?ma(t,0,i):hd(t,e,r)}function ma(t,e,r){if(r.length===0)return new Rt(t.segments,{});{let n=rw(r),i={};if(Object.keys(n).some(o=>o!==dt)&&t.children[dt]&&t.numberOfChildren===1&&t.children[dt].segments.length===0){let o=ma(t.children[dt],e,r);return new Rt(t.segments,o.children)}return Object.entries(n).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Qm(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{n[o]===void 0&&(i[o]=s)}),new Rt(t.segments,i)}}function nw(t,e,r){let n=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(n>=r.length)return o;let s=t.segments[i],l=r[n];if(va(l))break;let d=`${l}`,p=n<r.length-1?r[n+1]:null;if(i>0&&d===void 0)break;if(d&&p&&typeof p=="object"&&p.outlets===void 0){if(!Am(d,p,s))return o;n+=2}else{if(!Am(d,{},s))return o;n++}i++}return{match:!0,pathIndex:i,commandIndex:n}}function hd(t,e,r){let n=t.segments.slice(0,e),i=0;for(;i<r.length;){let o=r[i];if(va(o)){let d=iw(o.outlets);return new Rt(n,d)}if(i===0&&rc(r[0])){let d=t.segments[e];n.push(new An(d.path,km(r[0]))),i++;continue}let s=va(o)?o.outlets[dt]:`${o}`,l=i<r.length-1?r[i+1]:null;s&&l&&rc(l)?(n.push(new An(s,km(l))),i+=2):(n.push(new An(s,{})),i++)}return new Rt(n,{})}function iw(t){let e={};return Object.entries(t).forEach(([r,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(e[r]=hd(new Rt([],{}),0,n))}),e}function km(t){let e={};return Object.entries(t).forEach(([r,n])=>e[r]=`${n}`),e}function Am(t,e,r){return t==r.path&&Pr(e,r.parameters)}var io="imperative",ne=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ne||{}),qe=class{id;url;constructor(e,r){this.id=e,this.url=r}},Nr=class extends qe{type=ne.NavigationStart;navigationTrigger;restoredState;constructor(e,r,n="imperative",i=null){super(e,r),this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},nr=class extends qe{urlAfterRedirects;type=ne.NavigationEnd;constructor(e,r,n){super(e,r),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},De=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(De||{}),ao=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(ao||{}),rr=class extends qe{reason;code;type=ne.NavigationCancel;constructor(e,r,n,i){super(e,r),this.reason=n,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Lr=class extends qe{reason;code;type=ne.NavigationSkipped;constructor(e,r,n,i){super(e,r),this.reason=n,this.code=i}},so=class extends qe{error;target;type=ne.NavigationError;constructor(e,r,n,i){super(e,r),this.error=n,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ya=class extends qe{urlAfterRedirects;state;type=ne.RoutesRecognized;constructor(e,r,n,i){super(e,r),this.urlAfterRedirects=n,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ic=class extends qe{urlAfterRedirects;state;type=ne.GuardsCheckStart;constructor(e,r,n,i){super(e,r),this.urlAfterRedirects=n,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},oc=class extends qe{urlAfterRedirects;state;shouldActivate;type=ne.GuardsCheckEnd;constructor(e,r,n,i,o){super(e,r),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ac=class extends qe{urlAfterRedirects;state;type=ne.ResolveStart;constructor(e,r,n,i){super(e,r),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sc=class extends qe{urlAfterRedirects;state;type=ne.ResolveEnd;constructor(e,r,n,i){super(e,r),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cc=class{route;type=ne.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},lc=class{route;type=ne.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},uc=class{snapshot;type=ne.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dc=class{snapshot;type=ne.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fc=class{snapshot;type=ne.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hc=class{snapshot;type=ne.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},co=class{routerEvent;position;anchor;type=ne.Scroll;constructor(e,r,n){this.routerEvent=e,this.position=r,this.anchor=n}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ba=class{},lo=class{url;navigationBehaviorOptions;constructor(e,r){this.url=e,this.navigationBehaviorOptions=r}};function ow(t){return!(t instanceof ba)&&!(t instanceof lo)}function aw(t,e){return t.providers&&!t._injector&&(t._injector=zs(t.providers,e,`Route: ${t.path}`)),t._injector??e}function vr(t){return t.outlet||dt}function sw(t,e){let r=t.filter(n=>vr(n)===e);return r.push(...t.filter(n=>vr(n)!==e)),r}function Oa(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let r=e.routeConfig;if(r?._loadedInjector)return r._loadedInjector;if(r?._injector)return r._injector}return null}var pc=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Oa(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new xi(this.rootInjector)}},xi=(()=>{class t{rootInjector;contexts=new Map;constructor(r){this.rootInjector=r}onChildOutletCreated(r,n){let i=this.getOrCreateContext(r);i.outlet=n,this.contexts.set(r,i)}onChildOutletDestroyed(r){let n=this.getContext(r);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let n=this.getContext(r);return n||(n=new pc(this.rootInjector),this.contexts.set(r,n)),n}getContext(r){return this.contexts.get(r)||null}static \u0275fac=function(n){return new(n||t)(zt(fr))};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),mc=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let r=this.pathFromRoot(e);return r.length>1?r[r.length-2]:null}children(e){let r=pd(e,this._root);return r?r.children.map(n=>n.value):[]}firstChild(e){let r=pd(e,this._root);return r&&r.children.length>0?r.children[0].value:null}siblings(e){let r=md(e,this._root);return r.length<2?[]:r[r.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return md(e,this._root).map(r=>r.value)}};function pd(t,e){if(t===e.value)return e;for(let r of e.children){let n=pd(t,r);if(n)return n}return null}function md(t,e){if(t===e.value)return[e];for(let r of e.children){let n=md(t,r);if(n.length)return n.unshift(e),n}return[]}var Ve=class{value;children;constructor(e,r){this.value=e,this.children=r}toString(){return`TreeNode(${this.value})`}};function ro(t){let e={};return t&&t.children.forEach(r=>e[r.value.outlet]=r),e}var _a=class extends mc{snapshot;constructor(e,r){super(e),this.snapshot=r,Cd(this,e)}toString(){return this.snapshot.toString()}};function Ym(t){let e=cw(t),r=new we([new An("",{})]),n=new we({}),i=new we({}),o=new we({}),s=new we(""),l=new ir(r,n,o,s,i,dt,t,e.root);return l.snapshot=e.root,new _a(new Ve(l,[]),e)}function cw(t){let e={},r={},n={},i="",o=new yi([],e,n,i,r,dt,t,null,{});return new xa("",new Ve(o,[]))}var ir=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,r,n,i,o,s,l,d){this.urlSubject=e,this.paramsSubject=r,this.queryParamsSubject=n,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=l,this._futureSnapshot=d,this.title=this.dataSubject?.pipe(ut(p=>p[Ra]))??nt(void 0),this.url=e,this.params=r,this.queryParams=n,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ut(e=>bi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ut(e=>bi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function gc(t,e,r="emptyOnly"){let n,{routeConfig:i}=t;return e!==null&&(r==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?n={params:F(F({},e.params),t.params),data:F(F({},e.data),t.data),resolve:F(F(F(F({},t.data),e.data),i?.data),t._resolvedData)}:n={params:F({},t.params),data:F({},t.data),resolve:F(F({},t.data),t._resolvedData??{})},i&&Zm(i)&&(n.resolve[Ra]=i.title),n}var yi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ra]}constructor(e,r,n,i,o,s,l,d,p){this.url=e,this.params=r,this.queryParams=n,this.fragment=i,this.data=o,this.outlet=s,this.component=l,this.routeConfig=d,this._resolve=p}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=bi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=bi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(n=>n.toString()).join("/"),r=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${r}')`}},xa=class extends mc{url;constructor(e,r){super(r),this.url=e,Cd(this,r)}toString(){return Xm(this._root)}};function Cd(t,e){e.value._routerState=t,e.children.forEach(r=>Cd(t,r))}function Xm(t){let e=t.children.length>0?` { ${t.children.map(Xm).join(", ")} } `:"";return`${t.value}${e}`}function sd(t){if(t.snapshot){let e=t.snapshot,r=t._futureSnapshot;t.snapshot=r,Pr(e.queryParams,r.queryParams)||t.queryParamsSubject.next(r.queryParams),e.fragment!==r.fragment&&t.fragmentSubject.next(r.fragment),Pr(e.params,r.params)||t.paramsSubject.next(r.params),Nx(e.url,r.url)||t.urlSubject.next(r.url),Pr(e.data,r.data)||t.dataSubject.next(r.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function gd(t,e){let r=Pr(t.params,e.params)&&Fx(t.url,e.url),n=!t.parent!=!e.parent;return r&&!n&&(!t.parent||gd(t.parent,e.parent))}function Zm(t){return typeof t.title=="string"||t.title===null}var Jm=new lt(""),Sd=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=dt;activateEvents=new re;deactivateEvents=new re;attachEvents=new re;detachEvents=new re;routerOutletData=Wp(void 0);parentContexts=k(xi);location=k(On);changeDetector=k(Ar);inputBinder=k(Ea,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(r){if(r.name){let{firstChange:n,previousValue:i}=r.name;if(n)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ce(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ce(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ce(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,n){this.activated=r,this._activatedRoute=n,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,n){if(this.isActivated)throw new Ce(4013,!1);this._activatedRoute=r;let i=this.location,s=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,d=new vd(r,l,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:d,environmentInjector:n}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Yr]})}return t})(),vd=class{route;childContexts;parent;outletData;constructor(e,r,n,i){this.route=e,this.childContexts=r,this.parent=n,this.outletData=i}get(e,r){return e===ir?this.route:e===xi?this.childContexts:e===Jm?this.outletData:this.parent.get(e,r)}},Ea=new lt(""),Rd=(()=>{class t{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:n}=r,i=$s([n.queryParams,n.params,n.data]).pipe(Ue(([o,s,l],d)=>(l=F(F(F({},o),s),l),d===0?nt(l):Promise.resolve(l)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==n||n.component===null){this.unsubscribeFromRouteData(r);return}let s=Yp(n.component);if(!s){this.unsubscribeFromRouteData(r);return}for(let{templateName:l}of s.inputs)r.activatedComponentRef.setInput(l,o[l])});this.outletDataSubscriptions.set(r,i)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac})}return t})(),Da=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Jt({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(n,i){n&1&&mr(0,"router-outlet")},dependencies:[Sd],encapsulation:2})}return t})();function Od(t){let e=t.children&&t.children.map(Od),r=e?gt(F({},t),{children:e}):F({},t);return!r.component&&!r.loadComponent&&(e||r.loadChildren)&&r.outlet&&r.outlet!==dt&&(r.component=Da),r}function lw(t,e,r){let n=wa(t,e._root,r?r._root:void 0);return new _a(n,e)}function wa(t,e,r){if(r&&t.shouldReuseRoute(e.value,r.value.snapshot)){let n=r.value;n._futureSnapshot=e.value;let i=uw(t,e,r);return new Ve(n,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(l=>wa(t,l)),s}}let n=dw(e.value),i=e.children.map(o=>wa(t,o));return new Ve(n,i)}}function uw(t,e,r){return e.children.map(n=>{for(let i of r.children)if(t.shouldReuseRoute(n.value,i.value.snapshot))return wa(t,n,i);return wa(t,n)})}function dw(t){return new ir(new we(t.url),new we(t.params),new we(t.queryParams),new we(t.fragment),new we(t.data),t.outlet,t.component,t)}var uo=class{redirectTo;navigationBehaviorOptions;constructor(e,r){this.redirectTo=e,this.navigationBehaviorOptions=r}},tg="ngNavigationCancelingError";function vc(t,e){let{redirectTo:r,navigationBehaviorOptions:n}=Tn(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=eg(!1,De.Redirect);return i.url=r,i.navigationBehaviorOptions=n,i}function eg(t,e){let r=new Error(`NavigationCancelingError: ${t||""}`);return r[tg]=!0,r.cancellationCode=e,r}function fw(t){return rg(t)&&Tn(t.url)}function rg(t){return!!t&&t[tg]}var hw=(t,e,r,n)=>ut(i=>(new yd(e,i.targetRouterState,i.currentRouterState,r,n).activate(t),i)),yd=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,r,n,i,o){this.routeReuseStrategy=e,this.futureState=r,this.currState=n,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let r=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,n,e),sd(this.futureState.root),this.activateChildRoutes(r,n,e)}deactivateChildRoutes(e,r,n){let i=ro(r);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],n),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,n)})}deactivateRoutes(e,r,n){let i=e.value,o=r?r.value:null;if(i===o)if(i.component){let s=n.getContext(i.outlet);s&&this.deactivateChildRoutes(e,r,s.children)}else this.deactivateChildRoutes(e,r,n);else o&&this.deactivateRouteAndItsChildren(r,n)}deactivateRouteAndItsChildren(e,r){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,r):this.deactivateRouteAndOutlet(e,r)}detachAndStoreRouteSubtree(e,r){let n=r.getContext(e.value.outlet),i=n&&e.value.component?n.children:r,o=ro(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(n&&n.outlet){let s=n.outlet.detach(),l=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:l})}}deactivateRouteAndOutlet(e,r){let n=r.getContext(e.value.outlet),i=n&&e.value.component?n.children:r,o=ro(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(e,r,n){let i=ro(r);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],n),this.forwardEvent(new hc(o.value.snapshot))}),e.children.length&&this.forwardEvent(new dc(e.value.snapshot))}activateRoutes(e,r,n){let i=e.value,o=r?r.value:null;if(sd(i),i===o)if(i.component){let s=n.getOrCreateContext(i.outlet);this.activateChildRoutes(e,r,s.children)}else this.activateChildRoutes(e,r,n);else if(i.component){let s=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let l=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(l.contexts),s.attachRef=l.componentRef,s.route=l.route.value,s.outlet&&s.outlet.attach(l.componentRef,l.route.value),sd(l.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,n)}},yc=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},oo=class{component;route;constructor(e,r){this.component=e,this.route=r}};function pw(t,e,r){let n=t._root,i=e?e._root:null;return pa(n,i,r,[n.value])}function mw(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ho(t,e){let r=Symbol(),n=e.get(t,r);return n===r?typeof t=="function"&&!Cp(t)?t:e.get(t):n}function pa(t,e,r,n,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ro(e);return t.children.forEach(s=>{gw(s,o[s.value.outlet],r,n.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,l])=>ga(l,r.getContext(s),i)),i}function gw(t,e,r,n,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,l=r?r.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let d=vw(s,o,o.routeConfig.runGuardsAndResolvers);d?i.canActivateChecks.push(new yc(n)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?pa(t,e,l?l.children:null,n,i):pa(t,e,r,n,i),d&&l&&l.outlet&&l.outlet.isActivated&&i.canDeactivateChecks.push(new oo(l.outlet.component,s))}else s&&ga(e,l,i),i.canActivateChecks.push(new yc(n)),o.component?pa(t,null,l?l.children:null,n,i):pa(t,null,r,n,i);return i}function vw(t,e,r){if(typeof r=="function")return r(t,e);switch(r){case"pathParamsChange":return!vi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!vi(t.url,e.url)||!Pr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!gd(t,e)||!Pr(t.queryParams,e.queryParams);case"paramsChange":default:return!gd(t,e)}}function ga(t,e,r){let n=ro(t),i=t.value;Object.entries(n).forEach(([o,s])=>{i.component?e?ga(s,e.children.getContext(o),r):ga(s,null,r):ga(s,e,r)}),i.component?e&&e.outlet&&e.outlet.isActivated?r.canDeactivateChecks.push(new oo(e.outlet.component,i)):r.canDeactivateChecks.push(new oo(null,i)):r.canDeactivateChecks.push(new oo(null,i))}function ka(t){return typeof t=="function"}function yw(t){return typeof t=="boolean"}function bw(t){return t&&ka(t.canLoad)}function _w(t){return t&&ka(t.canActivate)}function xw(t){return t&&ka(t.canActivateChild)}function ww(t){return t&&ka(t.canDeactivate)}function Cw(t){return t&&ka(t.canMatch)}function ng(t){return t instanceof gp||t?.name==="EmptyError"}var Zs=Symbol("INITIAL_VALUE");function fo(){return Ue(t=>$s(t.map(e=>e.pipe(Or(1),dr(Zs)))).pipe(ut(e=>{for(let r of e)if(r!==!0){if(r===Zs)return Zs;if(r===!1||Sw(r))return r}return!0}),bt(e=>e!==Zs),Or(1)))}function Sw(t){return Tn(t)||t instanceof uo}function Rw(t,e){return Wt(r=>{let{targetSnapshot:n,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=r;return s.length===0&&o.length===0?nt(gt(F({},r),{guardsResult:!0})):Ow(s,n,i,t).pipe(Wt(l=>l&&yw(l)?Ew(n,o,t,e):nt(l)),ut(l=>gt(F({},r),{guardsResult:l})))})}function Ow(t,e,r,n){return pe(t).pipe(Wt(i=>Tw(i.component,i.route,r,e,n)),Rn(i=>i!==!0,!0))}function Ew(t,e,r,n){return pe(e).pipe(ui(i=>yp(kw(i.route.parent,n),Dw(i.route,n),Iw(t,i.path,r),Aw(t,i.route,r))),Rn(i=>i!==!0,!0))}function Dw(t,e){return t!==null&&e&&e(new fc(t)),nt(!0)}function kw(t,e){return t!==null&&e&&e(new uc(t)),nt(!0)}function Aw(t,e,r){let n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||n.length===0)return nt(!0);let i=n.map(o=>Sn(()=>{let s=Oa(e)??r,l=ho(o,s),d=_w(l)?l.canActivate(e,t):Er(s,()=>l(e,t));return an(d).pipe(Rn())}));return nt(i).pipe(fo())}function Iw(t,e,r){let n=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>mw(s)).filter(s=>s!==null).map(s=>Sn(()=>{let l=s.guards.map(d=>{let p=Oa(s.node)??r,m=ho(d,p),y=xw(m)?m.canActivateChild(n,t):Er(p,()=>m(n,t));return an(y).pipe(Rn())});return nt(l).pipe(fo())}));return nt(o).pipe(fo())}function Tw(t,e,r,n,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return nt(!0);let s=o.map(l=>{let d=Oa(e)??i,p=ho(l,d),m=ww(p)?p.canDeactivate(t,e,r,n):Er(d,()=>p(t,e,r,n));return an(m).pipe(Rn())});return nt(s).pipe(fo())}function Pw(t,e,r,n){let i=e.canLoad;if(i===void 0||i.length===0)return nt(!0);let o=i.map(s=>{let l=ho(s,t),d=bw(l)?l.canLoad(e,r):Er(t,()=>l(e,r));return an(d)});return nt(o).pipe(fo(),ig(n))}function ig(t){return pp(me(e=>{if(typeof e!="boolean")throw vc(t,e)}),ut(e=>e===!0))}function Mw(t,e,r,n){let i=e.canMatch;if(!i||i.length===0)return nt(!0);let o=i.map(s=>{let l=ho(s,t),d=Cw(l)?l.canMatch(e,r):Er(t,()=>l(e,r));return an(d)});return nt(o).pipe(fo(),ig(n))}var Ca=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Sa=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function eo(t){return ea(new Ca(t))}function Nw(t){return ea(new Ce(4e3,!1))}function Lw(t){return ea(eg(!1,De.GuardRejected))}var bd=class{urlSerializer;urlTree;constructor(e,r){this.urlSerializer=e,this.urlTree=r}lineralizeSegments(e,r){let n=[],i=r.root;for(;;){if(n=n.concat(i.segments),i.numberOfChildren===0)return nt(n);if(i.numberOfChildren>1||!i.children[dt])return Nw(`${e.redirectTo}`);i=i.children[dt]}}applyRedirectCommands(e,r,n,i,o){return $w(r,i,o).pipe(ut(s=>{if(s instanceof Mr)throw new Sa(s);let l=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,n);if(s[0]==="/")throw new Sa(l);return l}))}applyRedirectCreateUrlTree(e,r,n,i){let o=this.createSegmentGroup(e,r.root,n,i);return new Mr(o,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}createQueryParams(e,r){let n={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let l=o.substring(1);n[i]=r[l]}else n[i]=o}),n}createSegmentGroup(e,r,n,i){let o=this.createSegments(e,r.segments,n,i),s={};return Object.entries(r.children).forEach(([l,d])=>{s[l]=this.createSegmentGroup(e,d,n,i)}),new Rt(o,s)}createSegments(e,r,n,i){return r.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,n))}findPosParam(e,r,n){let i=n[r.path.substring(1)];if(!i)throw new Ce(4001,!1);return i}findOrReturn(e,r){let n=0;for(let i of r){if(i.path===e.path)return r.splice(n),i;n++}return e}};function $w(t,e,r){if(typeof t=="string")return nt(t);let n=t,{queryParams:i,fragment:o,routeConfig:s,url:l,outlet:d,params:p,data:m,title:y}=e;return an(Er(r,()=>n({params:p,data:m,queryParams:i,fragment:o,routeConfig:s,url:l,outlet:d,title:y})))}var _d={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Bw(t,e,r,n,i){let o=og(t,e,r);return o.matched?(n=aw(e,n),Mw(n,e,r,i).pipe(ut(s=>s===!0?o:F({},_d)))):nt(o)}function og(t,e,r){if(e.path==="**")return Fw(r);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||r.length>0)?F({},_d):{matched:!0,consumedSegments:[],remainingSegments:r,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Mm)(r,t,e);if(!i)return F({},_d);let o={};Object.entries(i.posParams??{}).forEach(([l,d])=>{o[l]=d.path});let s=i.consumed.length>0?F(F({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:r.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Fw(t){return{matched:!0,parameters:t.length>0?Lm(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Im(t,e,r,n){return r.length>0&&zw(t,r,n)?{segmentGroup:new Rt(e,Uw(n,new Rt(r,t.children))),slicedSegments:[]}:r.length===0&&Vw(t,r,n)?{segmentGroup:new Rt(t.segments,jw(t,r,n,t.children)),slicedSegments:r}:{segmentGroup:new Rt(t.segments,t.children),slicedSegments:r}}function jw(t,e,r,n){let i={};for(let o of r)if(_c(t,e,o)&&!n[vr(o)]){let s=new Rt([],{});i[vr(o)]=s}return F(F({},n),i)}function Uw(t,e){let r={};r[dt]=e;for(let n of t)if(n.path===""&&vr(n)!==dt){let i=new Rt([],{});r[vr(n)]=i}return r}function zw(t,e,r){return r.some(n=>_c(t,e,n)&&vr(n)!==dt)}function Vw(t,e,r){return r.some(n=>_c(t,e,n))}function _c(t,e,r){return(t.hasChildren()||e.length>0)&&r.pathMatch==="full"?!1:r.path===""}function qw(t,e,r){return e.length===0&&!t.children[r]}var xd=class{};function Hw(t,e,r,n,i,o,s="emptyOnly"){return new wd(t,e,r,n,i,s,o).recognize()}var Ww=31,wd=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,r,n,i,o,s,l){this.injector=e,this.configLoader=r,this.rootComponentType=n,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=l,this.applyRedirects=new bd(this.urlSerializer,this.urlTree)}noMatchError(e){return new Ce(4002,`'${e.segmentGroup}'`)}recognize(){let e=Im(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ut(({children:r,rootSnapshot:n})=>{let i=new Ve(n,r),o=new xa("",i),s=Hm(n,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let r=new yi([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),dt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,dt,r).pipe(ut(n=>({children:n,rootSnapshot:r})),li(n=>{if(n instanceof Sa)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof Ca?this.noMatchError(n):n}))}processSegmentGroup(e,r,n,i,o){return n.segments.length===0&&n.hasChildren()?this.processChildren(e,r,n,o):this.processSegment(e,r,n,n.segments,i,!0,o).pipe(ut(s=>s instanceof Ve?[s]:[]))}processChildren(e,r,n,i){let o=[];for(let s of Object.keys(n.children))s==="primary"?o.unshift(s):o.push(s);return pe(o).pipe(ui(s=>{let l=n.children[s],d=sw(r,s);return this.processSegmentGroup(e,d,l,s,i)}),xp((s,l)=>(s.push(...l),s)),$u(null),bp(),Wt(s=>{if(s===null)return eo(n);let l=ag(s);return Kw(l),nt(l)}))}processSegment(e,r,n,i,o,s,l){return pe(r).pipe(ui(d=>this.processSegmentAgainstRoute(d._injector??e,r,d,n,i,o,s,l).pipe(li(p=>{if(p instanceof Ca)return nt(null);throw p}))),Rn(d=>!!d),li(d=>{if(ng(d))return qw(n,i,o)?nt(new xd):eo(n);throw d}))}processSegmentAgainstRoute(e,r,n,i,o,s,l,d){return vr(n)!==s&&(s===dt||!_c(i,o,n))?eo(i):n.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,n,o,s,d):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(e,i,r,n,o,s,d):eo(i)}expandSegmentAgainstRouteUsingRedirect(e,r,n,i,o,s,l){let{matched:d,parameters:p,consumedSegments:m,positionalParamSegments:y,remainingSegments:S}=og(r,i,o);if(!d)return eo(r);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Ww&&(this.allowRedirects=!1));let D=new yi(o,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Tm(i),vr(i),i.component??i._loadedComponent??null,i,Pm(i)),M=gc(D,l,this.paramsInheritanceStrategy);return D.params=Object.freeze(M.params),D.data=Object.freeze(M.data),this.applyRedirects.applyRedirectCommands(m,i.redirectTo,y,D,e).pipe(Ue(G=>this.applyRedirects.lineralizeSegments(i,G)),Wt(G=>this.processSegment(e,n,r,G.concat(S),s,!1,l)))}matchSegmentAgainstRoute(e,r,n,i,o,s){let l=Bw(r,n,i,e,this.urlSerializer);return n.path==="**"&&(r.children={}),l.pipe(Ue(d=>d.matched?(e=n._injector??e,this.getChildConfig(e,n,i).pipe(Ue(({routes:p})=>{let m=n._loadedInjector??e,{parameters:y,consumedSegments:S,remainingSegments:D}=d,M=new yi(S,y,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Tm(n),vr(n),n.component??n._loadedComponent??null,n,Pm(n)),j=gc(M,s,this.paramsInheritanceStrategy);M.params=Object.freeze(j.params),M.data=Object.freeze(j.data);let{segmentGroup:G,slicedSegments:J}=Im(r,S,D,p);if(J.length===0&&G.hasChildren())return this.processChildren(m,p,G,M).pipe(ut(tt=>new Ve(M,tt)));if(p.length===0&&J.length===0)return nt(new Ve(M,[]));let rt=vr(n)===o;return this.processSegment(m,p,G,J,rt?dt:o,!0,M).pipe(ut(tt=>new Ve(M,tt instanceof Ve?[tt]:[])))}))):eo(r)))}getChildConfig(e,r,n){return r.children?nt({routes:r.children,injector:e}):r.loadChildren?r._loadedRoutes!==void 0?nt({routes:r._loadedRoutes,injector:r._loadedInjector}):Pw(e,r,n,this.urlSerializer).pipe(Wt(i=>i?this.configLoader.loadChildren(e,r).pipe(me(o=>{r._loadedRoutes=o.routes,r._loadedInjector=o.injector})):Lw(r))):nt({routes:[],injector:e})}};function Kw(t){t.sort((e,r)=>e.value.outlet===dt?-1:r.value.outlet===dt?1:e.value.outlet.localeCompare(r.value.outlet))}function Gw(t){let e=t.value.routeConfig;return e&&e.path===""}function ag(t){let e=[],r=new Set;for(let n of t){if(!Gw(n)){e.push(n);continue}let i=e.find(o=>n.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...n.children),r.add(i)):e.push(n)}for(let n of r){let i=ag(n.children);e.push(new Ve(n.value,i))}return e.filter(n=>!r.has(n))}function Tm(t){return t.data||{}}function Pm(t){return t.resolve||{}}function Qw(t,e,r,n,i,o){return Wt(s=>Hw(t,e,r,n,s.extractedUrl,i,o).pipe(ut(({state:l,tree:d})=>gt(F({},s),{targetSnapshot:l,urlAfterRedirects:d}))))}function Yw(t,e){return Wt(r=>{let{targetSnapshot:n,guards:{canActivateChecks:i}}=r;if(!i.length)return nt(r);let o=new Set(i.map(d=>d.route)),s=new Set;for(let d of o)if(!s.has(d))for(let p of sg(d))s.add(p);let l=0;return pe(s).pipe(ui(d=>o.has(d)?Xw(d,n,t,e):(d.data=gc(d,d.parent,t).resolve,nt(void 0))),me(()=>l++),Bu(1),Wt(d=>l===s.size?nt(r):Qr))})}function sg(t){let e=t.children.map(r=>sg(r)).flat();return[t,...e]}function Xw(t,e,r,n){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!Zm(i)&&(o[Ra]=i.title),Sn(()=>(t.data=gc(t,t.parent,r).resolve,Zw(o,t,e,n).pipe(ut(s=>(t._resolvedData=s,t.data=F(F({},t.data),s),null)))))}function Zw(t,e,r,n){let i=ud(t);if(i.length===0)return nt({});let o={};return pe(i).pipe(Wt(s=>Jw(t[s],e,r,n).pipe(Rn(),me(l=>{if(l instanceof uo)throw vc(new In,l);o[s]=l}))),Bu(1),ut(()=>o),li(s=>ng(s)?Qr:ea(s)))}function Jw(t,e,r,n){let i=Oa(e)??n,o=ho(t,i),s=o.resolve?o.resolve(e,r):Er(i,()=>o(e,r));return an(s)}function cd(t){return Ue(e=>{let r=t(e);return r?pe(r).pipe(ut(()=>e)):nt(e)})}var Ed=(()=>{class t{buildTitle(r){let n,i=r.root;for(;i!==void 0;)n=this.getResolvedTitleForRoute(i)??n,i=i.children.find(o=>o.outlet===dt);return n}getResolvedTitleForRoute(r){return r.data[Ra]}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:()=>k(cg),providedIn:"root"})}return t})(),cg=(()=>{class t extends Ed{title;constructor(r){super(),this.title=r}updateTitle(r){let n=this.buildTitle(r);n!==void 0&&this.title.setTitle(n)}static \u0275fac=function(n){return new(n||t)(zt(im))};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Pn=new lt("",{providedIn:"root",factory:()=>({})}),$r=new lt(""),xc=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(qs);loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return nt(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let n=an(r.loadComponent()).pipe(ut(ug),me(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Wi(()=>{this.componentLoaders.delete(r)})),i=new ci(n,()=>new at).pipe(ta());return this.componentLoaders.set(r,i),i}loadChildren(r,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return nt({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let o=lg(n,this.compiler,r,this.onLoadEndListener).pipe(Wi(()=>{this.childrenLoaders.delete(n)})),s=new ci(o,()=>new at).pipe(ta());return this.childrenLoaders.set(n,s),s}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function lg(t,e,r,n){return an(t.loadChildren()).pipe(ut(ug),Wt(i=>i instanceof Us||Array.isArray(i)?nt(i):pe(e.compileModuleAsync(i))),ut(i=>{n&&n(t);let o,s,l=!1;return Array.isArray(i)?(s=i,l=!0):(o=i.create(r).injector,s=o.get($r,[],{optional:!0,self:!0}).flat()),{routes:s.map(Od),injector:o}}))}function t0(t){return t&&typeof t=="object"&&"default"in t}function ug(t){return t0(t)?t.default:t}var wc=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:()=>k(e0),providedIn:"root"})}return t})(),e0=(()=>{class t{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,n){return r}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Dd=new lt(""),kd=new lt("");function dg(t,e,r){let n=t.get(kd),i=t.get(le);if(!i.startViewTransition||n.skipNextTransition)return n.skipNextTransition=!1,new Promise(p=>setTimeout(p));let o,s=new Promise(p=>{o=p}),l=i.startViewTransition(()=>(o(),r0(t))),{onViewTransitionCreated:d}=n;return d&&Er(t,()=>d({transition:l,from:e,to:r})),s}function r0(t){return new Promise(e=>{hr({read:()=>setTimeout(e)},{injector:t})})}var Ad=new lt(""),Cc=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new at;transitionAbortWithErrorSubject=new at;configLoader=k(xc);environmentInjector=k(fr);destroyRef=k(Ep);urlSerializer=k(_i);rootContexts=k(xi);location=k(Ir);inputBindingEnabled=k(Ea,{optional:!0})!==null;titleStrategy=k(Ed);options=k(Pn,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(wc);createViewTransition=k(Dd,{optional:!0});navigationErrorHandler=k(Ad,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>nt(void 0);rootComponentType=null;destroyed=!1;constructor(){let r=i=>this.events.next(new cc(i)),n=i=>this.events.next(new lc(i));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=r,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(r){let n=++this.navigationId;this.transitions?.next(gt(F({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:n}))}setupNavigations(r){return this.transitions=new we(null),this.transitions.pipe(bt(n=>n!==null),Ue(n=>{let i=!1;return nt(n).pipe(Ue(o=>{if(this.navigationId>n.id)return this.cancelNavigationTransition(n,"",De.SupersededByNewNavigation),Qr;this.currentTransition=n,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?gt(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=o.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!s&&l!=="reload"){let d="";return this.events.next(new Lr(o.id,this.urlSerializer.serialize(o.rawUrl),d,ao.IgnoredSameUrlNavigation)),o.resolve(!1),Qr}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return nt(o).pipe(Ue(d=>(this.events.next(new Nr(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?Qr:Promise.resolve(d))),Qw(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),me(d=>{n.targetSnapshot=d.targetSnapshot,n.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=gt(F({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let p=new ya(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:d,extractedUrl:p,source:m,restoredState:y,extras:S}=o,D=new Nr(d,this.urlSerializer.serialize(p),m,y);this.events.next(D);let M=Ym(this.rootComponentType).snapshot;return this.currentTransition=n=gt(F({},o),{targetSnapshot:M,urlAfterRedirects:p,extras:gt(F({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,nt(n)}else{let d="";return this.events.next(new Lr(o.id,this.urlSerializer.serialize(o.extractedUrl),d,ao.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Qr}}),me(o=>{let s=new ic(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ut(o=>(this.currentTransition=n=gt(F({},o),{guards:pw(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),n)),Rw(this.environmentInjector,o=>this.events.next(o)),me(o=>{if(n.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw vc(this.urlSerializer,o.guardsResult);let s=new oc(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),bt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",De.GuardRejected),!1)),cd(o=>{if(o.guards.canActivateChecks.length!==0)return nt(o).pipe(me(s=>{let l=new ac(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(l)}),Ue(s=>{let l=!1;return nt(s).pipe(Yw(this.paramsInheritanceStrategy,this.environmentInjector),me({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(s,"",De.NoDataFromResolver)}}))}),me(s=>{let l=new sc(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(l)}))}),cd(o=>{let s=l=>{let d=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(l.routeConfig).pipe(me(p=>{l.component=p}),ut(()=>{})));for(let p of l.children)d.push(...s(p));return d};return $s(s(o.targetSnapshot.root)).pipe($u(null),Or(1))}),cd(()=>this.afterPreactivation()),Ue(()=>{let{currentSnapshot:o,targetSnapshot:s}=n,l=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return l?pe(l).pipe(ut(()=>n)):nt(n)}),ut(o=>{let s=lw(r.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=n=gt(F({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,n}),me(()=>{this.events.next(new ba)}),hw(this.rootContexts,r.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Or(1),Ki(new qi(o=>{let s=n.abortController.signal,l=()=>o.next();return s.addEventListener("abort",l),()=>s.removeEventListener("abort",l)}).pipe(bt(()=>!i&&!n.targetRouterState),me(()=>{this.cancelNavigationTransition(n,n.abortController.signal.reason+"",De.Aborted)}))),me({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new nr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Ki(this.transitionAbortWithErrorSubject.pipe(me(o=>{throw o}))),Wi(()=>{i||this.cancelNavigationTransition(n,"",De.SupersededByNewNavigation),this.currentTransition?.id===n.id&&(this.currentNavigation=null,this.currentTransition=null)}),li(o=>{if(this.destroyed)return n.resolve(!1),Qr;if(i=!0,rg(o))this.events.next(new rr(n.id,this.urlSerializer.serialize(n.extractedUrl),o.message,o.cancellationCode)),fw(o)?this.events.next(new lo(o.url,o.navigationBehaviorOptions)):n.resolve(!1);else{let s=new so(n.id,this.urlSerializer.serialize(n.extractedUrl),o,n.targetSnapshot??void 0);try{let l=Er(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(l instanceof uo){let{message:d,cancellationCode:p}=vc(this.urlSerializer,l);this.events.next(new rr(n.id,this.urlSerializer.serialize(n.extractedUrl),d,p)),this.events.next(new lo(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(l){this.options.resolveNavigationPromiseOnError?n.resolve(!1):n.reject(l)}}return Qr}))}))}cancelNavigationTransition(r,n,i){let o=new rr(r.id,this.urlSerializer.serialize(r.extractedUrl),n,i);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),n=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==n?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function n0(t){return t!==io}var Sc=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:()=>k(i0),providedIn:"root"})}return t})(),bc=class{shouldDetach(e){return!1}store(e,r){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,r){return e.routeConfig===r.routeConfig}},i0=(()=>{class t extends bc{static \u0275fac=(()=>{let r;return function(i){return(r||(r=ze(t)))(i||t)}})();static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),fg=(()=>{class t{urlSerializer=k(_i);options=k(Pn,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=k(Ir);urlHandlingStrategy=k(wc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Mr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:r,initialUrl:n,targetBrowserUrl:i}){let o=r!==void 0?this.urlHandlingStrategy.merge(r,n):n,s=i??o;return s instanceof Mr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:r,finalUrl:n,initialUrl:i}){n&&r?(this.currentUrlTree=n,this.rawUrlTree=this.urlHandlingStrategy.merge(n,i),this.routerState=r):this.rawUrlTree=i}routerState=Ym(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:r}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r??this.rawUrlTree)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:()=>k(o0),providedIn:"root"})}return t})(),o0=(()=>{class t extends fg{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(n=>{n.type==="popstate"&&setTimeout(()=>{r(n.url,n.state,"popstate")})})}handleRouterEvent(r,n){r instanceof Nr?this.updateStateMemento():r instanceof Lr?this.commitTransition(n):r instanceof ya?this.urlUpdateStrategy==="eager"&&(n.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(n),n)):r instanceof ba?(this.commitTransition(n),this.urlUpdateStrategy==="deferred"&&!n.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(n),n)):r instanceof rr&&r.code!==De.SupersededByNewNavigation&&r.code!==De.Redirect?this.restoreHistory(n):r instanceof so?this.restoreHistory(n,!0):r instanceof nr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,{extras:n,id:i}){let{replaceUrl:o,state:s}=n;if(this.location.isCurrentPathEqualTo(r)||o){let l=this.browserPageId,d=F(F({},s),this.generateNgRouterState(i,l));this.location.replaceState(r,"",d)}else{let l=F(F({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(r,"",l)}}restoreHistory(r,n=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===r.finalUrl&&o===0&&(this.resetInternalState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetInternalState(r),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,n){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:n}:{navigationId:r}}static \u0275fac=(()=>{let r;return function(i){return(r||(r=ze(t)))(i||t)}})();static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Rc(t,e){t.events.pipe(bt(r=>r instanceof nr||r instanceof rr||r instanceof so||r instanceof Lr),ut(r=>r instanceof nr||r instanceof Lr?0:(r instanceof rr?r.code===De.Redirect||r.code===De.SupersededByNewNavigation:!1)?2:1),bt(r=>r!==2),Or(1)).subscribe(()=>{e()})}var a0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},s0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ke=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k($p);stateManager=k(fg);options=k(Pn,{optional:!0})||{};pendingTasks=k(Dp);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(Cc);urlSerializer=k(_i);location=k(Ir);urlHandlingStrategy=k(wc);injector=k(fr);_events=new at;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k(Sc);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k($r,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(Ea,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Rr;subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(n=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(n,o),n instanceof rr&&n.code!==De.Redirect&&n.code!==De.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof nr)this.navigated=!0;else if(n instanceof lo){let s=n.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(n.url,i.currentRawUrl),d=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||n0(i.source)},s);this.scheduleNavigation(l,io,null,d,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}ow(n)&&this._events.next(n)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),io,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,n,i)=>{this.navigateToSyncWithBrowser(r,i,n)})}navigateToSyncWithBrowser(r,n,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let d=F({},i);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(o.state=d)}let l=this.parseUrl(r);this.scheduleNavigation(l,n,s,o).catch(d=>{this.injector.get(Fs)(d)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Od),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,n={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:l,preserveFragment:d}=n,p=d?this.currentUrlTree.fragment:s,m=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":m=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=o||null}m!==null&&(m=this.removeEmptyProps(m));let y;try{let S=i?i.snapshot:this.routerState.snapshot.root;y=Wm(S)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),y=this.currentUrlTree.root}return Km(y,r,m,p??null)}navigateByUrl(r,n={skipLocationChange:!1}){let i=Tn(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,io,null,n)}navigate(r,n={skipLocationChange:!1}){return c0(r),this.navigateByUrl(this.createUrlTree(r,n),n)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,n){let i;if(n===!0?i=F({},a0):n===!1?i=F({},s0):i=n,Tn(r))return Em(this.currentUrlTree,r,i);let o=this.parseUrl(r);return Em(this.currentUrlTree,o,i)}removeEmptyProps(r){return Object.entries(r).reduce((n,[i,o])=>(o!=null&&(n[i]=o),n),{})}scheduleNavigation(r,n,i,o,s){if(this.disposed)return Promise.resolve(!1);let l,d,p;s?(l=s.resolve,d=s.reject,p=s.promise):p=new Promise((y,S)=>{l=y,d=S});let m=this.pendingTasks.add();return Rc(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:l,reject:d,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(y=>Promise.reject(y))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function c0(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Ce(4008,!1)}var hg=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=ia(null);get href(){return qp(this.reactiveHref)}set href(r){this.reactiveHref.set(r)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new at;applicationErrorHandler=k(Fs);options=k(Pn,{optional:!0});constructor(r,n,i,o,s,l){this.router=r,this.route=n,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=l,this.reactiveHref.set(k(new Hp("href"),{optional:!0}));let d=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=d==="a"||d==="area"||!!(typeof customElements=="object"&&customElements.get(d)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let r=this.preserveFragment,n=i=>i==="merge"||i==="preserve";r||=n(this.queryParamsHandling),r||=!this.queryParamsHandling&&!n(this.options?.defaultQueryParamsHandling),r&&(this.subscription=this.router.events.subscribe(i=>{i instanceof nr&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(r){r==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Tn(r)?this.routerLinkInput=r:this.routerLinkInput=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0"))}onClick(r,n,i,o,s){let l=this.urlTree;if(l===null||this.isAnchorElement&&(r!==0||n||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let d={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,d)?.catch(p=>{this.applicationErrorHandler(p)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.reactiveHref.set(r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r))??"":null)}applyAttributeValue(r,n){let i=this.renderer,o=this.el.nativeElement;n!==null?i.setAttribute(o,r,n):i.removeAttribute(o,r)}get urlTree(){return this.routerLinkInput===null?null:Tn(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(n){return new(n||t)(Jr(ke),Jr(ir),Ap("tabindex"),Jr(Dr),Jr(Yt),Jr(aa))};static \u0275dir=Nt({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(n,i){n&1&&di("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),n&2&&pr("href",i.reactiveHref(),Tp)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ge],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ge],replaceUrl:[2,"replaceUrl","replaceUrl",ge],routerLink:"routerLink"},features:[Yr]})}return t})();var Aa=class{};var pg=(()=>{class t{router;injector;preloadingStrategy;loader;subscription;constructor(r,n,i,o){this.router=r,this.injector=n,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(bt(r=>r instanceof nr),ui(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,n){let i=[];for(let o of n){o.providers&&!o._injector&&(o._injector=zs(o.providers,r,`Route: ${o.path}`));let s=o._injector??r,l=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(l,o.children??o._loadedRoutes))}return pe(i).pipe(Nu())}preloadConfig(r,n){return this.preloadingStrategy.preload(n,()=>{let i;n.loadChildren&&n.canLoad===void 0?i=this.loader.loadChildren(r,n):i=nt(null);let o=i.pipe(Wt(s=>s===null?nt(void 0):(n._loadedRoutes=s.routes,n._loadedInjector=s.injector,this.processRoutes(s.injector??r,s.routes))));if(n.loadComponent&&!n._loadedComponent){let s=this.loader.loadComponent(n);return pe([o,s]).pipe(Nu())}else return o})}static \u0275fac=function(n){return new(n||t)(zt(ke),zt(fr),zt(Aa),zt(xc))};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),mg=new lt(""),l0=(()=>{class t{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=io;restoredId=0;store={};constructor(r,n,i,o,s={}){this.urlSerializer=r,this.transitions=n,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Nr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof nr?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Lr&&r.code===ao.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof co&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,n){this.zone.runOutsideAngular(()=>U(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new co(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,n))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(n){Pp()};static \u0275prov=ct({token:t,factory:t.\u0275fac})}return t})();function u0(t,...e){return Sp([{provide:$r,multi:!0,useValue:t},[],{provide:ir,useFactory:gg,deps:[ke]},{provide:Vu,multi:!0,useFactory:vg},e.map(r=>r.\u0275providers)])}function gg(t){return t.routerState.root}function Ia(t,e){return{\u0275kind:t,\u0275providers:e}}function vg(){let t=k(xt);return e=>{let r=t.get(Vs);if(e!==r.components[0])return;let n=t.get(ke),i=t.get(yg);t.get(Td)===1&&n.initialNavigation(),t.get(xg,null,{optional:!0})?.setUpPreloading(),t.get(mg,null,{optional:!0})?.init(),n.resetRootComponentType(r.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var yg=new lt("",{factory:()=>new at}),Td=new lt("",{providedIn:"root",factory:()=>1});function bg(){let t=[{provide:Td,useValue:0},zu(()=>{let e=k(xt);return e.get(Xp,Promise.resolve()).then(()=>new Promise(n=>{let i=e.get(ke),o=e.get(yg);Rc(i,()=>{n(!0)}),e.get(Cc).afterPreactivation=()=>(n(!0),o.closed?nt(void 0):o),i.initialNavigation()}))})];return Ia(2,t)}function _g(){let t=[zu(()=>{k(ke).setUpLocationChangeListener()}),{provide:Td,useValue:2}];return Ia(3,t)}var xg=new lt("");function wg(t){return Ia(0,[{provide:xg,useExisting:pg},{provide:Aa,useExisting:t}])}function Cg(){return Ia(8,[Rd,{provide:Ea,useExisting:Rd}])}function Sg(t){Mp("NgRouterViewTransitions");let e=[{provide:Dd,useValue:dg},{provide:kd,useValue:F({skipNextTransition:!!t?.skipInitialTransition},t)}];return Ia(9,e)}var Rg=[Ir,{provide:_i,useClass:In},ke,xi,{provide:ir,useFactory:gg,deps:[ke]},xc,[]],Pd=(()=>{class t{constructor(){}static forRoot(r,n){return{ngModule:t,providers:[Rg,[],{provide:$r,multi:!0,useValue:r},[],n?.errorHandler?{provide:Ad,useValue:n.errorHandler}:[],{provide:Pn,useValue:n||{}},n?.useHash?f0():h0(),d0(),n?.preloadingStrategy?wg(n.preloadingStrategy).\u0275providers:[],n?.initialNavigation?p0(n):[],n?.bindToComponentInputs?Cg().\u0275providers:[],n?.enableViewTransitions?Sg().\u0275providers:[],m0()]}}static forChild(r){return{ngModule:t,providers:[{provide:$r,multi:!0,useValue:r}]}}static \u0275fac=function(n){return new(n||t)};static \u0275mod=Xt({type:t});static \u0275inj=Qt({})}return t})();function d0(){return{provide:mg,useFactory:()=>{let t=k(rm),e=k(qt),r=k(Pn),n=k(Cc),i=k(_i);return r.scrollOffset&&t.setOffset(r.scrollOffset),new l0(i,n,t,e,r)}}}function f0(){return{provide:aa,useClass:Jp}}function h0(){return{provide:aa,useClass:Zp}}function p0(t){return[t.initialNavigation==="disabled"?_g().\u0275providers:[],t.initialNavigation==="enabledBlocking"?bg().\u0275providers:[]]}var Id=new lt("");function m0(){return[{provide:Id,useFactory:vg},{provide:Vu,multi:!0,useExisting:Id}]}var g0=new lt("LOCALIZE_ROUTER_FORROOT_GUARD"),Md=new lt("RAW_ROUTES"),Mn=function(t){return t.LocalStorage="LocalStorage",t.SessionStorage="SessionStorage",t.Cookie="Cookie",t}(Mn||{}),Eg=new lt("USE_CACHED_LANG"),Dg=new lt("CACHE_MECHANISM"),kg=new lt("CACHE_NAME"),Ag=new lt("COOKIE_FORMAT"),Ig=new lt("INITIAL_NAVIGATION"),Tg=new lt("DEFAULT_LANG_FUNCTION"),Pg=new lt("ALWAYS_SET_PREFIX"),v0="LOCALIZE_DEFAULT_LANGUAGE",y0="{{value}};{{expires}}",b0=!1,Ec=(()=>{let e=class e{constructor(n=!0,i=!0,o=Mn.LocalStorage,s=v0,l=void 0,d=y0,p=b0){this.useCachedLang=n,this.alwaysSetPrefix=i,this.cacheName=s,this.cookieFormat=d,this.initialNavigation=p,this.cacheMechanism=o,this.defaultLangFunction=l}};e.\u0275fac=function(i){return new(i||e)(zt(Eg),zt(Pg),zt(Dg),zt(kg),zt(Tg),zt(Ag),zt(Ig))},e.\u0275prov=ct({token:e,factory:e.\u0275fac});let t=e;return t})(),_0=30,Ta=(()=>{let e=class e{constructor(n,i,o){this.translate=n,this.location=i,this.settings=o}init(n){let i;if(this.routes=n,!this.locales||!this.locales.length)return Promise.resolve();let o=this.getLocationLang(),s=this._getBrowserLang();this.settings.defaultLangFunction?this.defaultLang=this.settings.defaultLangFunction(this.locales,this._cachedLang,s):this.defaultLang=this._cachedLang||s||this.locales[0],i=o||this.defaultLang,this.translate.setDefaultLang(this.defaultLang);let l=[];if(this.settings.alwaysSetPrefix){let d={path:"",redirectTo:this.defaultLang,pathMatch:"full"},p=n.findIndex(m=>m.path==="**");p!==-1&&(this._wildcardRoute=n.splice(p,1)[0]),l=this.routes.splice(0,this.routes.length,d)}else l=[...this.routes];for(let d=l.length-1;d>=0;d--)l[d].data&&l[d].data.skipRouteLocalization&&(this.settings.alwaysSetPrefix&&this.routes.push(l[d]),(l[d].redirectTo===void 0||!l[d].data.skipRouteLocalization.localizeRedirectTo||typeof l[d].redirectTo=="function")&&l.splice(d,1));return l&&l.length&&(this.locales.length>1||this.settings.alwaysSetPrefix)&&(this._languageRoute={children:l},this.routes.unshift(this._languageRoute)),this._wildcardRoute&&this.settings.alwaysSetPrefix&&this.routes.push(this._wildcardRoute),vp(this.translateRoutes(i))}initChildRoutes(n){return this._translateRouteTree(n),n}translateRoutes(n){return new qi(i=>{this._cachedLang=n,this._languageRoute&&(this._languageRoute.path=n),this.translate.use(n).subscribe(o=>{this._translationObject=o,this.currentLang=n,this._languageRoute?(this._translateRouteTree(this._languageRoute.children,!0),this._wildcardRoute&&this._wildcardRoute.redirectTo&&this._translateProperty(this._wildcardRoute,"redirectTo",!0)):this._translateRouteTree(this.routes,!0),i.next(void 0),i.complete()})})}_translateRouteTree(n,i){n.forEach(o=>{let s=o.data&&o.data.skipRouteLocalization,l=!s||s.localizeRedirectTo;if(o.redirectTo&&l&&typeof o.redirectTo!="function"){let d=o.redirectTo.indexOf("/")===0||i;this._translateProperty(o,"redirectTo",d)}s||(o.path!==null&&o.path!==void 0&&this._translateProperty(o,"path"),o.children&&this._translateRouteTree(o.children),o.loadChildren&&o._loadedRoutes?.length&&this._translateRouteTree(o._loadedRoutes))})}_translateProperty(n,i,o){let s=n.data=n.data||{};s.localizeRouter||(s.localizeRouter={}),s.localizeRouter[i]||(s.localizeRouter=gt(F({},s.localizeRouter),{[i]:n[i]}));let l=this.translateRoute(s.localizeRouter[i]);n[i]=o?this.addPrefixToUrl(l):l}get urlPrefix(){return this.settings.alwaysSetPrefix||this.currentLang!==this.defaultLang?this.currentLang?this.currentLang:this.defaultLang:""}addPrefixToUrl(n){let i=n.split("?"),o=i[0].length===1&&i[0]==="/";i[0]=i[0].replace(/\/$/,"");let s=i.join("?");return this.urlPrefix===""?s:!s.startsWith("/")&&!o?`${this.urlPrefix}/${s}`:`/${this.urlPrefix}${s}`}translateRoute(n){let i=n.split("?");if(i.length>2)throw Error("There should be only one query parameter block in the URL");return i[0].split("/").map(s=>s.length?this.translateText(s):s).join("/")+(i.length>1?`?${i[1]}`:"")}getLocationLang(n){let i=(n||this.location.path()).split(/[\?;]/),o=[];return i.length>0&&(o=i[0].split("/")),o.length>1&&this.locales.indexOf(o[1])!==-1?o[1]:o.length&&this.locales.indexOf(o[0])!==-1?o[0]:null}_getBrowserLang(){return this._returnIfInLocales(this.translate.getBrowserLang())}get _cachedLang(){if(this.settings.useCachedLang){if(this.settings.cacheMechanism===Mn.LocalStorage)return this._cacheWithLocalStorage();if(this.settings.cacheMechanism===Mn.SessionStorage)return this._cacheWithSessionStorage();if(this.settings.cacheMechanism===Mn.Cookie)return this._cacheWithCookies()}}set _cachedLang(n){this.settings.useCachedLang&&(this.settings.cacheMechanism===Mn.LocalStorage&&this._cacheWithLocalStorage(n),this.settings.cacheMechanism===Mn.SessionStorage&&this._cacheWithSessionStorage(n),this.settings.cacheMechanism===Mn.Cookie&&this._cacheWithCookies(n))}_cacheWithLocalStorage(n){try{if(typeof window>"u"||typeof window.localStorage>"u")return;if(n){window.localStorage.setItem(this.settings.cacheName,n);return}return this._returnIfInLocales(window.localStorage.getItem(this.settings.cacheName))}catch{return}}_cacheWithSessionStorage(n){try{if(typeof window>"u"||typeof window.sessionStorage>"u")return;if(n){window.sessionStorage.setItem(this.settings.cacheName,n);return}return this._returnIfInLocales(window.sessionStorage.getItem(this.settings.cacheName))}catch{return}}_cacheWithCookies(n){try{if(typeof document>"u"||typeof document.cookie>"u")return;let i=encodeURIComponent(this.settings.cacheName);if(n){let l=`${this.settings.cookieFormat}`;l=l.replace("{{value}}",`${i}=${encodeURIComponent(n)}`).replace(/{{expires:?(\d+)?}}/g,(d,p)=>{let m=p===void 0?_0:parseInt(p,10),y=new Date;return y.setTime(y.getTime()+m*864e5),`expires=${y.toUTCString()}`}),document.cookie=l;return}let s=new RegExp("(?:^"+i+"|;\\s*"+i+")=(.*?)(?:;|$)","g").exec(document.cookie);return decodeURIComponent(s[1])}catch{return}}_returnIfInLocales(n){return n&&this.locales.indexOf(n)!==-1?n:null}translateText(n){if(this.escapePrefix&&n.startsWith(this.escapePrefix))return n.replace(this.escapePrefix,"");{if(!this._translationObject)return n;let i=this.prefix+n,o=this.translate.getParsedResult(this._translationObject,i);return o!==i?o:n}}chooseQueryParams(n,i){let o;return n&&n.queryParams?o=n.queryParams:i&&(o=i),o}formatQueryParams(n){return new nm({fromObject:n}).toString()}getPrefix(){return this.prefix}getEscapePrefix(){return this.escapePrefix}};e.\u0275fac=function(i){return new(i||e)(zt(dm),zt(Ir),zt(Ec))},e.\u0275prov=ct({token:e,factory:e.\u0275fac});let t=e;return t})();var x0=(()=>{let e=class e extends Ta{load(n){return new Promise(i=>{this.init(n).then(i)})}};e.\u0275fac=(()=>{let n;return function(o){return(n||(n=ze(e)))(o||e)}})(),e.\u0275prov=ct({token:e,factory:e.\u0275fac});let t=e;return t})();function Oc(t,e){if(t===e)return!0;if(t===null||e===null)return!1;if(t!==t&&e!==e)return!0;let r=typeof t,n=typeof e,i,o,s;if(r===n&&r==="object")if(Array.isArray(t)){if(!Array.isArray(e))return!1;if((i=t.length)===e.length){for(o=0;o<i;o++)if(!Oc(t[o],e[o]))return!1;return!0}}else{if(Array.isArray(e))return!1;s=Object.create(null);for(o in t)if(t.hasOwnProperty(o)){if(!Oc(t[o],e[o]))return!1;s[o]=!0}for(o in e)if(e.hasOwnProperty(o)&&!(o in s)&&typeof e[o]<"u")return!1;return!0}return!1}function w0(t){return!!t&&typeof t.then=="function"}function Ld(t){let e=Array.isArray(t)?[]:{};for(let r in t)if(r){let n=t[r];e[r]=typeof n=="object"?Ld(n):n}return e}var $d=(()=>{let e=class e{constructor(n,i,o,s){this.parser=n,this.settings=i,this.router=o,this.route=s,this.routerEvents=new at;let l=new mp(1);this.hooks={_initializedSubject:l,initialized:l.asObservable()}}init(){this.applyConfigToRouter(this.parser.routes),this.router.events.pipe(bt(n=>n instanceof Nr),Fu()).subscribe(this._routeChanged()),this.settings.initialNavigation&&this.router.initialNavigation()}changeLanguage(n,i,o){if(n!==this.parser.currentLang){let s=this.router.routerState.snapshot.root;this.parser.translateRoutes(n).subscribe(()=>{let l=this.traverseRouteSnapshot(s);if(l=this.translateRoute(l),!this.settings.alwaysSetPrefix){let m=l.split("/"),y=m.indexOf(this.parser.currentLang);if(this.parser.currentLang===this.parser.defaultLang)(y===0||y===1&&m[0]==="")&&(m=m.slice(0,y).concat(m.slice(y+1)));else if(y===-1){let S=m[0]===""?1:0;m=m.slice(0,S).concat(this.parser.currentLang,m.slice(S))}l=m.join("/")}l=l.replace(/\/+/g,"/");let d=l.lastIndexOf("/");d>0&&d===l.length-1&&(l=l.slice(0,-1));let p=this.parser.chooseQueryParams(i,this.route.snapshot.queryParams);if(this.applyConfigToRouter(this.parser.routes),this.lastExtras=i,o){let m=i?F({},i):{};p&&(m.queryParams=p),this.router.navigate([l],m)}else{let m=this.parser.formatQueryParams(p);m=m?`?${m}`:"",this.router.navigateByUrl(`${l}${m}`,i)}})}}traverseRouteSnapshot(n){return n.firstChild&&n.routeConfig?`${this.parseSegmentValue(n)}/${this.traverseRouteSnapshot(n.firstChild)}`:n.firstChild?this.traverseRouteSnapshot(n.firstChild):this.parseSegmentValue(n)}buildUrlFromSegments(n,i){return i.map((o,s)=>o.indexOf(":")===0?n.url[s].path:o).join("/")}parseSegmentValue(n){if(n.routeConfig&&n.routeConfig.matcher){let i=this.parseSegmentValueMatcher(n);return this.buildUrlFromSegments(n,i)}else if(n.data.localizeRouter){let o=n.data.localizeRouter.path.split("/");return this.buildUrlFromSegments(n,o)}else if(n.parent&&n.parent.parent){let o=n.routeConfig.path.split("/");return this.buildUrlFromSegments(n,o)}else return""}parseSegmentValueMatcher(n){let i=n.data&&n.data.localizeMatcher&&n.data.localizeMatcher.params||{};return n.url.map(s=>{let l=s.path,d=s.localizedParamName;return(d&&i[d]?i[d](l):null)||`${this.parser.getEscapePrefix()}${l}`})}translateRoute(n){if(typeof n=="string"){let o=this.parser.translateRoute(n);return n.indexOf("/")?o:this.parser.addPrefixToUrl(o)}let i=[];return n.forEach((o,s)=>{if(typeof o=="string"){let l=this.parser.translateRoute(o);!s&&!o.indexOf("/")?i.push(this.parser.addPrefixToUrl(l)):i.push(l)}else i.push(o)}),i}_routeChanged(){return([n,i])=>{let o=this.parser.getLocationLang(n.url)||this.parser.defaultLang,s=this.parser.getLocationLang(i.url)||this.parser.defaultLang,l=this.lastExtras;s!==o&&this.latestUrl!==i.url&&(this.latestUrl=i.url,this.cancelCurrentNavigation(),this.parser.translateRoutes(s).subscribe(()=>{this.applyConfigToRouter(this.parser.routes),this.lastExtras=void 0,this.router.navigateByUrl(i.url,l),this.routerEvents.next(s)})),this.latestUrl=i.url}}cancelCurrentNavigation(){let n=this.router.getCurrentNavigation(),i=this.router.serializeUrl(n.extractedUrl);this.router.events.next(new rr(n.id,i,"")),this.router.navigationTransitions.transitions.next(gt(F({},this.router.navigationTransitions.transitions.getValue()),{id:0}))}applyConfigToRouter(n){this.router.resetConfig(Ld(n))}};e.\u0275fac=function(i){return new(i||e)(zt(Ta),zt(Ec),zt(ke),zt(ir))},e.\u0275prov=ct({token:e,factory:e.\u0275fac});let t=e;return t})(),C0=128,wk=(()=>{let e=class e{constructor(n,i){this.localize=n,this._ref=i,this.value="",this.subscription=this.localize.routerEvents.subscribe(()=>{this.transform(this.lastKey)})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}transform(n){if(!n||n.length===0||!this.localize.parser.currentLang)return n;if(Oc(n,this.lastKey)&&Oc(this.lastLanguage,this.localize.parser.currentLang))return this.value;this.lastKey=n,this.lastLanguage=this.localize.parser.currentLang,this.value=this.localize.translateRoute(n),this.lastKey=n;let i=this._ref._view;return i&&i.state&C0?this.value:(setTimeout(()=>{this._ref.detectChanges()},0),this.value)}};e.\u0275fac=function(i){return new(i||e)(Jr($d,16),Jr(Ar,16))},e.\u0275pipe=Np({name:"localize",type:e,pure:!1});let t=e;return t})(),Nd=class{constructor(){}shouldDetach(e){return!1}store(e,r){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,r){return e&&r?this.getKey(e)===this.getKey(r):!1}getKey(e){if(e.firstChild&&e.firstChild.routeConfig&&e.firstChild.routeConfig.path&&e.firstChild.routeConfig.path.indexOf("**")!==-1)return"WILDCARD";if(!e.data.localizeRouter&&(!e.parent||!e.parent.parent)&&!e.data.skipRouteLocalization)return"LANG";if(e.routeConfig.matcher){let r=`${this.getKey(e.parent)}/${e.routeConfig.matcher.name}`;return e.data.discriminantPathKey&&(r=`${r}-${e.data.discriminantPathKey}`),r}else if(e.data.localizeRouter){let r=`${this.getKey(e.parent)}/${e.data.localizeRouter.path}`;return e.data.discriminantPathKey&&(r=`${r}-${e.data.discriminantPathKey}`),r}else{let r=e.routeConfig.path;return e.parent&&(r=`${this.getKey(e.parent)}/${e.routeConfig.path}`),e.data.discriminantPathKey&&(r=`${r}-${e.data.discriminantPathKey}`),r}}},S0=(()=>{let e=class e extends ke{constructor(){super(),this.platformId=k(Ip),this.compiler=k(qs),this.localize=k(Ta),this.childrenLoaders=new WeakMap,this.loadModuleFactoryOrRoutes=(o,s)=>E0(s.loadChildren()).pipe(ut(O0),Wt(l=>l instanceof Us||Array.isArray(l)?nt(l):pe(this.compiler.compileModuleAsync(l))),ut(l=>{this.onLoadEndListener&&this.onLoadEndListener(s);let d,p;if(Array.isArray(l))p=this.localize.initChildRoutes([].concat(...l));else{d=l.create(o).injector;let y=d.get.bind(d);d.get=(S,D,M)=>{let j=y(S,D,M);return S===$r?this.localize.initChildRoutes([].concat(...j)):j},p=d.get($r,[],{optional:!0,self:!0}).reduce((S,D)=>S.concat(D),[])}return{routes:p.map(Mg),injector:d}}));let i=em(this.platformId)?this.navigationTransitions.configLoader.__proto__:this.navigationTransitions.configLoader;i.loadChildren=(o,s)=>{if(this.childrenLoaders.get(s))return this.childrenLoaders.get(s);if(s._loadedRoutes)return nt({routes:s._loadedRoutes,injector:s._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(s);let d=this.loadModuleFactoryOrRoutes(o,s).pipe(Wi(()=>{this.childrenLoaders.delete(s)})),p=new ci(d,()=>new at).pipe(ta());return this.childrenLoaders.set(s,p),p}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Mg(t){let e=t.children&&t.children.map(Mg),r=e?gt(F({},t),{children:e}):F({},t);return!r.component&&!r.loadComponent&&(e||r.loadChildren)&&r.outlet&&r.outlet!==dt&&(r.component=Da),r}function R0(t){return t&&typeof t=="object"&&"default"in t}function O0(t){return R0(t)?t.default:t}function E0(t){return ra(t)?t:w0(t)?pe(Promise.resolve(t)):nt(t)}var Og=(()=>{let e=class e{constructor(n){this.injector=n}appInitializer(){return this.parser.load(this.routes).then(()=>{let i=this.injector.get($d),o=this.injector.get(ke),s=this.injector.get(Ec);if(i.init(),s.initialNavigation)return new Promise(l=>{let d=o.navigationTransitions.afterPreactivation,p=!0;o.navigationTransitions.afterPreactivation=()=>(p&&(l(),p=!1,i.hooks._initializedSubject.next(!0),i.hooks._initializedSubject.complete()),d())});i.hooks._initializedSubject.next(!0),i.hooks._initializedSubject.complete()})}generateInitializer(n,i){return this.parser=n,this.routes=i.reduce((o,s)=>o.concat(s)),this.appInitializer}};e.\u0275fac=function(i){return new(i||e)(zt(xt))},e.\u0275prov=ct({token:e,factory:e.\u0275fac});let t=e;return t})();function D0(t,e,r){let n=Ld(r);return t.generateInitializer(e,n).bind(t)}function k0(t,e){return[{provide:ke,useClass:S0},{provide:g0,useFactory:I0,deps:[[A0,new ju,new kp]]},{provide:Eg,useValue:e.useCachedLang},{provide:Pg,useValue:e.alwaysSetPrefix},{provide:kg,useValue:e.cacheName},{provide:Dg,useValue:e.cacheMechanism},{provide:Tg,useValue:e.defaultLangFunction},{provide:Ag,useValue:e.cookieFormat},{provide:Ig,useValue:e.initialNavigation},Ec,e.parser||{provide:Ta,useClass:x0},{provide:Md,multi:!0,useValue:t},$d,Og,{provide:Fp,multi:!0,useFactory:D0,deps:[Og,Ta,Md]},{provide:Sc,useClass:Nd}]}var A0=(()=>{let e=class e{static forRoot(n,i={}){return{ngModule:e,providers:k0(n,i)}}static forChild(n){return{ngModule:e,providers:[{provide:Md,multi:!0,useValue:n}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xt({type:e}),e.\u0275inj=Qt({imports:[tm,Pd,fm]});let t=e;return t})();function I0(t){if(t)throw new Error("LocalizeRouterModule.forRoot() called twice. Lazy loaded modules should use LocalizeRouterModule.forChild() instead.");return"guarded"}function wi(t){"@babel/helpers - typeof";return wi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wi(t)}function Ng(t,e){if(wi(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(wi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lg(t){var e=Ng(t,"string");return wi(e)=="symbol"?e:e+""}function $g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lg(n.key),n)}}function Ae(t,e,r){return e&&$g(t.prototype,e),r&&$g(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pa(t){return Array.isArray(t)?t.slice(0):[t]}function Br(t){return Array.isArray(t)}function Bg(t){return t!=null}function Dc(t,e){var r=0,n=-1;for(var i of t){n=n+1;var o=e(i,n);if(o)r=r+1;else break}return r}function yr(t,e){var r=e.length;if(r!==0){var n=t.length;t.length=n+e.length;for(var i=0;i<r;++i)t[n+i]=e[i]}}function Fg(t){return t.filter(function(e,r,n){return n.indexOf(e)===r})}function jg(t){for(var e="",r=new Uint8Array(t),n=r.byteLength,i=0;i<n;i++)e+=String.fromCharCode(r[i]);return btoa(e)}function Ug(t,e){return U(this,null,function*(){var r=yield fetch("data:"+e+";base64,"+t),n=yield r.blob();return n})}function zg(t){var e=Object.prototype.toString.call(t);return e==="[object Uint8Array]"&&(t=new Blob([t])),typeof t=="string"?Promise.resolve(t):t.text()}function Vg(t){return U(this,null,function*(){if(typeof t=="string")return t;var e=Object.prototype.toString.call(t);e==="[object Uint8Array]"&&(t=new Blob([t]));var r=yield t.arrayBuffer();return jg(r)})}function qg(t){return t.size}function Ci(t){for(var e="",r=0;r<t.length;r++){var n=t[r];if(n==="-")return parseInt(e,10);e+=n}throw new Error("malformatted revision: "+t)}function po(t,e){var r=e?Ci(e._rev)+1:1;return r+"-"+t}function Fd(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&t[e]!==null&&(typeof t[e]=="object"||typeof t[e]=="function")&&!Object.isFrozen(t[e])&&Fd(t[e])}),t}function Hg(t){var e=t.split("."),r=e.length;return r===1?n=>n[t]:n=>{for(var i=n,o=0;o<r;++o){var s=e[o];if(i=i[s],typeof i>"u")return i}return i}}function kc(t){var e={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))if(typeof t[r]=="object"){var n=kc(t[r]);for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[r+"."+i]=n[i])}else e[r]=t[r];return e}function kt(t){return Object.assign({},t)}function Wg(t){return Object.keys(t)[0]}function mo(t,e=!1){if(!t)return t;if(!e&&Array.isArray(t))return t.sort((n,i)=>typeof n=="string"&&typeof i=="string"?n.localeCompare(i):typeof n=="object"?1:-1).map(n=>mo(n,e));if(typeof t=="object"&&!Array.isArray(t)){var r={};return Object.keys(t).sort((n,i)=>n.localeCompare(i)).forEach(n=>{r[n]=mo(t[n],e)}),r}return t}function Bd(t){if(!t||t===null||typeof t!="object")return t;if(Array.isArray(t)){for(var e=new Array(t.length),r=e.length;r--;)e[r]=Bd(t[r]);return e}var n={};for(var i in t)n[i]=Bd(t[i]);return n}var or=Bd;function He(t,e,r){return Object.defineProperty(t,e,{get:function(){return r}}),r}var Ac=1;function Nn(){return{lwt:Ac}}function sn(){return""}function Kg(t){return Object.assign({},t,{_meta:void 0,_deleted:void 0,_rev:void 0})}function Gg(t,e,r){if(e.length!==r.length)return!1;for(var n=0,i=e.length;n<i;){var o=e[n],s=r[n];if(n++,o._rev!==s._rev||o[t]!==s[t])return!1}return!0}var zk=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});var Vk=Object.freeze(["prototype","__proto__","constructor"]);var T0="[native code] }",qk=T0.length;var P0=Object.defineProperty,M0=(t,e,r)=>e in t?P0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,go=(t,e,r)=>(M0(t,typeof e!="symbol"?e+"":e,r),r),Ln=class t{constructor(e,r){go(this,"words"),go(this,"sigBytes"),e=this.words=e||[],this.sigBytes=r===void 0?e.length*4:r}toString(e){return(e||N0).stringify(this)}concat(e){if(this.clamp(),this.sigBytes%4)for(let r=0;r<e.sigBytes;r++){let n=e.words[r>>>2]>>>24-r%4*8&255;this.words[this.sigBytes+r>>>2]|=n<<24-(this.sigBytes+r)%4*8}else for(let r=0;r<e.sigBytes;r+=4)this.words[this.sigBytes+r>>>2]=e.words[r>>>2];return this.sigBytes+=e.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new t([...this.words])}},N0={stringify(t){let e=[];for(let r=0;r<t.sigBytes;r++){let n=t.words[r>>>2]>>>24-r%4*8&255;e.push((n>>>4).toString(16),(n&15).toString(16))}return e.join("")}};var L0={parse(t){let e=t.length,r=[];for(let n=0;n<e;n++)r[n>>>2]|=(t.charCodeAt(n)&255)<<24-n%4*8;return new Ln(r,e)}},$0={parse(t){return L0.parse(unescape(encodeURIComponent(t)))}},jd=class{constructor(){go(this,"_data",new Ln),go(this,"_nDataBytes",0),go(this,"_minBufferSize",0),go(this,"blockSize",512/32)}reset(){this._data=new Ln,this._nDataBytes=0}_append(e){typeof e=="string"&&(e=$0.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_doProcessBlock(e,r){}_process(e){let r,n=this._data.sigBytes/(this.blockSize*4);e?n=Math.ceil(n):n=Math.max((n|0)-this._minBufferSize,0);let i=n*this.blockSize,o=Math.min(i*4,this._data.sigBytes);if(i){for(let s=0;s<i;s+=this.blockSize)this._doProcessBlock(this._data.words,s);r=this._data.words.splice(0,i),this._data.sigBytes-=o}return new Ln(r,o)}},Ud=class extends jd{update(e){return this._append(e),this._process(),this}finalize(e){e&&this._append(e)}},B0=Object.defineProperty,F0=(t,e,r)=>e in t?B0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,j0=(t,e,r)=>(F0(t,typeof e!="symbol"?e+"":e,r),r),Qg=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],U0=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Si=[],zd=class extends Ud{constructor(){super(...arguments),j0(this,"_hash",new Ln([...Qg]))}reset(){super.reset(),this._hash=new Ln([...Qg])}_doProcessBlock(e,r){let n=this._hash.words,i=n[0],o=n[1],s=n[2],l=n[3],d=n[4],p=n[5],m=n[6],y=n[7];for(let S=0;S<64;S++){if(S<16)Si[S]=e[r+S]|0;else{let tt=Si[S-15],At=(tt<<25|tt>>>7)^(tt<<14|tt>>>18)^tt>>>3,st=Si[S-2],Pt=(st<<15|st>>>17)^(st<<13|st>>>19)^st>>>10;Si[S]=At+Si[S-7]+Pt+Si[S-16]}let D=d&p^~d&m,M=i&o^i&s^o&s,j=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),G=(d<<26|d>>>6)^(d<<21|d>>>11)^(d<<7|d>>>25),J=y+G+D+U0[S]+Si[S],rt=j+M;y=m,m=p,p=d,d=l+J|0,l=s,s=o,o=i,i=J+rt|0}n[0]=n[0]+i|0,n[1]=n[1]+o|0,n[2]=n[2]+s|0,n[3]=n[3]+l|0,n[4]=n[4]+d|0,n[5]=n[5]+p|0,n[6]=n[6]+m|0,n[7]=n[7]+y|0}finalize(e){super.finalize(e);let r=this._nDataBytes*8,n=this._data.sigBytes*8;return this._data.words[n>>>5]|=128<<24-n%32,this._data.words[(n+64>>>9<<4)+14]=Math.floor(r/4294967296),this._data.words[(n+64>>>9<<4)+15]=r,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}};function Yg(t){return new zd().finalize(t).toString()}function z0(t){return Promise.resolve(Yg(t))}function V0(t){return U(this,null,function*(){var e=new TextEncoder().encode(t),r=yield crypto.subtle.digest("SHA-256",e),n=Array.prototype.map.call(new Uint8Array(r),i=>("00"+i.toString(16)).slice(-2)).join("");return n})}var q0=typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof crypto.subtle.digest=="function",vo=q0?V0:z0;function Xg(){return new Promise(t=>setTimeout(t,0))}function Zg(t=0){return new Promise(e=>setTimeout(e,t))}var H0=Promise.resolve(!0),Fr=Promise.resolve(!1),Jg=Promise.resolve(null),$n=Promise.resolve();function yo(t=1e4){return typeof requestIdleCallback=="function"?new Promise(e=>{requestIdleCallback(()=>e(),{timeout:t})}):Zg(0)}var Vd=$n;function tv(t=void 0){return Vd=Vd.then(()=>yo(t)),Vd}function ev(t,e){return t.reduce((r,n)=>r.then(n),Promise.resolve(e))}var rv=/\./g;var nv="abcdefghijklmnopqrstuvwxyz";function Ri(t=10){for(var e="",r=0;r<t;r++)e+=nv.charAt(Math.floor(Math.random()*nv.length));return e}function Ic(t){t+="";var e=t.charAt(0).toUpperCase();return e+t.substr(1)}function br(t){for(;t.charAt(0)===".";)t=t.substr(1);for(;t.slice(-1)===".";)t=t.slice(0,-1);return t}function qd(t){return!!(t.includes("/")||t.includes("\\"))}function Bn(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var r,n;if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!Bn(t[n],e[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();var i=Object.keys(t);if(r=i.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[n]))return!1;for(n=r;n--!==0;){var o=i[n];if(!Bn(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}var Wd=t=>{var e=typeof t;return t!==null&&(e==="object"||e==="function")},Hd=new Set(["__proto__","prototype","constructor"]),W0=new Set("0123456789");function iv(t){var e=[],r="",n="start",i=!1;for(var o of t)switch(o){case"\\":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");i&&(r+=o),n="property",i=!i;break}case".":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="property";break}if(i){i=!1,r+=o;break}if(Hd.has(r))return[];e.push(r),r="",n="property";break}case"[":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="index";break}if(i){i=!1,r+=o;break}if(n==="property"){if(Hd.has(r))return[];e.push(r),r=""}n="index";break}case"]":{if(n==="index"){e.push(Number.parseInt(r,10)),r="",n="indexEnd";break}if(n==="indexEnd")throw new Error("Invalid character after an index")}default:{if(n==="index"&&!W0.has(o))throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");n==="start"&&(n="property"),i&&(i=!1,r+="\\"),r+=o}}switch(i&&(r+="\\"),n){case"property":{if(Hd.has(r))return[];e.push(r);break}case"index":throw new Error("Index was not closed");case"start":{e.push("");break}}return e}function ov(t,e){if(typeof e!="number"&&Array.isArray(t)){var r=Number.parseInt(e,10);return Number.isInteger(r)&&t[r]===t[e]}return!1}function K0(t,e){if(ov(t,e))throw new Error("Cannot use string index")}function Ne(t,e,r){if(Array.isArray(e)&&(e=e.join(".")),!e.includes(".")&&!e.includes("["))return t[e];if(!Wd(t)||typeof e!="string")return r===void 0?t:r;var n=iv(e);if(n.length===0)return r;for(var i=0;i<n.length;i++){var o=n[i];if(ov(t,o)?t=i===n.length-1?void 0:null:t=t[o],t==null){if(i!==n.length-1)return r;break}}return t===void 0?r:t}function Kd(t,e,r){if(Array.isArray(e)&&(e=e.join(".")),!Wd(t)||typeof e!="string")return t;for(var n=t,i=iv(e),o=0;o<i.length;o++){var s=i[o];K0(t,s),o===i.length-1?t[s]=r:Wd(t[s])||(t[s]=typeof i[o+1]=="number"?[]:{}),t=t[s]}return n}function Fn(t,e){var r=t.get(e);if(typeof r>"u")throw new Error("missing value from map "+e);return r}function We(t,e,r,n){var i=t.get(e);return typeof i>"u"?(i=r(),t.set(e,i)):n&&n(i),i}function Ot(t){var e=t.split("-"),r="RxDB";return e.forEach(n=>{r+=Ic(n)}),r+="Plugin",new Error(`You are using a function which must be overwritten by a plugin.
        You should either prevent the usage of this function or add the plugin via:
            import { `+r+" } from 'rxdb/plugins/"+t+`';
            addRxPlugin(`+r+`);
        `)}var Gd=0;function ie(){var t=Date.now();t=t+.01,t<=Gd&&(t=Gd+.01);var e=parseFloat(t.toFixed(2));return Gd=e,e}function Et(t,e){if(!t)throw e||(e=""),new Error("ensureNotFalsy() is falsy: "+e);return t}var Tc={bufferSize:1,refCount:!0};var Oi="15.39.0";var jn={},Pc="6da4936d1425ff3a5c44c02342c6daf791d266be3ae8479b8ec59e261df41b93";function Un(t,e){return Un=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Un(t,e)}function Qd(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Un(t,e)}function Mc(t){return Mc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mc(t)}function av(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function Yd(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Yd=function(){return!!t})()}function sv(t,e,r){if(Yd())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var i=new(t.bind.apply(t,n));return r&&Un(i,r.prototype),i}function Ma(t){var e=typeof Map=="function"?new Map:void 0;return Ma=function(n){if(n===null||!av(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return sv(n,arguments,Mc(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Un(i,n)},Ma(t)}var Tt={isDevMode(){return!1},deepFreezeWhenDevMode(t){return t},tunnelErrorMessage(t){return"RxDB Error-Code "+t+`.
        Error messages are not included in RxDB core to reduce build size.
        `}};function G0(t){var e="";return Object.keys(t).length===0||(e+=`Given parameters: {
`,e+=Object.keys(t).map(r=>{var n="[object Object]";try{r==="errors"?n=t[r].map(i=>JSON.stringify(i,Object.getOwnPropertyNames(i))):n=JSON.stringify(t[r],function(i,o){return o===void 0?null:o},2)}catch{}return r+":"+n}).join(`
`),e+="}"),e}function cv(t,e,r){return"RxError ("+e+`):
`+t+`
`+G0(r)}var Q0=function(t){function e(n,i,o={}){var s,l=cv(i,n,o);return s=t.call(this,l)||this,s.code=n,s.message=l,s.url=Xd(n),s.parameters=o,s.rxdb=!0,s}Qd(e,t);var r=e.prototype;return r.toString=function(){return this.message},Ae(e,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}])}(Ma(Error)),Y0=function(t){function e(n,i,o={}){var s,l=cv(i,n,o);return s=t.call(this,l)||this,s.code=n,s.message=l,s.url=Xd(n),s.parameters=o,s.rxdb=!0,s}Qd(e,t);var r=e.prototype;return r.toString=function(){return this.message},Ae(e,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}])}(Ma(TypeError));function Xd(t){return"https://rxdb.info/errors.html?console=errors#"+t}function lv(t){return`
 You can find out more about this error here: `+Xd(t)+" "}function L(t,e){return new Q0(t,Tt.tunnelErrorMessage(t)+lv(t),e)}function ue(t,e){return new Y0(t,Tt.tunnelErrorMessage(t)+lv(t),e)}function Nc(t){return t&&t.status===409?t:!1}var X0={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};function uv(t){return L("COL20",{name:X0[t.status],document:t.documentId,writeError:t})}var bo={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],createRxState:[],postDestroyRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preStorageWrite:[],preMigrateDocument:[],postMigrateDocument:[],preDestroyRxDatabase:[],postRemoveRxDatabase:[],postCleanup:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function te(t,e){bo[t].length>0&&bo[t].forEach(r=>r(e))}function zn(t,e){return Promise.all(bo[t].map(r=>r(e)))}function Le(t,e){var r=e;r=r.replace(rv,".properties."),r="properties."+r,r=br(r);var n=Ne(t,r);return n}function Lc(t,e,r){if(typeof e.primaryKey=="string")return r;var n=Na(e,r),i=r[t];if(i&&i!==n)throw L("DOC19",{args:{documentData:r,existingPrimary:i,newPrimary:n},schema:e});return r[t]=n,r}function ve(t){return typeof t=="string"?t:t.key}function Na(t,e){if(typeof t.primaryKey=="string")return e[t.primaryKey];var r=t.primaryKey;return r.fields.map(n=>{var i=Ne(e,n);if(typeof i>"u")throw L("DOC18",{args:{field:n,documentData:e}});return i}).join(r.separator)}function dv(t){var e=mo(t,!0);return e}function Z0(t){return["_deleted",t]}function $c(t){t=kt(t);var e=ve(t.primaryKey);t.properties=kt(t.properties),t.additionalProperties=!1,Object.prototype.hasOwnProperty.call(t,"keyCompression")||(t.keyCompression=!1),t.indexes=t.indexes?t.indexes.slice(0):[],t.required=t.required?t.required.slice(0):[],t.encrypted=t.encrypted?t.encrypted.slice(0):[],t.properties._rev={type:"string",minLength:1},t.properties._attachments={type:"object"},t.properties._deleted={type:"boolean"},t.properties._meta=J0,t.required=t.required?t.required.slice(0):[],t.required.push("_deleted"),t.required.push("_rev"),t.required.push("_meta"),t.required.push("_attachments");var r=Zd(t);yr(t.required,r),t.required=t.required.filter(o=>!o.includes(".")).filter((o,s,l)=>l.indexOf(o)===s),t.version=t.version||0;var n=t.indexes.map(o=>{var s=Br(o)?o.slice(0):[o];return s.includes(e)||s.push(e),s[0]!=="_deleted"&&s.unshift("_deleted"),s});n.length===0&&n.push(Z0(e)),n.push(["_meta.lwt",e]),t.internalIndexes&&t.internalIndexes.map(o=>{n.push(o)});var i=new Set;return n.filter(o=>{var s=o.join(",");return i.has(s)?!1:(i.add(s),!0)}),t.indexes=n,t}var J0={type:"object",properties:{lwt:{type:"number",minimum:Ac,maximum:1e15,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function Zd(t){var e=Object.keys(t.properties).filter(n=>t.properties[n].final),r=ve(t.primaryKey);return e.push(r),typeof t.primaryKey!="string"&&t.primaryKey.fields.forEach(n=>e.push(n)),e}function fv(t,e){for(var r=Object.keys(t.defaultValues),n=0;n<r.length;++n){var i=r[n];(!Object.prototype.hasOwnProperty.call(e,i)||typeof e[i]>"u")&&(e[i]=t.defaultValues[i])}return e}var Jd=function(){function t(r,n){this.jsonSchema=r,this.hashFunction=n,this.indexes=tC(this.jsonSchema),this.primaryPath=ve(this.jsonSchema.primaryKey),this.finalFields=Zd(this.jsonSchema)}var e=t.prototype;return e.validateChange=function(n,i){this.finalFields.forEach(o=>{if(!Bn(n[o],i[o]))throw L("DOC9",{dataBefore:n,dataAfter:i,fieldName:o,schema:this.jsonSchema})})},e.getDocumentPrototype=function(){var n={},i=Le(this.jsonSchema,"");return Object.keys(i).forEach(o=>{var s=o;n.__defineGetter__(o,function(){if(!(!this.get||typeof this.get!="function")){var l=this.get(s);return l}}),Object.defineProperty(n,o+"$",{get:function(){return this.get$(s)},enumerable:!1,configurable:!1}),Object.defineProperty(n,o+"$$",{get:function(){return this.get$$(s)},enumerable:!1,configurable:!1}),Object.defineProperty(n,o+"_",{get:function(){return this.populate(s)},enumerable:!1,configurable:!1})}),He(this,"getDocumentPrototype",()=>n),n},e.getPrimaryOfDocumentData=function(n){return Na(this.jsonSchema,n)},Ae(t,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var r={};return Object.entries(this.jsonSchema.properties).filter(([,n])=>Object.prototype.hasOwnProperty.call(n,"default")).forEach(([n,i])=>r[n]=i.default),He(this,"defaultValues",r)}},{key:"hash",get:function(){return He(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}])}();function tC(t){return(t.indexes||[]).map(e=>Br(e)?e:[e])}function hv(t){var e=t.version?t.version:0,r=0;return new Array(e).fill(0).map(()=>r++)}function pv(t,e,r=!0){r&&te("preCreateRxSchema",t);var n=$c(t);n=dv(n),Tt.deepFreezeWhenDevMode(n);var i=new Jd(n,e);return te("createRxSchema",i),i}function mv(t){return t.documentData?t.documentData:t.previousDocumentData}function gv(t){switch(t.operation){case"INSERT":return{operation:t.operation,id:t.documentId,doc:t.documentData,previous:null};case"UPDATE":return{operation:t.operation,id:t.documentId,doc:Tt.deepFreezeWhenDevMode(t.documentData),previous:t.previousDocumentData?t.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:t.operation,id:t.documentId,doc:null,previous:t.previousDocumentData}}}function Bc(t){return t[t.length-1]}function eC(t){let e=typeof t;return t!==null&&(e==="object"||e==="function")}function tf(t,e,r){if(Array.isArray(e)&&(e=e.join(".")),!eC(t)||typeof e!="string")return r===void 0?t:r;let n=e.split(".");if(n.length===0)return r;for(let i=0;i<n.length;i++){let o=n[i];if(rC(t,o)?t=i===n.length-1?void 0:null:t=t[o],t==null){if(i!==n.length-1)return r;break}}return t===void 0?r:t}function rC(t,e){if(typeof e!="number"&&Array.isArray(t)){let r=Number.parseInt(e,10);return Number.isInteger(r)&&t[r]===t[e]}return!1}var ef=t=>!!t.queryParams.limit,vv=t=>t.queryParams.limit===1,yv=t=>!!(t.queryParams.skip&&t.queryParams.skip>0),bv=t=>t.changeEvent.operation==="DELETE",_v=t=>t.changeEvent.operation==="INSERT",xv=t=>t.changeEvent.operation==="UPDATE",wv=t=>ef(t)&&t.previousResults.length>=t.queryParams.limit,Cv=t=>{let e=t.queryParams.sortFields,r=t.changeEvent.previous,n=t.changeEvent.doc;if(!n)return!1;if(!r)return!0;for(let i=0;i<e.length;i++){let o=e[i],s=tf(r,o),l=tf(n,o);if(s!==l)return!0}return!1},Sv=t=>{let e=t.changeEvent.id;if(t.keyDocumentMap)return t.keyDocumentMap.has(e);{let r=t.queryParams.primaryKey,n=t.previousResults;for(let i=0;i<n.length;i++)if(n[i][r]===e)return!0;return!1}},Rv=t=>{let e=t.previousResults[0];return!!(e&&e[t.queryParams.primaryKey]===t.changeEvent.id)},Ov=t=>{let e=Bc(t.previousResults);return!!(e&&e[t.queryParams.primaryKey]===t.changeEvent.id)},Ev=t=>{let e=t.changeEvent.previous;if(!e)return!1;let r=t.previousResults[0];return r?r[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,r)<0:!1},Dv=t=>{let e=t.changeEvent.previous;if(!e)return!1;let r=Bc(t.previousResults);return r?r[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,r)>0:!1},kv=t=>{let e=t.changeEvent.doc;if(!e)return!1;let r=t.previousResults[0];return r?r[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,r)<0:!1},Av=t=>{let e=t.changeEvent.doc;if(!e)return!1;let r=Bc(t.previousResults);return r?r[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,r)>0:!1},Iv=t=>{let e=t.changeEvent.previous;return e?t.queryParams.queryMatcher(e):!1},Tv=t=>{let e=t.changeEvent.doc;return e?t.queryParams.queryMatcher(e):!1},Pv=t=>t.previousResults.length===0;var Mv={0:_v,1:xv,2:bv,3:ef,4:vv,5:yv,6:Pv,7:wv,8:Rv,9:Ov,10:Cv,11:Sv,12:Ev,13:Dv,14:kv,15:Av,16:Iv,17:Tv};function Nv(t,e,r,n){var i=t.length,o=i-1,s=0;if(i===0)return t.push(e),0;for(var l;n<=o;)s=n+(o-n>>1),l=t[s],r(l,e)<=0?n=s+1:o=s-1;return r(l,e)<=0&&s++,t.splice(s,0,e),s}var Lv=t=>{},Fc=t=>{t.previousResults.unshift(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},jc=t=>{t.previousResults.push(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},Uc=t=>{let e=t.previousResults.shift();t.keyDocumentMap&&e&&t.keyDocumentMap.delete(e[t.queryParams.primaryKey])},zc=t=>{let e=t.previousResults.pop();t.keyDocumentMap&&e&&t.keyDocumentMap.delete(e[t.queryParams.primaryKey])},$v=t=>{Uc(t),jc(t)},Bv=t=>{zc(t),Fc(t)},Fv=t=>{Uc(t),Fc(t)},jv=t=>{zc(t),jc(t)},rf=t=>{t.keyDocumentMap&&t.keyDocumentMap.delete(t.changeEvent.id);let e=t.queryParams.primaryKey,r=t.previousResults;for(let n=0;n<r.length;n++)if(r[n][e]===t.changeEvent.id){r.splice(n,1);break}},Uv=t=>{let e=t.changeEvent.doc,r=t.queryParams.primaryKey,n=t.previousResults;for(let i=0;i<n.length;i++)if(n[i][r]===t.changeEvent.id){n[i]=e,t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,e);break}},zv=t=>{let e={_id:"wrongHuman"+new Date().getTime()};t.previousResults.length=0,t.previousResults.push(e),t.keyDocumentMap&&(t.keyDocumentMap.clear(),t.keyDocumentMap.set(e._id,e))},nf=t=>{let e=t.changeEvent.id,r=t.changeEvent.doc;if(t.keyDocumentMap){if(t.keyDocumentMap.has(e))return;t.keyDocumentMap.set(e,r)}else if(t.previousResults.find(i=>i[t.queryParams.primaryKey]===e))return;Nv(t.previousResults,r,t.queryParams.sortComparator,0)},Vv=t=>{rf(t),nf(t)},qv=t=>{throw new Error("Action runFullQueryAgain must be implemented by yourself")},Hv=t=>{throw new Error("Action unknownAction should never be called")};var Wv=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],Kv={doNothing:Lv,insertFirst:Fc,insertLast:jc,removeFirstItem:Uc,removeLastItem:zc,removeFirstInsertLast:$v,removeLastInsertFirst:Bv,removeFirstInsertFirst:Fv,removeLastInsertLast:jv,removeExisting:rf,replaceExisting:Uv,alwaysWrong:zv,insertAtSortPosition:nf,removeExistingAndInsertAtSortPosition:Vv,runFullQueryAgain:qv,unknownAction:Hv};function Vc(t){return t.charCodeAt(0)-40}function Gv(t){return t?"1":"0"}function nC(t=6){let e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length;for(let i=0;i<t;i++)e+=r.charAt(Math.floor(Math.random()*n));return e}var rI=nC(4);function of(t,e){let r=[];for(let n=0,i=t.length;n<i;n+=e)r.push(t.substring(n,n+e));return r}function Qv(t){let e=new Map,n=2+parseInt(t.charAt(0)+t.charAt(1),10)*2,i=t.substring(2,n),o=of(i,2);for(let j=0;j<o.length;j++){let G=o[j],J=G.charAt(0),rt=Vc(G.charAt(1));e.set(J,rt)}let s=t.substring(n,t.length-3),l=of(s,4);for(let j=0;j<l.length;j++){let G=l[j],J=G.charAt(0),rt=G.charAt(1),tt=G.charAt(2),At=Vc(G.charAt(3));if(!e.has(rt))throw new Error("missing node with id "+rt);if(!e.has(tt))throw new Error("missing node with id "+tt);let st=e.get(rt),Pt=e.get(tt),Dt={l:At,0:st,1:Pt};e.set(J,Dt)}let d=t.slice(-3),p=d.charAt(0),m=d.charAt(1),y=Vc(d.charAt(2)),S=e.get(p),D=e.get(m);return{l:y,0:S,1:D}}function Yv(t,e,r){let n=t,i=t.l;for(;;){let o=e[i](r),s=Gv(o);if(n=n[s],typeof n=="number"||typeof n=="string")return n;i=n.l}}var iC="14a1b,c+d2e5f0g/h.i4j*k-l)m(n6oeh6pnm6qen6ril6snh6tin6ubo9vce9wmh9xns9yne9zmi9{cm9|ad9}cp9~aq9\x7Fae9\xA1bf9\xA2bq9\xA3cg9\xA4ck9\xA5cn9\xA6nd9\xA7np9\xA8nq9\xA9nf9\xAAng9\xABnm9\xACnk9\xADmr9\xAEms9\xAFmt9\xB0mj9\xB1mk9\xB2ml9\xB3mn9\xB4mc8\xB5\xB3{8\xB6\xAF}8\xB7\xB0\xA48\xB8\xB3\xA78\xB9mn8\xBA\xB3\xAB8\xBB\xB3m8\xBCm\xB44\xBDz\xB24\xBE\xB3w4\xBFz\xB54\xC0\xAF\xB64\xC1\xB0\xB74\xC2\xB3\xBA4\xC3\xB3\xB84\xC4m\xB94\xC5v\xA47\xC6yn7\xC7\xC0\xC17\xC8~\x7F7\xC9\xA5\xA47\xCA\xC3\xC47\xCB\xA8n7\xCC\xBA\xB97\xCD\xAD\xB07\xCE\xAEm7\xCF\xAF\xB07\xD0\xB1m7\xD1\xB3m7\xD2\xBCm5\xD3\xC4m5\xD4\xB9m5\xD5\xBD\xB05\xD6\xBEm5\xD7\xBF\xB05\xD8\xC7\xCF5\xD9\xC2m5\xDA\xCA\xD15\xDB\xB1m5\xDC\xBAm5\xDD\xCC\xD15\xDE\xD5\xCD2\xDF|\x7F2\xE0\xA1u2\xE1\xA3\xC52\xE2\xD6\xCE2\xE3\xA6\xC62\xE4\xA9x2\xE5\xAA\xC62\xE6\xD7\xD82\xE7|\xC82\xE8\xA1\xA22\xE9\xA3\xC92\xEA\xA4\xA52\xEB\xD9\xDA2\xEC\xA6\xCB2\xED\xA9n2\xEE\xAAn2\xEF\xDB\xD02\xF0\xDC\xDD2\xF1\xACn2\xF2\xD2\xD3/\xF3an/\xF4bn/\xF5cn/\xF6\xDE\xE2/\xF7\xDF\xE3/\xF8\xE0\xE4/\xF9\xE1\xE5/\xFA\xE6\xEB/\xFB\xE7\xEC/\xFC\xE8\xED/\xFD\xE9\xEE/\xFE\xCD\xCE/\xFF\xCF\xD1/\u0100\xF2\xD4,\u0101cn,\u0102\xF6\xEF,\u0103\xA4\xF1,\u0104\xFA\xF0,\u0105\xEA\xF1,\u0106\xFE\xD0,\u0107\xFF\xD1,\u0108ac0\u0109bc0\u010A\xF3\xF50\u010B\xF4\u01010\u010C\xDF\xE10\u010D\xE0\xA40\u010E\xE7\xE90\u010F\xE8\xEA0\u0110\xF7\xF90\u0111\xF8\u01030\u0112\xFB\xFD0\u0113\xFC\u01050\u0114m\xD2-\u0115m\u0100-\u0116\xDE\xE6-\u0117\u010C\u010E-\u0118\u010D\u010F-\u0119\u0102\u0104-\u011A\u0110\u0112-\u011B\u0111\u0113-\u011C\xB2\xBB-\u011D\xCD\xCF-\u011E\u0106\u0107-\u011F\xB2\xB3-\u0120\u0114\u01083\u0121\u0115\u010A3\u0122\u0116\u01173\u0123\u0119\u011A3\u0124\u0122\u011D(\u0125\u011C\u011F(\u0126\u0123\u011E(\u0127\u0120\u0121+\u0128\u0109\u010B+\u0129\u0124\u0126+\u012A\u0118\u011B+\u012B\u0127\u01281\u012C\u0129\u012A1\u012D\u012C\u012B*\u012E\u0125m*\u012D\u012E.",af;function oC(){return af||(af=Qv(iC)),af}var Xv=t=>Yv(oC(),Mv,t);function Zv(t){let e=Xv(t);return Wv[e]}function Jv(t,e,r,n,i){let o=Kv[t];return o({queryParams:e,changeEvent:r,previousResults:n,keyDocumentMap:i}),n}var Ei="\uFFFF",Di=Number.MIN_SAFE_INTEGER;function ty(t,e){var r=e.selector,n=t.indexes?t.indexes.slice(0):[];e.index&&(n=[e.index]);var i=!!e.sort.find(m=>Object.values(m)[0]==="desc"),o=new Set;Object.keys(r).forEach(m=>{var y=Le(t,m);y&&y.type==="boolean"&&Object.prototype.hasOwnProperty.call(r[m],"$eq")&&o.add(m)});var s=e.sort.map(m=>Object.keys(m)[0]),l=s.filter(m=>!o.has(m)).join(","),d=-1,p;if(n.forEach(m=>{var y=!0,S=!0,D=m.map(rt=>{var tt=r[rt],At=tt?Object.keys(tt):[],st={};if(!tt||!At.length){var Pt=S?Di:Ei;st={startKey:Pt,endKey:y?Ei:Di,inclusiveStart:!0,inclusiveEnd:!0}}else At.forEach(Dt=>{if(qc.has(Dt)){var Ft=tt[Dt],he=lC(Dt,Ft);st=Object.assign(st,he)}});return typeof st.startKey>"u"&&(st.startKey=Di),typeof st.endKey>"u"&&(st.endKey=Ei),typeof st.inclusiveStart>"u"&&(st.inclusiveStart=!0),typeof st.inclusiveEnd>"u"&&(st.inclusiveEnd=!0),S&&!st.inclusiveStart&&(S=!1),y&&!st.inclusiveEnd&&(y=!1),st}),M=D.map(rt=>rt.startKey),j=D.map(rt=>rt.endKey),G={index:m,startKeys:M,endKeys:j,inclusiveEnd:y,inclusiveStart:S,sortSatisfiedByIndex:!i&&l===m.filter(rt=>!o.has(rt)).join(","),selectorSatisfiedByIndex:cC(m,e.selector,M,j)},J=uC(t,e,G);(J>=d||e.index)&&(d=J,p=G)}),!p)throw L("SNH",{query:e});return p}var qc=new Set(["$eq","$gt","$gte","$lt","$lte"]),aC=new Set(["$eq","$gt","$gte"]),sC=new Set(["$eq","$lt","$lte"]);function cC(t,e,r,n){var i=Object.entries(e),o=i.find(([Dt,Ft])=>{if(!t.includes(Dt))return!0;var he=Object.entries(Ft).find(([Be,cr])=>!qc.has(Be));return he});if(o||e.$and||e.$or)return!1;var s=[],l=new Set;for(var[d,p]of Object.entries(e)){if(!t.includes(d))return!1;var m=Object.keys(p).filter(Dt=>aC.has(Dt));if(m.length>1)return!1;var y=m[0];if(y&&l.add(d),y!=="$eq"){if(s.length>0)return!1;s.push(y)}}var S=[],D=new Set;for(var[M,j]of Object.entries(e)){if(!t.includes(M))return!1;var G=Object.keys(j).filter(Dt=>sC.has(Dt));if(G.length>1)return!1;var J=G[0];if(J&&D.add(M),J!=="$eq"){if(S.length>0)return!1;S.push(J)}}var rt=0;for(var tt of t){for(var At of[l,D]){if(!At.has(tt)&&At.size>0)return!1;At.delete(tt)}var st=r[rt],Pt=n[rt];if(st!==Pt&&l.size>0&&D.size>0)return!1;rt++}return!0}function lC(t,e){switch(t){case"$eq":return{startKey:e,endKey:e,inclusiveEnd:!0,inclusiveStart:!0};case"$lte":return{endKey:e,inclusiveEnd:!0};case"$gte":return{startKey:e,inclusiveStart:!0};case"$lt":return{endKey:e,inclusiveEnd:!1};case"$gt":return{startKey:e,inclusiveStart:!1};default:throw new Error("SNH")}}function uC(t,e,r){var n=0,i=m=>{m>0&&(n=n+m)},o=10,s=Dc(r.startKeys,m=>m!==Di&&m!==Ei);i(s*o);var l=Dc(r.startKeys,m=>m!==Ei&&m!==Di);i(l*o);var d=Dc(r.startKeys,(m,y)=>m===r.endKeys[y]);i(d*o*1.5);var p=r.sortSatisfiedByIndex?5:0;return i(p),n}var de=class extends Error{},Gc=2147483647,Qc=-2147483648,df=Number.MAX_SAFE_INTEGER,ff=Number.MIN_SAFE_INTEGER,cn=Symbol("missing"),ny=Object.freeze(new Error("mingo: cycle detected while processing object/array")),dC="[object Object]",fC=/^\[object ([a-zA-Z0-9]+)\]$/,La=t=>{let e=vC(t),r=0,n=e.length;for(;n;)r=(r<<5)-r^e.charCodeAt(--n);return r>>>0},iy=new Set(["null","undefined","boolean","number","string","date","regexp"]),hC={null:0,undefined:0,number:1,string:2,object:3,array:4,boolean:5,date:6,regexp:7,function:8},Lt=(t,e)=>{t===cn&&(t=void 0),e===cn&&(e=void 0);let[r,n]=[t,e].map(i=>hC[Vn(i).toLowerCase()]);return r!==n?r-n:r===1||r===2||r===6?t<e?-1:t>e?1:0:ye(t,e)?0:t<e?-1:t>e?1:0};function z(t,e){if(!t)throw new de(e)}var Vn=t=>fC.exec(Object.prototype.toString.call(t))[1],$a=t=>typeof t=="boolean",Ct=t=>typeof t=="string";var ht=t=>!isNaN(t)&&typeof t=="number";var ot=Array.isArray,ft=t=>{if(!t)return!1;let e=Object.getPrototypeOf(t);return(e===Object.prototype||e===null)&&dC===Object.prototype.toString.call(t)},Ba=t=>t===Object(t),qn=t=>t instanceof Date,wo=t=>t instanceof RegExp,Fa=t=>typeof t=="function",X=t=>t==null,jr=(t,e)=>t.includes(e),Yc=(t,e)=>!jr(t,e),Ie=(t,e=!0)=>!!t||e&&t==="",Ke=t=>X(t)||Ct(t)&&!t||t instanceof Array&&t.length===0||ft(t)&&Object.keys(t).length===0,ey=t=>t===cn,Ur=t=>t instanceof Array?t:[t],Vt=(t,e)=>!!t&&Object.prototype.hasOwnProperty.call(t,e),hf=t=>typeof ArrayBuffer<"u"&&ArrayBuffer.isView(t),pC=[qn,wo,hf],cf=(t,e)=>{if(X(t))return t;if(e.has(t))throw ny;let r=t.constructor;if(pC.some(n=>n(t)))return new r(t);try{if(e.add(t),ot(t))return t.map(n=>cf(n,e));if(ft(t)){let n={};for(let i in t)n[i]=cf(t[i],e);return n}}finally{e.delete(t)}return t},Co=t=>cf(t,new Set),mC=(t,e)=>ft(t)&&ft(e)||ot(t)&&ot(e);function Wc(t,e,r){if(r=r||{flatten:!1},ey(t)||X(t))return e;if(ey(e)||X(e))return t;if(!mC(t,e)){if(r.skipValidation)return e||t;throw Error("mismatched types. must both be array or object")}if(r.skipValidation=!0,ot(t)){let n=t,i=e;if(r.flatten){let o=0,s=0;for(;o<n.length&&s<i.length;)n[o]=Wc(n[o++],i[s++],r);for(;s<i.length;)n.push(e[s++])}else ar(n,i)}else for(let n in e)t[n]=Wc(t[n],e[n],r);return t}function lf(t,e=La){let r=new Map;return t.forEach((n,i)=>{let o=Xc(n,e);r.has(o)?r.get(o).some(s=>ye(t[s],n))||r.get(o).push(i):r.set(o,[i])}),r}function ln(t,e=La){if(t.some(l=>l.length==0))return[];if(t.length===1)return Array.from(t);let r=oy(t.map((l,d)=>[d,l.length]),l=>l[1]),n=t[r[0][0]],i=lf(n,e),o=new Map,s=new Array;return i.forEach((l,d)=>{let p=l.map(D=>n[D]),m=p.map(D=>0),y=p.map(D=>[r[0][0],0]),S=!1;for(let D=1;D<t.length;D++){let[M,j]=r[D],G=t[M];if(o.has(D)||o.set(D,lf(G)),o.get(D).has(d)){let J=o.get(D).get(d).map(rt=>G[rt]);S=p.map((rt,tt)=>J.some((At,st)=>{let Pt=m[tt];return ye(rt,At)&&(m[tt]++,M<y[tt][0]&&(y[tt]=[M,o.get(D).get(d)[st]])),Pt<m[tt]})).some(Boolean)}if(!S)return}S&&ar(s,m.map((D,M)=>D===t.length-1?[p[M],y[M]]:cn).filter(D=>D!==cn))}),s.sort((l,d)=>{let[p,[m,y]]=l,[S,[D,M]]=d,j=Lt(m,D);return j!==0?j:Lt(y,M)}).map(l=>l[0])}function pf(t,e=0){let r=new Array;function n(i,o){for(let s=0,l=i.length;s<l;s++)ot(i[s])&&(o>0||o<0)?n(i[s],Math.max(-1,o-1)):r.push(i[s])}return n(t,e),r}var gC=t=>{let[e,r]=[Object.getPrototypeOf(t),Object.getOwnPropertyNames(t)],n=e;for(;!r.length&&e!==Object.prototype&&e!==Array.prototype;)n=e,r=Object.getOwnPropertyNames(e),e=Object.getPrototypeOf(e);let i={};return r.forEach(o=>i[o]=t[o]),[i,n]};function ye(t,e){if(t===e||Object.is(t,e))return!0;let r=!!t&&t.constructor||t;if(t===null||e===null||t===void 0||e===void 0||r!==e.constructor||r===Function)return!1;if(r===Array||r===Object){let o=Object.keys(t),s=Object.keys(e);if(o.length!==s.length||new Set([...o,...s]).size!=o.length)return!1;for(let l of o)if(!ye(t[l],e[l]))return!1;return!0}let n=Object.getPrototypeOf(t);return(hf(t)||n!==Object.prototype&&n!==Array.prototype&&Object.prototype.hasOwnProperty.call(n,"toString"))&&t.toString()===e.toString()}function ja(t,e=La){let r=t.map(n=>cn);return lf(t,e).forEach((n,i)=>{n.forEach(o=>r[o]=t[o])}),r.filter(n=>n!==cn)}var Hc=(t,e)=>{if(t===null)return"null";if(t===void 0)return"undefined";let r=t.constructor;switch(r){case RegExp:case Number:case Boolean:case Function:case Symbol:return t.toString();case String:return JSON.stringify(t);case Date:return t.toISOString()}if(hf(t))return r.name+"["+t.toString()+"]";if(e.has(t))throw ny;try{if(e.add(t),ot(t))return"["+t.map(s=>Hc(s,e)).join(",")+"]";if(r===Object)return"{"+Object.keys(t).sort().map(s=>s+":"+Hc(t[s],e)).join(",")+"}";let n=Object.getPrototypeOf(t);if(n!==Object.prototype&&n!==Array.prototype&&Object.prototype.hasOwnProperty.call(n,"toString"))return r.name+"("+JSON.stringify(t.toString())+")";let[i,o]=gC(t);return r.name+Hc(i,e)}finally{e.delete(t)}},vC=t=>Hc(t,new Set);function Xc(t,e){return e=e||La,X(t)?null:e(t).toString()}function oy(t,e,r=Lt){if(Ke(t))return t;let n=new Array,i=new Array;for(let o=0;o<t.length;o++){let s=t[o],l=e(s,o);X(l)?i.push(s):n.push([l,s])}return n.sort((o,s)=>r(o[0],s[0])),ar(i,n.map(o=>o[1]))}function Zc(t,e,r=La){if(t.length<1)return new Map;let n=new Map,i=new Map;for(let o=0;o<t.length;o++){let s=t[o],l=e(s,o),d=Xc(l,r);if(d===null)i.has(null)?i.get(null).push(s):i.set(null,[s]);else{let p=n.has(d)?n.get(d).find(m=>ye(m,l)):null;X(p)?(i.set(l,[s]),n.has(d)?n.get(d).push(l):n.set(d,[l])):i.get(p).push(s)}}return i}var sf=5e4;function ar(t,...e){return t instanceof Array?e.reduce((r,n)=>{let i=Math.ceil(n.length/sf),o=0;for(;i-- >0;)Array.prototype.push.apply(r,n.slice(o,o+sf)),o+=sf;return r},t):e.filter(Ba).reduce((r,n)=>(Object.assign(r,n),r),t)}function uf(t,e){return Ba(t)?t[e]:void 0}function yC(t,e){if(e<1)return t;for(;e--&&t.length===1;)t=t[0];return t}function Te(t,e,r){let n=0;function i(s,l){let d=s;for(let p=0;p<l.length;p++){let m=l[p];if(/^\d+$/.exec(m)===null&&d instanceof Array){if(p===0&&n>0)break;n+=1;let S=l.slice(p);d=d.reduce((D,M)=>{let j=i(M,S);return j!==void 0&&D.push(j),D},[]);break}else d=uf(d,m);if(d===void 0)break}return d}let o=iy.has(Vn(t).toLowerCase())?t:i(t,e.split("."));return o instanceof Array&&r?.unwrapArray?yC(o,n):o}function _o(t,e,r){let n=e.split("."),i=n[0],o=n.slice(1).join("."),s=/^\d+$/.exec(i)!==null,l=n.length>1,d,p;if(t instanceof Array)if(s)d=uf(t,Number(i)),l&&(d=_o(d,o,r)),d=[d];else{d=[];for(let m of t)p=_o(m,e,r),r?.preserveMissing?(p===void 0&&(p=cn),d.push(p)):p!==void 0&&d.push(p)}else{if(p=uf(t,i),l&&(p=_o(p,o,r)),p===void 0)return;d=r?.preserveKeys?F({},t):{},d[i]=p}return d}function Kc(t){if(t instanceof Array)for(let e=t.length-1;e>=0;e--)t[e]===cn?t.splice(e,1):Kc(t[e]);else if(ft(t))for(let e in t)Vt(t,e)&&Kc(t[e])}var ry=/^\d+$/;function xo(t,e,r,n){let i=e.split("."),o=i[0],s=i.slice(1).join(".");if(i.length===1)(ft(t)||ot(t)&&ry.test(o))&&r(t,o);else{n?.buildGraph&&X(t[o])&&(t[o]={});let l=t[o];if(!l)return;let d=!!(i.length>1&&ry.test(i[1]));l instanceof Array&&n?.descendArray&&!d?l.forEach(p=>xo(p,s,r,n)):xo(l,s,r,n)}}function Jc(t,e,r){xo(t,e,(n,i)=>{n[i]=Fa(r)?r(n[i]):r},{buildGraph:!0})}function Ua(t,e,r){xo(t,e,(n,i)=>{if(n instanceof Array){if(/^\d+$/.test(i))n.splice(parseInt(i),1);else if(r&&r.descendArray)for(let o of n)ft(o)&&delete o[i]}else ft(n)&&delete n[i]},r)}var bC=/^\$[a-zA-Z0-9_]+$/;function Ge(t){return bC.test(t)}function tl(t){if(iy.has(Vn(t).toLowerCase()))return wo(t)?{$regex:t}:{$eq:t};if(Ba(t)){if(!Object.keys(t).some(Ge))return{$eq:t};if(Vt(t,"$regex")){let r=F({},t);return r.$regex=new RegExp(t.$regex,t.$options),delete r.$options,r}}return t}var Ai=(t=>(t.CLONE_ALL="CLONE_ALL",t.CLONE_INPUT="CLONE_INPUT",t.CLONE_OUTPUT="CLONE_OUTPUT",t.CLONE_OFF="CLONE_OFF",t))(Ai||{}),Ht=class t{constructor(e,r,n,i=Date.now()){this._opts=e,this._root=r,this._local=n,this.timestamp=i,this.update(r,n)}static init(e,r,n){return e instanceof t?new t(e._opts,X(e.root)?r:e.root,Object.assign({},e.local,n)):new t(e,r,n)}update(e,r){return this._root=e,this._local=r&&Object.assign({},r,{variables:Object.assign({},this._local?.variables,r?.variables)}),this}getOptions(){return Object.freeze(gt(F({},this._opts),{context:So.from(this._opts.context)}))}get root(){return this._root}get local(){return this._local}get idKey(){return this._opts.idKey}get collation(){return this._opts?.collation}get processingMode(){return this._opts?.processingMode||"CLONE_OFF"}get useStrictMode(){return this._opts?.useStrictMode}get scriptEnabled(){return this._opts?.scriptEnabled}get useGlobalContext(){return this._opts?.useGlobalContext}get hashFunction(){return this._opts?.hashFunction}get collectionResolver(){return this._opts?.collectionResolver}get jsonSchemaValidator(){return this._opts?.jsonSchemaValidator}get variables(){return this._opts?.variables}get context(){return this._opts?.context}};function un(t){return t instanceof Ht?t.getOptions():Object.freeze(gt(F({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,useGlobalContext:!0,processingMode:"CLONE_OFF"},t),{context:t?.context?So.from(t?.context):So.init({})}))}var xr=(t=>(t.ACCUMULATOR="accumulator",t.EXPRESSION="expression",t.PIPELINE="pipeline",t.PROJECTION="projection",t.QUERY="query",t.WINDOW="window",t))(xr||{}),So=class t{constructor(e){this.operators={accumulator:{},expression:{},pipeline:{},projection:{},query:{},window:{}};for(let[r,n]of Object.entries(e))this.addOperators(r,n)}static init(e={}){return new t(e)}static from(e){return new t(e.operators)}addOperators(e,r){for(let[n,i]of Object.entries(r))this.getOperator(e,n)||(this.operators[e][n]=i);return this}addAccumulatorOps(e){return this.addOperators("accumulator",e)}addExpressionOps(e){return this.addOperators("expression",e)}addQueryOps(e){return this.addOperators("query",e)}addPipelineOps(e){return this.addOperators("pipeline",e)}addProjectionOps(e){return this.addOperators("projection",e)}addWindowOps(e){return this.addOperators("window",e)}getOperator(e,r){return e in this.operators&&this.operators[e][r]||null}},ki=So.init();function vf(t,e){for(let[r,n]of Object.entries(e)){z(Fa(n)&&Ge(r),`'${r}' is not a valid operator`);let i=_r(t,r,null);z(!i||n===i,`${r} already exists for '${t}' operators. Cannot change operator function once registered.`)}switch(t){case"accumulator":ki.addAccumulatorOps(e);break;case"expression":ki.addExpressionOps(e);break;case"pipeline":ki.addPipelineOps(e);break;case"projection":ki.addProjectionOps(e);break;case"query":ki.addQueryOps(e);break;case"window":ki.addWindowOps(e);break}}function _r(t,e,r){let{context:n,useGlobalContext:i}=r||{},o=n?n.getOperator(t,e):null;return!o&&i?ki.getOperator(t,e):o}var ay={$$ROOT(t,e,r){return r.root},$$CURRENT(t,e,r){return t},$$REMOVE(t,e,r){},$$NOW(t,e,r){return new Date(r.timestamp)}},mf={$$KEEP(t,e,r){return t},$$PRUNE(t,e,r){},$$DESCEND(t,e,r){if(!Vt(e,"$cond"))return t;let n;for(let[i,o]of Object.entries(t))if(Ba(o)){if(o instanceof Array){let s=[];for(let l of o)ft(l)&&(l=gf(l,e,r.update(l))),X(l)||s.push(l);n=s}else n=gf(o,e,r.update(o));X(n)?delete t[i]:t[i]=n}return t}};function $(t,e,r,n){let i=Ht.init(n,t);if(r=r||"",Ge(r)){let o=_r("expression",r,n);if(o)return o(t,e,i);let s=_r("accumulator",r,n);if(s)return t instanceof Array||(t=$(t,e,null,i),e=null),z(t instanceof Array,`'${r}' target must be an array.`),s(t,e,i.update(null,i.local));throw new de(`operator '${r}' is not registered`)}if(Ct(e)&&e.length>0&&e[0]==="$"){if(Vt(mf,e))return e;let o=i.root,s=e.split(".");if(Vt(ay,s[0]))o=ay[s[0]](t,null,i),e=e.slice(s[0].length+1);else if(s[0].slice(0,2)==="$$"){o=Object.assign({},i.variables,{this:t},i.local?.variables);let l=s[0].slice(2);z(Vt(o,l),`Use of undefined variable: ${l}`),e=e.slice(2)}else e=e.slice(1);return e===""?o:Te(o,e)}if(ot(e))return e.map(o=>$(t,o,null,i));if(ft(e)){let o={};for(let[s,l]of Object.entries(e))if(o[s]=$(t,l,s,i),["expression","accumulator"].some(d=>!!_r(d,s,n)))return z(Object.keys(e).length===1,"Invalid aggregation expression '"+JSON.stringify(e)+"'"),o[s];return o}return e}function gf(t,e,r){let n=$(t,e,null,r);return Vt(mf,n)?mf[n](t,e,r):n}function Qe(t){return t instanceof za?t:new za(t)}function el(...t){let e=0;return Qe(()=>{for(;e<t.length;){let r=t[e].next();if(!r.done)return r;e++}return{done:!0}})}function _C(t){return!!t&&typeof t=="object"&&t?.next instanceof Function}function xC(t,e){let r=t.slice(e+1);t.splice(e),Array.prototype.push.apply(t,r)}var yf=new Error;function wC(t,e,r){let n=!1,i=-1,o=0;return function(s){try{t:for(;!n;){let l=t();i++;let d=-1,p=e.length,m=!1;for(;++d<p;){let y=e[d];switch(y.action){case 0:l=y.func(l,i);break;case 1:if(!y.func(l,i))continue t;break;case 2:--y.count,y.count||(m=!0);break;case 3:--y.count,y.count||xC(e,d);continue t;default:break t}}if(n=m,s)r[o++]=l;else return{value:l,done:!1}}}catch(l){if(l!==yf)throw l}return n=!0,{done:n}}}var za=class{constructor(e){this.iteratees=[],this.yieldedValues=[],this.isDone=!1;let r;if(e instanceof Function&&(e={next:e}),_C(e)){let n=e;r=()=>{let i=n.next();if(i.done)throw yf;return i.value}}else if(e instanceof Array){let n=e,i=n.length,o=0;r=()=>{if(o<i)return n[o++];throw yf}}else if(!(e instanceof Function))throw new de("Lazy must be initialized with an array, generator, or function.");this.getNext=wC(r,this.iteratees,this.yieldedValues)}push(e,r){return typeof r=="function"?this.iteratees.push({action:e,func:r}):typeof r=="number"&&this.iteratees.push({action:e,count:r}),this}next(){return this.getNext()}map(e){return this.push(0,e)}filter(e){return this.push(1,e)}take(e){return e>0?this.push(2,e):this}drop(e){return e>0?this.push(3,e):this}transform(e){let r=this,n;return Qe(()=>(n||(n=Qe(e(r.value()))),n.next()))}value(){return this.isDone||(this.isDone=this.getNext(!0).done),this.yieldedValues}each(e){for(;;){let r=this.next();if(r.done)break;if(e(r.value)===!1)return!1}return!0}reduce(e,r){let n=this.next();for(r===void 0&&!n.done&&(r=n.value,n=this.next());!n.done;)r=e(r,n.value),n=this.next();return r}size(){return this.reduce((e,r)=>++e,0)}[Symbol.iterator](){return this}};var zr=class{constructor(e,r){this.pipeline=e,this.options=un(r)}stream(e){let r=Qe(e),n=this.options.processingMode;(n==Ai.CLONE_ALL||n==Ai.CLONE_INPUT)&&r.map(Co);let i=new Array;if(!Ke(this.pipeline))for(let o of this.pipeline){let s=Object.keys(o),l=s[0],d=_r(xr.PIPELINE,l,this.options);z(s.length===1&&!!d,`invalid pipeline operator ${l}`),i.push(l),r=d(r,o[l],this.options)}return(n==Ai.CLONE_OUTPUT||n==Ai.CLONE_ALL&&ln([["$group","$unwind"],i]).length)&&r.map(Co),r}run(e){return this.stream(e).value()}};var rl=class{constructor(e,r,n,i){this.source=e,this.predicate=r,this.projection=n,this.options=i,this.operators=[],this.result=null,this.buffer=[]}fetch(){return this.result?this.result:(ft(this.projection)&&this.operators.push({$project:this.projection}),this.result=Qe(this.source).filter(this.predicate),this.operators.length>0&&(this.result=new zr(this.operators,this.options).stream(this.result)),this.result)}fetchAll(){let e=Qe([...this.buffer]);return this.buffer=[],el(e,this.fetch())}all(){return this.fetchAll().value()}count(){return this.all().length}skip(e){return this.operators.push({$skip:e}),this}limit(e){return this.operators.push({$limit:e}),this}sort(e){return this.operators.push({$sort:e}),this}collation(e){return this.options=gt(F({},this.options),{collation:e}),this}next(){if(this.buffer.length>0)return this.buffer.pop();let e=this.fetch().next();if(!e.done)return e.value}hasNext(){if(this.buffer.length>0)return!0;let e=this.fetch().next();return e.done?!1:(this.buffer.push(e.value),!0)}map(e){return this.all().map(e)}forEach(e){this.all().forEach(e)}[Symbol.iterator](){return this.fetchAll()}};var ee=class{constructor(e,r){this.condition=e,this.options=un(r),this.compiled=[],this.compile()}compile(){z(ft(this.condition),`query criteria must be an object: ${JSON.stringify(this.condition)}`);let e={};for(let[r,n]of Object.entries(this.condition)){if(r==="$where")Object.assign(e,{field:r,expr:n});else if(jr(["$and","$or","$nor","$expr","$jsonSchema"],r))this.processOperator(r,r,n);else{z(!Ge(r),`unknown top level operator: ${r}`);for(let[i,o]of Object.entries(tl(n)))this.processOperator(r,i,o)}e.field&&this.processOperator(e.field,e.field,e.expr)}}processOperator(e,r,n){let i=_r(xr.QUERY,r,this.options);if(!i)throw new de(`unknown query operator ${r}`);let o=i(e,n,this.options);this.compiled.push(o)}test(e){for(let r=0,n=this.compiled.length;r<n;r++)if(!this.compiled[r](e))return!1;return!0}find(e,r){return new rl(e,n=>this.test(n),r||{},this.options)}remove(e){return e.reduce((r,n)=>(this.test(n)||r.push(n),r),[])}};var Ro=1e3*60*60*24,sy={week:Ro*7,day:Ro,hour:1e3*60*60,minute:1e3*60,second:1e3,millisecond:1};var yM={week:Ro*7,day:Ro,hour:Ro/24,minute:6e4,second:1e3,millisecond:1};var il=(t,e,r)=>{if(Ke(e)||!ft(e))return t;let n=Lt,i=r.collation;return ft(i)&&Ct(i.locale)&&(n=TC(i)),t.transform(o=>{let s=Object.keys(e);for(let l of s.reverse()){let d=Zc(o,m=>Te(m,l),r.hashFunction),p=Array.from(d.keys()).sort(n);e[l]===-1&&p.reverse(),o=[],p.reduce((m,y)=>ar(m,d.get(y)),o)}return o})},IC={1:"base",2:"accent",3:"variant"};function TC(t){let e={sensitivity:IC[t.strength||3],caseFirst:t.caseFirst==="off"?"false":t.caseFirst||"false",numeric:t.numericOrdering||!1,ignorePunctuation:t.alternate==="shifted"};(t.caseLevel||!1)===!0&&(e.sensitivity==="base"&&(e.sensitivity="case"),e.sensitivity==="accent"&&(e.sensitivity="variant"));let r=new Intl.Collator(t.locale,e);return(n,i)=>{if(!Ct(n)||!Ct(i))return Lt(n,i);let o=r.compare(n,i);return o<0?-1:o>0?1:0}}function St(t){let e=(r,n,i)=>{let o={unwrapArray:!0},s=Math.max(1,r.split(".").length-1);return l=>{let d=Te(l,r,o);return t(d,n,gt(F({},i),{depth:s}))}};return e.op="query",e}function $e(t){return(e,r,n)=>{let i=$(e,r,null,n);return t(...i)}}function Va(t,e,r){if(ye(t,e)||X(t)&&X(e))return!0;if(t instanceof Array){let n=ye.bind(null,e);return t.some(n)||pf(t,r?.depth).some(n)}return!1}function ol(t,e,r){return!Va(t,e,r)}function _f(t,e,r){return X(t)?e.some(n=>n===null):ln([Ur(t),e],r?.hashFunction).length>0}function al(t,e,r){return!_f(t,e,r)}function sl(t,e,r){return dl(t,e,(n,i)=>Lt(n,i)<0)}function cl(t,e,r){return dl(t,e,(n,i)=>Lt(n,i)<=0)}function ll(t,e,r){return dl(t,e,(n,i)=>Lt(n,i)>0)}function ul(t,e,r){return dl(t,e,(n,i)=>Lt(n,i)>=0)}function hy(t,e,r){return Ur(t).some(n=>e.length===2&&n%e[0]===e[1])}function py(t,e,r){let n=Ur(t),i=o=>Ct(o)&&Ie(e.exec(o),r?.useStrictMode);return n.some(i)||pf(n,1).some(i)}function my(t,e,r){return(e===!1||e===0)&&t===void 0||(e===!0||e===1)&&t!==void 0}function gy(t,e,r){if(!ot(t)||!ot(e)||!t.length||!e.length)return!1;let n=!0;for(let i of e){if(!n)break;ft(i)&&jr(Object.keys(i),"$elemMatch")?n=xf(t,i.$elemMatch,r):i instanceof RegExp?n=t.some(o=>typeof o=="string"&&i.test(o)):n=t.some(o=>ye(i,o))}return n}function vy(t,e,r){return Array.isArray(t)&&t.length===e}function LC(t){return Ge(t)&&["$and","$or","$nor"].indexOf(t)===-1}function xf(t,e,r){if(ot(t)&&!Ke(t)){let n=s=>s,i=e;Object.keys(e).every(LC)&&(i={temp:e},n=s=>({temp:s}));let o=new ee(i,r);for(let s=0,l=t.length;s<l;s++)if(o.test(n(t[s])))return!0}return!1}var ly=t=>t===null,uy=t=>ht(t)&&t>=Qc&&t<=Gc&&t.toString().indexOf(".")===-1,dy=t=>ht(t)&&t>=ff&&t<=df&&t.toString().indexOf(".")===-1,$C={array:ot,bool:$a,boolean:$a,date:qn,decimal:ht,double:ht,int:uy,long:dy,number:ht,null:ly,object:ft,regex:wo,regexp:wo,string:Ct,undefined:X,function:t=>{throw new de("unsupported type key `function`.")},1:ht,2:Ct,3:ft,4:ot,6:X,8:$a,9:qn,10:ly,11:wo,16:uy,18:dy,19:ht};function fy(t,e,r){let n=$C[e];return n?n(t):!1}function yy(t,e,r){return Array.isArray(e)?e.findIndex(n=>fy(t,n,r))>=0:fy(t,e,r)}function dl(t,e,r){return Ur(t).some(n=>Vn(n)===Vn(e)&&r(n,e))}var kL=$e(al);var Oo=(t,e)=>(r,n,i)=>{z(ot(n),`${t}: expression must be an array.`);let o=$(r,n,null,i);return o.some(X)?null:(z(o.every(ht),`${t}: expression must evalue to array of numbers.`),e(o))};var R$=Oo("$bitAnd",t=>t.reduce((e,r)=>e&r,-1));var I$=Oo("$bitOr",t=>t.reduce((e,r)=>e|r,0));var M$=Oo("$bitXor",t=>t.reduce((e,r)=>e^r,0));var wf={};Ls(wf,{$and:()=>BC,$not:()=>FC,$or:()=>jC});var BC=(t,e,r)=>{let n=$(t,e,null,r);return Ie(n,r.useStrictMode)&&n.every(i=>Ie(i,r.useStrictMode))};var FC=(t,e,r)=>{let n=Ur(e);if(n.length==0)return!1;if(n.length==1)return!$(t,n[0],null,r);throw"Expression $not takes exactly 1 argument"};var jC=(t,e,r)=>{let n=$(t,e,null,r),i=r.useStrictMode;return Ie(n,i)&&n.some(o=>Ie(o,i))};var Cf={};Ls(Cf,{$cmp:()=>UC,$eq:()=>zC,$gt:()=>VC,$gte:()=>qC,$lt:()=>HC,$lte:()=>WC,$ne:()=>KC});var UC=(t,e,r)=>{let n=$(t,e,null,r);return n[0]>n[1]?1:n[0]<n[1]?-1:0};var zC=$e(Va);var VC=$e(ll);var qC=$e(ul);var HC=$e(sl);var WC=$e(cl);var KC=$e(ol);var by=(t,e)=>{let r={};return t.split("").forEach((n,i)=>r[n]=e*(i+1)),r},HB=gt(F(F({},by("ABCDEFGHIKLM",1)),by("NOPQRSTUVWXY",-1)),{Z:0});var Cy={undefined:null,null:null,NaN:NaN,Infinity:new Error,"-Infinity":new Error};function $t(t,e=Cy){let r=Object.assign({},Cy,e),n=new Set(Object.keys(r));return(i,o,s)=>{let l=$(i,o,null,s);if(n.has(`${l}`)){let d=r[`${l}`];if(d instanceof Error)throw new de(`cannot apply $${t.name} to -inf, value must in (-inf,inf)`);return d}return t(l)}}var Jz=$t(Math.acos,{Infinity:1/0,0:new Error});var r2=$t(Math.acosh,{Infinity:1/0,0:new Error});var o2=$t(Math.asin);var c2=$t(Math.asinh,{Infinity:1/0,"-Infinity":-1/0});var d2=$t(Math.atan);var v2=$t(Math.atanh,{1:1/0,"-1":-1/0});var _2=$t(Math.cos);var C2=$t(Math.cosh,{"-Infinity":1/0,Infinity:1/0});var XC=Math.PI/180,O2=$t(t=>t*XC,{Infinity:1/0,"-Infinity":1/0});var ZC=180/Math.PI,k2=$t(t=>t*ZC,{Infinity:1/0,"-Infinity":-1/0});var T2=$t(Math.sin);var N2=$t(Math.sinh,{"-Infinity":-1/0,Infinity:1/0});var B2=$t(Math.tan);var Rf=(t,e,r)=>{if(Ke(e))return t;let n=Object.keys(e),i=!1;Ry(e,r);let o=r.idKey;if(jr(n,o)){let l=e[o];(l===0||l===!1)&&(n=n.filter(Yc.bind(null,[o])),i=n.length==0)}else n.push(o);let s=Ht.init(r);return t.map(l=>Sf(l,e,s.update(l),n,i))};function Sf(t,e,r,n,i){let o={},s=!1,l=!1,d=[];i&&d.push(r.idKey);for(let p of n){let m,y=e[p];if(p!==r.idKey&&jr([0,!1],y)&&(l=!0),p===r.idKey&&Ke(y))m=t[p];else if(Ct(y))m=$(t,y,p,r);else if(!jr([1,!0],y))if(y instanceof Array)m=y.map(D=>{let M=$(t,D,null,r);return X(M)?null:M});else if(ft(y)){let D=y,M=Object.keys(y),j=M.length==1?M[0]:"",G=_r(xr.PROJECTION,j,r);if(G)j==="$slice"?Ur(D[j]).every(ht)?(m=G(t,D[j],p,r),s=!0):m=$(t,D,p,r):m=G(t,D[j],p,r);else if(Ge(j))m=$(t,D[j],j,r);else if(Vt(t,p)){Ry(D,r);let J=t[p];J instanceof Array?m=J.map(rt=>Sf(rt,D,r,M,!1)):(J=ft(J)?J:t,m=Sf(J,D,r,M,!1))}else m=$(t,y,null,r)}else{d.push(p);continue}let S=_o(t,p,{preserveMissing:!0});S!==void 0&&Wc(o,S,{flatten:!0}),Yc([0,1,!1,!0],y)&&(m===void 0?Ua(o,p,{descendArray:!0}):Jc(o,p,m))}if(Kc(o),(s||l||i)&&(o=ar({},t,o),d.length>0))for(let p of d)Ua(o,p,{descendArray:!0});return o}function Ry(t,e){let r=[!1,!1];for(let[n,i]of Object.entries(t)){if(n===e?.idKey)return;i===0||i===!1?r[0]=!0:(i===1||i===!0)&&(r[1]=!0),z(!(r[0]&&r[1]),"Projection cannot have a mix of inclusion and exclusion.")}}var Of=(t,e,r)=>{z(ot(e),"Invalid expression: $and expects value to be an Array.");let n=e.map(i=>new ee(i,r));return i=>n.every(o=>o.test(i))};var qa=(t,e,r)=>{z(ot(e),"Invalid expression. $or expects value to be an Array");let n=e.map(i=>new ee(i,r));return i=>n.some(o=>o.test(i))};var Ef=(t,e,r)=>{z(ot(e),"Invalid expression. $nor expects value to be an array.");let n=qa("$or",e,r);return i=>!n(i)};var Df=(t,e,r)=>{let n={};n[t]=tl(e);let i=new ee(n,r);return o=>!i.test(o)};var fl=St(Va);var hl=St(ll);var pl=St(ul);var ml=St(_f);var gl=St(sl);var vl=St(cl);var yl=St(ol);var bl=St(al);function eS(t,e,r){return n=>$(n,e,null,r)}function rS(t,e,r){if(!r?.jsonSchemaValidator)throw new de("Missing option 'jsonSchemaValidator'. Configure to use '$jsonSchema' operator.");let n=r?.jsonSchemaValidator(e);return i=>n(i)}var kf=St(hy);var Af=St(py);function nS(t,e,r){z(r.scriptEnabled,"$where operator requires 'scriptEnabled' option to be true");let n=e;return z(Fa(n),"$where only accepts a Function object"),i=>Ie(n.call(i),r?.useStrictMode)}var iS=St(gy);var If=St(xf);var Tf=St(vy);var Pf=St(my);var Mf=St(yy);var Oy=!1;function Ey(t){return Oy||(vf(xr.PIPELINE,{$sort:il,$project:Rf}),vf(xr.QUERY,{$and:Of,$eq:fl,$elemMatch:If,$exists:Pf,$gt:hl,$gte:pl,$in:ml,$lt:gl,$lte:vl,$ne:yl,$nin:bl,$mod:kf,$nor:Ef,$not:Df,$or:qa,$regex:Af,$size:Tf,$type:Mf}),Oy=!0),new ee(t)}function Ha(t,e){var r=ve(t.primaryKey);e=kt(e);var n=or(e);if(typeof n.skip!="number"&&(n.skip=0),n.selector?(n.selector=n.selector,Object.entries(n.selector).forEach(([p,m])=>{(typeof m!="object"||m===null)&&(n.selector[p]={$eq:m})})):n.selector={},n.index){var i=Pa(n.index);i.includes(r)||i.push(r),n.index=i}if(n.sort){var d=n.sort.find(p=>Wg(p)===r);d||(n.sort=n.sort.slice(0),n.sort.push({[r]:"asc"}))}else if(n.index)n.sort=n.index.map(p=>({[p]:"asc"}));else{if(t.indexes){var o=new Set;Object.entries(n.selector).forEach(([p,m])=>{var y=!1;typeof m=="object"&&m!==null?y=!!Object.keys(m).find(S=>qc.has(S)):y=!0,y&&o.add(p)});var s=-1,l;t.indexes.forEach(p=>{var m=Br(p)?p:[p],y=m.findIndex(S=>!o.has(S));y>0&&y>s&&(s=y,l=m)}),l&&(n.sort=l.map(p=>({[p]:"asc"})))}n.sort||(n.sort=[{[r]:"asc"}])}return n}function _l(t,e){if(!e.sort)throw L("SNH",{query:e});var r=[];e.sort.forEach(i=>{var o=Object.keys(i)[0],s=Object.values(i)[0];r.push({key:o,direction:s,getValueFn:Hg(o)})});var n=(i,o)=>{for(var s=0;s<r.length;++s){var l=r[s],d=l.getValueFn(i),p=l.getValueFn(o);if(d!==p){var m=l.direction==="asc"?Lt(d,p):Lt(p,d);return m}}};return n}function Eo(t,e){if(!e.sort)throw L("SNH",{query:e});var r=Ey(e.selector),n=i=>r.test(i);return n}function Hn(t,e){return U(this,null,function*(){var r=yield t.exec();if(!r)return null;if(Array.isArray(r))return Promise.all(r.map(i=>e(i)));if(r instanceof Map)return Promise.all([...r.values()].map(i=>e(i)));var n=yield e(r);return n})}function oS(t,e){return!e.sort||e.sort.length===0?[t]:e.sort.map(r=>Object.keys(r)[0])}var aS=new WeakMap;function sS(t){return We(aS,t,()=>{var e=t.collection,r=Ha(e.storageInstance.schema,or(t.mangoQuery)),n=e.schema.primaryPath,i=_l(e.schema.jsonSchema,r),o=(p,m)=>{var y={docA:p,docB:m,rxQuery:t};return i(y.docA,y.docB)},s=Eo(e.schema.jsonSchema,r),l=p=>{var m={doc:p,rxQuery:t};return s(m.doc)},d={primaryKey:t.collection.schema.primaryPath,skip:r.skip,limit:r.limit,sortFields:oS(n,r),sortComparator:o,queryMatcher:l};return d})}function Dy(t,e){if(!t.collection.database.eventReduce)return{runFullQueryAgain:!0};var r=sS(t),n=Et(t._result).docsData.slice(0),i=Et(t._result).docsDataMap,o=!1,s=e.map(d=>gv(d)).filter(Bg),l=s.find(d=>{var p={queryParams:r,changeEvent:d,previousResults:n,keyDocumentMap:i},m=Zv(p);if(m==="runFullQueryAgain")return!0;if(m!=="doNothing")return o=!0,Jv(m,r,d,n,i),!1});return l?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:o,newResults:n}}var cS=function(){function t(){this._map=new Map}var e=t.prototype;return e.getByQuery=function(n){var i=n.toString();return We(this._map,i,()=>n)},t}();function Ay(){return new cS}function ky(t,e){e.uncached=!0;var r=e.toString();t._map.delete(r)}function lS(t){return t.refCount$.observers.length}var uS=100,dS=30*1e3,fS=(t,e)=>(r,n)=>{if(!(n._map.size<t)){var i=ie()-e,o=[],s=Array.from(n._map.values());for(var l of s)if(!(lS(l)>0)){if(l._lastEnsureEqual===0&&l._creationTime<i){ky(n,l);continue}o.push(l)}var d=o.length-t;if(!(d<=0)){var p=o.sort((y,S)=>y._lastEnsureEqual-S._lastEnsureEqual),m=p.slice(0,d);m.forEach(y=>ky(n,y))}}},Lf=fS(uS,dS),Nf=new WeakSet;function Iy(t){Nf.has(t)||(Nf.add(t),Xg().then(()=>tv(200)).then(()=>{t.destroyed||t.cacheReplacementPolicy(t,t._queryCache),Nf.delete(t)}))}var Py=function(){function t(r,n,i){this.cacheItemByDocId=new Map,this.tasks=new Set,this.registry=typeof FinalizationRegistry=="function"?new FinalizationRegistry(o=>{var s=o.docId,l=this.cacheItemByDocId.get(s);l&&(l[0].delete(o.revisionHeight),l[0].size===0&&this.cacheItemByDocId.delete(s))}):void 0,this.primaryPath=r,this.changes$=n,this.documentCreator=i,n.subscribe(o=>{this.tasks.add(()=>{for(var s=this.cacheItemByDocId,l=0;l<o.length;l++){var d=o[l],p=s.get(d.documentId);if(p){var m=d.documentData;m||(m=d.previousDocumentData),p[1]=m}}}),this.tasks.size<=1&&yo().then(()=>{this.processTasks()})})}var e=t.prototype;return e.processTasks=function(){if(this.tasks.size!==0){var n=Array.from(this.tasks);n.forEach(i=>i()),this.tasks.clear()}},e.getLatestDocumentData=function(n){this.processTasks();var i=Fn(this.cacheItemByDocId,n);return i[1]},e.getLatestDocumentDataIfExists=function(n){this.processTasks();var i=this.cacheItemByDocId.get(n);if(i)return i[1]},Ae(t,[{key:"getCachedRxDocuments",get:function(){var r=Ty(this);return He(this,"getCachedRxDocuments",r)}},{key:"getCachedRxDocument",get:function(){var r=Ty(this);return He(this,"getCachedRxDocument",n=>r([n])[0])}}])}();function Ty(t){var e=t.primaryPath,r=t.cacheItemByDocId,n=t.registry,i=Tt.deepFreezeWhenDevMode,o=t.documentCreator,s=l=>{for(var d=new Array(l.length),p=[],m=0;m<l.length;m++){var y=l[m],S=y[e],D=Ci(y._rev),M=void 0,j=void 0,G=r.get(S);G?(M=G[0],j=M.get(D)):(M=new Map,G=[M,y],r.set(S,G));var J=j?j.deref():void 0;J||(y=i(y),J=o(y),M.set(D,pS(J)),n&&p.push(J)),d[m]=J}return p.length>0&&n&&(t.tasks.add(()=>{for(var rt=0;rt<p.length;rt++){var tt=p[rt];n.register(tt,{docId:tt.primary,revisionHeight:Ci(tt.revision)})}}),t.tasks.size<=1&&yo().then(()=>{t.processTasks()})),d};return s}function xl(t,e){var r=t.getCachedRxDocuments;return r(e)}var hS=typeof WeakRef=="function",pS=hS?mS:gS;function mS(t){return new WeakRef(t)}function gS(t){return{deref(){return t}}}var $f=function(){function t(r,n,i){this.time=ie(),this.query=r,this.count=i,this.documents=xl(this.query.collection._docCache,n)}var e=t.prototype;return e.getValue=function(n){var i=this.query.op;if(i==="count")return this.count;if(i==="findOne"){var o=this.documents.length===0?null:this.documents[0];if(!o&&n)throw L("QU10",{collection:this.query.collection.name,query:this.query.mangoQuery,op:i});return o}else return i==="findByIds"?this.docsMap:this.documents.slice(0)},Ae(t,[{key:"docsData",get:function(){return He(this,"docsData",this.documents.map(r=>r._data))}},{key:"docsDataMap",get:function(){var r=new Map;return this.documents.forEach(n=>{r.set(n.primary,n._data)}),He(this,"docsDataMap",r)}},{key:"docsMap",get:function(){for(var r=new Map,n=this.documents,i=0;i<n.length;i++){var o=n[i];r.set(o.primary,o)}return He(this,"docsMap",r)}}])}();var vS=0,yS=function(){return++vS},Bf=function(){function t(r,n,i,o={}){this.id=yS(),this._execOverDatabaseCount=0,this._creationTime=ie(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new we(null),this._result=null,this._latestChangeEvent=-1,this._lastExecStart=0,this._lastExecEnd=0,this._ensureEqualQueue=Fr,this.op=r,this.mangoQuery=n,this.collection=i,this.other=o,n||(this.mangoQuery=Wa()),this.isFindOneByIdQuery=wS(this.collection.schema.primaryPath,n)}var e=t.prototype;return e._setResultData=function(n){if(typeof n>"u")throw L("QU18",{database:this.collection.database.name,collection:this.collection.name});if(typeof n=="number"){this._result=new $f(this,[],n);return}else n instanceof Map&&(n=Array.from(n.values()));var i=new $f(this,n,n.length);this._result=i},e._execOverDatabase=function(){return U(this,null,function*(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this._lastExecStart=ie(),this.op==="count"){var n=this.getPreparedQuery(),i=yield this.collection.storageInstance.count(n);if(i.mode==="slow"&&!this.collection.database.allowSlowCount)throw L("QU14",{collection:this.collection,queryObj:this.mangoQuery});return i.count}if(this.op==="findByIds"){var o=Et(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,s=new Map,l=[];if(o.forEach(m=>{var y=this.collection._docCache.getLatestDocumentDataIfExists(m);if(y){if(!y._deleted){var S=this.collection._docCache.getCachedRxDocument(y);s.set(m,S)}}else l.push(m)}),l.length>0){var d=yield this.collection.storageInstance.findDocumentsById(l,!1);d.forEach(m=>{var y=this.collection._docCache.getCachedRxDocument(m);s.set(y.primary,y)})}return s}var p=xS(this);return p.then(m=>(this._lastExecEnd=ie(),m))})},e.exec=function(n){return U(this,null,function*(){if(n&&this.op!=="findOne")throw L("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});yield My(this);var i=Et(this._result);return i.getValue(n)})},e.toString=function(){var n=mo({op:this.op,query:this.mangoQuery,other:this.other},!0),i=JSON.stringify(n);return this.toString=()=>i,i},e.getPreparedQuery=function(){var n={rxQuery:this,mangoQuery:Ha(this.collection.schema.jsonSchema,this.mangoQuery)};n.mangoQuery.selector._deleted={$eq:!1},n.mangoQuery.index&&n.mangoQuery.index.unshift("_deleted"),te("prePrepareQuery",n);var i=Ka(this.collection.schema.jsonSchema,n.mangoQuery);return this.getPreparedQuery=()=>i,i},e.doesDocumentDataMatch=function(n){return n._deleted?!1:this.queryMatcher(n)},e.remove=function(){return this.exec().then(n=>Array.isArray(n)?Promise.all(n.map(i=>i.remove())):n.remove())},e.incrementalRemove=function(){return Hn(this.asRxQuery,n=>n.incrementalRemove())},e.update=function(n){throw Ot("update")},e.patch=function(n){return Hn(this.asRxQuery,i=>i.patch(n))},e.incrementalPatch=function(n){return Hn(this.asRxQuery,i=>i.incrementalPatch(n))},e.modify=function(n){return Hn(this.asRxQuery,i=>i.modify(n))},e.incrementalModify=function(n){return Hn(this.asRxQuery,i=>i.incrementalModify(n))},e.where=function(n){throw Ot("query-builder")},e.sort=function(n){throw Ot("query-builder")},e.skip=function(n){throw Ot("query-builder")},e.limit=function(n){throw Ot("query-builder")},Ae(t,[{key:"$",get:function(){if(!this._$){var r=this.collection.$.pipe(bt(n=>!n.isLocal),dr(null),Wt(()=>My(this)),ut(()=>this._result),na(Tc),Hi((n,i)=>!!(n&&n.time===Et(i).time)),bt(n=>!!n),ut(n=>Et(n).getValue()));this._$=Bs(r,this.refCount$.pipe(bt(()=>!1)))}return this._$}},{key:"$$",get:function(){var r=this.collection.database.getReactivityFactory();return r.fromObservable(this.$,void 0,this.collection.database)}},{key:"queryMatcher",get:function(){var r=this.collection.schema.jsonSchema,n=Ha(this.collection.schema.jsonSchema,this.mangoQuery);return He(this,"queryMatcher",Eo(r,n))}},{key:"asRxQuery",get:function(){return this}}])}();function Wa(){return{selector:{}}}function bS(t){return t.collection._queryCache.getByQuery(t)}function Do(t,e,r,n){te("preCreateRxQuery",{op:t,queryObj:e,collection:r,other:n});var i=new Bf(t,e,r,n);return i=bS(i),Iy(r),i}function Ny(t){var e=t.asRxQuery.collection._changeEventBuffer.getCounter();return t._latestChangeEvent>=e}function My(t){return U(this,null,function*(){return t.collection.awaitBeforeReads.size>0&&(yield Promise.all(Array.from(t.collection.awaitBeforeReads).map(e=>e()))),t.collection.database.destroyed||Ny(t)?!1:(t._ensureEqualQueue=t._ensureEqualQueue.then(()=>_S(t)),t._ensureEqualQueue)})}function _S(t){if(t._lastEnsureEqual=ie(),t.collection.database.destroyed||Ny(t))return Fr;var e=!1,r=!1;if(t._latestChangeEvent===-1&&(r=!0),!r){var n=t.asRxQuery.collection._changeEventBuffer.getFrom(t._latestChangeEvent+1);if(n===null)r=!0;else{t._latestChangeEvent=t.asRxQuery.collection._changeEventBuffer.getCounter();var i=t.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(n);if(t.op==="count"){var o=Et(t._result).count,s=o;i.forEach(d=>{var p=d.previousDocumentData&&t.doesDocumentDataMatch(d.previousDocumentData),m=t.doesDocumentDataMatch(d.documentData);!p&&m&&s++,p&&!m&&s--}),s!==o&&(e=!0,t._setResultData(s))}else{var l=Dy(t,i);l.runFullQueryAgain?r=!0:l.changed&&(e=!0,t._setResultData(l.newResults))}}}return r?t._execOverDatabase().then(d=>(t._latestChangeEvent=t.collection._changeEventBuffer.getCounter(),typeof d=="number"?((!t._result||d!==t._result.count)&&(e=!0,t._setResultData(d)),e):((!t._result||!Gg(t.collection.schema.primaryPath,d,t._result.docsData))&&(e=!0,t._setResultData(d)),e))):Promise.resolve(e)}function Ka(t,e){if(!e.sort)throw L("SNH",{query:e});var r=ty(t,e);return{query:e,queryPlan:r}}function xS(t){return U(this,null,function*(){var e=[],r=t.collection;if(t.isFindOneByIdQuery)if(Array.isArray(t.isFindOneByIdQuery)){var n=t.isFindOneByIdQuery;if(n=n.filter(m=>{var y=t.collection._docCache.getLatestDocumentDataIfExists(m);return y?(y._deleted||e.push(y),!1):!0}),n.length>0){var i=yield r.storageInstance.findDocumentsById(n,!1);yr(e,i)}}else{var o=t.isFindOneByIdQuery,s=t.collection._docCache.getLatestDocumentDataIfExists(o);if(!s){var l=yield r.storageInstance.findDocumentsById([o],!1);l[0]&&(s=l[0])}s&&!s._deleted&&e.push(s)}else{var d=t.getPreparedQuery(),p=yield r.storageInstance.query(d);e=p.documents}return e})}function wS(t,e){if(!e.skip&&e.selector&&Object.keys(e.selector).length===1&&e.selector[t]){var r=e.selector[t];if(typeof r=="string")return r;if(Object.keys(r).length===1&&typeof r.$eq=="string"||Object.keys(r).length===1&&Array.isArray(r.$eq)&&!r.$eq.find(n=>typeof n!="string"))return r.$eq}return!1}var Ly="_rxdb_internal";function jf(t,e){return U(this,null,function*(){var r=yield t.findDocumentsById([e],!1),n=r[0];if(n)return n})}function ko(t,e,r,n){if(n)throw n.status===409?L("CONFLICT",{collection:t.name,id:e,writeError:n,data:r}):n.status===422?L("VD2",{collection:t.name,id:e,writeError:n,data:r}):n}function $y(t,e,r,n,i,o,s){for(var l=!!t.schema.attachments,d=[],p=[],m=[],y=Ri(10),S={id:y,events:[],checkpoint:null,context:i,startTime:ie(),endTime:0},D=S.events,M=[],j=[],G=[],J=r.size>0,rt,tt=n.length,At=function(){var Pt=n[st],Dt=Pt.document,Ft=Pt.previous,he=Dt[e],Be=Dt._deleted,cr=Ft&&Ft._deleted,Xn=void 0;J&&(Xn=r.get(he));var lr;if(Xn){var Hr=Xn._rev;if(!Ft||Ft&&Hr!==Ft._rev){var pn={isError:!0,status:409,documentId:he,writeRow:Pt,documentInDb:Xn};return m.push(pn),1}var Me=l?Ff(Pt):Pt;l&&(Be?Ft&&Object.keys(Ft._attachments).forEach(oe=>{j.push({documentId:he,attachmentId:oe,digest:Et(Ft)._attachments[oe].digest})}):(Object.entries(Dt._attachments).find(([oe,ae])=>{var gn=Ft?Ft._attachments[oe]:void 0;return!gn&&!ae.data&&(lr={documentId:he,documentInDb:Xn,isError:!0,status:510,writeRow:Pt,attachmentId:oe}),!0}),lr||Object.entries(Dt._attachments).forEach(([oe,ae])=>{var gn=Ft?Ft._attachments[oe]:void 0;if(!gn)M.push({documentId:he,attachmentId:oe,attachmentData:ae,digest:ae.digest});else{var Zl=Me.document._attachments[oe].digest;ae.data&&gn.digest!==Zl&&G.push({documentId:he,attachmentId:oe,attachmentData:ae,digest:ae.digest})}}))),lr?m.push(lr):(l?(p.push(Ff(Me)),s&&s(Dt)):(p.push(Me),s&&s(Dt)),rt=Me);var mn=null,Fo=null,ur=null;if(cr&&!Be)ur="INSERT",mn=l?Vr(Dt):Dt;else if(Ft&&!cr&&!Be)ur="UPDATE",mn=l?Vr(Dt):Dt,Fo=Ft;else if(Be)ur="DELETE",mn=Et(Dt),Fo=Ft;else throw L("SNH",{args:{writeRow:Pt}});var cs={documentId:he,documentData:mn,previousDocumentData:Fo,operation:ur};D.push(cs)}else{var Bo=!!Be;if(l&&Object.entries(Dt._attachments).forEach(([oe,ae])=>{ae.data?M.push({documentId:he,attachmentId:oe,attachmentData:ae,digest:ae.digest}):(lr={documentId:he,isError:!0,status:510,writeRow:Pt,attachmentId:oe},m.push(lr))}),lr||(l?(d.push(Ff(Pt)),o&&o(Dt)):(d.push(Pt),o&&o(Dt)),rt=Pt),!Bo){var Xl={documentId:he,operation:"INSERT",documentData:l?Vr(Dt):Dt,previousDocumentData:l&&Ft?Vr(Ft):Ft};D.push(Xl)}}},st=0;st<tt;st++)At();return{bulkInsertDocs:d,bulkUpdateDocs:p,newestRow:rt,errors:m,eventBulk:S,attachmentsAdd:M,attachmentsRemove:j,attachmentsUpdate:G}}function Ff(t){return{previous:t.previous,document:Vr(t.document)}}function CS(t){return atob(t).length}function SS(t){var e=t.data;if(!e)return t;var r={length:CS(e),digest:t.digest,type:t.type};return r}function Vr(t){if(!t._attachments||Object.keys(t._attachments).length===0)return t;var e=kt(t);return e._attachments={},Object.entries(t._attachments).forEach(([r,n])=>{e._attachments[r]=SS(n)}),e}function Ii(t){return Object.assign({},t,{_meta:kt(t._meta)})}var By=new WeakMap;function wl(t,e,r){Tt.deepFreezeWhenDevMode(r);var n=ve(e.schema.primaryKey),i={originalStorageInstance:e,schema:e.schema,internals:e.internals,collectionName:e.collectionName,databaseName:e.databaseName,options:e.options,bulkWrite(o,s){for(var l=t.token,d=new Array(o.length),p=ie(),m=0;m<o.length;m++){var y=o[m],S=Ii(y.document);S._meta.lwt=p;var D=y.previous;S._rev=po(l,D),d[m]={document:S,previous:D}}return te("preStorageWrite",{storageInstance:this.originalStorageInstance,rows:d}),t.lockedRun(()=>e.bulkWrite(d,s)).then(M=>{var j={error:[]},G=sr(n,d,M);By.set(j,G);var J=M.error.length===0?[]:M.error.filter(tt=>tt.status===409&&!tt.writeRow.previous&&!tt.writeRow.document._deleted&&Et(tt.documentInDb)._deleted?!0:(j.error.push(tt),!1));if(J.length>0){var rt=J.map(tt=>({previous:tt.documentInDb,document:Object.assign({},tt.writeRow.document,{_rev:po(t.token,tt.documentInDb)})}));return t.lockedRun(()=>e.bulkWrite(rt,s)).then(tt=>{yr(j.error,tt.error);var At=sr(n,rt,tt);return yr(G,At),j})}return j})},query(o){return t.lockedRun(()=>e.query(o))},count(o){return t.lockedRun(()=>e.count(o))},findDocumentsById(o,s){return t.lockedRun(()=>e.findDocumentsById(o,s))},getAttachmentData(o,s,l){return t.lockedRun(()=>e.getAttachmentData(o,s,l))},getChangedDocumentsSince:e.getChangedDocumentsSince?(o,s)=>t.lockedRun(()=>e.getChangedDocumentsSince(Et(o),s)):void 0,cleanup(o){return t.lockedRun(()=>e.cleanup(o))},remove(){return t.storageInstances.delete(i),t.lockedRun(()=>e.remove())},close(){return t.storageInstances.delete(i),t.lockedRun(()=>e.close())},changeStream(){return e.changeStream()},conflictResultionTasks(){return e.conflictResultionTasks()},resolveConflictResultionTask(o){if(o.output.isEqual)return e.resolveConflictResultionTask(o);var s=Object.assign({},o.output.documentData,{_meta:Nn(),_rev:sn(),_attachments:{}}),l=kt(s);return delete l._meta,delete l._rev,delete l._attachments,e.resolveConflictResultionTask({id:o.id,output:{isEqual:!1,documentData:l}})}};return t.storageInstances.add(i),i}function Fy(t){if(t.schema.keyCompression)throw L("UT5",{args:{params:t}});if(RS(t.schema))throw L("UT6",{args:{params:t}});if(t.schema.attachments&&t.schema.attachments.compression)throw L("UT7",{args:{params:t}})}function RS(t){return!!(t.encrypted&&t.encrypted.length>0||t.attachments&&t.attachments.encrypted)}function sr(t,e,r){var n=By.get(r);if(n)return n;var i=[];if(r.error.length>0){for(var o=new Set,s=0;s<r.error.length;s++){var l=r.error[s];o.add(l.documentId)}for(var d=0;d<e.length;d++){var p=e[d].document;o.has(p[t])||i.push(Vr(p))}}else{i.length=e.length-r.error.length;for(var m=0;m<e.length;m++){var y=e[m].document;i[m]=Vr(y)}}return i}var jy=function(){function t(r,n,i,o){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=r,this.primaryPath=n,this.preWrite=i,this.postWrite=o}var e=t.prototype;return e.addWrite=function(n,i){var o=n[this.primaryPath],s=We(this.queueByDocId,o,()=>[]),l=new Promise((d,p)=>{var m={lastKnownDocumentState:n,modifier:i,resolve:d,reject:p};Et(s).push(m),this.triggerRun()});return l},e.triggerRun=function(){return U(this,null,function*(){if(!(this.isRunning===!0||this.queueByDocId.size===0)){this.isRunning=!0;var n=[],i=this.queueByDocId;this.queueByDocId=new Map,yield Promise.all(Array.from(i.entries()).map(d=>U(this,[d],function*([s,l]){var p=OS(l.map(S=>S.lastKnownDocumentState)),m=p;for(var y of l)try{m=yield y.modifier(or(m))}catch(S){y.reject(S),y.reject=()=>{},y.resolve=()=>{}}try{yield this.preWrite(m,p)}catch(S){l.forEach(D=>D.reject(S));return}n.push({previous:p,document:m})})));var o=n.length>0?yield this.storageInstance.bulkWrite(n,"incremental-write"):{error:[]};return yield Promise.all(sr(this.primaryPath,n,o).map(s=>{var l=s[this.primaryPath];this.postWrite(s);var d=Fn(i,l);d.forEach(p=>p.resolve(s))})),o.error.forEach(s=>{var l=s.documentId,d=Fn(i,l),p=Nc(s);if(p){var m=We(this.queueByDocId,l,()=>[]);d.reverse().forEach(S=>{S.lastKnownDocumentState=Et(p.documentInDb),Et(m).unshift(S)})}else{var y=uv(s);d.forEach(S=>S.reject(y))}}),this.isRunning=!1,this.triggerRun()}})},t}();function Uf(t){var e=r=>U(null,null,function*(){var n=Kg(r);n._deleted=r._deleted;var i=yield t(n),o=Object.assign({},i,{_meta:r._meta,_attachments:r._attachments,_rev:r._rev,_deleted:typeof i._deleted<"u"?i._deleted:r._deleted});return typeof o._deleted>"u"&&(o._deleted=!1),o});return e}function OS(t){var e=t[0],r=Ci(e._rev);return t.forEach(n=>{var i=Ci(n._rev);i>r&&(e=n,r=i)}),e}var Wn={get primaryPath(){var t=this;if(t.isInstanceOfRxDocument)return t.collection.schema.primaryPath},get primary(){var t=this;if(t.isInstanceOfRxDocument)return t._data[t.primaryPath]},get revision(){var t=this;if(t.isInstanceOfRxDocument)return t._data._rev},get deleted$(){var t=this;if(t.isInstanceOfRxDocument)return t.$.pipe(ut(e=>e._data._deleted))},get deleted$$(){var t=this,e=t.collection.database.getReactivityFactory();return e.fromObservable(t.deleted$,t.getLatest().deleted,t.collection.database)},get deleted(){var t=this;if(t.isInstanceOfRxDocument)return t._data._deleted},getLatest(){var t=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(t)},get $(){var t=this;return t.collection.$.pipe(bt(e=>!e.isLocal),bt(e=>e.documentId===this.primary),ut(e=>mv(e)),dr(t.collection._docCache.getLatestDocumentData(this.primary)),Hi((e,r)=>e._rev===r._rev),ut(e=>this.collection._docCache.getCachedRxDocument(e)),na(Tc))},get $$(){var t=this,e=t.collection.database.getReactivityFactory();return e.fromObservable(t.$,t.getLatest()._data,t.collection.database)},get$(t){if(Tt.isDevMode()){if(t.includes(".item."))throw L("DOC1",{path:t});if(t===this.primaryPath)throw L("DOC2");if(this.collection.schema.finalFields.includes(t))throw L("DOC3",{path:t});var e=Le(this.collection.schema.jsonSchema,t);if(!e)throw L("DOC4",{path:t})}return this.$.pipe(ut(r=>Ne(r,t)),Hi())},get$$(t){var e=this.get$(t),r=this.collection.database.getReactivityFactory();return r.fromObservable(e,this.getLatest().get(t),this.collection.database)},populate(t){var e=Le(this.collection.schema.jsonSchema,t),r=this.get(t);if(!r)return Jg;if(!e)throw L("DOC5",{path:t});if(!e.ref)throw L("DOC6",{path:t,schemaObj:e});var n=this.collection.database.collections[e.ref];if(!n)throw L("DOC7",{ref:e.ref,path:t,schemaObj:e});return e.type==="array"?n.findByIds(r).exec().then(i=>{var o=i.values();return Array.from(o)}):n.findOne(r).exec()},get(t){return zy(this,t)},toJSON(t=!1){if(t)return Tt.deepFreezeWhenDevMode(this._data);var e=kt(this._data);return delete e._rev,delete e._attachments,delete e._deleted,delete e._meta,Tt.deepFreezeWhenDevMode(e)},toMutableJSON(t=!1){return or(this.toJSON(t))},update(t){throw Ot("update")},incrementalUpdate(t){throw Ot("update")},updateCRDT(t){throw Ot("crdt")},putAttachment(){throw Ot("attachments")},getAttachment(){throw Ot("attachments")},allAttachments(){throw Ot("attachments")},get allAttachments$(){throw Ot("attachments")},modify(t,e){return U(this,null,function*(){var r=this._data,n=yield Uf(t)(r);return this._saveData(n,r)})},incrementalModify(t,e){return this.collection.incrementalWriteQueue.addWrite(this._data,Uf(t)).then(r=>this.collection._docCache.getCachedRxDocument(r))},patch(t){var e=this._data,r=or(e);return Object.entries(t).forEach(([n,i])=>{r[n]=i}),this._saveData(r,e)},incrementalPatch(t){return this.incrementalModify(e=>(Object.entries(t).forEach(([r,n])=>{e[r]=n}),e))},_saveData(t,e){return U(this,null,function*(){if(t=kt(t),this._data._deleted)throw L("DOC11",{id:this.primary,document:this});yield zf(this.collection,t,e);var r=[{previous:e,document:t}],n=yield this.collection.storageInstance.bulkWrite(r,"rx-document-save-data"),i=n.error[0];return ko(this.collection,this.primary,t,i),yield this.collection._runHooks("post","save",t,this),this.collection._docCache.getCachedRxDocument(sr(this.collection.schema.primaryPath,r,n)[0])})},remove(){var t=this.collection;if(this.deleted)return Promise.reject(L("DOC13",{document:this,id:this.primary}));var e=kt(this._data),r;return t._runHooks("pre","remove",e,this).then(()=>U(this,null,function*(){e._deleted=!0;var n=[{previous:this._data,document:e}],i=yield t.storageInstance.bulkWrite(n,"rx-document-remove"),o=i.error[0];return ko(t,this.primary,e,o),sr(this.collection.schema.primaryPath,n,i)[0]})).then(n=>(r=n,this.collection._runHooks("post","remove",e,this))).then(()=>this.collection._docCache.getCachedRxDocument(r))},incrementalRemove(){return this.incrementalModify(t=>U(this,null,function*(){return yield this.collection._runHooks("pre","remove",t,this),t._deleted=!0,t})).then(t=>U(this,null,function*(){return yield this.collection._runHooks("post","remove",t._data,t),t}))},destroy(){throw L("DOC14")}};function Cl(t=Wn){var e=function(n,i){this.collection=n,this._data=i,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return e.prototype=t,e}function Uy(t,e,r){var n=new t(e,r);return te("createRxDocument",n),n}function zf(t,e,r){return e._meta=Object.assign({},r._meta,e._meta),Tt.isDevMode()&&t.schema.validateChange(r,e),t._runHooks("pre","save",e,r)}function zy(t,e){return We(t._propertyCache,e,()=>{var r=Ne(t._data,e);if(typeof r!="object"||r===null||Array.isArray(r))return Tt.deepFreezeWhenDevMode(r);var n=new Proxy(kt(r),{get(i,o){if(typeof o!="string")return i[o];var s=o.charAt(o.length-1);if(s==="$")if(o.endsWith("$$")){var l=o.slice(0,-2);return t.get$$(br(e+"."+l))}else{var d=o.slice(0,-1);return t.get$(br(e+"."+d))}else if(s==="_"){var p=o.slice(0,-1);return t.populate(br(e+"."+p))}else{var m=i[o];return typeof m=="number"||typeof m=="string"||typeof m=="boolean"?m:zy(t,br(e+"."+o))}}});return n})}var Ao="collection",Vf="storage-token",ES="rx-migration-status",DS="RxInternalDocument",Sl=$c({version:0,title:DS,primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[Ao,Vf,ES,"OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function Rl(t,e){return Na(Sl,{key:t,context:e})}function Ol(t){return U(this,null,function*(){var e=Ka(t.schema,{selector:{context:Ao,_deleted:{$eq:!1}},sort:[{id:"asc"}],skip:0}),r=yield t.query(e),n=r.documents;return n})}var Vy="storageToken",kS=Rl(Vy,Vf);function qy(t){return U(this,null,function*(){var e=Ri(10),r=t.password?yield t.hashFunction(JSON.stringify(t.password)):void 0,n={id:kS,context:Vf,key:Vy,data:{rxdbVersion:t.rxdbVersion,token:e,instanceToken:t.token,passwordHash:r},_deleted:!1,_meta:Nn(),_rev:sn(),_attachments:{}},i=[{document:n}],o=yield t.internalStore.bulkWrite(i,"internal-add-storage-token");if(!o.error[0])return sr("id",i,o)[0];var s=Et(o.error[0]);if(s.isError&&Nc(s)){var l=s;if(!AS(l.documentInDb.data.rxdbVersion,t.rxdbVersion))throw L("DM5",{args:{database:t.name,databaseStateVersion:l.documentInDb.data.rxdbVersion,codeVersion:t.rxdbVersion}});if(r&&r!==l.documentInDb.data.passwordHash)throw L("DB1",{passwordHash:r,existingPasswordHash:l.documentInDb.data.passwordHash});var d=l.documentInDb;return Et(d)}throw s})}function AS(t,e){if(!t||e.includes("beta")&&e!==t)return!1;var r=t.split(".")[0],n=e.split(".")[0];return r===n}function qf(t,e){return t+"-"+e.version}function Ga(t,e){return e=kt(e),e=fv(t,e),typeof t.jsonSchema.primaryKey!="string"&&(e=Lc(t.primaryPath,t.jsonSchema,e)),e._meta=Nn(),Object.prototype.hasOwnProperty.call(e,"_deleted")||(e._deleted=!1),Object.prototype.hasOwnProperty.call(e,"_attachments")||(e._attachments={}),Object.prototype.hasOwnProperty.call(e,"_rev")||(e._rev=sn()),e}function Hy(t,e){return U(this,null,function*(){e.multiInstance=t.multiInstance;var r=yield t.storage.createStorageInstance(e);return r})}function El(t,e,r,n,i,o,s){return U(this,null,function*(){var l=yield Ol(e),d=l.filter(S=>S.data.name===i),p=[];d.forEach(S=>{p.push({collectionName:S.data.name,schema:S.data.schema,isCollection:!0}),S.data.connectedStorages.forEach(D=>p.push({collectionName:D.collectionName,isCollection:!1,schema:D.schema}))});var m=new Set;if(p=p.filter(S=>{var D=S.collectionName+"||"+S.schema.version;return m.has(D)?!1:(m.add(D),!0)}),yield Promise.all(p.map(S=>U(null,null,function*(){var D=yield t.createStorageInstance({collectionName:S.collectionName,databaseInstanceToken:r,databaseName:n,multiInstance:!1,options:{},schema:S.schema,password:o,devMode:Tt.isDevMode()});yield D.remove(),S.isCollection&&(yield zn("postRemoveRxCollection",{storage:t,databaseName:n,collectionName:i}))}))),s){var y=d.map(S=>{var D=Ii(S);return D._deleted=!0,D._meta.lwt=ie(),D._rev=po(r,S),{previous:S,document:D}});yield e.bulkWrite(y,"rx-database-remove-collection-all")}})}function Ye(t){if(t.destroyed)throw L("COL21",{collection:t.name,version:t.schema.version})}var IS=function(){function t(r){this.subs=[],this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.limit=100,this.tasks=new Set,this.collection=r,this.subs.push(this.collection.database.eventBulks$.pipe(bt(n=>n.collectionName===this.collection.name),bt(n=>{var i=n.events[0];return!i.isLocal})).subscribe(n=>{this.tasks.add(()=>this._handleChangeEvents(n.events)),this.tasks.size<=1&&yo().then(()=>{this.processTasks()})}))}var e=t.prototype;return e.processTasks=function(){if(this.tasks.size!==0){var n=Array.from(this.tasks);n.forEach(i=>i()),this.tasks.clear()}},e._handleChangeEvents=function(n){var i=this.counter;this.counter=this.counter+n.length,n.length>this.limit?this.buffer=n.slice(n.length*-1):(yr(this.buffer,n),this.buffer=this.buffer.slice(this.limit*-1));for(var o=i+1,s=this.eventCounterMap,l=0;l<n.length;l++){var d=n[l];s.set(d,o+l)}},e.getCounter=function(){return this.processTasks(),this.counter},e.getBuffer=function(){return this.processTasks(),this.buffer},e.getArrayIndexByPointer=function(n){this.processTasks();var i=this.buffer[0],o=this.eventCounterMap.get(i);if(n<o)return null;var s=n-o;return s},e.getFrom=function(n){this.processTasks();var i=[],o=this.getArrayIndexByPointer(n);if(o===null)return null;for(;;){var s=this.buffer[o];if(o++,s)i.push(s);else return i}},e.runFrom=function(n,i){this.processTasks();var o=this.getFrom(n);if(o===null)throw new Error("out of bounds");o.forEach(s=>i(s))},e.reduceByLastOfDoc=function(n){return this.processTasks(),n.slice(0);var i={};return n.forEach(o=>{i[o.documentId]=o}),Object.values(i)},e.destroy=function(){this.tasks.clear(),this.subs.forEach(n=>n.unsubscribe())},t}();function Wy(t){return new IS(t)}var TS=new WeakMap;function PS(t){var e=t.schema.getDocumentPrototype(),r=MS(t),n=Wn,i={};return[e,r,n].forEach(o=>{var s=Object.getOwnPropertyNames(o);s.forEach(l=>{var d=Object.getOwnPropertyDescriptor(o,l),p=!0;(l.startsWith("_")||l.endsWith("_")||l.startsWith("$")||l.endsWith("$"))&&(p=!1),typeof d.value=="function"?Object.defineProperty(i,l,{get(){return d.value.bind(this)},enumerable:p,configurable:!1}):(d.enumerable=p,d.configurable=!1,d.writable&&(d.writable=!1),Object.defineProperty(i,l,d))})}),i}function Ky(t){return We(TS,t,()=>Cl(PS(t)))}function Gy(t,e,r){var n=Uy(e,t,Tt.deepFreezeWhenDevMode(r));return t._runHooksSync("post","create",r,n),te("postCreateRxDocument",n),n}function MS(t){var e={};return Object.entries(t.methods).forEach(([r,n])=>{e[r]=n}),e}var Hf=function(t,e){var r=Vr(t.newDocumentState),n=Vr(t.realMasterState);return Bn(r,n)?Promise.resolve({isEqual:!0}):Promise.resolve({isEqual:!1,documentData:t.realMasterState})};function Dl(t){var e=t.collection.schema.jsonSchema;if(!e.attachments)throw L("AT1",{link:"https://pubkey.github.io/rxdb/rx-attachment.html"})}function Qy(t){Object.entries(t.doc.collection.attachments).forEach(([e,r])=>{Object.defineProperty(t,e,{get:()=>r.bind(t)})})}var NS=function(){function t({doc:r,id:n,type:i,length:o,digest:s}){this.doc=r,this.id=n,this.type=i,this.length=o,this.digest=s,Qy(this)}var e=t.prototype;return e.remove=function(){return this.doc.collection.incrementalWriteQueue.addWrite(this.doc._data,n=>(delete n._attachments[this.id],n)).then(()=>{})},e.getData=function(){return U(this,null,function*(){var n=yield this.doc.collection.storageInstance.getAttachmentData(this.doc.primary,this.id,this.digest),i=yield Ug(n,this.type);return i})},e.getStringData=function(){return U(this,null,function*(){var n=yield this.getData(),i=yield zg(n);return i})},t}();function kl(t,e,r){return new NS({doc:r,id:t,type:e.type,length:e.length,digest:e.digest})}function LS(t){return U(this,null,function*(){Dl(this);var e=qg(t.data),r=yield Vg(t.data),n=yield this.collection.database.hashFunction(r),i=t.id,o=t.type,s=r;return this.collection.incrementalWriteQueue.addWrite(this._data,l=>(l=kt(l),l._attachments=kt(l._attachments),l._attachments[i]={length:e,type:o,data:s,digest:n},l)).then(l=>{var d=this.collection._docCache.getCachedRxDocument(l),p=l._attachments[i],m=kl(i,p,d);return m})})}function $S(t){Dl(this);var e=this._data;if(!e._attachments||!e._attachments[t])return null;var r=e._attachments[t],n=kl(t,r,this);return n}function BS(){Dl(this);var t=this._data;return t._attachments?Object.keys(t._attachments).map(e=>kl(e,t._attachments[e],this)):[]}function FS(t){return U(this,null,function*(){var e=t.docData._attachments;if(e){var r={};yield Promise.all(Object.keys(e).map(n=>U(null,null,function*(){var i=e[n],o=t.docData[t.oldCollection.schema.primaryPath],s=yield t.oldCollection.storageInstance.getAttachmentData(o,n,i.digest),l=yield t.oldCollection.database.hashFunction(s);r[n]={length:i.length,type:i.type,data:s,digest:l}}))),t.docData._attachments=r}})}function jS(t){return $n}var Yy={name:"attachments",rxdb:!0,prototypes:{RxDocument:t=>{t.putAttachment=LS,t.getAttachment=$S,t.allAttachments=BS,Object.defineProperty(t,"allAttachments$",{get:function(){return this.$.pipe(ut(r=>Object.entries(r.toJSON(!0)._attachments)),ut(r=>r.map(([n,i])=>kl(n,i,this))))}})}},overwritable:{},hooks:{preMigrateDocument:{after:FS},postMigrateDocument:{after:jS}}};var Zy=["pre","post"],Jy=["insert","save","remove","create"],Xy=!1,Qa=function(){function t(r,n,i,o,s={},l={},d={},p={},m={},y=Lf,S={},D=Hf){this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this.awaitBeforeReads=new Set,this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=Ay(),this.$={},this.checkpoint$={},this._changeEventBuffer={},this.onDestroy=[],this.destroyed=!1,this.onRemove=[],this.database=r,this.name=n,this.schema=i,this.internalStorageInstance=o,this.instanceCreationOptions=s,this.migrationStrategies=l,this.methods=d,this.attachments=p,this.options=m,this.cacheReplacementPolicy=y,this.statics=S,this.conflictHandler=D,US(this.asRxCollection)}var e=t.prototype;return e.prepare=function(){return U(this,null,function*(){this.storageInstance=wl(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new jy(this.storageInstance,this.schema.primaryPath,(d,p)=>zf(this,d,p),d=>this._runHooks("post","save",d));var n=this.database.eventBulks$.pipe(bt(d=>d.collectionName===this.name));this.$=n.pipe(Wt(d=>d.events)),this.checkpoint$=n.pipe(ut(d=>d.checkpoint)),this._changeEventBuffer=Wy(this.asRxCollection);var i;this._docCache=new Py(this.schema.primaryPath,this.database.eventBulks$.pipe(bt(d=>d.collectionName===this.name&&!d.events[0].isLocal),ut(d=>d.events)),d=>(i||(i=Ky(this.asRxCollection)),Gy(this.asRxCollection,i,d)));var o=this.database.internalStore.changeStream().pipe(bt(d=>{var p=this.name+"-"+this.schema.version,m=d.events.find(y=>y.documentData.context==="collection"&&y.documentData.key===p&&y.operation==="DELETE");return!!m})).subscribe(()=>U(this,null,function*(){yield this.destroy(),yield Promise.all(this.onRemove.map(d=>d()))}));this._subs.push(o);var s=yield this.database.storageToken,l=this.storageInstance.changeStream().subscribe(d=>{for(var p=new Array(d.events.length),m=d.events,y=this.name,S=Tt.deepFreezeWhenDevMode,D=0;D<m.length;D++){var M=m[D];p[D]={documentId:M.documentId,collectionName:y,isLocal:!1,operation:M.operation,documentData:S(M.documentData),previousDocumentData:S(M.previousDocumentData)}}var j={id:d.id,internal:!1,collectionName:this.name,storageToken:s,events:p,databaseToken:this.database.token,checkpoint:d.checkpoint,context:d.context,endTime:d.endTime,startTime:d.startTime};this.database.$emit(j)});return this._subs.push(l),this._subs.push(this.storageInstance.conflictResultionTasks().subscribe(d=>{this.conflictHandler(d.input,d.context).then(p=>{this.storageInstance.resolveConflictResultionTask({id:d.id,output:p})})})),$n})},e.cleanup=function(n){throw Ye(this),Ot("cleanup")},e.migrationNeeded=function(){throw Ot("migration-schema")},e.getMigrationState=function(){throw Ot("migration-schema")},e.startMigration=function(n=10){return Ye(this),this.getMigrationState().startMigration(n)},e.migratePromise=function(n=10){return this.getMigrationState().migratePromise(n)},e.insert=function(n){return U(this,null,function*(){Ye(this);var i=yield this.bulkInsert([n]),o=i.error[0];ko(this,n[this.schema.primaryPath],n,o);var s=Et(i.success[0]);return s})},e.bulkInsert=function(n){return U(this,null,function*(){if(Ye(this),n.length===0)return{success:[],error:[]};var i=this.schema.primaryPath,o=new Set,s;if(this.hasHooks("pre","insert"))s=yield Promise.all(n.map(G=>{var J=Ga(this.schema,G);return this._runHooks("pre","insert",J).then(()=>(o.add(J[i]),{document:J}))}));else{s=new Array(n.length);for(var l=this.schema,d=0;d<n.length;d++){var p=n[d],m=Ga(l,p);o.add(m[i]),s[d]={document:m}}}if(o.size!==n.length)throw L("COL22",{collection:this.name,args:{documents:n}});var y=yield this.storageInstance.bulkWrite(s,"rx-collection-bulk-insert"),S,D=this,M={get success(){if(!S){var G=sr(D.schema.primaryPath,s,y);S=xl(D._docCache,G)}return S},error:y.error};if(this.hasHooks("post","insert")){var j=new Map;s.forEach(G=>{var J=G.document;j.set(J[i],J)}),yield Promise.all(M.success.map(G=>this._runHooks("post","insert",j.get(G.primary),G)))}return M})},e.bulkRemove=function(n){return U(this,null,function*(){Ye(this);var i=this.schema.primaryPath;if(n.length===0)return{success:[],error:[]};var o=yield this.findByIds(n).exec(),s=[],l=new Map;Array.from(o.values()).forEach(D=>{var M=D.toMutableJSON(!0);s.push(M),l.set(D.primary,M)}),yield Promise.all(s.map(D=>{var M=D[this.schema.primaryPath];return this._runHooks("pre","remove",D,o.get(M))}));var d=s.map(D=>{var M=kt(D);return M._deleted=!0,{previous:D,document:M}}),p=yield this.storageInstance.bulkWrite(d,"rx-collection-bulk-remove"),m=sr(this.schema.primaryPath,d,p),y=m.map(D=>D[i]);yield Promise.all(y.map(D=>this._runHooks("post","remove",l.get(D),o.get(D))));var S=y.map(D=>Fn(o,D));return{success:S,error:p.error}})},e.bulkUpsert=function(n){return U(this,null,function*(){Ye(this);var i=[],o=new Map;n.forEach(p=>{var m=Ga(this.schema,p),y=m[this.schema.primaryPath];if(!y)throw L("COL3",{primaryPath:this.schema.primaryPath,data:m,schema:this.schema.jsonSchema});o.set(y,m),i.push(m)});var s=yield this.bulkInsert(i),l=s.success.slice(0),d=[];return yield Promise.all(s.error.map(p=>U(this,null,function*(){if(p.status!==409)d.push(p);else{var m=p.documentId,y=Fn(o,m),S=Et(p.documentInDb),D=this._docCache.getCachedRxDocuments([S])[0],M=yield D.incrementalModify(()=>y);l.push(M)}}))),{error:d,success:l}})},e.upsert=function(n){return U(this,null,function*(){Ye(this);var i=yield this.bulkUpsert([n]);return ko(this.asRxCollection,n[this.schema.primaryPath],n,i.error[0]),i.success[0]})},e.incrementalUpsert=function(n){Ye(this);var i=Ga(this.schema,n),o=i[this.schema.primaryPath];if(!o)throw L("COL4",{data:n});var s=this._incrementalUpsertQueues.get(o);return s||(s=$n),s=s.then(()=>VS(this,o,i)).then(l=>l.inserted?l.doc:zS(l.doc,i)),this._incrementalUpsertQueues.set(o,s),s},e.find=function(n){if(Ye(this),typeof n=="string")throw L("COL5",{queryObj:n});n||(n=Wa());var i=Do("find",n,this);return i},e.findOne=function(n){if(Ye(this),typeof n=="number"||Array.isArray(n))throw ue("COL6",{queryObj:n});var i;if(typeof n=="string")i=Do("findOne",{selector:{[this.schema.primaryPath]:n},limit:1},this);else{if(n||(n=Wa()),n.limit)throw L("QU6");n=kt(n),n.limit=1,i=Do("findOne",n,this)}return i},e.count=function(n){Ye(this),n||(n=Wa());var i=Do("count",n,this);return i},e.findByIds=function(n){Ye(this);var i={selector:{[this.schema.primaryPath]:{$in:n.slice(0)}}},o=Do("findByIds",i,this);return o},e.exportJSON=function(){throw Ot("json-dump")},e.importJSON=function(n){throw Ot("json-dump")},e.insertCRDT=function(n){throw Ot("crdt")},e.addPipeline=function(n){throw Ot("pipeline")},e.addHook=function(n,i,o,s=!1){if(typeof o!="function")throw ue("COL7",{key:i,when:n});if(!Zy.includes(n))throw ue("COL8",{key:i,when:n});if(!Jy.includes(i))throw L("COL9",{key:i});if(n==="post"&&i==="create"&&s===!0)throw L("COL10",{when:n,key:i,parallel:s});var l=o.bind(this),d=s?"parallel":"series";this.hooks[i]=this.hooks[i]||{},this.hooks[i][n]=this.hooks[i][n]||{series:[],parallel:[]},this.hooks[i][n][d].push(l)},e.getHooks=function(n,i){return!this.hooks[i]||!this.hooks[i][n]?{series:[],parallel:[]}:this.hooks[i][n]},e.hasHooks=function(n,i){if(!this.hooks[i]||!this.hooks[i][n])return!1;var o=this.getHooks(n,i);return o?o.series.length>0||o.parallel.length>0:!1},e._runHooks=function(n,i,o,s){var l=this.getHooks(n,i);if(!l)return $n;var d=l.series.map(p=>()=>p(o,s));return ev(d).then(()=>Promise.all(l.parallel.map(p=>p(o,s))))},e._runHooksSync=function(n,i,o,s){if(this.hasHooks(n,i)){var l=this.getHooks(n,i);l&&l.series.forEach(d=>d(o,s))}},e.promiseWait=function(n){var i=new Promise(o=>{var s=setTimeout(()=>{this.timeouts.delete(s),o()},n);this.timeouts.add(s)});return i},e.destroy=function(){return U(this,null,function*(){return this.destroyed?Fr:(yield Promise.all(this.onDestroy.map(n=>n())),this.destroyed=!0,Array.from(this.timeouts).forEach(n=>clearTimeout(n)),this._changeEventBuffer&&this._changeEventBuffer.destroy(),this.database.requestIdlePromise().then(()=>this.storageInstance.close()).then(()=>(this._subs.forEach(n=>n.unsubscribe()),delete this.database.collections[this.name],zn("postDestroyRxCollection",this).then(()=>!0))))})},e.remove=function(){return U(this,null,function*(){yield this.destroy(),yield Promise.all(this.onRemove.map(n=>n())),yield El(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.password,this.database.hashFunction)})},Ae(t,[{key:"insert$",get:function(){return this.$.pipe(bt(r=>r.operation==="INSERT"))}},{key:"update$",get:function(){return this.$.pipe(bt(r=>r.operation==="UPDATE"))}},{key:"remove$",get:function(){return this.$.pipe(bt(r=>r.operation==="DELETE"))}},{key:"asRxCollection",get:function(){return this}}])}();function US(t){if(!Xy){Xy=!0;var e=Object.getPrototypeOf(t);Jy.forEach(r=>{Zy.map(n=>{var i=n+Ic(r);e[i]=function(o,s){return this.addHook(n,r,o,s)}})})}}function zS(t,e){return t.incrementalModify(r=>e)}function VS(t,e,r){var n=t._docCache.getLatestDocumentDataIfExists(e);return n?Promise.resolve({doc:t._docCache.getCachedRxDocuments([n])[0],inserted:!1}):t.findOne(e).exec().then(i=>i?{doc:i,inserted:!1}:t.insert(r).then(o=>({doc:o,inserted:!0})))}function tb({database:t,name:e,schema:r,instanceCreationOptions:n={},migrationStrategies:i={},autoMigrate:o=!0,statics:s={},methods:l={},attachments:d={},options:p={},localDocuments:m=!1,cacheReplacementPolicy:y=Lf,conflictHandler:S=Hf}){var D={databaseInstanceToken:t.token,databaseName:t.name,collectionName:e,schema:r.jsonSchema,options:n,multiInstance:t.multiInstance,password:t.password,devMode:Tt.isDevMode()};return te("preCreateRxStorageInstance",D),Hy(t,D).then(M=>{var j=new Qa(t,e,r,M,n,i,l,d,p,y,s,S);return j.prepare().then(()=>{Object.entries(s).forEach(([J,rt])=>{Object.defineProperty(j,J,{get:()=>rt.bind(j)})});var G=$n;return o&&j.schema.version!==0&&(G=j.migratePromise()),G}).then(()=>(te("createRxCollection",{collection:j,creator:{name:e,schema:r,storageInstance:M,instanceCreationOptions:n,migrationStrategies:i,methods:l,attachments:d,options:p,cacheReplacementPolicy:y,localDocuments:m,statics:s}}),j)).catch(G=>M.close().then(()=>Promise.reject(G)))})}var Gf=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this._parallels=e||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};Gf.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,Kf(this)},wrapCall:function(e){var r=this;this.lock();var n;try{n=e()}catch(i){throw this.unlock(),i}return!n.then||typeof n.then!="function"?(this.unlock(),n):n.then(function(i){return r.unlock(),i}).catch(function(i){throw r.unlock(),i})},requestIdlePromise:function(e){var r=this;e=e||{};var n,i=new Promise(function(l){return n=l}),o=function(){Wf(r,i),n()};if(i._manRes=o,e.timeout){var s=setTimeout(function(){i._manRes()},e.timeout);i._timeoutObj=s}return this._iC.add(i),Kf(this),i},cancelIdlePromise:function(e){Wf(this,e)},requestIdleCallback:function(e,r){var n=this._lHN++,i=this.requestIdlePromise(r);return this._hPM.set(n,i),this._pHM.set(i,n),i.then(function(){return e()}),n},cancelIdleCallback:function(e){var r=this._hPM.get(e);this.cancelIdlePromise(r)},clear:function(){var e=this;this._iC.forEach(function(r){return Wf(e,r)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}};function qS(t){if(t._iC.size!==0){var e=t._iC.values(),r=e.next().value;r._manRes(),setTimeout(function(){return Kf(t)},0)}}function Wf(t,e){if(e){if(e._timeoutObj&&clearTimeout(e._timeoutObj),t._pHM.has(e)){var r=t._pHM.get(e);t._hPM.delete(r),t._pHM.delete(e)}t._iC.delete(e)}}function Kf(t){t._tryIR||t._iC.size===0||(t._tryIR=!0,setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}qS(t),t._tryIR=!1},0)},0))}var Kn=class{ttl;map=new Map;_to=!1;constructor(e){this.ttl=e}has(e){return this.map.has(e)}add(e){this.map.set(e,eb()),this._to||(this._to=!0,setTimeout(()=>{this._to=!1,HS(this)},0))}clear(){this.map.clear()}};function HS(t){let e=eb()-t.ttl,r=t.map[Symbol.iterator]();for(;;){let n=r.next().value;if(!n)return;let i=n[0];if(n[1]<e)t.map.delete(i);else return}}function eb(){return Date.now()}var Al=new Set,rb=0,Ya=function(){function t(r,n,i,o,s,l,d=!1,p={},m,y,S,D,M){this.idleQueue=new Gf,this.rxdbVersion=Oi,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onDestroy=[],this.destroyed=!1,this.collections={},this.states={},this.eventBulks$=new at,this.observable$=this.eventBulks$.pipe(Wt(j=>j.events)),this.storageToken=Fr,this.storageTokenDocument=Fr,this.emittedEventBulkIds=new Kn(60*1e3),this.name=r,this.token=n,this.storage=i,this.instanceCreationOptions=o,this.password=s,this.multiInstance=l,this.eventReduce=d,this.options=p,this.internalStore=m,this.hashFunction=y,this.cleanupPolicy=S,this.allowSlowCount=D,this.reactivity=M,rb++,this.name!=="pseudoInstance"&&(this.internalStore=wl(this.asRxDatabase,m,Sl),this.storageTokenDocument=qy(this.asRxDatabase).catch(j=>this.startupErrors.push(j)),this.storageToken=this.storageTokenDocument.then(j=>j.data.token).catch(j=>this.startupErrors.push(j)))}var e=t.prototype;return e.getReactivityFactory=function(){if(!this.reactivity)throw L("DB14",{database:this.name});return this.reactivity},e.$emit=function(n){this.emittedEventBulkIds.has(n.id)||(this.emittedEventBulkIds.add(n.id),this.eventBulks$.next(n))},e.removeCollectionDoc=function(n,i){return U(this,null,function*(){var o=yield jf(this.internalStore,Rl(qf(n,i),Ao));if(!o)throw L("SNH",{name:n,schema:i});var s=Ii(o);s._deleted=!0,yield this.internalStore.bulkWrite([{document:s,previous:o}],"rx-database-remove-collection")})},e.addCollections=function(n){return U(this,null,function*(){var i={},o={},s=[],l={};yield Promise.all(Object.entries(n).map(S=>U(this,[S],function*([m,y]){var D=m,M=y.schema;i[D]=M;var j=pv(M,this.hashFunction);if(o[D]=j,this.collections[m])throw L("DB3",{name:m});var G=qf(m,M),J={id:Rl(G,Ao),key:G,context:Ao,data:{name:D,schemaHash:yield j.hash,schema:j.jsonSchema,version:j.version,connectedStorages:[]},_deleted:!1,_meta:Nn(),_rev:sn(),_attachments:{}};s.push({document:J});var rt=Object.assign({},y,{name:D,schema:j,database:this}),tt=kt(y);tt.database=this,tt.name=m,te("preCreateRxCollection",tt),rt.conflictHandler=tt.conflictHandler,l[D]=rt})));var d=yield this.internalStore.bulkWrite(s,"rx-database-add-collection");yield GS(this),yield Promise.all(d.error.map(m=>U(this,null,function*(){if(m.status!==409)throw L("DB12",{database:this.name,writeError:m});var y=Et(m.documentInDb),S=y.data.name,D=o[S];if(y.data.schemaHash!==(yield D.hash))throw L("DB6",{database:this.name,collection:S,previousSchemaHash:y.data.schemaHash,schemaHash:yield D.hash,previousSchema:y.data.schema,schema:Et(i[S])})})));var p={};return yield Promise.all(Object.keys(n).map(m=>U(this,null,function*(){var y=l[m],S=yield tb(y);p[m]=S,this.collections[m]=S,this[m]||Object.defineProperty(this,m,{get:()=>this.collections[m]})}))),p})},e.lockedRun=function(n){return this.idleQueue.wrapCall(n)},e.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},e.exportJSON=function(n){throw Ot("json-dump")},e.addState=function(n){throw Ot("state")},e.importJSON=function(n){throw Ot("json-dump")},e.backup=function(n){throw Ot("backup")},e.leaderElector=function(){throw Ot("leader-election")},e.isLeader=function(){throw Ot("leader-election")},e.waitForLeadership=function(){throw Ot("leader-election")},e.migrationStates=function(){throw Ot("migration-schema")},e.destroy=function(){return U(this,null,function*(){return this.destroyed?Fr:(this.destroyed=!0,yield zn("preDestroyRxDatabase",this),this.eventBulks$.complete(),rb--,this._subs.map(n=>n.unsubscribe()),this.name==="pseudoInstance"?Fr:this.requestIdlePromise().then(()=>Promise.all(this.onDestroy.map(n=>n()))).then(()=>Promise.all(Object.keys(this.collections).map(n=>this.collections[n]).map(n=>n.destroy()))).then(()=>this.internalStore.close()).then(()=>Al.delete(this.storage.name+"|"+this.name)).then(()=>!0))})},e.remove=function(){return this.destroy().then(()=>KS(this.name,this.storage,this.password))},Ae(t,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}])}();function WS(t,e){var r=e.name+"|"+t;if(Al.has(r))throw L("DB8",{name:t,storage:e.name,link:"https://rxdb.info/rx-database.html#ignoreduplicate"})}function nb(t,e,r,n,i,o){return U(this,null,function*(){var s=yield e.createStorageInstance({databaseInstanceToken:t,databaseName:r,collectionName:Ly,schema:Sl,options:n,multiInstance:i,password:o,devMode:Tt.isDevMode()});return s})}function ib({storage:t,instanceCreationOptions:e,name:r,password:n,multiInstance:i=!0,eventReduce:o=!0,ignoreDuplicate:s=!1,options:l={},cleanupPolicy:d,allowSlowCount:p=!1,localDocuments:m=!1,hashFunction:y=vo,reactivity:S}){te("preCreateRxDatabase",{storage:t,instanceCreationOptions:e,name:r,password:n,multiInstance:i,eventReduce:o,ignoreDuplicate:s,options:l,localDocuments:m}),s||WS(r,t),Al.add(t.name+"|"+r);var D=Ri(10);return nb(D,t,r,e,i,n).catch(M=>{throw Al.delete(t.name+"|"+r),M}).then(M=>{var j=new Ya(r,D,t,e,n,i,o,l,M,y,d,p,S);return zn("createRxDatabase",{database:j,creator:{storage:t,instanceCreationOptions:e,name:r,password:n,multiInstance:i,eventReduce:o,ignoreDuplicate:s,options:l,localDocuments:m}}).then(()=>j)})}function KS(t,e,r){return U(this,null,function*(){var n=Ri(10),i=yield nb(n,e,t,{},!1,r),o=yield Ol(i),s=new Set;o.forEach(d=>s.add(d.data.name));var l=Array.from(s);return yield Promise.all(l.map(d=>El(e,i,n,t,d,r))),yield zn("postRemoveRxDatabase",{databaseName:t,storage:e}),yield i.remove(),l})}function GS(t){return U(this,null,function*(){if(yield t.storageToken,t.startupErrors[0])throw t.startupErrors[0]})}var QS={RxSchema:Jd.prototype,RxDocument:Wn,RxQuery:Bf.prototype,RxCollection:Qa.prototype,RxDatabase:Ya.prototype},Qf=new Set,ob=new Set;function Il(t){if(te("preAddRxPlugin",{plugin:t,plugins:Qf}),!Qf.has(t)){{if(ob.has(t.name))throw L("PL3",{name:t.name,plugin:t});Qf.add(t),ob.add(t.name)}if(!t.rxdb)throw ue("PL1",{plugin:t});t.init&&t.init(),t.prototypes&&Object.entries(t.prototypes).forEach(([e,r])=>r(QS[e])),t.overwritable&&Object.assign(Tt,t.overwritable),t.hooks&&Object.entries(t.hooks).forEach(([e,r])=>{r.after&&bo[e].push(r.after),r.before&&bo[e].unshift(r.before)})}}function ab(t){return t&&typeof t.then=="function"}var YS=Promise.resolve(!1),Q3=Promise.resolve(!0),qr=Promise.resolve();function Tl(t,e){return t||(t=0),new Promise(function(r){return setTimeout(function(){return r(e)},t)})}function sb(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function Xa(){return Math.random().toString(36).substring(2)}var Yf=0;function dn(){var t=Date.now()*1e3;return t<=Yf&&(t=Yf+1),Yf=t,t}var XS=dn,ZS="native";function JS(t){var e={time:dn(),messagesCallback:null,bc:new BroadcastChannel(t),subFns:[]};return e.bc.onmessage=function(r){e.messagesCallback&&e.messagesCallback(r.data)},e}function tR(t){t.bc.close(),t.subFns=[]}function eR(t,e){try{return t.bc.postMessage(e,!1),qr}catch(r){return Promise.reject(r)}}function rR(t,e){t.messagesCallback=e}function nR(){if(typeof globalThis<"u"&&globalThis.Deno&&globalThis.Deno.args)return!0;if((typeof window<"u"||typeof self<"u")&&typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function iR(){return 150}var cb={create:JS,close:tR,onMessage:rR,postMessage:eR,canBeUsed:nR,type:ZS,averageResponseTime:iR,microSeconds:XS};function Io(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=JSON.parse(JSON.stringify(t));return typeof e.webWorkerSupport>"u"&&(e.webWorkerSupport=!0),e.idb||(e.idb={}),e.idb.ttl||(e.idb.ttl=1e3*45),e.idb.fallbackInterval||(e.idb.fallbackInterval=150),t.idb&&typeof t.idb.onclose=="function"&&(e.idb.onclose=t.idb.onclose),e.localstorage||(e.localstorage={}),e.localstorage.removeTimeout||(e.localstorage.removeTimeout=1e3*60),t.methods&&(e.methods=t.methods),e.node||(e.node={}),e.node.ttl||(e.node.ttl=1e3*60*2),e.node.maxParallelWrites||(e.node.maxParallelWrites=2048),typeof e.node.useFastPath>"u"&&(e.node.useFastPath=!0),e}var oR=dn,aR="pubkey.broadcast-channel-0-",fn="messages",Pl={durability:"relaxed"},sR="idb";function lb(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function Xf(t){t.commit&&t.commit()}function cR(t){var e=lb(),r=aR+t,n=e.open(r);return n.onupgradeneeded=function(i){var o=i.target.result;o.createObjectStore(fn,{keyPath:"id",autoIncrement:!0})},new Promise(function(i,o){n.onerror=function(s){return o(s)},n.onsuccess=function(){i(n.result)}})}function lR(t,e,r){var n=Date.now(),i={uuid:e,time:n,data:r},o=t.transaction([fn],"readwrite",Pl);return new Promise(function(s,l){o.oncomplete=function(){return s()},o.onerror=function(p){return l(p)};var d=o.objectStore(fn);d.add(i),Xf(o)})}function uR(t,e){var r=t.transaction(fn,"readonly",Pl),n=r.objectStore(fn),i=[],o=IDBKeyRange.bound(e+1,1/0);if(n.getAll){var s=n.getAll(o);return new Promise(function(d,p){s.onerror=function(m){return p(m)},s.onsuccess=function(m){d(m.target.result)}})}function l(){try{return o=IDBKeyRange.bound(e+1,1/0),n.openCursor(o)}catch{return n.openCursor()}}return new Promise(function(d,p){var m=l();m.onerror=function(y){return p(y)},m.onsuccess=function(y){var S=y.target.result;S?S.value.id<e+1?S.continue(e+1):(i.push(S.value),S.continue()):(Xf(r),d(i))}})}function dR(t,e){if(t.closed)return Promise.resolve([]);var r=t.db.transaction(fn,"readwrite",Pl),n=r.objectStore(fn);return Promise.all(e.map(function(i){var o=n.delete(i);return new Promise(function(s){o.onsuccess=function(){return s()}})}))}function fR(t,e){var r=Date.now()-e,n=t.transaction(fn,"readonly",Pl),i=n.objectStore(fn),o=[];return new Promise(function(s){i.openCursor().onsuccess=function(l){var d=l.target.result;if(d){var p=d.value;p.time<r?(o.push(p),d.continue()):(Xf(n),s(o))}else s(o)}})}function hR(t){return fR(t.db,t.options.idb.ttl).then(function(e){return dR(t,e.map(function(r){return r.id}))})}function pR(t,e){return e=Io(e),cR(t).then(function(r){var n={closed:!1,lastCursorId:0,channelName:t,options:e,uuid:Xa(),eMIs:new Kn(e.idb.ttl*2),writeBlockPromise:qr,messagesCallback:null,readQueuePromises:[],db:r};return r.onclose=function(){n.closed=!0,e.idb.onclose&&e.idb.onclose()},ub(n),n})}function ub(t){t.closed||db(t).then(function(){return Tl(t.options.idb.fallbackInterval)}).then(function(){return ub(t)})}function mR(t,e){return!(t.uuid===e.uuid||e.eMIs.has(t.id)||t.data.time<e.messagesCallbackTime)}function db(t){return t.closed?qr:t.messagesCallback?uR(t.db,t.lastCursorId).then(function(e){var r=e.filter(function(n){return!!n}).map(function(n){return n.id>t.lastCursorId&&(t.lastCursorId=n.id),n}).filter(function(n){return mR(n,t)}).sort(function(n,i){return n.time-i.time});return r.forEach(function(n){t.messagesCallback&&(t.eMIs.add(n.id),t.messagesCallback(n.data))}),qr}):qr}function gR(t){t.closed=!0,t.db.close()}function vR(t,e){return t.writeBlockPromise=t.writeBlockPromise.then(function(){return lR(t.db,t.uuid,e)}).then(function(){sb(0,10)===0&&hR(t)}),t.writeBlockPromise}function yR(t,e,r){t.messagesCallbackTime=r,t.messagesCallback=e,db(t)}function bR(){return!!lb()}function _R(t){return t.idb.fallbackInterval*2}var fb={create:pR,close:gR,onMessage:yR,postMessage:vR,canBeUsed:bR,type:sR,averageResponseTime:_R,microSeconds:oR};var xR=dn,wR="pubkey.broadcastChannel-",CR="localstorage";function hb(){var t;if(typeof window>"u")return null;try{t=window.localStorage,t=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return t}function pb(t){return wR+t}function SR(t,e){return new Promise(function(r){Tl().then(function(){var n=pb(t.channelName),i={token:Xa(),time:Date.now(),data:e,uuid:t.uuid},o=JSON.stringify(i);hb().setItem(n,o);var s=document.createEvent("Event");s.initEvent("storage",!0,!0),s.key=n,s.newValue=o,window.dispatchEvent(s),r()})})}function RR(t,e){var r=pb(t),n=function(o){o.key===r&&e(JSON.parse(o.newValue))};return window.addEventListener("storage",n),n}function OR(t){window.removeEventListener("storage",t)}function ER(t,e){if(e=Io(e),!mb())throw new Error("BroadcastChannel: localstorage cannot be used");var r=Xa(),n=new Kn(e.localstorage.removeTimeout),i={channelName:t,uuid:r,eMIs:n};return i.listener=RR(t,function(o){i.messagesCallback&&o.uuid!==r&&(!o.token||n.has(o.token)||o.data.time&&o.data.time<i.messagesCallbackTime||(n.add(o.token),i.messagesCallback(o.data)))}),i}function DR(t){OR(t.listener)}function kR(t,e,r){t.messagesCallbackTime=r,t.messagesCallback=e}function mb(){var t=hb();if(!t)return!1;try{var e="__broadcastchannel_check";t.setItem(e,"works"),t.removeItem(e)}catch{return!1}return!0}function AR(){var t=120,e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?t*2:t}var gb={create:ER,close:DR,onMessage:kR,postMessage:SR,canBeUsed:mb,type:CR,averageResponseTime:AR,microSeconds:xR};var vb=dn,IR="simulate",Zf=new Set;function TR(t){var e={time:vb(),name:t,messagesCallback:null};return Zf.add(e),e}function PR(t){Zf.delete(t)}var yb=5;function MR(t,e){return new Promise(function(r){return setTimeout(function(){var n=Array.from(Zf);n.forEach(function(i){i.name===t.name&&i!==t&&i.messagesCallback&&i.time<e.time&&i.messagesCallback(e)}),r()},yb)})}function NR(t,e){t.messagesCallback=e}function LR(){return!0}function $R(){return yb}var bb={create:TR,close:PR,onMessage:NR,postMessage:MR,canBeUsed:LR,type:IR,averageResponseTime:$R,microSeconds:vb};var _b=[cb,fb,gb];function xb(t){var e=[].concat(t.methods,_b).filter(Boolean);if(t.type){if(t.type==="simulate")return bb;var r=e.find(function(i){return i.type===t.type});if(r)return r;throw new Error("method-type "+t.type+" not found")}t.webWorkerSupport||(e=e.filter(function(i){return i.type!=="idb"}));var n=e.find(function(i){return i.canBeUsed()});if(n)return n;throw new Error("No usable method found in "+JSON.stringify(_b.map(function(i){return i.type})))}var Jf=new Set,BR=0,Za=function(e,r){this.id=BR++,Jf.add(this),this.name=e,wb&&(r=wb),this.options=Io(r),this.method=xb(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,FR(this)};Za._pubkey=!0;var wb;Za.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(e));return Cb(this,"message",e)},postInternal:function(e){return Cb(this,"internal",e)},set onmessage(t){var e=this.method.microSeconds(),r={time:e,fn:t};Rb(this,"message",this._onML),t&&typeof t=="function"?(this._onML=r,Sb(this,"message",r)):this._onML=null},addEventListener:function(e,r){var n=this.method.microSeconds(),i={time:n,fn:r};Sb(this,e,i)},removeEventListener:function(e,r){var n=this._addEL[e].find(function(i){return i.fn===r});Rb(this,e,n)},close:function(){var e=this;if(!this.closed){Jf.delete(this),this.closed=!0;var r=this._prepP?this._prepP:qr;return this._onML=null,this._addEL.message=[],r.then(function(){return Promise.all(Array.from(e._uMP))}).then(function(){return Promise.all(e._befC.map(function(n){return n()}))}).then(function(){return e.method.close(e._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function Cb(t,e,r){var n=t.method.microSeconds(),i={time:n,type:e,data:r},o=t._prepP?t._prepP:qr;return o.then(function(){var s=t.method.postMessage(t._state,i);return t._uMP.add(s),s.catch().then(function(){return t._uMP.delete(s)}),s})}function FR(t){var e=t.method.create(t.name,t.options);ab(e)?(t._prepP=e,e.then(function(r){t._state=r})):t._state=e}function Ob(t){return t._addEL.message.length>0||t._addEL.internal.length>0}function Sb(t,e,r){t._addEL[e].push(r),jR(t)}function Rb(t,e,r){t._addEL[e]=t._addEL[e].filter(function(n){return n!==r}),UR(t)}function jR(t){if(!t._iL&&Ob(t)){var e=function(i){t._addEL[i.type].forEach(function(o){i.time>=o.time&&o.fn(i.data)})},r=t.method.microSeconds();t._prepP?t._prepP.then(function(){t._iL=!0,t.method.onMessage(t._state,e,r)}):(t._iL=!0,t.method.onMessage(t._state,e,r))}}function UR(t){if(t._iL&&!Ob(t)){t._iL=!1;var e=t.method.microSeconds();t.method.onMessage(t._state,null,e)}}var Ml=new Map;function zR(t,e,r,n){var i=Ml.get(e);return i||(i={bc:new Za(["RxDB:",t,r].join("|")),refs:new Set},Ml.set(e,i)),i.refs.add(n),i.bc}function Eb(t,e){var r=Ml.get(t);if(r&&(r.refs.delete(e),r.refs.size===0))return Ml.delete(t),r.bc.close()}function Db(t,e,r,n){if(e.multiInstance){var i=n||zR(t,e.databaseInstanceToken,r.databaseName,r),o=new at,s=S=>{S.storageName===t&&S.databaseName===e.databaseName&&S.collectionName===e.collectionName&&S.version===e.schema.version&&o.next(S.eventBulk)};i.addEventListener("message",s);var l=r.changeStream(),d=!1,p=l.subscribe(S=>{d||i.postMessage({storageName:t,databaseName:e.databaseName,collectionName:e.collectionName,version:e.schema.version,eventBulk:S})});r.changeStream=function(){return o.asObservable().pipe(_p(l))};var m=r.close.bind(r);r.close=function(){return U(this,null,function*(){return d=!0,p.unsubscribe(),i.removeEventListener("message",s),n||(yield Eb(e.databaseInstanceToken,r)),m()})};var y=r.remove.bind(r);r.remove=function(){return U(this,null,function*(){return d=!0,p.unsubscribe(),i.removeEventListener("message",s),n||(yield Eb(e.databaseInstanceToken,r)),y()})}}}var th={UT1:"given name is no string or empty",UT2:`collection- and database-names must match the regex to be compatible with couchdb databases.
    See https://neighbourhood.ie/blog/2020/10/13/everything-you-need-to-know-about-couchdb-database-names/
    info: if your database-name specifies a folder, the name must contain the slash-char '/' or '\\'`,UT3:"replication-direction must either be push or pull or both. But not none",UT4:"given leveldown is no valid adapter",UT5:"keyCompression is set to true in the schema but no key-compression handler is used in the storage",UT6:"schema contains encrypted fields but no encryption handler is used in the storage",UT7:"attachments.compression is enabled but no attachment-compression plugin is used",PL1:"Given plugin is not RxDB plugin.",PL3:"A plugin with the same name was already added but it was not the exact same JavaScript object",P2:"bulkWrite() cannot be called with an empty array",QU1:"RxQuery._execOverDatabase(): op not known",QU4:"RxQuery.regex(): You cannot use .regex() on the primary field",QU5:"RxQuery.sort(): does not work because key is not defined in the schema",QU6:"RxQuery.limit(): cannot be called on .findOne()",QU9:"throwIfMissing can only be used in findOne queries",QU10:"result empty and throwIfMissing: true",QU11:"RxQuery: no valid query params given",QU12:"Given index is not in schema",QU13:"A top level field of the query is not included in the schema",QU14:"Running a count() query in slow mode is now allowed. Either run a count() query with a selector that fully matches an index or set allowSlowCount=true when calling the createRxDatabase",QU15:"For count queries it is not allowed to use skip or limit",QU16:"$regex queries must be defined by a string, not an RegExp instance. This is because RegExp objects cannot be JSON stringified and also they are mutable which would be dangerous",QU17:"Chained queries cannot be used on findByIds() RxQuery instances",QU18:"Malformated query result data. This likely happens because you create a OPFS-storage RxDatabase inside of a worker but did not set the usesRxDatabaseInWorker setting. https://rxdb.info/rx-storage-opfs.html#setting-usesrxdatabaseinworker-when-a-rxdatabase-is-also-used-inside-of-the-worker ",MQ1:"path must be a string or object",MQ2:"Invalid argument",MQ3:"Invalid sort() argument. Must be a string, object, or array",MQ4:"Invalid argument. Expected instanceof mquery or plain object",MQ5:"method must be used after where() when called with these arguments",MQ6:"Can't mix sort syntaxes. Use either array or object | .sort([['field', 1], ['test', -1]]) | .sort({ field: 1, test: -1 })",MQ7:"Invalid sort value",MQ8:"Can't mix sort syntaxes. Use either array or object",DB1:"RxDocument.prepare(): another instance on this adapter has a different password",DB2:"RxDatabase.addCollections(): collection-names cannot start with underscore _",DB3:"RxDatabase.addCollections(): collection already exists. use myDatabase[collectionName] to get it",DB4:"RxDatabase.addCollections(): schema is missing",DB5:"RxDatabase.addCollections(): collection-name not allowed",DB6:"RxDatabase.addCollections(): another instance created this collection with a different schema. Read this https://rxdb.info/questions-answers.html?console=qa#cant-change-the-schema ",DB8:`createRxDatabase(): A RxDatabase with the same name and adapter already exists.
Make sure to use this combination only once or set ignoreDuplicate to true if you do this intentional-
This often happens in react projects with hot reload that reloads the code without reloading the process.`,DB11:"createRxDatabase(): Invalid db-name, folder-paths must not have an ending slash",DB12:"RxDatabase.addCollections(): could not write to internal store",DB13:"createRxDatabase(): Invalid db-name or collection name, name contains the dollar sign",DB14:"no custom reactivity factory added on database creation",COL1:"RxDocument.insert() You cannot insert an existing document",COL2:"RxCollection.insert() fieldName ._id can only be used as primaryKey",COL3:"RxCollection.upsert() does not work without primary",COL4:"RxCollection.incrementalUpsert() does not work without primary",COL5:"RxCollection.find() if you want to search by _id, use .findOne(_id)",COL6:"RxCollection.findOne() needs a queryObject or string",COL7:"hook must be a function",COL8:"hooks-when not known",COL9:"RxCollection.addHook() hook-name not known",COL10:"RxCollection .postCreate-hooks cannot be async",COL11:"migrationStrategies must be an object",COL12:"A migrationStrategy is missing or too much",COL13:"migrationStrategy must be a function",COL14:"given static method-name is not a string",COL15:"static method-names cannot start with underscore _",COL16:"given static method is not a function",COL17:"RxCollection.ORM: statics-name not allowed",COL18:"collection-method not allowed because fieldname is in the schema",COL20:"Storage write error",COL21:"The RxCollection is destroyed or removed already, either from this JavaScript realm or from another, like a browser tab",CONFLICT:"Document update conflict. When changing a document you must work on the previous revision",COL22:".bulkInsert() and .bulkUpsert() cannot be run with multiple documents that have the same primary key",DOC1:"RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed",DOC2:"cannot observe primary path",DOC3:"final fields cannot be observed",DOC4:"RxDocument.get$ cannot observe a non-existed field",DOC5:"RxDocument.populate() cannot populate a non-existed field",DOC6:"RxDocument.populate() cannot populate because path has no ref",DOC7:"RxDocument.populate() ref-collection not in database",DOC8:"RxDocument.set(): primary-key cannot be modified",DOC9:"final fields cannot be modified",DOC10:"RxDocument.set(): cannot set childpath when rootPath not selected",DOC11:"RxDocument.save(): can't save deleted document",DOC13:"RxDocument.remove(): Document is already deleted",DOC14:"RxDocument.destroy() does not exist",DOC15:"query cannot be an array",DOC16:"Since version 8.0.0 RxDocument.set() can only be called on temporary RxDocuments",DOC17:"Since version 8.0.0 RxDocument.save() can only be called on non-temporary documents",DOC18:"Document property for composed primary key is missing",DOC19:"Value of primary key(s) cannot be changed",DOC20:"PrimaryKey missing",DOC21:"PrimaryKey must be equal to PrimaryKey.trim(). It cannot start or end with a whitespace",DOC22:"PrimaryKey must not contain a linebreak",DOC23:'PrimaryKey must not contain a double-quote ["]',DOC24:"Given document data could not be structured cloned. This happens if you pass non-plain-json data into it, like a Date() object or a Function. In vue.js this happens if you use ref() on the document data which transforms it into a Proxy object.",DM1:"migrate() Migration has already run",DM2:"migration of document failed final document does not match final schema",DM3:"migration already running",DM4:"Migration errored",DM5:"Cannot open database state with newer RxDB version. You have to migrate your database state first. See https://rxdb.info/migration-storage.html?console=storage ",AT1:"to use attachments, please define this in your schema",EN1:"password is not valid",EN2:"validatePassword: min-length of password not complied",EN3:"Schema contains encrypted properties but no password is given",EN4:"Password not valid",JD1:"You must create the collections before you can import their data",JD2:"RxCollection.importJSON(): the imported json relies on a different schema",JD3:"RxCollection.importJSON(): json.passwordHash does not match the own",LD1:"RxDocument.allAttachments$ can't use attachments on local documents",LD2:"RxDocument.get(): objPath must be a string",LD3:"RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed",LD4:"cannot observe primary path",LD5:"RxDocument.set() id cannot be modified",LD6:"LocalDocument: Function is not usable on local documents",LD7:"Local document already exists",LD8:"localDocuments not activated. Set localDocuments=true on creation, when you want to store local documents on the RxDatabase or RxCollection.",RC1:"Replication: already added",RC2:"replicateCouchDB() query must be from the same RxCollection",RC4:"RxCouchDBReplicationState.awaitInitialReplication() cannot await initial replication when live: true",RC5:"RxCouchDBReplicationState.awaitInitialReplication() cannot await initial replication if multiInstance because the replication might run on another instance",RC6:"syncFirestore() serverTimestampField MUST NOT be part of the collections schema and MUST NOT be nested.",RC7:"SimplePeer requires to have process.nextTick() polyfilled, see https://rxdb.info/replication-webrtc.html?console=webrtc ",RC_PULL:"RxReplication pull handler threw an error - see .errors for more details",RC_STREAM:"RxReplication pull stream$ threw an error - see .errors for more details",RC_PUSH:"RxReplication push handler threw an error - see .errors for more details",RC_PUSH_NO_AR:"RxReplication push handler did not return an array with the conflicts",RC_WEBRTC_PEER:"RxReplication WebRTC Peer has error",RC_COUCHDB_1:"replicateCouchDB() url must end with a slash like 'https://example.com/mydatabase/'",RC_COUCHDB_2:"replicateCouchDB() did not get valid result with rows.",RC_OUTDATED:"Outdated client, update required. Replication was canceled",RC_UNAUTHORIZED:"Unauthorized client, update the replicationState.headers to set correct auth data",RC_FORBIDDEN:"Client behaves wrong so the replication was canceled. Mostly happens if the client tries to write data that it is not allowed to",SC1:"fieldnames do not match the regex",SC2:"SchemaCheck: name 'item' reserved for array-fields",SC3:"SchemaCheck: fieldname has a ref-array but items-type is not string",SC4:"SchemaCheck: fieldname has a ref but is not type string, [string,null] or array<string>",SC6:"SchemaCheck: primary can only be defined at top-level",SC7:"SchemaCheck: default-values can only be defined at top-level",SC8:"SchemaCheck: first level-fields cannot start with underscore _",SC10:"SchemaCheck: schema defines ._rev, this will be done automatically",SC11:"SchemaCheck: schema needs a number >=0 as version",SC13:"SchemaCheck: primary is always index, do not declare it as index",SC14:"SchemaCheck: primary is always unique, do not declare it as index",SC15:"SchemaCheck: primary cannot be encrypted",SC16:"SchemaCheck: primary must have type: string",SC17:"SchemaCheck: top-level fieldname is not allowed",SC18:"SchemaCheck: indexes must be an array",SC19:"SchemaCheck: indexes must contain strings or arrays of strings",SC20:"SchemaCheck: indexes.array must contain strings",SC21:"SchemaCheck: given index is not defined in schema",SC22:"SchemaCheck: given indexKey is not type:string",SC23:"SchemaCheck: fieldname is not allowed",SC24:"SchemaCheck: required fields must be set via array. See https://spacetelescope.github.io/understanding-json-schema/reference/object.html#required",SC25:"SchemaCheck: compoundIndexes needs to be specified in the indexes field",SC26:"SchemaCheck: indexes needs to be specified at collection schema level",SC27:"SchemaCheck: encrypted fields need to be specified at collection schema level",SC28:"SchemaCheck: encrypted fields is not defined in the schema",SC29:"SchemaCheck: missing object key 'properties'",SC30:"SchemaCheck: primaryKey is required",SC32:"SchemaCheck: primary field must have the type string/number/integer",SC33:"SchemaCheck: used primary key is not a property in the schema",SC34:"Fields of type string that are used in an index, must have set the maxLength attribute in the schema",SC35:"Fields of type number/integer that are used in an index, must have set the multipleOf attribute in the schema",SC36:"A field of this type cannot be used as index",SC37:"Fields of type number that are used in an index, must have set the minimum and maximum attribute in the schema",SC38:"Fields of type boolean that are used in an index, must be required in the schema",SC39:"The primary key must have the maxLength attribute set",SC40:"$ref fields in the schema are not allowed. RxDB cannot resolve related schemas because it would have a negative performance impact.It would have to run http requests on runtime. $ref fields should be resolved during build time.",SC41:"minimum, maximum and maxLength values for indexes must be real numbers, not Infinity or -Infinity",VD1:"Sub-schema not found, does the schemaPath exists in your schema?",VD2:"object does not match schema",S1:"You cannot create collections after calling RxDatabase.server()",GQL1:"GraphQL replication: cannot find sub schema by key",GQL3:"GraphQL replication: pull returns more documents then batchSize",CRDT1:"CRDT operations cannot be used because the crdt options are not set in the schema.",CRDT2:"RxDocument.incrementalModify() cannot be used when CRDTs are activated.",CRDT3:"To use CRDTs you MUST NOT set a conflictHandler because the default CRDT conflict handler must be used",SNH:"This should never happen"};var eh;function kb(){if(!eh){var t=new Qa,e=Object.getOwnPropertyNames(t),r=Object.getOwnPropertyNames(Object.getPrototypeOf(t));eh=[...e,...r]}return eh}var rh;function Ab(){if(!rh){var t=new Ya("pseudoInstance","memory"),e=Object.getOwnPropertyNames(t),r=Object.getOwnPropertyNames(Object.getPrototypeOf(t));rh=[...e,...r],t.destroy()}return rh}var VR=Cl(Wn),qR=new VR,nh;function Nl(){if(!nh){var t=["deleted","synced"],e=Object.getOwnPropertyNames(qR),r=Object.getOwnPropertyNames(Wn);nh=[...e,...r,...t]}return nh}function HR(t){if(t!=="_deleted"){if(["properties"].includes(t))throw L("SC23",{fieldName:t});var e="^[a-zA-Z](?:[[a-zA-Z0-9_]*]?[a-zA-Z0-9])?$",r=new RegExp(e);if(t!=="_id"&&!t.match(r))throw L("SC1",{regex:e,fieldName:t})}}function WR(t){var e=ve(t.primaryKey);function r(i,o,s){if(typeof i=="string"&&typeof o=="object"&&!Array.isArray(o)&&s.split(".").pop()!=="patternProperties"&&HR(i),Object.prototype.hasOwnProperty.call(o,"item")&&o.type!=="array")throw L("SC2",{fieldName:i});if(Object.prototype.hasOwnProperty.call(o,"required")&&typeof o.required=="boolean")throw L("SC24",{fieldName:i});if(Object.prototype.hasOwnProperty.call(o,"$ref"))throw L("SC40",{fieldName:i});if(Object.prototype.hasOwnProperty.call(o,"ref"))if(Array.isArray(o.type)){if(o.type.length>2||!o.type.includes("string")||!o.type.includes("null"))throw L("SC4",{fieldName:i})}else switch(o.type){case"string":break;case"array":if(!o.items||!o.items.type||o.items.type!=="string")throw L("SC3",{fieldName:i});break;default:throw L("SC4",{fieldName:i})}var l=s.split(".").length>=2;if(l&&o.default)throw L("SC7",{path:s});if(!l){if(i==="_id"&&e!=="_id")throw L("COL2",{fieldName:i});if(i.charAt(0)==="_"){if(i==="_id"||i==="_deleted")return;throw L("SC8",{fieldName:i})}}}function n(i,o){!i||typeof i!="object"||Object.keys(i).forEach(s=>{var l=i[s];!i.properties&&l&&typeof l=="object"&&!Array.isArray(i)&&r(s,l,o);var d=o;s!=="properties"&&(d=d+"."+s),n(l,d)})}return n(t,""),!0}function KR(t){if(!t.primaryKey)throw L("SC30",{schema:t});function e(d){if(!d)throw L("SC33",{schema:t});var p=d.type;if(!p||!["string","number","integer"].includes(p))throw L("SC32",{schema:t,args:{schemaPart:d}})}if(typeof t.primaryKey=="string"){var r=t.primaryKey,n=t.properties[r];e(n)}else{var i=t.primaryKey,o=Le(t,i.key);e(o),i.fields.forEach(d=>{var p=Le(t,d);e(p)})}var s=ve(t.primaryKey),l=t.properties[s];if(l.maxLength){if(!isFinite(l.maxLength))throw L("SC41",{schema:t,args:{primaryPathSchemaPart:l}})}else throw L("SC39",{schema:t,args:{primaryPathSchemaPart:l}})}function Ib(t){for(var e=t.split("."),r="",n=0;n<e.length;n+=1)e[n]!=="[]"?r=r.concat(".properties.".concat(e[n])):r=r.concat(".items");return br(r)}function Tb(t){if(!t.primaryKey)throw L("SC30",{schema:t});if(!Object.prototype.hasOwnProperty.call(t,"properties"))throw L("SC29",{schema:t});if(t.properties._rev)throw L("SC10",{schema:t});if(!Object.prototype.hasOwnProperty.call(t,"version")||typeof t.version!="number"||t.version<0)throw L("SC11",{version:t.version});if(WR(t),KR(t),Object.keys(t.properties).forEach(e=>{var r=t.properties[e];if(e===t.primaryKey){if(t.indexes&&t.indexes.includes(e))throw L("SC13",{value:r,schema:t});if(r.unique)throw L("SC14",{value:r,schema:t});if(t.encrypted&&t.encrypted.includes(e))throw L("SC15",{value:r,schema:t});if(r.type!=="string")throw L("SC16",{value:r,schema:t})}if(Nl().includes(e))throw L("SC17",{key:e,schema:t})}),t.indexes){if(!Br(t.indexes))throw L("SC18",{indexes:t.indexes,schema:t});t.indexes.forEach(e=>{if(!(typeof e=="string"||Array.isArray(e)))throw L("SC19",{index:e,schema:t});if(Array.isArray(e)){for(var r=0;r<e.length;r+=1)if(typeof e[r]!="string")throw L("SC20",{index:e,schema:t})}var n=Br(e)?e:[e];n.forEach(i=>{var o=Le(t,i),s=o.type;switch(s){case"string":var l=o.maxLength;if(!l)throw L("SC34",{index:e,field:i,schema:t});break;case"number":case"integer":var d=o.multipleOf;if(!d)throw L("SC35",{index:e,field:i,schema:t});var p=o.maximum,m=o.minimum;if(typeof p>"u"||typeof m>"u")throw L("SC37",{index:e,field:i,schema:t});if(!isFinite(p)||!isFinite(m))throw L("SC41",{index:e,field:i,schema:t});break;case"boolean":var y="",S=i;if(i.includes(".")){var D=i.split(".");S=D.pop(),y=D.join(".")}var M=y===""?t:Le(t,y);if(!M.required||!M.required.includes(S))throw L("SC38",{index:e,field:i,schema:t});break;default:throw L("SC36",{fieldName:i,type:o.type,schema:t})}})})}Object.keys(kc(t)).map(e=>{var r=e.split(".");return r.pop(),r.join(".")}).filter(e=>e!=="").filter((e,r,n)=>n.indexOf(e)===r).filter(e=>{var r=Ne(t,e);return r&&!!r.index}).forEach(e=>{throw e=e.replace("properties.",""),e=e.replace(/\.properties\./g,"."),L("SC26",{index:br(e),schema:t})}),(t.indexes||[]).reduce((e,r)=>(Br(r)?yr(e,r):e.push(r),e),[]).filter((e,r,n)=>n.indexOf(e)===r).map(e=>{var r=Ib(e),n=Ne(t,r);if(!n||typeof n!="object")throw L("SC21",{index:e,schema:t});return{indexPath:e,schemaObj:n}}).filter(e=>e.schemaObj.type!=="string"&&e.schemaObj.type!=="integer"&&e.schemaObj.type!=="number"&&e.schemaObj.type!=="boolean").forEach(e=>{throw L("SC22",{key:e.indexPath,type:e.schemaObj.type,schema:t})}),Object.keys(kc(t)).map(e=>{var r=e.split(".");return r.pop(),r.join(".")}).filter(e=>e!==""&&e!=="attachments").filter((e,r,n)=>n.indexOf(e)===r).filter(e=>{var r=Ne(t,e);return r&&!!r.encrypted}).forEach(e=>{throw e=e.replace("properties.",""),e=e.replace(/\.properties\./g,"."),L("SC27",{index:br(e),schema:t})}),t.encrypted&&t.encrypted.forEach(e=>{var r=Ib(e),n=Ne(t,r);if(!n||typeof n!="object")throw L("SC28",{field:e,schema:t})})}function Ll(t){t&&Object.entries(t).forEach(([e,r])=>{if(typeof e!="string")throw ue("COL14",{name:e});if(e.startsWith("_"))throw ue("COL15",{name:e});if(typeof r!="function")throw ue("COL16",{name:e,type:typeof e});if(kb().includes(e)||Nl().includes(e))throw L("COL17",{name:e})})}function Pb(t,e){var r=Object.keys(t.properties);e&&Object.keys(e).filter(n=>r.includes(n)).forEach(n=>{throw L("COL18",{funName:n})})}function Mb(t,e){if(typeof e!="object"||Array.isArray(e))throw ue("COL11",{schema:t});var r=hv(t);if(r.length!==Object.keys(e).length)throw L("COL12",{have:Object.keys(e),should:r});return r.map(n=>({v:n,s:e[n+1]})).filter(n=>typeof n.s!="function").forEach(n=>{throw ue("COL13",{version:n.v,type:typeof n,schema:t})}),!0}function Nb(t){if(Ab().includes(t.name))throw L("DB5",{name:t.name});Bb(t.name)}function Lb(t){if(Bb(t.name),t.name.includes("$"))throw L("DB13",{name:t.name});if(qd(t.name)&&(t.name.endsWith("/")||t.name.endsWith("\\")))throw L("DB11",{name:t.name})}var $b="^[a-z][_$a-z0-9\\-]*$",GR=new RegExp($b);function Bb(t){if(typeof t!="string"||t.length===0)throw ue("UT1",{name:t});if(qd(t))return!0;if(!t.match(GR)&&t!==":memory:")throw L("UT2",{regex:$b,givenName:t});return!0}function Fb(t){var e=Object.prototype.toString.call(t.queryObj)==="[object Object]";if(!e)throw ue("QU11",{op:t.op,collection:t.collection.name,queryObj:t.queryObj});var r=["selector","limit","skip","sort","index"];if(Object.keys(t.queryObj).forEach(n=>{if(!r.includes(n))throw ue("QU11",{op:t.op,collection:t.collection.name,queryObj:t.queryObj,key:n,args:{validKeys:r}})}),t.op==="count"&&(t.queryObj.limit||t.queryObj.skip))throw L("QU15",{collection:t.collection.name,query:t.queryObj});$l(t.queryObj)}function jb(t){var e=t.rxQuery.collection.schema.jsonSchema,r=t.mangoQuery.selector,n=Object.keys(e.properties);Object.keys(r).filter(l=>!l.startsWith("$")).filter(l=>!l.includes(".")).forEach(l=>{if(!n.includes(l))throw L("QU13",{schema:e,field:l,query:t.mangoQuery})});var i=e.indexes?e.indexes:[],o=t.mangoQuery.index;if(o){var s=i.find(l=>Bn(l,o));if(!s)throw L("QU12",{collection:t.rxQuery.collection.name,query:t.mangoQuery,schema:e})}if(t.rxQuery.op==="count"&&!QR(t.rxQuery.collection.schema.jsonSchema,t.mangoQuery)&&!t.rxQuery.collection.database.allowSlowCount)throw L("QU14",{collection:t.rxQuery.collection,query:t.mangoQuery});t.mangoQuery.sort&&t.mangoQuery.sort.map(l=>Object.keys(l)[0]).filter(l=>!l.includes(".")).forEach(l=>{if(!n.includes(l))throw L("QU13",{schema:e,field:l,query:t.mangoQuery})}),$l(t.mangoQuery)}function QR(t,e){var r=Ka(t,e);return r.queryPlan.selectorSatisfiedByIndex}function $l(t){if(!(typeof t!="object"||t===null)){var e=Object.keys(t);e.forEach(r=>{var n=t[r];if(n instanceof RegExp)throw L("QU16",{field:r,query:t});Array.isArray(n)?n.forEach(i=>$l(i)):$l(n)})}}function Ub(t,e){if(!t)throw L("DOC20",{primaryKey:t,document:e});if(t!==t.trim())throw L("DOC21",{primaryKey:t,document:e});if(t.includes("\r")||t.includes(`
`))throw L("DOC22",{primaryKey:t,document:e});if(t.includes('"'))throw L("DOC23",{primaryKey:t,document:e})}function zb(t){if(typeof t!="object"||t===null)return!1;for(var e in t)if(t.hasOwnProperty(e)&&(t[e]instanceof Date||typeof t[e]=="object"&&zb(t[e])))return!0;return!1}function Vb(t,e){var r=ve(t.schema.primaryKey),n=function(o){o.document=Lc(r,t.schema,o.document),o.previous&&Object.keys(o.previous._meta).forEach(s=>{if(!Object.prototype.hasOwnProperty.call(o.document._meta,s))throw L("SNH",{dataBefore:o.previous,dataAfter:o.document,args:{metaFieldName:s}})});try{typeof structuredClone=="function"?structuredClone(o):JSON.parse(JSON.stringify(o))}catch{throw L("DOC24",{collection:t.collectionName,document:o.document})}if(zb(o.document))throw L("DOC24",{collection:t.collectionName,document:o.document})};for(var i of e)n(i)}var qb=!1;function Hb(t){return U(this,null,function*(){if(!(qb||typeof window>"u"||typeof location>"u")&&!(jn.premium&&typeof jn.premium=="string"&&(yield vo(jn.premium))===Pc)){qb=!0;var e=document.createElement("iframe");e.style.visibility="hidden",e.width="1px",e.height="1px",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.opacity="0.1",e.src="https://rxdb.info/html/dev-mode-iframe.html?version="+Oi,document.body.appendChild(e)}})}var YR=!0;function XR(t){return!t||typeof t=="string"||typeof t=="number"?t:Fd(t)}var ZR="dev-mode",Wb={name:ZR,rxdb:!0,init:()=>{YR&&console.warn(["-------------- RxDB dev-mode warning -------------------------------","you are seeing this because you use the RxDB dev-mode plugin https://rxdb.info/dev-mode.html?console=dev-mode ","This is great in development mode, because it will run many checks to ensure","that you use RxDB correct. If you see this in production mode,","you did something wrong because the dev-mode plugin will decrease the performance.","","\u{1F917} Hint: To get the most out of RxDB, check out the Premium Plugins","to get access to faster storages and more professional features: https://rxdb.info/premium?console=dev-mode ","","You can disable this warning by calling disableWarnings() from the dev-mode plugin.","---------------------------------------------------------------------"].join(`
`))},overwritable:{isDevMode(){return!0},deepFreezeWhenDevMode:XR,tunnelErrorMessage(t){if(!th[t])throw console.error("RxDB: Error-Code not known: "+t),new Error("Error-Code "+t+" not known, contact the maintainer");return th[t]}},hooks:{preCreateRxSchema:{after:Tb},preCreateRxDatabase:{after:function(t){Lb(t)}},createRxDatabase:{after:function(t){return U(this,null,function*(){Hb(t.database)})}},preCreateRxCollection:{after:function(t){if(Nb(t),Pb(t.schema,t.methods),t.name.charAt(0)==="_")throw L("DB2",{name:t.name});if(!t.schema)throw L("DB4",{name:t.name,args:t})}},createRxDocument:{before:function(t){Ub(t.primary,t.toJSON(!0))}},preCreateRxQuery:{after:function(t){Fb(t)}},prePrepareQuery:{after:t=>{jb(t)}},preStorageWrite:{before:t=>{Vb(t.storageInstance,t.rows)}},createRxCollection:{after:t=>{Ll(t.creator.statics),Ll(t.creator.methods),Ll(t.creator.attachments),t.creator.schema&&t.creator.migrationStrategies&&Mb(t.creator.schema,t.creator.migrationStrategies)}}}};var Bl=bx(Kb(),1),Gb=Symbol.for("Dexie"),Ja=globalThis[Gb]||(globalThis[Gb]=Bl.default);if(Bl.default.semVer!==Ja.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Bl.default.semVer} and ${Ja.semVer}`);var{liveQuery:b8,mergeRanges:_8,rangesOverlap:x8,RangeSet:w8,cmp:C8,Entity:S8,PropModSymbol:R8,PropModification:O8,replacePrefix:E8,add:D8,remove:k8}=Ja;var ts="docs",JR="changes",Qb="attachments",jl="dexie",Yb=new Map,Fl=new Map;function Xb(t,e,r,n){var i="rxdb-dexie-"+t+"--"+n.version+"--"+e,o=We(Yb,i,()=>{var s=U(null,null,function*(){var l=kt(r);l.autoOpen=!1;var d=new Ja(i,l),p={[ts]:tO(n),[JR]:"++sequence, id",[Qb]:"id"};return d.version(1).stores(p),yield d.open(),{dexieDb:d,dexieTable:d[ts],dexieAttachmentsTable:d[Qb],booleanIndexes:eO(n)}});return Yb.set(i,o),Fl.set(o,0),s});return o}function Zb(t){return U(this,null,function*(){var e=yield t,r=Fl.get(t),n=r-1;n===0?(e.dexieDb.close(),Fl.delete(t)):Fl.set(t,n)})}var ah="__";function Ti(t){var e=t.split(".");if(e.length>1)return e.map(n=>Ti(n)).join(".");if(t.startsWith("|")){var r=t.substring(1);return ah+r}else return t}function Jb(t){var e=t.split(".");if(e.length>1)return e.map(n=>Jb(n)).join(".");if(t.startsWith(ah)){var r=t.substring(ah.length);return"|"+r}else return t}function t_(t,e){if(!e)return e;var r=kt(e);return r=sh(r),t.forEach(n=>{var i=Ne(e,n),o=i?"1":"0",s=Ti(n);Kd(r,s,o)}),r}function lh(t,e){return e&&(e=kt(e),e=ch(e),t.forEach(r=>{var n=Ne(e,r),i=n==="1";Kd(e,r,i)}),e)}function sh(t){if(!t||typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(r=>sh(r));if(typeof t=="object"){var e={};return Object.entries(t).forEach(([r,n])=>{typeof n=="object"&&(n=sh(n)),e[Ti(r)]=n}),e}}function ch(t){if(!t||typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(r=>ch(r));if(typeof t=="object"){var e={};return Object.entries(t).forEach(([r,n])=>{(typeof n=="object"||Array.isArray(t))&&(n=ch(n)),e[Jb(r)]=n}),e}}function tO(t){var e=[],r=ve(t.primaryKey);e.push([r]),e.push(["_deleted",r]),t.indexes&&t.indexes.forEach(o=>{var s=Pa(o);e.push(s)}),e.push(["_meta.lwt",r]),e.push(["_meta.lwt"]),e=e.map(o=>o.map(s=>Ti(s)));var n=e.map(o=>o.length===1?o[0]:"["+o.join("+")+"]");n=n.filter((o,s,l)=>l.indexOf(o)===s);var i=n.join(", ");return i}function uh(t,e){return U(this,null,function*(){var r=yield t,n=yield r.dexieTable.bulkGet(e);return n.map(i=>lh(r.booleanIndexes,i))})}function es(t,e){return t+"||"+e}function eO(t){var e=new Set,r=[];return t.indexes?(t.indexes.forEach(n=>{var i=Pa(n);i.forEach(o=>{if(!e.has(o)){e.add(o);var s=Le(t,o);s.type==="boolean"&&r.push(o)}})}),r.push("_deleted"),Fg(r)):r}function e_(t){return t===Di?-1/0:t}function r_(t,e,r){if(t.includes(e)){var n=r===Ei||r===!0?"1":"0";return n}else return r}function n_(t,e,r){if(!r){if(typeof window>"u")throw new Error("IDBKeyRange missing");r=window.IDBKeyRange}var n=e.startKeys.map((s,l)=>{var d=e.index[l];return r_(t,d,s)}).map(e_),i=e.endKeys.map((s,l)=>{var d=e.index[l];return r_(t,d,s)}).map(e_),o=r.bound(n,i,!e.inclusiveStart,!e.inclusiveEnd);return o}function dh(t,e){return U(this,null,function*(){var r=yield t.internals,n=e.query,i=n.skip?n.skip:0,o=n.limit?n.limit:1/0,s=i+o,l=e.queryPlan,d=!1;l.selectorSatisfiedByIndex||(d=Eo(t.schema,e.query));var p=n_(r.booleanIndexes,l,r.dexieDb._options.IDBKeyRange),m=l.index,y=[];if(yield r.dexieDb.transaction("r",r.dexieTable,D=>U(null,null,function*(){var M=D.idbtrans,j=M.objectStore(ts),G,J;J="["+m.map(tt=>Ti(tt)).join("+")+"]",G=j.index(J);var rt=G.openCursor(p);yield new Promise(tt=>{rt.onsuccess=function(At){var st=At.target.result;if(st){var Pt=lh(r.booleanIndexes,st.value);(!d||d(Pt))&&y.push(Pt),l.sortSatisfiedByIndex&&y.length===s?tt():st.continue()}else tt()}})})),!l.sortSatisfiedByIndex){var S=_l(t.schema,e.query);y=y.sort(S)}return y=y.slice(i,s),{documents:y}})}function i_(t,e){return U(this,null,function*(){var r=yield t.internals,n=e.queryPlan,i=n.index,o=n_(r.booleanIndexes,n,r.dexieDb._options.IDBKeyRange),s=-1;return yield r.dexieDb.transaction("r",r.dexieTable,l=>U(null,null,function*(){var d=l.idbtrans,p=d.objectStore(ts),m,y;y="["+i.map(D=>Ti(D)).join("+")+"]",m=p.index(y);var S=m.count(o);s=yield new Promise((D,M)=>{S.onsuccess=function(){D(S.result)},S.onerror=j=>M(j)})})),s})}var rO=ie(),fh=!1,nO=function(){function t(r,n,i,o,s,l,d,p){this.changes$=new at,this.instanceId=rO++,this.storage=r,this.databaseName=n,this.collectionName=i,this.schema=o,this.internals=s,this.options=l,this.settings=d,this.devMode=p,this.primaryPath=ve(this.schema.primaryKey)}var e=t.prototype;return e.bulkWrite=function(n,i){return U(this,null,function*(){Pi(this),!fh&&(!jn.premium||typeof jn.premium!="string"||(yield vo(jn.premium))!==Pc)&&console.warn(["-------------- RxDB Open Core RxStorage -------------------------------","You are using the free Dexie.js based RxStorage implementation from RxDB https://rxdb.info/rx-storage-dexie.html?console=dexie ","While this is a great option, we want to let you know that there are faster storage solutions available in our premium plugins.","For professional users and production environments, we highly recommend considering these premium options to enhance performance and reliability."," https://rxdb.info/premium?console=dexie ","If you already purchased premium access you can disable this log by calling the setPremiumFlag() function from rxdb-premium/plugins/shared.","---------------------------------------------------------------------"].join(`
`)),fh=!0,n.forEach(m=>{if(!m.document._rev||m.previous&&!m.previous._rev)throw L("SNH",{args:{row:m}})});var o=yield this.internals,s={error:[]};this.devMode&&(n=n.map(m=>{var y=Ii(m.document);return{previous:m.previous,document:y}}));var l=n.map(m=>m.document[this.primaryPath]),d;if(yield o.dexieDb.transaction("rw",o.dexieTable,o.dexieAttachmentsTable,()=>U(this,null,function*(){var m=new Map,y=yield uh(this.internals,l);y.forEach(M=>{var j=M;return j&&m.set(j[this.primaryPath],j),j}),d=$y(this,this.primaryPath,m,n,i),s.error=d.errors;var S=[];d.bulkInsertDocs.forEach(M=>{S.push(M.document)}),d.bulkUpdateDocs.forEach(M=>{S.push(M.document)}),S=S.map(M=>t_(o.booleanIndexes,M)),S.length>0&&(yield o.dexieTable.bulkPut(S));var D=[];d.attachmentsAdd.forEach(M=>{D.push({id:es(M.documentId,M.attachmentId),data:M.attachmentData.data})}),d.attachmentsUpdate.forEach(M=>{D.push({id:es(M.documentId,M.attachmentId),data:M.attachmentData.data})}),yield o.dexieAttachmentsTable.bulkPut(D),yield o.dexieAttachmentsTable.bulkDelete(d.attachmentsRemove.map(M=>es(M.documentId,M.attachmentId)))})),d=Et(d),d.eventBulk.events.length>0){var p=Et(d.newestRow).document;d.eventBulk.checkpoint={id:p[this.primaryPath],lwt:p._meta.lwt},d.eventBulk.endTime=ie(),this.changes$.next(d.eventBulk)}return s})},e.findDocumentsById=function(n,i){return U(this,null,function*(){Pi(this);var o=yield this.internals,s=[];return yield o.dexieDb.transaction("r",o.dexieTable,()=>U(this,null,function*(){var l=yield uh(this.internals,n);l.forEach(d=>{d&&(!d._deleted||i)&&s.push(d)})})),s})},e.query=function(n){return Pi(this),dh(this,n)},e.count=function(n){return U(this,null,function*(){if(n.queryPlan.selectorSatisfiedByIndex){var i=yield i_(this,n);return{count:i,mode:"fast"}}else{var o=yield dh(this,n);return{count:o.documents.length,mode:"slow"}}})},e.changeStream=function(){return Pi(this),this.changes$.asObservable()},e.cleanup=function(n){return U(this,null,function*(){Pi(this);var i=yield this.internals;return yield i.dexieDb.transaction("rw",i.dexieTable,()=>U(this,null,function*(){var o=ie()-n,s=yield i.dexieTable.where("_meta.lwt").below(o).toArray(),l=[];s.forEach(d=>{d._deleted==="1"&&l.push(d[this.primaryPath])}),yield i.dexieTable.bulkDelete(l)})),!0})},e.getAttachmentData=function(n,i,o){return U(this,null,function*(){Pi(this);var s=yield this.internals,l=es(n,i);return yield s.dexieDb.transaction("r",s.dexieAttachmentsTable,()=>U(this,null,function*(){var d=yield s.dexieAttachmentsTable.get(l);if(d)return d.data;throw new Error("attachment missing documentId: "+n+" attachmentId: "+i)}))})},e.remove=function(){return U(this,null,function*(){Pi(this);var n=yield this.internals;return yield n.dexieTable.clear(),this.close()})},e.close=function(){return this.closed?this.closed:(this.closed=U(this,null,function*(){this.changes$.complete(),yield Zb(this.internals)}),this.closed)},e.conflictResultionTasks=function(){return new at},e.resolveConflictResultionTask=function(n){return U(this,null,function*(){})},t}();function o_(t,e,r){return U(this,null,function*(){var n=Xb(e.databaseName,e.collectionName,r,e.schema),i=new nO(t,e.databaseName,e.collectionName,e.schema,n,e.options,r,e.devMode);return yield Db(jl,e,i),Promise.resolve(i)})}function Pi(t){if(t.closed)throw new Error("RxStorageInstanceDexie is closed "+t.databaseName+"-"+t.collectionName)}var iO=function(){function t(r){this.name=jl,this.rxdbVersion=Oi,this.settings=r}var e=t.prototype;return e.createStorageInstance=function(n){return Fy(n),o_(this,n,this.settings)},t}();function a_(t={}){var e=new iO(t);return e}var hh={};Ls(hh,{$all:()=>iS,$and:()=>Of,$bitsAllClear:()=>s_,$bitsAllSet:()=>c_,$bitsAnyClear:()=>l_,$bitsAnySet:()=>u_,$elemMatch:()=>If,$eq:()=>fl,$exists:()=>Pf,$expr:()=>eS,$gt:()=>hl,$gte:()=>pl,$in:()=>ml,$jsonSchema:()=>rS,$lt:()=>gl,$lte:()=>vl,$mod:()=>kf,$ne:()=>yl,$nin:()=>bl,$nor:()=>Ef,$not:()=>Df,$or:()=>qa,$regex:()=>Af,$size:()=>Tf,$type:()=>Mf,$where:()=>nS});var Gn=t=>St((e,r,n)=>{let i=0;if(r instanceof Array)for(let o of r)i=i|1<<o;else i=r;return t(e&i,i)});var s_=Gn((t,e)=>t==0);var c_=Gn((t,e)=>t==e);var l_=Gn((t,e)=>t<e);var u_=Gn((t,e)=>t>0);var Ul={};Ls(Ul,{$addToSet:()=>aO,$bit:()=>cO,$currentDate:()=>lO,$inc:()=>uO,$max:()=>dO,$min:()=>fO,$mul:()=>hO,$pop:()=>pO,$pull:()=>ph,$pullAll:()=>mO,$push:()=>vO,$rename:()=>yO,$set:()=>mh,$unset:()=>bO});var To=(t,e)=>{switch(t){case"deep":return Co(e);case"copy":return qn(e)?new Date(e):ot(e)?[...e]:ft(e)?F({},e):e;default:return e}},oO=/^[a-z]+[a-zA-Z0-9]*$/;function d_(t){if(!t.includes(".$"))return[{parent:t,selector:t},[]];let e=t.indexOf(".$"),r=t.indexOf("]"),n=t.substring(0,e),i=t.substring(e+3,r);z(i===""||oO.test(i),"The filter <identifier> must begin with a lowercase letter and contain only alphanumeric characters.");let o=t.substring(r+2),[s,l]=o?d_(o):[];return[{selector:t,parent:n,child:i||"$",next:s},[i,...l||[]].filter(Boolean)]}var Mt=(t,e,r,n,i)=>{let{parent:o,child:s,next:l}=e;if(!s){let p=!1;return xo(t,o,(y,S)=>p=!!n(y,S)||p,i),p}let d=Te(t,o);return ot(d)?d.map((p,m)=>r[s]&&!r[s].test({[s]:p})?!1:l?Mt(p,l,r,n,i):n(d,m)).some(Boolean):!1};function Bt(t,e,r,n){let i=[];for(let[o,s]of Object.entries(t)){let[l,d]=d_(o);if(!d.length)n(s,l,{})&&i.push(l.parent);else{let p={};e.forEach(y=>{Object.keys(y).forEach(S=>{d.forEach(D=>{(S===D||S.startsWith(D+"."))&&(p[D]=p[D]||{},Object.assign(p[D],{[S]:y[S]}))})})});let m={};for(let[y,S]of Object.entries(p))m[y]=new ee(S,r.queryOptions);n(s,l,m)&&i.push(l.parent)}}return i}var aO=(t,e,r=[],n={})=>Bt(e,r,n,(i,o,s)=>{let l={$each:[i]};return ft(i)&&Vt(i,"$each")&&Object.assign(l,i),Mt(t,o,s,(d,p)=>{let m=d[p]||=[];return ln([m,l.$each]).length===l.$each.length?!1:(d[p]=To(n.cloneMode,ja(m.concat(l.$each))),!0)},{buildGraph:!0})});var sO=new Set(["and","or","xor"]),cO=(t,e,r=[],n={})=>Bt(e,r,n,(i,o,s)=>{let l=Object.keys(i);return z(l.length===1&&sO.has(l[0]),`Invalid bit operator '${l[0]}'. Must be one of 'and', 'or', or 'xor'.`),Mt(t,o,s,(d,p)=>{let m=d[p],y=i[l[0]];if(m!==void 0&&!(ht(m)&&ht(y)))return!1;switch(m=m||0,l[0]){case"and":d[p]=m&y;break;case"or":d[p]=m|y;break;case"xor":d[p]=m^y;break}return d[p]!==m},{buildGraph:!0})});var lO=(t,e,r=[],n={})=>{let i=Date.now();return Bt(e,r,n,(o,s,l)=>Mt(t,s,l,(d,p)=>(d[p]=i,!0),{buildGraph:!0}))};var uO=(t,e,r=[],n={})=>Bt(e,r,n,(i,o,s)=>{if(!o.child){let l=Te(t,o.parent);z(l===void 0||ht(l),"cannot apply $inc to a value of non-numeric type")}return Mt(t,o,s,(l,d)=>(l[d]=(l[d]||=0)+i,!0),{buildGraph:!0})});var dO=(t,e,r=[],n={})=>Bt(e,r,n,(i,o,s)=>Mt(t,o,s,(l,d)=>l[d]!==void 0&&Lt(l[d],i)>-1?!1:(l[d]=i,!0),{buildGraph:!0}));var fO=(t,e,r=[],n={})=>Bt(e,r,n,(i,o,s)=>Mt(t,o,s,(l,d)=>l[d]!==void 0&&Lt(l[d],i)<1?!1:(l[d]=i,!0),{buildGraph:!0}));var hO=(t,e,r=[],n={})=>Bt(e,r,n,(i,o,s)=>Mt(t,o,s,(l,d)=>{let p=l[d];return l[d]=l[d]===void 0?0:l[d]*i,l[d]!==p},{buildGraph:!0}));var pO=(t,e,r=[],n={})=>Bt(e,r,n,(i,o,s)=>Mt(t,o,s,(l,d)=>{let p=l[d];return z(ot(p),`path '${o.selector}' contains an element of non-array type.`),p.length?(i===-1?p.splice(0,1):p.pop(),!0):!1}));var ph=(t,e,r=[],n={})=>Bt(e,r,n,(i,o,s)=>{let l=!ft(i)||Object.keys(i).some(Ge),d=new ee(l?{k:i}:i,n.queryOptions),p=l?m=>d.test({k:m}):m=>d.test(m);return Mt(t,o,s,(m,y)=>{let S=m[y],D=new Array;return S.map(j=>{let G=p(j);return G||D.push(j),G}).some(Boolean)?(m[y]=D,!0):!1})});var mO=(t,e,r=[],n={})=>{let i={};return Object.entries(e).forEach(([o,s])=>{i[o]={$in:s}}),ph(t,i,r,n)};var gO=Object.freeze(["$each","$slice","$sort","$position"]),vO=(t,e,r=[],n={})=>Bt(e,r,n,(i,o,s)=>{let l={$each:[i]};return ft(i)&&gO.some(d=>Vt(i,d))&&Object.assign(l,i),Mt(t,o,s,(d,p)=>{let m=d[p]||=[],y=m.slice(0,l.$slice||m.length),S=m.length,D=ht(l.$position)?l.$position:m.length;if(m.splice(D,0,...To(n.cloneMode,l.$each)),l.$sort){let M=ft(l.$sort)?Object.keys(l.$sort||{}).pop():"",j=M?l.$sort[M]:l.$sort,G=M?J=>Te(J,M):J=>J;m.sort((J,rt)=>j*Lt(G(J),G(rt)))}return ht(l.$slice)&&(l.$slice<0?m.splice(0,m.length+l.$slice):m.splice(l.$slice)),S!=m.length||!ye(y,m)},{descendArray:!0,buildGraph:!0})});var mh=(t,e,r=[],n={})=>Bt(e,r,n,(i,o,s)=>Mt(t,o,s,(l,d)=>ye(l[d],i)?!1:(l[d]=To(n.cloneMode,i),!0),{buildGraph:!0}));var yO=(t,e,r=[],n={})=>{let i=[],o=Bt(e,r,n,(s,l,d)=>Mt(t,l,d,(p,m)=>Vt(p,m)?(i.push(...mh(t,{[s]:p[m]},r,n)),delete p[m],!0):!1));return Array.from(new Set(o.concat(i)))};var bO=(t,e,r=[],n={})=>Bt(e,r,n,(i,o,s)=>Mt(t,o,s,(l,d)=>Vt(l,d)?(ot(l)?l[d]=null:delete l[d],!0):!1));function gh(t){return t=gt(F({},t),{queryOptions:un(t.queryOptions)}),t.queryOptions.context.addQueryOps(hh).addExpressionOps(wf).addExpressionOps(Cf),(e,r,n=[],i={},o={})=>{let s=Object.assign({cloneMode:"copy"},t,o);Object.assign(s,{queryOptions:un(Object.assign({useStrictMode:!1},s?.queryOptions))}),n=n||[],i=i||{};let l=Object.entries(r);z(l.length===1,"Update expression must contain only one operator.");let[d,p]=l[0];z(Vt(Ul,d),`Update operator '${d}' is not supported.`);let m=Ul[d];return Object.keys(i).length&&!(i instanceof ee?i:new ee(i,s.queryOptions)).test(e)?[]:m(e,p,n,s)}}var I9=gh({});var vh;function yh(t,e){if(!vh){var r=gh({cloneMode:"none"});vh=(n,i)=>{var o=or(n);return r(o,i),o}}return vh(t,e)}function _O(t){return this.incrementalModify(e=>{var r=yh(e,t);return r})}function xO(t){var e=this._data,r=yh(e,t);return this._saveData(r,e)}function wO(t){return U(this,null,function*(){return Hn(this.asRxQuery,e=>e.update(t))})}var f_={name:"update",rxdb:!0,prototypes:{RxDocument:t=>{t.update=xO,t.incrementalUpdate=_O},RxQuery:t=>{t.update=wO}}};var CO={title:"posts schema",version:0,type:"object",primaryKey:"id",properties:{id:{type:"string",primary:!0,maxLength:100},title:{type:"string"},body:{type:"string"}}};function SO(){return U(this,null,function*(){Il(Yy),Il(f_),Kp()&&Il(Wb)})}SO();var Q9=(()=>{let e=class e{constructor(){this.dataBaseReadySubj=new we(!1),this.dataBaseReady$=this.dataBaseReadySubj.asObservable()}getDatabaseCollection(n){if(!this.rxDatabase)throw new Error("Database is not initialized. Please make sure the database is initialized before getting the collection");return this.rxDatabase[n]}initDB(n){return U(this,null,function*(){return this.rxDatabase&&this.rxDatabase.name===n&&!this.rxDatabase.destroyed?this.rxDatabase:(this.rxDatabase=yield ib({name:n,storage:a_(),password:"myLongAndStupidPassword"}),yield this.rxDatabase.addCollections({posts:{schema:CO}}),this.dataBaseReadySubj.next(!0),this.rxDatabase)})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var J9=(()=>{let e=class e{constructor(){this.activePortal=new at,this.portal$=this.activePortal.asObservable()}setPortal(n){this.activePortal.next(n)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function rG(t){return t&&typeof t.connect=="function"&&!(t instanceof ci)}var RO=function(t){return t[t.REPLACED=0]="REPLACED",t[t.INSERTED=1]="INSERTED",t[t.MOVED=2]="MOVED",t[t.REMOVED=3]="REMOVED",t}(RO||{}),oG=new lt("_ViewRepeater");var OO=20,rs=(()=>{class t{_ngZone=k(qt);_platform=k(Re);_renderer=k(Zr).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new at;_scrolledCount=0;scrollContainers=new Map;register(r){this.scrollContainers.has(r)||this.scrollContainers.set(r,r.elementScrolled().subscribe(()=>this._scrolled.next(r)))}deregister(r){let n=this.scrollContainers.get(r);n&&(n.unsubscribe(),this.scrollContainers.delete(r))}scrolled(r=OO){return this._platform.isBrowser?new qi(n=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let i=r>0?this._scrolled.pipe(Lu(r)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):nt()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((r,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(r,n){let i=this.getAncestorScrollContainers(r);return this.scrolled(n).pipe(bt(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(r){let n=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,r)&&n.push(o)}),n}_scrollableContainsElement(r,n){let i=Xi(n),o=r.getElementRef().nativeElement;do if(i==o)return!0;while(i=i.parentElement);return!1}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),_h=(()=>{class t{elementRef=k(Yt);scrollDispatcher=k(rs);ngZone=k(qt);dir=k(En,{optional:!0});_scrollElement=this.elementRef.nativeElement;_destroyed=new at;_renderer=k(Dr);_cleanupScroll;_elementScrolled=new at;constructor(){}ngOnInit(){this._cleanupScroll=this.ngZone.runOutsideAngular(()=>this._renderer.listen(this._scrollElement,"scroll",r=>this._elementScrolled.next(r))),this.scrollDispatcher.register(this)}ngOnDestroy(){this._cleanupScroll?.(),this._elementScrolled.complete(),this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(r){let n=this.elementRef.nativeElement,i=this.dir&&this.dir.value=="rtl";r.left==null&&(r.left=i?r.end:r.start),r.right==null&&(r.right=i?r.start:r.end),r.bottom!=null&&(r.top=n.scrollHeight-n.clientHeight-r.bottom),i&&Ji()!=gr.NORMAL?(r.left!=null&&(r.right=n.scrollWidth-n.clientWidth-r.left),Ji()==gr.INVERTED?r.left=r.right:Ji()==gr.NEGATED&&(r.left=r.right?-r.right:r.right)):r.right!=null&&(r.left=n.scrollWidth-n.clientWidth-r.right),this._applyScrollToOptions(r)}_applyScrollToOptions(r){let n=this.elementRef.nativeElement;Qs()?n.scrollTo(r):(r.top!=null&&(n.scrollTop=r.top),r.left!=null&&(n.scrollLeft=r.left))}measureScrollOffset(r){let n="left",i="right",o=this.elementRef.nativeElement;if(r=="top")return o.scrollTop;if(r=="bottom")return o.scrollHeight-o.clientHeight-o.scrollTop;let s=this.dir&&this.dir.value=="rtl";return r=="start"?r=s?i:n:r=="end"&&(r=s?n:i),s&&Ji()==gr.INVERTED?r==n?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:s&&Ji()==gr.NEGATED?r==n?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:r==n?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return t})(),EO=20,Po=(()=>{class t{_platform=k(Re);_listeners;_viewportSize;_change=new at;_document=k(le,{optional:!0});constructor(){let r=k(qt),n=k(Zr).createRenderer(null,null);r.runOutsideAngular(()=>{if(this._platform.isBrowser){let i=o=>this._change.next(o);this._listeners=[n.listen("window","resize",i),n.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(r=>r()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let r={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),r}getViewportRect(){let r=this.getViewportScrollPosition(),{width:n,height:i}=this.getViewportSize();return{top:r.top,left:r.left,bottom:r.top+i,right:r.left+n,height:i,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let r=this._document,n=this._getWindow(),i=r.documentElement,o=i.getBoundingClientRect(),s=-o.top||r.body.scrollTop||n.scrollY||i.scrollTop||0,l=-o.left||r.body.scrollLeft||n.scrollX||i.scrollLeft||0;return{top:s,left:l}}change(r=EO){return r>0?this._change.pipe(Lu(r)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let r=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:r.innerWidth,height:r.innerHeight}:{width:0,height:0}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var bh=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Xt({type:t});static \u0275inj=Qt({})}return t})(),xh=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Xt({type:t});static \u0275inj=Qt({imports:[la,bh,la,bh]})}return t})();var h_=Qs();function No(t){return new zl(t.get(Po),t.get(le))}var zl=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,r){this._viewportRuler=e,this._document=r}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Zt(-this._previousScrollPosition.left),e.style.top=Zt(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,r=this._document.body,n=e.style,i=r.style,o=n.scrollBehavior||"",s=i.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),h_&&(n.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),h_&&(n.scrollBehavior=o,i.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let r=this._document.documentElement,n=this._viewportRuler.getViewportSize();return r.scrollHeight>n.height||r.scrollWidth>n.width}};function __(t,e){return new Vl(t.get(rs),t.get(qt),t.get(Po),e)}var Vl=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,r,n,i){this._scrollDispatcher=e,this._ngZone=r,this._viewportRuler=n,this._config=i}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(bt(r=>!r||!this._overlayRef.overlayElement.contains(r.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let r=this._viewportRuler.getViewportScrollPosition().top;Math.abs(r-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var ns=class{enable(){}disable(){}attach(){}};function wh(t,e){return e.some(r=>{let n=t.bottom<r.top,i=t.top>r.bottom,o=t.right<r.left,s=t.left>r.right;return n||i||o||s})}function p_(t,e){return e.some(r=>{let n=t.top<r.top,i=t.bottom>r.bottom,o=t.left<r.left,s=t.right>r.right;return n||i||o||s})}function Gl(t,e){return new ql(t.get(rs),t.get(Po),t.get(qt),e)}var ql=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,r,n,i){this._scrollDispatcher=e,this._viewportRuler=r,this._ngZone=n,this._config=i}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let r=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:i}=this._viewportRuler.getViewportSize();wh(r,[{width:n,height:i,bottom:i,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},x_=(()=>{class t{_injector=k(xt);constructor(){}noop=()=>new ns;close=r=>__(this._injector,r);block=()=>No(this._injector);reposition=r=>Gl(this._injector,r);static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hn=class{positionStrategy;scrollStrategy=new ns;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(e){if(e){let r=Object.keys(e);for(let n of r)e[n]!==void 0&&(this[n]=e[n])}}};var Hl=class{connectionPair;scrollableViewProperties;constructor(e,r){this.connectionPair=e,this.scrollableViewProperties=r}};var w_=(()=>{class t{_attachedOverlays=[];_document=k(le);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(r){this.remove(r),this._attachedOverlays.push(r)}remove(r){let n=this._attachedOverlays.indexOf(r);n>-1&&this._attachedOverlays.splice(n,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),C_=(()=>{class t extends w_{_ngZone=k(qt);_renderer=k(Zr).createRenderer(null,null);_cleanupKeydown;add(r){super.add(r),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=r=>{let n=this._attachedOverlays;for(let i=n.length-1;i>-1;i--)if(n[i]._keydownEvents.observers.length>0){this._ngZone.run(()=>n[i]._keydownEvents.next(r));break}};static \u0275fac=(()=>{let r;return function(i){return(r||(r=ze(t)))(i||t)}})();static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),S_=(()=>{class t extends w_{_platform=k(Re);_ngZone=k(qt);_renderer=k(Zr).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(r){if(super.add(r),!this._isAttached){let n=this._document.body,i={capture:!0},o=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[o.listen(n,"pointerdown",this._pointerDownListener,i),o.listen(n,"click",this._clickListener,i),o.listen(n,"auxclick",this._clickListener,i),o.listen(n,"contextmenu",this._clickListener,i)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(r=>r()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=r=>{this._pointerDownEventTarget=en(r)};_clickListener=r=>{let n=en(r),i=r.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:n;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let s=o.length-1;s>-1;s--){let l=o[s];if(l._outsidePointerEvents.observers.length<1||!l.hasAttached())continue;if(m_(l.overlayElement,n)||m_(l.overlayElement,i))break;let d=l._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(r)):d.next(r)}};static \u0275fac=(()=>{let r;return function(i){return(r||(r=ze(t)))(i||t)}})();static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function m_(t,e){let r=typeof ShadowRoot<"u"&&ShadowRoot,n=e;for(;n;){if(n===t)return!0;n=r&&n instanceof ShadowRoot?n.host:n.parentNode}return!1}var R_=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Jt({type:t,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(n,i){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return t})(),Ql=(()=>{class t{_platform=k(Re);_containerElement;_document=k(le);_styleLoader=k(mi);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let r="cdk-overlay-container";if(this._platform.isBrowser||Zu()){let i=this._document.querySelectorAll(`.${r}[platform="server"], .${r}[platform="test"]`);for(let o=0;o<i.length;o++)i[o].remove()}let n=this._document.createElement("div");n.classList.add(r),Zu()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}_loadStyles(){this._styleLoader.load(R_)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ch=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(e,r,n,i){this._renderer=r,this._ngZone=n,this.element=e.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=r.listen(this.element,"click",i)}detach(){this._ngZone.runOutsideAngular(()=>{let e=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(e,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),e.style.pointerEvents="none",e.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},Mo=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new at;_attachments=new at;_detachments=new at;_positionStrategy;_scrollStrategy;_locationChanges=Rr.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new at;_outsidePointerEvents=new at;_afterNextRenderRef;constructor(e,r,n,i,o,s,l,d,p,m=!1,y,S){this._portalOutlet=e,this._host=r,this._pane=n,this._config=i,this._ngZone=o,this._keyboardDispatcher=s,this._document=l,this._location=d,this._outsideClickDispatcher=p,this._animationsDisabled=m,this._injector=y,this._renderer=S,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let r=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=hr(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof r?.onDestroy=="function"&&r.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),r}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,e&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=F(F({},this._config),e),this._updateElementSize()}setDirection(e){this._config=gt(F({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Zt(this._config.width),e.height=Zt(this._config.height),e.minWidth=Zt(this._config.minWidth),e.minHeight=Zt(this._config.minHeight),e.maxWidth=Zt(this._config.maxWidth),e.maxHeight=Zt(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new Ch(this._document,this._renderer,this._ngZone,r=>{this._backdropClick.next(r)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(e))}):this._backdropRef.element.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(e,r,n){let i=Gu(r||[]).filter(o=>!!o);i.length&&(n?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenEmpty(){let e=!1;try{this._detachContentAfterRenderRef=hr(()=>{e=!0,this._detachContent()},{injector:this._injector})}catch(r){if(e)throw r;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let e=this._scrollStrategy;e?.disable(),e?.detach?.()}},g_="cdk-overlay-connected-position-bounding-box",kO=/([A-Za-z%]+)$/;function Oh(t,e){return new Wl(e,t.get(Po),t.get(le),t.get(Re),t.get(Ql))}var Wl=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new at;_resizeSubscription=Rr.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,r,n,i,o){this._viewportRuler=r,this._document=n,this._platform=i,this._overlayContainer=o,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(g_),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,r=this._overlayRect,n=this._viewportRect,i=this._containerRect,o=[],s;for(let l of this._preferredPositions){let d=this._getOriginPoint(e,i,l),p=this._getOverlayPoint(d,r,l),m=this._getOverlayFit(p,r,n,l);if(m.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(l,d);return}if(this._canFitWithFlexibleDimensions(m,p,n)){o.push({position:l,origin:d,overlayRect:r,boundingBoxRect:this._calculateBoundingBoxRect(d,l)});continue}(!s||s.overlayFit.visibleArea<m.visibleArea)&&(s={overlayFit:m,overlayPoint:p,originPoint:d,position:l,overlayRect:r})}if(o.length){let l=null,d=-1;for(let p of o){let m=p.boundingBoxRect.width*p.boundingBoxRect.height*(p.position.weight||1);m>d&&(d=m,l=p)}this._isPushed=!1,this._applyPosition(l.position,l.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Mi(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(g_),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let r=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,r)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,r,n){let i;if(n.originX=="center")i=e.left+e.width/2;else{let s=this._isRtl()?e.right:e.left,l=this._isRtl()?e.left:e.right;i=n.originX=="start"?s:l}r.left<0&&(i-=r.left);let o;return n.originY=="center"?o=e.top+e.height/2:o=n.originY=="top"?e.top:e.bottom,r.top<0&&(o-=r.top),{x:i,y:o}}_getOverlayPoint(e,r,n){let i;n.overlayX=="center"?i=-r.width/2:n.overlayX==="start"?i=this._isRtl()?-r.width:0:i=this._isRtl()?0:-r.width;let o;return n.overlayY=="center"?o=-r.height/2:o=n.overlayY=="top"?0:-r.height,{x:e.x+i,y:e.y+o}}_getOverlayFit(e,r,n,i){let o=y_(r),{x:s,y:l}=e,d=this._getOffset(i,"x"),p=this._getOffset(i,"y");d&&(s+=d),p&&(l+=p);let m=0-s,y=s+o.width-n.width,S=0-l,D=l+o.height-n.height,M=this._subtractOverflows(o.width,m,y),j=this._subtractOverflows(o.height,S,D),G=M*j;return{visibleArea:G,isCompletelyWithinViewport:o.width*o.height===G,fitsInViewportVertically:j===o.height,fitsInViewportHorizontally:M==o.width}}_canFitWithFlexibleDimensions(e,r,n){if(this._hasFlexibleDimensions){let i=n.bottom-r.y,o=n.right-r.x,s=v_(this._overlayRef.getConfig().minHeight),l=v_(this._overlayRef.getConfig().minWidth),d=e.fitsInViewportVertically||s!=null&&s<=i,p=e.fitsInViewportHorizontally||l!=null&&l<=o;return d&&p}return!1}_pushOverlayOnScreen(e,r,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let i=y_(r),o=this._viewportRect,s=Math.max(e.x+i.width-o.width,0),l=Math.max(e.y+i.height-o.height,0),d=Math.max(o.top-n.top-e.y,0),p=Math.max(o.left-n.left-e.x,0),m=0,y=0;return i.width<=o.width?m=p||-s:m=e.x<this._viewportMargin?o.left-n.left-e.x:0,i.height<=o.height?y=d||-l:y=e.y<this._viewportMargin?o.top-n.top-e.y:0,this._previousPushAmount={x:m,y},{x:e.x+m,y:e.y+y}}_applyPosition(e,r){if(this._setTransformOrigin(e),this._setOverlayElementStyles(r,e),this._setBoundingBoxStyles(r,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let n=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!AO(this._lastScrollVisibility,n)){let i=new Hl(e,n);this._positionChanges.next(i)}this._lastScrollVisibility=n}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let r=this._boundingBox.querySelectorAll(this._transformOriginSelector),n,i=e.overlayY;e.overlayX==="center"?n="center":this._isRtl()?n=e.overlayX==="start"?"right":"left":n=e.overlayX==="start"?"left":"right";for(let o=0;o<r.length;o++)r[o].style.transformOrigin=`${n} ${i}`}_calculateBoundingBoxRect(e,r){let n=this._viewportRect,i=this._isRtl(),o,s,l;if(r.overlayY==="top")s=e.y,o=n.height-s+this._viewportMargin;else if(r.overlayY==="bottom")l=n.height-e.y+this._viewportMargin*2,o=n.height-l+this._viewportMargin;else{let D=Math.min(n.bottom-e.y+n.top,e.y),M=this._lastBoundingBoxSize.height;o=D*2,s=e.y-D,o>M&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-M/2)}let d=r.overlayX==="start"&&!i||r.overlayX==="end"&&i,p=r.overlayX==="end"&&!i||r.overlayX==="start"&&i,m,y,S;if(p)S=n.width-e.x+this._viewportMargin*2,m=e.x-this._viewportMargin;else if(d)y=e.x,m=n.right-e.x;else{let D=Math.min(n.right-e.x+n.left,e.x),M=this._lastBoundingBoxSize.width;m=D*2,y=e.x-D,m>M&&!this._isInitialRender&&!this._growAfterOpen&&(y=e.x-M/2)}return{top:s,left:y,bottom:l,right:S,width:m,height:o}}_setBoundingBoxStyles(e,r){let n=this._calculateBoundingBoxRect(e,r);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));let i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;i.height=Zt(n.height),i.top=Zt(n.top),i.bottom=Zt(n.bottom),i.width=Zt(n.width),i.left=Zt(n.left),i.right=Zt(n.right),r.overlayX==="center"?i.alignItems="center":i.alignItems=r.overlayX==="end"?"flex-end":"flex-start",r.overlayY==="center"?i.justifyContent="center":i.justifyContent=r.overlayY==="bottom"?"flex-end":"flex-start",o&&(i.maxHeight=Zt(o)),s&&(i.maxWidth=Zt(s))}this._lastBoundingBoxSize=n,Mi(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Mi(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Mi(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,r){let n={},i=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(i){let m=this._viewportRuler.getViewportScrollPosition();Mi(n,this._getExactOverlayY(r,e,m)),Mi(n,this._getExactOverlayX(r,e,m))}else n.position="static";let l="",d=this._getOffset(r,"x"),p=this._getOffset(r,"y");d&&(l+=`translateX(${d}px) `),p&&(l+=`translateY(${p}px)`),n.transform=l.trim(),s.maxHeight&&(i?n.maxHeight=Zt(s.maxHeight):o&&(n.maxHeight="")),s.maxWidth&&(i?n.maxWidth=Zt(s.maxWidth):o&&(n.maxWidth="")),Mi(this._pane.style,n)}_getExactOverlayY(e,r,n){let i={top:"",bottom:""},o=this._getOverlayPoint(r,this._overlayRect,e);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),e.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;i.bottom=`${s-(o.y+this._overlayRect.height)}px`}else i.top=Zt(o.y);return i}_getExactOverlayX(e,r,n){let i={left:"",right:""},o=this._getOverlayPoint(r,this._overlayRect,e);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n));let s;if(this._isRtl()?s=e.overlayX==="end"?"left":"right":s=e.overlayX==="end"?"right":"left",s==="right"){let l=this._document.documentElement.clientWidth;i.right=`${l-(o.x+this._overlayRect.width)}px`}else i.left=Zt(o.x);return i}_getScrollVisibility(){let e=this._getOriginRect(),r=this._pane.getBoundingClientRect(),n=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:p_(e,n),isOriginOutsideView:wh(e,n),isOverlayClipped:p_(r,n),isOverlayOutsideView:wh(r,n)}}_subtractOverflows(e,...r){return r.reduce((n,i)=>n-Math.max(i,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,r=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+r-this._viewportMargin,width:e-2*this._viewportMargin,height:r-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,r){return r==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Gu(e).forEach(r=>{r!==""&&this._appliedPanelClasses.indexOf(r)===-1&&(this._appliedPanelClasses.push(r),this._pane.classList.add(r))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof Yt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let r=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+r,height:n,width:r}}};function Mi(t,e){for(let r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function v_(t){if(typeof t!="number"&&t!=null){let[e,r]=t.split(kO);return!r||r==="px"?parseFloat(e):null}return t||null}function y_(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function AO(t,e){return t===e?!0:t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}var b_="cdk-global-overlay-wrapper";function Qn(t){return new Kl}var Kl=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){let r=e.getConfig();this._overlayRef=e,this._width&&!r.width&&e.updateSize({width:this._width}),this._height&&!r.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(b_),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,r=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:i,height:o,maxWidth:s,maxHeight:l}=n,d=(i==="100%"||i==="100vw")&&(!s||s==="100%"||s==="100vw"),p=(o==="100%"||o==="100vh")&&(!l||l==="100%"||l==="100vh"),m=this._xPosition,y=this._xOffset,S=this._overlayRef.getConfig().direction==="rtl",D="",M="",j="";d?j="flex-start":m==="center"?(j="center",S?M=y:D=y):S?m==="left"||m==="end"?(j="flex-end",D=y):(m==="right"||m==="start")&&(j="flex-start",M=y):m==="left"||m==="start"?(j="flex-start",D=y):(m==="right"||m==="end")&&(j="flex-end",M=y),e.position=this._cssPosition,e.marginLeft=d?"0":D,e.marginTop=p?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=d?"0":M,r.justifyContent=j,r.alignItems=p?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,r=this._overlayRef.hostElement,n=r.style;r.classList.remove(b_),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},O_=(()=>{class t{_injector=k(xt);constructor(){}global(){return Qn()}flexibleConnectedTo(r){return Oh(this._injector,r)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ni(t,e){t.get(mi).load(R_);let r=t.get(Ql),n=t.get(le),i=t.get(rn),o=t.get(Vs),s=t.get(En),l=n.createElement("div"),d=n.createElement("div");d.id=i.getId("cdk-overlay-"),d.classList.add("cdk-overlay-pane"),l.appendChild(d),r.getContainerElement().appendChild(l);let p=new Ks(d,o,t),m=new hn(e),y=t.get(Dr,null,{optional:!0})||t.get(Zr).createRenderer(null,null);return m.direction=m.direction||s.value,new Mo(p,l,d,m,t.get(qt),t.get(C_),n,t.get(Ir),t.get(S_),e?.disableAnimations??t.get(js,null,{optional:!0})==="NoopAnimations",t.get(fr),y)}var E_=(()=>{class t{scrollStrategies=k(x_);_positionBuilder=k(O_);_injector=k(xt);constructor(){}create(r){return Ni(this._injector,r)}position(){return this._positionBuilder}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),IO=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],D_=new lt("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=k(xt);return()=>Gl(t)}}),Sh=(()=>{class t{elementRef=k(Yt);constructor(){}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]})}return t})(),TO=(()=>{class t{_dir=k(En,{optional:!0});_injector=k(xt);_overlayRef;_templatePortal;_backdropSubscription=Rr.EMPTY;_attachSubscription=Rr.EMPTY;_detachSubscription=Rr.EMPTY;_positionSubscription=Rr.EMPTY;_offsetX;_offsetY;_position;_scrollStrategyFactory=k(D_);_disposeOnNavigation=!1;_ngZone=k(qt);origin;positions;positionStrategy;get offsetX(){return this._offsetX}set offsetX(r){this._offsetX=r,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(r){this._offsetY=r,this._position&&this._updatePositionStrategy(this._position)}width;height;minWidth;minHeight;backdropClass;panelClass;viewportMargin=0;scrollStrategy;open=!1;disableClose=!1;transformOriginSelector;hasBackdrop=!1;lockPosition=!1;flexibleDimensions=!1;growAfterOpen=!1;push=!1;get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(r){this._disposeOnNavigation=r}backdropClick=new re;positionChange=new re;attach=new re;detach=new re;overlayKeydown=new re;overlayOutsideClick=new re;constructor(){let r=k(Xr),n=k(On);this._templatePortal=new Tr(r,n),this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef?.dispose()}ngOnChanges(r){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef?.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),r.origin&&this.open&&this._position.apply()),r.open&&(this.open?this.attachOverlay():this.detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=IO);let r=this._overlayRef=Ni(this._injector,this._buildConfig());this._attachSubscription=r.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=r.detachments().subscribe(()=>this.detach.emit()),r.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),n.keyCode===27&&!this.disableClose&&!Zi(n)&&(n.preventDefault(),this.detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{let i=this._getOriginElement(),o=en(n);(!i||i!==o&&!i.contains(o))&&this.overlayOutsideClick.next(n)})}_buildConfig(){let r=this._position=this.positionStrategy||this._createPositionStrategy(),n=new hn({direction:this._dir||"ltr",positionStrategy:r,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(n.width=this.width),(this.height||this.height===0)&&(n.height=this.height),(this.minWidth||this.minWidth===0)&&(n.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(r){let n=this.positions.map(i=>({originX:i.originX,originY:i.originY,overlayX:i.overlayX,overlayY:i.overlayY,offsetX:i.offsetX||this.offsetX,offsetY:i.offsetY||this.offsetY,panelClass:i.panelClass||void 0}));return r.setOrigin(this._getOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let r=Oh(this._injector,this._getOrigin());return this._updatePositionStrategy(r),r}_getOrigin(){return this.origin instanceof Sh?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof Sh?this.origin.elementRef.nativeElement:this.origin instanceof Yt?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(r=>{this.backdropClick.emit(r)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(wp(()=>this.positionChange.observers.length>0)).subscribe(r=>{this._ngZone.run(()=>this.positionChange.emit(r)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()})),this.open=!0}detachOverlay(){this._overlayRef?.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.open=!1}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",ge],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",ge],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",ge],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",ge],push:[2,"cdkConnectedOverlayPush","push",ge],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",ge]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Yr]})}return t})();function PO(t){let e=k(xt);return()=>Gl(e)}var MO={provide:D_,useFactory:PO},Li=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Xt({type:t});static \u0275inj=Qt({providers:[E_,MO],imports:[la,on,xh,xh]})}return t})();function NO(t,e){if(t&1){let r=zp();tn(0,"div",1)(1,"button",2),di("click",function(){Rp(r);let i=Hu();return Op(i.action())}),Wu(2),kr()()}if(t&2){let r=Hu();Gi(2),Ku(" ",r.data.action," ")}}var LO=["label"];function $O(t,e){}var BO=Math.pow(2,31)-1,is=class{_overlayRef;instance;containerInstance;_afterDismissed=new at;_afterOpened=new at;_onAction=new at;_durationTimeoutId;_dismissedByAction=!1;constructor(e,r){this._overlayRef=r,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,BO))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},k_=new lt("MatSnackBarData"),Lo=class{politeness="polite";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"},FO=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return t})(),jO=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return t})(),UO=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return t})(),A_=(()=>{class t{snackBarRef=k(is);data=k(k_);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Jt({type:t,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["matButton","","matSnackBarAction","",3,"click"]],template:function(n,i){n&1&&(tn(0,"div",0),Wu(1),kr(),jp(2,NO,3,1,"div",1)),n&2&&(Gi(),Ku(" ",i.data.message,`
`),Gi(),Up(i.hasAction?2:-1))},dependencies:[Rm,FO,jO,UO],styles:[`.mat-mdc-simple-snack-bar{display:flex}
`],encapsulation:2,changeDetection:0})}return t})(),Eh="_mat-snack-bar-enter",Dh="_mat-snack-bar-exit",zO=(()=>{class t extends Dn{_ngZone=k(qt);_elementRef=k(Yt);_changeDetectorRef=k(Ar);_platform=k(Re);_animationsDisabled=tr();snackBarConfig=k(Lo);_document=k(le);_trackedModals=new Set;_enterFallback;_exitFallback;_injector=k(xt);_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new at;_onExit=new at;_onEnter=new at;_animationState="void";_live;_label;_role;_liveElementId=k(rn).getId("mat-snack-bar-container-live-");constructor(){super();let r=this.snackBarConfig;r.politeness==="assertive"&&!r.announcementMessage?this._live="assertive":r.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(r){this._assertNotAttached();let n=this._portalOutlet.attachComponentPortal(r);return this._afterPortalAttached(),n}attachTemplatePortal(r){this._assertNotAttached();let n=this._portalOutlet.attachTemplatePortal(r);return this._afterPortalAttached(),n}attachDomPortal=r=>{this._assertNotAttached();let n=this._portalOutlet.attachDomPortal(r);return this._afterPortalAttached(),n};onAnimationEnd(r){r===Dh?this._completeExit():r===Eh&&(clearTimeout(this._enterFallback),this._ngZone.run(()=>{this._onEnter.next(),this._onEnter.complete()}))}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce(),this._animationsDisabled?hr(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(Eh)))},{injector:this._injector}):(clearTimeout(this._enterFallback),this._enterFallback=setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-snack-bar-fallback-visible"),this.onAnimationEnd(Eh)},200)))}exit(){return this._destroyed?nt(void 0):(this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._animationsDisabled?hr(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(Dh)))},{injector:this._injector}):(clearTimeout(this._exitFallback),this._exitFallback=setTimeout(()=>this.onAnimationEnd(Dh),200))}),this._onExit)}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){clearTimeout(this._exitFallback),queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let r=this._elementRef.nativeElement,n=this.snackBarConfig.panelClass;n&&(Array.isArray(n)?n.forEach(s=>r.classList.add(s)):r.classList.add(n)),this._exposeToModals();let i=this._label.nativeElement,o="mdc-snackbar__label";i.classList.toggle(o,!i.querySelector(`.${o}`))}_exposeToModals(){let r=this._liveElementId,n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let i=0;i<n.length;i++){let o=n[i],s=o.getAttribute("aria-owns");this._trackedModals.add(o),s?s.indexOf(r)===-1&&o.setAttribute("aria-owns",s+" "+r):o.setAttribute("aria-owns",r)}}_clearFromModals(){this._trackedModals.forEach(r=>{let n=r.getAttribute("aria-owns");if(n){let i=n.replace(this._liveElementId,"").trim();i.length>0?r.setAttribute("aria-owns",i):r.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{if(this._destroyed)return;let r=this._elementRef.nativeElement,n=r.querySelector("[aria-hidden]"),i=r.querySelector("[aria-live]");if(n&&i){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&n.contains(document.activeElement)&&(o=document.activeElement),n.removeAttribute("aria-hidden"),i.appendChild(n),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Jt({type:t,selectors:[["mat-snack-bar-container"]],viewQuery:function(n,i){if(n&1&&(Yi(kn,7),Yi(LO,7)),n&2){let o;hi(o=pi())&&(i._portalOutlet=o.first),hi(o=pi())&&(i._label=o.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:6,hostBindings:function(n,i){n&1&&di("animationend",function(s){return i.onAnimationEnd(s.animationName)})("animationcancel",function(s){return i.onAnimationEnd(s.animationName)}),n&2&&Ze("mat-snack-bar-container-enter",i._animationState==="visible")("mat-snack-bar-container-exit",i._animationState==="hidden")("mat-snack-bar-container-animations-enabled",!i._animationsDisabled)},features:[Se],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(n,i){n&1&&(tn(0,"div",1)(1,"div",2,0)(3,"div",3),Qi(4,$O,0,0,"ng-template",4),kr(),mr(5,"div"),kr()()),n&2&&(Gi(5),pr("aria-live",i._live)("role",i._role)("id",i._liveElementId))},dependencies:[kn],styles:[`@keyframes _mat-snack-bar-enter{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _mat-snack-bar-exit{from{opacity:1}to{opacity:0}}.mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-snack-bar-container-animations-enabled{opacity:0}.mat-snack-bar-container-animations-enabled.mat-snack-bar-fallback-visible{opacity:1}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-enter{animation:_mat-snack-bar-enter 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-exit{animation:_mat-snack-bar-exit 75ms cubic-bezier(0.4, 0, 1, 1) forwards}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mat-snack-bar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mat-snack-bar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-snack-bar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mat-snack-bar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-snack-bar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-snack-bar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mat-snack-bar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-button-text-state-layer-color: currentColor;--mat-button-text-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}
`],encapsulation:2})}return t})();function VO(){return new Lo}var qO=new lt("mat-snack-bar-default-options",{providedIn:"root",factory:VO}),HO=(()=>{class t{_live=k(lm);_injector=k(xt);_breakpointObserver=k(Yu);_parentSnackBar=k(t,{optional:!0,skipSelf:!0});_defaultConfig=k(qO);_animationsDisabled=tr();_snackBarRefAtThisLevel=null;simpleSnackBarComponent=A_;snackBarContainerComponent=zO;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){let r=this._parentSnackBar;return r?r._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(r){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=r:this._snackBarRefAtThisLevel=r}constructor(){}openFromComponent(r,n){return this._attach(r,n)}openFromTemplate(r,n){return this._attach(r,n)}open(r,n="",i){let o=F(F({},this._defaultConfig),i);return o.data={message:r,action:n},o.announcementMessage===r&&(o.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,o)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(r,n){let i=n&&n.viewContainerRef&&n.viewContainerRef.injector,o=xt.create({parent:i||this._injector,providers:[{provide:Lo,useValue:n}]}),s=new nn(this.snackBarContainerComponent,n.viewContainerRef,o),l=r.attach(s);return l.instance.snackBarConfig=n,l.instance}_attach(r,n){let i=F(F(F({},new Lo),this._defaultConfig),n),o=this._createOverlay(i),s=this._attachSnackBarContainer(o,i),l=new is(s,o);if(r instanceof Xr){let d=new Tr(r,null,{$implicit:i.data,snackBarRef:l});l.instance=s.attachTemplatePortal(d)}else{let d=this._createInjector(i,l),p=new nn(r,void 0,d),m=s.attachComponentPortal(p);l.instance=m.instance}return this._breakpointObserver.observe(pm.HandsetPortrait).pipe(Ki(o.detachments())).subscribe(d=>{o.overlayElement.classList.toggle(this.handsetCssClass,d.matches)}),i.announcementMessage&&s._onAnnounce.subscribe(()=>{this._live.announce(i.announcementMessage,i.politeness)}),this._animateSnackBar(l,i),this._openedSnackBarRef=l,this._openedSnackBarRef}_animateSnackBar(r,n){r.afterDismissed().subscribe(()=>{this._openedSnackBarRef==r&&(this._openedSnackBarRef=null),n.announcementMessage&&this._live.clear()}),n.duration&&n.duration>0&&r.afterOpened().subscribe(()=>r._dismissAfter(n.duration)),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{r.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):r.containerInstance.enter()}_createOverlay(r){let n=new hn;n.direction=r.direction;let i=Qn(this._injector),o=r.direction==="rtl",s=r.horizontalPosition==="left"||r.horizontalPosition==="start"&&!o||r.horizontalPosition==="end"&&o,l=!s&&r.horizontalPosition!=="center";return s?i.left("0"):l?i.right("0"):i.centerHorizontally(),r.verticalPosition==="top"?i.top("0"):i.bottom("0"),n.positionStrategy=i,n.disableAnimations=this._animationsDisabled,Ni(this._injector,n)}_createInjector(r,n){let i=r&&r.viewContainerRef&&r.viewContainerRef.injector;return xt.create({parent:i||this._injector,providers:[{provide:is,useValue:n},{provide:k_,useValue:r.data}]})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var LQ=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Xt({type:t});static \u0275inj=Qt({providers:[HO],imports:[Li,on,Om,Je,A_,Je]})}return t})();var FQ={APP:{POSTS:"app.posts",NOT_FOUND:"app.not-found"},POSTS:{DETAIL:"posts.detail",CREATE:"posts.create",EDIT:"posts.edit"}};function WO(t,e){}var Yn=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;disableAnimations=!1;providers;container;templateContext};var Ah=(()=>{class t extends Dn{_elementRef=k(Yt);_focusTrapFactory=k(cm);_config;_interactivityChecker=k(sm);_ngZone=k(qt);_focusMonitor=k(Ws);_renderer=k(Dr);_platform=k(Re);_document=k(le,{optional:!0});_portalOutlet;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_changeDetectorRef=k(Ar);_injector=k(xt);_isDestroyed=!1;constructor(){super(),this._config=k(Yn,{optional:!0})||new Yn,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(r){this._ariaLabelledByQueue.push(r),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(r){let n=this._ariaLabelledByQueue.indexOf(r);n>-1&&(this._ariaLabelledByQueue.splice(n,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(r){this._portalOutlet.hasAttached();let n=this._portalOutlet.attachComponentPortal(r);return this._contentAttached(),n}attachTemplatePortal(r){this._portalOutlet.hasAttached();let n=this._portalOutlet.attachTemplatePortal(r);return this._contentAttached(),n}attachDomPortal=r=>{this._portalOutlet.hasAttached();let n=this._portalOutlet.attachDomPortal(r);return this._contentAttached(),n};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(r,n){this._interactivityChecker.isFocusable(r)||(r.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let i=()=>{o(),s(),r.removeAttribute("tabindex")},o=this._renderer.listen(r,"blur",i),s=this._renderer.listen(r,"mousedown",i)})),r.focus(n)}_focusByCssSelector(r,n){let i=this._elementRef.nativeElement.querySelector(r);i&&this._forceFocus(i,n)}_trapFocus(r){this._isDestroyed||hr(()=>{let n=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||n.focus(r);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(r)||this._focusDialogContainer(r);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',r);break;default:this._focusByCssSelector(this._config.autoFocus,r);break}},{injector:this._injector})}_restoreFocus(){let r=this._config.restoreFocus,n=null;if(typeof r=="string"?n=this._document.querySelector(r):typeof r=="boolean"?n=r?this._elementFocusedBeforeDialogWasOpened:null:r&&(n=r),this._config.restoreFocus&&n&&typeof n.focus=="function"){let i=sa(),o=this._elementRef.nativeElement;(!i||i===this._document.body||i===o||o.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(n,this._closeInteractionType),this._closeInteractionType=null):n.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(r){this._elementRef.nativeElement.focus?.(r)}_containsFocus(){let r=this._elementRef.nativeElement,n=sa();return r===n||r.contains(n)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=sa()))}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Jt({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(n,i){if(n&1&&Yi(kn,7),n&2){let o;hi(o=pi())&&(i._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(n,i){n&2&&pr("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[Se],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(n,i){n&1&&Qi(0,WO,0,0,"ng-template",0)},dependencies:[kn],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return t})(),os=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new at;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(e,r){this.overlayRef=e,this.config=r,this.disableClose=r.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=r.id,this.keydownEvents.subscribe(n=>{n.keyCode===27&&!this.disableClose&&!Zi(n)&&(n.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{!this.disableClose&&this._canClose()?this.close(void 0,{focusOrigin:"mouse"}):this.containerInstance._recaptureFocus?.()}),this._detachSubscription=e.detachments().subscribe(()=>{r.closeOnOverlayDetachments!==!1&&this.close()})}close(e,r){if(this._canClose(e)){let n=this.closed;this.containerInstance._closeInteractionType=r?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),n.next(e),n.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",r=""){return this.overlayRef.updateSize({width:e,height:r}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}_canClose(e){let r=this.config;return!!this.containerInstance&&(!r.closePredicate||r.closePredicate(e,r,this.componentInstance))}},KO=new lt("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=k(xt);return()=>No(t)}}),GO=new lt("DialogData"),QO=new lt("DefaultDialogConfig");function YO(t){let e=ia(t),r=new re;return{valueSignal:e,get value(){return e()},change:r,ngOnDestroy(){r.complete()}}}var Ih=(()=>{class t{_injector=k(xt);_defaultOptions=k(QO,{optional:!0});_parentDialog=k(t,{optional:!0,skipSelf:!0});_overlayContainer=k(Ql);_idGenerator=k(rn);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new at;_afterOpenedAtThisLevel=new at;_ariaHiddenElements=new Map;_scrollStrategy=k(KO);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=Sn(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(dr(void 0)));constructor(){}open(r,n){let i=this._defaultOptions||new Yn;n=F(F({},i),n),n.id=n.id||this._idGenerator.getId("cdk-dialog-"),n.id&&this.getDialogById(n.id);let o=this._getOverlayConfig(n),s=Ni(this._injector,o),l=new os(s,n),d=this._attachContainer(s,l,n);return l.containerInstance=d,this._attachDialogContent(r,l,d,n),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(l),l.closed.subscribe(()=>this._removeOpenDialog(l,!0)),this.afterOpened.next(l),l}closeAll(){kh(this.openDialogs,r=>r.close())}getDialogById(r){return this.openDialogs.find(n=>n.id===r)}ngOnDestroy(){kh(this._openDialogsAtThisLevel,r=>{r.config.closeOnDestroy===!1&&this._removeOpenDialog(r,!1)}),kh(this._openDialogsAtThisLevel,r=>r.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(r){let n=new hn({positionStrategy:r.positionStrategy||Qn().centerHorizontally().centerVertically(),scrollStrategy:r.scrollStrategy||this._scrollStrategy(),panelClass:r.panelClass,hasBackdrop:r.hasBackdrop,direction:r.direction,minWidth:r.minWidth,minHeight:r.minHeight,maxWidth:r.maxWidth,maxHeight:r.maxHeight,width:r.width,height:r.height,disposeOnNavigation:r.closeOnNavigation,disableAnimations:r.disableAnimations});return r.backdropClass&&(n.backdropClass=r.backdropClass),n}_attachContainer(r,n,i){let o=i.injector||i.viewContainerRef?.injector,s=[{provide:Yn,useValue:i},{provide:os,useValue:n},{provide:Mo,useValue:r}],l;i.container?typeof i.container=="function"?l=i.container:(l=i.container.type,s.push(...i.container.providers(i))):l=Ah;let d=new nn(l,i.viewContainerRef,xt.create({parent:o||this._injector,providers:s}));return r.attach(d).instance}_attachDialogContent(r,n,i,o){if(r instanceof Xr){let s=this._createInjector(o,n,i,void 0),l={$implicit:o.data,dialogRef:n};o.templateContext&&(l=F(F({},l),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),i.attachTemplatePortal(new Tr(r,null,l,s))}else{let s=this._createInjector(o,n,i,this._injector),l=i.attachComponentPortal(new nn(r,o.viewContainerRef,s));n.componentRef=l,n.componentInstance=l.instance}}_createInjector(r,n,i,o){let s=r.injector||r.viewContainerRef?.injector,l=[{provide:GO,useValue:r.data},{provide:os,useValue:n}];return r.providers&&(typeof r.providers=="function"?l.push(...r.providers(n,r,i)):l.push(...r.providers)),r.direction&&(!s||!s.get(En,null,{optional:!0}))&&l.push({provide:En,useValue:YO(r.direction)}),xt.create({parent:s||o,providers:l})}_removeOpenDialog(r,n){let i=this.openDialogs.indexOf(r);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,s)=>{o?s.setAttribute("aria-hidden",o):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),n&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let r=this._overlayContainer.getContainerElement();if(r.parentElement){let n=r.parentElement.children;for(let i=n.length-1;i>-1;i--){let o=n[i];o!==r&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let r=this._parentDialog;return r?r._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function kh(t,e){let r=t.length;for(;r--;)e(t[r])}var I_=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Xt({type:t});static \u0275inj=Qt({providers:[Ih],imports:[Li,on,um,on]})}return t})();function XO(t,e){}var ss=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;enterAnimationDuration;exitAnimationDuration},Th="mdc-dialog--open",T_="mdc-dialog--opening",P_="mdc-dialog--closing",ZO=150,JO=75,L_=(()=>{class t extends Ah{_animationStateChanged=new re;_animationsEnabled=!tr();_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?N_(this._config.enterAnimationDuration)??ZO:0;_exitAnimationDuration=this._animationsEnabled?N_(this._config.exitAnimationDuration)??JO:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(M_,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(T_,Th)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(Th),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(Th),this._animationsEnabled?(this._hostElement.style.setProperty(M_,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(P_)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(r){this._actionSectionCount+=r,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(T_,P_)}_waitForAnimationToComplete(r,n){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(n,r)}_requestAnimationFrame(r){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(r):r()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(r){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:r})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(r){let n=super.attachComponentPortal(r);return n.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),n}static \u0275fac=(()=>{let r;return function(i){return(r||(r=ze(t)))(i||t)}})();static \u0275cmp=Jt({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(n,i){n&2&&(qu("id",i._config.id),pr("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),Ze("_mat-animation-noopable",!i._animationsEnabled)("mat-mdc-dialog-container-with-actions",i._actionSectionCount>0))},features:[Se],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(n,i){n&1&&(tn(0,"div",0)(1,"div",1),Qi(2,XO,0,0,"ng-template",2),kr()())},dependencies:[kn],styles:[`.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mat-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mat-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mat-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mat-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mat-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mat-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mat-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mat-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mat-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mat-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mat-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mat-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mat-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;box-sizing:border-box;min-height:52px;margin:0;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}
`],encapsulation:2})}return t})(),M_="--mat-dialog-transition-duration";function N_(t){return t==null?null:typeof t=="number"?t:t.endsWith("ms")?ca(t.substring(0,t.length-2)):t.endsWith("s")?ca(t.substring(0,t.length-1))*1e3:t==="0"?0:null}var as=function(t){return t[t.OPEN=0]="OPEN",t[t.CLOSING=1]="CLOSING",t[t.CLOSED=2]="CLOSED",t}(as||{}),$o=class{_ref;_config;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new at;_beforeClosed=new at;_result;_closeFallbackTimeout;_state=as.OPEN;_closeInteractionType;constructor(e,r,n){this._ref=e,this._config=r,this._containerInstance=n,this.disableClose=r.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),n._animationStateChanged.pipe(bt(i=>i.state==="opened"),Or(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),n._animationStateChanged.pipe(bt(i=>i.state==="closed"),Or(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Bs(this.backdropClick(),this.keydownEvents().pipe(bt(i=>i.keyCode===27&&!this.disableClose&&!Zi(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),Ph(this,i.type==="keydown"?"keyboard":"mouse"))})}close(e){let r=this._config.closePredicate;r&&!r(e,this._config,this.componentInstance)||(this._result=e,this._containerInstance._animationStateChanged.pipe(bt(n=>n.state==="closing"),Or(1)).subscribe(n=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=as.CLOSING,this._containerInstance._startExitAnimation())}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let r=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?r.left(e.left):r.right(e.right):r.centerHorizontally(),e&&(e.top||e.bottom)?e.top?r.top(e.top):r.bottom(e.bottom):r.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",r=""){return this._ref.updateSize(e,r),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=as.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function Ph(t,e,r){return t._closeInteractionType=e,t.close(r)}var $_=new lt("MatMdcDialogData"),B_=new lt("mat-mdc-dialog-default-options"),F_=new lt("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let t=k(xt);return()=>No(t)}}),Yl=(()=>{class t{_defaultOptions=k(B_,{optional:!0});_scrollStrategy=k(F_);_parentDialog=k(t,{optional:!0,skipSelf:!0});_idGenerator=k(rn);_injector=k(xt);_dialog=k(Ih);_animationsDisabled=tr();_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new at;_afterOpenedAtThisLevel=new at;dialogConfigClass=ss;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let r=this._parentDialog;return r?r._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=Sn(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(dr(void 0)));constructor(){this._dialogRefConstructor=$o,this._dialogContainerType=L_,this._dialogDataToken=$_}open(r,n){let i;n=F(F({},this._defaultOptions||new ss),n),n.id=n.id||this._idGenerator.getId("mat-mdc-dialog-"),n.scrollStrategy=n.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(r,gt(F({},n),{positionStrategy:Qn(this._injector).centerHorizontally().centerVertically(),disableClose:!0,closePredicate:void 0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,disableAnimations:this._animationsDisabled||n.enterAnimationDuration?.toLocaleString()==="0"||n.exitAnimationDuration?.toString()==="0",container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:n},{provide:Yn,useValue:n}]},templateContext:()=>({dialogRef:i}),providers:(s,l,d)=>(i=new this._dialogRefConstructor(s,n,d),i.updatePosition(n?.position),[{provide:this._dialogContainerType,useValue:d},{provide:this._dialogDataToken,useValue:l.data},{provide:this._dialogRefConstructor,useValue:i}])}));return i.componentRef=o.componentRef,i.componentInstance=o.componentInstance,this.openDialogs.push(i),this.afterOpened.next(i),i.afterClosed().subscribe(()=>{let s=this.openDialogs.indexOf(i);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||this._getAfterAllClosed().next())}),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(r){return this.openDialogs.find(n=>n.id===r)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(r){let n=r.length;for(;n--;)r[n].close()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),tE=(()=>{class t{dialogRef=k($o,{optional:!0});_elementRef=k(Yt);_dialog=k(Yl);ariaLabel;type="button";dialogResult;_matDialogClose;constructor(){}ngOnInit(){this.dialogRef||(this.dialogRef=U_(this._elementRef,this._dialog.openDialogs))}ngOnChanges(r){let n=r._matDialogClose||r._matDialogCloseResult;n&&(this.dialogResult=n.currentValue)}_onButtonClick(r){Ph(this.dialogRef,r.screenX===0&&r.screenY===0?"keyboard":"mouse",this.dialogResult)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(n,i){n&1&&di("click",function(s){return i._onButtonClick(s)}),n&2&&pr("aria-label",i.ariaLabel||null)("type",i.type)},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],type:"type",dialogResult:[0,"mat-dialog-close","dialogResult"],_matDialogClose:[0,"matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[Yr]})}return t})(),j_=(()=>{class t{_dialogRef=k($o,{optional:!0});_elementRef=k(Yt);_dialog=k(Yl);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=U_(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t})}return t})(),eE=(()=>{class t extends j_{id=k(rn).getId("mat-mdc-dialog-title-");_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static \u0275fac=(()=>{let r;return function(i){return(r||(r=ze(t)))(i||t)}})();static \u0275dir=Nt({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(n,i){n&2&&qu("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],features:[Se]})}return t})(),rE=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],features:[Lp([_h])]})}return t})(),nE=(()=>{class t extends j_{align;_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}static \u0275fac=(()=>{let r;return function(i){return(r||(r=ze(t)))(i||t)}})();static \u0275dir=Nt({type:t,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(n,i){n&2&&Ze("mat-mdc-dialog-actions-align-start",i.align==="start")("mat-mdc-dialog-actions-align-center",i.align==="center")("mat-mdc-dialog-actions-align-end",i.align==="end")},inputs:{align:"align"},features:[Se]})}return t})();function U_(t,e){let r=t.nativeElement.parentElement;for(;r&&!r.classList.contains("mat-mdc-dialog-container");)r=r.parentElement;return r?e.find(n=>n.id===r.id):null}var iE=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Xt({type:t});static \u0275inj=Qt({providers:[Yl],imports:[I_,Li,on,Je,Je]})}return t})();export{nn as a,Tr as b,uE as c,kn as d,on as e,vE as f,tr as g,kE as h,VE as i,xm as j,Ax as k,Cm as l,Rm as m,Om as n,nr as o,ir as p,Sd as q,Ed as r,ke as s,hg as t,u0 as u,Sg as v,Ec as w,Ta as x,$d as y,wk as z,A0 as A,Q9 as B,J9 as C,rG as D,RO as E,oG as F,rs as G,Po as H,bh as I,xh as J,Gl as K,hn as L,Oh as M,Ni as N,Sh as O,TO as P,Li as Q,$o as R,$_ as S,Yl as T,tE as U,eE as V,rE as W,nE as X,iE as Y,qO as Z,HO as _,LQ as $,FQ as aa};
