import{$a as Ki,$c as Xr,A as Op,Aa as Ne,Ab as ra,B as xn,Ba as Fp,Bb as ci,Ca as Gt,Cc as fm,D as Ls,Db as qi,E as bt,Ea as jp,Eb as li,F as ju,Fa as Fs,Fb as ui,G as oi,Ga as Up,H as ai,Ha as ee,Hc as hm,Ia as zt,Ic as pm,J as Uu,Ja as sr,Jc as mm,K as wr,Ka as zp,Kb as Yu,Kc as ia,La as Wi,Lc as Yr,M as zi,Ma as Kr,Mb as Xu,Mc as _e,N as Vi,Na as qr,Nc as Hs,O as wn,Oa as Sr,Oc as oa,P as zu,Pa as Gr,Pc as Gi,Q as Dp,Qa as Vp,Qc as Ws,R as Ap,Ra as Cn,Rc as di,S as Vu,Sa as Wu,T as kp,Ta as js,Tc as Zu,U as ea,Ua as Us,Ub as Vs,Uc as Ju,V as or,Va as Xt,Vb as Jp,Vc as td,W as Pe,Wa as Qt,X as Hi,Xa as Pt,Xc as gm,Y as Ip,Ya as Hp,Yb as tm,Yc as vm,Z as ue,Za as be,Zc as ym,_ as ye,_a as Wp,_b as em,_c as bm,a as $,aa as ct,ab as Kp,ad as Qi,b as gt,ba as qt,bb as qp,bc as rm,ca as Tp,cb as Gp,cc as Er,d as Sw,da as lt,db as Ku,e as Ps,ea as jt,eb as qu,ec as de,f as Rw,fa as E,fb as zs,fc as nm,g as U,ga as Mp,gb as cr,gd as Sn,h as xr,hc as im,hd as aa,i as Cp,ia as ar,ib as Ke,ic as om,id as qe,j as Ui,ja as Cr,jb as Qp,k as Zo,l as ii,la as Pp,lb as Yp,lc as am,m as st,ma as Np,mb as Xp,mc as na,md as _m,n as ve,o as Sp,oc as sm,od as xm,p as Hr,pa as Ct,pc as Or,q as le,qa as oe,qb as Qr,qc as cm,r as et,ra as Lp,rb as Rr,s as Jo,sb as lr,t as ta,ta as $s,u as Rp,v as Ep,va as Bs,vc as lm,w as ut,wa as $p,wb as Zp,wc as um,x as Ns,xa as Hu,xb as Gu,y as Wt,ya as Bp,yb as si,yc as dm,z as Fu,za as Wr,zb as Qu}from"./chunk-NOAIZCS2.js";var r_=Sw((ch,lh)=>{"use strict";(function(t,e){typeof ch=="object"&&typeof lh<"u"?lh.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self,t.Dexie=e())})(ch,function(){"use strict";var t=function(a,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(u[h]=d[h])},t(a,s)};function e(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");t(a,s);function u(){this.constructor=a}a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}var r=function(){return r=Object.assign||function(s){for(var u,d=1,h=arguments.length;d<h;d++){u=arguments[d];for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(s[p]=u[p])}return s},r.apply(this,arguments)};function n(a,s,u){if(u||arguments.length===2)for(var d=0,h=s.length,p;d<h;d++)(p||!(d in s))&&(p||(p=Array.prototype.slice.call(s,0,d)),p[d]=s[d]);return a.concat(p||Array.prototype.slice.call(s))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,o=Object.keys,c=Array.isArray;typeof Promise<"u"&&!i.Promise&&(i.Promise=Promise);function l(a,s){return typeof s!="object"||o(s).forEach(function(u){a[u]=s[u]}),a}var f=Object.getPrototypeOf,g={}.hasOwnProperty;function m(a,s){return g.call(a,s)}function _(a,s){typeof s=="function"&&(s=s(f(a))),(typeof Reflect>"u"?o:Reflect.ownKeys)(s).forEach(function(u){R(a,u,s[u])})}var C=Object.defineProperty;function R(a,s,u,d){C(a,s,l(u&&m(u,"get")&&typeof u.get=="function"?{get:u.get,set:u.set,configurable:!0}:{value:u,configurable:!0,writable:!0},d))}function A(a){return{from:function(s){return a.prototype=Object.create(s.prototype),R(a.prototype,"constructor",a),{extend:_.bind(null,a.prototype)}}}}var B=Object.getOwnPropertyDescriptor;function W(a,s){var u=B(a,s),d;return u||(d=f(a))&&W(d,s)}var Z=[].slice;function tt(a,s,u){return Z.call(a,s,u)}function X(a,s){return s(a)}function Bt(a){if(!a)throw new Error("Assertion Failed")}function yt(a){i.setImmediate?setImmediate(a):setTimeout(a,0)}function Mt(a,s){return a.reduce(function(u,d,h){var p=s(d,h);return p&&(u[p[0]]=p[1]),u},{})}function vt(a,s){if(typeof s=="string"&&m(a,s))return a[s];if(!s)return a;if(typeof s!="string"){for(var u=[],d=0,h=s.length;d<h;++d){var p=vt(a,s[d]);u.push(p)}return u}var v=s.indexOf(".");if(v!==-1){var y=a[s.substr(0,v)];return y==null?void 0:vt(y,s.substr(v+1))}}function _t(a,s,u){if(!(!a||s===void 0)&&!("isFrozen"in Object&&Object.isFrozen(a)))if(typeof s!="string"&&"length"in s){Bt(typeof u!="string"&&"length"in u);for(var d=0,h=s.length;d<h;++d)_t(a,s[d],u[d])}else{var p=s.indexOf(".");if(p!==-1){var v=s.substr(0,p),y=s.substr(p+1);if(y==="")u===void 0?c(a)&&!isNaN(parseInt(v))?a.splice(v,1):delete a[v]:a[v]=u;else{var b=a[v];(!b||!m(a,v))&&(b=a[v]={}),_t(b,y,u)}}else u===void 0?c(a)&&!isNaN(parseInt(s))?a.splice(s,1):delete a[s]:a[s]=u}}function pe(a,s){typeof s=="string"?_t(a,s,void 0):"length"in s&&[].map.call(s,function(u){_t(a,u,void 0)})}function gr(a){var s={};for(var u in a)m(a,u)&&(s[u]=a[u]);return s}var No=[].concat;function ln(a){return No.apply([],a)}var Ur="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ln([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(s){return s+a+"Array"})}))).filter(function(a){return i[a]}),os=new Set(Ur.map(function(a){return i[a]}));function as(a){var s={};for(var u in a)if(m(a,u)){var d=a[u];s[u]=!d||typeof d!="object"||os.has(d.constructor)?d:as(d)}return s}function Yl(a){for(var s in a)if(m(a,s))return!1;return!0}var Gn=null;function He(a){Gn=new WeakMap;var s=un(a);return Gn=null,s}function un(a){if(!a||typeof a!="object")return a;var s=Gn.get(a);if(s)return s;if(c(a)){s=[],Gn.set(a,s);for(var u=0,d=a.length;u<d;++u)s.push(un(a[u]))}else if(os.has(a.constructor))s=a;else{var h=f(a);s=h===Object.prototype?{}:Object.create(h),Gn.set(a,s);for(var p in a)m(a,p)&&(s[p]=un(a[p]))}return s}var Lo={}.toString;function dn(a){return Lo.call(a).slice(8,-1)}var $o=typeof Symbol<"u"?Symbol.iterator:"@@iterator",we=typeof $o=="symbol"?function(a){var s;return a!=null&&(s=a[$o])&&s.apply(a)}:function(){return null};function te(a,s){var u=a.indexOf(s);return u>=0&&a.splice(u,1),u>=0}var rr={};function nr(a){var s,u,d,h;if(arguments.length===1){if(c(a))return a.slice();if(this===rr&&typeof a=="string")return[a];if(h=we(a)){for(u=[];d=h.next(),!d.done;)u.push(d.value);return u}if(a==null)return[a];if(s=a.length,typeof s=="number"){for(u=new Array(s);s--;)u[s]=a[s];return u}return[a]}for(s=arguments.length,u=new Array(s);s--;)u[s]=arguments[s];return u}var Xl=typeof Symbol<"u"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},X_=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Bh=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Zl=X_.concat(Bh),Z_={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Mi(a,s){this.name=a,this.message=s}A(Mi).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Fh(a,s){return a+". Errors: "+Object.keys(s).map(function(u){return s[u].toString()}).filter(function(u,d,h){return h.indexOf(u)===d}).join(`
`)}function ss(a,s,u,d){this.failures=s,this.failedKeys=d,this.successCount=u,this.message=Fh(a,s)}A(ss).from(Mi);function Pi(a,s){this.name="BulkError",this.failures=Object.keys(s).map(function(u){return s[u]}),this.failuresByPos=s,this.message=Fh(a,this.failures)}A(Pi).from(Mi);var Jl=Zl.reduce(function(a,s){return a[s]=s+"Error",a},{}),J_=Mi,nt=Zl.reduce(function(a,s){var u=s+"Error";function d(h,p){this.name=u,h?typeof h=="string"?(this.message="".concat(h).concat(p?`
 `+p:""),this.inner=p||null):typeof h=="object"&&(this.message="".concat(h.name," ").concat(h.message),this.inner=h):(this.message=Z_[s]||u,this.inner=null)}return A(d).from(J_),a[s]=d,a},{});nt.Syntax=SyntaxError,nt.Type=TypeError,nt.Range=RangeError;var jh=Bh.reduce(function(a,s){return a[s+"Error"]=nt[s],a},{});function tx(a,s){if(!a||a instanceof Mi||a instanceof TypeError||a instanceof SyntaxError||!a.name||!jh[a.name])return a;var u=new jh[a.name](s||a.message,a);return"stack"in a&&R(u,"stack",{get:function(){return this.inner.stack}}),u}var cs=Zl.reduce(function(a,s){return["Syntax","Type","Range"].indexOf(s)===-1&&(a[s+"Error"]=nt[s]),a},{});cs.ModifyError=ss,cs.DexieError=Mi,cs.BulkError=Pi;function kt(){}function Bo(a){return a}function ex(a,s){return a==null||a===Bo?s:function(u){return s(a(u))}}function Qn(a,s){return function(){a.apply(this,arguments),s.apply(this,arguments)}}function rx(a,s){return a===kt?s:function(){var u=a.apply(this,arguments);u!==void 0&&(arguments[0]=u);var d=this.onsuccess,h=this.onerror;this.onsuccess=null,this.onerror=null;var p=s.apply(this,arguments);return d&&(this.onsuccess=this.onsuccess?Qn(d,this.onsuccess):d),h&&(this.onerror=this.onerror?Qn(h,this.onerror):h),p!==void 0?p:u}}function nx(a,s){return a===kt?s:function(){a.apply(this,arguments);var u=this.onsuccess,d=this.onerror;this.onsuccess=this.onerror=null,s.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?Qn(u,this.onsuccess):u),d&&(this.onerror=this.onerror?Qn(d,this.onerror):d)}}function ix(a,s){return a===kt?s:function(u){var d=a.apply(this,arguments);l(u,d);var h=this.onsuccess,p=this.onerror;this.onsuccess=null,this.onerror=null;var v=s.apply(this,arguments);return h&&(this.onsuccess=this.onsuccess?Qn(h,this.onsuccess):h),p&&(this.onerror=this.onerror?Qn(p,this.onerror):p),d===void 0?v===void 0?void 0:v:l(d,v)}}function ox(a,s){return a===kt?s:function(){return s.apply(this,arguments)===!1?!1:a.apply(this,arguments)}}function tu(a,s){return a===kt?s:function(){var u=a.apply(this,arguments);if(u&&typeof u.then=="function"){for(var d=this,h=arguments.length,p=new Array(h);h--;)p[h]=arguments[h];return u.then(function(){return s.apply(d,p)})}return s.apply(this,arguments)}}var vr=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Uh(a,s){vr=a}var Fo={},zh=100,eu=typeof Promise>"u"?[]:function(){var a=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[a,f(a),a];var s=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[s,f(s),a]}(),Vh=eu[0],Hh=eu[1],ax=eu[2],sx=Hh&&Hh.then,Yn=Vh&&Vh.constructor,ru=!!ax;function cx(){queueMicrotask(ux)}var jo=function(a,s){Uo.push([a,s]),ls&&(cx(),ls=!1)},nu=!0,ls=!0,Xn=[],us=[],iu=Bo,fn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:kt,pgp:!1,env:{},finalize:kt},J=fn,Uo=[],Zn=0,ds=[];function q(a){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var s=this._PSD=J;if(typeof a!="function"){if(a!==Fo)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&au(this,this._value);return}this._state=null,this._value=null,++s.ref,Kh(this,a)}var ou={get:function(){var a=J,s=ms;function u(d,h){var p=this,v=!a.global&&(a!==J||s!==ms),y=v&&!pn(),b=new q(function(x,O){su(p,new Wh(Qh(d,a,v,y),Qh(h,a,v,y),x,O,a))});return this._consoleTask&&(b._consoleTask=this._consoleTask),b}return u.prototype=Fo,u},set:function(a){R(this,"then",a&&a.prototype===Fo?ou:{get:function(){return a},set:ou.set})}};_(q.prototype,{then:ou,_then:function(a,s){su(this,new Wh(null,null,a,s,J))},catch:function(a){if(arguments.length===1)return this.then(null,a);var s=arguments[0],u=arguments[1];return typeof s=="function"?this.then(null,function(d){return d instanceof s?u(d):fs(d)}):this.then(null,function(d){return d&&d.name===s?u(d):fs(d)})},finally:function(a){return this.then(function(s){return q.resolve(a()).then(function(){return s})},function(s){return q.resolve(a()).then(function(){return fs(s)})})},timeout:function(a,s){var u=this;return a<1/0?new q(function(d,h){var p=setTimeout(function(){return h(new nt.Timeout(s))},a);u.then(d,h).finally(clearTimeout.bind(null,p))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&R(q.prototype,Symbol.toStringTag,"Dexie.Promise"),fn.env=Gh();function Wh(a,s,u,d,h){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof s=="function"?s:null,this.resolve=u,this.reject=d,this.psd=h}_(q,{all:function(){var a=nr.apply(null,arguments).map(gs);return new q(function(s,u){a.length===0&&s([]);var d=a.length;a.forEach(function(h,p){return q.resolve(h).then(function(v){a[p]=v,--d||s(a)},u)})})},resolve:function(a){if(a instanceof q)return a;if(a&&typeof a.then=="function")return new q(function(u,d){a.then(u,d)});var s=new q(Fo,!0,a);return s},reject:fs,race:function(){var a=nr.apply(null,arguments).map(gs);return new q(function(s,u){a.map(function(d){return q.resolve(d).then(s,u)})})},PSD:{get:function(){return J},set:function(a){return J=a}},totalEchoes:{get:function(){return ms}},newPSD:hn,usePSD:Jn,scheduler:{get:function(){return jo},set:function(a){jo=a}},rejectionMapper:{get:function(){return iu},set:function(a){iu=a}},follow:function(a,s){return new q(function(u,d){return hn(function(h,p){var v=J;v.unhandleds=[],v.onunhandled=p,v.finalize=Qn(function(){var y=this;dx(function(){y.unhandleds.length===0?h():p(y.unhandleds[0])})},v.finalize),a()},s,u,d)})}}),Yn&&(Yn.allSettled&&R(q,"allSettled",function(){var a=nr.apply(null,arguments).map(gs);return new q(function(s){a.length===0&&s([]);var u=a.length,d=new Array(u);a.forEach(function(h,p){return q.resolve(h).then(function(v){return d[p]={status:"fulfilled",value:v}},function(v){return d[p]={status:"rejected",reason:v}}).then(function(){return--u||s(d)})})})}),Yn.any&&typeof AggregateError<"u"&&R(q,"any",function(){var a=nr.apply(null,arguments).map(gs);return new q(function(s,u){a.length===0&&u(new AggregateError([]));var d=a.length,h=new Array(d);a.forEach(function(p,v){return q.resolve(p).then(function(y){return s(y)},function(y){h[v]=y,--d||u(new AggregateError(h))})})})}),Yn.withResolvers&&(q.withResolvers=Yn.withResolvers));function Kh(a,s){try{s(function(u){if(a._state===null){if(u===a)throw new TypeError("A promise cannot be resolved with itself.");var d=a._lib&&Ni();u&&typeof u.then=="function"?Kh(a,function(h,p){u instanceof q?u._then(h,p):u.then(h,p)}):(a._state=!0,a._value=u,qh(a)),d&&Li()}},au.bind(null,a))}catch(u){au(a,u)}}function au(a,s){if(us.push(s),a._state===null){var u=a._lib&&Ni();s=iu(s),a._state=!1,a._value=s,fx(a),qh(a),u&&Li()}}function qh(a){var s=a._listeners;a._listeners=[];for(var u=0,d=s.length;u<d;++u)su(a,s[u]);var h=a._PSD;--h.ref||h.finalize(),Zn===0&&(++Zn,jo(function(){--Zn===0&&cu()},[]))}function su(a,s){if(a._state===null){a._listeners.push(s);return}var u=a._state?s.onFulfilled:s.onRejected;if(u===null)return(a._state?s.resolve:s.reject)(a._value);++s.psd.ref,++Zn,jo(lx,[u,a,s])}function lx(a,s,u){try{var d,h=s._value;!s._state&&us.length&&(us=[]),d=vr&&s._consoleTask?s._consoleTask.run(function(){return a(h)}):a(h),!s._state&&us.indexOf(h)===-1&&hx(s),u.resolve(d)}catch(p){u.reject(p)}finally{--Zn===0&&cu(),--u.psd.ref||u.psd.finalize()}}function ux(){Jn(fn,function(){Ni()&&Li()})}function Ni(){var a=nu;return nu=!1,ls=!1,a}function Li(){var a,s,u;do for(;Uo.length>0;)for(a=Uo,Uo=[],u=a.length,s=0;s<u;++s){var d=a[s];d[0].apply(null,d[1])}while(Uo.length>0);nu=!0,ls=!0}function cu(){var a=Xn;Xn=[],a.forEach(function(d){d._PSD.onunhandled.call(null,d._value,d)});for(var s=ds.slice(0),u=s.length;u;)s[--u]()}function dx(a){function s(){a(),ds.splice(ds.indexOf(s),1)}ds.push(s),++Zn,jo(function(){--Zn===0&&cu()},[])}function fx(a){Xn.some(function(s){return s._value===a._value})||Xn.push(a)}function hx(a){for(var s=Xn.length;s;)if(Xn[--s]._value===a._value){Xn.splice(s,1);return}}function fs(a){return new q(Fo,!1,a)}function Ft(a,s){var u=J;return function(){var d=Ni(),h=J;try{return mn(u,!0),a.apply(this,arguments)}catch(p){s&&s(p)}finally{mn(h,!1),d&&Li()}}}var ie={awaits:0,echoes:0,id:0},px=0,hs=[],ps=0,ms=0,mx=0;function hn(a,s,u,d){var h=J,p=Object.create(h);p.parent=h,p.ref=0,p.global=!1,p.id=++mx,fn.env,p.env=ru?{Promise:q,PromiseProp:{value:q,configurable:!0,writable:!0},all:q.all,race:q.race,allSettled:q.allSettled,any:q.any,resolve:q.resolve,reject:q.reject}:{},s&&l(p,s),++h.ref,p.finalize=function(){--this.parent.ref||this.parent.finalize()};var v=Jn(p,a,u,d);return p.ref===0&&p.finalize(),v}function $i(){return ie.id||(ie.id=++px),++ie.awaits,ie.echoes+=zh,ie.id}function pn(){return ie.awaits?(--ie.awaits===0&&(ie.id=0),ie.echoes=ie.awaits*zh,!0):!1}(""+sx).indexOf("[native code]")===-1&&($i=pn=kt);function gs(a){return ie.echoes&&a&&a.constructor===Yn?($i(),a.then(function(s){return pn(),s},function(s){return pn(),Kt(s)})):a}function gx(a){++ms,(!ie.echoes||--ie.echoes===0)&&(ie.echoes=ie.awaits=ie.id=0),hs.push(J),mn(a,!0)}function vx(){var a=hs[hs.length-1];hs.pop(),mn(a,!1)}function mn(a,s){var u=J;if((s?ie.echoes&&(!ps++||a!==J):ps&&(!--ps||a!==J))&&queueMicrotask(s?gx.bind(null,a):vx),a!==J&&(J=a,u===fn&&(fn.env=Gh()),ru)){var d=fn.env.Promise,h=a.env;(u.global||a.global)&&(Object.defineProperty(i,"Promise",h.PromiseProp),d.all=h.all,d.race=h.race,d.resolve=h.resolve,d.reject=h.reject,h.allSettled&&(d.allSettled=h.allSettled),h.any&&(d.any=h.any))}}function Gh(){var a=i.Promise;return ru?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject}:{}}function Jn(a,s,u,d,h){var p=J;try{return mn(a,!0),s(u,d,h)}finally{mn(p,!1)}}function Qh(a,s,u,d){return typeof a!="function"?a:function(){var h=J;u&&$i(),mn(s,!0);try{return a.apply(this,arguments)}finally{mn(h,!1),d&&queueMicrotask(pn)}}}function lu(a){Promise===Yn&&ie.echoes===0?ps===0?a():enqueueNativeMicroTask(a):setTimeout(a,0)}var Kt=q.reject;function uu(a,s,u,d){if(!a.idbdb||!a._state.openComplete&&!J.letThrough&&!a._vip){if(a._state.openComplete)return Kt(new nt.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._state.autoOpen)return Kt(new nt.DatabaseClosed);a.open().catch(kt)}return a._state.dbReadyPromise.then(function(){return uu(a,s,u,d)})}else{var h=a._createTransaction(s,u,a._dbSchema);try{h.create(),a._state.PR1398_maxLoop=3}catch(p){return p.name===Jl.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),a.close({disableAutoOpen:!1}),a.open().then(function(){return uu(a,s,u,d)})):Kt(p)}return h._promise(s,function(p,v){return hn(function(){return J.trans=h,d(p,v,h)})}).then(function(p){if(s==="readwrite")try{h.idbtrans.commit()}catch{}return s==="readonly"?p:h._completion.then(function(){return p})})}}var Yh="4.0.10",ti="\uFFFF",du=-1/0,zr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Xh="String expected.",Bi=[],vs="__dbnames",fu="readonly",hu="readwrite";function ei(a,s){return a?s?function(){return a.apply(this,arguments)&&s.apply(this,arguments)}:a:s}var Zh={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ys(a){return typeof a=="string"&&!/\./.test(a)?function(s){return s[a]===void 0&&a in s&&(s=He(s),delete s[a]),s}:function(s){return s}}function Jh(){throw nt.Type()}function xt(a,s){try{var u=tp(a),d=tp(s);if(u!==d)return u==="Array"?1:d==="Array"?-1:u==="binary"?1:d==="binary"?-1:u==="string"?1:d==="string"?-1:u==="Date"?1:d!=="Date"?NaN:-1;switch(u){case"number":case"Date":case"string":return a>s?1:a<s?-1:0;case"binary":return bx(ep(a),ep(s));case"Array":return yx(a,s)}}catch{}return NaN}function yx(a,s){for(var u=a.length,d=s.length,h=u<d?u:d,p=0;p<h;++p){var v=xt(a[p],s[p]);if(v!==0)return v}return u===d?0:u<d?-1:1}function bx(a,s){for(var u=a.length,d=s.length,h=u<d?u:d,p=0;p<h;++p)if(a[p]!==s[p])return a[p]<s[p]?-1:1;return u===d?0:u<d?-1:1}function tp(a){var s=typeof a;if(s!=="object")return s;if(ArrayBuffer.isView(a))return"binary";var u=dn(a);return u==="ArrayBuffer"?"binary":u}function ep(a){return a instanceof Uint8Array?a:ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var rp=function(){function a(){}return a.prototype._trans=function(s,u,d){var h=this._tx||J.trans,p=this.name,v=vr&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(s==="readonly"?"read":"write"," ").concat(this.name));function y(O,w,M){if(!M.schema[p])throw new nt.NotFound("Table "+p+" not part of transaction");return u(M.idbtrans,M)}var b=Ni();try{var x=h&&h.db._novip===this.db._novip?h===J.trans?h._promise(s,y,d):hn(function(){return h._promise(s,y,d)},{trans:h,transless:J.transless||J}):uu(this.db,s,[this.name],y);return v&&(x._consoleTask=v,x=x.catch(function(O){return console.trace(O),Kt(O)})),x}finally{b&&Li()}},a.prototype.get=function(s,u){var d=this;return s&&s.constructor===Object?this.where(s).first(u):s==null?Kt(new nt.Type("Invalid argument to Table.get()")):this._trans("readonly",function(h){return d.core.get({trans:h,key:s}).then(function(p){return d.hook.reading.fire(p)})}).then(u)},a.prototype.where=function(s){if(typeof s=="string")return new this.db.WhereClause(this,s);if(c(s))return new this.db.WhereClause(this,"[".concat(s.join("+"),"]"));var u=o(s);if(u.length===1)return this.where(u[0]).equals(s[u[0]]);var d=this.schema.indexes.concat(this.schema.primKey).filter(function(O){if(O.compound&&u.every(function(M){return O.keyPath.indexOf(M)>=0})){for(var w=0;w<u.length;++w)if(u.indexOf(O.keyPath[w])===-1)return!1;return!0}return!1}).sort(function(O,w){return O.keyPath.length-w.keyPath.length})[0];if(d&&this.db._maxKey!==ti){var h=d.keyPath.slice(0,u.length);return this.where(h).equals(h.map(function(O){return s[O]}))}!d&&vr&&console.warn("The query ".concat(JSON.stringify(s)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(u.join("+"),"]"));var p=this.schema.idxByName;function v(O,w){return xt(O,w)===0}var y=u.reduce(function(O,w){var M=O[0],z=O[1],S=p[w],D=s[w];return[M||S,M||!S?ei(z,S&&S.multi?function(k){var F=vt(k,w);return c(F)&&F.some(function(N){return v(D,N)})}:function(k){return v(D,vt(k,w))}):z]},[null,null]),b=y[0],x=y[1];return b?this.where(b.name).equals(s[b.keyPath]).filter(x):d?this.filter(x):this.where(u).equals("")},a.prototype.filter=function(s){return this.toCollection().and(s)},a.prototype.count=function(s){return this.toCollection().count(s)},a.prototype.offset=function(s){return this.toCollection().offset(s)},a.prototype.limit=function(s){return this.toCollection().limit(s)},a.prototype.each=function(s){return this.toCollection().each(s)},a.prototype.toArray=function(s){return this.toCollection().toArray(s)},a.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},a.prototype.orderBy=function(s){return new this.db.Collection(new this.db.WhereClause(this,c(s)?"[".concat(s.join("+"),"]"):s))},a.prototype.reverse=function(){return this.toCollection().reverse()},a.prototype.mapToClass=function(s){var u=this,d=u.db,h=u.name;this.schema.mappedClass=s,s.prototype instanceof Jh&&(s=function(b){e(x,b);function x(){return b!==null&&b.apply(this,arguments)||this}return Object.defineProperty(x.prototype,"db",{get:function(){return d},enumerable:!1,configurable:!0}),x.prototype.table=function(){return h},x}(s));for(var p=new Set,v=s.prototype;v;v=f(v))Object.getOwnPropertyNames(v).forEach(function(b){return p.add(b)});var y=function(b){if(!b)return b;var x=Object.create(s.prototype);for(var O in b)if(!p.has(O))try{x[O]=b[O]}catch{}return x};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=y,this.hook("reading",y),s},a.prototype.defineClass=function(){function s(u){l(this,u)}return this.mapToClass(s)},a.prototype.add=function(s,u){var d=this,h=this.schema.primKey,p=h.auto,v=h.keyPath,y=s;return v&&p&&(y=ys(v)(s)),this._trans("readwrite",function(b){return d.core.mutate({trans:b,type:"add",keys:u!=null?[u]:null,values:[y]})}).then(function(b){return b.numFailures?q.reject(b.failures[0]):b.lastResult}).then(function(b){if(v)try{_t(s,v,b)}catch{}return b})},a.prototype.update=function(s,u){if(typeof s=="object"&&!c(s)){var d=vt(s,this.schema.primKey.keyPath);return d===void 0?Kt(new nt.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(d).modify(u)}else return this.where(":id").equals(s).modify(u)},a.prototype.put=function(s,u){var d=this,h=this.schema.primKey,p=h.auto,v=h.keyPath,y=s;return v&&p&&(y=ys(v)(s)),this._trans("readwrite",function(b){return d.core.mutate({trans:b,type:"put",values:[y],keys:u!=null?[u]:null})}).then(function(b){return b.numFailures?q.reject(b.failures[0]):b.lastResult}).then(function(b){if(v)try{_t(s,v,b)}catch{}return b})},a.prototype.delete=function(s){var u=this;return this._trans("readwrite",function(d){return u.core.mutate({trans:d,type:"delete",keys:[s]})}).then(function(d){return d.numFailures?q.reject(d.failures[0]):void 0})},a.prototype.clear=function(){var s=this;return this._trans("readwrite",function(u){return s.core.mutate({trans:u,type:"deleteRange",range:Zh})}).then(function(u){return u.numFailures?q.reject(u.failures[0]):void 0})},a.prototype.bulkGet=function(s){var u=this;return this._trans("readonly",function(d){return u.core.getMany({keys:s,trans:d}).then(function(h){return h.map(function(p){return u.hook.reading.fire(p)})})})},a.prototype.bulkAdd=function(s,u,d){var h=this,p=Array.isArray(u)?u:void 0;d=d||(p?void 0:u);var v=d?d.allKeys:void 0;return this._trans("readwrite",function(y){var b=h.schema.primKey,x=b.auto,O=b.keyPath;if(O&&p)throw new nt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(p&&p.length!==s.length)throw new nt.InvalidArgument("Arguments objects and keys must have the same length");var w=s.length,M=O&&x?s.map(ys(O)):s;return h.core.mutate({trans:y,type:"add",keys:p,values:M,wantResults:v}).then(function(z){var S=z.numFailures,D=z.results,k=z.lastResult,F=z.failures,N=v?D:k;if(S===0)return N;throw new Pi("".concat(h.name,".bulkAdd(): ").concat(S," of ").concat(w," operations failed"),F)})})},a.prototype.bulkPut=function(s,u,d){var h=this,p=Array.isArray(u)?u:void 0;d=d||(p?void 0:u);var v=d?d.allKeys:void 0;return this._trans("readwrite",function(y){var b=h.schema.primKey,x=b.auto,O=b.keyPath;if(O&&p)throw new nt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(p&&p.length!==s.length)throw new nt.InvalidArgument("Arguments objects and keys must have the same length");var w=s.length,M=O&&x?s.map(ys(O)):s;return h.core.mutate({trans:y,type:"put",keys:p,values:M,wantResults:v}).then(function(z){var S=z.numFailures,D=z.results,k=z.lastResult,F=z.failures,N=v?D:k;if(S===0)return N;throw new Pi("".concat(h.name,".bulkPut(): ").concat(S," of ").concat(w," operations failed"),F)})})},a.prototype.bulkUpdate=function(s){var u=this,d=this.core,h=s.map(function(y){return y.key}),p=s.map(function(y){return y.changes}),v=[];return this._trans("readwrite",function(y){return d.getMany({trans:y,keys:h,cache:"clone"}).then(function(b){var x=[],O=[];s.forEach(function(M,z){var S=M.key,D=M.changes,k=b[z];if(k){for(var F=0,N=Object.keys(D);F<N.length;F++){var L=N[F],j=D[L];if(L===u.schema.primKey.keyPath){if(xt(j,S)!==0)throw new nt.Constraint("Cannot update primary key in bulkUpdate()")}else _t(k,L,j)}v.push(z),x.push(S),O.push(k)}});var w=x.length;return d.mutate({trans:y,type:"put",keys:x,values:O,updates:{keys:h,changeSpecs:p}}).then(function(M){var z=M.numFailures,S=M.failures;if(z===0)return w;for(var D=0,k=Object.keys(S);D<k.length;D++){var F=k[D],N=v[Number(F)];if(N!=null){var L=S[F];delete S[F],S[N]=L}}throw new Pi("".concat(u.name,".bulkUpdate(): ").concat(z," of ").concat(w," operations failed"),S)})})})},a.prototype.bulkDelete=function(s){var u=this,d=s.length;return this._trans("readwrite",function(h){return u.core.mutate({trans:h,type:"delete",keys:s})}).then(function(h){var p=h.numFailures,v=h.lastResult,y=h.failures;if(p===0)return v;throw new Pi("".concat(u.name,".bulkDelete(): ").concat(p," of ").concat(d," operations failed"),y)})},a}();function zo(a){var s={},u=function(y,b){if(b){for(var x=arguments.length,O=new Array(x-1);--x;)O[x-1]=arguments[x];return s[y].subscribe.apply(null,O),a}else if(typeof y=="string")return s[y]};u.addEventType=p;for(var d=1,h=arguments.length;d<h;++d)p(arguments[d]);return u;function p(y,b,x){if(typeof y=="object")return v(y);b||(b=ox),x||(x=kt);var O={subscribers:[],fire:x,subscribe:function(w){O.subscribers.indexOf(w)===-1&&(O.subscribers.push(w),O.fire=b(O.fire,w))},unsubscribe:function(w){O.subscribers=O.subscribers.filter(function(M){return M!==w}),O.fire=O.subscribers.reduce(b,x)}};return s[y]=u[y]=O,O}function v(y){o(y).forEach(function(b){var x=y[b];if(c(x))p(b,y[b][0],y[b][1]);else if(x==="asap")var O=p(b,Bo,function(){for(var M=arguments.length,z=new Array(M);M--;)z[M]=arguments[M];O.subscribers.forEach(function(S){yt(function(){S.apply(null,z)})})});else throw new nt.InvalidArgument("Invalid event config")})}}function Vo(a,s){return A(s).from({prototype:a}),s}function _x(a){return Vo(rp.prototype,function(u,d,h){this.db=a,this._tx=h,this.name=u,this.schema=d,this.hook=a._allTables[u]?a._allTables[u].hook:zo(null,{creating:[rx,kt],reading:[ex,Bo],updating:[ix,kt],deleting:[nx,kt]})})}function Fi(a,s){return!(a.filter||a.algorithm||a.or)&&(s?a.justLimit:!a.replayFilter)}function pu(a,s){a.filter=ei(a.filter,s)}function mu(a,s,u){var d=a.replayFilter;a.replayFilter=d?function(){return ei(d(),s())}:s,a.justLimit=u&&!d}function xx(a,s){a.isMatch=ei(a.isMatch,s)}function bs(a,s){if(a.isPrimKey)return s.primaryKey;var u=s.getIndexByKeyPath(a.index);if(!u)throw new nt.Schema("KeyPath "+a.index+" on object store "+s.name+" is not indexed");return u}function np(a,s,u){var d=bs(a,s.schema);return s.openCursor({trans:u,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:d,range:a.range}})}function _s(a,s,u,d){var h=a.replayFilter?ei(a.filter,a.replayFilter()):a.filter;if(a.or){var p={},v=function(y,b,x){if(!h||h(b,x,function(M){return b.stop(M)},function(M){return b.fail(M)})){var O=b.primaryKey,w=""+O;w==="[object ArrayBuffer]"&&(w=""+new Uint8Array(O)),m(p,w)||(p[w]=!0,s(y,b,x))}};return Promise.all([a.or._iterate(v,u),ip(np(a,d,u),a.algorithm,v,!a.keysOnly&&a.valueMapper)])}else return ip(np(a,d,u),ei(a.algorithm,h),s,!a.keysOnly&&a.valueMapper)}function ip(a,s,u,d){var h=d?function(v,y,b){return u(d(v),y,b)}:u,p=Ft(h);return a.then(function(v){if(v)return v.start(function(){var y=function(){return v.continue()};(!s||s(v,function(b){return y=b},function(b){v.stop(b),y=kt},function(b){v.fail(b),y=kt}))&&p(v.value,v,function(b){return y=b}),y()})})}var wx=Symbol(),Ho=function(){function a(s){Object.assign(this,s)}return a.prototype.execute=function(s){var u;if(this.add!==void 0){var d=this.add;if(c(d))return n(n([],c(s)?s:[],!0),d,!0).sort();if(typeof d=="number")return(Number(s)||0)+d;if(typeof d=="bigint")try{return BigInt(s)+d}catch{return BigInt(0)+d}throw new TypeError("Invalid term ".concat(d))}if(this.remove!==void 0){var h=this.remove;if(c(h))return c(s)?s.filter(function(v){return!h.includes(v)}).sort():[];if(typeof h=="number")return Number(s)-h;if(typeof h=="bigint")try{return BigInt(s)-h}catch{return BigInt(0)-h}throw new TypeError("Invalid subtrahend ".concat(h))}var p=(u=this.replacePrefix)===null||u===void 0?void 0:u[0];return p&&typeof s=="string"&&s.startsWith(p)?this.replacePrefix[1]+s.substring(p.length):s},a}(),Cx=function(){function a(){}return a.prototype._read=function(s,u){var d=this._ctx;return d.error?d.table._trans(null,Kt.bind(null,d.error)):d.table._trans("readonly",s).then(u)},a.prototype._write=function(s){var u=this._ctx;return u.error?u.table._trans(null,Kt.bind(null,u.error)):u.table._trans("readwrite",s,"locked")},a.prototype._addAlgorithm=function(s){var u=this._ctx;u.algorithm=ei(u.algorithm,s)},a.prototype._iterate=function(s,u){return _s(this._ctx,s,u,this._ctx.table.core)},a.prototype.clone=function(s){var u=Object.create(this.constructor.prototype),d=Object.create(this._ctx);return s&&l(d,s),u._ctx=d,u},a.prototype.raw=function(){return this._ctx.valueMapper=null,this},a.prototype.each=function(s){var u=this._ctx;return this._read(function(d){return _s(u,s,d,u.table.core)})},a.prototype.count=function(s){var u=this;return this._read(function(d){var h=u._ctx,p=h.table.core;if(Fi(h,!0))return p.count({trans:d,query:{index:bs(h,p.schema),range:h.range}}).then(function(y){return Math.min(y,h.limit)});var v=0;return _s(h,function(){return++v,!1},d,p).then(function(){return v})}).then(s)},a.prototype.sortBy=function(s,u){var d=s.split(".").reverse(),h=d[0],p=d.length-1;function v(x,O){return O?v(x[d[O]],O-1):x[h]}var y=this._ctx.dir==="next"?1:-1;function b(x,O){var w=v(x,p),M=v(O,p);return xt(w,M)*y}return this.toArray(function(x){return x.sort(b)}).then(u)},a.prototype.toArray=function(s){var u=this;return this._read(function(d){var h=u._ctx;if(h.dir==="next"&&Fi(h,!0)&&h.limit>0){var p=h.valueMapper,v=bs(h,h.table.core.schema);return h.table.core.query({trans:d,limit:h.limit,values:!0,query:{index:v,range:h.range}}).then(function(b){var x=b.result;return p?x.map(p):x})}else{var y=[];return _s(h,function(b){return y.push(b)},d,h.table.core).then(function(){return y})}},s)},a.prototype.offset=function(s){var u=this._ctx;return s<=0?this:(u.offset+=s,Fi(u)?mu(u,function(){var d=s;return function(h,p){return d===0?!0:d===1?(--d,!1):(p(function(){h.advance(d),d=0}),!1)}}):mu(u,function(){var d=s;return function(){return--d<0}}),this)},a.prototype.limit=function(s){return this._ctx.limit=Math.min(this._ctx.limit,s),mu(this._ctx,function(){var u=s;return function(d,h,p){return--u<=0&&h(p),u>=0}},!0),this},a.prototype.until=function(s,u){return pu(this._ctx,function(d,h,p){return s(d.value)?(h(p),u):!0}),this},a.prototype.first=function(s){return this.limit(1).toArray(function(u){return u[0]}).then(s)},a.prototype.last=function(s){return this.reverse().first(s)},a.prototype.filter=function(s){return pu(this._ctx,function(u){return s(u.value)}),xx(this._ctx,s),this},a.prototype.and=function(s){return this.filter(s)},a.prototype.or=function(s){return new this.db.WhereClause(this._ctx.table,s,this)},a.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},a.prototype.desc=function(){return this.reverse()},a.prototype.eachKey=function(s){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(d,h){s(h.key,h)})},a.prototype.eachUniqueKey=function(s){return this._ctx.unique="unique",this.eachKey(s)},a.prototype.eachPrimaryKey=function(s){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(d,h){s(h.primaryKey,h)})},a.prototype.keys=function(s){var u=this._ctx;u.keysOnly=!u.isMatch;var d=[];return this.each(function(h,p){d.push(p.key)}).then(function(){return d}).then(s)},a.prototype.primaryKeys=function(s){var u=this._ctx;if(u.dir==="next"&&Fi(u,!0)&&u.limit>0)return this._read(function(h){var p=bs(u,u.table.core.schema);return u.table.core.query({trans:h,values:!1,limit:u.limit,query:{index:p,range:u.range}})}).then(function(h){var p=h.result;return p}).then(s);u.keysOnly=!u.isMatch;var d=[];return this.each(function(h,p){d.push(p.primaryKey)}).then(function(){return d}).then(s)},a.prototype.uniqueKeys=function(s){return this._ctx.unique="unique",this.keys(s)},a.prototype.firstKey=function(s){return this.limit(1).keys(function(u){return u[0]}).then(s)},a.prototype.lastKey=function(s){return this.reverse().firstKey(s)},a.prototype.distinct=function(){var s=this._ctx,u=s.index&&s.table.schema.idxByName[s.index];if(!u||!u.multi)return this;var d={};return pu(this._ctx,function(h){var p=h.primaryKey.toString(),v=m(d,p);return d[p]=!0,!v}),this},a.prototype.modify=function(s){var u=this,d=this._ctx;return this._write(function(h){var p;if(typeof s=="function")p=s;else{var v=o(s),y=v.length;p=function(N){for(var L=!1,j=0;j<y;++j){var P=v[j],H=s[P],G=vt(N,P);H instanceof Ho?(_t(N,P,H.execute(G)),L=!0):G!==H&&(_t(N,P,H),L=!0)}return L}}var b=d.table.core,x=b.schema.primaryKey,O=x.outbound,w=x.extractKey,M=200,z=u.db._options.modifyChunkSize;z&&(typeof z=="object"?M=z[b.name]||z["*"]||200:M=z);var S=[],D=0,k=[],F=function(N,L){var j=L.failures,P=L.numFailures;D+=N-P;for(var H=0,G=o(j);H<G.length;H++){var K=G[H];S.push(j[K])}};return u.clone().primaryKeys().then(function(N){var L=Fi(d)&&d.limit===1/0&&(typeof s!="function"||s===gu)&&{index:d.index,range:d.range},j=function(P){var H=Math.min(M,N.length-P);return b.getMany({trans:h,keys:N.slice(P,P+H),cache:"immutable"}).then(function(G){for(var K=[],it=[],mt=O?[]:null,Y=[],pt=0;pt<H;++pt){var at=G[pt],wt={value:He(at),primKey:N[P+pt]};p.call(wt,wt.value,wt)!==!1&&(wt.value==null?Y.push(N[P+pt]):!O&&xt(w(at),w(wt.value))!==0?(Y.push(N[P+pt]),K.push(wt.value)):(it.push(wt.value),O&&mt.push(N[P+pt])))}return Promise.resolve(K.length>0&&b.mutate({trans:h,type:"add",values:K}).then(function(rt){for(var Ht in rt.failures)Y.splice(parseInt(Ht),1);F(K.length,rt)})).then(function(){return(it.length>0||L&&typeof s=="object")&&b.mutate({trans:h,type:"put",keys:mt,values:it,criteria:L,changeSpec:typeof s!="function"&&s,isAdditionalChunk:P>0}).then(function(rt){return F(it.length,rt)})}).then(function(){return(Y.length>0||L&&s===gu)&&b.mutate({trans:h,type:"delete",keys:Y,criteria:L,isAdditionalChunk:P>0}).then(function(rt){return F(Y.length,rt)})}).then(function(){return N.length>P+H&&j(P+M)})})};return j(0).then(function(){if(S.length>0)throw new ss("Error modifying one or more objects",S,D,k);return N.length})})})},a.prototype.delete=function(){var s=this._ctx,u=s.range;return Fi(s)&&(s.isPrimKey||u.type===3)?this._write(function(d){var h=s.table.core.schema.primaryKey,p=u;return s.table.core.count({trans:d,query:{index:h,range:p}}).then(function(v){return s.table.core.mutate({trans:d,type:"deleteRange",range:p}).then(function(y){var b=y.failures;y.lastResult,y.results;var x=y.numFailures;if(x)throw new ss("Could not delete some values",Object.keys(b).map(function(O){return b[O]}),v-x);return v-x})})}):this.modify(gu)},a}(),gu=function(a,s){return s.value=null};function Sx(a){return Vo(Cx.prototype,function(u,d){this.db=a;var h=Zh,p=null;if(d)try{h=d()}catch(x){p=x}var v=u._ctx,y=v.table,b=y.hook.reading.fire;this._ctx={table:y,index:v.index,isPrimKey:!v.index||y.schema.primKey.keyPath&&v.index===y.schema.primKey.name,range:h,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:p,or:v.or,valueMapper:b!==Bo?b:null}})}function Rx(a,s){return a<s?-1:a===s?0:1}function Ex(a,s){return a>s?-1:a===s?0:1}function Me(a,s,u){var d=a instanceof ap?new a.Collection(a):a;return d._ctx.error=u?new u(s):new TypeError(s),d}function ji(a){return new a.Collection(a,function(){return op("")}).limit(0)}function Ox(a){return a==="next"?function(s){return s.toUpperCase()}:function(s){return s.toLowerCase()}}function Dx(a){return a==="next"?function(s){return s.toLowerCase()}:function(s){return s.toUpperCase()}}function Ax(a,s,u,d,h,p){for(var v=Math.min(a.length,d.length),y=-1,b=0;b<v;++b){var x=s[b];if(x!==d[b])return h(a[b],u[b])<0?a.substr(0,b)+u[b]+u.substr(b+1):h(a[b],d[b])<0?a.substr(0,b)+d[b]+u.substr(b+1):y>=0?a.substr(0,y)+s[y]+u.substr(y+1):null;h(a[b],x)<0&&(y=b)}return v<d.length&&p==="next"?a+u.substr(a.length):v<a.length&&p==="prev"?a.substr(0,u.length):y<0?null:a.substr(0,y)+d[y]+u.substr(y+1)}function xs(a,s,u,d){var h,p,v,y,b,x,O,w=u.length;if(!u.every(function(D){return typeof D=="string"}))return Me(a,Xh);function M(D){h=Ox(D),p=Dx(D),v=D==="next"?Rx:Ex;var k=u.map(function(F){return{lower:p(F),upper:h(F)}}).sort(function(F,N){return v(F.lower,N.lower)});y=k.map(function(F){return F.upper}),b=k.map(function(F){return F.lower}),x=D,O=D==="next"?"":d}M("next");var z=new a.Collection(a,function(){return gn(y[0],b[w-1]+d)});z._ondirectionchange=function(D){M(D)};var S=0;return z._addAlgorithm(function(D,k,F){var N=D.key;if(typeof N!="string")return!1;var L=p(N);if(s(L,b,S))return!0;for(var j=null,P=S;P<w;++P){var H=Ax(N,L,y[P],b[P],v,x);H===null&&j===null?S=P+1:(j===null||v(j,H)>0)&&(j=H)}return k(j!==null?function(){D.continue(j+O)}:F),!1}),z}function gn(a,s,u,d){return{type:2,lower:a,upper:s,lowerOpen:u,upperOpen:d}}function op(a){return{type:1,lower:a,upper:a}}var ap=function(){function a(){}return Object.defineProperty(a.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),a.prototype.between=function(s,u,d,h){d=d!==!1,h=h===!0;try{return this._cmp(s,u)>0||this._cmp(s,u)===0&&(d||h)&&!(d&&h)?ji(this):new this.Collection(this,function(){return gn(s,u,!d,!h)})}catch{return Me(this,zr)}},a.prototype.equals=function(s){return s==null?Me(this,zr):new this.Collection(this,function(){return op(s)})},a.prototype.above=function(s){return s==null?Me(this,zr):new this.Collection(this,function(){return gn(s,void 0,!0)})},a.prototype.aboveOrEqual=function(s){return s==null?Me(this,zr):new this.Collection(this,function(){return gn(s,void 0,!1)})},a.prototype.below=function(s){return s==null?Me(this,zr):new this.Collection(this,function(){return gn(void 0,s,!1,!0)})},a.prototype.belowOrEqual=function(s){return s==null?Me(this,zr):new this.Collection(this,function(){return gn(void 0,s)})},a.prototype.startsWith=function(s){return typeof s!="string"?Me(this,Xh):this.between(s,s+ti,!0,!0)},a.prototype.startsWithIgnoreCase=function(s){return s===""?this.startsWith(s):xs(this,function(u,d){return u.indexOf(d[0])===0},[s],ti)},a.prototype.equalsIgnoreCase=function(s){return xs(this,function(u,d){return u===d[0]},[s],"")},a.prototype.anyOfIgnoreCase=function(){var s=nr.apply(rr,arguments);return s.length===0?ji(this):xs(this,function(u,d){return d.indexOf(u)!==-1},s,"")},a.prototype.startsWithAnyOfIgnoreCase=function(){var s=nr.apply(rr,arguments);return s.length===0?ji(this):xs(this,function(u,d){return d.some(function(h){return u.indexOf(h)===0})},s,ti)},a.prototype.anyOf=function(){var s=this,u=nr.apply(rr,arguments),d=this._cmp;try{u.sort(d)}catch{return Me(this,zr)}if(u.length===0)return ji(this);var h=new this.Collection(this,function(){return gn(u[0],u[u.length-1])});h._ondirectionchange=function(v){d=v==="next"?s._ascending:s._descending,u.sort(d)};var p=0;return h._addAlgorithm(function(v,y,b){for(var x=v.key;d(x,u[p])>0;)if(++p,p===u.length)return y(b),!1;return d(x,u[p])===0?!0:(y(function(){v.continue(u[p])}),!1)}),h},a.prototype.notEqual=function(s){return this.inAnyRange([[du,s],[s,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},a.prototype.noneOf=function(){var s=nr.apply(rr,arguments);if(s.length===0)return new this.Collection(this);try{s.sort(this._ascending)}catch{return Me(this,zr)}var u=s.reduce(function(d,h){return d?d.concat([[d[d.length-1][1],h]]):[[du,h]]},null);return u.push([s[s.length-1],this.db._maxKey]),this.inAnyRange(u,{includeLowers:!1,includeUppers:!1})},a.prototype.inAnyRange=function(s,u){var d=this,h=this._cmp,p=this._ascending,v=this._descending,y=this._min,b=this._max;if(s.length===0)return ji(this);if(!s.every(function(P){return P[0]!==void 0&&P[1]!==void 0&&p(P[0],P[1])<=0}))return Me(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",nt.InvalidArgument);var x=!u||u.includeLowers!==!1,O=u&&u.includeUppers===!0;function w(P,H){for(var G=0,K=P.length;G<K;++G){var it=P[G];if(h(H[0],it[1])<0&&h(H[1],it[0])>0){it[0]=y(it[0],H[0]),it[1]=b(it[1],H[1]);break}}return G===K&&P.push(H),P}var M=p;function z(P,H){return M(P[0],H[0])}var S;try{S=s.reduce(w,[]),S.sort(z)}catch{return Me(this,zr)}var D=0,k=O?function(P){return p(P,S[D][1])>0}:function(P){return p(P,S[D][1])>=0},F=x?function(P){return v(P,S[D][0])>0}:function(P){return v(P,S[D][0])>=0};function N(P){return!k(P)&&!F(P)}var L=k,j=new this.Collection(this,function(){return gn(S[0][0],S[S.length-1][1],!x,!O)});return j._ondirectionchange=function(P){P==="next"?(L=k,M=p):(L=F,M=v),S.sort(z)},j._addAlgorithm(function(P,H,G){for(var K=P.key;L(K);)if(++D,D===S.length)return H(G),!1;return N(K)?!0:(d._cmp(K,S[D][1])===0||d._cmp(K,S[D][0])===0||H(function(){M===p?P.continue(S[D][0]):P.continue(S[D][1])}),!1)}),j},a.prototype.startsWithAnyOf=function(){var s=nr.apply(rr,arguments);return s.every(function(u){return typeof u=="string"})?s.length===0?ji(this):this.inAnyRange(s.map(function(u){return[u,u+ti]})):Me(this,"startsWithAnyOf() only works with strings")},a}();function kx(a){return Vo(ap.prototype,function(u,d,h){if(this.db=a,this._ctx={table:u,index:d===":id"?null:d,or:h},this._cmp=this._ascending=xt,this._descending=function(p,v){return xt(v,p)},this._max=function(p,v){return xt(p,v)>0?p:v},this._min=function(p,v){return xt(p,v)<0?p:v},this._IDBKeyRange=a._deps.IDBKeyRange,!this._IDBKeyRange)throw new nt.MissingAPI})}function yr(a){return Ft(function(s){return Wo(s),a(s.target.error),!1})}function Wo(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var Ko="storagemutated",vu="x-storagemutated-1",vn=zo(null,Ko),Ix=function(){function a(){}return a.prototype._lock=function(){return Bt(!J.global),++this._reculock,this._reculock===1&&!J.global&&(J.lockOwnerFor=this),this},a.prototype._unlock=function(){if(Bt(!J.global),--this._reculock===0)for(J.global||(J.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var s=this._blockedFuncs.shift();try{Jn(s[1],s[0])}catch{}}return this},a.prototype._locked=function(){return this._reculock&&J.lockOwnerFor!==this},a.prototype.create=function(s){var u=this;if(!this.mode)return this;var d=this.db.idbdb,h=this.db._state.dbOpenError;if(Bt(!this.idbtrans),!s&&!d)switch(h&&h.name){case"DatabaseClosedError":throw new nt.DatabaseClosed(h);case"MissingAPIError":throw new nt.MissingAPI(h.message,h);default:throw new nt.OpenFailed(h)}if(!this.active)throw new nt.TransactionInactive;return Bt(this._completion._state===null),s=this.idbtrans=s||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):d.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),s.onerror=Ft(function(p){Wo(p),u._reject(s.error)}),s.onabort=Ft(function(p){Wo(p),u.active&&u._reject(new nt.Abort(s.error)),u.active=!1,u.on("abort").fire(p)}),s.oncomplete=Ft(function(){u.active=!1,u._resolve(),"mutatedParts"in s&&vn.storagemutated.fire(s.mutatedParts)}),this},a.prototype._promise=function(s,u,d){var h=this;if(s==="readwrite"&&this.mode!=="readwrite")return Kt(new nt.ReadOnly("Transaction is readonly"));if(!this.active)return Kt(new nt.TransactionInactive);if(this._locked())return new q(function(v,y){h._blockedFuncs.push([function(){h._promise(s,u,d).then(v,y)},J])});if(d)return hn(function(){var v=new q(function(y,b){h._lock();var x=u(y,b,h);x&&x.then&&x.then(y,b)});return v.finally(function(){return h._unlock()}),v._lib=!0,v});var p=new q(function(v,y){var b=u(v,y,h);b&&b.then&&b.then(v,y)});return p._lib=!0,p},a.prototype._root=function(){return this.parent?this.parent._root():this},a.prototype.waitFor=function(s){var u=this._root(),d=q.resolve(s);if(u._waitingFor)u._waitingFor=u._waitingFor.then(function(){return d});else{u._waitingFor=d,u._waitingQueue=[];var h=u.idbtrans.objectStore(u.storeNames[0]);(function v(){for(++u._spinCount;u._waitingQueue.length;)u._waitingQueue.shift()();u._waitingFor&&(h.get(-1/0).onsuccess=v)})()}var p=u._waitingFor;return new q(function(v,y){d.then(function(b){return u._waitingQueue.push(Ft(v.bind(null,b)))},function(b){return u._waitingQueue.push(Ft(y.bind(null,b)))}).finally(function(){u._waitingFor===p&&(u._waitingFor=null)})})},a.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new nt.Abort))},a.prototype.table=function(s){var u=this._memoizedTables||(this._memoizedTables={});if(m(u,s))return u[s];var d=this.schema[s];if(!d)throw new nt.NotFound("Table "+s+" not part of transaction");var h=new this.db.Table(s,d,this);return h.core=this.db.core.table(s),u[s]=h,h},a}();function Tx(a){return Vo(Ix.prototype,function(u,d,h,p,v){var y=this;this.db=a,this.mode=u,this.storeNames=d,this.schema=h,this.chromeTransactionDurability=p,this.idbtrans=null,this.on=zo(this,"complete","error","abort"),this.parent=v||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new q(function(b,x){y._resolve=b,y._reject=x}),this._completion.then(function(){y.active=!1,y.on.complete.fire()},function(b){var x=y.active;return y.active=!1,y.on.error.fire(b),y.parent?y.parent._reject(b):x&&y.idbtrans&&y.idbtrans.abort(),Kt(b)})})}function yu(a,s,u,d,h,p,v){return{name:a,keyPath:s,unique:u,multi:d,auto:h,compound:p,src:(u&&!v?"&":"")+(d?"*":"")+(h?"++":"")+sp(s)}}function sp(a){return typeof a=="string"?a:a?"["+[].join.call(a,"+")+"]":""}function bu(a,s,u){return{name:a,primKey:s,indexes:u,mappedClass:null,idxByName:Mt(u,function(d){return[d.name,d]})}}function Mx(a){return a.length===1?a[0]:a}var qo=function(a){try{return a.only([[]]),qo=function(){return[[]]},[[]]}catch{return qo=function(){return ti},ti}};function _u(a){return a==null?function(){}:typeof a=="string"?Px(a):function(s){return vt(s,a)}}function Px(a){var s=a.split(".");return s.length===1?function(u){return u[a]}:function(u){return vt(u,a)}}function cp(a){return[].slice.call(a)}var Nx=0;function Go(a){return a==null?":id":typeof a=="string"?a:"[".concat(a.join("+"),"]")}function Lx(a,s,u){function d(w,M){var z=cp(w.objectStoreNames);return{schema:{name:w.name,tables:z.map(function(S){return M.objectStore(S)}).map(function(S){var D=S.keyPath,k=S.autoIncrement,F=c(D),N=D==null,L={},j={name:S.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:N,compound:F,keyPath:D,autoIncrement:k,unique:!0,extractKey:_u(D)},indexes:cp(S.indexNames).map(function(P){return S.index(P)}).map(function(P){var H=P.name,G=P.unique,K=P.multiEntry,it=P.keyPath,mt=c(it),Y={name:H,compound:mt,keyPath:it,unique:G,multiEntry:K,extractKey:_u(it)};return L[Go(it)]=Y,Y}),getIndexByKeyPath:function(P){return L[Go(P)]}};return L[":id"]=j.primaryKey,D!=null&&(L[Go(D)]=j.primaryKey),j})},hasGetAll:z.length>0&&"getAll"in M.objectStore(z[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function h(w){if(w.type===3)return null;if(w.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var M=w.lower,z=w.upper,S=w.lowerOpen,D=w.upperOpen,k=M===void 0?z===void 0?null:s.upperBound(z,!!D):z===void 0?s.lowerBound(M,!!S):s.bound(M,z,!!S,!!D);return k}function p(w){var M=w.name;function z(k){var F=k.trans,N=k.type,L=k.keys,j=k.values,P=k.range;return new Promise(function(H,G){H=Ft(H);var K=F.objectStore(M),it=K.keyPath==null,mt=N==="put"||N==="add";if(!mt&&N!=="delete"&&N!=="deleteRange")throw new Error("Invalid operation type: "+N);var Y=(L||j||{length:1}).length;if(L&&j&&L.length!==j.length)throw new Error("Given keys array must have same length as given values array.");if(Y===0)return H({numFailures:0,failures:{},results:[],lastResult:void 0});var pt,at=[],wt=[],rt=0,Ht=function(_r){++rt,Wo(_r)};if(N==="deleteRange"){if(P.type===4)return H({numFailures:rt,failures:wt,results:[],lastResult:void 0});P.type===3?at.push(pt=K.clear()):at.push(pt=K.delete(h(P)))}else{var ge=mt?it?[j,L]:[j,null]:[L,null],br=ge[0],Ae=ge[1];if(mt)for(var We=0;We<Y;++We)at.push(pt=Ae&&Ae[We]!==void 0?K[N](br[We],Ae[We]):K[N](br[We])),pt.onerror=Ht;else for(var We=0;We<Y;++We)at.push(pt=K[N](br[We])),pt.onerror=Ht}var _n=function(_r){var Xo=_r.target.result;at.forEach(function(ir,Ms){return ir.error!=null&&(wt[Ms]=ir.error)}),H({numFailures:rt,failures:wt,results:N==="delete"?L:at.map(function(ir){return ir.result}),lastResult:Xo})};pt.onerror=function(_r){Ht(_r),_n(_r)},pt.onsuccess=_n})}function S(k){var F=k.trans,N=k.values,L=k.query,j=k.reverse,P=k.unique;return new Promise(function(H,G){H=Ft(H);var K=L.index,it=L.range,mt=F.objectStore(M),Y=K.isPrimaryKey?mt:mt.index(K.name),pt=j?P?"prevunique":"prev":P?"nextunique":"next",at=N||!("openKeyCursor"in Y)?Y.openCursor(h(it),pt):Y.openKeyCursor(h(it),pt);at.onerror=yr(G),at.onsuccess=Ft(function(wt){var rt=at.result;if(!rt){H(null);return}rt.___id=++Nx,rt.done=!1;var Ht=rt.continue.bind(rt),ge=rt.continuePrimaryKey;ge&&(ge=ge.bind(rt));var br=rt.advance.bind(rt),Ae=function(){throw new Error("Cursor not started")},We=function(){throw new Error("Cursor not stopped")};rt.trans=F,rt.stop=rt.continue=rt.continuePrimaryKey=rt.advance=Ae,rt.fail=Ft(G),rt.next=function(){var _n=this,_r=1;return this.start(function(){return _r--?_n.continue():_n.stop()}).then(function(){return _n})},rt.start=function(_n){var _r=new Promise(function(ir,Ms){ir=Ft(ir),at.onerror=yr(Ms),rt.fail=Ms,rt.stop=function(Cw){rt.stop=rt.continue=rt.continuePrimaryKey=rt.advance=We,ir(Cw)}}),Xo=function(){if(at.result)try{_n()}catch(ir){rt.fail(ir)}else rt.done=!0,rt.start=function(){throw new Error("Cursor behind last entry")},rt.stop()};return at.onsuccess=Ft(function(ir){at.onsuccess=Xo,Xo()}),rt.continue=Ht,rt.continuePrimaryKey=ge,rt.advance=br,Xo(),_r},H(rt)},G)})}function D(k){return function(F){return new Promise(function(N,L){N=Ft(N);var j=F.trans,P=F.values,H=F.limit,G=F.query,K=H===1/0?void 0:H,it=G.index,mt=G.range,Y=j.objectStore(M),pt=it.isPrimaryKey?Y:Y.index(it.name),at=h(mt);if(H===0)return N({result:[]});if(k){var wt=P?pt.getAll(at,K):pt.getAllKeys(at,K);wt.onsuccess=function(br){return N({result:br.target.result})},wt.onerror=yr(L)}else{var rt=0,Ht=P||!("openKeyCursor"in pt)?pt.openCursor(at):pt.openKeyCursor(at),ge=[];Ht.onsuccess=function(br){var Ae=Ht.result;if(!Ae)return N({result:ge});if(ge.push(P?Ae.value:Ae.primaryKey),++rt===H)return N({result:ge});Ae.continue()},Ht.onerror=yr(L)}})}}return{name:M,schema:w,mutate:z,getMany:function(k){var F=k.trans,N=k.keys;return new Promise(function(L,j){L=Ft(L);for(var P=F.objectStore(M),H=N.length,G=new Array(H),K=0,it=0,mt,Y=function(rt){var Ht=rt.target;(G[Ht._pos]=Ht.result)!=null,++it===K&&L(G)},pt=yr(j),at=0;at<H;++at){var wt=N[at];wt!=null&&(mt=P.get(N[at]),mt._pos=at,mt.onsuccess=Y,mt.onerror=pt,++K)}K===0&&L(G)})},get:function(k){var F=k.trans,N=k.key;return new Promise(function(L,j){L=Ft(L);var P=F.objectStore(M),H=P.get(N);H.onsuccess=function(G){return L(G.target.result)},H.onerror=yr(j)})},query:D(b),openCursor:S,count:function(k){var F=k.query,N=k.trans,L=F.index,j=F.range;return new Promise(function(P,H){var G=N.objectStore(M),K=L.isPrimaryKey?G:G.index(L.name),it=h(j),mt=it?K.count(it):K.count();mt.onsuccess=Ft(function(Y){return P(Y.target.result)}),mt.onerror=yr(H)})}}}var v=d(a,u),y=v.schema,b=v.hasGetAll,x=y.tables.map(function(w){return p(w)}),O={};return x.forEach(function(w){return O[w.name]=w}),{stack:"dbcore",transaction:a.transaction.bind(a),table:function(w){var M=O[w];if(!M)throw new Error("Table '".concat(w,"' not found"));return O[w]},MIN_KEY:-1/0,MAX_KEY:qo(s),schema:y}}function $x(a,s){return s.reduce(function(u,d){var h=d.create;return r(r({},u),h(u))},a)}function Bx(a,s,u,d){var h=u.IDBKeyRange;u.indexedDB;var p=$x(Lx(s,h,d),a.dbcore);return{dbcore:p}}function ws(a,s){var u=s.db,d=Bx(a._middlewares,u,a._deps,s);a.core=d.dbcore,a.tables.forEach(function(h){var p=h.name;a.core.schema.tables.some(function(v){return v.name===p})&&(h.core=a.core.table(p),a[p]instanceof a.Table&&(a[p].core=h.core))})}function Cs(a,s,u,d){u.forEach(function(h){var p=d[h];s.forEach(function(v){var y=W(v,h);(!y||"value"in y&&y.value===void 0)&&(v===a.Transaction.prototype||v instanceof a.Transaction?R(v,h,{get:function(){return this.table(h)},set:function(b){C(this,h,{value:b,writable:!0,configurable:!0,enumerable:!0})}}):v[h]=new a.Table(h,p))})})}function xu(a,s){s.forEach(function(u){for(var d in u)u[d]instanceof a.Table&&delete u[d]})}function Fx(a,s){return a._cfg.version-s._cfg.version}function jx(a,s,u,d){var h=a._dbSchema;u.objectStoreNames.contains("$meta")&&!h.$meta&&(h.$meta=bu("$meta",up("")[0],[]),a._storeNames.push("$meta"));var p=a._createTransaction("readwrite",a._storeNames,h);p.create(u),p._completion.catch(d);var v=p._reject.bind(p),y=J.transless||J;hn(function(){if(J.trans=p,J.transless=y,s===0)o(h).forEach(function(b){Cu(u,b,h[b].primKey,h[b].indexes)}),ws(a,u),q.follow(function(){return a.on.populate.fire(p)}).catch(v);else return ws(a,u),zx(a,p,s).then(function(b){return Vx(a,b,p,u)}).catch(v)})}function Ux(a,s){lp(a._dbSchema,s),s.db.version%10===0&&!s.objectStoreNames.contains("$meta")&&s.db.createObjectStore("$meta").add(Math.ceil(s.db.version/10-1),"version");var u=Rs(a,a.idbdb,s);Es(a,a._dbSchema,s);for(var d=wu(u,a._dbSchema),h=function(x){if(x.change.length||x.recreate)return console.warn("Unable to patch indexes of table ".concat(x.name," because it has changes on the type of index or primary key.")),{value:void 0};var O=s.objectStore(x.name);x.add.forEach(function(w){vr&&console.debug("Dexie upgrade patch: Creating missing index ".concat(x.name,".").concat(w.src)),Ss(O,w)})},p=0,v=d.change;p<v.length;p++){var y=v[p],b=h(y);if(typeof b=="object")return b.value}}function zx(a,s,u){return s.storeNames.includes("$meta")?s.table("$meta").get("version").then(function(d){return d??u}):q.resolve(u)}function Vx(a,s,u,d){var h=[],p=a._versions,v=a._dbSchema=Rs(a,a.idbdb,d),y=p.filter(function(x){return x._cfg.version>=s});if(y.length===0)return q.resolve();y.forEach(function(x){h.push(function(){var O=v,w=x._cfg.dbschema;Es(a,O,d),Es(a,w,d),v=a._dbSchema=w;var M=wu(O,w);M.add.forEach(function(N){Cu(d,N[0],N[1].primKey,N[1].indexes)}),M.change.forEach(function(N){if(N.recreate)throw new nt.Upgrade("Not yet support for changing primary key");var L=d.objectStore(N.name);N.add.forEach(function(j){return Ss(L,j)}),N.change.forEach(function(j){L.deleteIndex(j.name),Ss(L,j)}),N.del.forEach(function(j){return L.deleteIndex(j)})});var z=x._cfg.contentUpgrade;if(z&&x._cfg.version>s){ws(a,d),u._memoizedTables={};var S=gr(w);M.del.forEach(function(N){S[N]=O[N]}),xu(a,[a.Transaction.prototype]),Cs(a,[a.Transaction.prototype],o(S),S),u.schema=S;var D=Xl(z);D&&$i();var k,F=q.follow(function(){if(k=z(u),k&&D){var N=pn.bind(null,null);k.then(N,N)}});return k&&typeof k.then=="function"?q.resolve(k):F.then(function(){return k})}}),h.push(function(O){var w=x._cfg.dbschema;Hx(w,O),xu(a,[a.Transaction.prototype]),Cs(a,[a.Transaction.prototype],a._storeNames,a._dbSchema),u.schema=a._dbSchema}),h.push(function(O){a.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(a.idbdb.version/10)===x._cfg.version?(a.idbdb.deleteObjectStore("$meta"),delete a._dbSchema.$meta,a._storeNames=a._storeNames.filter(function(w){return w!=="$meta"})):O.objectStore("$meta").put(x._cfg.version,"version"))})});function b(){return h.length?q.resolve(h.shift()(u.idbtrans)).then(b):q.resolve()}return b().then(function(){lp(v,d)})}function wu(a,s){var u={del:[],add:[],change:[]},d;for(d in a)s[d]||u.del.push(d);for(d in s){var h=a[d],p=s[d];if(!h)u.add.push([d,p]);else{var v={name:d,def:p,recreate:!1,del:[],add:[],change:[]};if(""+(h.primKey.keyPath||"")!=""+(p.primKey.keyPath||"")||h.primKey.auto!==p.primKey.auto)v.recreate=!0,u.change.push(v);else{var y=h.idxByName,b=p.idxByName,x=void 0;for(x in y)b[x]||v.del.push(x);for(x in b){var O=y[x],w=b[x];O?O.src!==w.src&&v.change.push(w):v.add.push(w)}(v.del.length>0||v.add.length>0||v.change.length>0)&&u.change.push(v)}}}return u}function Cu(a,s,u,d){var h=a.db.createObjectStore(s,u.keyPath?{keyPath:u.keyPath,autoIncrement:u.auto}:{autoIncrement:u.auto});return d.forEach(function(p){return Ss(h,p)}),h}function lp(a,s){o(a).forEach(function(u){s.db.objectStoreNames.contains(u)||(vr&&console.debug("Dexie: Creating missing table",u),Cu(s,u,a[u].primKey,a[u].indexes))})}function Hx(a,s){[].slice.call(s.db.objectStoreNames).forEach(function(u){return a[u]==null&&s.db.deleteObjectStore(u)})}function Ss(a,s){a.createIndex(s.name,s.keyPath,{unique:s.unique,multiEntry:s.multi})}function Rs(a,s,u){var d={},h=tt(s.objectStoreNames,0);return h.forEach(function(p){for(var v=u.objectStore(p),y=v.keyPath,b=yu(sp(y),y||"",!0,!1,!!v.autoIncrement,y&&typeof y!="string",!0),x=[],O=0;O<v.indexNames.length;++O){var w=v.index(v.indexNames[O]);y=w.keyPath;var M=yu(w.name,y,!!w.unique,!!w.multiEntry,!1,y&&typeof y!="string",!1);x.push(M)}d[p]=bu(p,b,x)}),d}function Wx(a,s,u){a.verno=s.version/10;var d=a._dbSchema=Rs(a,s,u);a._storeNames=tt(s.objectStoreNames,0),Cs(a,[a._allTables],o(d),d)}function Kx(a,s){var u=Rs(a,a.idbdb,s),d=wu(u,a._dbSchema);return!(d.add.length||d.change.some(function(h){return h.add.length||h.change.length}))}function Es(a,s,u){for(var d=u.db.objectStoreNames,h=0;h<d.length;++h){var p=d[h],v=u.objectStore(p);a._hasGetAll="getAll"in v;for(var y=0;y<v.indexNames.length;++y){var b=v.indexNames[y],x=v.index(b).keyPath,O=typeof x=="string"?x:"["+tt(x).join("+")+"]";if(s[p]){var w=s[p].idxByName[O];w&&(w.name=b,delete s[p].idxByName[O],s[p].idxByName[b]=w)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function up(a){return a.split(",").map(function(s,u){s=s.trim();var d=s.replace(/([&*]|\+\+)/g,""),h=/^\[/.test(d)?d.match(/^\[(.*)\]$/)[1].split("+"):d;return yu(d,h||null,/\&/.test(s),/\*/.test(s),/\+\+/.test(s),c(h),u===0)})}var qx=function(){function a(){}return a.prototype._parseStoresSpec=function(s,u){o(s).forEach(function(d){if(s[d]!==null){var h=up(s[d]),p=h.shift();if(p.unique=!0,p.multi)throw new nt.Schema("Primary key cannot be multi-valued");h.forEach(function(v){if(v.auto)throw new nt.Schema("Only primary key can be marked as autoIncrement (++)");if(!v.keyPath)throw new nt.Schema("Index must have a name and cannot be an empty string")}),u[d]=bu(d,p,h)}})},a.prototype.stores=function(s){var u=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,s):s;var d=u._versions,h={},p={};return d.forEach(function(v){l(h,v._cfg.storesSource),p=v._cfg.dbschema={},v._parseStoresSpec(h,p)}),u._dbSchema=p,xu(u,[u._allTables,u,u.Transaction.prototype]),Cs(u,[u._allTables,u,u.Transaction.prototype,this._cfg.tables],o(p),p),u._storeNames=o(p),this},a.prototype.upgrade=function(s){return this._cfg.contentUpgrade=tu(this._cfg.contentUpgrade||kt,s),this},a}();function Gx(a){return Vo(qx.prototype,function(u){this.db=a,this._cfg={version:u,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Su(a,s){var u=a._dbNamesDB;return u||(u=a._dbNamesDB=new Vr(vs,{addons:[],indexedDB:a,IDBKeyRange:s}),u.version(1).stores({dbnames:"name"})),u.table("dbnames")}function Ru(a){return a&&typeof a.databases=="function"}function Qx(a){var s=a.indexedDB,u=a.IDBKeyRange;return Ru(s)?Promise.resolve(s.databases()).then(function(d){return d.map(function(h){return h.name}).filter(function(h){return h!==vs})}):Su(s,u).toCollection().primaryKeys()}function Yx(a,s){var u=a.indexedDB,d=a.IDBKeyRange;!Ru(u)&&s!==vs&&Su(u,d).put({name:s}).catch(kt)}function Xx(a,s){var u=a.indexedDB,d=a.IDBKeyRange;!Ru(u)&&s!==vs&&Su(u,d).delete(s).catch(kt)}function Eu(a){return hn(function(){return J.letThrough=!0,a()})}function Zx(){var a=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!a||!indexedDB.databases)return Promise.resolve();var s;return new Promise(function(u){var d=function(){return indexedDB.databases().finally(u)};s=setInterval(d,100),d()}).finally(function(){return clearInterval(s)})}var Ou;function Du(a){return!("from"in a)}var me=function(a,s){if(this)l(this,arguments.length?{d:1,from:a,to:arguments.length>1?s:a}:{d:0});else{var u=new me;return a&&"d"in a&&l(u,a),u}};_(me.prototype,(Ou={add:function(a){return Yo(this,a),this},addKey:function(a){return Qo(this,a,a),this},addKeys:function(a){var s=this;return a.forEach(function(u){return Qo(s,u,u)}),this},hasKey:function(a){var s=Os(this).next(a).value;return s&&xt(s.from,a)<=0&&xt(s.to,a)>=0}},Ou[$o]=function(){return Os(this)},Ou));function Qo(a,s,u){var d=xt(s,u);if(!isNaN(d)){if(d>0)throw RangeError();if(Du(a))return l(a,{from:s,to:u,d:1});var h=a.l,p=a.r;if(xt(u,a.from)<0)return h?Qo(h,s,u):a.l={from:s,to:u,d:1,l:null,r:null},fp(a);if(xt(s,a.to)>0)return p?Qo(p,s,u):a.r={from:s,to:u,d:1,l:null,r:null},fp(a);xt(s,a.from)<0&&(a.from=s,a.l=null,a.d=p?p.d+1:1),xt(u,a.to)>0&&(a.to=u,a.r=null,a.d=a.l?a.l.d+1:1);var v=!a.r;h&&!a.l&&Yo(a,h),p&&v&&Yo(a,p)}}function Yo(a,s){function u(d,h){var p=h.from,v=h.to,y=h.l,b=h.r;Qo(d,p,v),y&&u(d,y),b&&u(d,b)}Du(s)||u(a,s)}function dp(a,s){var u=Os(s),d=u.next();if(d.done)return!1;for(var h=d.value,p=Os(a),v=p.next(h.from),y=v.value;!d.done&&!v.done;){if(xt(y.from,h.to)<=0&&xt(y.to,h.from)>=0)return!0;xt(h.from,y.from)<0?h=(d=u.next(y.from)).value:y=(v=p.next(h.from)).value}return!1}function Os(a){var s=Du(a)?null:{s:0,n:a};return{next:function(u){for(var d=arguments.length>0;s;)switch(s.s){case 0:if(s.s=1,d)for(;s.n.l&&xt(u,s.n.from)<0;)s={up:s,n:s.n.l,s:1};else for(;s.n.l;)s={up:s,n:s.n.l,s:1};case 1:if(s.s=2,!d||xt(u,s.n.to)<=0)return{value:s.n,done:!1};case 2:if(s.n.r){s.s=3,s={up:s,n:s.n.r,s:0};continue}case 3:s=s.up}return{done:!0}}}}function fp(a){var s,u,d=(((s=a.r)===null||s===void 0?void 0:s.d)||0)-(((u=a.l)===null||u===void 0?void 0:u.d)||0),h=d>1?"r":d<-1?"l":"";if(h){var p=h==="r"?"l":"r",v=r({},a),y=a[h];a.from=y.from,a.to=y.to,a[h]=y[h],v[h]=y[p],a[p]=v,v.d=hp(v)}a.d=hp(a)}function hp(a){var s=a.r,u=a.l;return(s?u?Math.max(s.d,u.d):s.d:u?u.d:0)+1}function Ds(a,s){return o(s).forEach(function(u){a[u]?Yo(a[u],s[u]):a[u]=as(s[u])}),a}function Au(a,s){return a.all||s.all||Object.keys(a).some(function(u){return s[u]&&dp(s[u],a[u])})}var ri={},ku={},Iu=!1;function As(a,s){Ds(ku,a),Iu||(Iu=!0,setTimeout(function(){Iu=!1;var u=ku;ku={},Tu(u,!1)},0))}function Tu(a,s){s===void 0&&(s=!1);var u=new Set;if(a.all)for(var d=0,h=Object.values(ri);d<h.length;d++){var p=h[d];pp(p,a,u,s)}else for(var v in a){var y=/^idb\:\/\/(.*)\/(.*)\//.exec(v);if(y){var b=y[1],x=y[2],p=ri["idb://".concat(b,"/").concat(x)];p&&pp(p,a,u,s)}}u.forEach(function(O){return O()})}function pp(a,s,u,d){for(var h=[],p=0,v=Object.entries(a.queries.query);p<v.length;p++){for(var y=v[p],b=y[0],x=y[1],O=[],w=0,M=x;w<M.length;w++){var z=M[w];Au(s,z.obsSet)?z.subscribers.forEach(function(F){return u.add(F)}):d&&O.push(z)}d&&h.push([b,O])}if(d)for(var S=0,D=h;S<D.length;S++){var k=D[S],b=k[0],O=k[1];a.queries.query[b]=O}}function Jx(a){var s=a._state,u=a._deps.indexedDB;if(s.isBeingOpened||a.idbdb)return s.dbReadyPromise.then(function(){return s.dbOpenError?Kt(s.dbOpenError):a});s.isBeingOpened=!0,s.dbOpenError=null,s.openComplete=!1;var d=s.openCanceller,h=Math.round(a.verno*10),p=!1;function v(){if(s.openCanceller!==d)throw new nt.DatabaseClosed("db.open() was cancelled")}var y=s.dbReadyResolve,b=null,x=!1,O=function(){return new q(function(w,M){if(v(),!u)throw new nt.MissingAPI;var z=a.name,S=s.autoSchema||!h?u.open(z):u.open(z,h);if(!S)throw new nt.MissingAPI;S.onerror=yr(M),S.onblocked=Ft(a._fireOnBlocked),S.onupgradeneeded=Ft(function(D){if(b=S.transaction,s.autoSchema&&!a._options.allowEmptyDB){S.onerror=Wo,b.abort(),S.result.close();var k=u.deleteDatabase(z);k.onsuccess=k.onerror=Ft(function(){M(new nt.NoSuchDatabase("Database ".concat(z," doesnt exist")))})}else{b.onerror=yr(M);var F=D.oldVersion>Math.pow(2,62)?0:D.oldVersion;x=F<1,a.idbdb=S.result,p&&Ux(a,b),jx(a,F/10,b,M)}},M),S.onsuccess=Ft(function(){b=null;var D=a.idbdb=S.result,k=tt(D.objectStoreNames);if(k.length>0)try{var F=D.transaction(Mx(k),"readonly");if(s.autoSchema)Wx(a,D,F);else if(Es(a,a._dbSchema,F),!Kx(a,F)&&!p)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),D.close(),h=D.version+1,p=!0,w(O());ws(a,F)}catch{}Bi.push(a),D.onversionchange=Ft(function(N){s.vcFired=!0,a.on("versionchange").fire(N)}),D.onclose=Ft(function(N){a.on("close").fire(N)}),x&&Yx(a._deps,z),w()},M)}).catch(function(w){switch(w?.name){case"UnknownError":if(s.PR1398_maxLoop>0)return s.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),O();break;case"VersionError":if(h>0)return h=0,O();break}return q.reject(w)})};return q.race([d,(typeof navigator>"u"?q.resolve():Zx()).then(O)]).then(function(){return v(),s.onReadyBeingFired=[],q.resolve(Eu(function(){return a.on.ready.fire(a.vip)})).then(function w(){if(s.onReadyBeingFired.length>0){var M=s.onReadyBeingFired.reduce(tu,kt);return s.onReadyBeingFired=[],q.resolve(Eu(function(){return M(a.vip)})).then(w)}})}).finally(function(){s.openCanceller===d&&(s.onReadyBeingFired=null,s.isBeingOpened=!1)}).catch(function(w){s.dbOpenError=w;try{b&&b.abort()}catch{}return d===s.openCanceller&&a._close(),Kt(w)}).finally(function(){s.openComplete=!0,y()}).then(function(){if(x){var w={};a.tables.forEach(function(M){M.schema.indexes.forEach(function(z){z.name&&(w["idb://".concat(a.name,"/").concat(M.name,"/").concat(z.name)]=new me(-1/0,[[[]]]))}),w["idb://".concat(a.name,"/").concat(M.name,"/")]=w["idb://".concat(a.name,"/").concat(M.name,"/:dels")]=new me(-1/0,[[[]]])}),vn(Ko).fire(w),Tu(w,!0)}return a})}function Mu(a){var s=function(v){return a.next(v)},u=function(v){return a.throw(v)},d=p(s),h=p(u);function p(v){return function(y){var b=v(y),x=b.value;return b.done?x:!x||typeof x.then!="function"?c(x)?Promise.all(x).then(d,h):d(x):x.then(d,h)}}return p(s)()}function tw(a,s,u){var d=arguments.length;if(d<2)throw new nt.InvalidArgument("Too few arguments");for(var h=new Array(d-1);--d;)h[d-1]=arguments[d];u=h.pop();var p=ln(h);return[a,p,u]}function mp(a,s,u,d,h){return q.resolve().then(function(){var p=J.transless||J,v=a._createTransaction(s,u,a._dbSchema,d);v.explicit=!0;var y={trans:v,transless:p};if(d)v.idbtrans=d.idbtrans;else try{v.create(),v.idbtrans._explicit=!0,a._state.PR1398_maxLoop=3}catch(w){return w.name===Jl.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),a.close({disableAutoOpen:!1}),a.open().then(function(){return mp(a,s,u,null,h)})):Kt(w)}var b=Xl(h);b&&$i();var x,O=q.follow(function(){if(x=h.call(v,v),x)if(b){var w=pn.bind(null,null);x.then(w,w)}else typeof x.next=="function"&&typeof x.throw=="function"&&(x=Mu(x))},y);return(x&&typeof x.then=="function"?q.resolve(x).then(function(w){return v.active?w:Kt(new nt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):O.then(function(){return x})).then(function(w){return d&&v._resolve(),v._completion.then(function(){return w})}).catch(function(w){return v._reject(w),Kt(w)})})}function ks(a,s,u){for(var d=c(a)?a.slice():[a],h=0;h<u;++h)d.push(s);return d}function ew(a){return r(r({},a),{table:function(s){var u=a.table(s),d=u.schema,h={},p=[];function v(D,k,F){var N=Go(D),L=h[N]=h[N]||[],j=D==null?0:typeof D=="string"?1:D.length,P=k>0,H=r(r({},F),{name:P?"".concat(N,"(virtual-from:").concat(F.name,")"):F.name,lowLevelIndex:F,isVirtual:P,keyTail:k,keyLength:j,extractKey:_u(D),unique:!P&&F.unique});if(L.push(H),H.isPrimaryKey||p.push(H),j>1){var G=j===2?D[0]:D.slice(0,j-1);v(G,k+1,F)}return L.sort(function(K,it){return K.keyTail-it.keyTail}),H}var y=v(d.primaryKey.keyPath,0,d.primaryKey);h[":id"]=[y];for(var b=0,x=d.indexes;b<x.length;b++){var O=x[b];v(O.keyPath,0,O)}function w(D){var k=h[Go(D)];return k&&k[0]}function M(D,k){return{type:D.type===1?2:D.type,lower:ks(D.lower,D.lowerOpen?a.MAX_KEY:a.MIN_KEY,k),lowerOpen:!0,upper:ks(D.upper,D.upperOpen?a.MIN_KEY:a.MAX_KEY,k),upperOpen:!0}}function z(D){var k=D.query.index;return k.isVirtual?r(r({},D),{query:{index:k.lowLevelIndex,range:M(D.query.range,k.keyTail)}}):D}var S=r(r({},u),{schema:r(r({},d),{primaryKey:y,indexes:p,getIndexByKeyPath:w}),count:function(D){return u.count(z(D))},query:function(D){return u.query(z(D))},openCursor:function(D){var k=D.query.index,F=k.keyTail,N=k.isVirtual,L=k.keyLength;if(!N)return u.openCursor(D);function j(P){function H(K){K!=null?P.continue(ks(K,D.reverse?a.MAX_KEY:a.MIN_KEY,F)):D.unique?P.continue(P.key.slice(0,L).concat(D.reverse?a.MIN_KEY:a.MAX_KEY,F)):P.continue()}var G=Object.create(P,{continue:{value:H},continuePrimaryKey:{value:function(K,it){P.continuePrimaryKey(ks(K,a.MAX_KEY,F),it)}},primaryKey:{get:function(){return P.primaryKey}},key:{get:function(){var K=P.key;return L===1?K[0]:K.slice(0,L)}},value:{get:function(){return P.value}}});return G}return u.openCursor(z(D)).then(function(P){return P&&j(P)})}});return S}})}var rw={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:ew};function Pu(a,s,u,d){return u=u||{},d=d||"",o(a).forEach(function(h){if(!m(s,h))u[d+h]=void 0;else{var p=a[h],v=s[h];if(typeof p=="object"&&typeof v=="object"&&p&&v){var y=dn(p),b=dn(v);y!==b?u[d+h]=s[h]:y==="Object"?Pu(p,v,u,d+h+"."):p!==v&&(u[d+h]=s[h])}else p!==v&&(u[d+h]=s[h])}}),o(s).forEach(function(h){m(a,h)||(u[d+h]=s[h])}),u}function Nu(a,s){return s.type==="delete"?s.keys:s.keys||s.values.map(a.extractKey)}var nw={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return r(r({},a),{table:function(s){var u=a.table(s),d=u.schema.primaryKey,h=r(r({},u),{mutate:function(p){var v=J.trans,y=v.table(s).hook,b=y.deleting,x=y.creating,O=y.updating;switch(p.type){case"add":if(x.fire===kt)break;return v._promise("readwrite",function(){return w(p)},!0);case"put":if(x.fire===kt&&O.fire===kt)break;return v._promise("readwrite",function(){return w(p)},!0);case"delete":if(b.fire===kt)break;return v._promise("readwrite",function(){return w(p)},!0);case"deleteRange":if(b.fire===kt)break;return v._promise("readwrite",function(){return M(p)},!0)}return u.mutate(p);function w(S){var D=J.trans,k=S.keys||Nu(d,S);if(!k)throw new Error("Keys missing");return S=S.type==="add"||S.type==="put"?r(r({},S),{keys:k}):r({},S),S.type!=="delete"&&(S.values=n([],S.values,!0)),S.keys&&(S.keys=n([],S.keys,!0)),iw(u,S,k).then(function(F){var N=k.map(function(L,j){var P=F[j],H={onerror:null,onsuccess:null};if(S.type==="delete")b.fire.call(H,L,P,D);else if(S.type==="add"||P===void 0){var G=x.fire.call(H,L,S.values[j],D);L==null&&G!=null&&(L=G,S.keys[j]=L,d.outbound||_t(S.values[j],d.keyPath,L))}else{var K=Pu(P,S.values[j]),it=O.fire.call(H,K,L,P,D);if(it){var mt=S.values[j];Object.keys(it).forEach(function(Y){m(mt,Y)?mt[Y]=it[Y]:_t(mt,Y,it[Y])})}}return H});return u.mutate(S).then(function(L){for(var j=L.failures,P=L.results,H=L.numFailures,G=L.lastResult,K=0;K<k.length;++K){var it=P?P[K]:k[K],mt=N[K];it==null?mt.onerror&&mt.onerror(j[K]):mt.onsuccess&&mt.onsuccess(S.type==="put"&&F[K]?S.values[K]:it)}return{failures:j,results:P,numFailures:H,lastResult:G}}).catch(function(L){return N.forEach(function(j){return j.onerror&&j.onerror(L)}),Promise.reject(L)})})}function M(S){return z(S.trans,S.range,1e4)}function z(S,D,k){return u.query({trans:S,values:!1,query:{index:d,range:D},limit:k}).then(function(F){var N=F.result;return w({type:"delete",keys:N,trans:S}).then(function(L){return L.numFailures>0?Promise.reject(L.failures[0]):N.length<k?{failures:[],numFailures:0,lastResult:void 0}:z(S,r(r({},D),{lower:N[N.length-1],lowerOpen:!0}),k)})})}}});return h}})}};function iw(a,s,u){return s.type==="add"?Promise.resolve([]):a.getMany({trans:s.trans,keys:u,cache:"immutable"})}function gp(a,s,u){try{if(!s||s.keys.length<a.length)return null;for(var d=[],h=0,p=0;h<s.keys.length&&p<a.length;++h)xt(s.keys[h],a[p])===0&&(d.push(u?He(s.values[h]):s.values[h]),++p);return d.length===a.length?d:null}catch{return null}}var ow={stack:"dbcore",level:-1,create:function(a){return{table:function(s){var u=a.table(s);return r(r({},u),{getMany:function(d){if(!d.cache)return u.getMany(d);var h=gp(d.keys,d.trans._cache,d.cache==="clone");return h?q.resolve(h):u.getMany(d).then(function(p){return d.trans._cache={keys:d.keys,values:d.cache==="clone"?He(p):p},p})},mutate:function(d){return d.type!=="add"&&(d.trans._cache=null),u.mutate(d)}})}}}};function vp(a,s){return a.trans.mode==="readonly"&&!!a.subscr&&!a.trans.explicit&&a.trans.db._options.cache!=="disabled"&&!s.schema.primaryKey.outbound}function yp(a,s){switch(a){case"query":return s.values&&!s.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var aw={stack:"dbcore",level:0,name:"Observability",create:function(a){var s=a.schema.name,u=new me(a.MIN_KEY,a.MAX_KEY);return r(r({},a),{transaction:function(d,h,p){if(J.subscr&&h!=="readonly")throw new nt.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(J.querier));return a.transaction(d,h,p)},table:function(d){var h=a.table(d),p=h.schema,v=p.primaryKey,y=p.indexes,b=v.extractKey,x=v.outbound,O=v.autoIncrement&&y.filter(function(S){return S.compound&&S.keyPath.includes(v.keyPath)}),w=r(r({},h),{mutate:function(S){var D,k,F=S.trans,N=S.mutatedParts||(S.mutatedParts={}),L=function(at){var wt="idb://".concat(s,"/").concat(d,"/").concat(at);return N[wt]||(N[wt]=new me)},j=L(""),P=L(":dels"),H=S.type,G=S.type==="deleteRange"?[S.range]:S.type==="delete"?[S.keys]:S.values.length<50?[Nu(v,S).filter(function(at){return at}),S.values]:[],K=G[0],it=G[1],mt=S.trans._cache;if(c(K)){j.addKeys(K);var Y=H==="delete"||K.length===it.length?gp(K,mt):null;Y||P.addKeys(K),(Y||it)&&sw(L,p,Y,it)}else if(K){var pt={from:(D=K.lower)!==null&&D!==void 0?D:a.MIN_KEY,to:(k=K.upper)!==null&&k!==void 0?k:a.MAX_KEY};P.add(pt),j.add(pt)}else j.add(u),P.add(u),p.indexes.forEach(function(at){return L(at.name).add(u)});return h.mutate(S).then(function(at){return K&&(S.type==="add"||S.type==="put")&&(j.addKeys(at.results),O&&O.forEach(function(wt){for(var rt=S.values.map(function(Ae){return wt.extractKey(Ae)}),Ht=wt.keyPath.findIndex(function(Ae){return Ae===v.keyPath}),ge=0,br=at.results.length;ge<br;++ge)rt[ge][Ht]=at.results[ge];L(wt.name).addKeys(rt)})),F.mutatedParts=Ds(F.mutatedParts||{},N),at})}}),M=function(S){var D,k,F=S.query,N=F.index,L=F.range;return[N,new me((D=L.lower)!==null&&D!==void 0?D:a.MIN_KEY,(k=L.upper)!==null&&k!==void 0?k:a.MAX_KEY)]},z={get:function(S){return[v,new me(S.key)]},getMany:function(S){return[v,new me().addKeys(S.keys)]},count:M,query:M,openCursor:M};return o(z).forEach(function(S){w[S]=function(D){var k=J.subscr,F=!!k,N=vp(J,h)&&yp(S,D),L=N?D.obsSet={}:k;if(F){var j=function(Y){var pt="idb://".concat(s,"/").concat(d,"/").concat(Y);return L[pt]||(L[pt]=new me)},P=j(""),H=j(":dels"),G=z[S](D),K=G[0],it=G[1];if(S==="query"&&K.isPrimaryKey&&!D.values?H.add(it):j(K.name||"").add(it),!K.isPrimaryKey)if(S==="count")H.add(u);else{var mt=S==="query"&&x&&D.values&&h.query(r(r({},D),{values:!1}));return h[S].apply(this,arguments).then(function(Y){if(S==="query"){if(x&&D.values)return mt.then(function(rt){var Ht=rt.result;return P.addKeys(Ht),Y});var pt=D.values?Y.result.map(b):Y.result;D.values?P.addKeys(pt):H.addKeys(pt)}else if(S==="openCursor"){var at=Y,wt=D.values;return at&&Object.create(at,{key:{get:function(){return H.addKey(at.primaryKey),at.key}},primaryKey:{get:function(){var rt=at.primaryKey;return H.addKey(rt),rt}},value:{get:function(){return wt&&P.addKey(at.primaryKey),at.value}}})}return Y})}}return h[S].apply(this,arguments)}}),w}})}};function sw(a,s,u,d){function h(p){var v=a(p.name||"");function y(x){return x!=null?p.extractKey(x):null}var b=function(x){return p.multiEntry&&c(x)?x.forEach(function(O){return v.addKey(O)}):v.addKey(x)};(u||d).forEach(function(x,O){var w=u&&y(u[O]),M=d&&y(d[O]);xt(w,M)!==0&&(w!=null&&b(w),M!=null&&b(M))})}s.indexes.forEach(h)}function bp(a,s,u){if(u.numFailures===0)return s;if(s.type==="deleteRange")return null;var d=s.keys?s.keys.length:"values"in s&&s.values?s.values.length:1;if(u.numFailures===d)return null;var h=r({},s);return c(h.keys)&&(h.keys=h.keys.filter(function(p,v){return!(v in u.failures)})),"values"in h&&c(h.values)&&(h.values=h.values.filter(function(p,v){return!(v in u.failures)})),h}function cw(a,s){return s.lower===void 0?!0:s.lowerOpen?xt(a,s.lower)>0:xt(a,s.lower)>=0}function lw(a,s){return s.upper===void 0?!0:s.upperOpen?xt(a,s.upper)<0:xt(a,s.upper)<=0}function Lu(a,s){return cw(a,s)&&lw(a,s)}function _p(a,s,u,d,h,p){if(!u||u.length===0)return a;var v=s.query.index,y=v.multiEntry,b=s.query.range,x=d.schema.primaryKey,O=x.extractKey,w=v.extractKey,M=(v.lowLevelIndex||v).extractKey,z=u.reduce(function(S,D){var k=S,F=[];if(D.type==="add"||D.type==="put")for(var N=new me,L=D.values.length-1;L>=0;--L){var j=D.values[L],P=O(j);if(!N.hasKey(P)){var H=w(j);(y&&c(H)?H.some(function(Y){return Lu(Y,b)}):Lu(H,b))&&(N.addKey(P),F.push(j))}}switch(D.type){case"add":{var G=new me().addKeys(s.values?S.map(function(Y){return O(Y)}):S);k=S.concat(s.values?F.filter(function(Y){var pt=O(Y);return G.hasKey(pt)?!1:(G.addKey(pt),!0)}):F.map(function(Y){return O(Y)}).filter(function(Y){return G.hasKey(Y)?!1:(G.addKey(Y),!0)}));break}case"put":{var K=new me().addKeys(D.values.map(function(Y){return O(Y)}));k=S.filter(function(Y){return!K.hasKey(s.values?O(Y):Y)}).concat(s.values?F:F.map(function(Y){return O(Y)}));break}case"delete":var it=new me().addKeys(D.keys);k=S.filter(function(Y){return!it.hasKey(s.values?O(Y):Y)});break;case"deleteRange":var mt=D.range;k=S.filter(function(Y){return!Lu(O(Y),mt)});break}return k},a);return z===a?a:(z.sort(function(S,D){return xt(M(S),M(D))||xt(O(S),O(D))}),s.limit&&s.limit<1/0&&(z.length>s.limit?z.length=s.limit:a.length===s.limit&&z.length<s.limit&&(h.dirty=!0)),p?Object.freeze(z):z)}function xp(a,s){return xt(a.lower,s.lower)===0&&xt(a.upper,s.upper)===0&&!!a.lowerOpen==!!s.lowerOpen&&!!a.upperOpen==!!s.upperOpen}function uw(a,s,u,d){if(a===void 0)return s!==void 0?-1:0;if(s===void 0)return 1;var h=xt(a,s);if(h===0){if(u&&d)return 0;if(u)return 1;if(d)return-1}return h}function dw(a,s,u,d){if(a===void 0)return s!==void 0?1:0;if(s===void 0)return-1;var h=xt(a,s);if(h===0){if(u&&d)return 0;if(u)return-1;if(d)return 1}return h}function fw(a,s){return uw(a.lower,s.lower,a.lowerOpen,s.lowerOpen)<=0&&dw(a.upper,s.upper,a.upperOpen,s.upperOpen)>=0}function hw(a,s,u,d){var h=ri["idb://".concat(a,"/").concat(s)];if(!h)return[];var p=h.queries[u];if(!p)return[null,!1,h,null];var v=d.query?d.query.index.name:null,y=p[v||""];if(!y)return[null,!1,h,null];switch(u){case"query":var b=y.find(function(w){return w.req.limit===d.limit&&w.req.values===d.values&&xp(w.req.query.range,d.query.range)});if(b)return[b,!0,h,y];var x=y.find(function(w){var M="limit"in w.req?w.req.limit:1/0;return M>=d.limit&&(d.values?w.req.values:!0)&&fw(w.req.query.range,d.query.range)});return[x,!1,h,y];case"count":var O=y.find(function(w){return xp(w.req.query.range,d.query.range)});return[O,!!O,h,y]}}function pw(a,s,u,d){a.subscribers.add(u),d.addEventListener("abort",function(){a.subscribers.delete(u),a.subscribers.size===0&&mw(a,s)})}function mw(a,s){setTimeout(function(){a.subscribers.size===0&&te(s,a)},3e3)}var gw={stack:"dbcore",level:0,name:"Cache",create:function(a){var s=a.schema.name,u=r(r({},a),{transaction:function(d,h,p){var v=a.transaction(d,h,p);if(h==="readwrite"){var y=new AbortController,b=y.signal,x=function(O){return function(){if(y.abort(),h==="readwrite"){for(var w=new Set,M=0,z=d;M<z.length;M++){var S=z[M],D=ri["idb://".concat(s,"/").concat(S)];if(D){var k=a.table(S),F=D.optimisticOps.filter(function(wt){return wt.trans===v});if(v._explicit&&O&&v.mutatedParts)for(var N=0,L=Object.values(D.queries.query);N<L.length;N++)for(var j=L[N],P=0,H=j.slice();P<H.length;P++){var G=H[P];Au(G.obsSet,v.mutatedParts)&&(te(j,G),G.subscribers.forEach(function(wt){return w.add(wt)}))}else if(F.length>0){D.optimisticOps=D.optimisticOps.filter(function(wt){return wt.trans!==v});for(var K=0,it=Object.values(D.queries.query);K<it.length;K++)for(var j=it[K],mt=0,Y=j.slice();mt<Y.length;mt++){var G=Y[mt];if(G.res!=null&&v.mutatedParts)if(O&&!G.dirty){var pt=Object.isFrozen(G.res),at=_p(G.res,G.req,F,k,G,pt);G.dirty?(te(j,G),G.subscribers.forEach(function(Ht){return w.add(Ht)})):at!==G.res&&(G.res=at,G.promise=q.resolve({result:at}))}else G.dirty&&te(j,G),G.subscribers.forEach(function(Ht){return w.add(Ht)})}}}}w.forEach(function(wt){return wt()})}}};v.addEventListener("abort",x(!1),{signal:b}),v.addEventListener("error",x(!1),{signal:b}),v.addEventListener("complete",x(!0),{signal:b})}return v},table:function(d){var h=a.table(d),p=h.schema.primaryKey,v=r(r({},h),{mutate:function(y){var b=J.trans;if(p.outbound||b.db._options.cache==="disabled"||b.explicit||b.idbtrans.mode!=="readwrite")return h.mutate(y);var x=ri["idb://".concat(s,"/").concat(d)];if(!x)return h.mutate(y);var O=h.mutate(y);return(y.type==="add"||y.type==="put")&&(y.values.length>=50||Nu(p,y).some(function(w){return w==null}))?O.then(function(w){var M=r(r({},y),{values:y.values.map(function(S,D){var k;if(w.failures[D])return S;var F=!((k=p.keyPath)===null||k===void 0)&&k.includes(".")?He(S):r({},S);return _t(F,p.keyPath,w.results[D]),F})}),z=bp(x,M,w);x.optimisticOps.push(z),queueMicrotask(function(){return y.mutatedParts&&As(y.mutatedParts)})}):(x.optimisticOps.push(y),y.mutatedParts&&As(y.mutatedParts),O.then(function(w){if(w.numFailures>0){te(x.optimisticOps,y);var M=bp(x,y,w);M&&x.optimisticOps.push(M),y.mutatedParts&&As(y.mutatedParts)}}),O.catch(function(){te(x.optimisticOps,y),y.mutatedParts&&As(y.mutatedParts)})),O},query:function(y){var b;if(!vp(J,h)||!yp("query",y))return h.query(y);var x=((b=J.trans)===null||b===void 0?void 0:b.db._options.cache)==="immutable",O=J,w=O.requery,M=O.signal,z=hw(s,d,"query",y),S=z[0],D=z[1],k=z[2],F=z[3];if(S&&D)S.obsSet=y.obsSet;else{var N=h.query(y).then(function(L){var j=L.result;if(S&&(S.res=j),x){for(var P=0,H=j.length;P<H;++P)Object.freeze(j[P]);Object.freeze(j)}else L.result=He(j);return L}).catch(function(L){return F&&S&&te(F,S),Promise.reject(L)});S={obsSet:y.obsSet,promise:N,subscribers:new Set,type:"query",req:y,dirty:!1},F?F.push(S):(F=[S],k||(k=ri["idb://".concat(s,"/").concat(d)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),k.queries.query[y.query.index.name||""]=F)}return pw(S,F,w,M),S.promise.then(function(L){return{result:_p(L.result,y,k?.optimisticOps,h,S,x)}})}});return v}});return u}};function Is(a,s){return new Proxy(a,{get:function(u,d,h){return d==="db"?s:Reflect.get(u,d,h)}})}var Vr=function(){function a(s,u){var d=this;this._middlewares={},this.verno=0;var h=a.dependencies;this._options=u=r({addons:a.addons,autoOpen:!0,indexedDB:h.indexedDB,IDBKeyRange:h.IDBKeyRange,cache:"cloned"},u),this._deps={indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange};var p=u.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var v={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:kt,dbReadyPromise:null,cancelOpen:kt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:u.autoOpen};v.dbReadyPromise=new q(function(b){v.dbReadyResolve=b}),v.openCanceller=new q(function(b,x){v.cancelOpen=x}),this._state=v,this.name=s,this.on=zo(this,"populate","blocked","versionchange","close",{ready:[tu,kt]}),this.on.ready.subscribe=X(this.on.ready.subscribe,function(b){return function(x,O){a.vip(function(){var w=d._state;if(w.openComplete)w.dbOpenError||q.resolve().then(x),O&&b(x);else if(w.onReadyBeingFired)w.onReadyBeingFired.push(x),O&&b(x);else{b(x);var M=d;O||b(function z(){M.on.ready.unsubscribe(x),M.on.ready.unsubscribe(z)})}})}}),this.Collection=Sx(this),this.Table=_x(this),this.Transaction=Tx(this),this.Version=Gx(this),this.WhereClause=kx(this),this.on("versionchange",function(b){b.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(d.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(d.name,"'. Closing db now to resume the delete request.")),d.close({disableAutoOpen:!1})}),this.on("blocked",function(b){!b.newVersion||b.newVersion<b.oldVersion?console.warn("Dexie.delete('".concat(d.name,"') was blocked")):console.warn("Upgrade '".concat(d.name,"' blocked by other connection holding version ").concat(b.oldVersion/10))}),this._maxKey=qo(u.IDBKeyRange),this._createTransaction=function(b,x,O,w){return new d.Transaction(b,x,O,d._options.chromeTransactionDurability,w)},this._fireOnBlocked=function(b){d.on("blocked").fire(b),Bi.filter(function(x){return x.name===d.name&&x!==d&&!x._state.vcFired}).map(function(x){return x.on("versionchange").fire(b)})},this.use(ow),this.use(gw),this.use(aw),this.use(rw),this.use(nw);var y=new Proxy(this,{get:function(b,x,O){if(x==="_vip")return!0;if(x==="table")return function(M){return Is(d.table(M),y)};var w=Reflect.get(b,x,O);return w instanceof rp?Is(w,y):x==="tables"?w.map(function(M){return Is(M,y)}):x==="_createTransaction"?function(){var M=w.apply(this,arguments);return Is(M,y)}:w}});this.vip=y,p.forEach(function(b){return b(d)})}return a.prototype.version=function(s){if(isNaN(s)||s<.1)throw new nt.Type("Given version is not a positive number");if(s=Math.round(s*10)/10,this.idbdb||this._state.isBeingOpened)throw new nt.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,s);var u=this._versions,d=u.filter(function(h){return h._cfg.version===s})[0];return d||(d=new this.Version(s),u.push(d),u.sort(Fx),d.stores({}),this._state.autoSchema=!1,d)},a.prototype._whenReady=function(s){var u=this;return this.idbdb&&(this._state.openComplete||J.letThrough||this._vip)?s():new q(function(d,h){if(u._state.openComplete)return h(new nt.DatabaseClosed(u._state.dbOpenError));if(!u._state.isBeingOpened){if(!u._state.autoOpen){h(new nt.DatabaseClosed);return}u.open().catch(kt)}u._state.dbReadyPromise.then(d,h)}).then(s)},a.prototype.use=function(s){var u=s.stack,d=s.create,h=s.level,p=s.name;p&&this.unuse({stack:u,name:p});var v=this._middlewares[u]||(this._middlewares[u]=[]);return v.push({stack:u,create:d,level:h??10,name:p}),v.sort(function(y,b){return y.level-b.level}),this},a.prototype.unuse=function(s){var u=s.stack,d=s.name,h=s.create;return u&&this._middlewares[u]&&(this._middlewares[u]=this._middlewares[u].filter(function(p){return h?p.create!==h:d?p.name!==d:!1})),this},a.prototype.open=function(){var s=this;return Jn(fn,function(){return Jx(s)})},a.prototype._close=function(){var s=this._state,u=Bi.indexOf(this);if(u>=0&&Bi.splice(u,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}s.isBeingOpened||(s.dbReadyPromise=new q(function(d){s.dbReadyResolve=d}),s.openCanceller=new q(function(d,h){s.cancelOpen=h}))},a.prototype.close=function(s){var u=s===void 0?{disableAutoOpen:!0}:s,d=u.disableAutoOpen,h=this._state;d?(h.isBeingOpened&&h.cancelOpen(new nt.DatabaseClosed),this._close(),h.autoOpen=!1,h.dbOpenError=new nt.DatabaseClosed):(this._close(),h.autoOpen=this._options.autoOpen||h.isBeingOpened,h.openComplete=!1,h.dbOpenError=null)},a.prototype.delete=function(s){var u=this;s===void 0&&(s={disableAutoOpen:!0});var d=arguments.length>0&&typeof arguments[0]!="object",h=this._state;return new q(function(p,v){var y=function(){u.close(s);var b=u._deps.indexedDB.deleteDatabase(u.name);b.onsuccess=Ft(function(){Xx(u._deps,u.name),p()}),b.onerror=yr(v),b.onblocked=u._fireOnBlocked};if(d)throw new nt.InvalidArgument("Invalid closeOptions argument to db.delete()");h.isBeingOpened?h.dbReadyPromise.then(y):y()})},a.prototype.backendDB=function(){return this.idbdb},a.prototype.isOpen=function(){return this.idbdb!==null},a.prototype.hasBeenClosed=function(){var s=this._state.dbOpenError;return s&&s.name==="DatabaseClosed"},a.prototype.hasFailed=function(){return this._state.dbOpenError!==null},a.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(a.prototype,"tables",{get:function(){var s=this;return o(this._allTables).map(function(u){return s._allTables[u]})},enumerable:!1,configurable:!0}),a.prototype.transaction=function(){var s=tw.apply(this,arguments);return this._transaction.apply(this,s)},a.prototype._transaction=function(s,u,d){var h=this,p=J.trans;(!p||p.db!==this||s.indexOf("!")!==-1)&&(p=null);var v=s.indexOf("?")!==-1;s=s.replace("!","").replace("?","");var y,b;try{if(b=u.map(function(O){var w=O instanceof h.Table?O.name:O;if(typeof w!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return w}),s=="r"||s===fu)y=fu;else if(s=="rw"||s==hu)y=hu;else throw new nt.InvalidArgument("Invalid transaction mode: "+s);if(p){if(p.mode===fu&&y===hu)if(v)p=null;else throw new nt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");p&&b.forEach(function(O){if(p&&p.storeNames.indexOf(O)===-1)if(v)p=null;else throw new nt.SubTransaction("Table "+O+" not included in parent transaction.")}),v&&p&&!p.active&&(p=null)}}catch(O){return p?p._promise(null,function(w,M){M(O)}):Kt(O)}var x=mp.bind(null,this,y,b,p,d);return p?p._promise(y,x,"lock"):J.trans?Jn(J.transless,function(){return h._whenReady(x)}):this._whenReady(x)},a.prototype.table=function(s){if(!m(this._allTables,s))throw new nt.InvalidTable("Table ".concat(s," does not exist"));return this._allTables[s]},a}(),vw=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",yw=function(){function a(s){this._subscribe=s}return a.prototype.subscribe=function(s,u,d){return this._subscribe(!s||typeof s=="function"?{next:s,error:u,complete:d}:s)},a.prototype[vw]=function(){return this},a}(),Ts;try{Ts={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{Ts={indexedDB:null,IDBKeyRange:null}}function wp(a){var s=!1,u,d=new yw(function(h){var p=Xl(a);function v(F){var N=Ni();try{p&&$i();var L=hn(a,F);return p&&(L=L.finally(pn)),L}finally{N&&Li()}}var y=!1,b,x={},O={},w={get closed(){return y},unsubscribe:function(){y||(y=!0,b&&b.abort(),M&&vn.storagemutated.unsubscribe(D))}};h.start&&h.start(w);var M=!1,z=function(){return lu(k)};function S(){return Au(O,x)}var D=function(F){Ds(x,F),S()&&z()},k=function(){if(!(y||!Ts.indexedDB)){x={};var F={};b&&b.abort(),b=new AbortController;var N={subscr:F,signal:b.signal,requery:z,querier:a,trans:null},L=v(N);Promise.resolve(L).then(function(j){s=!0,u=j,!(y||N.signal.aborted)&&(x={},O=F,!Yl(O)&&!M&&(vn(Ko,D),M=!0),lu(function(){return!y&&h.next&&h.next(j)}))},function(j){s=!1,["DatabaseClosedError","AbortError"].includes(j?.name)||y||lu(function(){y||h.error&&h.error(j)})})}};return setTimeout(z,0),w});return d.hasValue=function(){return s},d.getValue=function(){return u},d}var ni=Vr;_(ni,r(r({},cs),{delete:function(a){var s=new ni(a,{addons:[]});return s.delete()},exists:function(a){return new ni(a,{addons:[]}).open().then(function(s){return s.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return Qx(ni.dependencies).then(a)}catch{return Kt(new nt.MissingAPI)}},defineClass:function(){function a(s){l(this,s)}return a},ignoreTransaction:function(a){return J.trans?Jn(J.transless,a):a()},vip:Eu,async:function(a){return function(){try{var s=Mu(a.apply(this,arguments));return!s||typeof s.then!="function"?q.resolve(s):s}catch(u){return Kt(u)}}},spawn:function(a,s,u){try{var d=Mu(a.apply(u,s||[]));return!d||typeof d.then!="function"?q.resolve(d):d}catch(h){return Kt(h)}},currentTransaction:{get:function(){return J.trans||null}},waitFor:function(a,s){var u=q.resolve(typeof a=="function"?ni.ignoreTransaction(a):a).timeout(s||6e4);return J.trans?J.trans.waitFor(u):u},Promise:q,debug:{get:function(){return vr},set:function(a){Uh(a)}},derive:A,extend:l,props:_,override:X,Events:zo,on:vn,liveQuery:wp,extendObservabilitySet:Ds,getByKeyPath:vt,setByKeyPath:_t,delByKeyPath:pe,shallowClone:gr,deepClone:He,getObjectDiff:Pu,cmp:xt,asap:yt,minKey:du,addons:[],connections:Bi,errnames:Jl,dependencies:Ts,cache:ri,semVer:Yh,version:Yh.split(".").map(function(a){return parseInt(a)}).reduce(function(a,s,u){return a+s/Math.pow(10,u*2)})})),ni.maxKey=qo(ni.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(vn(Ko,function(a){if(!yn){var s;s=new CustomEvent(vu,{detail:a}),yn=!0,dispatchEvent(s),yn=!1}}),addEventListener(vu,function(a){var s=a.detail;yn||$u(s)}));function $u(a){var s=yn;try{yn=!0,vn.storagemutated.fire(a),Tu(a,!0)}finally{yn=s}}var yn=!1,bn,Bu=function(){};typeof BroadcastChannel<"u"&&(Bu=function(){bn=new BroadcastChannel(vu),bn.onmessage=function(a){return a.data&&$u(a.data)}},Bu(),typeof bn.unref=="function"&&bn.unref(),vn(Ko,function(a){yn||bn.postMessage(a)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(a){if(!Vr.disableBfCache&&a.persisted){vr&&console.debug("Dexie: handling persisted pagehide"),bn?.close();for(var s=0,u=Bi;s<u.length;s++){var d=u[s];d.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(a){!Vr.disableBfCache&&a.persisted&&(vr&&console.debug("Dexie: handling persisted pageshow"),Bu(),$u({all:new me(-1/0,[[]])}))}));function bw(a){return new Ho({add:a})}function _w(a){return new Ho({remove:a})}function xw(a,s){return new Ho({replacePrefix:[a,s]})}q.rejectionMapper=tx,Uh(vr);var ww=Object.freeze({__proto__:null,Dexie:Vr,liveQuery:wp,Entity:Jh,cmp:xt,PropModSymbol:wx,PropModification:Ho,replacePrefix:xw,add:bw,remove:_w,default:Vr,RangeSet:me,mergeRanges:Yo,rangesOverlap:dp});return r(Vr,ww,{default:Vr}),Vr})});var sa=class{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Zr=class extends sa{component;viewContainerRef;injector;projectableNodes;constructor(e,r,n,i){super(),this.component=e,this.viewContainerRef=r,this.injector=n,this.projectableNodes=i}},Dr=class extends sa{templateRef;viewContainerRef;context;injector;constructor(e,r,n,i){super(),this.templateRef=e,this.viewContainerRef=r,this.context=n,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,r=this.context){return this.context=r,super.attach(e)}detach(){return this.context=void 0,super.detach()}},ed=class extends sa{element;constructor(e){super(),this.element=e instanceof Gt?e.nativeElement:e}},Rn=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof Zr)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof Dr)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof ed)return this._attachedPortal=e,this.attachDomPortal(e)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},Ks=class extends Rn{outletElement;_appRef;_defaultInjector;constructor(e,r,n){super(),this.outletElement=e,this._appRef=r,this._defaultInjector=n}attachComponentPortal(e){let r;if(e.viewContainerRef){let n=e.injector||e.viewContainerRef.injector,i=n.get(Wu,null,{optional:!0})||void 0;r=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:n,ngModuleRef:i,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>r.destroy())}else{let n=this._appRef,i=e.injector||this._defaultInjector||Ct.NULL,o=i.get(ar,n.injector);r=im(e.component,{elementInjector:i,environmentInjector:o,projectableNodes:e.projectableNodes||void 0}),n.attachView(r.hostView),this.setDisposeFn(()=>{n.viewCount>0&&n.detachView(r.hostView),r.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let r=e.viewContainerRef,n=r.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return n.rootNodes.forEach(i=>this.outletElement.appendChild(i)),n.detectChanges(),this.setDisposeFn(()=>{let i=r.indexOf(n);i!==-1&&r.remove(i)}),this._attachedPortal=e,n}attachDomPortal=e=>{let r=e.element;r.parentNode;let n=this.outletElement.ownerDocument.createComment("dom-portal");r.parentNode.insertBefore(n,r),this.outletElement.appendChild(r),this._attachedPortal=e,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(r,n)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}},gD=(()=>{class t extends Dr{constructor(){let r=E(Kr),n=E(Cn);super(r,n)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Pt({type:t,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[be]})}return t})();var En=(()=>{class t extends Rn{_moduleRef=E(Wu,{optional:!0});_document=E(oe);_viewContainerRef=E(Cn);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(r){this.hasAttached()&&!r&&!this._isInitialized||(this.hasAttached()&&super.detach(),r&&super.attach(r),this._attachedPortal=r||null)}attached=new ee;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(r){r.setAttachedHost(this);let n=r.viewContainerRef!=null?r.viewContainerRef:this._viewContainerRef,i=n.createComponent(r.component,{index:n.length,injector:r.injector||n.injector,projectableNodes:r.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return n!==this._viewContainerRef&&this._getRootNode().appendChild(i.hostView.rootNodes[0]),super.setDisposeFn(()=>i.destroy()),this._attachedPortal=r,this._attachedRef=i,this.attached.emit(i),i}attachTemplatePortal(r){r.setAttachedHost(this);let n=this._viewContainerRef.createEmbeddedView(r.templateRef,r.context,{injector:r.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=r,this._attachedRef=n,this.attached.emit(n),n}attachDomPortal=r=>{let n=r.element;n.parentNode;let i=this._document.createComment("dom-portal");r.setAttachedHost(this),n.parentNode.insertBefore(i,n),this._getRootNode().appendChild(n),this._attachedPortal=r,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(n,i)})};_getRootNode(){let r=this._viewContainerRef.element.nativeElement;return r.nodeType===r.ELEMENT_NODE?r:r.parentNode}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Pt({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[be]})}return t})();var Jr=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Qt({type:t});static \u0275inj=qt({})}return t})();var ur=function(t){return t[t.NORMAL=0]="NORMAL",t[t.NEGATED=1]="NEGATED",t[t.INVERTED=2]="INVERTED",t}(ur||{}),qs,fi;function Gs(){if(fi==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return fi=!1,fi;if("scrollBehavior"in document.documentElement.style)fi=!0;else{let t=Element.prototype.scrollTo;t?fi=!/\{\s*\[native code\]\s*\}/.test(t.toString()):fi=!1}}return fi}function Yi(){if(typeof document!="object"||!document)return ur.NORMAL;if(qs==null){let t=document.createElement("div"),e=t.style;t.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";let r=document.createElement("div"),n=r.style;n.width="2px",n.height="1px",t.appendChild(r),document.body.appendChild(t),qs=ur.NORMAL,t.scrollLeft===0&&(t.scrollLeft=1,qs=t.scrollLeft===0?ur.NEGATED:ur.INVERTED),t.remove()}return qs}function rd(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var Xi,wm=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function CD(){if(Xi)return Xi;if(typeof document!="object"||!document)return Xi=new Set(wm),Xi;let t=document.createElement("input");return Xi=new Set(wm.filter(e=>(t.setAttribute("type",e),t.type===e))),Xi}var Cm={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};var Ow=new lt("MATERIAL_ANIMATIONS");function Ge(){return E(Ow,{optional:!0})?.animationsDisabled||E(Fs,{optional:!0})==="NoopAnimations"?!0:E(Ju).matchMedia("(prefers-reduced-motion)").matches}function Yt(t){return t==null?"":typeof t=="string"?t:`${t}px`}function ND(t){return t!=null&&`${t}`!="false"}var Qe=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(Qe||{}),nd=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=Qe.HIDDEN;constructor(e,r,n,i=!1){this._renderer=e,this.element=r,this.config=n,this._animationForciblyDisabledThroughCss=i}fadeOut(){this._renderer.fadeOutRipple(this)}},Sm=Hs({passive:!0,capture:!0}),id=class{_events=new Map;addHandler(e,r,n,i){let o=this._events.get(r);if(o){let c=o.get(n);c?c.add(i):o.set(n,new Set([i]))}else this._events.set(r,new Map([[n,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(r,this._delegateEventHandler,Sm)})}removeHandler(e,r,n){let i=this._events.get(e);if(!i)return;let o=i.get(r);o&&(o.delete(n),o.size===0&&i.delete(r),i.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,Sm)))}_delegateEventHandler=e=>{let r=Yr(e);r&&this._events.get(e.type)?.forEach((n,i)=>{(i===r||i.contains(r))&&n.forEach(o=>o.handleEvent(e))})}},ca={enterDuration:225,exitDuration:150},Dw=800,Rm=Hs({passive:!0,capture:!0}),Em=["mousedown","touchstart"],Om=["mouseup","mouseleave","touchend","touchcancel"],Aw=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Xt({type:t,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(n,i){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return t})(),la=class t{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new id;constructor(e,r,n,i,o){this._target=e,this._ngZone=r,this._platform=i,i.isBrowser&&(this._containerElement=Gi(n)),o&&o.get(di).load(Aw)}fadeInRipple(e,r,n={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=$($({},ca),n.animation);n.centered&&(e=i.left+i.width/2,r=i.top+i.height/2);let c=n.radius||kw(e,r,i),l=e-i.left,f=r-i.top,g=o.enterDuration,m=document.createElement("div");m.classList.add("mat-ripple-element"),m.style.left=`${l-c}px`,m.style.top=`${f-c}px`,m.style.height=`${c*2}px`,m.style.width=`${c*2}px`,n.color!=null&&(m.style.backgroundColor=n.color),m.style.transitionDuration=`${g}ms`,this._containerElement.appendChild(m);let _=window.getComputedStyle(m),C=_.transitionProperty,R=_.transitionDuration,A=C==="none"||R==="0s"||R==="0s, 0s"||i.width===0&&i.height===0,B=new nd(this,m,n,A);m.style.transform="scale3d(1, 1, 1)",B.state=Qe.FADING_IN,n.persistent||(this._mostRecentTransientRipple=B);let W=null;return!A&&(g||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let Z=()=>{W&&(W.fallbackTimer=null),clearTimeout(X),this._finishRippleTransition(B)},tt=()=>this._destroyRipple(B),X=setTimeout(tt,g+100);m.addEventListener("transitionend",Z),m.addEventListener("transitioncancel",tt),W={onTransitionEnd:Z,onTransitionCancel:tt,fallbackTimer:X}}),this._activeRipples.set(B,W),(A||!g)&&this._finishRippleTransition(B),B}fadeOutRipple(e){if(e.state===Qe.FADING_OUT||e.state===Qe.HIDDEN)return;let r=e.element,n=$($({},ca),e.config.animation);r.style.transitionDuration=`${n.exitDuration}ms`,r.style.opacity="0",e.state=Qe.FADING_OUT,(e._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let r=Gi(e);!this._platform.isBrowser||!r||r===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=r,Em.forEach(n=>{t._eventManager.addHandler(this._ngZone,n,r,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Om.forEach(r=>{this._triggerElement.addEventListener(r,this,Rm)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Qe.FADING_IN?this._startFadeOutTransition(e):e.state===Qe.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let r=e===this._mostRecentTransientRipple,{persistent:n}=e.config;e.state=Qe.VISIBLE,!n&&(!r||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let r=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Qe.HIDDEN,r!==null&&(e.element.removeEventListener("transitionend",r.onTransitionEnd),e.element.removeEventListener("transitioncancel",r.onTransitionCancel),r.fallbackTimer!==null&&clearTimeout(r.fallbackTimer)),e.element.remove()}_onMousedown(e){let r=pm(e),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+Dw;!this._target.rippleDisabled&&!r&&!n&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!mm(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let r=e.changedTouches;if(r)for(let n=0;n<r.length;n++)this.fadeInRipple(r[n].clientX,r[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let r=e.state===Qe.VISIBLE||e.config.terminateOnPointerUp&&e.state===Qe.FADING_IN;!e.config.persistent&&r&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(Em.forEach(r=>t._eventManager.removeHandler(r,e,this)),this._pointerUpEventsRegistered&&(Om.forEach(r=>e.removeEventListener(r,this,Rm)),this._pointerUpEventsRegistered=!1))}};function kw(t,e,r){let n=Math.max(Math.abs(t-r.left),Math.abs(t-r.right)),i=Math.max(Math.abs(e-r.top),Math.abs(e-r.bottom));return Math.sqrt(n*n+i*i)}var od=new lt("mat-ripple-global-options"),QD=(()=>{class t{_elementRef=E(Gt);_animationsDisabled=Ge();color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(r){r&&this.fadeOutAllNonPersistent(),this._disabled=r,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(r){this._trigger=r,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){let r=E(zt),n=E(_e),i=E(od,{optional:!0}),o=E(Ct);this._globalOptions=i||{},this._rippleRenderer=new la(this,r,this._elementRef,n,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:$($($({},this._globalOptions.animation),this._animationsDisabled?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(r,n=0,i){return typeof r=="number"?this._rippleRenderer.fadeInRipple(r,n,$($({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,$($({},this.rippleConfig),r))}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Pt({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(n,i){n&2&&Ke("mat-ripple-unbounded",i.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return t})();var Iw={capture:!0},Tw=["focus","mousedown","mouseenter","touchstart"],ad="mat-ripple-loader-uninitialized",sd="mat-ripple-loader-class-name",Dm="mat-ripple-loader-centered",Qs="mat-ripple-loader-disabled",Am=(()=>{class t{_document=E(oe);_animationsDisabled=Ge();_globalRippleOptions=E(od,{optional:!0});_platform=E(_e);_ngZone=E(zt);_injector=E(Ct);_eventCleanups;_hosts=new Map;constructor(){let r=E(qr).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>Tw.map(n=>r.listen(this._document,n,this._onInteraction,Iw)))}ngOnDestroy(){let r=this._hosts.keys();for(let n of r)this.destroyRipple(n);this._eventCleanups.forEach(n=>n())}configureRipple(r,n){r.setAttribute(ad,this._globalRippleOptions?.namespace??""),(n.className||!r.hasAttribute(sd))&&r.setAttribute(sd,n.className||""),n.centered&&r.setAttribute(Dm,""),n.disabled&&r.setAttribute(Qs,"")}setDisabled(r,n){let i=this._hosts.get(r);i?(i.target.rippleDisabled=n,!n&&!i.hasSetUpEvents&&(i.hasSetUpEvents=!0,i.renderer.setupTriggerEvents(r))):n?r.setAttribute(Qs,""):r.removeAttribute(Qs)}_onInteraction=r=>{let n=Yr(r);if(n instanceof HTMLElement){let i=n.closest(`[${ad}="${this._globalRippleOptions?.namespace??""}"]`);i&&this._createRipple(i)}};_createRipple(r){if(!this._document||this._hosts.has(r))return;r.querySelector(".mat-ripple")?.remove();let n=this._document.createElement("span");n.classList.add("mat-ripple",r.getAttribute(sd)),r.append(n);let i=this._globalRippleOptions,o=this._animationsDisabled?0:i?.animation?.enterDuration??ca.enterDuration,c=this._animationsDisabled?0:i?.animation?.exitDuration??ca.exitDuration,l={rippleDisabled:this._animationsDisabled||i?.disabled||r.hasAttribute(Qs),rippleConfig:{centered:r.hasAttribute(Dm),terminateOnPointerUp:i?.terminateOnPointerUp,animation:{enterDuration:o,exitDuration:c}}},f=new la(l,this._ngZone,n,this._platform,this._injector),g=!l.rippleDisabled;g&&f.setupTriggerEvents(r),this._hosts.set(r,{target:l,renderer:f,hasSetUpEvents:g}),r.removeAttribute(ad)}destroyRipple(r){let n=this._hosts.get(r);n&&(n.renderer._removeTriggerEvents(),this._hosts.delete(r))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var km=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Xt({type:t,selectors:[["structural-styles"]],decls:0,vars:0,template:function(n,i){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return t})();var Mw=["mat-icon-button",""],Pw=["*"],Nw=new lt("MAT_BUTTON_CONFIG");function Im(t){return t==null?void 0:nm(t)}var cd=(()=>{class t{_elementRef=E(Gt);_ngZone=E(zt);_animationsDisabled=Ge();_config=E(Nw,{optional:!0});_focusMonitor=E(Ws);_cleanupClick;_renderer=E(Sr);_rippleLoader=E(Am);_isAnchor;_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(r){this._disableRipple=r,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(r){this._disabled=r,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;tabIndex;set _tabindex(r){this.tabIndex=r}constructor(){E(di).load(km);let r=this._elementRef.nativeElement;this._isAnchor=r.tagName==="A",this.disabledInteractive=this._config?.disabledInteractive??!1,this.color=this._config?.color??null,this._rippleLoader?.configureRipple(r,{className:"mat-mdc-button-ripple"})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0),this._isAnchor&&this._setupAsAnchor()}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(r="program",n){r?this._focusMonitor.focusVia(this._elementRef.nativeElement,r,n):this._elementRef.nativeElement.focus(n)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this._isAnchor?this.disabled||null:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}_getTabIndex(){return this._isAnchor?this.disabled&&!this.disabledInteractive?-1:this.tabIndex:this.tabIndex}_setupAsAnchor(){this._cleanupClick=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"click",r=>{this.disabled&&(r.preventDefault(),r.stopImmediatePropagation())}))}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Pt({type:t,hostAttrs:[1,"mat-mdc-button-base"],hostVars:13,hostBindings:function(n,i){n&2&&(cr("disabled",i._getDisabledAttribute())("aria-disabled",i._getAriaDisabled())("tabindex",i._getTabIndex()),Qp(i.color?"mat-"+i.color:""),Ke("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("mat-unthemed",!i.color)("_mat-animation-noopable",i._animationsDisabled))},inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",de],disabled:[2,"disabled","disabled",de],ariaDisabled:[2,"aria-disabled","ariaDisabled",de],disabledInteractive:[2,"disabledInteractive","disabledInteractive",de],tabIndex:[2,"tabIndex","tabIndex",Im],_tabindex:[2,"tabindex","_tabindex",Im]}})}return t})(),Lw=(()=>{class t extends cd{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Xt({type:t,selectors:[["button","mat-icon-button",""],["a","mat-icon-button",""],["button","matIconButton",""],["a","matIconButton",""]],hostAttrs:[1,"mdc-icon-button","mat-mdc-icon-button"],exportAs:["matButton","matAnchor"],features:[be],attrs:Mw,ngContentSelectors:Pw,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,i){n&1&&(ra(),lr(0,"span",0),ci(1),lr(2,"span",1)(3,"span",2))},styles:[`.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mat-icon-button-state-layer-size, 40px);height:var(--mat-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mat-icon-button-state-layer-size, 40px) - var(--mat-icon-button-icon-size, 24px)) / 2);font-size:var(--mat-icon-button-icon-size, 24px);color:var(--mat-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-icon-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-icon-button-touch-target-display, block);left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mat-icon-button-icon-size, 24px);height:var(--mat-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return t})();var Tm=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Qt({type:t});static \u0275inj=qt({imports:[qe,qe]})}return t})();var $w=["matButton",""],Bw=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Fw=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var Mm=new Map([["text",["mat-mdc-button"]],["filled",["mdc-button--unelevated","mat-mdc-unelevated-button"]],["elevated",["mdc-button--raised","mat-mdc-raised-button"]],["outlined",["mdc-button--outlined","mat-mdc-outlined-button"]],["tonal",["mat-tonal-button"]]]),Pm=(()=>{class t extends cd{get appearance(){return this._appearance}set appearance(r){this.setAppearance(r||this._config?.defaultAppearance||"text")}_appearance=null;constructor(){super();let r=jw(this._elementRef.nativeElement);r&&this.setAppearance(r)}setAppearance(r){if(r===this._appearance)return;let n=this._elementRef.nativeElement.classList,i=this._appearance?Mm.get(this._appearance):null,o=Mm.get(r);i&&n.remove(...i),n.add(...o),this._appearance=r}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Xt({type:t,selectors:[["button","matButton",""],["a","matButton",""],["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""],["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostAttrs:[1,"mdc-button"],inputs:{appearance:[0,"matButton","appearance"]},exportAs:["matButton","matAnchor"],features:[be],attrs:$w,ngContentSelectors:Fw,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,i){n&1&&(ra(Bw),lr(0,"span",0),ci(1),Qr(2,"span",1),ci(3,1),Rr(),ci(4,2),lr(5,"span",2)(6,"span",3)),n&2&&Ke("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab)},styles:[`.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-button-text-horizontal-padding, 12px);height:var(--mat-button-text-container-height, 40px);font-family:var(--mat-button-text-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-text-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-text-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-text-label-text-transform);font-weight:var(--mat-button-text-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mat-button-text-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mat-button-text-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-text-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-button-text-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-button-text-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-button-text-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-filled-container-height, 40px);font-family:var(--mat-button-filled-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-filled-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-filled-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-filled-label-text-transform);font-weight:var(--mat-button-filled-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-filled-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-button-filled-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-button-filled-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mat-button-filled-label-text-color, var(--mat-sys-on-primary));background-color:var(--mat-button-filled-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mat-button-filled-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mat-button-protected-container-elevation-shadow, var(--mat-sys-level1));height:var(--mat-button-protected-container-height, 40px);font-family:var(--mat-button-protected-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-protected-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-protected-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-protected-label-text-transform);font-weight:var(--mat-button-protected-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-protected-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-button-protected-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-button-protected-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-raised-button:not(:disabled){color:var(--mat-button-protected-label-text-color, var(--mat-sys-primary));background-color:var(--mat-button-protected-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mat-button-protected-container-shape, var(--mat-sys-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mat-button-protected-hover-container-elevation-shadow, var(--mat-sys-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mat-button-protected-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mat-button-protected-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-protected-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-protected-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mat-button-protected-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-outlined-container-height, 40px);font-family:var(--mat-button-outlined-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-outlined-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-outlined-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-outlined-label-text-transform);font-weight:var(--mat-button-outlined-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mat-button-outlined-container-shape, var(--mat-sys-corner-full));border-width:var(--mat-button-outlined-outline-width, 1px);padding:0 var(--mat-button-outlined-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-button-outlined-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-button-outlined-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-outlined-button:not(:disabled){color:var(--mat-button-outlined-label-text-color, var(--mat-sys-primary));border-color:var(--mat-button-outlined-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mat-button-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-tonal-container-height, 40px);font-family:var(--mat-button-tonal-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-tonal-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-tonal-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-tonal-label-text-transform);font-weight:var(--mat-button-tonal-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-tonal-horizontal-padding, 24px)}.mat-tonal-button:not(:disabled){color:var(--mat-button-tonal-label-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-button-tonal-container-color, var(--mat-sys-secondary-container))}.mat-tonal-button,.mat-tonal-button .mdc-button__ripple{border-radius:var(--mat-button-tonal-container-shape, var(--mat-sys-corner-full))}.mat-tonal-button[disabled],.mat-tonal-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-tonal-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-tonal-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-tonal-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}[dir=rtl] .mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}.mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}[dir=rtl] .mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}.mat-tonal-button .mat-ripple-element{background-color:var(--mat-button-tonal-ripple-color, color-mix(in srgb, var(--mat-sys-on-secondary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-tonal-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-tonal-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-tonal-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-tonal-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-tonal-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-tonal-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-button-tonal-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button,.mat-tonal-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon,.mat-tonal-button .mdc-button__label,.mat-tonal-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator,.mat-tonal-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-button:focus>.mat-focus-indicator::before,.mat-mdc-unelevated-button:focus>.mat-focus-indicator::before,.mat-mdc-raised-button:focus>.mat-focus-indicator::before,.mat-mdc-outlined-button:focus>.mat-focus-indicator::before,.mat-tonal-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable,.mat-tonal-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon,.mat-tonal-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-tonal-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return t})();function jw(t){return t.hasAttribute("mat-raised-button")?"elevated":t.hasAttribute("mat-stroked-button")?"outlined":t.hasAttribute("mat-flat-button")?"filled":t.hasAttribute("mat-button")?"text":null}var Nm=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Qt({type:t});static \u0275inj=qt({imports:[qe,Tm,qe]})}return t})();var dt="primary",wa=Symbol("RouteTitle"),hd=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let r=this.params[e];return Array.isArray(r)?r[0]:r}return null}getAll(e){if(this.has(e)){let r=this.params[e];return Array.isArray(r)?r:[r]}return[]}get keys(){return Object.keys(this.params)}};function mi(t){return new hd(t)}function Vm(t,e,r){let n=r.path.split("/");if(n.length>t.length||r.pathMatch==="full"&&(e.hasChildren()||n.length<t.length))return null;let i={};for(let o=0;o<n.length;o++){let c=n[o],l=t[o];if(c[0]===":")i[c.substring(1)]=l;else if(c!==l.path)return null}return{consumed:t.slice(0,n.length),posParams:i}}function Uw(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!Ar(t[r],e[r]))return!1;return!0}function Ar(t,e){let r=t?pd(t):void 0,n=e?pd(e):void 0;if(!r||!n||r.length!=n.length)return!1;let i;for(let o=0;o<r.length;o++)if(i=r[o],!Hm(t[i],e[i]))return!1;return!0}function pd(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Hm(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let r=[...t].sort(),n=[...e].sort();return r.every((i,o)=>n[o]===i)}else return t===e}function Wm(t){return t.length>0?t[t.length-1]:null}function tn(t){return ta(t)?t:qp(t)?le(Promise.resolve(t)):et(t)}var zw={exact:qm,subset:Gm},Km={exact:Vw,subset:Hw,ignored:()=>!0};function Lm(t,e,r){return zw[r.paths](t.root,e.root,r.matrixParams)&&Km[r.queryParams](t.queryParams,e.queryParams)&&!(r.fragment==="exact"&&t.fragment!==e.fragment)}function Vw(t,e){return Ar(t,e)}function qm(t,e,r){if(!hi(t.segments,e.segments)||!Zs(t.segments,e.segments,r)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let n in e.children)if(!t.children[n]||!qm(t.children[n],e.children[n],r))return!1;return!0}function Hw(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(r=>Hm(t[r],e[r]))}function Gm(t,e,r){return Qm(t,e,e.segments,r)}function Qm(t,e,r,n){if(t.segments.length>r.length){let i=t.segments.slice(0,r.length);return!(!hi(i,r)||e.hasChildren()||!Zs(i,r,n))}else if(t.segments.length===r.length){if(!hi(t.segments,r)||!Zs(t.segments,r,n))return!1;for(let i in e.children)if(!t.children[i]||!Gm(t.children[i],e.children[i],n))return!1;return!0}else{let i=r.slice(0,t.segments.length),o=r.slice(t.segments.length);return!hi(t.segments,i)||!Zs(t.segments,i,n)||!t.children[dt]?!1:Qm(t.children[dt],e,o,n)}}function Zs(t,e,r){return e.every((n,i)=>Km[r](t[i].parameters,n.parameters))}var kr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Et([],{}),r={},n=null){this.root=e,this.queryParams=r,this.fragment=n}get queryParamMap(){return this._queryParamMap??=mi(this.queryParams),this._queryParamMap}toString(){return qw.serialize(this)}},Et=class{segments;children;parent=null;constructor(e,r){this.segments=e,this.children=r,Object.values(r).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Js(this)}},On=class{path;parameters;_parameterMap;constructor(e,r){this.path=e,this.parameters=r}get parameterMap(){return this._parameterMap??=mi(this.parameters),this._parameterMap}toString(){return Xm(this)}};function Ww(t,e){return hi(t,e)&&t.every((r,n)=>Ar(r.parameters,e[n].parameters))}function hi(t,e){return t.length!==e.length?!1:t.every((r,n)=>r.path===e[n].path)}function Kw(t,e){let r=[];return Object.entries(t.children).forEach(([n,i])=>{n===dt&&(r=r.concat(e(i,n)))}),Object.entries(t.children).forEach(([n,i])=>{n!==dt&&(r=r.concat(e(i,n)))}),r}var gi=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:()=>new Dn,providedIn:"root"})}return t})(),Dn=class{parse(e){let r=new gd(e);return new kr(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}serialize(e){let r=`/${ua(e.root,!0)}`,n=Yw(e.queryParams),i=typeof e.fragment=="string"?`#${Gw(e.fragment)}`:"";return`${r}${n}${i}`}},qw=new Dn;function Js(t){return t.segments.map(e=>Xm(e)).join("/")}function ua(t,e){if(!t.hasChildren())return Js(t);if(e){let r=t.children[dt]?ua(t.children[dt],!1):"",n=[];return Object.entries(t.children).forEach(([i,o])=>{i!==dt&&n.push(`${i}:${ua(o,!1)}`)}),n.length>0?`${r}(${n.join("//")})`:r}else{let r=Kw(t,(n,i)=>i===dt?[ua(t.children[dt],!1)]:[`${i}:${ua(n,!1)}`]);return Object.keys(t.children).length===1&&t.children[dt]!=null?`${Js(t)}/${r[0]}`:`${Js(t)}/(${r.join("//")})`}}function Ym(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ys(t){return Ym(t).replace(/%3B/gi,";")}function Gw(t){return encodeURI(t)}function md(t){return Ym(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function tc(t){return decodeURIComponent(t)}function $m(t){return tc(t.replace(/\+/g,"%20"))}function Xm(t){return`${md(t.path)}${Qw(t.parameters)}`}function Qw(t){return Object.entries(t).map(([e,r])=>`;${md(e)}=${md(r)}`).join("")}function Yw(t){let e=Object.entries(t).map(([r,n])=>Array.isArray(n)?n.map(i=>`${Ys(r)}=${Ys(i)}`).join("&"):`${Ys(r)}=${Ys(n)}`).filter(r=>r);return e.length?`?${e.join("&")}`:""}var Xw=/^[^\/()?;#]+/;function ld(t){let e=t.match(Xw);return e?e[0]:""}var Zw=/^[^\/()?;=#]+/;function Jw(t){let e=t.match(Zw);return e?e[0]:""}var t0=/^[^=?&#]+/;function e0(t){let e=t.match(t0);return e?e[0]:""}var r0=/^[^&#]+/;function n0(t){let e=t.match(r0);return e?e[0]:""}var gd=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Et([],{}):new Et([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(r).length>0)&&(n[dt]=new Et(e,r)),n}parseSegment(){let e=ld(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ye(4009,!1);return this.capture(e),new On(tc(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let r=Jw(this.remaining);if(!r)return;this.capture(r);let n="";if(this.consumeOptional("=")){let i=ld(this.remaining);i&&(n=i,this.capture(n))}e[tc(r)]=tc(n)}parseQueryParam(e){let r=e0(this.remaining);if(!r)return;this.capture(r);let n="";if(this.consumeOptional("=")){let c=n0(this.remaining);c&&(n=c,this.capture(n))}let i=$m(r),o=$m(n);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(o)}else e[i]=o}parseParens(e){let r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=ld(this.remaining),i=this.remaining[n.length];if(i!=="/"&&i!==")"&&i!==";")throw new ye(4010,!1);let o;n.indexOf(":")>-1?(o=n.slice(0,n.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=dt);let c=this.parseChildren();r[o]=Object.keys(c).length===1?c[dt]:new Et([],c),this.consumeOptional("//")}return r}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ye(4011,!1)}};function Zm(t){return t.segments.length>0?new Et([],{[dt]:t}):t}function Jm(t){let e={};for(let[n,i]of Object.entries(t.children)){let o=Jm(i);if(n===dt&&o.segments.length===0&&o.hasChildren())for(let[c,l]of Object.entries(o.children))e[c]=l;else(o.segments.length>0||o.hasChildren())&&(e[n]=o)}let r=new Et(t.segments,e);return i0(r)}function i0(t){if(t.numberOfChildren===1&&t.children[dt]){let e=t.children[dt];return new Et(t.segments.concat(e.segments),e.children)}return t}function An(t){return t instanceof kr}function tg(t,e,r=null,n=null){let i=eg(t);return rg(i,e,r,n)}function eg(t){let e;function r(o){let c={};for(let f of o.children){let g=r(f);c[f.outlet]=g}let l=new Et(o.url,c);return o===t&&(e=l),l}let n=r(t.root),i=Zm(n);return e??i}function rg(t,e,r,n){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return ud(i,i,i,r,n);let o=o0(e);if(o.toRoot())return ud(i,i,new Et([],{}),r,n);let c=a0(o,i,t),l=c.processChildren?fa(c.segmentGroup,c.index,o.commands):ig(c.segmentGroup,c.index,o.commands);return ud(i,c.segmentGroup,l,r,n)}function ec(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function pa(t){return typeof t=="object"&&t!=null&&t.outlets}function ud(t,e,r,n,i){let o={};n&&Object.entries(n).forEach(([f,g])=>{o[f]=Array.isArray(g)?g.map(m=>`${m}`):`${g}`});let c;t===e?c=r:c=ng(t,e,r);let l=Zm(Jm(c));return new kr(l,o,i)}function ng(t,e,r){let n={};return Object.entries(t.children).forEach(([i,o])=>{o===e?n[i]=r:n[i]=ng(o,e,r)}),new Et(t.segments,n)}var rc=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,r,n){if(this.isAbsolute=e,this.numberOfDoubleDots=r,this.commands=n,e&&n.length>0&&ec(n[0]))throw new ye(4003,!1);let i=n.find(pa);if(i&&i!==Wm(n))throw new ye(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function o0(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new rc(!0,0,t);let e=0,r=!1,n=t.reduce((i,o,c)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let l={};return Object.entries(o.outlets).forEach(([f,g])=>{l[f]=typeof g=="string"?g.split("/"):g}),[...i,{outlets:l}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:c===0?(o.split("/").forEach((l,f)=>{f==0&&l==="."||(f==0&&l===""?r=!0:l===".."?e++:l!=""&&i.push(l))}),i):[...i,o]},[]);return new rc(r,e,n)}var to=class{segmentGroup;processChildren;index;constructor(e,r,n){this.segmentGroup=e,this.processChildren=r,this.index=n}};function a0(t,e,r){if(t.isAbsolute)return new to(e,!0,0);if(!r)return new to(e,!1,NaN);if(r.parent===null)return new to(r,!0,0);let n=ec(t.commands[0])?0:1,i=r.segments.length-1+n;return s0(r,i,t.numberOfDoubleDots)}function s0(t,e,r){let n=t,i=e,o=r;for(;o>i;){if(o-=i,n=n.parent,!n)throw new ye(4005,!1);i=n.segments.length}return new to(n,!1,i-o)}function c0(t){return pa(t[0])?t[0].outlets:{[dt]:t}}function ig(t,e,r){if(t??=new Et([],{}),t.segments.length===0&&t.hasChildren())return fa(t,e,r);let n=l0(t,e,r),i=r.slice(n.commandIndex);if(n.match&&n.pathIndex<t.segments.length){let o=new Et(t.segments.slice(0,n.pathIndex),{});return o.children[dt]=new Et(t.segments.slice(n.pathIndex),t.children),fa(o,0,i)}else return n.match&&i.length===0?new Et(t.segments,{}):n.match&&!t.hasChildren()?vd(t,e,r):n.match?fa(t,0,i):vd(t,e,r)}function fa(t,e,r){if(r.length===0)return new Et(t.segments,{});{let n=c0(r),i={};if(Object.keys(n).some(o=>o!==dt)&&t.children[dt]&&t.numberOfChildren===1&&t.children[dt].segments.length===0){let o=fa(t.children[dt],e,r);return new Et(t.segments,o.children)}return Object.entries(n).forEach(([o,c])=>{typeof c=="string"&&(c=[c]),c!==null&&(i[o]=ig(t.children[o],e,c))}),Object.entries(t.children).forEach(([o,c])=>{n[o]===void 0&&(i[o]=c)}),new Et(t.segments,i)}}function l0(t,e,r){let n=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(n>=r.length)return o;let c=t.segments[i],l=r[n];if(pa(l))break;let f=`${l}`,g=n<r.length-1?r[n+1]:null;if(i>0&&f===void 0)break;if(f&&g&&typeof g=="object"&&g.outlets===void 0){if(!Fm(f,g,c))return o;n+=2}else{if(!Fm(f,{},c))return o;n++}i++}return{match:!0,pathIndex:i,commandIndex:n}}function vd(t,e,r){let n=t.segments.slice(0,e),i=0;for(;i<r.length;){let o=r[i];if(pa(o)){let f=u0(o.outlets);return new Et(n,f)}if(i===0&&ec(r[0])){let f=t.segments[e];n.push(new On(f.path,Bm(r[0]))),i++;continue}let c=pa(o)?o.outlets[dt]:`${o}`,l=i<r.length-1?r[i+1]:null;c&&l&&ec(l)?(n.push(new On(c,Bm(l))),i+=2):(n.push(new On(c,{})),i++)}return new Et(n,{})}function u0(t){let e={};return Object.entries(t).forEach(([r,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(e[r]=vd(new Et([],{}),0,n))}),e}function Bm(t){let e={};return Object.entries(t).forEach(([r,n])=>e[r]=`${n}`),e}function Fm(t,e,r){return t==r.path&&Ar(e,r.parameters)}var eo="imperative",re=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(re||{}),$e=class{id;url;constructor(e,r){this.id=e,this.url=r}},Ir=class extends $e{type=re.NavigationStart;navigationTrigger;restoredState;constructor(e,r,n="imperative",i=null){super(e,r),this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Xe=class extends $e{urlAfterRedirects;type=re.NavigationEnd;constructor(e,r,n){super(e,r),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ce=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(Ce||{}),no=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(no||{}),Ye=class extends $e{reason;code;type=re.NavigationCancel;constructor(e,r,n,i){super(e,r),this.reason=n,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Tr=class extends $e{reason;code;type=re.NavigationSkipped;constructor(e,r,n,i){super(e,r),this.reason=n,this.code=i}},io=class extends $e{error;target;type=re.NavigationError;constructor(e,r,n,i){super(e,r),this.error=n,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ma=class extends $e{urlAfterRedirects;state;type=re.RoutesRecognized;constructor(e,r,n,i){super(e,r),this.urlAfterRedirects=n,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nc=class extends $e{urlAfterRedirects;state;type=re.GuardsCheckStart;constructor(e,r,n,i){super(e,r),this.urlAfterRedirects=n,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ic=class extends $e{urlAfterRedirects;state;shouldActivate;type=re.GuardsCheckEnd;constructor(e,r,n,i,o){super(e,r),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},oc=class extends $e{urlAfterRedirects;state;type=re.ResolveStart;constructor(e,r,n,i){super(e,r),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ac=class extends $e{urlAfterRedirects;state;type=re.ResolveEnd;constructor(e,r,n,i){super(e,r),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sc=class{route;type=re.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},cc=class{route;type=re.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},lc=class{snapshot;type=re.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uc=class{snapshot;type=re.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dc=class{snapshot;type=re.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fc=class{snapshot;type=re.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},oo=class{routerEvent;position;anchor;type=re.Scroll;constructor(e,r,n){this.routerEvent=e,this.position=r,this.anchor=n}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ga=class{},ao=class{url;navigationBehaviorOptions;constructor(e,r){this.url=e,this.navigationBehaviorOptions=r}};function d0(t){return!(t instanceof ga)&&!(t instanceof ao)}function f0(t,e){return t.providers&&!t._injector&&(t._injector=Us(t.providers,e,`Route: ${t.path}`)),t._injector??e}function dr(t){return t.outlet||dt}function h0(t,e){let r=t.filter(n=>dr(n)===e);return r.push(...t.filter(n=>dr(n)!==e)),r}function Ca(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let r=e.routeConfig;if(r?._loadedInjector)return r._loadedInjector;if(r?._injector)return r._injector}return null}var hc=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ca(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new vi(this.rootInjector)}},vi=(()=>{class t{rootInjector;contexts=new Map;constructor(r){this.rootInjector=r}onChildOutletCreated(r,n){let i=this.getOrCreateContext(r);i.outlet=n,this.contexts.set(r,i)}onChildOutletDestroyed(r){let n=this.getContext(r);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let n=this.getContext(r);return n||(n=new hc(this.rootInjector),this.contexts.set(r,n)),n}getContext(r){return this.contexts.get(r)||null}static \u0275fac=function(n){return new(n||t)(jt(ar))};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),pc=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let r=this.pathFromRoot(e);return r.length>1?r[r.length-2]:null}children(e){let r=yd(e,this._root);return r?r.children.map(n=>n.value):[]}firstChild(e){let r=yd(e,this._root);return r&&r.children.length>0?r.children[0].value:null}siblings(e){let r=bd(e,this._root);return r.length<2?[]:r[r.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return bd(e,this._root).map(r=>r.value)}};function yd(t,e){if(t===e.value)return e;for(let r of e.children){let n=yd(t,r);if(n)return n}return null}function bd(t,e){if(t===e.value)return[e];for(let r of e.children){let n=bd(t,r);if(n.length)return n.unshift(e),n}return[]}var Le=class{value;children;constructor(e,r){this.value=e,this.children=r}toString(){return`TreeNode(${this.value})`}};function Ji(t){let e={};return t&&t.children.forEach(r=>e[r.value.outlet]=r),e}var va=class extends pc{snapshot;constructor(e,r){super(e),this.snapshot=r,Od(this,e)}toString(){return this.snapshot.toString()}};function og(t){let e=p0(t),r=new ve([new On("",{})]),n=new ve({}),i=new ve({}),o=new ve({}),c=new ve(""),l=new Ze(r,n,o,c,i,dt,t,e.root);return l.snapshot=e.root,new va(new Le(l,[]),e)}function p0(t){let e={},r={},n={},i="",o=new pi([],e,n,i,r,dt,t,null,{});return new ya("",new Le(o,[]))}var Ze=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,r,n,i,o,c,l,f){this.urlSubject=e,this.paramsSubject=r,this.queryParamsSubject=n,this.fragmentSubject=i,this.dataSubject=o,this.outlet=c,this.component=l,this._futureSnapshot=f,this.title=this.dataSubject?.pipe(ut(g=>g[wa]))??et(void 0),this.url=e,this.params=r,this.queryParams=n,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ut(e=>mi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ut(e=>mi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function mc(t,e,r="emptyOnly"){let n,{routeConfig:i}=t;return e!==null&&(r==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?n={params:$($({},e.params),t.params),data:$($({},e.data),t.data),resolve:$($($($({},t.data),e.data),i?.data),t._resolvedData)}:n={params:$({},t.params),data:$({},t.data),resolve:$($({},t.data),t._resolvedData??{})},i&&sg(i)&&(n.resolve[wa]=i.title),n}var pi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[wa]}constructor(e,r,n,i,o,c,l,f,g){this.url=e,this.params=r,this.queryParams=n,this.fragment=i,this.data=o,this.outlet=c,this.component=l,this.routeConfig=f,this._resolve=g}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=mi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=mi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(n=>n.toString()).join("/"),r=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${r}')`}},ya=class extends pc{url;constructor(e,r){super(r),this.url=e,Od(this,r)}toString(){return ag(this._root)}};function Od(t,e){e.value._routerState=t,e.children.forEach(r=>Od(t,r))}function ag(t){let e=t.children.length>0?` { ${t.children.map(ag).join(", ")} } `:"";return`${t.value}${e}`}function dd(t){if(t.snapshot){let e=t.snapshot,r=t._futureSnapshot;t.snapshot=r,Ar(e.queryParams,r.queryParams)||t.queryParamsSubject.next(r.queryParams),e.fragment!==r.fragment&&t.fragmentSubject.next(r.fragment),Ar(e.params,r.params)||t.paramsSubject.next(r.params),Uw(e.url,r.url)||t.urlSubject.next(r.url),Ar(e.data,r.data)||t.dataSubject.next(r.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function _d(t,e){let r=Ar(t.params,e.params)&&Ww(t.url,e.url),n=!t.parent!=!e.parent;return r&&!n&&(!t.parent||_d(t.parent,e.parent))}function sg(t){return typeof t.title=="string"||t.title===null}var cg=new lt(""),Dd=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=dt;activateEvents=new ee;deactivateEvents=new ee;attachEvents=new ee;detachEvents=new ee;routerOutletData=em(void 0);parentContexts=E(vi);location=E(Cn);changeDetector=E(Er);inputBinder=E(Sa,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(r){if(r.name){let{firstChange:n,previousValue:i}=r.name;if(n)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ye(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ye(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ye(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,n){this.activated=r,this._activatedRoute=n,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,n){if(this.isActivated)throw new ye(4013,!1);this._activatedRoute=r;let i=this.location,c=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,f=new xd(r,l,i.injector,this.routerOutletData);this.activated=i.createComponent(c,{index:i.length,injector:f,environmentInjector:n}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Pt({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Wr]})}return t})(),xd=class{route;childContexts;parent;outletData;constructor(e,r,n,i){this.route=e,this.childContexts=r,this.parent=n,this.outletData=i}get(e,r){return e===Ze?this.route:e===vi?this.childContexts:e===cg?this.outletData:this.parent.get(e,r)}},Sa=new lt(""),Ad=(()=>{class t{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:n}=r,i=Ns([n.queryParams,n.params,n.data]).pipe(Pe(([o,c,l],f)=>(l=$($($({},o),c),l),f===0?et(l):Promise.resolve(l)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==n||n.component===null){this.unsubscribeFromRouteData(r);return}let c=om(n.component);if(!c){this.unsubscribeFromRouteData(r);return}for(let{templateName:l}of c.inputs)r.activatedComponentRef.setInput(l,o[l])});this.outletDataSubscriptions.set(r,i)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac})}return t})(),Ra=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Xt({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(n,i){n&1&&lr(0,"router-outlet")},dependencies:[Dd],encapsulation:2})}return t})();function kd(t){let e=t.children&&t.children.map(kd),r=e?gt($({},t),{children:e}):$({},t);return!r.component&&!r.loadComponent&&(e||r.loadChildren)&&r.outlet&&r.outlet!==dt&&(r.component=Ra),r}function m0(t,e,r){let n=ba(t,e._root,r?r._root:void 0);return new va(n,e)}function ba(t,e,r){if(r&&t.shouldReuseRoute(e.value,r.value.snapshot)){let n=r.value;n._futureSnapshot=e.value;let i=g0(t,e,r);return new Le(n,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let c=o.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(l=>ba(t,l)),c}}let n=v0(e.value),i=e.children.map(o=>ba(t,o));return new Le(n,i)}}function g0(t,e,r){return e.children.map(n=>{for(let i of r.children)if(t.shouldReuseRoute(n.value,i.value.snapshot))return ba(t,n,i);return ba(t,n)})}function v0(t){return new Ze(new ve(t.url),new ve(t.params),new ve(t.queryParams),new ve(t.fragment),new ve(t.data),t.outlet,t.component,t)}var so=class{redirectTo;navigationBehaviorOptions;constructor(e,r){this.redirectTo=e,this.navigationBehaviorOptions=r}},lg="ngNavigationCancelingError";function gc(t,e){let{redirectTo:r,navigationBehaviorOptions:n}=An(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=ug(!1,Ce.Redirect);return i.url=r,i.navigationBehaviorOptions=n,i}function ug(t,e){let r=new Error(`NavigationCancelingError: ${t||""}`);return r[lg]=!0,r.cancellationCode=e,r}function y0(t){return dg(t)&&An(t.url)}function dg(t){return!!t&&t[lg]}var b0=(t,e,r,n)=>ut(i=>(new wd(e,i.targetRouterState,i.currentRouterState,r,n).activate(t),i)),wd=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,r,n,i,o){this.routeReuseStrategy=e,this.futureState=r,this.currState=n,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let r=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,n,e),dd(this.futureState.root),this.activateChildRoutes(r,n,e)}deactivateChildRoutes(e,r,n){let i=Ji(r);e.children.forEach(o=>{let c=o.value.outlet;this.deactivateRoutes(o,i[c],n),delete i[c]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,n)})}deactivateRoutes(e,r,n){let i=e.value,o=r?r.value:null;if(i===o)if(i.component){let c=n.getContext(i.outlet);c&&this.deactivateChildRoutes(e,r,c.children)}else this.deactivateChildRoutes(e,r,n);else o&&this.deactivateRouteAndItsChildren(r,n)}deactivateRouteAndItsChildren(e,r){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,r):this.deactivateRouteAndOutlet(e,r)}detachAndStoreRouteSubtree(e,r){let n=r.getContext(e.value.outlet),i=n&&e.value.component?n.children:r,o=Ji(e);for(let c of Object.values(o))this.deactivateRouteAndItsChildren(c,i);if(n&&n.outlet){let c=n.outlet.detach(),l=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:l})}}deactivateRouteAndOutlet(e,r){let n=r.getContext(e.value.outlet),i=n&&e.value.component?n.children:r,o=Ji(e);for(let c of Object.values(o))this.deactivateRouteAndItsChildren(c,i);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(e,r,n){let i=Ji(r);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],n),this.forwardEvent(new fc(o.value.snapshot))}),e.children.length&&this.forwardEvent(new uc(e.value.snapshot))}activateRoutes(e,r,n){let i=e.value,o=r?r.value:null;if(dd(i),i===o)if(i.component){let c=n.getOrCreateContext(i.outlet);this.activateChildRoutes(e,r,c.children)}else this.activateChildRoutes(e,r,n);else if(i.component){let c=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let l=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(l.contexts),c.attachRef=l.componentRef,c.route=l.route.value,c.outlet&&c.outlet.attach(l.componentRef,l.route.value),dd(l.route.value),this.activateChildRoutes(e,null,c.children)}else c.attachRef=null,c.route=i,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}else this.activateChildRoutes(e,null,n)}},vc=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ro=class{component;route;constructor(e,r){this.component=e,this.route=r}};function _0(t,e,r){let n=t._root,i=e?e._root:null;return da(n,i,r,[n.value])}function x0(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function lo(t,e){let r=Symbol(),n=e.get(t,r);return n===r?typeof t=="function"&&!Tp(t)?t:e.get(t):n}function da(t,e,r,n,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ji(e);return t.children.forEach(c=>{w0(c,o[c.value.outlet],r,n.concat([c.value]),i),delete o[c.value.outlet]}),Object.entries(o).forEach(([c,l])=>ha(l,r.getContext(c),i)),i}function w0(t,e,r,n,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,c=e?e.value:null,l=r?r.getContext(t.value.outlet):null;if(c&&o.routeConfig===c.routeConfig){let f=C0(c,o,o.routeConfig.runGuardsAndResolvers);f?i.canActivateChecks.push(new vc(n)):(o.data=c.data,o._resolvedData=c._resolvedData),o.component?da(t,e,l?l.children:null,n,i):da(t,e,r,n,i),f&&l&&l.outlet&&l.outlet.isActivated&&i.canDeactivateChecks.push(new ro(l.outlet.component,c))}else c&&ha(e,l,i),i.canActivateChecks.push(new vc(n)),o.component?da(t,null,l?l.children:null,n,i):da(t,null,r,n,i);return i}function C0(t,e,r){if(typeof r=="function")return r(t,e);switch(r){case"pathParamsChange":return!hi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!hi(t.url,e.url)||!Ar(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_d(t,e)||!Ar(t.queryParams,e.queryParams);case"paramsChange":default:return!_d(t,e)}}function ha(t,e,r){let n=Ji(t),i=t.value;Object.entries(n).forEach(([o,c])=>{i.component?e?ha(c,e.children.getContext(o),r):ha(c,null,r):ha(c,e,r)}),i.component?e&&e.outlet&&e.outlet.isActivated?r.canDeactivateChecks.push(new ro(e.outlet.component,i)):r.canDeactivateChecks.push(new ro(null,i)):r.canDeactivateChecks.push(new ro(null,i))}function Ea(t){return typeof t=="function"}function S0(t){return typeof t=="boolean"}function R0(t){return t&&Ea(t.canLoad)}function E0(t){return t&&Ea(t.canActivate)}function O0(t){return t&&Ea(t.canActivateChild)}function D0(t){return t&&Ea(t.canDeactivate)}function A0(t){return t&&Ea(t.canMatch)}function fg(t){return t instanceof Rp||t?.name==="EmptyError"}var Xs=Symbol("INITIAL_VALUE");function co(){return Pe(t=>Ns(t.map(e=>e.pipe(wr(1),or(Xs)))).pipe(ut(e=>{for(let r of e)if(r!==!0){if(r===Xs)return Xs;if(r===!1||k0(r))return r}return!0}),bt(e=>e!==Xs),wr(1)))}function k0(t){return An(t)||t instanceof so}function I0(t,e){return Wt(r=>{let{targetSnapshot:n,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:c}}=r;return c.length===0&&o.length===0?et(gt($({},r),{guardsResult:!0})):T0(c,n,i,t).pipe(Wt(l=>l&&S0(l)?M0(n,o,t,e):et(l)),ut(l=>gt($({},r),{guardsResult:l})))})}function T0(t,e,r,n){return le(t).pipe(Wt(i=>B0(i.component,i.route,r,e,n)),wn(i=>i!==!0,!0))}function M0(t,e,r,n){return le(e).pipe(ai(i=>Op(N0(i.route.parent,n),P0(i.route,n),$0(t,i.path,r),L0(t,i.route,r))),wn(i=>i!==!0,!0))}function P0(t,e){return t!==null&&e&&e(new dc(t)),et(!0)}function N0(t,e){return t!==null&&e&&e(new lc(t)),et(!0)}function L0(t,e,r){let n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||n.length===0)return et(!0);let i=n.map(o=>xn(()=>{let c=Ca(e)??r,l=lo(o,c),f=E0(l)?l.canActivate(e,t):Cr(c,()=>l(e,t));return tn(f).pipe(wn())}));return et(i).pipe(co())}function $0(t,e,r){let n=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(c=>x0(c)).filter(c=>c!==null).map(c=>xn(()=>{let l=c.guards.map(f=>{let g=Ca(c.node)??r,m=lo(f,g),_=O0(m)?m.canActivateChild(n,t):Cr(g,()=>m(n,t));return tn(_).pipe(wn())});return et(l).pipe(co())}));return et(o).pipe(co())}function B0(t,e,r,n,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return et(!0);let c=o.map(l=>{let f=Ca(e)??i,g=lo(l,f),m=D0(g)?g.canDeactivate(t,e,r,n):Cr(f,()=>g(t,e,r,n));return tn(m).pipe(wn())});return et(c).pipe(co())}function F0(t,e,r,n){let i=e.canLoad;if(i===void 0||i.length===0)return et(!0);let o=i.map(c=>{let l=lo(c,t),f=R0(l)?l.canLoad(e,r):Cr(t,()=>l(e,r));return tn(f)});return et(o).pipe(co(),hg(n))}function hg(t){return Cp(ue(e=>{if(typeof e!="boolean")throw gc(t,e)}),ut(e=>e===!0))}function j0(t,e,r,n){let i=e.canMatch;if(!i||i.length===0)return et(!0);let o=i.map(c=>{let l=lo(c,t),f=A0(l)?l.canMatch(e,r):Cr(t,()=>l(e,r));return tn(f)});return et(o).pipe(co(),hg(n))}var _a=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},xa=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Zi(t){return Jo(new _a(t))}function U0(t){return Jo(new ye(4e3,!1))}function z0(t){return Jo(ug(!1,Ce.GuardRejected))}var Cd=class{urlSerializer;urlTree;constructor(e,r){this.urlSerializer=e,this.urlTree=r}lineralizeSegments(e,r){let n=[],i=r.root;for(;;){if(n=n.concat(i.segments),i.numberOfChildren===0)return et(n);if(i.numberOfChildren>1||!i.children[dt])return U0(`${e.redirectTo}`);i=i.children[dt]}}applyRedirectCommands(e,r,n,i,o){return V0(r,i,o).pipe(ut(c=>{if(c instanceof kr)throw new xa(c);let l=this.applyRedirectCreateUrlTree(c,this.urlSerializer.parse(c),e,n);if(c[0]==="/")throw new xa(l);return l}))}applyRedirectCreateUrlTree(e,r,n,i){let o=this.createSegmentGroup(e,r.root,n,i);return new kr(o,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}createQueryParams(e,r){let n={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let l=o.substring(1);n[i]=r[l]}else n[i]=o}),n}createSegmentGroup(e,r,n,i){let o=this.createSegments(e,r.segments,n,i),c={};return Object.entries(r.children).forEach(([l,f])=>{c[l]=this.createSegmentGroup(e,f,n,i)}),new Et(o,c)}createSegments(e,r,n,i){return r.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,n))}findPosParam(e,r,n){let i=n[r.path.substring(1)];if(!i)throw new ye(4001,!1);return i}findOrReturn(e,r){let n=0;for(let i of r){if(i.path===e.path)return r.splice(n),i;n++}return e}};function V0(t,e,r){if(typeof t=="string")return et(t);let n=t,{queryParams:i,fragment:o,routeConfig:c,url:l,outlet:f,params:g,data:m,title:_}=e;return tn(Cr(r,()=>n({params:g,data:m,queryParams:i,fragment:o,routeConfig:c,url:l,outlet:f,title:_})))}var Sd={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function H0(t,e,r,n,i){let o=pg(t,e,r);return o.matched?(n=f0(e,n),j0(n,e,r,i).pipe(ut(c=>c===!0?o:$({},Sd)))):et(o)}function pg(t,e,r){if(e.path==="**")return W0(r);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||r.length>0)?$({},Sd):{matched:!0,consumedSegments:[],remainingSegments:r,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Vm)(r,t,e);if(!i)return $({},Sd);let o={};Object.entries(i.posParams??{}).forEach(([l,f])=>{o[l]=f.path});let c=i.consumed.length>0?$($({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:r.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function W0(t){return{matched:!0,parameters:t.length>0?Wm(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function jm(t,e,r,n){return r.length>0&&G0(t,r,n)?{segmentGroup:new Et(e,q0(n,new Et(r,t.children))),slicedSegments:[]}:r.length===0&&Q0(t,r,n)?{segmentGroup:new Et(t.segments,K0(t,r,n,t.children)),slicedSegments:r}:{segmentGroup:new Et(t.segments,t.children),slicedSegments:r}}function K0(t,e,r,n){let i={};for(let o of r)if(bc(t,e,o)&&!n[dr(o)]){let c=new Et([],{});i[dr(o)]=c}return $($({},n),i)}function q0(t,e){let r={};r[dt]=e;for(let n of t)if(n.path===""&&dr(n)!==dt){let i=new Et([],{});r[dr(n)]=i}return r}function G0(t,e,r){return r.some(n=>bc(t,e,n)&&dr(n)!==dt)}function Q0(t,e,r){return r.some(n=>bc(t,e,n))}function bc(t,e,r){return(t.hasChildren()||e.length>0)&&r.pathMatch==="full"?!1:r.path===""}function Y0(t,e,r){return e.length===0&&!t.children[r]}var Rd=class{};function X0(t,e,r,n,i,o,c="emptyOnly"){return new Ed(t,e,r,n,i,c,o).recognize()}var Z0=31,Ed=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,r,n,i,o,c,l){this.injector=e,this.configLoader=r,this.rootComponentType=n,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=c,this.urlSerializer=l,this.applyRedirects=new Cd(this.urlSerializer,this.urlTree)}noMatchError(e){return new ye(4002,`'${e.segmentGroup}'`)}recognize(){let e=jm(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ut(({children:r,rootSnapshot:n})=>{let i=new Le(n,r),o=new ya("",i),c=tg(n,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(c),{state:o,tree:c}}))}match(e){let r=new pi([],Object.freeze({}),Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),dt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,dt,r).pipe(ut(n=>({children:n,rootSnapshot:r})),oi(n=>{if(n instanceof xa)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof _a?this.noMatchError(n):n}))}processSegmentGroup(e,r,n,i,o){return n.segments.length===0&&n.hasChildren()?this.processChildren(e,r,n,o):this.processSegment(e,r,n,n.segments,i,!0,o).pipe(ut(c=>c instanceof Le?[c]:[]))}processChildren(e,r,n,i){let o=[];for(let c of Object.keys(n.children))c==="primary"?o.unshift(c):o.push(c);return le(o).pipe(ai(c=>{let l=n.children[c],f=h0(r,c);return this.processSegmentGroup(e,f,l,c,i)}),kp((c,l)=>(c.push(...l),c)),Uu(null),Dp(),Wt(c=>{if(c===null)return Zi(n);let l=mg(c);return J0(l),et(l)}))}processSegment(e,r,n,i,o,c,l){return le(r).pipe(ai(f=>this.processSegmentAgainstRoute(f._injector??e,r,f,n,i,o,c,l).pipe(oi(g=>{if(g instanceof _a)return et(null);throw g}))),wn(f=>!!f),oi(f=>{if(fg(f))return Y0(n,i,o)?et(new Rd):Zi(n);throw f}))}processSegmentAgainstRoute(e,r,n,i,o,c,l,f){return dr(n)!==c&&(c===dt||!bc(i,o,n))?Zi(i):n.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,n,o,c,f):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(e,i,r,n,o,c,f):Zi(i)}expandSegmentAgainstRouteUsingRedirect(e,r,n,i,o,c,l){let{matched:f,parameters:g,consumedSegments:m,positionalParamSegments:_,remainingSegments:C}=pg(r,i,o);if(!f)return Zi(r);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Z0&&(this.allowRedirects=!1));let R=new pi(o,g,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,Um(i),dr(i),i.component??i._loadedComponent??null,i,zm(i)),A=mc(R,l,this.paramsInheritanceStrategy);return R.params=Object.freeze(A.params),R.data=Object.freeze(A.data),this.applyRedirects.applyRedirectCommands(m,i.redirectTo,_,R,e).pipe(Pe(W=>this.applyRedirects.lineralizeSegments(i,W)),Wt(W=>this.processSegment(e,n,r,W.concat(C),c,!1,l)))}matchSegmentAgainstRoute(e,r,n,i,o,c){let l=H0(r,n,i,e,this.urlSerializer);return n.path==="**"&&(r.children={}),l.pipe(Pe(f=>f.matched?(e=n._injector??e,this.getChildConfig(e,n,i).pipe(Pe(({routes:g})=>{let m=n._loadedInjector??e,{parameters:_,consumedSegments:C,remainingSegments:R}=f,A=new pi(C,_,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,Um(n),dr(n),n.component??n._loadedComponent??null,n,zm(n)),B=mc(A,c,this.paramsInheritanceStrategy);A.params=Object.freeze(B.params),A.data=Object.freeze(B.data);let{segmentGroup:W,slicedSegments:Z}=jm(r,C,R,g);if(Z.length===0&&W.hasChildren())return this.processChildren(m,g,W,A).pipe(ut(X=>new Le(A,X)));if(g.length===0&&Z.length===0)return et(new Le(A,[]));let tt=dr(n)===o;return this.processSegment(m,g,W,Z,tt?dt:o,!0,A).pipe(ut(X=>new Le(A,X instanceof Le?[X]:[])))}))):Zi(r)))}getChildConfig(e,r,n){return r.children?et({routes:r.children,injector:e}):r.loadChildren?r._loadedRoutes!==void 0?et({routes:r._loadedRoutes,injector:r._loadedInjector}):F0(e,r,n,this.urlSerializer).pipe(Wt(i=>i?this.configLoader.loadChildren(e,r).pipe(ue(o=>{r._loadedRoutes=o.routes,r._loadedInjector=o.injector})):z0(r))):et({routes:[],injector:e})}};function J0(t){t.sort((e,r)=>e.value.outlet===dt?-1:r.value.outlet===dt?1:e.value.outlet.localeCompare(r.value.outlet))}function tC(t){let e=t.value.routeConfig;return e&&e.path===""}function mg(t){let e=[],r=new Set;for(let n of t){if(!tC(n)){e.push(n);continue}let i=e.find(o=>n.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...n.children),r.add(i)):e.push(n)}for(let n of r){let i=mg(n.children);e.push(new Le(n.value,i))}return e.filter(n=>!r.has(n))}function Um(t){return t.data||{}}function zm(t){return t.resolve||{}}function eC(t,e,r,n,i,o){return Wt(c=>X0(t,e,r,n,c.extractedUrl,i,o).pipe(ut(({state:l,tree:f})=>gt($({},c),{targetSnapshot:l,urlAfterRedirects:f}))))}function rC(t,e){return Wt(r=>{let{targetSnapshot:n,guards:{canActivateChecks:i}}=r;if(!i.length)return et(r);let o=new Set(i.map(f=>f.route)),c=new Set;for(let f of o)if(!c.has(f))for(let g of gg(f))c.add(g);let l=0;return le(c).pipe(ai(f=>o.has(f)?nC(f,n,t,e):(f.data=mc(f,f.parent,t).resolve,et(void 0))),ue(()=>l++),zu(1),Wt(f=>l===c.size?et(r):Hr))})}function gg(t){let e=t.children.map(r=>gg(r)).flat();return[t,...e]}function nC(t,e,r,n){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!sg(i)&&(o[wa]=i.title),xn(()=>(t.data=mc(t,t.parent,r).resolve,iC(o,t,e,n).pipe(ut(c=>(t._resolvedData=c,t.data=$($({},t.data),c),null)))))}function iC(t,e,r,n){let i=pd(t);if(i.length===0)return et({});let o={};return le(i).pipe(Wt(c=>oC(t[c],e,r,n).pipe(wn(),ue(l=>{if(l instanceof so)throw gc(new Dn,l);o[c]=l}))),zu(1),ut(()=>o),oi(c=>fg(c)?Hr:Jo(c)))}function oC(t,e,r,n){let i=Ca(e)??n,o=lo(t,i),c=o.resolve?o.resolve(e,r):Cr(i,()=>o(e,r));return tn(c)}function fd(t){return Pe(e=>{let r=t(e);return r?le(r).pipe(ut(()=>e)):et(e)})}var Id=(()=>{class t{buildTitle(r){let n,i=r.root;for(;i!==void 0;)n=this.getResolvedTitleForRoute(i)??n,i=i.children.find(o=>o.outlet===dt);return n}getResolvedTitleForRoute(r){return r.data[wa]}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:()=>E(vg),providedIn:"root"})}return t})(),vg=(()=>{class t extends Id{title;constructor(r){super(),this.title=r}updateTitle(r){let n=this.buildTitle(r);n!==void 0&&this.title.setTitle(n)}static \u0275fac=function(n){return new(n||t)(jt(hm))};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),kn=new lt("",{providedIn:"root",factory:()=>({})}),Mr=new lt(""),_c=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=E(Vs);loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return et(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let n=tn(r.loadComponent()).pipe(ut(bg),ue(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Vi(()=>{this.componentLoaders.delete(r)})),i=new ii(n,()=>new st).pipe(Zo());return this.componentLoaders.set(r,i),i}loadChildren(r,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return et({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let o=yg(n,this.compiler,r,this.onLoadEndListener).pipe(Vi(()=>{this.childrenLoaders.delete(n)})),c=new ii(o,()=>new st).pipe(Zo());return this.childrenLoaders.set(n,c),c}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function yg(t,e,r,n){return tn(t.loadChildren()).pipe(ut(bg),Wt(i=>i instanceof js||Array.isArray(i)?et(i):le(e.compileModuleAsync(i))),ut(i=>{n&&n(t);let o,c,l=!1;return Array.isArray(i)?(c=i,l=!0):(o=i.create(r).injector,c=o.get(Mr,[],{optional:!0,self:!0}).flat()),{routes:c.map(kd),injector:o}}))}function aC(t){return t&&typeof t=="object"&&"default"in t}function bg(t){return aC(t)?t.default:t}var xc=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:()=>E(sC),providedIn:"root"})}return t})(),sC=(()=>{class t{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,n){return r}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Td=new lt(""),Md=new lt("");function _g(t,e,r){let n=t.get(Md),i=t.get(oe);if(!i.startViewTransition||n.skipNextTransition)return n.skipNextTransition=!1,new Promise(g=>setTimeout(g));let o,c=new Promise(g=>{o=g}),l=i.startViewTransition(()=>(o(),cC(t))),{onViewTransitionCreated:f}=n;return f&&Cr(t,()=>f({transition:l,from:e,to:r})),c}function cC(t){return new Promise(e=>{sr({read:()=>setTimeout(e)},{injector:t})})}var Pd=new lt(""),wc=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new st;transitionAbortWithErrorSubject=new st;configLoader=E(_c);environmentInjector=E(ar);destroyRef=E(Lp);urlSerializer=E(gi);rootContexts=E(vi);location=E(Or);inputBindingEnabled=E(Sa,{optional:!0})!==null;titleStrategy=E(Id);options=E(kn,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=E(xc);createViewTransition=E(Td,{optional:!0});navigationErrorHandler=E(Pd,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>et(void 0);rootComponentType=null;destroyed=!1;constructor(){let r=i=>this.events.next(new sc(i)),n=i=>this.events.next(new cc(i));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=r,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(r){let n=++this.navigationId;this.transitions?.next(gt($({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:n}))}setupNavigations(r){return this.transitions=new ve(null),this.transitions.pipe(bt(n=>n!==null),Pe(n=>{let i=!1;return et(n).pipe(Pe(o=>{if(this.navigationId>n.id)return this.cancelNavigationTransition(n,"",Ce.SupersededByNewNavigation),Hr;this.currentTransition=n,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?gt($({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let c=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=o.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!c&&l!=="reload"){let f="";return this.events.next(new Tr(o.id,this.urlSerializer.serialize(o.rawUrl),f,no.IgnoredSameUrlNavigation)),o.resolve(!1),Hr}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return et(o).pipe(Pe(f=>(this.events.next(new Ir(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),f.id!==this.navigationId?Hr:Promise.resolve(f))),eC(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ue(f=>{n.targetSnapshot=f.targetSnapshot,n.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=gt($({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new ma(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:f,extractedUrl:g,source:m,restoredState:_,extras:C}=o,R=new Ir(f,this.urlSerializer.serialize(g),m,_);this.events.next(R);let A=og(this.rootComponentType).snapshot;return this.currentTransition=n=gt($({},o),{targetSnapshot:A,urlAfterRedirects:g,extras:gt($({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,et(n)}else{let f="";return this.events.next(new Tr(o.id,this.urlSerializer.serialize(o.extractedUrl),f,no.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Hr}}),ue(o=>{let c=new nc(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(c)}),ut(o=>(this.currentTransition=n=gt($({},o),{guards:_0(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),n)),I0(this.environmentInjector,o=>this.events.next(o)),ue(o=>{if(n.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw gc(this.urlSerializer,o.guardsResult);let c=new ic(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(c)}),bt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Ce.GuardRejected),!1)),fd(o=>{if(o.guards.canActivateChecks.length!==0)return et(o).pipe(ue(c=>{let l=new oc(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Pe(c=>{let l=!1;return et(c).pipe(rC(this.paramsInheritanceStrategy,this.environmentInjector),ue({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(c,"",Ce.NoDataFromResolver)}}))}),ue(c=>{let l=new ac(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}))}),fd(o=>{let c=l=>{let f=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(l.routeConfig).pipe(ue(g=>{l.component=g}),ut(()=>{})));for(let g of l.children)f.push(...c(g));return f};return Ns(c(o.targetSnapshot.root)).pipe(Uu(null),wr(1))}),fd(()=>this.afterPreactivation()),Pe(()=>{let{currentSnapshot:o,targetSnapshot:c}=n,l=this.createViewTransition?.(this.environmentInjector,o.root,c.root);return l?le(l).pipe(ut(()=>n)):et(n)}),ut(o=>{let c=m0(r.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=n=gt($({},o),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,n}),ue(()=>{this.events.next(new ga)}),b0(this.rootContexts,r.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),wr(1),Hi(new Ui(o=>{let c=n.abortController.signal,l=()=>o.next();return c.addEventListener("abort",l),()=>c.removeEventListener("abort",l)}).pipe(bt(()=>!i&&!n.targetRouterState),ue(()=>{this.cancelNavigationTransition(n,n.abortController.signal.reason+"",Ce.Aborted)}))),ue({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Xe(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Hi(this.transitionAbortWithErrorSubject.pipe(ue(o=>{throw o}))),Vi(()=>{i||this.cancelNavigationTransition(n,"",Ce.SupersededByNewNavigation),this.currentTransition?.id===n.id&&(this.currentNavigation=null,this.currentTransition=null)}),oi(o=>{if(this.destroyed)return n.resolve(!1),Hr;if(i=!0,dg(o))this.events.next(new Ye(n.id,this.urlSerializer.serialize(n.extractedUrl),o.message,o.cancellationCode)),y0(o)?this.events.next(new ao(o.url,o.navigationBehaviorOptions)):n.resolve(!1);else{let c=new io(n.id,this.urlSerializer.serialize(n.extractedUrl),o,n.targetSnapshot??void 0);try{let l=Cr(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(l instanceof so){let{message:f,cancellationCode:g}=gc(this.urlSerializer,l);this.events.next(new Ye(n.id,this.urlSerializer.serialize(n.extractedUrl),f,g)),this.events.next(new ao(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(c),o}catch(l){this.options.resolveNavigationPromiseOnError?n.resolve(!1):n.reject(l)}}return Hr}))}))}cancelNavigationTransition(r,n,i){let o=new Ye(r.id,this.urlSerializer.serialize(r.extractedUrl),n,i);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),n=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==n?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function lC(t){return t!==eo}var Cc=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:()=>E(uC),providedIn:"root"})}return t})(),yc=class{shouldDetach(e){return!1}store(e,r){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,r){return e.routeConfig===r.routeConfig}},uC=(()=>{class t extends yc{static \u0275fac=(()=>{let r;return function(i){return(r||(r=Ne(t)))(i||t)}})();static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),xg=(()=>{class t{urlSerializer=E(gi);options=E(kn,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=E(Or);urlHandlingStrategy=E(xc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new kr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:r,initialUrl:n,targetBrowserUrl:i}){let o=r!==void 0?this.urlHandlingStrategy.merge(r,n):n,c=i??o;return c instanceof kr?this.urlSerializer.serialize(c):c}commitTransition({targetRouterState:r,finalUrl:n,initialUrl:i}){n&&r?(this.currentUrlTree=n,this.rawUrlTree=this.urlHandlingStrategy.merge(n,i),this.routerState=r):this.rawUrlTree=i}routerState=og(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:r}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r??this.rawUrlTree)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:()=>E(dC),providedIn:"root"})}return t})(),dC=(()=>{class t extends xg{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(n=>{n.type==="popstate"&&setTimeout(()=>{r(n.url,n.state,"popstate")})})}handleRouterEvent(r,n){r instanceof Ir?this.updateStateMemento():r instanceof Tr?this.commitTransition(n):r instanceof ma?this.urlUpdateStrategy==="eager"&&(n.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(n),n)):r instanceof ga?(this.commitTransition(n),this.urlUpdateStrategy==="deferred"&&!n.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(n),n)):r instanceof Ye&&r.code!==Ce.SupersededByNewNavigation&&r.code!==Ce.Redirect?this.restoreHistory(n):r instanceof io?this.restoreHistory(n,!0):r instanceof Xe&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,{extras:n,id:i}){let{replaceUrl:o,state:c}=n;if(this.location.isCurrentPathEqualTo(r)||o){let l=this.browserPageId,f=$($({},c),this.generateNgRouterState(i,l));this.location.replaceState(r,"",f)}else{let l=$($({},c),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(r,"",l)}}restoreHistory(r,n=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===r.finalUrl&&o===0&&(this.resetInternalState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetInternalState(r),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,n){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:n}:{navigationId:r}}static \u0275fac=(()=>{let r;return function(i){return(r||(r=Ne(t)))(i||t)}})();static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Sc(t,e){t.events.pipe(bt(r=>r instanceof Xe||r instanceof Ye||r instanceof io||r instanceof Tr),ut(r=>r instanceof Xe||r instanceof Tr?0:(r instanceof Ye?r.code===Ce.Redirect||r.code===Ce.SupersededByNewNavigation:!1)?2:1),bt(r=>r!==2),wr(1)).subscribe(()=>{e()})}var fC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Se=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=E(Kp);stateManager=E(xg);options=E(kn,{optional:!0})||{};pendingTasks=E($p);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=E(wc);urlSerializer=E(gi);location=E(Or);urlHandlingStrategy=E(xc);injector=E(ar);_events=new st;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=E(Cc);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=E(Mr,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!E(Sa,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}eventsSubscription=new xr;subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(n=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(n,o),n instanceof Ye&&n.code!==Ce.Redirect&&n.code!==Ce.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof Xe)this.navigated=!0;else if(n instanceof ao){let c=n.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(n.url,i.currentRawUrl),f=$({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||lC(i.source)},c);this.scheduleNavigation(l,eo,null,f,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}d0(n)&&this._events.next(n)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),eo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,n,i)=>{this.navigateToSyncWithBrowser(r,i,n)})}navigateToSyncWithBrowser(r,n,i){let o={replaceUrl:!0},c=i?.navigationId?i:null;if(i){let f=$({},i);delete f.navigationId,delete f.\u0275routerPageId,Object.keys(f).length!==0&&(o.state=f)}let l=this.parseUrl(r);this.scheduleNavigation(l,n,c,o).catch(f=>{this.injector.get($s)(f)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(kd),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,n={}){let{relativeTo:i,queryParams:o,fragment:c,queryParamsHandling:l,preserveFragment:f}=n,g=f?this.currentUrlTree.fragment:c,m=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":m=$($({},this.currentUrlTree.queryParams),o);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=o||null}m!==null&&(m=this.removeEmptyProps(m));let _;try{let C=i?i.snapshot:this.routerState.snapshot.root;_=eg(C)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),_=this.currentUrlTree.root}return rg(_,r,m,g??null)}navigateByUrl(r,n={skipLocationChange:!1}){let i=An(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,eo,null,n)}navigate(r,n={skipLocationChange:!1}){return pC(r),this.navigateByUrl(this.createUrlTree(r,n),n)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,n){let i;if(n===!0?i=$({},fC):n===!1?i=$({},hC):i=n,An(r))return Lm(this.currentUrlTree,r,i);let o=this.parseUrl(r);return Lm(this.currentUrlTree,o,i)}removeEmptyProps(r){return Object.entries(r).reduce((n,[i,o])=>(o!=null&&(n[i]=o),n),{})}scheduleNavigation(r,n,i,o,c){if(this.disposed)return Promise.resolve(!1);let l,f,g;c?(l=c.resolve,f=c.reject,g=c.promise):g=new Promise((_,C)=>{l=_,f=C});let m=this.pendingTasks.add();return Sc(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:l,reject:f,promise:g,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),g.catch(_=>Promise.reject(_))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function pC(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new ye(4008,!1)}var wg=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Bs(null);get href(){return Jp(this.reactiveHref)}set href(r){this.reactiveHref.set(r)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new st;applicationErrorHandler=E($s);options=E(kn,{optional:!0});constructor(r,n,i,o,c,l){this.router=r,this.route=n,this.tabIndexAttribute=i,this.renderer=o,this.el=c,this.locationStrategy=l,this.reactiveHref.set(E(new tm("href"),{optional:!0}));let f=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement=f==="a"||f==="area"||!!(typeof customElements=="object"&&customElements.get(f)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let r=this.preserveFragment,n=i=>i==="merge"||i==="preserve";r||=n(this.queryParamsHandling),r||=!this.queryParamsHandling&&!n(this.options?.defaultQueryParamsHandling),r&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Xe&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(r){r==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(An(r)?this.routerLinkInput=r:this.routerLinkInput=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0"))}onClick(r,n,i,o,c){let l=this.urlTree;if(l===null||this.isAnchorElement&&(r!==0||n||i||o||c||typeof this.target=="string"&&this.target!="_self"))return!0;let f={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,f)?.catch(g=>{this.applicationErrorHandler(g)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.reactiveHref.set(r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r))??"":null)}applyAttributeValue(r,n){let i=this.renderer,o=this.el.nativeElement;n!==null?i.setAttribute(o,r,n):i.removeAttribute(o,r)}get urlTree(){return this.routerLinkInput===null?null:An(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(n){return new(n||t)(Gr(Se),Gr(Ze),Fp("tabindex"),Gr(Sr),Gr(Gt),Gr(na))};static \u0275dir=Pt({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(n,i){n&1&&si("click",function(c){return i.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),n&2&&cr("href",i.reactiveHref(),zp)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",de],skipLocationChange:[2,"skipLocationChange","skipLocationChange",de],replaceUrl:[2,"replaceUrl","replaceUrl",de],routerLink:"routerLink"},features:[Wr]})}return t})();var Oa=class{};var Cg=(()=>{class t{router;injector;preloadingStrategy;loader;subscription;constructor(r,n,i,o){this.router=r,this.injector=n,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(bt(r=>r instanceof Xe),ai(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,n){let i=[];for(let o of n){o.providers&&!o._injector&&(o._injector=Us(o.providers,r,`Route: ${o.path}`));let c=o._injector??r,l=o._loadedInjector??c;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(c,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(l,o.children??o._loadedRoutes))}return le(i).pipe(Fu())}preloadConfig(r,n){return this.preloadingStrategy.preload(n,()=>{let i;n.loadChildren&&n.canLoad===void 0?i=this.loader.loadChildren(r,n):i=et(null);let o=i.pipe(Wt(c=>c===null?et(void 0):(n._loadedRoutes=c.routes,n._loadedInjector=c.injector,this.processRoutes(c.injector??r,c.routes))));if(n.loadComponent&&!n._loadedComponent){let c=this.loader.loadComponent(n);return le([o,c]).pipe(Fu())}else return o})}static \u0275fac=function(n){return new(n||t)(jt(Se),jt(ar),jt(Oa),jt(_c))};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Sg=new lt(""),mC=(()=>{class t{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=eo;restoredId=0;store={};constructor(r,n,i,o,c={}){this.urlSerializer=r,this.transitions=n,this.viewportScroller=i,this.zone=o,this.options=c,c.scrollPositionRestoration||="disabled",c.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Ir?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Xe?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Tr&&r.code===no.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof oo&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,n){this.zone.runOutsideAngular(()=>U(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new oo(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,n))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(n){Vp()};static \u0275prov=ct({token:t,factory:t.\u0275fac})}return t})();function gC(t,...e){return Mp([{provide:Mr,multi:!0,useValue:t},[],{provide:Ze,useFactory:Rg,deps:[Se]},{provide:qu,multi:!0,useFactory:Eg},e.map(r=>r.\u0275providers)])}function Rg(t){return t.routerState.root}function Da(t,e){return{\u0275kind:t,\u0275providers:e}}function Eg(){let t=E(Ct);return e=>{let r=t.get(zs);if(e!==r.components[0])return;let n=t.get(Se),i=t.get(Og);t.get(Ld)===1&&n.initialNavigation(),t.get(kg,null,{optional:!0})?.setUpPreloading(),t.get(Sg,null,{optional:!0})?.init(),n.resetRootComponentType(r.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Og=new lt("",{factory:()=>new st}),Ld=new lt("",{providedIn:"root",factory:()=>1});function Dg(){let t=[{provide:Ld,useValue:0},Ku(()=>{let e=E(Ct);return e.get(am,Promise.resolve()).then(()=>new Promise(n=>{let i=e.get(Se),o=e.get(Og);Sc(i,()=>{n(!0)}),e.get(wc).afterPreactivation=()=>(n(!0),o.closed?et(void 0):o),i.initialNavigation()}))})];return Da(2,t)}function Ag(){let t=[Ku(()=>{E(Se).setUpLocationChangeListener()}),{provide:Ld,useValue:2}];return Da(3,t)}var kg=new lt("");function Ig(t){return Da(0,[{provide:kg,useExisting:Cg},{provide:Oa,useExisting:t}])}function Tg(){return Da(8,[Ad,{provide:Sa,useExisting:Ad}])}function Mg(t){Up("NgRouterViewTransitions");let e=[{provide:Td,useValue:_g},{provide:Md,useValue:$({skipNextTransition:!!t?.skipInitialTransition},t)}];return Da(9,e)}var Pg=[Or,{provide:gi,useClass:Dn},Se,vi,{provide:Ze,useFactory:Rg,deps:[Se]},_c,[]],$d=(()=>{class t{constructor(){}static forRoot(r,n){return{ngModule:t,providers:[Pg,[],{provide:Mr,multi:!0,useValue:r},[],n?.errorHandler?{provide:Pd,useValue:n.errorHandler}:[],{provide:kn,useValue:n||{}},n?.useHash?yC():bC(),vC(),n?.preloadingStrategy?Ig(n.preloadingStrategy).\u0275providers:[],n?.initialNavigation?_C(n):[],n?.bindToComponentInputs?Tg().\u0275providers:[],n?.enableViewTransitions?Mg().\u0275providers:[],xC()]}}static forChild(r){return{ngModule:t,providers:[{provide:Mr,multi:!0,useValue:r}]}}static \u0275fac=function(n){return new(n||t)};static \u0275mod=Qt({type:t});static \u0275inj=qt({})}return t})();function vC(){return{provide:Sg,useFactory:()=>{let t=E(dm),e=E(zt),r=E(kn),n=E(wc),i=E(gi);return r.scrollOffset&&t.setOffset(r.scrollOffset),new mC(i,n,t,e,r)}}}function yC(){return{provide:na,useClass:cm}}function bC(){return{provide:na,useClass:sm}}function _C(t){return[t.initialNavigation==="disabled"?Ag().\u0275providers:[],t.initialNavigation==="enabledBlocking"?Dg().\u0275providers:[]]}var Nd=new lt("");function xC(){return[{provide:Nd,useFactory:Eg},{provide:qu,multi:!0,useExisting:Nd}]}var wC=new lt("LOCALIZE_ROUTER_FORROOT_GUARD"),Bd=new lt("RAW_ROUTES"),In=function(t){return t.LocalStorage="LocalStorage",t.SessionStorage="SessionStorage",t.Cookie="Cookie",t}(In||{}),Lg=new lt("USE_CACHED_LANG"),$g=new lt("CACHE_MECHANISM"),Bg=new lt("CACHE_NAME"),Fg=new lt("COOKIE_FORMAT"),jg=new lt("INITIAL_NAVIGATION"),Ug=new lt("DEFAULT_LANG_FUNCTION"),zg=new lt("ALWAYS_SET_PREFIX"),CC="LOCALIZE_DEFAULT_LANGUAGE",SC="{{value}};{{expires}}",RC=!1,Ec=(()=>{let e=class e{constructor(n=!0,i=!0,o=In.LocalStorage,c=CC,l=void 0,f=SC,g=RC){this.useCachedLang=n,this.alwaysSetPrefix=i,this.cacheName=c,this.cookieFormat=f,this.initialNavigation=g,this.cacheMechanism=o,this.defaultLangFunction=l}};e.\u0275fac=function(i){return new(i||e)(jt(Lg),jt(zg),jt($g),jt(Bg),jt(Ug),jt(Fg),jt(jg))},e.\u0275prov=ct({token:e,factory:e.\u0275fac});let t=e;return t})(),EC=30,Aa=(()=>{let e=class e{constructor(n,i,o){this.translate=n,this.location=i,this.settings=o}init(n){let i;if(this.routes=n,!this.locales||!this.locales.length)return Promise.resolve();let o=this.getLocationLang(),c=this._getBrowserLang();this.settings.defaultLangFunction?this.defaultLang=this.settings.defaultLangFunction(this.locales,this._cachedLang,c):this.defaultLang=this._cachedLang||c||this.locales[0],i=o||this.defaultLang,this.translate.setDefaultLang(this.defaultLang);let l=[];if(this.settings.alwaysSetPrefix){let f={path:"",redirectTo:this.defaultLang,pathMatch:"full"},g=n.findIndex(m=>m.path==="**");g!==-1&&(this._wildcardRoute=n.splice(g,1)[0]),l=this.routes.splice(0,this.routes.length,f)}else l=[...this.routes];for(let f=l.length-1;f>=0;f--)l[f].data&&l[f].data.skipRouteLocalization&&(this.settings.alwaysSetPrefix&&this.routes.push(l[f]),(l[f].redirectTo===void 0||!l[f].data.skipRouteLocalization.localizeRedirectTo||typeof l[f].redirectTo=="function")&&l.splice(f,1));return l&&l.length&&(this.locales.length>1||this.settings.alwaysSetPrefix)&&(this._languageRoute={children:l},this.routes.unshift(this._languageRoute)),this._wildcardRoute&&this.settings.alwaysSetPrefix&&this.routes.push(this._wildcardRoute),Ep(this.translateRoutes(i))}initChildRoutes(n){return this._translateRouteTree(n),n}translateRoutes(n){return new Ui(i=>{this._cachedLang=n,this._languageRoute&&(this._languageRoute.path=n),this.translate.use(n).subscribe(o=>{this._translationObject=o,this.currentLang=n,this._languageRoute?(this._translateRouteTree(this._languageRoute.children,!0),this._wildcardRoute&&this._wildcardRoute.redirectTo&&this._translateProperty(this._wildcardRoute,"redirectTo",!0)):this._translateRouteTree(this.routes,!0),i.next(void 0),i.complete()})})}_translateRouteTree(n,i){n.forEach(o=>{let c=o.data&&o.data.skipRouteLocalization,l=!c||c.localizeRedirectTo;if(o.redirectTo&&l&&typeof o.redirectTo!="function"){let f=o.redirectTo.indexOf("/")===0||i;this._translateProperty(o,"redirectTo",f)}c||(o.path!==null&&o.path!==void 0&&this._translateProperty(o,"path"),o.children&&this._translateRouteTree(o.children),o.loadChildren&&o._loadedRoutes?.length&&this._translateRouteTree(o._loadedRoutes))})}_translateProperty(n,i,o){let c=n.data=n.data||{};c.localizeRouter||(c.localizeRouter={}),c.localizeRouter[i]||(c.localizeRouter=gt($({},c.localizeRouter),{[i]:n[i]}));let l=this.translateRoute(c.localizeRouter[i]);n[i]=o?this.addPrefixToUrl(l):l}get urlPrefix(){return this.settings.alwaysSetPrefix||this.currentLang!==this.defaultLang?this.currentLang?this.currentLang:this.defaultLang:""}addPrefixToUrl(n){let i=n.split("?"),o=i[0].length===1&&i[0]==="/";i[0]=i[0].replace(/\/$/,"");let c=i.join("?");return this.urlPrefix===""?c:!c.startsWith("/")&&!o?`${this.urlPrefix}/${c}`:`/${this.urlPrefix}${c}`}translateRoute(n){let i=n.split("?");if(i.length>2)throw Error("There should be only one query parameter block in the URL");return i[0].split("/").map(c=>c.length?this.translateText(c):c).join("/")+(i.length>1?`?${i[1]}`:"")}getLocationLang(n){let i=(n||this.location.path()).split(/[\?;]/),o=[];return i.length>0&&(o=i[0].split("/")),o.length>1&&this.locales.indexOf(o[1])!==-1?o[1]:o.length&&this.locales.indexOf(o[0])!==-1?o[0]:null}_getBrowserLang(){return this._returnIfInLocales(this.translate.getBrowserLang())}get _cachedLang(){if(this.settings.useCachedLang){if(this.settings.cacheMechanism===In.LocalStorage)return this._cacheWithLocalStorage();if(this.settings.cacheMechanism===In.SessionStorage)return this._cacheWithSessionStorage();if(this.settings.cacheMechanism===In.Cookie)return this._cacheWithCookies()}}set _cachedLang(n){this.settings.useCachedLang&&(this.settings.cacheMechanism===In.LocalStorage&&this._cacheWithLocalStorage(n),this.settings.cacheMechanism===In.SessionStorage&&this._cacheWithSessionStorage(n),this.settings.cacheMechanism===In.Cookie&&this._cacheWithCookies(n))}_cacheWithLocalStorage(n){try{if(typeof window>"u"||typeof window.localStorage>"u")return;if(n){window.localStorage.setItem(this.settings.cacheName,n);return}return this._returnIfInLocales(window.localStorage.getItem(this.settings.cacheName))}catch{return}}_cacheWithSessionStorage(n){try{if(typeof window>"u"||typeof window.sessionStorage>"u")return;if(n){window.sessionStorage.setItem(this.settings.cacheName,n);return}return this._returnIfInLocales(window.sessionStorage.getItem(this.settings.cacheName))}catch{return}}_cacheWithCookies(n){try{if(typeof document>"u"||typeof document.cookie>"u")return;let i=encodeURIComponent(this.settings.cacheName);if(n){let l=`${this.settings.cookieFormat}`;l=l.replace("{{value}}",`${i}=${encodeURIComponent(n)}`).replace(/{{expires:?(\d+)?}}/g,(f,g)=>{let m=g===void 0?EC:parseInt(g,10),_=new Date;return _.setTime(_.getTime()+m*864e5),`expires=${_.toUTCString()}`}),document.cookie=l;return}let c=new RegExp("(?:^"+i+"|;\\s*"+i+")=(.*?)(?:;|$)","g").exec(document.cookie);return decodeURIComponent(c[1])}catch{return}}_returnIfInLocales(n){return n&&this.locales.indexOf(n)!==-1?n:null}translateText(n){if(this.escapePrefix&&n.startsWith(this.escapePrefix))return n.replace(this.escapePrefix,"");{if(!this._translationObject)return n;let i=this.prefix+n,o=this.translate.getParsedResult(this._translationObject,i);return o!==i?o:n}}chooseQueryParams(n,i){let o;return n&&n.queryParams?o=n.queryParams:i&&(o=i),o}formatQueryParams(n){return new fm({fromObject:n}).toString()}getPrefix(){return this.prefix}getEscapePrefix(){return this.escapePrefix}};e.\u0275fac=function(i){return new(i||e)(jt(_m),jt(Or),jt(Ec))},e.\u0275prov=ct({token:e,factory:e.\u0275fac});let t=e;return t})();var OC=(()=>{let e=class e extends Aa{load(n){return new Promise(i=>{this.init(n).then(i)})}};e.\u0275fac=(()=>{let n;return function(o){return(n||(n=Ne(e)))(o||e)}})(),e.\u0275prov=ct({token:e,factory:e.\u0275fac});let t=e;return t})();function Rc(t,e){if(t===e)return!0;if(t===null||e===null)return!1;if(t!==t&&e!==e)return!0;let r=typeof t,n=typeof e,i,o,c;if(r===n&&r==="object")if(Array.isArray(t)){if(!Array.isArray(e))return!1;if((i=t.length)===e.length){for(o=0;o<i;o++)if(!Rc(t[o],e[o]))return!1;return!0}}else{if(Array.isArray(e))return!1;c=Object.create(null);for(o in t)if(t.hasOwnProperty(o)){if(!Rc(t[o],e[o]))return!1;c[o]=!0}for(o in e)if(e.hasOwnProperty(o)&&!(o in c)&&typeof e[o]<"u")return!1;return!0}return!1}function DC(t){return!!t&&typeof t.then=="function"}function jd(t){let e=Array.isArray(t)?[]:{};for(let r in t)if(r){let n=t[r];e[r]=typeof n=="object"?jd(n):n}return e}var Ud=(()=>{let e=class e{constructor(n,i,o,c){this.parser=n,this.settings=i,this.router=o,this.route=c,this.routerEvents=new st;let l=new Sp(1);this.hooks={_initializedSubject:l,initialized:l.asObservable()}}init(){this.applyConfigToRouter(this.parser.routes),this.router.events.pipe(bt(n=>n instanceof Ir),Vu()).subscribe(this._routeChanged()),this.settings.initialNavigation&&this.router.initialNavigation()}changeLanguage(n,i,o){if(n!==this.parser.currentLang){let c=this.router.routerState.snapshot.root;this.parser.translateRoutes(n).subscribe(()=>{let l=this.traverseRouteSnapshot(c);if(l=this.translateRoute(l),!this.settings.alwaysSetPrefix){let m=l.split("/"),_=m.indexOf(this.parser.currentLang);if(this.parser.currentLang===this.parser.defaultLang)(_===0||_===1&&m[0]==="")&&(m=m.slice(0,_).concat(m.slice(_+1)));else if(_===-1){let C=m[0]===""?1:0;m=m.slice(0,C).concat(this.parser.currentLang,m.slice(C))}l=m.join("/")}l=l.replace(/\/+/g,"/");let f=l.lastIndexOf("/");f>0&&f===l.length-1&&(l=l.slice(0,-1));let g=this.parser.chooseQueryParams(i,this.route.snapshot.queryParams);if(this.applyConfigToRouter(this.parser.routes),this.lastExtras=i,o){let m=i?$({},i):{};g&&(m.queryParams=g),this.router.navigate([l],m)}else{let m=this.parser.formatQueryParams(g);m=m?`?${m}`:"",this.router.navigateByUrl(`${l}${m}`,i)}})}}traverseRouteSnapshot(n){return n.firstChild&&n.routeConfig?`${this.parseSegmentValue(n)}/${this.traverseRouteSnapshot(n.firstChild)}`:n.firstChild?this.traverseRouteSnapshot(n.firstChild):this.parseSegmentValue(n)}buildUrlFromSegments(n,i){return i.map((o,c)=>o.indexOf(":")===0?n.url[c].path:o).join("/")}parseSegmentValue(n){if(n.routeConfig&&n.routeConfig.matcher){let i=this.parseSegmentValueMatcher(n);return this.buildUrlFromSegments(n,i)}else if(n.data.localizeRouter){let o=n.data.localizeRouter.path.split("/");return this.buildUrlFromSegments(n,o)}else if(n.parent&&n.parent.parent){let o=n.routeConfig.path.split("/");return this.buildUrlFromSegments(n,o)}else return""}parseSegmentValueMatcher(n){let i=n.data&&n.data.localizeMatcher&&n.data.localizeMatcher.params||{};return n.url.map(c=>{let l=c.path,f=c.localizedParamName;return(f&&i[f]?i[f](l):null)||`${this.parser.getEscapePrefix()}${l}`})}translateRoute(n){if(typeof n=="string"){let o=this.parser.translateRoute(n);return n.indexOf("/")?o:this.parser.addPrefixToUrl(o)}let i=[];return n.forEach((o,c)=>{if(typeof o=="string"){let l=this.parser.translateRoute(o);!c&&!o.indexOf("/")?i.push(this.parser.addPrefixToUrl(l)):i.push(l)}else i.push(o)}),i}_routeChanged(){return([n,i])=>{let o=this.parser.getLocationLang(n.url)||this.parser.defaultLang,c=this.parser.getLocationLang(i.url)||this.parser.defaultLang,l=this.lastExtras;c!==o&&this.latestUrl!==i.url&&(this.latestUrl=i.url,this.cancelCurrentNavigation(),this.parser.translateRoutes(c).subscribe(()=>{this.applyConfigToRouter(this.parser.routes),this.lastExtras=void 0,this.router.navigateByUrl(i.url,l),this.routerEvents.next(c)})),this.latestUrl=i.url}}cancelCurrentNavigation(){let n=this.router.getCurrentNavigation(),i=this.router.serializeUrl(n.extractedUrl);this.router.events.next(new Ye(n.id,i,"")),this.router.navigationTransitions.transitions.next(gt($({},this.router.navigationTransitions.transitions.getValue()),{id:0}))}applyConfigToRouter(n){this.router.resetConfig(jd(n))}};e.\u0275fac=function(i){return new(i||e)(jt(Aa),jt(Ec),jt(Se),jt(Ze))},e.\u0275prov=ct({token:e,factory:e.\u0275fac});let t=e;return t})(),AC=128,Dk=(()=>{let e=class e{constructor(n,i){this.localize=n,this._ref=i,this.value="",this.subscription=this.localize.routerEvents.subscribe(()=>{this.transform(this.lastKey)})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}transform(n){if(!n||n.length===0||!this.localize.parser.currentLang)return n;if(Rc(n,this.lastKey)&&Rc(this.lastLanguage,this.localize.parser.currentLang))return this.value;this.lastKey=n,this.lastLanguage=this.localize.parser.currentLang,this.value=this.localize.translateRoute(n),this.lastKey=n;let i=this._ref._view;return i&&i.state&AC?this.value:(setTimeout(()=>{this._ref.detectChanges()},0),this.value)}};e.\u0275fac=function(i){return new(i||e)(Gr(Ud,16),Gr(Er,16))},e.\u0275pipe=Hp({name:"localize",type:e,pure:!1});let t=e;return t})(),Fd=class{constructor(){}shouldDetach(e){return!1}store(e,r){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,r){return e&&r?this.getKey(e)===this.getKey(r):!1}getKey(e){if(e.firstChild&&e.firstChild.routeConfig&&e.firstChild.routeConfig.path&&e.firstChild.routeConfig.path.indexOf("**")!==-1)return"WILDCARD";if(!e.data.localizeRouter&&(!e.parent||!e.parent.parent)&&!e.data.skipRouteLocalization)return"LANG";if(e.routeConfig.matcher){let r=`${this.getKey(e.parent)}/${e.routeConfig.matcher.name}`;return e.data.discriminantPathKey&&(r=`${r}-${e.data.discriminantPathKey}`),r}else if(e.data.localizeRouter){let r=`${this.getKey(e.parent)}/${e.data.localizeRouter.path}`;return e.data.discriminantPathKey&&(r=`${r}-${e.data.discriminantPathKey}`),r}else{let r=e.routeConfig.path;return e.parent&&(r=`${this.getKey(e.parent)}/${e.routeConfig.path}`),e.data.discriminantPathKey&&(r=`${r}-${e.data.discriminantPathKey}`),r}}},kC=(()=>{let e=class e extends Se{constructor(){super(),this.platformId=E(jp),this.compiler=E(Vs),this.localize=E(Aa),this.childrenLoaders=new WeakMap,this.loadModuleFactoryOrRoutes=(o,c)=>MC(c.loadChildren()).pipe(ut(TC),Wt(l=>l instanceof js||Array.isArray(l)?et(l):le(this.compiler.compileModuleAsync(l))),ut(l=>{this.onLoadEndListener&&this.onLoadEndListener(c);let f,g;if(Array.isArray(l))g=this.localize.initChildRoutes([].concat(...l));else{f=l.create(o).injector;let _=f.get.bind(f);f.get=(C,R,A)=>{let B=_(C,R,A);return C===Mr?this.localize.initChildRoutes([].concat(...B)):B},g=f.get(Mr,[],{optional:!0,self:!0}).reduce((C,R)=>C.concat(R),[])}return{routes:g.map(Vg),injector:f}}));let i=um(this.platformId)?this.navigationTransitions.configLoader.__proto__:this.navigationTransitions.configLoader;i.loadChildren=(o,c)=>{if(this.childrenLoaders.get(c))return this.childrenLoaders.get(c);if(c._loadedRoutes)return et({routes:c._loadedRoutes,injector:c._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(c);let f=this.loadModuleFactoryOrRoutes(o,c).pipe(Vi(()=>{this.childrenLoaders.delete(c)})),g=new ii(f,()=>new st).pipe(Zo());return this.childrenLoaders.set(c,g),g}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Vg(t){let e=t.children&&t.children.map(Vg),r=e?gt($({},t),{children:e}):$({},t);return!r.component&&!r.loadComponent&&(e||r.loadChildren)&&r.outlet&&r.outlet!==dt&&(r.component=Ra),r}function IC(t){return t&&typeof t=="object"&&"default"in t}function TC(t){return IC(t)?t.default:t}function MC(t){return ta(t)?t:DC(t)?le(Promise.resolve(t)):et(t)}var Ng=(()=>{let e=class e{constructor(n){this.injector=n}appInitializer(){return this.parser.load(this.routes).then(()=>{let i=this.injector.get(Ud),o=this.injector.get(Se),c=this.injector.get(Ec);if(i.init(),c.initialNavigation)return new Promise(l=>{let f=o.navigationTransitions.afterPreactivation,g=!0;o.navigationTransitions.afterPreactivation=()=>(g&&(l(),g=!1,i.hooks._initializedSubject.next(!0),i.hooks._initializedSubject.complete()),f())});i.hooks._initializedSubject.next(!0),i.hooks._initializedSubject.complete()})}generateInitializer(n,i){return this.parser=n,this.routes=i.reduce((o,c)=>o.concat(c)),this.appInitializer}};e.\u0275fac=function(i){return new(i||e)(jt(Ct))},e.\u0275prov=ct({token:e,factory:e.\u0275fac});let t=e;return t})();function PC(t,e,r){let n=jd(r);return t.generateInitializer(e,n).bind(t)}function NC(t,e){return[{provide:Se,useClass:kC},{provide:wC,useFactory:$C,deps:[[LC,new Hu,new Bp]]},{provide:Lg,useValue:e.useCachedLang},{provide:zg,useValue:e.alwaysSetPrefix},{provide:Bg,useValue:e.cacheName},{provide:$g,useValue:e.cacheMechanism},{provide:Ug,useValue:e.defaultLangFunction},{provide:Fg,useValue:e.cookieFormat},{provide:jg,useValue:e.initialNavigation},Ec,e.parser||{provide:Aa,useClass:OC},{provide:Bd,multi:!0,useValue:t},Ud,Ng,{provide:Gp,multi:!0,useFactory:PC,deps:[Ng,Aa,Bd]},{provide:Cc,useClass:Fd}]}var LC=(()=>{let e=class e{static forRoot(n,i={}){return{ngModule:e,providers:NC(n,i)}}static forChild(n){return{ngModule:e,providers:[{provide:Bd,multi:!0,useValue:n}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Qt({type:e}),e.\u0275inj=qt({imports:[lm,$d,xm]});let t=e;return t})();function $C(t){if(t)throw new Error("LocalizeRouterModule.forRoot() called twice. Lazy loaded modules should use LocalizeRouterModule.forChild() instead.");return"guarded"}function yi(t){"@babel/helpers - typeof";return yi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yi(t)}function Hg(t,e){if(yi(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(yi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wg(t){var e=Hg(t,"string");return yi(e)=="symbol"?e:e+""}function Kg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wg(n.key),n)}}function Re(t,e,r){return e&&Kg(t.prototype,e),r&&Kg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ka(t){return Array.isArray(t)?t.slice(0):[t]}function Pr(t){return Array.isArray(t)}function qg(t){return t!=null}function Oc(t,e){var r=0,n=-1;for(var i of t){n=n+1;var o=e(i,n);if(o)r=r+1;else break}return r}function fr(t,e){var r=e.length;if(r!==0){var n=t.length;t.length=n+e.length;for(var i=0;i<r;++i)t[n+i]=e[i]}}function Gg(t){return t.filter(function(e,r,n){return n.indexOf(e)===r})}function Qg(t){for(var e="",r=new Uint8Array(t),n=r.byteLength,i=0;i<n;i++)e+=String.fromCharCode(r[i]);return btoa(e)}function Yg(t,e){return U(this,null,function*(){var r=yield fetch("data:"+e+";base64,"+t),n=yield r.blob();return n})}function Xg(t){var e=Object.prototype.toString.call(t);return e==="[object Uint8Array]"&&(t=new Blob([t])),typeof t=="string"?Promise.resolve(t):t.text()}function Zg(t){return U(this,null,function*(){if(typeof t=="string")return t;var e=Object.prototype.toString.call(t);e==="[object Uint8Array]"&&(t=new Blob([t]));var r=yield t.arrayBuffer();return Qg(r)})}function Jg(t){return t.size}function bi(t){for(var e="",r=0;r<t.length;r++){var n=t[r];if(n==="-")return parseInt(e,10);e+=n}throw new Error("malformatted revision: "+t)}function uo(t,e){var r=e?bi(e._rev)+1:1;return r+"-"+t}function Vd(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&t[e]!==null&&(typeof t[e]=="object"||typeof t[e]=="function")&&!Object.isFrozen(t[e])&&Vd(t[e])}),t}function tv(t){var e=t.split("."),r=e.length;return r===1?n=>n[t]:n=>{for(var i=n,o=0;o<r;++o){var c=e[o];if(i=i[c],typeof i>"u")return i}return i}}function Dc(t){var e={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))if(typeof t[r]=="object"){var n=Dc(t[r]);for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[r+"."+i]=n[i])}else e[r]=t[r];return e}function At(t){return Object.assign({},t)}function ev(t){return Object.keys(t)[0]}function fo(t,e=!1){if(!t)return t;if(!e&&Array.isArray(t))return t.sort((n,i)=>typeof n=="string"&&typeof i=="string"?n.localeCompare(i):typeof n=="object"?1:-1).map(n=>fo(n,e));if(typeof t=="object"&&!Array.isArray(t)){var r={};return Object.keys(t).sort((n,i)=>n.localeCompare(i)).forEach(n=>{r[n]=fo(t[n],e)}),r}return t}function zd(t){if(!t||t===null||typeof t!="object")return t;if(Array.isArray(t)){for(var e=new Array(t.length),r=e.length;r--;)e[r]=zd(t[r]);return e}var n={};for(var i in t)n[i]=zd(t[i]);return n}var Je=zd;function Be(t,e,r){return Object.defineProperty(t,e,{get:function(){return r}}),r}var Ac=1;function Tn(){return{lwt:Ac}}function en(){return""}function rv(t){return Object.assign({},t,{_meta:void 0,_deleted:void 0,_rev:void 0})}function nv(t,e,r){if(e.length!==r.length)return!1;for(var n=0,i=e.length;n<i;){var o=e[n],c=r[n];if(n++,o._rev!==c._rev||o[t]!==c[t])return!1}return!0}var Gk=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});var Qk=Object.freeze(["prototype","__proto__","constructor"]);var BC="[native code] }",Yk=BC.length;var FC=Object.defineProperty,jC=(t,e,r)=>e in t?FC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ho=(t,e,r)=>(jC(t,typeof e!="symbol"?e+"":e,r),r),Mn=class t{constructor(e,r){ho(this,"words"),ho(this,"sigBytes"),e=this.words=e||[],this.sigBytes=r===void 0?e.length*4:r}toString(e){return(e||UC).stringify(this)}concat(e){if(this.clamp(),this.sigBytes%4)for(let r=0;r<e.sigBytes;r++){let n=e.words[r>>>2]>>>24-r%4*8&255;this.words[this.sigBytes+r>>>2]|=n<<24-(this.sigBytes+r)%4*8}else for(let r=0;r<e.sigBytes;r+=4)this.words[this.sigBytes+r>>>2]=e.words[r>>>2];return this.sigBytes+=e.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new t([...this.words])}},UC={stringify(t){let e=[];for(let r=0;r<t.sigBytes;r++){let n=t.words[r>>>2]>>>24-r%4*8&255;e.push((n>>>4).toString(16),(n&15).toString(16))}return e.join("")}};var zC={parse(t){let e=t.length,r=[];for(let n=0;n<e;n++)r[n>>>2]|=(t.charCodeAt(n)&255)<<24-n%4*8;return new Mn(r,e)}},VC={parse(t){return zC.parse(unescape(encodeURIComponent(t)))}},Hd=class{constructor(){ho(this,"_data",new Mn),ho(this,"_nDataBytes",0),ho(this,"_minBufferSize",0),ho(this,"blockSize",512/32)}reset(){this._data=new Mn,this._nDataBytes=0}_append(e){typeof e=="string"&&(e=VC.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_doProcessBlock(e,r){}_process(e){let r,n=this._data.sigBytes/(this.blockSize*4);e?n=Math.ceil(n):n=Math.max((n|0)-this._minBufferSize,0);let i=n*this.blockSize,o=Math.min(i*4,this._data.sigBytes);if(i){for(let c=0;c<i;c+=this.blockSize)this._doProcessBlock(this._data.words,c);r=this._data.words.splice(0,i),this._data.sigBytes-=o}return new Mn(r,o)}},Wd=class extends Hd{update(e){return this._append(e),this._process(),this}finalize(e){e&&this._append(e)}},HC=Object.defineProperty,WC=(t,e,r)=>e in t?HC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,KC=(t,e,r)=>(WC(t,typeof e!="symbol"?e+"":e,r),r),iv=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],qC=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],_i=[],Kd=class extends Wd{constructor(){super(...arguments),KC(this,"_hash",new Mn([...iv]))}reset(){super.reset(),this._hash=new Mn([...iv])}_doProcessBlock(e,r){let n=this._hash.words,i=n[0],o=n[1],c=n[2],l=n[3],f=n[4],g=n[5],m=n[6],_=n[7];for(let C=0;C<64;C++){if(C<16)_i[C]=e[r+C]|0;else{let X=_i[C-15],Bt=(X<<25|X>>>7)^(X<<14|X>>>18)^X>>>3,yt=_i[C-2],Mt=(yt<<15|yt>>>17)^(yt<<13|yt>>>19)^yt>>>10;_i[C]=Bt+_i[C-7]+Mt+_i[C-16]}let R=f&g^~f&m,A=i&o^i&c^o&c,B=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),W=(f<<26|f>>>6)^(f<<21|f>>>11)^(f<<7|f>>>25),Z=_+W+R+qC[C]+_i[C],tt=B+A;_=m,m=g,g=f,f=l+Z|0,l=c,c=o,o=i,i=Z+tt|0}n[0]=n[0]+i|0,n[1]=n[1]+o|0,n[2]=n[2]+c|0,n[3]=n[3]+l|0,n[4]=n[4]+f|0,n[5]=n[5]+g|0,n[6]=n[6]+m|0,n[7]=n[7]+_|0}finalize(e){super.finalize(e);let r=this._nDataBytes*8,n=this._data.sigBytes*8;return this._data.words[n>>>5]|=128<<24-n%32,this._data.words[(n+64>>>9<<4)+14]=Math.floor(r/4294967296),this._data.words[(n+64>>>9<<4)+15]=r,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}};function ov(t){return new Kd().finalize(t).toString()}function GC(t){return Promise.resolve(ov(t))}function QC(t){return U(this,null,function*(){var e=new TextEncoder().encode(t),r=yield crypto.subtle.digest("SHA-256",e),n=Array.prototype.map.call(new Uint8Array(r),i=>("00"+i.toString(16)).slice(-2)).join("");return n})}var YC=typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof crypto.subtle.digest=="function",po=YC?QC:GC;function av(){return new Promise(t=>setTimeout(t,0))}function sv(t=0){return new Promise(e=>setTimeout(e,t))}var XC=Promise.resolve(!0),Nr=Promise.resolve(!1),cv=Promise.resolve(null),Pn=Promise.resolve();function mo(t=1e4){return typeof requestIdleCallback=="function"?new Promise(e=>{requestIdleCallback(()=>e(),{timeout:t})}):sv(0)}var qd=Pn;function lv(t=void 0){return qd=qd.then(()=>mo(t)),qd}function uv(t,e){return t.reduce((r,n)=>r.then(n),Promise.resolve(e))}var dv=/\./g;var fv="abcdefghijklmnopqrstuvwxyz";function xi(t=10){for(var e="",r=0;r<t;r++)e+=fv.charAt(Math.floor(Math.random()*fv.length));return e}function kc(t){t+="";var e=t.charAt(0).toUpperCase();return e+t.substr(1)}function hr(t){for(;t.charAt(0)===".";)t=t.substr(1);for(;t.slice(-1)===".";)t=t.slice(0,-1);return t}function Gd(t){return!!(t.includes("/")||t.includes("\\"))}function Nn(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var r,n;if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!Nn(t[n],e[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();var i=Object.keys(t);if(r=i.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[n]))return!1;for(n=r;n--!==0;){var o=i[n];if(!Nn(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}var Yd=t=>{var e=typeof t;return t!==null&&(e==="object"||e==="function")},Qd=new Set(["__proto__","prototype","constructor"]),ZC=new Set("0123456789");function hv(t){var e=[],r="",n="start",i=!1;for(var o of t)switch(o){case"\\":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");i&&(r+=o),n="property",i=!i;break}case".":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="property";break}if(i){i=!1,r+=o;break}if(Qd.has(r))return[];e.push(r),r="",n="property";break}case"[":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="index";break}if(i){i=!1,r+=o;break}if(n==="property"){if(Qd.has(r))return[];e.push(r),r=""}n="index";break}case"]":{if(n==="index"){e.push(Number.parseInt(r,10)),r="",n="indexEnd";break}if(n==="indexEnd")throw new Error("Invalid character after an index")}default:{if(n==="index"&&!ZC.has(o))throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");n==="start"&&(n="property"),i&&(i=!1,r+="\\"),r+=o}}switch(i&&(r+="\\"),n){case"property":{if(Qd.has(r))return[];e.push(r);break}case"index":throw new Error("Index was not closed");case"start":{e.push("");break}}return e}function pv(t,e){if(typeof e!="number"&&Array.isArray(t)){var r=Number.parseInt(e,10);return Number.isInteger(r)&&t[r]===t[e]}return!1}function JC(t,e){if(pv(t,e))throw new Error("Cannot use string index")}function ke(t,e,r){if(Array.isArray(e)&&(e=e.join(".")),!e.includes(".")&&!e.includes("["))return t[e];if(!Yd(t)||typeof e!="string")return r===void 0?t:r;var n=hv(e);if(n.length===0)return r;for(var i=0;i<n.length;i++){var o=n[i];if(pv(t,o)?t=i===n.length-1?void 0:null:t=t[o],t==null){if(i!==n.length-1)return r;break}}return t===void 0?r:t}function Xd(t,e,r){if(Array.isArray(e)&&(e=e.join(".")),!Yd(t)||typeof e!="string")return t;for(var n=t,i=hv(e),o=0;o<i.length;o++){var c=i[o];JC(t,c),o===i.length-1?t[c]=r:Yd(t[c])||(t[c]=typeof i[o+1]=="number"?[]:{}),t=t[c]}return n}function Ln(t,e){var r=t.get(e);if(typeof r>"u")throw new Error("missing value from map "+e);return r}function Fe(t,e,r,n){var i=t.get(e);return typeof i>"u"?(i=r(),t.set(e,i)):n&&n(i),i}function Ot(t){var e=t.split("-"),r="RxDB";return e.forEach(n=>{r+=kc(n)}),r+="Plugin",new Error(`You are using a function which must be overwritten by a plugin.
        You should either prevent the usage of this function or add the plugin via:
            import { `+r+" } from 'rxdb/plugins/"+t+`';
            addRxPlugin(`+r+`);
        `)}var Zd=0;function ne(){var t=Date.now();t=t+.01,t<=Zd&&(t=Zd+.01);var e=parseFloat(t.toFixed(2));return Zd=e,e}function Dt(t,e){if(!t)throw e||(e=""),new Error("ensureNotFalsy() is falsy: "+e);return t}var Ic={bufferSize:1,refCount:!0};var wi="15.39.0";var $n={},Tc="6da4936d1425ff3a5c44c02342c6daf791d266be3ae8479b8ec59e261df41b93";function Bn(t,e){return Bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Bn(t,e)}function Jd(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Bn(t,e)}function Mc(t){return Mc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mc(t)}function mv(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function tf(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tf=function(){return!!t})()}function gv(t,e,r){if(tf())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var i=new(t.bind.apply(t,n));return r&&Bn(i,r.prototype),i}function Ia(t){var e=typeof Map=="function"?new Map:void 0;return Ia=function(n){if(n===null||!mv(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return gv(n,arguments,Mc(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Bn(i,n)},Ia(t)}var It={isDevMode(){return!1},deepFreezeWhenDevMode(t){return t},tunnelErrorMessage(t){return"RxDB Error-Code "+t+`.
        Error messages are not included in RxDB core to reduce build size.
        `}};function tS(t){var e="";return Object.keys(t).length===0||(e+=`Given parameters: {
`,e+=Object.keys(t).map(r=>{var n="[object Object]";try{r==="errors"?n=t[r].map(i=>JSON.stringify(i,Object.getOwnPropertyNames(i))):n=JSON.stringify(t[r],function(i,o){return o===void 0?null:o},2)}catch{}return r+":"+n}).join(`
`),e+="}"),e}function vv(t,e,r){return"RxError ("+e+`):
`+t+`
`+tS(r)}var eS=function(t){function e(n,i,o={}){var c,l=vv(i,n,o);return c=t.call(this,l)||this,c.code=n,c.message=l,c.url=ef(n),c.parameters=o,c.rxdb=!0,c}Jd(e,t);var r=e.prototype;return r.toString=function(){return this.message},Re(e,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}])}(Ia(Error)),rS=function(t){function e(n,i,o={}){var c,l=vv(i,n,o);return c=t.call(this,l)||this,c.code=n,c.message=l,c.url=ef(n),c.parameters=o,c.rxdb=!0,c}Jd(e,t);var r=e.prototype;return r.toString=function(){return this.message},Re(e,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}])}(Ia(TypeError));function ef(t){return"https://rxdb.info/errors.html?console=errors#"+t}function yv(t){return`
 You can find out more about this error here: `+ef(t)+" "}function I(t,e){return new eS(t,It.tunnelErrorMessage(t)+yv(t),e)}function ae(t,e){return new rS(t,It.tunnelErrorMessage(t)+yv(t),e)}function Pc(t){return t&&t.status===409?t:!1}var nS={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};function bv(t){return I("COL20",{name:nS[t.status],document:t.documentId,writeError:t})}var go={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],createRxState:[],postDestroyRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preStorageWrite:[],preMigrateDocument:[],postMigrateDocument:[],preDestroyRxDatabase:[],postRemoveRxDatabase:[],postCleanup:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function Zt(t,e){go[t].length>0&&go[t].forEach(r=>r(e))}function Fn(t,e){return Promise.all(go[t].map(r=>r(e)))}function Ie(t,e){var r=e;r=r.replace(dv,".properties."),r="properties."+r,r=hr(r);var n=ke(t,r);return n}function Nc(t,e,r){if(typeof e.primaryKey=="string")return r;var n=Ta(e,r),i=r[t];if(i&&i!==n)throw I("DOC19",{args:{documentData:r,existingPrimary:i,newPrimary:n},schema:e});return r[t]=n,r}function fe(t){return typeof t=="string"?t:t.key}function Ta(t,e){if(typeof t.primaryKey=="string")return e[t.primaryKey];var r=t.primaryKey;return r.fields.map(n=>{var i=ke(e,n);if(typeof i>"u")throw I("DOC18",{args:{field:n,documentData:e}});return i}).join(r.separator)}function _v(t){var e=fo(t,!0);return e}function iS(t){return["_deleted",t]}function Lc(t){t=At(t);var e=fe(t.primaryKey);t.properties=At(t.properties),t.additionalProperties=!1,Object.prototype.hasOwnProperty.call(t,"keyCompression")||(t.keyCompression=!1),t.indexes=t.indexes?t.indexes.slice(0):[],t.required=t.required?t.required.slice(0):[],t.encrypted=t.encrypted?t.encrypted.slice(0):[],t.properties._rev={type:"string",minLength:1},t.properties._attachments={type:"object"},t.properties._deleted={type:"boolean"},t.properties._meta=oS,t.required=t.required?t.required.slice(0):[],t.required.push("_deleted"),t.required.push("_rev"),t.required.push("_meta"),t.required.push("_attachments");var r=rf(t);fr(t.required,r),t.required=t.required.filter(o=>!o.includes(".")).filter((o,c,l)=>l.indexOf(o)===c),t.version=t.version||0;var n=t.indexes.map(o=>{var c=Pr(o)?o.slice(0):[o];return c.includes(e)||c.push(e),c[0]!=="_deleted"&&c.unshift("_deleted"),c});n.length===0&&n.push(iS(e)),n.push(["_meta.lwt",e]),t.internalIndexes&&t.internalIndexes.map(o=>{n.push(o)});var i=new Set;return n.filter(o=>{var c=o.join(",");return i.has(c)?!1:(i.add(c),!0)}),t.indexes=n,t}var oS={type:"object",properties:{lwt:{type:"number",minimum:Ac,maximum:1e15,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function rf(t){var e=Object.keys(t.properties).filter(n=>t.properties[n].final),r=fe(t.primaryKey);return e.push(r),typeof t.primaryKey!="string"&&t.primaryKey.fields.forEach(n=>e.push(n)),e}function xv(t,e){for(var r=Object.keys(t.defaultValues),n=0;n<r.length;++n){var i=r[n];(!Object.prototype.hasOwnProperty.call(e,i)||typeof e[i]>"u")&&(e[i]=t.defaultValues[i])}return e}var nf=function(){function t(r,n){this.jsonSchema=r,this.hashFunction=n,this.indexes=aS(this.jsonSchema),this.primaryPath=fe(this.jsonSchema.primaryKey),this.finalFields=rf(this.jsonSchema)}var e=t.prototype;return e.validateChange=function(n,i){this.finalFields.forEach(o=>{if(!Nn(n[o],i[o]))throw I("DOC9",{dataBefore:n,dataAfter:i,fieldName:o,schema:this.jsonSchema})})},e.getDocumentPrototype=function(){var n={},i=Ie(this.jsonSchema,"");return Object.keys(i).forEach(o=>{var c=o;n.__defineGetter__(o,function(){if(!(!this.get||typeof this.get!="function")){var l=this.get(c);return l}}),Object.defineProperty(n,o+"$",{get:function(){return this.get$(c)},enumerable:!1,configurable:!1}),Object.defineProperty(n,o+"$$",{get:function(){return this.get$$(c)},enumerable:!1,configurable:!1}),Object.defineProperty(n,o+"_",{get:function(){return this.populate(c)},enumerable:!1,configurable:!1})}),Be(this,"getDocumentPrototype",()=>n),n},e.getPrimaryOfDocumentData=function(n){return Ta(this.jsonSchema,n)},Re(t,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var r={};return Object.entries(this.jsonSchema.properties).filter(([,n])=>Object.prototype.hasOwnProperty.call(n,"default")).forEach(([n,i])=>r[n]=i.default),Be(this,"defaultValues",r)}},{key:"hash",get:function(){return Be(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}])}();function aS(t){return(t.indexes||[]).map(e=>Pr(e)?e:[e])}function wv(t){var e=t.version?t.version:0,r=0;return new Array(e).fill(0).map(()=>r++)}function Cv(t,e,r=!0){r&&Zt("preCreateRxSchema",t);var n=Lc(t);n=_v(n),It.deepFreezeWhenDevMode(n);var i=new nf(n,e);return Zt("createRxSchema",i),i}function Sv(t){return t.documentData?t.documentData:t.previousDocumentData}function Rv(t){switch(t.operation){case"INSERT":return{operation:t.operation,id:t.documentId,doc:t.documentData,previous:null};case"UPDATE":return{operation:t.operation,id:t.documentId,doc:It.deepFreezeWhenDevMode(t.documentData),previous:t.previousDocumentData?t.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:t.operation,id:t.documentId,doc:null,previous:t.previousDocumentData}}}function $c(t){return t[t.length-1]}function sS(t){let e=typeof t;return t!==null&&(e==="object"||e==="function")}function of(t,e,r){if(Array.isArray(e)&&(e=e.join(".")),!sS(t)||typeof e!="string")return r===void 0?t:r;let n=e.split(".");if(n.length===0)return r;for(let i=0;i<n.length;i++){let o=n[i];if(cS(t,o)?t=i===n.length-1?void 0:null:t=t[o],t==null){if(i!==n.length-1)return r;break}}return t===void 0?r:t}function cS(t,e){if(typeof e!="number"&&Array.isArray(t)){let r=Number.parseInt(e,10);return Number.isInteger(r)&&t[r]===t[e]}return!1}var af=t=>!!t.queryParams.limit,Ev=t=>t.queryParams.limit===1,Ov=t=>!!(t.queryParams.skip&&t.queryParams.skip>0),Dv=t=>t.changeEvent.operation==="DELETE",Av=t=>t.changeEvent.operation==="INSERT",kv=t=>t.changeEvent.operation==="UPDATE",Iv=t=>af(t)&&t.previousResults.length>=t.queryParams.limit,Tv=t=>{let e=t.queryParams.sortFields,r=t.changeEvent.previous,n=t.changeEvent.doc;if(!n)return!1;if(!r)return!0;for(let i=0;i<e.length;i++){let o=e[i],c=of(r,o),l=of(n,o);if(c!==l)return!0}return!1},Mv=t=>{let e=t.changeEvent.id;if(t.keyDocumentMap)return t.keyDocumentMap.has(e);{let r=t.queryParams.primaryKey,n=t.previousResults;for(let i=0;i<n.length;i++)if(n[i][r]===e)return!0;return!1}},Pv=t=>{let e=t.previousResults[0];return!!(e&&e[t.queryParams.primaryKey]===t.changeEvent.id)},Nv=t=>{let e=$c(t.previousResults);return!!(e&&e[t.queryParams.primaryKey]===t.changeEvent.id)},Lv=t=>{let e=t.changeEvent.previous;if(!e)return!1;let r=t.previousResults[0];return r?r[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,r)<0:!1},$v=t=>{let e=t.changeEvent.previous;if(!e)return!1;let r=$c(t.previousResults);return r?r[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,r)>0:!1},Bv=t=>{let e=t.changeEvent.doc;if(!e)return!1;let r=t.previousResults[0];return r?r[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,r)<0:!1},Fv=t=>{let e=t.changeEvent.doc;if(!e)return!1;let r=$c(t.previousResults);return r?r[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,r)>0:!1},jv=t=>{let e=t.changeEvent.previous;return e?t.queryParams.queryMatcher(e):!1},Uv=t=>{let e=t.changeEvent.doc;return e?t.queryParams.queryMatcher(e):!1},zv=t=>t.previousResults.length===0;var Vv={0:Av,1:kv,2:Dv,3:af,4:Ev,5:Ov,6:zv,7:Iv,8:Pv,9:Nv,10:Tv,11:Mv,12:Lv,13:$v,14:Bv,15:Fv,16:jv,17:Uv};function Hv(t,e,r,n){var i=t.length,o=i-1,c=0;if(i===0)return t.push(e),0;for(var l;n<=o;)c=n+(o-n>>1),l=t[c],r(l,e)<=0?n=c+1:o=c-1;return r(l,e)<=0&&c++,t.splice(c,0,e),c}var Wv=t=>{},Bc=t=>{t.previousResults.unshift(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},Fc=t=>{t.previousResults.push(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},jc=t=>{let e=t.previousResults.shift();t.keyDocumentMap&&e&&t.keyDocumentMap.delete(e[t.queryParams.primaryKey])},Uc=t=>{let e=t.previousResults.pop();t.keyDocumentMap&&e&&t.keyDocumentMap.delete(e[t.queryParams.primaryKey])},Kv=t=>{jc(t),Fc(t)},qv=t=>{Uc(t),Bc(t)},Gv=t=>{jc(t),Bc(t)},Qv=t=>{Uc(t),Fc(t)},sf=t=>{t.keyDocumentMap&&t.keyDocumentMap.delete(t.changeEvent.id);let e=t.queryParams.primaryKey,r=t.previousResults;for(let n=0;n<r.length;n++)if(r[n][e]===t.changeEvent.id){r.splice(n,1);break}},Yv=t=>{let e=t.changeEvent.doc,r=t.queryParams.primaryKey,n=t.previousResults;for(let i=0;i<n.length;i++)if(n[i][r]===t.changeEvent.id){n[i]=e,t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,e);break}},Xv=t=>{let e={_id:"wrongHuman"+new Date().getTime()};t.previousResults.length=0,t.previousResults.push(e),t.keyDocumentMap&&(t.keyDocumentMap.clear(),t.keyDocumentMap.set(e._id,e))},cf=t=>{let e=t.changeEvent.id,r=t.changeEvent.doc;if(t.keyDocumentMap){if(t.keyDocumentMap.has(e))return;t.keyDocumentMap.set(e,r)}else if(t.previousResults.find(i=>i[t.queryParams.primaryKey]===e))return;Hv(t.previousResults,r,t.queryParams.sortComparator,0)},Zv=t=>{sf(t),cf(t)},Jv=t=>{throw new Error("Action runFullQueryAgain must be implemented by yourself")},ty=t=>{throw new Error("Action unknownAction should never be called")};var ey=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],ry={doNothing:Wv,insertFirst:Bc,insertLast:Fc,removeFirstItem:jc,removeLastItem:Uc,removeFirstInsertLast:Kv,removeLastInsertFirst:qv,removeFirstInsertFirst:Gv,removeLastInsertLast:Qv,removeExisting:sf,replaceExisting:Yv,alwaysWrong:Xv,insertAtSortPosition:cf,removeExistingAndInsertAtSortPosition:Zv,runFullQueryAgain:Jv,unknownAction:ty};function zc(t){return t.charCodeAt(0)-40}function ny(t){return t?"1":"0"}function lS(t=6){let e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length;for(let i=0;i<t;i++)e+=r.charAt(Math.floor(Math.random()*n));return e}var cT=lS(4);function lf(t,e){let r=[];for(let n=0,i=t.length;n<i;n+=e)r.push(t.substring(n,n+e));return r}function iy(t){let e=new Map,n=2+parseInt(t.charAt(0)+t.charAt(1),10)*2,i=t.substring(2,n),o=lf(i,2);for(let B=0;B<o.length;B++){let W=o[B],Z=W.charAt(0),tt=zc(W.charAt(1));e.set(Z,tt)}let c=t.substring(n,t.length-3),l=lf(c,4);for(let B=0;B<l.length;B++){let W=l[B],Z=W.charAt(0),tt=W.charAt(1),X=W.charAt(2),Bt=zc(W.charAt(3));if(!e.has(tt))throw new Error("missing node with id "+tt);if(!e.has(X))throw new Error("missing node with id "+X);let yt=e.get(tt),Mt=e.get(X),vt={l:Bt,0:yt,1:Mt};e.set(Z,vt)}let f=t.slice(-3),g=f.charAt(0),m=f.charAt(1),_=zc(f.charAt(2)),C=e.get(g),R=e.get(m);return{l:_,0:C,1:R}}function oy(t,e,r){let n=t,i=t.l;for(;;){let o=e[i](r),c=ny(o);if(n=n[c],typeof n=="number"||typeof n=="string")return n;i=n.l}}var uS="14a1b,c+d2e5f0g/h.i4j*k-l)m(n6oeh6pnm6qen6ril6snh6tin6ubo9vce9wmh9xns9yne9zmi9{cm9|ad9}cp9~aq9\x7Fae9\xA1bf9\xA2bq9\xA3cg9\xA4ck9\xA5cn9\xA6nd9\xA7np9\xA8nq9\xA9nf9\xAAng9\xABnm9\xACnk9\xADmr9\xAEms9\xAFmt9\xB0mj9\xB1mk9\xB2ml9\xB3mn9\xB4mc8\xB5\xB3{8\xB6\xAF}8\xB7\xB0\xA48\xB8\xB3\xA78\xB9mn8\xBA\xB3\xAB8\xBB\xB3m8\xBCm\xB44\xBDz\xB24\xBE\xB3w4\xBFz\xB54\xC0\xAF\xB64\xC1\xB0\xB74\xC2\xB3\xBA4\xC3\xB3\xB84\xC4m\xB94\xC5v\xA47\xC6yn7\xC7\xC0\xC17\xC8~\x7F7\xC9\xA5\xA47\xCA\xC3\xC47\xCB\xA8n7\xCC\xBA\xB97\xCD\xAD\xB07\xCE\xAEm7\xCF\xAF\xB07\xD0\xB1m7\xD1\xB3m7\xD2\xBCm5\xD3\xC4m5\xD4\xB9m5\xD5\xBD\xB05\xD6\xBEm5\xD7\xBF\xB05\xD8\xC7\xCF5\xD9\xC2m5\xDA\xCA\xD15\xDB\xB1m5\xDC\xBAm5\xDD\xCC\xD15\xDE\xD5\xCD2\xDF|\x7F2\xE0\xA1u2\xE1\xA3\xC52\xE2\xD6\xCE2\xE3\xA6\xC62\xE4\xA9x2\xE5\xAA\xC62\xE6\xD7\xD82\xE7|\xC82\xE8\xA1\xA22\xE9\xA3\xC92\xEA\xA4\xA52\xEB\xD9\xDA2\xEC\xA6\xCB2\xED\xA9n2\xEE\xAAn2\xEF\xDB\xD02\xF0\xDC\xDD2\xF1\xACn2\xF2\xD2\xD3/\xF3an/\xF4bn/\xF5cn/\xF6\xDE\xE2/\xF7\xDF\xE3/\xF8\xE0\xE4/\xF9\xE1\xE5/\xFA\xE6\xEB/\xFB\xE7\xEC/\xFC\xE8\xED/\xFD\xE9\xEE/\xFE\xCD\xCE/\xFF\xCF\xD1/\u0100\xF2\xD4,\u0101cn,\u0102\xF6\xEF,\u0103\xA4\xF1,\u0104\xFA\xF0,\u0105\xEA\xF1,\u0106\xFE\xD0,\u0107\xFF\xD1,\u0108ac0\u0109bc0\u010A\xF3\xF50\u010B\xF4\u01010\u010C\xDF\xE10\u010D\xE0\xA40\u010E\xE7\xE90\u010F\xE8\xEA0\u0110\xF7\xF90\u0111\xF8\u01030\u0112\xFB\xFD0\u0113\xFC\u01050\u0114m\xD2-\u0115m\u0100-\u0116\xDE\xE6-\u0117\u010C\u010E-\u0118\u010D\u010F-\u0119\u0102\u0104-\u011A\u0110\u0112-\u011B\u0111\u0113-\u011C\xB2\xBB-\u011D\xCD\xCF-\u011E\u0106\u0107-\u011F\xB2\xB3-\u0120\u0114\u01083\u0121\u0115\u010A3\u0122\u0116\u01173\u0123\u0119\u011A3\u0124\u0122\u011D(\u0125\u011C\u011F(\u0126\u0123\u011E(\u0127\u0120\u0121+\u0128\u0109\u010B+\u0129\u0124\u0126+\u012A\u0118\u011B+\u012B\u0127\u01281\u012C\u0129\u012A1\u012D\u012C\u012B*\u012E\u0125m*\u012D\u012E.",uf;function dS(){return uf||(uf=iy(uS)),uf}var ay=t=>oy(dS(),Vv,t);function sy(t){let e=ay(t);return ey[e]}function cy(t,e,r,n,i){let o=ry[t];return o({queryParams:e,changeEvent:r,previousResults:n,keyDocumentMap:i}),n}var Ci="\uFFFF",Si=Number.MIN_SAFE_INTEGER;function ly(t,e){var r=e.selector,n=t.indexes?t.indexes.slice(0):[];e.index&&(n=[e.index]);var i=!!e.sort.find(m=>Object.values(m)[0]==="desc"),o=new Set;Object.keys(r).forEach(m=>{var _=Ie(t,m);_&&_.type==="boolean"&&Object.prototype.hasOwnProperty.call(r[m],"$eq")&&o.add(m)});var c=e.sort.map(m=>Object.keys(m)[0]),l=c.filter(m=>!o.has(m)).join(","),f=-1,g;if(n.forEach(m=>{var _=!0,C=!0,R=m.map(tt=>{var X=r[tt],Bt=X?Object.keys(X):[],yt={};if(!X||!Bt.length){var Mt=C?Si:Ci;yt={startKey:Mt,endKey:_?Ci:Si,inclusiveStart:!0,inclusiveEnd:!0}}else Bt.forEach(vt=>{if(Vc.has(vt)){var _t=X[vt],pe=mS(vt,_t);yt=Object.assign(yt,pe)}});return typeof yt.startKey>"u"&&(yt.startKey=Si),typeof yt.endKey>"u"&&(yt.endKey=Ci),typeof yt.inclusiveStart>"u"&&(yt.inclusiveStart=!0),typeof yt.inclusiveEnd>"u"&&(yt.inclusiveEnd=!0),C&&!yt.inclusiveStart&&(C=!1),_&&!yt.inclusiveEnd&&(_=!1),yt}),A=R.map(tt=>tt.startKey),B=R.map(tt=>tt.endKey),W={index:m,startKeys:A,endKeys:B,inclusiveEnd:_,inclusiveStart:C,sortSatisfiedByIndex:!i&&l===m.filter(tt=>!o.has(tt)).join(","),selectorSatisfiedByIndex:pS(m,e.selector,A,B)},Z=gS(t,e,W);(Z>=f||e.index)&&(f=Z,g=W)}),!g)throw I("SNH",{query:e});return g}var Vc=new Set(["$eq","$gt","$gte","$lt","$lte"]),fS=new Set(["$eq","$gt","$gte"]),hS=new Set(["$eq","$lt","$lte"]);function pS(t,e,r,n){var i=Object.entries(e),o=i.find(([vt,_t])=>{if(!t.includes(vt))return!0;var pe=Object.entries(_t).find(([gr,No])=>!Vc.has(gr));return pe});if(o||e.$and||e.$or)return!1;var c=[],l=new Set;for(var[f,g]of Object.entries(e)){if(!t.includes(f))return!1;var m=Object.keys(g).filter(vt=>fS.has(vt));if(m.length>1)return!1;var _=m[0];if(_&&l.add(f),_!=="$eq"){if(c.length>0)return!1;c.push(_)}}var C=[],R=new Set;for(var[A,B]of Object.entries(e)){if(!t.includes(A))return!1;var W=Object.keys(B).filter(vt=>hS.has(vt));if(W.length>1)return!1;var Z=W[0];if(Z&&R.add(A),Z!=="$eq"){if(C.length>0)return!1;C.push(Z)}}var tt=0;for(var X of t){for(var Bt of[l,R]){if(!Bt.has(X)&&Bt.size>0)return!1;Bt.delete(X)}var yt=r[tt],Mt=n[tt];if(yt!==Mt&&l.size>0&&R.size>0)return!1;tt++}return!0}function mS(t,e){switch(t){case"$eq":return{startKey:e,endKey:e,inclusiveEnd:!0,inclusiveStart:!0};case"$lte":return{endKey:e,inclusiveEnd:!0};case"$gte":return{startKey:e,inclusiveStart:!0};case"$lt":return{endKey:e,inclusiveEnd:!1};case"$gt":return{startKey:e,inclusiveStart:!1};default:throw new Error("SNH")}}function gS(t,e,r){var n=0,i=m=>{m>0&&(n=n+m)},o=10,c=Oc(r.startKeys,m=>m!==Si&&m!==Ci);i(c*o);var l=Oc(r.startKeys,m=>m!==Ci&&m!==Si);i(l*o);var f=Oc(r.startKeys,(m,_)=>m===r.endKeys[_]);i(f*o*1.5);var g=r.sortSatisfiedByIndex?5:0;return i(g),n}var se=class extends Error{},qc=2147483647,Gc=-2147483648,mf=Number.MAX_SAFE_INTEGER,gf=Number.MIN_SAFE_INTEGER,rn=Symbol("missing"),fy=Object.freeze(new Error("mingo: cycle detected while processing object/array")),vS="[object Object]",yS=/^\[object ([a-zA-Z0-9]+)\]$/,Ma=t=>{let e=CS(t),r=0,n=e.length;for(;n;)r=(r<<5)-r^e.charCodeAt(--n);return r>>>0},hy=new Set(["null","undefined","boolean","number","string","date","regexp"]),bS={null:0,undefined:0,number:1,string:2,object:3,array:4,boolean:5,date:6,regexp:7,function:8},Nt=(t,e)=>{t===rn&&(t=void 0),e===rn&&(e=void 0);let[r,n]=[t,e].map(i=>bS[jn(i).toLowerCase()]);return r!==n?r-n:r===1||r===2||r===6?t<e?-1:t>e?1:0:he(t,e)?0:t<e?-1:t>e?1:0};function V(t,e){if(!t)throw new se(e)}var jn=t=>yS.exec(Object.prototype.toString.call(t))[1],Pa=t=>typeof t=="boolean",St=t=>typeof t=="string";var ht=t=>!isNaN(t)&&typeof t=="number";var ot=Array.isArray,ft=t=>{if(!t)return!1;let e=Object.getPrototypeOf(t);return(e===Object.prototype||e===null)&&vS===Object.prototype.toString.call(t)},Na=t=>t===Object(t),Un=t=>t instanceof Date,bo=t=>t instanceof RegExp,La=t=>typeof t=="function",Q=t=>t==null,Lr=(t,e)=>t.includes(e),Qc=(t,e)=>!Lr(t,e),Ee=(t,e=!0)=>!!t||e&&t==="",je=t=>Q(t)||St(t)&&!t||t instanceof Array&&t.length===0||ft(t)&&Object.keys(t).length===0,uy=t=>t===rn,$r=t=>t instanceof Array?t:[t],Ut=(t,e)=>!!t&&Object.prototype.hasOwnProperty.call(t,e),vf=t=>typeof ArrayBuffer<"u"&&ArrayBuffer.isView(t),_S=[Un,bo,vf],ff=(t,e)=>{if(Q(t))return t;if(e.has(t))throw fy;let r=t.constructor;if(_S.some(n=>n(t)))return new r(t);try{if(e.add(t),ot(t))return t.map(n=>ff(n,e));if(ft(t)){let n={};for(let i in t)n[i]=ff(t[i],e);return n}}finally{e.delete(t)}return t},_o=t=>ff(t,new Set),xS=(t,e)=>ft(t)&&ft(e)||ot(t)&&ot(e);function Wc(t,e,r){if(r=r||{flatten:!1},uy(t)||Q(t))return e;if(uy(e)||Q(e))return t;if(!xS(t,e)){if(r.skipValidation)return e||t;throw Error("mismatched types. must both be array or object")}if(r.skipValidation=!0,ot(t)){let n=t,i=e;if(r.flatten){let o=0,c=0;for(;o<n.length&&c<i.length;)n[o]=Wc(n[o++],i[c++],r);for(;c<i.length;)n.push(e[c++])}else tr(n,i)}else for(let n in e)t[n]=Wc(t[n],e[n],r);return t}function hf(t,e=Ma){let r=new Map;return t.forEach((n,i)=>{let o=Yc(n,e);r.has(o)?r.get(o).some(c=>he(t[c],n))||r.get(o).push(i):r.set(o,[i])}),r}function nn(t,e=Ma){if(t.some(l=>l.length==0))return[];if(t.length===1)return Array.from(t);let r=py(t.map((l,f)=>[f,l.length]),l=>l[1]),n=t[r[0][0]],i=hf(n,e),o=new Map,c=new Array;return i.forEach((l,f)=>{let g=l.map(R=>n[R]),m=g.map(R=>0),_=g.map(R=>[r[0][0],0]),C=!1;for(let R=1;R<t.length;R++){let[A,B]=r[R],W=t[A];if(o.has(R)||o.set(R,hf(W)),o.get(R).has(f)){let Z=o.get(R).get(f).map(tt=>W[tt]);C=g.map((tt,X)=>Z.some((Bt,yt)=>{let Mt=m[X];return he(tt,Bt)&&(m[X]++,A<_[X][0]&&(_[X]=[A,o.get(R).get(f)[yt]])),Mt<m[X]})).some(Boolean)}if(!C)return}C&&tr(c,m.map((R,A)=>R===t.length-1?[g[A],_[A]]:rn).filter(R=>R!==rn))}),c.sort((l,f)=>{let[g,[m,_]]=l,[C,[R,A]]=f,B=Nt(m,R);return B!==0?B:Nt(_,A)}).map(l=>l[0])}function yf(t,e=0){let r=new Array;function n(i,o){for(let c=0,l=i.length;c<l;c++)ot(i[c])&&(o>0||o<0)?n(i[c],Math.max(-1,o-1)):r.push(i[c])}return n(t,e),r}var wS=t=>{let[e,r]=[Object.getPrototypeOf(t),Object.getOwnPropertyNames(t)],n=e;for(;!r.length&&e!==Object.prototype&&e!==Array.prototype;)n=e,r=Object.getOwnPropertyNames(e),e=Object.getPrototypeOf(e);let i={};return r.forEach(o=>i[o]=t[o]),[i,n]};function he(t,e){if(t===e||Object.is(t,e))return!0;let r=!!t&&t.constructor||t;if(t===null||e===null||t===void 0||e===void 0||r!==e.constructor||r===Function)return!1;if(r===Array||r===Object){let o=Object.keys(t),c=Object.keys(e);if(o.length!==c.length||new Set([...o,...c]).size!=o.length)return!1;for(let l of o)if(!he(t[l],e[l]))return!1;return!0}let n=Object.getPrototypeOf(t);return(vf(t)||n!==Object.prototype&&n!==Array.prototype&&Object.prototype.hasOwnProperty.call(n,"toString"))&&t.toString()===e.toString()}function $a(t,e=Ma){let r=t.map(n=>rn);return hf(t,e).forEach((n,i)=>{n.forEach(o=>r[o]=t[o])}),r.filter(n=>n!==rn)}var Hc=(t,e)=>{if(t===null)return"null";if(t===void 0)return"undefined";let r=t.constructor;switch(r){case RegExp:case Number:case Boolean:case Function:case Symbol:return t.toString();case String:return JSON.stringify(t);case Date:return t.toISOString()}if(vf(t))return r.name+"["+t.toString()+"]";if(e.has(t))throw fy;try{if(e.add(t),ot(t))return"["+t.map(c=>Hc(c,e)).join(",")+"]";if(r===Object)return"{"+Object.keys(t).sort().map(c=>c+":"+Hc(t[c],e)).join(",")+"}";let n=Object.getPrototypeOf(t);if(n!==Object.prototype&&n!==Array.prototype&&Object.prototype.hasOwnProperty.call(n,"toString"))return r.name+"("+JSON.stringify(t.toString())+")";let[i,o]=wS(t);return r.name+Hc(i,e)}finally{e.delete(t)}},CS=t=>Hc(t,new Set);function Yc(t,e){return e=e||Ma,Q(t)?null:e(t).toString()}function py(t,e,r=Nt){if(je(t))return t;let n=new Array,i=new Array;for(let o=0;o<t.length;o++){let c=t[o],l=e(c,o);Q(l)?i.push(c):n.push([l,c])}return n.sort((o,c)=>r(o[0],c[0])),tr(i,n.map(o=>o[1]))}function Xc(t,e,r=Ma){if(t.length<1)return new Map;let n=new Map,i=new Map;for(let o=0;o<t.length;o++){let c=t[o],l=e(c,o),f=Yc(l,r);if(f===null)i.has(null)?i.get(null).push(c):i.set(null,[c]);else{let g=n.has(f)?n.get(f).find(m=>he(m,l)):null;Q(g)?(i.set(l,[c]),n.has(f)?n.get(f).push(l):n.set(f,[l])):i.get(g).push(c)}}return i}var df=5e4;function tr(t,...e){return t instanceof Array?e.reduce((r,n)=>{let i=Math.ceil(n.length/df),o=0;for(;i-- >0;)Array.prototype.push.apply(r,n.slice(o,o+df)),o+=df;return r},t):e.filter(Na).reduce((r,n)=>(Object.assign(r,n),r),t)}function pf(t,e){return Na(t)?t[e]:void 0}function SS(t,e){if(e<1)return t;for(;e--&&t.length===1;)t=t[0];return t}function Oe(t,e,r){let n=0;function i(c,l){let f=c;for(let g=0;g<l.length;g++){let m=l[g];if(/^\d+$/.exec(m)===null&&f instanceof Array){if(g===0&&n>0)break;n+=1;let C=l.slice(g);f=f.reduce((R,A)=>{let B=i(A,C);return B!==void 0&&R.push(B),R},[]);break}else f=pf(f,m);if(f===void 0)break}return f}let o=hy.has(jn(t).toLowerCase())?t:i(t,e.split("."));return o instanceof Array&&r?.unwrapArray?SS(o,n):o}function vo(t,e,r){let n=e.split("."),i=n[0],o=n.slice(1).join("."),c=/^\d+$/.exec(i)!==null,l=n.length>1,f,g;if(t instanceof Array)if(c)f=pf(t,Number(i)),l&&(f=vo(f,o,r)),f=[f];else{f=[];for(let m of t)g=vo(m,e,r),r?.preserveMissing?(g===void 0&&(g=rn),f.push(g)):g!==void 0&&f.push(g)}else{if(g=pf(t,i),l&&(g=vo(g,o,r)),g===void 0)return;f=r?.preserveKeys?$({},t):{},f[i]=g}return f}function Kc(t){if(t instanceof Array)for(let e=t.length-1;e>=0;e--)t[e]===rn?t.splice(e,1):Kc(t[e]);else if(ft(t))for(let e in t)Ut(t,e)&&Kc(t[e])}var dy=/^\d+$/;function yo(t,e,r,n){let i=e.split("."),o=i[0],c=i.slice(1).join(".");if(i.length===1)(ft(t)||ot(t)&&dy.test(o))&&r(t,o);else{n?.buildGraph&&Q(t[o])&&(t[o]={});let l=t[o];if(!l)return;let f=!!(i.length>1&&dy.test(i[1]));l instanceof Array&&n?.descendArray&&!f?l.forEach(g=>yo(g,c,r,n)):yo(l,c,r,n)}}function Zc(t,e,r){yo(t,e,(n,i)=>{n[i]=La(r)?r(n[i]):r},{buildGraph:!0})}function Ba(t,e,r){yo(t,e,(n,i)=>{if(n instanceof Array){if(/^\d+$/.test(i))n.splice(parseInt(i),1);else if(r&&r.descendArray)for(let o of n)ft(o)&&delete o[i]}else ft(n)&&delete n[i]},r)}var RS=/^\$[a-zA-Z0-9_]+$/;function Ue(t){return RS.test(t)}function Jc(t){if(hy.has(jn(t).toLowerCase()))return bo(t)?{$regex:t}:{$eq:t};if(Na(t)){if(!Object.keys(t).some(Ue))return{$eq:t};if(Ut(t,"$regex")){let r=$({},t);return r.$regex=new RegExp(t.$regex,t.$options),delete r.$options,r}}return t}var Ei=(t=>(t.CLONE_ALL="CLONE_ALL",t.CLONE_INPUT="CLONE_INPUT",t.CLONE_OUTPUT="CLONE_OUTPUT",t.CLONE_OFF="CLONE_OFF",t))(Ei||{}),Vt=class t{constructor(e,r,n,i=Date.now()){this._opts=e,this._root=r,this._local=n,this.timestamp=i,this.update(r,n)}static init(e,r,n){return e instanceof t?new t(e._opts,Q(e.root)?r:e.root,Object.assign({},e.local,n)):new t(e,r,n)}update(e,r){return this._root=e,this._local=r&&Object.assign({},r,{variables:Object.assign({},this._local?.variables,r?.variables)}),this}getOptions(){return Object.freeze(gt($({},this._opts),{context:xo.from(this._opts.context)}))}get root(){return this._root}get local(){return this._local}get idKey(){return this._opts.idKey}get collation(){return this._opts?.collation}get processingMode(){return this._opts?.processingMode||"CLONE_OFF"}get useStrictMode(){return this._opts?.useStrictMode}get scriptEnabled(){return this._opts?.scriptEnabled}get useGlobalContext(){return this._opts?.useGlobalContext}get hashFunction(){return this._opts?.hashFunction}get collectionResolver(){return this._opts?.collectionResolver}get jsonSchemaValidator(){return this._opts?.jsonSchemaValidator}get variables(){return this._opts?.variables}get context(){return this._opts?.context}};function on(t){return t instanceof Vt?t.getOptions():Object.freeze(gt($({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,useGlobalContext:!0,processingMode:"CLONE_OFF"},t),{context:t?.context?xo.from(t?.context):xo.init({})}))}var mr=(t=>(t.ACCUMULATOR="accumulator",t.EXPRESSION="expression",t.PIPELINE="pipeline",t.PROJECTION="projection",t.QUERY="query",t.WINDOW="window",t))(mr||{}),xo=class t{constructor(e){this.operators={accumulator:{},expression:{},pipeline:{},projection:{},query:{},window:{}};for(let[r,n]of Object.entries(e))this.addOperators(r,n)}static init(e={}){return new t(e)}static from(e){return new t(e.operators)}addOperators(e,r){for(let[n,i]of Object.entries(r))this.getOperator(e,n)||(this.operators[e][n]=i);return this}addAccumulatorOps(e){return this.addOperators("accumulator",e)}addExpressionOps(e){return this.addOperators("expression",e)}addQueryOps(e){return this.addOperators("query",e)}addPipelineOps(e){return this.addOperators("pipeline",e)}addProjectionOps(e){return this.addOperators("projection",e)}addWindowOps(e){return this.addOperators("window",e)}getOperator(e,r){return e in this.operators&&this.operators[e][r]||null}},Ri=xo.init();function xf(t,e){for(let[r,n]of Object.entries(e)){V(La(n)&&Ue(r),`'${r}' is not a valid operator`);let i=pr(t,r,null);V(!i||n===i,`${r} already exists for '${t}' operators. Cannot change operator function once registered.`)}switch(t){case"accumulator":Ri.addAccumulatorOps(e);break;case"expression":Ri.addExpressionOps(e);break;case"pipeline":Ri.addPipelineOps(e);break;case"projection":Ri.addProjectionOps(e);break;case"query":Ri.addQueryOps(e);break;case"window":Ri.addWindowOps(e);break}}function pr(t,e,r){let{context:n,useGlobalContext:i}=r||{},o=n?n.getOperator(t,e):null;return!o&&i?Ri.getOperator(t,e):o}var my={$$ROOT(t,e,r){return r.root},$$CURRENT(t,e,r){return t},$$REMOVE(t,e,r){},$$NOW(t,e,r){return new Date(r.timestamp)}},bf={$$KEEP(t,e,r){return t},$$PRUNE(t,e,r){},$$DESCEND(t,e,r){if(!Ut(e,"$cond"))return t;let n;for(let[i,o]of Object.entries(t))if(Na(o)){if(o instanceof Array){let c=[];for(let l of o)ft(l)&&(l=_f(l,e,r.update(l))),Q(l)||c.push(l);n=c}else n=_f(o,e,r.update(o));Q(n)?delete t[i]:t[i]=n}return t}};function T(t,e,r,n){let i=Vt.init(n,t);if(r=r||"",Ue(r)){let o=pr("expression",r,n);if(o)return o(t,e,i);let c=pr("accumulator",r,n);if(c)return t instanceof Array||(t=T(t,e,null,i),e=null),V(t instanceof Array,`'${r}' target must be an array.`),c(t,e,i.update(null,i.local));throw new se(`operator '${r}' is not registered`)}if(St(e)&&e.length>0&&e[0]==="$"){if(Ut(bf,e))return e;let o=i.root,c=e.split(".");if(Ut(my,c[0]))o=my[c[0]](t,null,i),e=e.slice(c[0].length+1);else if(c[0].slice(0,2)==="$$"){o=Object.assign({},i.variables,{this:t},i.local?.variables);let l=c[0].slice(2);V(Ut(o,l),`Use of undefined variable: ${l}`),e=e.slice(2)}else e=e.slice(1);return e===""?o:Oe(o,e)}if(ot(e))return e.map(o=>T(t,o,null,i));if(ft(e)){let o={};for(let[c,l]of Object.entries(e))if(o[c]=T(t,l,c,i),["expression","accumulator"].some(f=>!!pr(f,c,n)))return V(Object.keys(e).length===1,"Invalid aggregation expression '"+JSON.stringify(e)+"'"),o[c];return o}return e}function _f(t,e,r){let n=T(t,e,null,r);return Ut(bf,n)?bf[n](t,e,r):n}function ze(t){return t instanceof Fa?t:new Fa(t)}function tl(...t){let e=0;return ze(()=>{for(;e<t.length;){let r=t[e].next();if(!r.done)return r;e++}return{done:!0}})}function ES(t){return!!t&&typeof t=="object"&&t?.next instanceof Function}function OS(t,e){let r=t.slice(e+1);t.splice(e),Array.prototype.push.apply(t,r)}var wf=new Error;function DS(t,e,r){let n=!1,i=-1,o=0;return function(c){try{t:for(;!n;){let l=t();i++;let f=-1,g=e.length,m=!1;for(;++f<g;){let _=e[f];switch(_.action){case 0:l=_.func(l,i);break;case 1:if(!_.func(l,i))continue t;break;case 2:--_.count,_.count||(m=!0);break;case 3:--_.count,_.count||OS(e,f);continue t;default:break t}}if(n=m,c)r[o++]=l;else return{value:l,done:!1}}}catch(l){if(l!==wf)throw l}return n=!0,{done:n}}}var Fa=class{constructor(e){this.iteratees=[],this.yieldedValues=[],this.isDone=!1;let r;if(e instanceof Function&&(e={next:e}),ES(e)){let n=e;r=()=>{let i=n.next();if(i.done)throw wf;return i.value}}else if(e instanceof Array){let n=e,i=n.length,o=0;r=()=>{if(o<i)return n[o++];throw wf}}else if(!(e instanceof Function))throw new se("Lazy must be initialized with an array, generator, or function.");this.getNext=DS(r,this.iteratees,this.yieldedValues)}push(e,r){return typeof r=="function"?this.iteratees.push({action:e,func:r}):typeof r=="number"&&this.iteratees.push({action:e,count:r}),this}next(){return this.getNext()}map(e){return this.push(0,e)}filter(e){return this.push(1,e)}take(e){return e>0?this.push(2,e):this}drop(e){return e>0?this.push(3,e):this}transform(e){let r=this,n;return ze(()=>(n||(n=ze(e(r.value()))),n.next()))}value(){return this.isDone||(this.isDone=this.getNext(!0).done),this.yieldedValues}each(e){for(;;){let r=this.next();if(r.done)break;if(e(r.value)===!1)return!1}return!0}reduce(e,r){let n=this.next();for(r===void 0&&!n.done&&(r=n.value,n=this.next());!n.done;)r=e(r,n.value),n=this.next();return r}size(){return this.reduce((e,r)=>++e,0)}[Symbol.iterator](){return this}};var Br=class{constructor(e,r){this.pipeline=e,this.options=on(r)}stream(e){let r=ze(e),n=this.options.processingMode;(n==Ei.CLONE_ALL||n==Ei.CLONE_INPUT)&&r.map(_o);let i=new Array;if(!je(this.pipeline))for(let o of this.pipeline){let c=Object.keys(o),l=c[0],f=pr(mr.PIPELINE,l,this.options);V(c.length===1&&!!f,`invalid pipeline operator ${l}`),i.push(l),r=f(r,o[l],this.options)}return(n==Ei.CLONE_OUTPUT||n==Ei.CLONE_ALL&&nn([["$group","$unwind"],i]).length)&&r.map(_o),r}run(e){return this.stream(e).value()}};var el=class{constructor(e,r,n,i){this.source=e,this.predicate=r,this.projection=n,this.options=i,this.operators=[],this.result=null,this.buffer=[]}fetch(){return this.result?this.result:(ft(this.projection)&&this.operators.push({$project:this.projection}),this.result=ze(this.source).filter(this.predicate),this.operators.length>0&&(this.result=new Br(this.operators,this.options).stream(this.result)),this.result)}fetchAll(){let e=ze([...this.buffer]);return this.buffer=[],tl(e,this.fetch())}all(){return this.fetchAll().value()}count(){return this.all().length}skip(e){return this.operators.push({$skip:e}),this}limit(e){return this.operators.push({$limit:e}),this}sort(e){return this.operators.push({$sort:e}),this}collation(e){return this.options=gt($({},this.options),{collation:e}),this}next(){if(this.buffer.length>0)return this.buffer.pop();let e=this.fetch().next();if(!e.done)return e.value}hasNext(){if(this.buffer.length>0)return!0;let e=this.fetch().next();return e.done?!1:(this.buffer.push(e.value),!0)}map(e){return this.all().map(e)}forEach(e){this.all().forEach(e)}[Symbol.iterator](){return this.fetchAll()}};var Jt=class{constructor(e,r){this.condition=e,this.options=on(r),this.compiled=[],this.compile()}compile(){V(ft(this.condition),`query criteria must be an object: ${JSON.stringify(this.condition)}`);let e={};for(let[r,n]of Object.entries(this.condition)){if(r==="$where")Object.assign(e,{field:r,expr:n});else if(Lr(["$and","$or","$nor","$expr","$jsonSchema"],r))this.processOperator(r,r,n);else{V(!Ue(r),`unknown top level operator: ${r}`);for(let[i,o]of Object.entries(Jc(n)))this.processOperator(r,i,o)}e.field&&this.processOperator(e.field,e.field,e.expr)}}processOperator(e,r,n){let i=pr(mr.QUERY,r,this.options);if(!i)throw new se(`unknown query operator ${r}`);let o=i(e,n,this.options);this.compiled.push(o)}test(e){for(let r=0,n=this.compiled.length;r<n;r++)if(!this.compiled[r](e))return!1;return!0}find(e,r){return new el(e,n=>this.test(n),r||{},this.options)}remove(e){return e.reduce((r,n)=>(this.test(n)||r.push(n),r),[])}};var wo=1e3*60*60*24,gy={week:wo*7,day:wo,hour:1e3*60*60,minute:1e3*60,second:1e3,millisecond:1};var S1={week:wo*7,day:wo,hour:wo/24,minute:6e4,second:1e3,millisecond:1};var nl=(t,e,r)=>{if(je(e)||!ft(e))return t;let n=Nt,i=r.collation;return ft(i)&&St(i.locale)&&(n=BS(i)),t.transform(o=>{let c=Object.keys(e);for(let l of c.reverse()){let f=Xc(o,m=>Oe(m,l),r.hashFunction),g=Array.from(f.keys()).sort(n);e[l]===-1&&g.reverse(),o=[],g.reduce((m,_)=>tr(m,f.get(_)),o)}return o})},$S={1:"base",2:"accent",3:"variant"};function BS(t){let e={sensitivity:$S[t.strength||3],caseFirst:t.caseFirst==="off"?"false":t.caseFirst||"false",numeric:t.numericOrdering||!1,ignorePunctuation:t.alternate==="shifted"};(t.caseLevel||!1)===!0&&(e.sensitivity==="base"&&(e.sensitivity="case"),e.sensitivity==="accent"&&(e.sensitivity="variant"));let r=new Intl.Collator(t.locale,e);return(n,i)=>{if(!St(n)||!St(i))return Nt(n,i);let o=r.compare(n,i);return o<0?-1:o>0?1:0}}function Rt(t){let e=(r,n,i)=>{let o={unwrapArray:!0},c=Math.max(1,r.split(".").length-1);return l=>{let f=Oe(l,r,o);return t(f,n,gt($({},i),{depth:c}))}};return e.op="query",e}function Te(t){return(e,r,n)=>{let i=T(e,r,null,n);return t(...i)}}function ja(t,e,r){if(he(t,e)||Q(t)&&Q(e))return!0;if(t instanceof Array){let n=he.bind(null,e);return t.some(n)||yf(t,r?.depth).some(n)}return!1}function il(t,e,r){return!ja(t,e,r)}function Sf(t,e,r){return Q(t)?e.some(n=>n===null):nn([$r(t),e],r?.hashFunction).length>0}function ol(t,e,r){return!Sf(t,e,r)}function al(t,e,r){return ul(t,e,(n,i)=>Nt(n,i)<0)}function sl(t,e,r){return ul(t,e,(n,i)=>Nt(n,i)<=0)}function cl(t,e,r){return ul(t,e,(n,i)=>Nt(n,i)>0)}function ll(t,e,r){return ul(t,e,(n,i)=>Nt(n,i)>=0)}function wy(t,e,r){return $r(t).some(n=>e.length===2&&n%e[0]===e[1])}function Cy(t,e,r){let n=$r(t),i=o=>St(o)&&Ee(e.exec(o),r?.useStrictMode);return n.some(i)||yf(n,1).some(i)}function Sy(t,e,r){return(e===!1||e===0)&&t===void 0||(e===!0||e===1)&&t!==void 0}function Ry(t,e,r){if(!ot(t)||!ot(e)||!t.length||!e.length)return!1;let n=!0;for(let i of e){if(!n)break;ft(i)&&Lr(Object.keys(i),"$elemMatch")?n=Rf(t,i.$elemMatch,r):i instanceof RegExp?n=t.some(o=>typeof o=="string"&&i.test(o)):n=t.some(o=>he(i,o))}return n}function Ey(t,e,r){return Array.isArray(t)&&t.length===e}function zS(t){return Ue(t)&&["$and","$or","$nor"].indexOf(t)===-1}function Rf(t,e,r){if(ot(t)&&!je(t)){let n=c=>c,i=e;Object.keys(e).every(zS)&&(i={temp:e},n=c=>({temp:c}));let o=new Jt(i,r);for(let c=0,l=t.length;c<l;c++)if(o.test(n(t[c])))return!0}return!1}var yy=t=>t===null,by=t=>ht(t)&&t>=Gc&&t<=qc&&t.toString().indexOf(".")===-1,_y=t=>ht(t)&&t>=gf&&t<=mf&&t.toString().indexOf(".")===-1,VS={array:ot,bool:Pa,boolean:Pa,date:Un,decimal:ht,double:ht,int:by,long:_y,number:ht,null:yy,object:ft,regex:bo,regexp:bo,string:St,undefined:Q,function:t=>{throw new se("unsupported type key `function`.")},1:ht,2:St,3:ft,4:ot,6:Q,8:Pa,9:Un,10:yy,11:bo,16:by,18:_y,19:ht};function xy(t,e,r){let n=VS[e];return n?n(t):!1}function Oy(t,e,r){return Array.isArray(e)?e.findIndex(n=>xy(t,n,r))>=0:xy(t,e,r)}function ul(t,e,r){return $r(t).some(n=>jn(n)===jn(e)&&r(n,e))}var N$=Te(ol);var Co=(t,e)=>(r,n,i)=>{V(ot(n),`${t}: expression must be an array.`);let o=T(r,n,null,i);return o.some(Q)?null:(V(o.every(ht),`${t}: expression must evalue to array of numbers.`),e(o))};var IB=Co("$bitAnd",t=>t.reduce((e,r)=>e&r,-1));var $B=Co("$bitOr",t=>t.reduce((e,r)=>e|r,0));var jB=Co("$bitXor",t=>t.reduce((e,r)=>e^r,0));var Ef={};Ps(Ef,{$and:()=>HS,$not:()=>WS,$or:()=>KS});var HS=(t,e,r)=>{let n=T(t,e,null,r);return Ee(n,r.useStrictMode)&&n.every(i=>Ee(i,r.useStrictMode))};var WS=(t,e,r)=>{let n=$r(e);if(n.length==0)return!1;if(n.length==1)return!T(t,n[0],null,r);throw"Expression $not takes exactly 1 argument"};var KS=(t,e,r)=>{let n=T(t,e,null,r),i=r.useStrictMode;return Ee(n,i)&&n.some(o=>Ee(o,i))};var Of={};Ps(Of,{$cmp:()=>qS,$eq:()=>GS,$gt:()=>QS,$gte:()=>YS,$lt:()=>XS,$lte:()=>ZS,$ne:()=>JS});var qS=(t,e,r)=>{let n=T(t,e,null,r);return n[0]>n[1]?1:n[0]<n[1]?-1:0};var GS=Te(ja);var QS=Te(cl);var YS=Te(ll);var XS=Te(al);var ZS=Te(sl);var JS=Te(il);var Dy=(t,e)=>{let r={};return t.split("").forEach((n,i)=>r[n]=e*(i+1)),r},XF=gt($($({},Dy("ABCDEFGHIKLM",1)),Dy("NOPQRSTUVWXY",-1)),{Z:0});var Ty={undefined:null,null:null,NaN:NaN,Infinity:new Error,"-Infinity":new Error};function Lt(t,e=Ty){let r=Object.assign({},Ty,e),n=new Set(Object.keys(r));return(i,o,c)=>{let l=T(i,o,null,c);if(n.has(`${l}`)){let f=r[`${l}`];if(f instanceof Error)throw new se(`cannot apply $${t.name} to -inf, value must in (-inf,inf)`);return f}return t(l)}}var oV=Lt(Math.acos,{Infinity:1/0,0:new Error});var cV=Lt(Math.acosh,{Infinity:1/0,0:new Error});var dV=Lt(Math.asin);var pV=Lt(Math.asinh,{Infinity:1/0,"-Infinity":-1/0});var vV=Lt(Math.atan);var CV=Lt(Math.atanh,{1:1/0,"-1":-1/0});var EV=Lt(Math.cos);var AV=Lt(Math.cosh,{"-Infinity":1/0,Infinity:1/0});var nR=Math.PI/180,TV=Lt(t=>t*nR,{Infinity:1/0,"-Infinity":1/0});var iR=180/Math.PI,NV=Lt(t=>t*iR,{Infinity:1/0,"-Infinity":-1/0});var BV=Lt(Math.sin);var UV=Lt(Math.sinh,{"-Infinity":-1/0,Infinity:1/0});var HV=Lt(Math.tan);var Af=(t,e,r)=>{if(je(e))return t;let n=Object.keys(e),i=!1;Py(e,r);let o=r.idKey;if(Lr(n,o)){let l=e[o];(l===0||l===!1)&&(n=n.filter(Qc.bind(null,[o])),i=n.length==0)}else n.push(o);let c=Vt.init(r);return t.map(l=>Df(l,e,c.update(l),n,i))};function Df(t,e,r,n,i){let o={},c=!1,l=!1,f=[];i&&f.push(r.idKey);for(let g of n){let m,_=e[g];if(g!==r.idKey&&Lr([0,!1],_)&&(l=!0),g===r.idKey&&je(_))m=t[g];else if(St(_))m=T(t,_,g,r);else if(!Lr([1,!0],_))if(_ instanceof Array)m=_.map(R=>{let A=T(t,R,null,r);return Q(A)?null:A});else if(ft(_)){let R=_,A=Object.keys(_),B=A.length==1?A[0]:"",W=pr(mr.PROJECTION,B,r);if(W)B==="$slice"?$r(R[B]).every(ht)?(m=W(t,R[B],g,r),c=!0):m=T(t,R,g,r):m=W(t,R[B],g,r);else if(Ue(B))m=T(t,R[B],B,r);else if(Ut(t,g)){Py(R,r);let Z=t[g];Z instanceof Array?m=Z.map(tt=>Df(tt,R,r,A,!1)):(Z=ft(Z)?Z:t,m=Df(Z,R,r,A,!1))}else m=T(t,_,null,r)}else{f.push(g);continue}let C=vo(t,g,{preserveMissing:!0});C!==void 0&&Wc(o,C,{flatten:!0}),Qc([0,1,!1,!0],_)&&(m===void 0?Ba(o,g,{descendArray:!0}):Zc(o,g,m))}if(Kc(o),(c||l||i)&&(o=tr({},t,o),f.length>0))for(let g of f)Ba(o,g,{descendArray:!0});return o}function Py(t,e){let r=[!1,!1];for(let[n,i]of Object.entries(t)){if(n===e?.idKey)return;i===0||i===!1?r[0]=!0:(i===1||i===!0)&&(r[1]=!0),V(!(r[0]&&r[1]),"Projection cannot have a mix of inclusion and exclusion.")}}var kf=(t,e,r)=>{V(ot(e),"Invalid expression: $and expects value to be an Array.");let n=e.map(i=>new Jt(i,r));return i=>n.every(o=>o.test(i))};var Ua=(t,e,r)=>{V(ot(e),"Invalid expression. $or expects value to be an Array");let n=e.map(i=>new Jt(i,r));return i=>n.some(o=>o.test(i))};var If=(t,e,r)=>{V(ot(e),"Invalid expression. $nor expects value to be an array.");let n=Ua("$or",e,r);return i=>!n(i)};var Tf=(t,e,r)=>{let n={};n[t]=Jc(e);let i=new Jt(n,r);return o=>!i.test(o)};var dl=Rt(ja);var fl=Rt(cl);var hl=Rt(ll);var pl=Rt(Sf);var ml=Rt(al);var gl=Rt(sl);var vl=Rt(il);var yl=Rt(ol);function sR(t,e,r){return n=>T(n,e,null,r)}function cR(t,e,r){if(!r?.jsonSchemaValidator)throw new se("Missing option 'jsonSchemaValidator'. Configure to use '$jsonSchema' operator.");let n=r?.jsonSchemaValidator(e);return i=>n(i)}var Mf=Rt(wy);var Pf=Rt(Cy);function lR(t,e,r){V(r.scriptEnabled,"$where operator requires 'scriptEnabled' option to be true");let n=e;return V(La(n),"$where only accepts a Function object"),i=>Ee(n.call(i),r?.useStrictMode)}var uR=Rt(Ry);var Nf=Rt(Rf);var Lf=Rt(Ey);var $f=Rt(Sy);var Bf=Rt(Oy);var Ny=!1;function Ly(t){return Ny||(xf(mr.PIPELINE,{$sort:nl,$project:Af}),xf(mr.QUERY,{$and:kf,$eq:dl,$elemMatch:Nf,$exists:$f,$gt:fl,$gte:hl,$in:pl,$lt:ml,$lte:gl,$ne:vl,$nin:yl,$mod:Mf,$nor:If,$not:Tf,$or:Ua,$regex:Pf,$size:Lf,$type:Bf}),Ny=!0),new Jt(t)}function za(t,e){var r=fe(t.primaryKey);e=At(e);var n=Je(e);if(typeof n.skip!="number"&&(n.skip=0),n.selector?(n.selector=n.selector,Object.entries(n.selector).forEach(([g,m])=>{(typeof m!="object"||m===null)&&(n.selector[g]={$eq:m})})):n.selector={},n.index){var i=ka(n.index);i.includes(r)||i.push(r),n.index=i}if(n.sort){var f=n.sort.find(g=>ev(g)===r);f||(n.sort=n.sort.slice(0),n.sort.push({[r]:"asc"}))}else if(n.index)n.sort=n.index.map(g=>({[g]:"asc"}));else{if(t.indexes){var o=new Set;Object.entries(n.selector).forEach(([g,m])=>{var _=!1;typeof m=="object"&&m!==null?_=!!Object.keys(m).find(C=>Vc.has(C)):_=!0,_&&o.add(g)});var c=-1,l;t.indexes.forEach(g=>{var m=Pr(g)?g:[g],_=m.findIndex(C=>!o.has(C));_>0&&_>c&&(c=_,l=m)}),l&&(n.sort=l.map(g=>({[g]:"asc"})))}n.sort||(n.sort=[{[r]:"asc"}])}return n}function bl(t,e){if(!e.sort)throw I("SNH",{query:e});var r=[];e.sort.forEach(i=>{var o=Object.keys(i)[0],c=Object.values(i)[0];r.push({key:o,direction:c,getValueFn:tv(o)})});var n=(i,o)=>{for(var c=0;c<r.length;++c){var l=r[c],f=l.getValueFn(i),g=l.getValueFn(o);if(f!==g){var m=l.direction==="asc"?Nt(f,g):Nt(g,f);return m}}};return n}function So(t,e){if(!e.sort)throw I("SNH",{query:e});var r=Ly(e.selector),n=i=>r.test(i);return n}function zn(t,e){return U(this,null,function*(){var r=yield t.exec();if(!r)return null;if(Array.isArray(r))return Promise.all(r.map(i=>e(i)));if(r instanceof Map)return Promise.all([...r.values()].map(i=>e(i)));var n=yield e(r);return n})}function dR(t,e){return!e.sort||e.sort.length===0?[t]:e.sort.map(r=>Object.keys(r)[0])}var fR=new WeakMap;function hR(t){return Fe(fR,t,()=>{var e=t.collection,r=za(e.storageInstance.schema,Je(t.mangoQuery)),n=e.schema.primaryPath,i=bl(e.schema.jsonSchema,r),o=(g,m)=>{var _={docA:g,docB:m,rxQuery:t};return i(_.docA,_.docB)},c=So(e.schema.jsonSchema,r),l=g=>{var m={doc:g,rxQuery:t};return c(m.doc)},f={primaryKey:t.collection.schema.primaryPath,skip:r.skip,limit:r.limit,sortFields:dR(n,r),sortComparator:o,queryMatcher:l};return f})}function $y(t,e){if(!t.collection.database.eventReduce)return{runFullQueryAgain:!0};var r=hR(t),n=Dt(t._result).docsData.slice(0),i=Dt(t._result).docsDataMap,o=!1,c=e.map(f=>Rv(f)).filter(qg),l=c.find(f=>{var g={queryParams:r,changeEvent:f,previousResults:n,keyDocumentMap:i},m=sy(g);if(m==="runFullQueryAgain")return!0;if(m!=="doNothing")return o=!0,cy(m,r,f,n,i),!1});return l?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:o,newResults:n}}var pR=function(){function t(){this._map=new Map}var e=t.prototype;return e.getByQuery=function(n){var i=n.toString();return Fe(this._map,i,()=>n)},t}();function Fy(){return new pR}function By(t,e){e.uncached=!0;var r=e.toString();t._map.delete(r)}function mR(t){return t.refCount$.observers.length}var gR=100,vR=30*1e3,yR=(t,e)=>(r,n)=>{if(!(n._map.size<t)){var i=ne()-e,o=[],c=Array.from(n._map.values());for(var l of c)if(!(mR(l)>0)){if(l._lastEnsureEqual===0&&l._creationTime<i){By(n,l);continue}o.push(l)}var f=o.length-t;if(!(f<=0)){var g=o.sort((_,C)=>_._lastEnsureEqual-C._lastEnsureEqual),m=g.slice(0,f);m.forEach(_=>By(n,_))}}},jf=yR(gR,vR),Ff=new WeakSet;function jy(t){Ff.has(t)||(Ff.add(t),av().then(()=>lv(200)).then(()=>{t.destroyed||t.cacheReplacementPolicy(t,t._queryCache),Ff.delete(t)}))}var zy=function(){function t(r,n,i){this.cacheItemByDocId=new Map,this.tasks=new Set,this.registry=typeof FinalizationRegistry=="function"?new FinalizationRegistry(o=>{var c=o.docId,l=this.cacheItemByDocId.get(c);l&&(l[0].delete(o.revisionHeight),l[0].size===0&&this.cacheItemByDocId.delete(c))}):void 0,this.primaryPath=r,this.changes$=n,this.documentCreator=i,n.subscribe(o=>{this.tasks.add(()=>{for(var c=this.cacheItemByDocId,l=0;l<o.length;l++){var f=o[l],g=c.get(f.documentId);if(g){var m=f.documentData;m||(m=f.previousDocumentData),g[1]=m}}}),this.tasks.size<=1&&mo().then(()=>{this.processTasks()})})}var e=t.prototype;return e.processTasks=function(){if(this.tasks.size!==0){var n=Array.from(this.tasks);n.forEach(i=>i()),this.tasks.clear()}},e.getLatestDocumentData=function(n){this.processTasks();var i=Ln(this.cacheItemByDocId,n);return i[1]},e.getLatestDocumentDataIfExists=function(n){this.processTasks();var i=this.cacheItemByDocId.get(n);if(i)return i[1]},Re(t,[{key:"getCachedRxDocuments",get:function(){var r=Uy(this);return Be(this,"getCachedRxDocuments",r)}},{key:"getCachedRxDocument",get:function(){var r=Uy(this);return Be(this,"getCachedRxDocument",n=>r([n])[0])}}])}();function Uy(t){var e=t.primaryPath,r=t.cacheItemByDocId,n=t.registry,i=It.deepFreezeWhenDevMode,o=t.documentCreator,c=l=>{for(var f=new Array(l.length),g=[],m=0;m<l.length;m++){var _=l[m],C=_[e],R=bi(_._rev),A=void 0,B=void 0,W=r.get(C);W?(A=W[0],B=A.get(R)):(A=new Map,W=[A,_],r.set(C,W));var Z=B?B.deref():void 0;Z||(_=i(_),Z=o(_),A.set(R,_R(Z)),n&&g.push(Z)),f[m]=Z}return g.length>0&&n&&(t.tasks.add(()=>{for(var tt=0;tt<g.length;tt++){var X=g[tt];n.register(X,{docId:X.primary,revisionHeight:bi(X.revision)})}}),t.tasks.size<=1&&mo().then(()=>{t.processTasks()})),f};return c}function _l(t,e){var r=t.getCachedRxDocuments;return r(e)}var bR=typeof WeakRef=="function",_R=bR?xR:wR;function xR(t){return new WeakRef(t)}function wR(t){return{deref(){return t}}}var Uf=function(){function t(r,n,i){this.time=ne(),this.query=r,this.count=i,this.documents=_l(this.query.collection._docCache,n)}var e=t.prototype;return e.getValue=function(n){var i=this.query.op;if(i==="count")return this.count;if(i==="findOne"){var o=this.documents.length===0?null:this.documents[0];if(!o&&n)throw I("QU10",{collection:this.query.collection.name,query:this.query.mangoQuery,op:i});return o}else return i==="findByIds"?this.docsMap:this.documents.slice(0)},Re(t,[{key:"docsData",get:function(){return Be(this,"docsData",this.documents.map(r=>r._data))}},{key:"docsDataMap",get:function(){var r=new Map;return this.documents.forEach(n=>{r.set(n.primary,n._data)}),Be(this,"docsDataMap",r)}},{key:"docsMap",get:function(){for(var r=new Map,n=this.documents,i=0;i<n.length;i++){var o=n[i];r.set(o.primary,o)}return Be(this,"docsMap",r)}}])}();var CR=0,SR=function(){return++CR},zf=function(){function t(r,n,i,o={}){this.id=SR(),this._execOverDatabaseCount=0,this._creationTime=ne(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new ve(null),this._result=null,this._latestChangeEvent=-1,this._lastExecStart=0,this._lastExecEnd=0,this._ensureEqualQueue=Nr,this.op=r,this.mangoQuery=n,this.collection=i,this.other=o,n||(this.mangoQuery=Va()),this.isFindOneByIdQuery=DR(this.collection.schema.primaryPath,n)}var e=t.prototype;return e._setResultData=function(n){if(typeof n>"u")throw I("QU18",{database:this.collection.database.name,collection:this.collection.name});if(typeof n=="number"){this._result=new Uf(this,[],n);return}else n instanceof Map&&(n=Array.from(n.values()));var i=new Uf(this,n,n.length);this._result=i},e._execOverDatabase=function(){return U(this,null,function*(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this._lastExecStart=ne(),this.op==="count"){var n=this.getPreparedQuery(),i=yield this.collection.storageInstance.count(n);if(i.mode==="slow"&&!this.collection.database.allowSlowCount)throw I("QU14",{collection:this.collection,queryObj:this.mangoQuery});return i.count}if(this.op==="findByIds"){var o=Dt(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,c=new Map,l=[];if(o.forEach(m=>{var _=this.collection._docCache.getLatestDocumentDataIfExists(m);if(_){if(!_._deleted){var C=this.collection._docCache.getCachedRxDocument(_);c.set(m,C)}}else l.push(m)}),l.length>0){var f=yield this.collection.storageInstance.findDocumentsById(l,!1);f.forEach(m=>{var _=this.collection._docCache.getCachedRxDocument(m);c.set(_.primary,_)})}return c}var g=OR(this);return g.then(m=>(this._lastExecEnd=ne(),m))})},e.exec=function(n){return U(this,null,function*(){if(n&&this.op!=="findOne")throw I("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});yield Vy(this);var i=Dt(this._result);return i.getValue(n)})},e.toString=function(){var n=fo({op:this.op,query:this.mangoQuery,other:this.other},!0),i=JSON.stringify(n);return this.toString=()=>i,i},e.getPreparedQuery=function(){var n={rxQuery:this,mangoQuery:za(this.collection.schema.jsonSchema,this.mangoQuery)};n.mangoQuery.selector._deleted={$eq:!1},n.mangoQuery.index&&n.mangoQuery.index.unshift("_deleted"),Zt("prePrepareQuery",n);var i=Ha(this.collection.schema.jsonSchema,n.mangoQuery);return this.getPreparedQuery=()=>i,i},e.doesDocumentDataMatch=function(n){return n._deleted?!1:this.queryMatcher(n)},e.remove=function(){return this.exec().then(n=>Array.isArray(n)?Promise.all(n.map(i=>i.remove())):n.remove())},e.incrementalRemove=function(){return zn(this.asRxQuery,n=>n.incrementalRemove())},e.update=function(n){throw Ot("update")},e.patch=function(n){return zn(this.asRxQuery,i=>i.patch(n))},e.incrementalPatch=function(n){return zn(this.asRxQuery,i=>i.incrementalPatch(n))},e.modify=function(n){return zn(this.asRxQuery,i=>i.modify(n))},e.incrementalModify=function(n){return zn(this.asRxQuery,i=>i.incrementalModify(n))},e.where=function(n){throw Ot("query-builder")},e.sort=function(n){throw Ot("query-builder")},e.skip=function(n){throw Ot("query-builder")},e.limit=function(n){throw Ot("query-builder")},Re(t,[{key:"$",get:function(){if(!this._$){var r=this.collection.$.pipe(bt(n=>!n.isLocal),or(null),Wt(()=>Vy(this)),ut(()=>this._result),ea(Ic),zi((n,i)=>!!(n&&n.time===Dt(i).time)),bt(n=>!!n),ut(n=>Dt(n).getValue()));this._$=Ls(r,this.refCount$.pipe(bt(()=>!1)))}return this._$}},{key:"$$",get:function(){var r=this.collection.database.getReactivityFactory();return r.fromObservable(this.$,void 0,this.collection.database)}},{key:"queryMatcher",get:function(){var r=this.collection.schema.jsonSchema,n=za(this.collection.schema.jsonSchema,this.mangoQuery);return Be(this,"queryMatcher",So(r,n))}},{key:"asRxQuery",get:function(){return this}}])}();function Va(){return{selector:{}}}function RR(t){return t.collection._queryCache.getByQuery(t)}function Ro(t,e,r,n){Zt("preCreateRxQuery",{op:t,queryObj:e,collection:r,other:n});var i=new zf(t,e,r,n);return i=RR(i),jy(r),i}function Hy(t){var e=t.asRxQuery.collection._changeEventBuffer.getCounter();return t._latestChangeEvent>=e}function Vy(t){return U(this,null,function*(){return t.collection.awaitBeforeReads.size>0&&(yield Promise.all(Array.from(t.collection.awaitBeforeReads).map(e=>e()))),t.collection.database.destroyed||Hy(t)?!1:(t._ensureEqualQueue=t._ensureEqualQueue.then(()=>ER(t)),t._ensureEqualQueue)})}function ER(t){if(t._lastEnsureEqual=ne(),t.collection.database.destroyed||Hy(t))return Nr;var e=!1,r=!1;if(t._latestChangeEvent===-1&&(r=!0),!r){var n=t.asRxQuery.collection._changeEventBuffer.getFrom(t._latestChangeEvent+1);if(n===null)r=!0;else{t._latestChangeEvent=t.asRxQuery.collection._changeEventBuffer.getCounter();var i=t.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(n);if(t.op==="count"){var o=Dt(t._result).count,c=o;i.forEach(f=>{var g=f.previousDocumentData&&t.doesDocumentDataMatch(f.previousDocumentData),m=t.doesDocumentDataMatch(f.documentData);!g&&m&&c++,g&&!m&&c--}),c!==o&&(e=!0,t._setResultData(c))}else{var l=$y(t,i);l.runFullQueryAgain?r=!0:l.changed&&(e=!0,t._setResultData(l.newResults))}}}return r?t._execOverDatabase().then(f=>(t._latestChangeEvent=t.collection._changeEventBuffer.getCounter(),typeof f=="number"?((!t._result||f!==t._result.count)&&(e=!0,t._setResultData(f)),e):((!t._result||!nv(t.collection.schema.primaryPath,f,t._result.docsData))&&(e=!0,t._setResultData(f)),e))):Promise.resolve(e)}function Ha(t,e){if(!e.sort)throw I("SNH",{query:e});var r=ly(t,e);return{query:e,queryPlan:r}}function OR(t){return U(this,null,function*(){var e=[],r=t.collection;if(t.isFindOneByIdQuery)if(Array.isArray(t.isFindOneByIdQuery)){var n=t.isFindOneByIdQuery;if(n=n.filter(m=>{var _=t.collection._docCache.getLatestDocumentDataIfExists(m);return _?(_._deleted||e.push(_),!1):!0}),n.length>0){var i=yield r.storageInstance.findDocumentsById(n,!1);fr(e,i)}}else{var o=t.isFindOneByIdQuery,c=t.collection._docCache.getLatestDocumentDataIfExists(o);if(!c){var l=yield r.storageInstance.findDocumentsById([o],!1);l[0]&&(c=l[0])}c&&!c._deleted&&e.push(c)}else{var f=t.getPreparedQuery(),g=yield r.storageInstance.query(f);e=g.documents}return e})}function DR(t,e){if(!e.skip&&e.selector&&Object.keys(e.selector).length===1&&e.selector[t]){var r=e.selector[t];if(typeof r=="string")return r;if(Object.keys(r).length===1&&typeof r.$eq=="string"||Object.keys(r).length===1&&Array.isArray(r.$eq)&&!r.$eq.find(n=>typeof n!="string"))return r.$eq}return!1}var Wy="_rxdb_internal";function Hf(t,e){return U(this,null,function*(){var r=yield t.findDocumentsById([e],!1),n=r[0];if(n)return n})}function Eo(t,e,r,n){if(n)throw n.status===409?I("CONFLICT",{collection:t.name,id:e,writeError:n,data:r}):n.status===422?I("VD2",{collection:t.name,id:e,writeError:n,data:r}):n}function Ky(t,e,r,n,i,o,c){for(var l=!!t.schema.attachments,f=[],g=[],m=[],_=xi(10),C={id:_,events:[],checkpoint:null,context:i,startTime:ne(),endTime:0},R=C.events,A=[],B=[],W=[],Z=r.size>0,tt,X=n.length,Bt=function(){var Mt=n[yt],vt=Mt.document,_t=Mt.previous,pe=vt[e],gr=vt._deleted,No=_t&&_t._deleted,ln=void 0;Z&&(ln=r.get(pe));var Ur;if(ln){var Yl=ln._rev;if(!_t||_t&&Yl!==_t._rev){var Gn={isError:!0,status:409,documentId:pe,writeRow:Mt,documentInDb:ln};return m.push(Gn),1}var He=l?Vf(Mt):Mt;l&&(gr?_t&&Object.keys(_t._attachments).forEach(we=>{B.push({documentId:pe,attachmentId:we,digest:Dt(_t)._attachments[we].digest})}):(Object.entries(vt._attachments).find(([we,te])=>{var rr=_t?_t._attachments[we]:void 0;return!rr&&!te.data&&(Ur={documentId:pe,documentInDb:ln,isError:!0,status:510,writeRow:Mt,attachmentId:we}),!0}),Ur||Object.entries(vt._attachments).forEach(([we,te])=>{var rr=_t?_t._attachments[we]:void 0;if(!rr)A.push({documentId:pe,attachmentId:we,attachmentData:te,digest:te.digest});else{var nr=He.document._attachments[we].digest;te.data&&rr.digest!==nr&&W.push({documentId:pe,attachmentId:we,attachmentData:te,digest:te.digest})}}))),Ur?m.push(Ur):(l?(g.push(Vf(He)),c&&c(vt)):(g.push(He),c&&c(vt)),tt=He);var un=null,Lo=null,dn=null;if(No&&!gr)dn="INSERT",un=l?Fr(vt):vt;else if(_t&&!No&&!gr)dn="UPDATE",un=l?Fr(vt):vt,Lo=_t;else if(gr)dn="DELETE",un=Dt(vt),Lo=_t;else throw I("SNH",{args:{writeRow:Mt}});var $o={documentId:pe,documentData:un,previousDocumentData:Lo,operation:dn};R.push($o)}else{var os=!!gr;if(l&&Object.entries(vt._attachments).forEach(([we,te])=>{te.data?A.push({documentId:pe,attachmentId:we,attachmentData:te,digest:te.digest}):(Ur={documentId:pe,isError:!0,status:510,writeRow:Mt,attachmentId:we},m.push(Ur))}),Ur||(l?(f.push(Vf(Mt)),o&&o(vt)):(f.push(Mt),o&&o(vt)),tt=Mt),!os){var as={documentId:pe,operation:"INSERT",documentData:l?Fr(vt):vt,previousDocumentData:l&&_t?Fr(_t):_t};R.push(as)}}},yt=0;yt<X;yt++)Bt();return{bulkInsertDocs:f,bulkUpdateDocs:g,newestRow:tt,errors:m,eventBulk:C,attachmentsAdd:A,attachmentsRemove:B,attachmentsUpdate:W}}function Vf(t){return{previous:t.previous,document:Fr(t.document)}}function AR(t){return atob(t).length}function kR(t){var e=t.data;if(!e)return t;var r={length:AR(e),digest:t.digest,type:t.type};return r}function Fr(t){if(!t._attachments||Object.keys(t._attachments).length===0)return t;var e=At(t);return e._attachments={},Object.entries(t._attachments).forEach(([r,n])=>{e._attachments[r]=kR(n)}),e}function Oi(t){return Object.assign({},t,{_meta:At(t._meta)})}var qy=new WeakMap;function xl(t,e,r){It.deepFreezeWhenDevMode(r);var n=fe(e.schema.primaryKey),i={originalStorageInstance:e,schema:e.schema,internals:e.internals,collectionName:e.collectionName,databaseName:e.databaseName,options:e.options,bulkWrite(o,c){for(var l=t.token,f=new Array(o.length),g=ne(),m=0;m<o.length;m++){var _=o[m],C=Oi(_.document);C._meta.lwt=g;var R=_.previous;C._rev=uo(l,R),f[m]={document:C,previous:R}}return Zt("preStorageWrite",{storageInstance:this.originalStorageInstance,rows:f}),t.lockedRun(()=>e.bulkWrite(f,c)).then(A=>{var B={error:[]},W=er(n,f,A);qy.set(B,W);var Z=A.error.length===0?[]:A.error.filter(X=>X.status===409&&!X.writeRow.previous&&!X.writeRow.document._deleted&&Dt(X.documentInDb)._deleted?!0:(B.error.push(X),!1));if(Z.length>0){var tt=Z.map(X=>({previous:X.documentInDb,document:Object.assign({},X.writeRow.document,{_rev:uo(t.token,X.documentInDb)})}));return t.lockedRun(()=>e.bulkWrite(tt,c)).then(X=>{fr(B.error,X.error);var Bt=er(n,tt,X);return fr(W,Bt),B})}return B})},query(o){return t.lockedRun(()=>e.query(o))},count(o){return t.lockedRun(()=>e.count(o))},findDocumentsById(o,c){return t.lockedRun(()=>e.findDocumentsById(o,c))},getAttachmentData(o,c,l){return t.lockedRun(()=>e.getAttachmentData(o,c,l))},getChangedDocumentsSince:e.getChangedDocumentsSince?(o,c)=>t.lockedRun(()=>e.getChangedDocumentsSince(Dt(o),c)):void 0,cleanup(o){return t.lockedRun(()=>e.cleanup(o))},remove(){return t.storageInstances.delete(i),t.lockedRun(()=>e.remove())},close(){return t.storageInstances.delete(i),t.lockedRun(()=>e.close())},changeStream(){return e.changeStream()},conflictResultionTasks(){return e.conflictResultionTasks()},resolveConflictResultionTask(o){if(o.output.isEqual)return e.resolveConflictResultionTask(o);var c=Object.assign({},o.output.documentData,{_meta:Tn(),_rev:en(),_attachments:{}}),l=At(c);return delete l._meta,delete l._rev,delete l._attachments,e.resolveConflictResultionTask({id:o.id,output:{isEqual:!1,documentData:l}})}};return t.storageInstances.add(i),i}function Gy(t){if(t.schema.keyCompression)throw I("UT5",{args:{params:t}});if(IR(t.schema))throw I("UT6",{args:{params:t}});if(t.schema.attachments&&t.schema.attachments.compression)throw I("UT7",{args:{params:t}})}function IR(t){return!!(t.encrypted&&t.encrypted.length>0||t.attachments&&t.attachments.encrypted)}function er(t,e,r){var n=qy.get(r);if(n)return n;var i=[];if(r.error.length>0){for(var o=new Set,c=0;c<r.error.length;c++){var l=r.error[c];o.add(l.documentId)}for(var f=0;f<e.length;f++){var g=e[f].document;o.has(g[t])||i.push(Fr(g))}}else{i.length=e.length-r.error.length;for(var m=0;m<e.length;m++){var _=e[m].document;i[m]=Fr(_)}}return i}var Qy=function(){function t(r,n,i,o){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=r,this.primaryPath=n,this.preWrite=i,this.postWrite=o}var e=t.prototype;return e.addWrite=function(n,i){var o=n[this.primaryPath],c=Fe(this.queueByDocId,o,()=>[]),l=new Promise((f,g)=>{var m={lastKnownDocumentState:n,modifier:i,resolve:f,reject:g};Dt(c).push(m),this.triggerRun()});return l},e.triggerRun=function(){return U(this,null,function*(){if(!(this.isRunning===!0||this.queueByDocId.size===0)){this.isRunning=!0;var n=[],i=this.queueByDocId;this.queueByDocId=new Map,yield Promise.all(Array.from(i.entries()).map(f=>U(this,[f],function*([c,l]){var g=TR(l.map(C=>C.lastKnownDocumentState)),m=g;for(var _ of l)try{m=yield _.modifier(Je(m))}catch(C){_.reject(C),_.reject=()=>{},_.resolve=()=>{}}try{yield this.preWrite(m,g)}catch(C){l.forEach(R=>R.reject(C));return}n.push({previous:g,document:m})})));var o=n.length>0?yield this.storageInstance.bulkWrite(n,"incremental-write"):{error:[]};return yield Promise.all(er(this.primaryPath,n,o).map(c=>{var l=c[this.primaryPath];this.postWrite(c);var f=Ln(i,l);f.forEach(g=>g.resolve(c))})),o.error.forEach(c=>{var l=c.documentId,f=Ln(i,l),g=Pc(c);if(g){var m=Fe(this.queueByDocId,l,()=>[]);f.reverse().forEach(C=>{C.lastKnownDocumentState=Dt(g.documentInDb),Dt(m).unshift(C)})}else{var _=bv(c);f.forEach(C=>C.reject(_))}}),this.isRunning=!1,this.triggerRun()}})},t}();function Wf(t){var e=r=>U(null,null,function*(){var n=rv(r);n._deleted=r._deleted;var i=yield t(n),o=Object.assign({},i,{_meta:r._meta,_attachments:r._attachments,_rev:r._rev,_deleted:typeof i._deleted<"u"?i._deleted:r._deleted});return typeof o._deleted>"u"&&(o._deleted=!1),o});return e}function TR(t){var e=t[0],r=bi(e._rev);return t.forEach(n=>{var i=bi(n._rev);i>r&&(e=n,r=i)}),e}var Vn={get primaryPath(){var t=this;if(t.isInstanceOfRxDocument)return t.collection.schema.primaryPath},get primary(){var t=this;if(t.isInstanceOfRxDocument)return t._data[t.primaryPath]},get revision(){var t=this;if(t.isInstanceOfRxDocument)return t._data._rev},get deleted$(){var t=this;if(t.isInstanceOfRxDocument)return t.$.pipe(ut(e=>e._data._deleted))},get deleted$$(){var t=this,e=t.collection.database.getReactivityFactory();return e.fromObservable(t.deleted$,t.getLatest().deleted,t.collection.database)},get deleted(){var t=this;if(t.isInstanceOfRxDocument)return t._data._deleted},getLatest(){var t=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(t)},get $(){var t=this;return t.collection.$.pipe(bt(e=>!e.isLocal),bt(e=>e.documentId===this.primary),ut(e=>Sv(e)),or(t.collection._docCache.getLatestDocumentData(this.primary)),zi((e,r)=>e._rev===r._rev),ut(e=>this.collection._docCache.getCachedRxDocument(e)),ea(Ic))},get $$(){var t=this,e=t.collection.database.getReactivityFactory();return e.fromObservable(t.$,t.getLatest()._data,t.collection.database)},get$(t){if(It.isDevMode()){if(t.includes(".item."))throw I("DOC1",{path:t});if(t===this.primaryPath)throw I("DOC2");if(this.collection.schema.finalFields.includes(t))throw I("DOC3",{path:t});var e=Ie(this.collection.schema.jsonSchema,t);if(!e)throw I("DOC4",{path:t})}return this.$.pipe(ut(r=>ke(r,t)),zi())},get$$(t){var e=this.get$(t),r=this.collection.database.getReactivityFactory();return r.fromObservable(e,this.getLatest().get(t),this.collection.database)},populate(t){var e=Ie(this.collection.schema.jsonSchema,t),r=this.get(t);if(!r)return cv;if(!e)throw I("DOC5",{path:t});if(!e.ref)throw I("DOC6",{path:t,schemaObj:e});var n=this.collection.database.collections[e.ref];if(!n)throw I("DOC7",{ref:e.ref,path:t,schemaObj:e});return e.type==="array"?n.findByIds(r).exec().then(i=>{var o=i.values();return Array.from(o)}):n.findOne(r).exec()},get(t){return Xy(this,t)},toJSON(t=!1){if(t)return It.deepFreezeWhenDevMode(this._data);var e=At(this._data);return delete e._rev,delete e._attachments,delete e._deleted,delete e._meta,It.deepFreezeWhenDevMode(e)},toMutableJSON(t=!1){return Je(this.toJSON(t))},update(t){throw Ot("update")},incrementalUpdate(t){throw Ot("update")},updateCRDT(t){throw Ot("crdt")},putAttachment(){throw Ot("attachments")},getAttachment(){throw Ot("attachments")},allAttachments(){throw Ot("attachments")},get allAttachments$(){throw Ot("attachments")},modify(t,e){return U(this,null,function*(){var r=this._data,n=yield Wf(t)(r);return this._saveData(n,r)})},incrementalModify(t,e){return this.collection.incrementalWriteQueue.addWrite(this._data,Wf(t)).then(r=>this.collection._docCache.getCachedRxDocument(r))},patch(t){var e=this._data,r=Je(e);return Object.entries(t).forEach(([n,i])=>{r[n]=i}),this._saveData(r,e)},incrementalPatch(t){return this.incrementalModify(e=>(Object.entries(t).forEach(([r,n])=>{e[r]=n}),e))},_saveData(t,e){return U(this,null,function*(){if(t=At(t),this._data._deleted)throw I("DOC11",{id:this.primary,document:this});yield Kf(this.collection,t,e);var r=[{previous:e,document:t}],n=yield this.collection.storageInstance.bulkWrite(r,"rx-document-save-data"),i=n.error[0];return Eo(this.collection,this.primary,t,i),yield this.collection._runHooks("post","save",t,this),this.collection._docCache.getCachedRxDocument(er(this.collection.schema.primaryPath,r,n)[0])})},remove(){var t=this.collection;if(this.deleted)return Promise.reject(I("DOC13",{document:this,id:this.primary}));var e=At(this._data),r;return t._runHooks("pre","remove",e,this).then(()=>U(this,null,function*(){e._deleted=!0;var n=[{previous:this._data,document:e}],i=yield t.storageInstance.bulkWrite(n,"rx-document-remove"),o=i.error[0];return Eo(t,this.primary,e,o),er(this.collection.schema.primaryPath,n,i)[0]})).then(n=>(r=n,this.collection._runHooks("post","remove",e,this))).then(()=>this.collection._docCache.getCachedRxDocument(r))},incrementalRemove(){return this.incrementalModify(t=>U(this,null,function*(){return yield this.collection._runHooks("pre","remove",t,this),t._deleted=!0,t})).then(t=>U(this,null,function*(){return yield this.collection._runHooks("post","remove",t._data,t),t}))},destroy(){throw I("DOC14")}};function wl(t=Vn){var e=function(n,i){this.collection=n,this._data=i,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return e.prototype=t,e}function Yy(t,e,r){var n=new t(e,r);return Zt("createRxDocument",n),n}function Kf(t,e,r){return e._meta=Object.assign({},r._meta,e._meta),It.isDevMode()&&t.schema.validateChange(r,e),t._runHooks("pre","save",e,r)}function Xy(t,e){return Fe(t._propertyCache,e,()=>{var r=ke(t._data,e);if(typeof r!="object"||r===null||Array.isArray(r))return It.deepFreezeWhenDevMode(r);var n=new Proxy(At(r),{get(i,o){if(typeof o!="string")return i[o];var c=o.charAt(o.length-1);if(c==="$")if(o.endsWith("$$")){var l=o.slice(0,-2);return t.get$$(hr(e+"."+l))}else{var f=o.slice(0,-1);return t.get$(hr(e+"."+f))}else if(c==="_"){var g=o.slice(0,-1);return t.populate(hr(e+"."+g))}else{var m=i[o];return typeof m=="number"||typeof m=="string"||typeof m=="boolean"?m:Xy(t,hr(e+"."+o))}}});return n})}var Oo="collection",qf="storage-token",MR="rx-migration-status",PR="RxInternalDocument",Cl=Lc({version:0,title:PR,primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[Oo,qf,MR,"OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function Sl(t,e){return Ta(Cl,{key:t,context:e})}function Rl(t){return U(this,null,function*(){var e=Ha(t.schema,{selector:{context:Oo,_deleted:{$eq:!1}},sort:[{id:"asc"}],skip:0}),r=yield t.query(e),n=r.documents;return n})}var Zy="storageToken",NR=Sl(Zy,qf);function Jy(t){return U(this,null,function*(){var e=xi(10),r=t.password?yield t.hashFunction(JSON.stringify(t.password)):void 0,n={id:NR,context:qf,key:Zy,data:{rxdbVersion:t.rxdbVersion,token:e,instanceToken:t.token,passwordHash:r},_deleted:!1,_meta:Tn(),_rev:en(),_attachments:{}},i=[{document:n}],o=yield t.internalStore.bulkWrite(i,"internal-add-storage-token");if(!o.error[0])return er("id",i,o)[0];var c=Dt(o.error[0]);if(c.isError&&Pc(c)){var l=c;if(!LR(l.documentInDb.data.rxdbVersion,t.rxdbVersion))throw I("DM5",{args:{database:t.name,databaseStateVersion:l.documentInDb.data.rxdbVersion,codeVersion:t.rxdbVersion}});if(r&&r!==l.documentInDb.data.passwordHash)throw I("DB1",{passwordHash:r,existingPasswordHash:l.documentInDb.data.passwordHash});var f=l.documentInDb;return Dt(f)}throw c})}function LR(t,e){if(!t||e.includes("beta")&&e!==t)return!1;var r=t.split(".")[0],n=e.split(".")[0];return r===n}function Gf(t,e){return t+"-"+e.version}function Wa(t,e){return e=At(e),e=xv(t,e),typeof t.jsonSchema.primaryKey!="string"&&(e=Nc(t.primaryPath,t.jsonSchema,e)),e._meta=Tn(),Object.prototype.hasOwnProperty.call(e,"_deleted")||(e._deleted=!1),Object.prototype.hasOwnProperty.call(e,"_attachments")||(e._attachments={}),Object.prototype.hasOwnProperty.call(e,"_rev")||(e._rev=en()),e}function tb(t,e){return U(this,null,function*(){e.multiInstance=t.multiInstance;var r=yield t.storage.createStorageInstance(e);return r})}function El(t,e,r,n,i,o,c){return U(this,null,function*(){var l=yield Rl(e),f=l.filter(C=>C.data.name===i),g=[];f.forEach(C=>{g.push({collectionName:C.data.name,schema:C.data.schema,isCollection:!0}),C.data.connectedStorages.forEach(R=>g.push({collectionName:R.collectionName,isCollection:!1,schema:R.schema}))});var m=new Set;if(g=g.filter(C=>{var R=C.collectionName+"||"+C.schema.version;return m.has(R)?!1:(m.add(R),!0)}),yield Promise.all(g.map(C=>U(null,null,function*(){var R=yield t.createStorageInstance({collectionName:C.collectionName,databaseInstanceToken:r,databaseName:n,multiInstance:!1,options:{},schema:C.schema,password:o,devMode:It.isDevMode()});yield R.remove(),C.isCollection&&(yield Fn("postRemoveRxCollection",{storage:t,databaseName:n,collectionName:i}))}))),c){var _=f.map(C=>{var R=Oi(C);return R._deleted=!0,R._meta.lwt=ne(),R._rev=uo(r,C),{previous:C,document:R}});yield e.bulkWrite(_,"rx-database-remove-collection-all")}})}function Ve(t){if(t.destroyed)throw I("COL21",{collection:t.name,version:t.schema.version})}var $R=function(){function t(r){this.subs=[],this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.limit=100,this.tasks=new Set,this.collection=r,this.subs.push(this.collection.database.eventBulks$.pipe(bt(n=>n.collectionName===this.collection.name),bt(n=>{var i=n.events[0];return!i.isLocal})).subscribe(n=>{this.tasks.add(()=>this._handleChangeEvents(n.events)),this.tasks.size<=1&&mo().then(()=>{this.processTasks()})}))}var e=t.prototype;return e.processTasks=function(){if(this.tasks.size!==0){var n=Array.from(this.tasks);n.forEach(i=>i()),this.tasks.clear()}},e._handleChangeEvents=function(n){var i=this.counter;this.counter=this.counter+n.length,n.length>this.limit?this.buffer=n.slice(n.length*-1):(fr(this.buffer,n),this.buffer=this.buffer.slice(this.limit*-1));for(var o=i+1,c=this.eventCounterMap,l=0;l<n.length;l++){var f=n[l];c.set(f,o+l)}},e.getCounter=function(){return this.processTasks(),this.counter},e.getBuffer=function(){return this.processTasks(),this.buffer},e.getArrayIndexByPointer=function(n){this.processTasks();var i=this.buffer[0],o=this.eventCounterMap.get(i);if(n<o)return null;var c=n-o;return c},e.getFrom=function(n){this.processTasks();var i=[],o=this.getArrayIndexByPointer(n);if(o===null)return null;for(;;){var c=this.buffer[o];if(o++,c)i.push(c);else return i}},e.runFrom=function(n,i){this.processTasks();var o=this.getFrom(n);if(o===null)throw new Error("out of bounds");o.forEach(c=>i(c))},e.reduceByLastOfDoc=function(n){return this.processTasks(),n.slice(0);var i={};return n.forEach(o=>{i[o.documentId]=o}),Object.values(i)},e.destroy=function(){this.tasks.clear(),this.subs.forEach(n=>n.unsubscribe())},t}();function eb(t){return new $R(t)}var BR=new WeakMap;function FR(t){var e=t.schema.getDocumentPrototype(),r=jR(t),n=Vn,i={};return[e,r,n].forEach(o=>{var c=Object.getOwnPropertyNames(o);c.forEach(l=>{var f=Object.getOwnPropertyDescriptor(o,l),g=!0;(l.startsWith("_")||l.endsWith("_")||l.startsWith("$")||l.endsWith("$"))&&(g=!1),typeof f.value=="function"?Object.defineProperty(i,l,{get(){return f.value.bind(this)},enumerable:g,configurable:!1}):(f.enumerable=g,f.configurable=!1,f.writable&&(f.writable=!1),Object.defineProperty(i,l,f))})}),i}function rb(t){return Fe(BR,t,()=>wl(FR(t)))}function nb(t,e,r){var n=Yy(e,t,It.deepFreezeWhenDevMode(r));return t._runHooksSync("post","create",r,n),Zt("postCreateRxDocument",n),n}function jR(t){var e={};return Object.entries(t.methods).forEach(([r,n])=>{e[r]=n}),e}var Qf=function(t,e){var r=Fr(t.newDocumentState),n=Fr(t.realMasterState);return Nn(r,n)?Promise.resolve({isEqual:!0}):Promise.resolve({isEqual:!1,documentData:t.realMasterState})};function Ol(t){var e=t.collection.schema.jsonSchema;if(!e.attachments)throw I("AT1",{link:"https://pubkey.github.io/rxdb/rx-attachment.html"})}function ib(t){Object.entries(t.doc.collection.attachments).forEach(([e,r])=>{Object.defineProperty(t,e,{get:()=>r.bind(t)})})}var UR=function(){function t({doc:r,id:n,type:i,length:o,digest:c}){this.doc=r,this.id=n,this.type=i,this.length=o,this.digest=c,ib(this)}var e=t.prototype;return e.remove=function(){return this.doc.collection.incrementalWriteQueue.addWrite(this.doc._data,n=>(delete n._attachments[this.id],n)).then(()=>{})},e.getData=function(){return U(this,null,function*(){var n=yield this.doc.collection.storageInstance.getAttachmentData(this.doc.primary,this.id,this.digest),i=yield Yg(n,this.type);return i})},e.getStringData=function(){return U(this,null,function*(){var n=yield this.getData(),i=yield Xg(n);return i})},t}();function Dl(t,e,r){return new UR({doc:r,id:t,type:e.type,length:e.length,digest:e.digest})}function zR(t){return U(this,null,function*(){Ol(this);var e=Jg(t.data),r=yield Zg(t.data),n=yield this.collection.database.hashFunction(r),i=t.id,o=t.type,c=r;return this.collection.incrementalWriteQueue.addWrite(this._data,l=>(l=At(l),l._attachments=At(l._attachments),l._attachments[i]={length:e,type:o,data:c,digest:n},l)).then(l=>{var f=this.collection._docCache.getCachedRxDocument(l),g=l._attachments[i],m=Dl(i,g,f);return m})})}function VR(t){Ol(this);var e=this._data;if(!e._attachments||!e._attachments[t])return null;var r=e._attachments[t],n=Dl(t,r,this);return n}function HR(){Ol(this);var t=this._data;return t._attachments?Object.keys(t._attachments).map(e=>Dl(e,t._attachments[e],this)):[]}function WR(t){return U(this,null,function*(){var e=t.docData._attachments;if(e){var r={};yield Promise.all(Object.keys(e).map(n=>U(null,null,function*(){var i=e[n],o=t.docData[t.oldCollection.schema.primaryPath],c=yield t.oldCollection.storageInstance.getAttachmentData(o,n,i.digest),l=yield t.oldCollection.database.hashFunction(c);r[n]={length:i.length,type:i.type,data:c,digest:l}}))),t.docData._attachments=r}})}function KR(t){return Pn}var ob={name:"attachments",rxdb:!0,prototypes:{RxDocument:t=>{t.putAttachment=zR,t.getAttachment=VR,t.allAttachments=HR,Object.defineProperty(t,"allAttachments$",{get:function(){return this.$.pipe(ut(r=>Object.entries(r.toJSON(!0)._attachments)),ut(r=>r.map(([n,i])=>Dl(n,i,this))))}})}},overwritable:{},hooks:{preMigrateDocument:{after:WR},postMigrateDocument:{after:KR}}};var sb=["pre","post"],cb=["insert","save","remove","create"],ab=!1,Ka=function(){function t(r,n,i,o,c={},l={},f={},g={},m={},_=jf,C={},R=Qf){this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this.awaitBeforeReads=new Set,this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=Fy(),this.$={},this.checkpoint$={},this._changeEventBuffer={},this.onDestroy=[],this.destroyed=!1,this.onRemove=[],this.database=r,this.name=n,this.schema=i,this.internalStorageInstance=o,this.instanceCreationOptions=c,this.migrationStrategies=l,this.methods=f,this.attachments=g,this.options=m,this.cacheReplacementPolicy=_,this.statics=C,this.conflictHandler=R,qR(this.asRxCollection)}var e=t.prototype;return e.prepare=function(){return U(this,null,function*(){this.storageInstance=xl(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new Qy(this.storageInstance,this.schema.primaryPath,(f,g)=>Kf(this,f,g),f=>this._runHooks("post","save",f));var n=this.database.eventBulks$.pipe(bt(f=>f.collectionName===this.name));this.$=n.pipe(Wt(f=>f.events)),this.checkpoint$=n.pipe(ut(f=>f.checkpoint)),this._changeEventBuffer=eb(this.asRxCollection);var i;this._docCache=new zy(this.schema.primaryPath,this.database.eventBulks$.pipe(bt(f=>f.collectionName===this.name&&!f.events[0].isLocal),ut(f=>f.events)),f=>(i||(i=rb(this.asRxCollection)),nb(this.asRxCollection,i,f)));var o=this.database.internalStore.changeStream().pipe(bt(f=>{var g=this.name+"-"+this.schema.version,m=f.events.find(_=>_.documentData.context==="collection"&&_.documentData.key===g&&_.operation==="DELETE");return!!m})).subscribe(()=>U(this,null,function*(){yield this.destroy(),yield Promise.all(this.onRemove.map(f=>f()))}));this._subs.push(o);var c=yield this.database.storageToken,l=this.storageInstance.changeStream().subscribe(f=>{for(var g=new Array(f.events.length),m=f.events,_=this.name,C=It.deepFreezeWhenDevMode,R=0;R<m.length;R++){var A=m[R];g[R]={documentId:A.documentId,collectionName:_,isLocal:!1,operation:A.operation,documentData:C(A.documentData),previousDocumentData:C(A.previousDocumentData)}}var B={id:f.id,internal:!1,collectionName:this.name,storageToken:c,events:g,databaseToken:this.database.token,checkpoint:f.checkpoint,context:f.context,endTime:f.endTime,startTime:f.startTime};this.database.$emit(B)});return this._subs.push(l),this._subs.push(this.storageInstance.conflictResultionTasks().subscribe(f=>{this.conflictHandler(f.input,f.context).then(g=>{this.storageInstance.resolveConflictResultionTask({id:f.id,output:g})})})),Pn})},e.cleanup=function(n){throw Ve(this),Ot("cleanup")},e.migrationNeeded=function(){throw Ot("migration-schema")},e.getMigrationState=function(){throw Ot("migration-schema")},e.startMigration=function(n=10){return Ve(this),this.getMigrationState().startMigration(n)},e.migratePromise=function(n=10){return this.getMigrationState().migratePromise(n)},e.insert=function(n){return U(this,null,function*(){Ve(this);var i=yield this.bulkInsert([n]),o=i.error[0];Eo(this,n[this.schema.primaryPath],n,o);var c=Dt(i.success[0]);return c})},e.bulkInsert=function(n){return U(this,null,function*(){if(Ve(this),n.length===0)return{success:[],error:[]};var i=this.schema.primaryPath,o=new Set,c;if(this.hasHooks("pre","insert"))c=yield Promise.all(n.map(W=>{var Z=Wa(this.schema,W);return this._runHooks("pre","insert",Z).then(()=>(o.add(Z[i]),{document:Z}))}));else{c=new Array(n.length);for(var l=this.schema,f=0;f<n.length;f++){var g=n[f],m=Wa(l,g);o.add(m[i]),c[f]={document:m}}}if(o.size!==n.length)throw I("COL22",{collection:this.name,args:{documents:n}});var _=yield this.storageInstance.bulkWrite(c,"rx-collection-bulk-insert"),C,R=this,A={get success(){if(!C){var W=er(R.schema.primaryPath,c,_);C=_l(R._docCache,W)}return C},error:_.error};if(this.hasHooks("post","insert")){var B=new Map;c.forEach(W=>{var Z=W.document;B.set(Z[i],Z)}),yield Promise.all(A.success.map(W=>this._runHooks("post","insert",B.get(W.primary),W)))}return A})},e.bulkRemove=function(n){return U(this,null,function*(){Ve(this);var i=this.schema.primaryPath;if(n.length===0)return{success:[],error:[]};var o=yield this.findByIds(n).exec(),c=[],l=new Map;Array.from(o.values()).forEach(R=>{var A=R.toMutableJSON(!0);c.push(A),l.set(R.primary,A)}),yield Promise.all(c.map(R=>{var A=R[this.schema.primaryPath];return this._runHooks("pre","remove",R,o.get(A))}));var f=c.map(R=>{var A=At(R);return A._deleted=!0,{previous:R,document:A}}),g=yield this.storageInstance.bulkWrite(f,"rx-collection-bulk-remove"),m=er(this.schema.primaryPath,f,g),_=m.map(R=>R[i]);yield Promise.all(_.map(R=>this._runHooks("post","remove",l.get(R),o.get(R))));var C=_.map(R=>Ln(o,R));return{success:C,error:g.error}})},e.bulkUpsert=function(n){return U(this,null,function*(){Ve(this);var i=[],o=new Map;n.forEach(g=>{var m=Wa(this.schema,g),_=m[this.schema.primaryPath];if(!_)throw I("COL3",{primaryPath:this.schema.primaryPath,data:m,schema:this.schema.jsonSchema});o.set(_,m),i.push(m)});var c=yield this.bulkInsert(i),l=c.success.slice(0),f=[];return yield Promise.all(c.error.map(g=>U(this,null,function*(){if(g.status!==409)f.push(g);else{var m=g.documentId,_=Ln(o,m),C=Dt(g.documentInDb),R=this._docCache.getCachedRxDocuments([C])[0],A=yield R.incrementalModify(()=>_);l.push(A)}}))),{error:f,success:l}})},e.upsert=function(n){return U(this,null,function*(){Ve(this);var i=yield this.bulkUpsert([n]);return Eo(this.asRxCollection,n[this.schema.primaryPath],n,i.error[0]),i.success[0]})},e.incrementalUpsert=function(n){Ve(this);var i=Wa(this.schema,n),o=i[this.schema.primaryPath];if(!o)throw I("COL4",{data:n});var c=this._incrementalUpsertQueues.get(o);return c||(c=Pn),c=c.then(()=>QR(this,o,i)).then(l=>l.inserted?l.doc:GR(l.doc,i)),this._incrementalUpsertQueues.set(o,c),c},e.find=function(n){if(Ve(this),typeof n=="string")throw I("COL5",{queryObj:n});n||(n=Va());var i=Ro("find",n,this);return i},e.findOne=function(n){if(Ve(this),typeof n=="number"||Array.isArray(n))throw ae("COL6",{queryObj:n});var i;if(typeof n=="string")i=Ro("findOne",{selector:{[this.schema.primaryPath]:n},limit:1},this);else{if(n||(n=Va()),n.limit)throw I("QU6");n=At(n),n.limit=1,i=Ro("findOne",n,this)}return i},e.count=function(n){Ve(this),n||(n=Va());var i=Ro("count",n,this);return i},e.findByIds=function(n){Ve(this);var i={selector:{[this.schema.primaryPath]:{$in:n.slice(0)}}},o=Ro("findByIds",i,this);return o},e.exportJSON=function(){throw Ot("json-dump")},e.importJSON=function(n){throw Ot("json-dump")},e.insertCRDT=function(n){throw Ot("crdt")},e.addPipeline=function(n){throw Ot("pipeline")},e.addHook=function(n,i,o,c=!1){if(typeof o!="function")throw ae("COL7",{key:i,when:n});if(!sb.includes(n))throw ae("COL8",{key:i,when:n});if(!cb.includes(i))throw I("COL9",{key:i});if(n==="post"&&i==="create"&&c===!0)throw I("COL10",{when:n,key:i,parallel:c});var l=o.bind(this),f=c?"parallel":"series";this.hooks[i]=this.hooks[i]||{},this.hooks[i][n]=this.hooks[i][n]||{series:[],parallel:[]},this.hooks[i][n][f].push(l)},e.getHooks=function(n,i){return!this.hooks[i]||!this.hooks[i][n]?{series:[],parallel:[]}:this.hooks[i][n]},e.hasHooks=function(n,i){if(!this.hooks[i]||!this.hooks[i][n])return!1;var o=this.getHooks(n,i);return o?o.series.length>0||o.parallel.length>0:!1},e._runHooks=function(n,i,o,c){var l=this.getHooks(n,i);if(!l)return Pn;var f=l.series.map(g=>()=>g(o,c));return uv(f).then(()=>Promise.all(l.parallel.map(g=>g(o,c))))},e._runHooksSync=function(n,i,o,c){if(this.hasHooks(n,i)){var l=this.getHooks(n,i);l&&l.series.forEach(f=>f(o,c))}},e.promiseWait=function(n){var i=new Promise(o=>{var c=setTimeout(()=>{this.timeouts.delete(c),o()},n);this.timeouts.add(c)});return i},e.destroy=function(){return U(this,null,function*(){return this.destroyed?Nr:(yield Promise.all(this.onDestroy.map(n=>n())),this.destroyed=!0,Array.from(this.timeouts).forEach(n=>clearTimeout(n)),this._changeEventBuffer&&this._changeEventBuffer.destroy(),this.database.requestIdlePromise().then(()=>this.storageInstance.close()).then(()=>(this._subs.forEach(n=>n.unsubscribe()),delete this.database.collections[this.name],Fn("postDestroyRxCollection",this).then(()=>!0))))})},e.remove=function(){return U(this,null,function*(){yield this.destroy(),yield Promise.all(this.onRemove.map(n=>n())),yield El(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.password,this.database.hashFunction)})},Re(t,[{key:"insert$",get:function(){return this.$.pipe(bt(r=>r.operation==="INSERT"))}},{key:"update$",get:function(){return this.$.pipe(bt(r=>r.operation==="UPDATE"))}},{key:"remove$",get:function(){return this.$.pipe(bt(r=>r.operation==="DELETE"))}},{key:"asRxCollection",get:function(){return this}}])}();function qR(t){if(!ab){ab=!0;var e=Object.getPrototypeOf(t);cb.forEach(r=>{sb.map(n=>{var i=n+kc(r);e[i]=function(o,c){return this.addHook(n,r,o,c)}})})}}function GR(t,e){return t.incrementalModify(r=>e)}function QR(t,e,r){var n=t._docCache.getLatestDocumentDataIfExists(e);return n?Promise.resolve({doc:t._docCache.getCachedRxDocuments([n])[0],inserted:!1}):t.findOne(e).exec().then(i=>i?{doc:i,inserted:!1}:t.insert(r).then(o=>({doc:o,inserted:!0})))}function lb({database:t,name:e,schema:r,instanceCreationOptions:n={},migrationStrategies:i={},autoMigrate:o=!0,statics:c={},methods:l={},attachments:f={},options:g={},localDocuments:m=!1,cacheReplacementPolicy:_=jf,conflictHandler:C=Qf}){var R={databaseInstanceToken:t.token,databaseName:t.name,collectionName:e,schema:r.jsonSchema,options:n,multiInstance:t.multiInstance,password:t.password,devMode:It.isDevMode()};return Zt("preCreateRxStorageInstance",R),tb(t,R).then(A=>{var B=new Ka(t,e,r,A,n,i,l,f,g,_,c,C);return B.prepare().then(()=>{Object.entries(c).forEach(([Z,tt])=>{Object.defineProperty(B,Z,{get:()=>tt.bind(B)})});var W=Pn;return o&&B.schema.version!==0&&(W=B.migratePromise()),W}).then(()=>(Zt("createRxCollection",{collection:B,creator:{name:e,schema:r,storageInstance:A,instanceCreationOptions:n,migrationStrategies:i,methods:l,attachments:f,options:g,cacheReplacementPolicy:_,localDocuments:m,statics:c}}),B)).catch(W=>A.close().then(()=>Promise.reject(W)))})}var Zf=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this._parallels=e||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};Zf.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,Xf(this)},wrapCall:function(e){var r=this;this.lock();var n;try{n=e()}catch(i){throw this.unlock(),i}return!n.then||typeof n.then!="function"?(this.unlock(),n):n.then(function(i){return r.unlock(),i}).catch(function(i){throw r.unlock(),i})},requestIdlePromise:function(e){var r=this;e=e||{};var n,i=new Promise(function(l){return n=l}),o=function(){Yf(r,i),n()};if(i._manRes=o,e.timeout){var c=setTimeout(function(){i._manRes()},e.timeout);i._timeoutObj=c}return this._iC.add(i),Xf(this),i},cancelIdlePromise:function(e){Yf(this,e)},requestIdleCallback:function(e,r){var n=this._lHN++,i=this.requestIdlePromise(r);return this._hPM.set(n,i),this._pHM.set(i,n),i.then(function(){return e()}),n},cancelIdleCallback:function(e){var r=this._hPM.get(e);this.cancelIdlePromise(r)},clear:function(){var e=this;this._iC.forEach(function(r){return Yf(e,r)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}};function YR(t){if(t._iC.size!==0){var e=t._iC.values(),r=e.next().value;r._manRes(),setTimeout(function(){return Xf(t)},0)}}function Yf(t,e){if(e){if(e._timeoutObj&&clearTimeout(e._timeoutObj),t._pHM.has(e)){var r=t._pHM.get(e);t._hPM.delete(r),t._pHM.delete(e)}t._iC.delete(e)}}function Xf(t){t._tryIR||t._iC.size===0||(t._tryIR=!0,setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}YR(t),t._tryIR=!1},0)},0))}var Hn=class{ttl;map=new Map;_to=!1;constructor(e){this.ttl=e}has(e){return this.map.has(e)}add(e){this.map.set(e,ub()),this._to||(this._to=!0,setTimeout(()=>{this._to=!1,XR(this)},0))}clear(){this.map.clear()}};function XR(t){let e=ub()-t.ttl,r=t.map[Symbol.iterator]();for(;;){let n=r.next().value;if(!n)return;let i=n[0];if(n[1]<e)t.map.delete(i);else return}}function ub(){return Date.now()}var Al=new Set,db=0,qa=function(){function t(r,n,i,o,c,l,f=!1,g={},m,_,C,R,A){this.idleQueue=new Zf,this.rxdbVersion=wi,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onDestroy=[],this.destroyed=!1,this.collections={},this.states={},this.eventBulks$=new st,this.observable$=this.eventBulks$.pipe(Wt(B=>B.events)),this.storageToken=Nr,this.storageTokenDocument=Nr,this.emittedEventBulkIds=new Hn(60*1e3),this.name=r,this.token=n,this.storage=i,this.instanceCreationOptions=o,this.password=c,this.multiInstance=l,this.eventReduce=f,this.options=g,this.internalStore=m,this.hashFunction=_,this.cleanupPolicy=C,this.allowSlowCount=R,this.reactivity=A,db++,this.name!=="pseudoInstance"&&(this.internalStore=xl(this.asRxDatabase,m,Cl),this.storageTokenDocument=Jy(this.asRxDatabase).catch(B=>this.startupErrors.push(B)),this.storageToken=this.storageTokenDocument.then(B=>B.data.token).catch(B=>this.startupErrors.push(B)))}var e=t.prototype;return e.getReactivityFactory=function(){if(!this.reactivity)throw I("DB14",{database:this.name});return this.reactivity},e.$emit=function(n){this.emittedEventBulkIds.has(n.id)||(this.emittedEventBulkIds.add(n.id),this.eventBulks$.next(n))},e.removeCollectionDoc=function(n,i){return U(this,null,function*(){var o=yield Hf(this.internalStore,Sl(Gf(n,i),Oo));if(!o)throw I("SNH",{name:n,schema:i});var c=Oi(o);c._deleted=!0,yield this.internalStore.bulkWrite([{document:c,previous:o}],"rx-database-remove-collection")})},e.addCollections=function(n){return U(this,null,function*(){var i={},o={},c=[],l={};yield Promise.all(Object.entries(n).map(C=>U(this,[C],function*([m,_]){var R=m,A=_.schema;i[R]=A;var B=Cv(A,this.hashFunction);if(o[R]=B,this.collections[m])throw I("DB3",{name:m});var W=Gf(m,A),Z={id:Sl(W,Oo),key:W,context:Oo,data:{name:R,schemaHash:yield B.hash,schema:B.jsonSchema,version:B.version,connectedStorages:[]},_deleted:!1,_meta:Tn(),_rev:en(),_attachments:{}};c.push({document:Z});var tt=Object.assign({},_,{name:R,schema:B,database:this}),X=At(_);X.database=this,X.name=m,Zt("preCreateRxCollection",X),tt.conflictHandler=X.conflictHandler,l[R]=tt})));var f=yield this.internalStore.bulkWrite(c,"rx-database-add-collection");yield tE(this),yield Promise.all(f.error.map(m=>U(this,null,function*(){if(m.status!==409)throw I("DB12",{database:this.name,writeError:m});var _=Dt(m.documentInDb),C=_.data.name,R=o[C];if(_.data.schemaHash!==(yield R.hash))throw I("DB6",{database:this.name,collection:C,previousSchemaHash:_.data.schemaHash,schemaHash:yield R.hash,previousSchema:_.data.schema,schema:Dt(i[C])})})));var g={};return yield Promise.all(Object.keys(n).map(m=>U(this,null,function*(){var _=l[m],C=yield lb(_);g[m]=C,this.collections[m]=C,this[m]||Object.defineProperty(this,m,{get:()=>this.collections[m]})}))),g})},e.lockedRun=function(n){return this.idleQueue.wrapCall(n)},e.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},e.exportJSON=function(n){throw Ot("json-dump")},e.addState=function(n){throw Ot("state")},e.importJSON=function(n){throw Ot("json-dump")},e.backup=function(n){throw Ot("backup")},e.leaderElector=function(){throw Ot("leader-election")},e.isLeader=function(){throw Ot("leader-election")},e.waitForLeadership=function(){throw Ot("leader-election")},e.migrationStates=function(){throw Ot("migration-schema")},e.destroy=function(){return U(this,null,function*(){return this.destroyed?Nr:(this.destroyed=!0,yield Fn("preDestroyRxDatabase",this),this.eventBulks$.complete(),db--,this._subs.map(n=>n.unsubscribe()),this.name==="pseudoInstance"?Nr:this.requestIdlePromise().then(()=>Promise.all(this.onDestroy.map(n=>n()))).then(()=>Promise.all(Object.keys(this.collections).map(n=>this.collections[n]).map(n=>n.destroy()))).then(()=>this.internalStore.close()).then(()=>Al.delete(this.storage.name+"|"+this.name)).then(()=>!0))})},e.remove=function(){return this.destroy().then(()=>JR(this.name,this.storage,this.password))},Re(t,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}])}();function ZR(t,e){var r=e.name+"|"+t;if(Al.has(r))throw I("DB8",{name:t,storage:e.name,link:"https://rxdb.info/rx-database.html#ignoreduplicate"})}function fb(t,e,r,n,i,o){return U(this,null,function*(){var c=yield e.createStorageInstance({databaseInstanceToken:t,databaseName:r,collectionName:Wy,schema:Cl,options:n,multiInstance:i,password:o,devMode:It.isDevMode()});return c})}function hb({storage:t,instanceCreationOptions:e,name:r,password:n,multiInstance:i=!0,eventReduce:o=!0,ignoreDuplicate:c=!1,options:l={},cleanupPolicy:f,allowSlowCount:g=!1,localDocuments:m=!1,hashFunction:_=po,reactivity:C}){Zt("preCreateRxDatabase",{storage:t,instanceCreationOptions:e,name:r,password:n,multiInstance:i,eventReduce:o,ignoreDuplicate:c,options:l,localDocuments:m}),c||ZR(r,t),Al.add(t.name+"|"+r);var R=xi(10);return fb(R,t,r,e,i,n).catch(A=>{throw Al.delete(t.name+"|"+r),A}).then(A=>{var B=new qa(r,R,t,e,n,i,o,l,A,_,f,g,C);return Fn("createRxDatabase",{database:B,creator:{storage:t,instanceCreationOptions:e,name:r,password:n,multiInstance:i,eventReduce:o,ignoreDuplicate:c,options:l,localDocuments:m}}).then(()=>B)})}function JR(t,e,r){return U(this,null,function*(){var n=xi(10),i=yield fb(n,e,t,{},!1,r),o=yield Rl(i),c=new Set;o.forEach(f=>c.add(f.data.name));var l=Array.from(c);return yield Promise.all(l.map(f=>El(e,i,n,t,f,r))),yield Fn("postRemoveRxDatabase",{databaseName:t,storage:e}),yield i.remove(),l})}function tE(t){return U(this,null,function*(){if(yield t.storageToken,t.startupErrors[0])throw t.startupErrors[0]})}var eE={RxSchema:nf.prototype,RxDocument:Vn,RxQuery:zf.prototype,RxCollection:Ka.prototype,RxDatabase:qa.prototype},Jf=new Set,pb=new Set;function kl(t){if(Zt("preAddRxPlugin",{plugin:t,plugins:Jf}),!Jf.has(t)){{if(pb.has(t.name))throw I("PL3",{name:t.name,plugin:t});Jf.add(t),pb.add(t.name)}if(!t.rxdb)throw ae("PL1",{plugin:t});t.init&&t.init(),t.prototypes&&Object.entries(t.prototypes).forEach(([e,r])=>r(eE[e])),t.overwritable&&Object.assign(It,t.overwritable),t.hooks&&Object.entries(t.hooks).forEach(([e,r])=>{r.after&&go[e].push(r.after),r.before&&go[e].unshift(r.before)})}}function mb(t){return t&&typeof t.then=="function"}var rE=Promise.resolve(!1),e8=Promise.resolve(!0),jr=Promise.resolve();function Il(t,e){return t||(t=0),new Promise(function(r){return setTimeout(function(){return r(e)},t)})}function gb(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function Ga(){return Math.random().toString(36).substring(2)}var th=0;function an(){var t=Date.now()*1e3;return t<=th&&(t=th+1),th=t,t}var nE=an,iE="native";function oE(t){var e={time:an(),messagesCallback:null,bc:new BroadcastChannel(t),subFns:[]};return e.bc.onmessage=function(r){e.messagesCallback&&e.messagesCallback(r.data)},e}function aE(t){t.bc.close(),t.subFns=[]}function sE(t,e){try{return t.bc.postMessage(e,!1),jr}catch(r){return Promise.reject(r)}}function cE(t,e){t.messagesCallback=e}function lE(){if(typeof globalThis<"u"&&globalThis.Deno&&globalThis.Deno.args)return!0;if((typeof window<"u"||typeof self<"u")&&typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function uE(){return 150}var vb={create:oE,close:aE,onMessage:cE,postMessage:sE,canBeUsed:lE,type:iE,averageResponseTime:uE,microSeconds:nE};function Do(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=JSON.parse(JSON.stringify(t));return typeof e.webWorkerSupport>"u"&&(e.webWorkerSupport=!0),e.idb||(e.idb={}),e.idb.ttl||(e.idb.ttl=1e3*45),e.idb.fallbackInterval||(e.idb.fallbackInterval=150),t.idb&&typeof t.idb.onclose=="function"&&(e.idb.onclose=t.idb.onclose),e.localstorage||(e.localstorage={}),e.localstorage.removeTimeout||(e.localstorage.removeTimeout=1e3*60),t.methods&&(e.methods=t.methods),e.node||(e.node={}),e.node.ttl||(e.node.ttl=1e3*60*2),e.node.maxParallelWrites||(e.node.maxParallelWrites=2048),typeof e.node.useFastPath>"u"&&(e.node.useFastPath=!0),e}var dE=an,fE="pubkey.broadcast-channel-0-",sn="messages",Tl={durability:"relaxed"},hE="idb";function yb(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function eh(t){t.commit&&t.commit()}function pE(t){var e=yb(),r=fE+t,n=e.open(r);return n.onupgradeneeded=function(i){var o=i.target.result;o.createObjectStore(sn,{keyPath:"id",autoIncrement:!0})},new Promise(function(i,o){n.onerror=function(c){return o(c)},n.onsuccess=function(){i(n.result)}})}function mE(t,e,r){var n=Date.now(),i={uuid:e,time:n,data:r},o=t.transaction([sn],"readwrite",Tl);return new Promise(function(c,l){o.oncomplete=function(){return c()},o.onerror=function(g){return l(g)};var f=o.objectStore(sn);f.add(i),eh(o)})}function gE(t,e){var r=t.transaction(sn,"readonly",Tl),n=r.objectStore(sn),i=[],o=IDBKeyRange.bound(e+1,1/0);if(n.getAll){var c=n.getAll(o);return new Promise(function(f,g){c.onerror=function(m){return g(m)},c.onsuccess=function(m){f(m.target.result)}})}function l(){try{return o=IDBKeyRange.bound(e+1,1/0),n.openCursor(o)}catch{return n.openCursor()}}return new Promise(function(f,g){var m=l();m.onerror=function(_){return g(_)},m.onsuccess=function(_){var C=_.target.result;C?C.value.id<e+1?C.continue(e+1):(i.push(C.value),C.continue()):(eh(r),f(i))}})}function vE(t,e){if(t.closed)return Promise.resolve([]);var r=t.db.transaction(sn,"readwrite",Tl),n=r.objectStore(sn);return Promise.all(e.map(function(i){var o=n.delete(i);return new Promise(function(c){o.onsuccess=function(){return c()}})}))}function yE(t,e){var r=Date.now()-e,n=t.transaction(sn,"readonly",Tl),i=n.objectStore(sn),o=[];return new Promise(function(c){i.openCursor().onsuccess=function(l){var f=l.target.result;if(f){var g=f.value;g.time<r?(o.push(g),f.continue()):(eh(n),c(o))}else c(o)}})}function bE(t){return yE(t.db,t.options.idb.ttl).then(function(e){return vE(t,e.map(function(r){return r.id}))})}function _E(t,e){return e=Do(e),pE(t).then(function(r){var n={closed:!1,lastCursorId:0,channelName:t,options:e,uuid:Ga(),eMIs:new Hn(e.idb.ttl*2),writeBlockPromise:jr,messagesCallback:null,readQueuePromises:[],db:r};return r.onclose=function(){n.closed=!0,e.idb.onclose&&e.idb.onclose()},bb(n),n})}function bb(t){t.closed||_b(t).then(function(){return Il(t.options.idb.fallbackInterval)}).then(function(){return bb(t)})}function xE(t,e){return!(t.uuid===e.uuid||e.eMIs.has(t.id)||t.data.time<e.messagesCallbackTime)}function _b(t){return t.closed?jr:t.messagesCallback?gE(t.db,t.lastCursorId).then(function(e){var r=e.filter(function(n){return!!n}).map(function(n){return n.id>t.lastCursorId&&(t.lastCursorId=n.id),n}).filter(function(n){return xE(n,t)}).sort(function(n,i){return n.time-i.time});return r.forEach(function(n){t.messagesCallback&&(t.eMIs.add(n.id),t.messagesCallback(n.data))}),jr}):jr}function wE(t){t.closed=!0,t.db.close()}function CE(t,e){return t.writeBlockPromise=t.writeBlockPromise.then(function(){return mE(t.db,t.uuid,e)}).then(function(){gb(0,10)===0&&bE(t)}),t.writeBlockPromise}function SE(t,e,r){t.messagesCallbackTime=r,t.messagesCallback=e,_b(t)}function RE(){return!!yb()}function EE(t){return t.idb.fallbackInterval*2}var xb={create:_E,close:wE,onMessage:SE,postMessage:CE,canBeUsed:RE,type:hE,averageResponseTime:EE,microSeconds:dE};var OE=an,DE="pubkey.broadcastChannel-",AE="localstorage";function wb(){var t;if(typeof window>"u")return null;try{t=window.localStorage,t=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return t}function Cb(t){return DE+t}function kE(t,e){return new Promise(function(r){Il().then(function(){var n=Cb(t.channelName),i={token:Ga(),time:Date.now(),data:e,uuid:t.uuid},o=JSON.stringify(i);wb().setItem(n,o);var c=document.createEvent("Event");c.initEvent("storage",!0,!0),c.key=n,c.newValue=o,window.dispatchEvent(c),r()})})}function IE(t,e){var r=Cb(t),n=function(o){o.key===r&&e(JSON.parse(o.newValue))};return window.addEventListener("storage",n),n}function TE(t){window.removeEventListener("storage",t)}function ME(t,e){if(e=Do(e),!Sb())throw new Error("BroadcastChannel: localstorage cannot be used");var r=Ga(),n=new Hn(e.localstorage.removeTimeout),i={channelName:t,uuid:r,eMIs:n};return i.listener=IE(t,function(o){i.messagesCallback&&o.uuid!==r&&(!o.token||n.has(o.token)||o.data.time&&o.data.time<i.messagesCallbackTime||(n.add(o.token),i.messagesCallback(o.data)))}),i}function PE(t){TE(t.listener)}function NE(t,e,r){t.messagesCallbackTime=r,t.messagesCallback=e}function Sb(){var t=wb();if(!t)return!1;try{var e="__broadcastchannel_check";t.setItem(e,"works"),t.removeItem(e)}catch{return!1}return!0}function LE(){var t=120,e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?t*2:t}var Rb={create:ME,close:PE,onMessage:NE,postMessage:kE,canBeUsed:Sb,type:AE,averageResponseTime:LE,microSeconds:OE};var Eb=an,$E="simulate",rh=new Set;function BE(t){var e={time:Eb(),name:t,messagesCallback:null};return rh.add(e),e}function FE(t){rh.delete(t)}var Ob=5;function jE(t,e){return new Promise(function(r){return setTimeout(function(){var n=Array.from(rh);n.forEach(function(i){i.name===t.name&&i!==t&&i.messagesCallback&&i.time<e.time&&i.messagesCallback(e)}),r()},Ob)})}function UE(t,e){t.messagesCallback=e}function zE(){return!0}function VE(){return Ob}var Db={create:BE,close:FE,onMessage:UE,postMessage:jE,canBeUsed:zE,type:$E,averageResponseTime:VE,microSeconds:Eb};var Ab=[vb,xb,Rb];function kb(t){var e=[].concat(t.methods,Ab).filter(Boolean);if(t.type){if(t.type==="simulate")return Db;var r=e.find(function(i){return i.type===t.type});if(r)return r;throw new Error("method-type "+t.type+" not found")}t.webWorkerSupport||(e=e.filter(function(i){return i.type!=="idb"}));var n=e.find(function(i){return i.canBeUsed()});if(n)return n;throw new Error("No usable method found in "+JSON.stringify(Ab.map(function(i){return i.type})))}var nh=new Set,HE=0,Qa=function(e,r){this.id=HE++,nh.add(this),this.name=e,Ib&&(r=Ib),this.options=Do(r),this.method=kb(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,WE(this)};Qa._pubkey=!0;var Ib;Qa.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(e));return Tb(this,"message",e)},postInternal:function(e){return Tb(this,"internal",e)},set onmessage(t){var e=this.method.microSeconds(),r={time:e,fn:t};Pb(this,"message",this._onML),t&&typeof t=="function"?(this._onML=r,Mb(this,"message",r)):this._onML=null},addEventListener:function(e,r){var n=this.method.microSeconds(),i={time:n,fn:r};Mb(this,e,i)},removeEventListener:function(e,r){var n=this._addEL[e].find(function(i){return i.fn===r});Pb(this,e,n)},close:function(){var e=this;if(!this.closed){nh.delete(this),this.closed=!0;var r=this._prepP?this._prepP:jr;return this._onML=null,this._addEL.message=[],r.then(function(){return Promise.all(Array.from(e._uMP))}).then(function(){return Promise.all(e._befC.map(function(n){return n()}))}).then(function(){return e.method.close(e._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function Tb(t,e,r){var n=t.method.microSeconds(),i={time:n,type:e,data:r},o=t._prepP?t._prepP:jr;return o.then(function(){var c=t.method.postMessage(t._state,i);return t._uMP.add(c),c.catch().then(function(){return t._uMP.delete(c)}),c})}function WE(t){var e=t.method.create(t.name,t.options);mb(e)?(t._prepP=e,e.then(function(r){t._state=r})):t._state=e}function Nb(t){return t._addEL.message.length>0||t._addEL.internal.length>0}function Mb(t,e,r){t._addEL[e].push(r),KE(t)}function Pb(t,e,r){t._addEL[e]=t._addEL[e].filter(function(n){return n!==r}),qE(t)}function KE(t){if(!t._iL&&Nb(t)){var e=function(i){t._addEL[i.type].forEach(function(o){i.time>=o.time&&o.fn(i.data)})},r=t.method.microSeconds();t._prepP?t._prepP.then(function(){t._iL=!0,t.method.onMessage(t._state,e,r)}):(t._iL=!0,t.method.onMessage(t._state,e,r))}}function qE(t){if(t._iL&&!Nb(t)){t._iL=!1;var e=t.method.microSeconds();t.method.onMessage(t._state,null,e)}}var Ml=new Map;function GE(t,e,r,n){var i=Ml.get(e);return i||(i={bc:new Qa(["RxDB:",t,r].join("|")),refs:new Set},Ml.set(e,i)),i.refs.add(n),i.bc}function Lb(t,e){var r=Ml.get(t);if(r&&(r.refs.delete(e),r.refs.size===0))return Ml.delete(t),r.bc.close()}function $b(t,e,r,n){if(e.multiInstance){var i=n||GE(t,e.databaseInstanceToken,r.databaseName,r),o=new st,c=C=>{C.storageName===t&&C.databaseName===e.databaseName&&C.collectionName===e.collectionName&&C.version===e.schema.version&&o.next(C.eventBulk)};i.addEventListener("message",c);var l=r.changeStream(),f=!1,g=l.subscribe(C=>{f||i.postMessage({storageName:t,databaseName:e.databaseName,collectionName:e.collectionName,version:e.schema.version,eventBulk:C})});r.changeStream=function(){return o.asObservable().pipe(Ap(l))};var m=r.close.bind(r);r.close=function(){return U(this,null,function*(){return f=!0,g.unsubscribe(),i.removeEventListener("message",c),n||(yield Lb(e.databaseInstanceToken,r)),m()})};var _=r.remove.bind(r);r.remove=function(){return U(this,null,function*(){return f=!0,g.unsubscribe(),i.removeEventListener("message",c),n||(yield Lb(e.databaseInstanceToken,r)),_()})}}}var ih={UT1:"given name is no string or empty",UT2:`collection- and database-names must match the regex to be compatible with couchdb databases.
    See https://neighbourhood.ie/blog/2020/10/13/everything-you-need-to-know-about-couchdb-database-names/
    info: if your database-name specifies a folder, the name must contain the slash-char '/' or '\\'`,UT3:"replication-direction must either be push or pull or both. But not none",UT4:"given leveldown is no valid adapter",UT5:"keyCompression is set to true in the schema but no key-compression handler is used in the storage",UT6:"schema contains encrypted fields but no encryption handler is used in the storage",UT7:"attachments.compression is enabled but no attachment-compression plugin is used",PL1:"Given plugin is not RxDB plugin.",PL3:"A plugin with the same name was already added but it was not the exact same JavaScript object",P2:"bulkWrite() cannot be called with an empty array",QU1:"RxQuery._execOverDatabase(): op not known",QU4:"RxQuery.regex(): You cannot use .regex() on the primary field",QU5:"RxQuery.sort(): does not work because key is not defined in the schema",QU6:"RxQuery.limit(): cannot be called on .findOne()",QU9:"throwIfMissing can only be used in findOne queries",QU10:"result empty and throwIfMissing: true",QU11:"RxQuery: no valid query params given",QU12:"Given index is not in schema",QU13:"A top level field of the query is not included in the schema",QU14:"Running a count() query in slow mode is now allowed. Either run a count() query with a selector that fully matches an index or set allowSlowCount=true when calling the createRxDatabase",QU15:"For count queries it is not allowed to use skip or limit",QU16:"$regex queries must be defined by a string, not an RegExp instance. This is because RegExp objects cannot be JSON stringified and also they are mutable which would be dangerous",QU17:"Chained queries cannot be used on findByIds() RxQuery instances",QU18:"Malformated query result data. This likely happens because you create a OPFS-storage RxDatabase inside of a worker but did not set the usesRxDatabaseInWorker setting. https://rxdb.info/rx-storage-opfs.html#setting-usesrxdatabaseinworker-when-a-rxdatabase-is-also-used-inside-of-the-worker ",MQ1:"path must be a string or object",MQ2:"Invalid argument",MQ3:"Invalid sort() argument. Must be a string, object, or array",MQ4:"Invalid argument. Expected instanceof mquery or plain object",MQ5:"method must be used after where() when called with these arguments",MQ6:"Can't mix sort syntaxes. Use either array or object | .sort([['field', 1], ['test', -1]]) | .sort({ field: 1, test: -1 })",MQ7:"Invalid sort value",MQ8:"Can't mix sort syntaxes. Use either array or object",DB1:"RxDocument.prepare(): another instance on this adapter has a different password",DB2:"RxDatabase.addCollections(): collection-names cannot start with underscore _",DB3:"RxDatabase.addCollections(): collection already exists. use myDatabase[collectionName] to get it",DB4:"RxDatabase.addCollections(): schema is missing",DB5:"RxDatabase.addCollections(): collection-name not allowed",DB6:"RxDatabase.addCollections(): another instance created this collection with a different schema. Read this https://rxdb.info/questions-answers.html?console=qa#cant-change-the-schema ",DB8:`createRxDatabase(): A RxDatabase with the same name and adapter already exists.
Make sure to use this combination only once or set ignoreDuplicate to true if you do this intentional-
This often happens in react projects with hot reload that reloads the code without reloading the process.`,DB11:"createRxDatabase(): Invalid db-name, folder-paths must not have an ending slash",DB12:"RxDatabase.addCollections(): could not write to internal store",DB13:"createRxDatabase(): Invalid db-name or collection name, name contains the dollar sign",DB14:"no custom reactivity factory added on database creation",COL1:"RxDocument.insert() You cannot insert an existing document",COL2:"RxCollection.insert() fieldName ._id can only be used as primaryKey",COL3:"RxCollection.upsert() does not work without primary",COL4:"RxCollection.incrementalUpsert() does not work without primary",COL5:"RxCollection.find() if you want to search by _id, use .findOne(_id)",COL6:"RxCollection.findOne() needs a queryObject or string",COL7:"hook must be a function",COL8:"hooks-when not known",COL9:"RxCollection.addHook() hook-name not known",COL10:"RxCollection .postCreate-hooks cannot be async",COL11:"migrationStrategies must be an object",COL12:"A migrationStrategy is missing or too much",COL13:"migrationStrategy must be a function",COL14:"given static method-name is not a string",COL15:"static method-names cannot start with underscore _",COL16:"given static method is not a function",COL17:"RxCollection.ORM: statics-name not allowed",COL18:"collection-method not allowed because fieldname is in the schema",COL20:"Storage write error",COL21:"The RxCollection is destroyed or removed already, either from this JavaScript realm or from another, like a browser tab",CONFLICT:"Document update conflict. When changing a document you must work on the previous revision",COL22:".bulkInsert() and .bulkUpsert() cannot be run with multiple documents that have the same primary key",DOC1:"RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed",DOC2:"cannot observe primary path",DOC3:"final fields cannot be observed",DOC4:"RxDocument.get$ cannot observe a non-existed field",DOC5:"RxDocument.populate() cannot populate a non-existed field",DOC6:"RxDocument.populate() cannot populate because path has no ref",DOC7:"RxDocument.populate() ref-collection not in database",DOC8:"RxDocument.set(): primary-key cannot be modified",DOC9:"final fields cannot be modified",DOC10:"RxDocument.set(): cannot set childpath when rootPath not selected",DOC11:"RxDocument.save(): can't save deleted document",DOC13:"RxDocument.remove(): Document is already deleted",DOC14:"RxDocument.destroy() does not exist",DOC15:"query cannot be an array",DOC16:"Since version 8.0.0 RxDocument.set() can only be called on temporary RxDocuments",DOC17:"Since version 8.0.0 RxDocument.save() can only be called on non-temporary documents",DOC18:"Document property for composed primary key is missing",DOC19:"Value of primary key(s) cannot be changed",DOC20:"PrimaryKey missing",DOC21:"PrimaryKey must be equal to PrimaryKey.trim(). It cannot start or end with a whitespace",DOC22:"PrimaryKey must not contain a linebreak",DOC23:'PrimaryKey must not contain a double-quote ["]',DOC24:"Given document data could not be structured cloned. This happens if you pass non-plain-json data into it, like a Date() object or a Function. In vue.js this happens if you use ref() on the document data which transforms it into a Proxy object.",DM1:"migrate() Migration has already run",DM2:"migration of document failed final document does not match final schema",DM3:"migration already running",DM4:"Migration errored",DM5:"Cannot open database state with newer RxDB version. You have to migrate your database state first. See https://rxdb.info/migration-storage.html?console=storage ",AT1:"to use attachments, please define this in your schema",EN1:"password is not valid",EN2:"validatePassword: min-length of password not complied",EN3:"Schema contains encrypted properties but no password is given",EN4:"Password not valid",JD1:"You must create the collections before you can import their data",JD2:"RxCollection.importJSON(): the imported json relies on a different schema",JD3:"RxCollection.importJSON(): json.passwordHash does not match the own",LD1:"RxDocument.allAttachments$ can't use attachments on local documents",LD2:"RxDocument.get(): objPath must be a string",LD3:"RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed",LD4:"cannot observe primary path",LD5:"RxDocument.set() id cannot be modified",LD6:"LocalDocument: Function is not usable on local documents",LD7:"Local document already exists",LD8:"localDocuments not activated. Set localDocuments=true on creation, when you want to store local documents on the RxDatabase or RxCollection.",RC1:"Replication: already added",RC2:"replicateCouchDB() query must be from the same RxCollection",RC4:"RxCouchDBReplicationState.awaitInitialReplication() cannot await initial replication when live: true",RC5:"RxCouchDBReplicationState.awaitInitialReplication() cannot await initial replication if multiInstance because the replication might run on another instance",RC6:"syncFirestore() serverTimestampField MUST NOT be part of the collections schema and MUST NOT be nested.",RC7:"SimplePeer requires to have process.nextTick() polyfilled, see https://rxdb.info/replication-webrtc.html?console=webrtc ",RC_PULL:"RxReplication pull handler threw an error - see .errors for more details",RC_STREAM:"RxReplication pull stream$ threw an error - see .errors for more details",RC_PUSH:"RxReplication push handler threw an error - see .errors for more details",RC_PUSH_NO_AR:"RxReplication push handler did not return an array with the conflicts",RC_WEBRTC_PEER:"RxReplication WebRTC Peer has error",RC_COUCHDB_1:"replicateCouchDB() url must end with a slash like 'https://example.com/mydatabase/'",RC_COUCHDB_2:"replicateCouchDB() did not get valid result with rows.",RC_OUTDATED:"Outdated client, update required. Replication was canceled",RC_UNAUTHORIZED:"Unauthorized client, update the replicationState.headers to set correct auth data",RC_FORBIDDEN:"Client behaves wrong so the replication was canceled. Mostly happens if the client tries to write data that it is not allowed to",SC1:"fieldnames do not match the regex",SC2:"SchemaCheck: name 'item' reserved for array-fields",SC3:"SchemaCheck: fieldname has a ref-array but items-type is not string",SC4:"SchemaCheck: fieldname has a ref but is not type string, [string,null] or array<string>",SC6:"SchemaCheck: primary can only be defined at top-level",SC7:"SchemaCheck: default-values can only be defined at top-level",SC8:"SchemaCheck: first level-fields cannot start with underscore _",SC10:"SchemaCheck: schema defines ._rev, this will be done automatically",SC11:"SchemaCheck: schema needs a number >=0 as version",SC13:"SchemaCheck: primary is always index, do not declare it as index",SC14:"SchemaCheck: primary is always unique, do not declare it as index",SC15:"SchemaCheck: primary cannot be encrypted",SC16:"SchemaCheck: primary must have type: string",SC17:"SchemaCheck: top-level fieldname is not allowed",SC18:"SchemaCheck: indexes must be an array",SC19:"SchemaCheck: indexes must contain strings or arrays of strings",SC20:"SchemaCheck: indexes.array must contain strings",SC21:"SchemaCheck: given index is not defined in schema",SC22:"SchemaCheck: given indexKey is not type:string",SC23:"SchemaCheck: fieldname is not allowed",SC24:"SchemaCheck: required fields must be set via array. See https://spacetelescope.github.io/understanding-json-schema/reference/object.html#required",SC25:"SchemaCheck: compoundIndexes needs to be specified in the indexes field",SC26:"SchemaCheck: indexes needs to be specified at collection schema level",SC27:"SchemaCheck: encrypted fields need to be specified at collection schema level",SC28:"SchemaCheck: encrypted fields is not defined in the schema",SC29:"SchemaCheck: missing object key 'properties'",SC30:"SchemaCheck: primaryKey is required",SC32:"SchemaCheck: primary field must have the type string/number/integer",SC33:"SchemaCheck: used primary key is not a property in the schema",SC34:"Fields of type string that are used in an index, must have set the maxLength attribute in the schema",SC35:"Fields of type number/integer that are used in an index, must have set the multipleOf attribute in the schema",SC36:"A field of this type cannot be used as index",SC37:"Fields of type number that are used in an index, must have set the minimum and maximum attribute in the schema",SC38:"Fields of type boolean that are used in an index, must be required in the schema",SC39:"The primary key must have the maxLength attribute set",SC40:"$ref fields in the schema are not allowed. RxDB cannot resolve related schemas because it would have a negative performance impact.It would have to run http requests on runtime. $ref fields should be resolved during build time.",SC41:"minimum, maximum and maxLength values for indexes must be real numbers, not Infinity or -Infinity",VD1:"Sub-schema not found, does the schemaPath exists in your schema?",VD2:"object does not match schema",S1:"You cannot create collections after calling RxDatabase.server()",GQL1:"GraphQL replication: cannot find sub schema by key",GQL3:"GraphQL replication: pull returns more documents then batchSize",CRDT1:"CRDT operations cannot be used because the crdt options are not set in the schema.",CRDT2:"RxDocument.incrementalModify() cannot be used when CRDTs are activated.",CRDT3:"To use CRDTs you MUST NOT set a conflictHandler because the default CRDT conflict handler must be used",SNH:"This should never happen"};var oh;function Bb(){if(!oh){var t=new Ka,e=Object.getOwnPropertyNames(t),r=Object.getOwnPropertyNames(Object.getPrototypeOf(t));oh=[...e,...r]}return oh}var ah;function Fb(){if(!ah){var t=new qa("pseudoInstance","memory"),e=Object.getOwnPropertyNames(t),r=Object.getOwnPropertyNames(Object.getPrototypeOf(t));ah=[...e,...r],t.destroy()}return ah}var QE=wl(Vn),YE=new QE,sh;function Pl(){if(!sh){var t=["deleted","synced"],e=Object.getOwnPropertyNames(YE),r=Object.getOwnPropertyNames(Vn);sh=[...e,...r,...t]}return sh}function XE(t){if(t!=="_deleted"){if(["properties"].includes(t))throw I("SC23",{fieldName:t});var e="^[a-zA-Z](?:[[a-zA-Z0-9_]*]?[a-zA-Z0-9])?$",r=new RegExp(e);if(t!=="_id"&&!t.match(r))throw I("SC1",{regex:e,fieldName:t})}}function ZE(t){var e=fe(t.primaryKey);function r(i,o,c){if(typeof i=="string"&&typeof o=="object"&&!Array.isArray(o)&&c.split(".").pop()!=="patternProperties"&&XE(i),Object.prototype.hasOwnProperty.call(o,"item")&&o.type!=="array")throw I("SC2",{fieldName:i});if(Object.prototype.hasOwnProperty.call(o,"required")&&typeof o.required=="boolean")throw I("SC24",{fieldName:i});if(Object.prototype.hasOwnProperty.call(o,"$ref"))throw I("SC40",{fieldName:i});if(Object.prototype.hasOwnProperty.call(o,"ref"))if(Array.isArray(o.type)){if(o.type.length>2||!o.type.includes("string")||!o.type.includes("null"))throw I("SC4",{fieldName:i})}else switch(o.type){case"string":break;case"array":if(!o.items||!o.items.type||o.items.type!=="string")throw I("SC3",{fieldName:i});break;default:throw I("SC4",{fieldName:i})}var l=c.split(".").length>=2;if(l&&o.default)throw I("SC7",{path:c});if(!l){if(i==="_id"&&e!=="_id")throw I("COL2",{fieldName:i});if(i.charAt(0)==="_"){if(i==="_id"||i==="_deleted")return;throw I("SC8",{fieldName:i})}}}function n(i,o){!i||typeof i!="object"||Object.keys(i).forEach(c=>{var l=i[c];!i.properties&&l&&typeof l=="object"&&!Array.isArray(i)&&r(c,l,o);var f=o;c!=="properties"&&(f=f+"."+c),n(l,f)})}return n(t,""),!0}function JE(t){if(!t.primaryKey)throw I("SC30",{schema:t});function e(f){if(!f)throw I("SC33",{schema:t});var g=f.type;if(!g||!["string","number","integer"].includes(g))throw I("SC32",{schema:t,args:{schemaPart:f}})}if(typeof t.primaryKey=="string"){var r=t.primaryKey,n=t.properties[r];e(n)}else{var i=t.primaryKey,o=Ie(t,i.key);e(o),i.fields.forEach(f=>{var g=Ie(t,f);e(g)})}var c=fe(t.primaryKey),l=t.properties[c];if(l.maxLength){if(!isFinite(l.maxLength))throw I("SC41",{schema:t,args:{primaryPathSchemaPart:l}})}else throw I("SC39",{schema:t,args:{primaryPathSchemaPart:l}})}function jb(t){for(var e=t.split("."),r="",n=0;n<e.length;n+=1)e[n]!=="[]"?r=r.concat(".properties.".concat(e[n])):r=r.concat(".items");return hr(r)}function Ub(t){if(!t.primaryKey)throw I("SC30",{schema:t});if(!Object.prototype.hasOwnProperty.call(t,"properties"))throw I("SC29",{schema:t});if(t.properties._rev)throw I("SC10",{schema:t});if(!Object.prototype.hasOwnProperty.call(t,"version")||typeof t.version!="number"||t.version<0)throw I("SC11",{version:t.version});if(ZE(t),JE(t),Object.keys(t.properties).forEach(e=>{var r=t.properties[e];if(e===t.primaryKey){if(t.indexes&&t.indexes.includes(e))throw I("SC13",{value:r,schema:t});if(r.unique)throw I("SC14",{value:r,schema:t});if(t.encrypted&&t.encrypted.includes(e))throw I("SC15",{value:r,schema:t});if(r.type!=="string")throw I("SC16",{value:r,schema:t})}if(Pl().includes(e))throw I("SC17",{key:e,schema:t})}),t.indexes){if(!Pr(t.indexes))throw I("SC18",{indexes:t.indexes,schema:t});t.indexes.forEach(e=>{if(!(typeof e=="string"||Array.isArray(e)))throw I("SC19",{index:e,schema:t});if(Array.isArray(e)){for(var r=0;r<e.length;r+=1)if(typeof e[r]!="string")throw I("SC20",{index:e,schema:t})}var n=Pr(e)?e:[e];n.forEach(i=>{var o=Ie(t,i),c=o.type;switch(c){case"string":var l=o.maxLength;if(!l)throw I("SC34",{index:e,field:i,schema:t});break;case"number":case"integer":var f=o.multipleOf;if(!f)throw I("SC35",{index:e,field:i,schema:t});var g=o.maximum,m=o.minimum;if(typeof g>"u"||typeof m>"u")throw I("SC37",{index:e,field:i,schema:t});if(!isFinite(g)||!isFinite(m))throw I("SC41",{index:e,field:i,schema:t});break;case"boolean":var _="",C=i;if(i.includes(".")){var R=i.split(".");C=R.pop(),_=R.join(".")}var A=_===""?t:Ie(t,_);if(!A.required||!A.required.includes(C))throw I("SC38",{index:e,field:i,schema:t});break;default:throw I("SC36",{fieldName:i,type:o.type,schema:t})}})})}Object.keys(Dc(t)).map(e=>{var r=e.split(".");return r.pop(),r.join(".")}).filter(e=>e!=="").filter((e,r,n)=>n.indexOf(e)===r).filter(e=>{var r=ke(t,e);return r&&!!r.index}).forEach(e=>{throw e=e.replace("properties.",""),e=e.replace(/\.properties\./g,"."),I("SC26",{index:hr(e),schema:t})}),(t.indexes||[]).reduce((e,r)=>(Pr(r)?fr(e,r):e.push(r),e),[]).filter((e,r,n)=>n.indexOf(e)===r).map(e=>{var r=jb(e),n=ke(t,r);if(!n||typeof n!="object")throw I("SC21",{index:e,schema:t});return{indexPath:e,schemaObj:n}}).filter(e=>e.schemaObj.type!=="string"&&e.schemaObj.type!=="integer"&&e.schemaObj.type!=="number"&&e.schemaObj.type!=="boolean").forEach(e=>{throw I("SC22",{key:e.indexPath,type:e.schemaObj.type,schema:t})}),Object.keys(Dc(t)).map(e=>{var r=e.split(".");return r.pop(),r.join(".")}).filter(e=>e!==""&&e!=="attachments").filter((e,r,n)=>n.indexOf(e)===r).filter(e=>{var r=ke(t,e);return r&&!!r.encrypted}).forEach(e=>{throw e=e.replace("properties.",""),e=e.replace(/\.properties\./g,"."),I("SC27",{index:hr(e),schema:t})}),t.encrypted&&t.encrypted.forEach(e=>{var r=jb(e),n=ke(t,r);if(!n||typeof n!="object")throw I("SC28",{field:e,schema:t})})}function Nl(t){t&&Object.entries(t).forEach(([e,r])=>{if(typeof e!="string")throw ae("COL14",{name:e});if(e.startsWith("_"))throw ae("COL15",{name:e});if(typeof r!="function")throw ae("COL16",{name:e,type:typeof e});if(Bb().includes(e)||Pl().includes(e))throw I("COL17",{name:e})})}function zb(t,e){var r=Object.keys(t.properties);e&&Object.keys(e).filter(n=>r.includes(n)).forEach(n=>{throw I("COL18",{funName:n})})}function Vb(t,e){if(typeof e!="object"||Array.isArray(e))throw ae("COL11",{schema:t});var r=wv(t);if(r.length!==Object.keys(e).length)throw I("COL12",{have:Object.keys(e),should:r});return r.map(n=>({v:n,s:e[n+1]})).filter(n=>typeof n.s!="function").forEach(n=>{throw ae("COL13",{version:n.v,type:typeof n,schema:t})}),!0}function Hb(t){if(Fb().includes(t.name))throw I("DB5",{name:t.name});qb(t.name)}function Wb(t){if(qb(t.name),t.name.includes("$"))throw I("DB13",{name:t.name});if(Gd(t.name)&&(t.name.endsWith("/")||t.name.endsWith("\\")))throw I("DB11",{name:t.name})}var Kb="^[a-z][_$a-z0-9\\-]*$",tO=new RegExp(Kb);function qb(t){if(typeof t!="string"||t.length===0)throw ae("UT1",{name:t});if(Gd(t))return!0;if(!t.match(tO)&&t!==":memory:")throw I("UT2",{regex:Kb,givenName:t});return!0}function Gb(t){var e=Object.prototype.toString.call(t.queryObj)==="[object Object]";if(!e)throw ae("QU11",{op:t.op,collection:t.collection.name,queryObj:t.queryObj});var r=["selector","limit","skip","sort","index"];if(Object.keys(t.queryObj).forEach(n=>{if(!r.includes(n))throw ae("QU11",{op:t.op,collection:t.collection.name,queryObj:t.queryObj,key:n,args:{validKeys:r}})}),t.op==="count"&&(t.queryObj.limit||t.queryObj.skip))throw I("QU15",{collection:t.collection.name,query:t.queryObj});Ll(t.queryObj)}function Qb(t){var e=t.rxQuery.collection.schema.jsonSchema,r=t.mangoQuery.selector,n=Object.keys(e.properties);Object.keys(r).filter(l=>!l.startsWith("$")).filter(l=>!l.includes(".")).forEach(l=>{if(!n.includes(l))throw I("QU13",{schema:e,field:l,query:t.mangoQuery})});var i=e.indexes?e.indexes:[],o=t.mangoQuery.index;if(o){var c=i.find(l=>Nn(l,o));if(!c)throw I("QU12",{collection:t.rxQuery.collection.name,query:t.mangoQuery,schema:e})}if(t.rxQuery.op==="count"&&!eO(t.rxQuery.collection.schema.jsonSchema,t.mangoQuery)&&!t.rxQuery.collection.database.allowSlowCount)throw I("QU14",{collection:t.rxQuery.collection,query:t.mangoQuery});t.mangoQuery.sort&&t.mangoQuery.sort.map(l=>Object.keys(l)[0]).filter(l=>!l.includes(".")).forEach(l=>{if(!n.includes(l))throw I("QU13",{schema:e,field:l,query:t.mangoQuery})}),Ll(t.mangoQuery)}function eO(t,e){var r=Ha(t,e);return r.queryPlan.selectorSatisfiedByIndex}function Ll(t){if(!(typeof t!="object"||t===null)){var e=Object.keys(t);e.forEach(r=>{var n=t[r];if(n instanceof RegExp)throw I("QU16",{field:r,query:t});Array.isArray(n)?n.forEach(i=>Ll(i)):Ll(n)})}}function Yb(t,e){if(!t)throw I("DOC20",{primaryKey:t,document:e});if(t!==t.trim())throw I("DOC21",{primaryKey:t,document:e});if(t.includes("\r")||t.includes(`
`))throw I("DOC22",{primaryKey:t,document:e});if(t.includes('"'))throw I("DOC23",{primaryKey:t,document:e})}function Xb(t){if(typeof t!="object"||t===null)return!1;for(var e in t)if(t.hasOwnProperty(e)&&(t[e]instanceof Date||typeof t[e]=="object"&&Xb(t[e])))return!0;return!1}function Zb(t,e){var r=fe(t.schema.primaryKey),n=function(o){o.document=Nc(r,t.schema,o.document),o.previous&&Object.keys(o.previous._meta).forEach(c=>{if(!Object.prototype.hasOwnProperty.call(o.document._meta,c))throw I("SNH",{dataBefore:o.previous,dataAfter:o.document,args:{metaFieldName:c}})});try{typeof structuredClone=="function"?structuredClone(o):JSON.parse(JSON.stringify(o))}catch{throw I("DOC24",{collection:t.collectionName,document:o.document})}if(Xb(o.document))throw I("DOC24",{collection:t.collectionName,document:o.document})};for(var i of e)n(i)}var Jb=!1;function t_(t){return U(this,null,function*(){if(!(Jb||typeof window>"u"||typeof location>"u")&&!($n.premium&&typeof $n.premium=="string"&&(yield po($n.premium))===Tc)){Jb=!0;var e=document.createElement("iframe");e.style.visibility="hidden",e.width="1px",e.height="1px",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.opacity="0.1",e.src="https://rxdb.info/html/dev-mode-iframe.html?version="+wi,document.body.appendChild(e)}})}var rO=!0;function nO(t){return!t||typeof t=="string"||typeof t=="number"?t:Vd(t)}var iO="dev-mode",e_={name:iO,rxdb:!0,init:()=>{rO&&console.warn(["-------------- RxDB dev-mode warning -------------------------------","you are seeing this because you use the RxDB dev-mode plugin https://rxdb.info/dev-mode.html?console=dev-mode ","This is great in development mode, because it will run many checks to ensure","that you use RxDB correct. If you see this in production mode,","you did something wrong because the dev-mode plugin will decrease the performance.","","\u{1F917} Hint: To get the most out of RxDB, check out the Premium Plugins","to get access to faster storages and more professional features: https://rxdb.info/premium?console=dev-mode ","","You can disable this warning by calling disableWarnings() from the dev-mode plugin.","---------------------------------------------------------------------"].join(`
`))},overwritable:{isDevMode(){return!0},deepFreezeWhenDevMode:nO,tunnelErrorMessage(t){if(!ih[t])throw console.error("RxDB: Error-Code not known: "+t),new Error("Error-Code "+t+" not known, contact the maintainer");return ih[t]}},hooks:{preCreateRxSchema:{after:Ub},preCreateRxDatabase:{after:function(t){Wb(t)}},createRxDatabase:{after:function(t){return U(this,null,function*(){t_(t.database)})}},preCreateRxCollection:{after:function(t){if(Hb(t),zb(t.schema,t.methods),t.name.charAt(0)==="_")throw I("DB2",{name:t.name});if(!t.schema)throw I("DB4",{name:t.name,args:t})}},createRxDocument:{before:function(t){Yb(t.primary,t.toJSON(!0))}},preCreateRxQuery:{after:function(t){Gb(t)}},prePrepareQuery:{after:t=>{Qb(t)}},preStorageWrite:{before:t=>{Zb(t.storageInstance,t.rows)}},createRxCollection:{after:t=>{Nl(t.creator.statics),Nl(t.creator.methods),Nl(t.creator.attachments),t.creator.schema&&t.creator.migrationStrategies&&Vb(t.creator.schema,t.creator.migrationStrategies)}}}};var $l=Rw(r_(),1),n_=Symbol.for("Dexie"),Ya=globalThis[n_]||(globalThis[n_]=$l.default);if($l.default.semVer!==Ya.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${$l.default.semVer} and ${Ya.semVer}`);var{liveQuery:R6,mergeRanges:E6,rangesOverlap:O6,RangeSet:D6,cmp:A6,Entity:k6,PropModSymbol:I6,PropModification:T6,replacePrefix:M6,add:P6,remove:N6}=Ya;var Xa="docs",oO="changes",i_="attachments",Fl="dexie",o_=new Map,Bl=new Map;function a_(t,e,r,n){var i="rxdb-dexie-"+t+"--"+n.version+"--"+e,o=Fe(o_,i,()=>{var c=U(null,null,function*(){var l=At(r);l.autoOpen=!1;var f=new Ya(i,l),g={[Xa]:aO(n),[oO]:"++sequence, id",[i_]:"id"};return f.version(1).stores(g),yield f.open(),{dexieDb:f,dexieTable:f[Xa],dexieAttachmentsTable:f[i_],booleanIndexes:sO(n)}});return o_.set(i,o),Bl.set(o,0),c});return o}function s_(t){return U(this,null,function*(){var e=yield t,r=Bl.get(t),n=r-1;n===0?(e.dexieDb.close(),Bl.delete(t)):Bl.set(t,n)})}var uh="__";function Di(t){var e=t.split(".");if(e.length>1)return e.map(n=>Di(n)).join(".");if(t.startsWith("|")){var r=t.substring(1);return uh+r}else return t}function c_(t){var e=t.split(".");if(e.length>1)return e.map(n=>c_(n)).join(".");if(t.startsWith(uh)){var r=t.substring(uh.length);return"|"+r}else return t}function l_(t,e){if(!e)return e;var r=At(e);return r=dh(r),t.forEach(n=>{var i=ke(e,n),o=i?"1":"0",c=Di(n);Xd(r,c,o)}),r}function hh(t,e){return e&&(e=At(e),e=fh(e),t.forEach(r=>{var n=ke(e,r),i=n==="1";Xd(e,r,i)}),e)}function dh(t){if(!t||typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(r=>dh(r));if(typeof t=="object"){var e={};return Object.entries(t).forEach(([r,n])=>{typeof n=="object"&&(n=dh(n)),e[Di(r)]=n}),e}}function fh(t){if(!t||typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(r=>fh(r));if(typeof t=="object"){var e={};return Object.entries(t).forEach(([r,n])=>{(typeof n=="object"||Array.isArray(t))&&(n=fh(n)),e[c_(r)]=n}),e}}function aO(t){var e=[],r=fe(t.primaryKey);e.push([r]),e.push(["_deleted",r]),t.indexes&&t.indexes.forEach(o=>{var c=ka(o);e.push(c)}),e.push(["_meta.lwt",r]),e.push(["_meta.lwt"]),e=e.map(o=>o.map(c=>Di(c)));var n=e.map(o=>o.length===1?o[0]:"["+o.join("+")+"]");n=n.filter((o,c,l)=>l.indexOf(o)===c);var i=n.join(", ");return i}function ph(t,e){return U(this,null,function*(){var r=yield t,n=yield r.dexieTable.bulkGet(e);return n.map(i=>hh(r.booleanIndexes,i))})}function Za(t,e){return t+"||"+e}function sO(t){var e=new Set,r=[];return t.indexes?(t.indexes.forEach(n=>{var i=ka(n);i.forEach(o=>{if(!e.has(o)){e.add(o);var c=Ie(t,o);c.type==="boolean"&&r.push(o)}})}),r.push("_deleted"),Gg(r)):r}function u_(t){return t===Si?-1/0:t}function d_(t,e,r){if(t.includes(e)){var n=r===Ci||r===!0?"1":"0";return n}else return r}function f_(t,e,r){if(!r){if(typeof window>"u")throw new Error("IDBKeyRange missing");r=window.IDBKeyRange}var n=e.startKeys.map((c,l)=>{var f=e.index[l];return d_(t,f,c)}).map(u_),i=e.endKeys.map((c,l)=>{var f=e.index[l];return d_(t,f,c)}).map(u_),o=r.bound(n,i,!e.inclusiveStart,!e.inclusiveEnd);return o}function mh(t,e){return U(this,null,function*(){var r=yield t.internals,n=e.query,i=n.skip?n.skip:0,o=n.limit?n.limit:1/0,c=i+o,l=e.queryPlan,f=!1;l.selectorSatisfiedByIndex||(f=So(t.schema,e.query));var g=f_(r.booleanIndexes,l,r.dexieDb._options.IDBKeyRange),m=l.index,_=[];if(yield r.dexieDb.transaction("r",r.dexieTable,R=>U(null,null,function*(){var A=R.idbtrans,B=A.objectStore(Xa),W,Z;Z="["+m.map(X=>Di(X)).join("+")+"]",W=B.index(Z);var tt=W.openCursor(g);yield new Promise(X=>{tt.onsuccess=function(Bt){var yt=Bt.target.result;if(yt){var Mt=hh(r.booleanIndexes,yt.value);(!f||f(Mt))&&_.push(Mt),l.sortSatisfiedByIndex&&_.length===c?X():yt.continue()}else X()}})})),!l.sortSatisfiedByIndex){var C=bl(t.schema,e.query);_=_.sort(C)}return _=_.slice(i,c),{documents:_}})}function h_(t,e){return U(this,null,function*(){var r=yield t.internals,n=e.queryPlan,i=n.index,o=f_(r.booleanIndexes,n,r.dexieDb._options.IDBKeyRange),c=-1;return yield r.dexieDb.transaction("r",r.dexieTable,l=>U(null,null,function*(){var f=l.idbtrans,g=f.objectStore(Xa),m,_;_="["+i.map(R=>Di(R)).join("+")+"]",m=g.index(_);var C=m.count(o);c=yield new Promise((R,A)=>{C.onsuccess=function(){R(C.result)},C.onerror=B=>A(B)})})),c})}var cO=ne(),gh=!1,lO=function(){function t(r,n,i,o,c,l,f,g){this.changes$=new st,this.instanceId=cO++,this.storage=r,this.databaseName=n,this.collectionName=i,this.schema=o,this.internals=c,this.options=l,this.settings=f,this.devMode=g,this.primaryPath=fe(this.schema.primaryKey)}var e=t.prototype;return e.bulkWrite=function(n,i){return U(this,null,function*(){Ai(this),!gh&&(!$n.premium||typeof $n.premium!="string"||(yield po($n.premium))!==Tc)&&console.warn(["-------------- RxDB Open Core RxStorage -------------------------------","You are using the free Dexie.js based RxStorage implementation from RxDB https://rxdb.info/rx-storage-dexie.html?console=dexie ","While this is a great option, we want to let you know that there are faster storage solutions available in our premium plugins.","For professional users and production environments, we highly recommend considering these premium options to enhance performance and reliability."," https://rxdb.info/premium?console=dexie ","If you already purchased premium access you can disable this log by calling the setPremiumFlag() function from rxdb-premium/plugins/shared.","---------------------------------------------------------------------"].join(`
`)),gh=!0,n.forEach(m=>{if(!m.document._rev||m.previous&&!m.previous._rev)throw I("SNH",{args:{row:m}})});var o=yield this.internals,c={error:[]};this.devMode&&(n=n.map(m=>{var _=Oi(m.document);return{previous:m.previous,document:_}}));var l=n.map(m=>m.document[this.primaryPath]),f;if(yield o.dexieDb.transaction("rw",o.dexieTable,o.dexieAttachmentsTable,()=>U(this,null,function*(){var m=new Map,_=yield ph(this.internals,l);_.forEach(A=>{var B=A;return B&&m.set(B[this.primaryPath],B),B}),f=Ky(this,this.primaryPath,m,n,i),c.error=f.errors;var C=[];f.bulkInsertDocs.forEach(A=>{C.push(A.document)}),f.bulkUpdateDocs.forEach(A=>{C.push(A.document)}),C=C.map(A=>l_(o.booleanIndexes,A)),C.length>0&&(yield o.dexieTable.bulkPut(C));var R=[];f.attachmentsAdd.forEach(A=>{R.push({id:Za(A.documentId,A.attachmentId),data:A.attachmentData.data})}),f.attachmentsUpdate.forEach(A=>{R.push({id:Za(A.documentId,A.attachmentId),data:A.attachmentData.data})}),yield o.dexieAttachmentsTable.bulkPut(R),yield o.dexieAttachmentsTable.bulkDelete(f.attachmentsRemove.map(A=>Za(A.documentId,A.attachmentId)))})),f=Dt(f),f.eventBulk.events.length>0){var g=Dt(f.newestRow).document;f.eventBulk.checkpoint={id:g[this.primaryPath],lwt:g._meta.lwt},f.eventBulk.endTime=ne(),this.changes$.next(f.eventBulk)}return c})},e.findDocumentsById=function(n,i){return U(this,null,function*(){Ai(this);var o=yield this.internals,c=[];return yield o.dexieDb.transaction("r",o.dexieTable,()=>U(this,null,function*(){var l=yield ph(this.internals,n);l.forEach(f=>{f&&(!f._deleted||i)&&c.push(f)})})),c})},e.query=function(n){return Ai(this),mh(this,n)},e.count=function(n){return U(this,null,function*(){if(n.queryPlan.selectorSatisfiedByIndex){var i=yield h_(this,n);return{count:i,mode:"fast"}}else{var o=yield mh(this,n);return{count:o.documents.length,mode:"slow"}}})},e.changeStream=function(){return Ai(this),this.changes$.asObservable()},e.cleanup=function(n){return U(this,null,function*(){Ai(this);var i=yield this.internals;return yield i.dexieDb.transaction("rw",i.dexieTable,()=>U(this,null,function*(){var o=ne()-n,c=yield i.dexieTable.where("_meta.lwt").below(o).toArray(),l=[];c.forEach(f=>{f._deleted==="1"&&l.push(f[this.primaryPath])}),yield i.dexieTable.bulkDelete(l)})),!0})},e.getAttachmentData=function(n,i,o){return U(this,null,function*(){Ai(this);var c=yield this.internals,l=Za(n,i);return yield c.dexieDb.transaction("r",c.dexieAttachmentsTable,()=>U(this,null,function*(){var f=yield c.dexieAttachmentsTable.get(l);if(f)return f.data;throw new Error("attachment missing documentId: "+n+" attachmentId: "+i)}))})},e.remove=function(){return U(this,null,function*(){Ai(this);var n=yield this.internals;return yield n.dexieTable.clear(),this.close()})},e.close=function(){return this.closed?this.closed:(this.closed=U(this,null,function*(){this.changes$.complete(),yield s_(this.internals)}),this.closed)},e.conflictResultionTasks=function(){return new st},e.resolveConflictResultionTask=function(n){return U(this,null,function*(){})},t}();function p_(t,e,r){return U(this,null,function*(){var n=a_(e.databaseName,e.collectionName,r,e.schema),i=new lO(t,e.databaseName,e.collectionName,e.schema,n,e.options,r,e.devMode);return yield $b(Fl,e,i),Promise.resolve(i)})}function Ai(t){if(t.closed)throw new Error("RxStorageInstanceDexie is closed "+t.databaseName+"-"+t.collectionName)}var uO=function(){function t(r){this.name=Fl,this.rxdbVersion=wi,this.settings=r}var e=t.prototype;return e.createStorageInstance=function(n){return Gy(n),p_(this,n,this.settings)},t}();function m_(t={}){var e=new uO(t);return e}var vh={};Ps(vh,{$all:()=>uR,$and:()=>kf,$bitsAllClear:()=>g_,$bitsAllSet:()=>v_,$bitsAnyClear:()=>y_,$bitsAnySet:()=>b_,$elemMatch:()=>Nf,$eq:()=>dl,$exists:()=>$f,$expr:()=>sR,$gt:()=>fl,$gte:()=>hl,$in:()=>pl,$jsonSchema:()=>cR,$lt:()=>ml,$lte:()=>gl,$mod:()=>Mf,$ne:()=>vl,$nin:()=>yl,$nor:()=>If,$not:()=>Tf,$or:()=>Ua,$regex:()=>Pf,$size:()=>Lf,$type:()=>Bf,$where:()=>lR});var Wn=t=>Rt((e,r,n)=>{let i=0;if(r instanceof Array)for(let o of r)i=i|1<<o;else i=r;return t(e&i,i)});var g_=Wn((t,e)=>t==0);var v_=Wn((t,e)=>t==e);var y_=Wn((t,e)=>t<e);var b_=Wn((t,e)=>t>0);var jl={};Ps(jl,{$addToSet:()=>fO,$bit:()=>pO,$currentDate:()=>mO,$inc:()=>gO,$max:()=>vO,$min:()=>yO,$mul:()=>bO,$pop:()=>_O,$pull:()=>yh,$pullAll:()=>xO,$push:()=>CO,$rename:()=>SO,$set:()=>bh,$unset:()=>RO});var Ao=(t,e)=>{switch(t){case"deep":return _o(e);case"copy":return Un(e)?new Date(e):ot(e)?[...e]:ft(e)?$({},e):e;default:return e}},dO=/^[a-z]+[a-zA-Z0-9]*$/;function __(t){if(!t.includes(".$"))return[{parent:t,selector:t},[]];let e=t.indexOf(".$"),r=t.indexOf("]"),n=t.substring(0,e),i=t.substring(e+3,r);V(i===""||dO.test(i),"The filter <identifier> must begin with a lowercase letter and contain only alphanumeric characters.");let o=t.substring(r+2),[c,l]=o?__(o):[];return[{selector:t,parent:n,child:i||"$",next:c},[i,...l||[]].filter(Boolean)]}var Tt=(t,e,r,n,i)=>{let{parent:o,child:c,next:l}=e;if(!c){let g=!1;return yo(t,o,(_,C)=>g=!!n(_,C)||g,i),g}let f=Oe(t,o);return ot(f)?f.map((g,m)=>r[c]&&!r[c].test({[c]:g})?!1:l?Tt(g,l,r,n,i):n(f,m)).some(Boolean):!1};function $t(t,e,r,n){let i=[];for(let[o,c]of Object.entries(t)){let[l,f]=__(o);if(!f.length)n(c,l,{})&&i.push(l.parent);else{let g={};e.forEach(_=>{Object.keys(_).forEach(C=>{f.forEach(R=>{(C===R||C.startsWith(R+"."))&&(g[R]=g[R]||{},Object.assign(g[R],{[C]:_[C]}))})})});let m={};for(let[_,C]of Object.entries(g))m[_]=new Jt(C,r.queryOptions);n(c,l,m)&&i.push(l.parent)}}return i}var fO=(t,e,r=[],n={})=>$t(e,r,n,(i,o,c)=>{let l={$each:[i]};return ft(i)&&Ut(i,"$each")&&Object.assign(l,i),Tt(t,o,c,(f,g)=>{let m=f[g]||=[];return nn([m,l.$each]).length===l.$each.length?!1:(f[g]=Ao(n.cloneMode,$a(m.concat(l.$each))),!0)},{buildGraph:!0})});var hO=new Set(["and","or","xor"]),pO=(t,e,r=[],n={})=>$t(e,r,n,(i,o,c)=>{let l=Object.keys(i);return V(l.length===1&&hO.has(l[0]),`Invalid bit operator '${l[0]}'. Must be one of 'and', 'or', or 'xor'.`),Tt(t,o,c,(f,g)=>{let m=f[g],_=i[l[0]];if(m!==void 0&&!(ht(m)&&ht(_)))return!1;switch(m=m||0,l[0]){case"and":f[g]=m&_;break;case"or":f[g]=m|_;break;case"xor":f[g]=m^_;break}return f[g]!==m},{buildGraph:!0})});var mO=(t,e,r=[],n={})=>{let i=Date.now();return $t(e,r,n,(o,c,l)=>Tt(t,c,l,(f,g)=>(f[g]=i,!0),{buildGraph:!0}))};var gO=(t,e,r=[],n={})=>$t(e,r,n,(i,o,c)=>{if(!o.child){let l=Oe(t,o.parent);V(l===void 0||ht(l),"cannot apply $inc to a value of non-numeric type")}return Tt(t,o,c,(l,f)=>(l[f]=(l[f]||=0)+i,!0),{buildGraph:!0})});var vO=(t,e,r=[],n={})=>$t(e,r,n,(i,o,c)=>Tt(t,o,c,(l,f)=>l[f]!==void 0&&Nt(l[f],i)>-1?!1:(l[f]=i,!0),{buildGraph:!0}));var yO=(t,e,r=[],n={})=>$t(e,r,n,(i,o,c)=>Tt(t,o,c,(l,f)=>l[f]!==void 0&&Nt(l[f],i)<1?!1:(l[f]=i,!0),{buildGraph:!0}));var bO=(t,e,r=[],n={})=>$t(e,r,n,(i,o,c)=>Tt(t,o,c,(l,f)=>{let g=l[f];return l[f]=l[f]===void 0?0:l[f]*i,l[f]!==g},{buildGraph:!0}));var _O=(t,e,r=[],n={})=>$t(e,r,n,(i,o,c)=>Tt(t,o,c,(l,f)=>{let g=l[f];return V(ot(g),`path '${o.selector}' contains an element of non-array type.`),g.length?(i===-1?g.splice(0,1):g.pop(),!0):!1}));var yh=(t,e,r=[],n={})=>$t(e,r,n,(i,o,c)=>{let l=!ft(i)||Object.keys(i).some(Ue),f=new Jt(l?{k:i}:i,n.queryOptions),g=l?m=>f.test({k:m}):m=>f.test(m);return Tt(t,o,c,(m,_)=>{let C=m[_],R=new Array;return C.map(B=>{let W=g(B);return W||R.push(B),W}).some(Boolean)?(m[_]=R,!0):!1})});var xO=(t,e,r=[],n={})=>{let i={};return Object.entries(e).forEach(([o,c])=>{i[o]={$in:c}}),yh(t,i,r,n)};var wO=Object.freeze(["$each","$slice","$sort","$position"]),CO=(t,e,r=[],n={})=>$t(e,r,n,(i,o,c)=>{let l={$each:[i]};return ft(i)&&wO.some(f=>Ut(i,f))&&Object.assign(l,i),Tt(t,o,c,(f,g)=>{let m=f[g]||=[],_=m.slice(0,l.$slice||m.length),C=m.length,R=ht(l.$position)?l.$position:m.length;if(m.splice(R,0,...Ao(n.cloneMode,l.$each)),l.$sort){let A=ft(l.$sort)?Object.keys(l.$sort||{}).pop():"",B=A?l.$sort[A]:l.$sort,W=A?Z=>Oe(Z,A):Z=>Z;m.sort((Z,tt)=>B*Nt(W(Z),W(tt)))}return ht(l.$slice)&&(l.$slice<0?m.splice(0,m.length+l.$slice):m.splice(l.$slice)),C!=m.length||!he(_,m)},{descendArray:!0,buildGraph:!0})});var bh=(t,e,r=[],n={})=>$t(e,r,n,(i,o,c)=>Tt(t,o,c,(l,f)=>he(l[f],i)?!1:(l[f]=Ao(n.cloneMode,i),!0),{buildGraph:!0}));var SO=(t,e,r=[],n={})=>{let i=[],o=$t(e,r,n,(c,l,f)=>Tt(t,l,f,(g,m)=>Ut(g,m)?(i.push(...bh(t,{[c]:g[m]},r,n)),delete g[m],!0):!1));return Array.from(new Set(o.concat(i)))};var RO=(t,e,r=[],n={})=>$t(e,r,n,(i,o,c)=>Tt(t,o,c,(l,f)=>Ut(l,f)?(ot(l)?l[f]=null:delete l[f],!0):!1));function _h(t){return t=gt($({},t),{queryOptions:on(t.queryOptions)}),t.queryOptions.context.addQueryOps(vh).addExpressionOps(Ef).addExpressionOps(Of),(e,r,n=[],i={},o={})=>{let c=Object.assign({cloneMode:"copy"},t,o);Object.assign(c,{queryOptions:on(Object.assign({useStrictMode:!1},c?.queryOptions))}),n=n||[],i=i||{};let l=Object.entries(r);V(l.length===1,"Update expression must contain only one operator.");let[f,g]=l[0];V(Ut(jl,f),`Update operator '${f}' is not supported.`);let m=jl[f];return Object.keys(i).length&&!(i instanceof Jt?i:new Jt(i,c.queryOptions)).test(e)?[]:m(e,g,n,c)}}var $G=_h({});var xh;function wh(t,e){if(!xh){var r=_h({cloneMode:"none"});xh=(n,i)=>{var o=Je(n);return r(o,i),o}}return xh(t,e)}function EO(t){return this.incrementalModify(e=>{var r=wh(e,t);return r})}function OO(t){var e=this._data,r=wh(e,t);return this._saveData(r,e)}function DO(t){return U(this,null,function*(){return zn(this.asRxQuery,e=>e.update(t))})}var x_={name:"update",rxdb:!0,prototypes:{RxDocument:t=>{t.update=OO,t.incrementalUpdate=EO},RxQuery:t=>{t.update=DO}}};var AO={title:"posts schema",version:0,type:"object",primaryKey:"id",properties:{id:{type:"string",primary:!0,maxLength:100},title:{type:"string"},body:{type:"string"}}};function kO(){return U(this,null,function*(){kl(ob),kl(x_),rm()&&kl(e_)})}kO();var eQ=(()=>{let e=class e{constructor(){this.dataBaseReadySubj=new ve(!1),this.dataBaseReady$=this.dataBaseReadySubj.asObservable()}getDatabaseCollection(n){if(!this.rxDatabase)throw new Error("Database is not initialized. Please make sure the database is initialized before getting the collection");return this.rxDatabase[n]}initDB(n){return U(this,null,function*(){return this.rxDatabase&&this.rxDatabase.name===n&&!this.rxDatabase.destroyed?this.rxDatabase:(this.rxDatabase=yield hb({name:n,storage:m_(),password:"myLongAndStupidPassword"}),yield this.rxDatabase.addCollections({posts:{schema:AO}}),this.dataBaseReadySubj.next(!0),this.rxDatabase)})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var oQ=(()=>{let e=class e{constructor(){this.activePortal=new st,this.portal$=this.activePortal.asObservable()}setPortal(n){this.activePortal.next(n)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function cQ(t){return t&&typeof t.connect=="function"&&!(t instanceof ii)}var IO=function(t){return t[t.REPLACED=0]="REPLACED",t[t.INSERTED=1]="INSERTED",t[t.MOVED=2]="MOVED",t[t.REMOVED=3]="REMOVED",t}(IO||{}),dQ=new lt("_ViewRepeater");var TO=20,Ja=(()=>{class t{_ngZone=E(zt);_platform=E(_e);_renderer=E(qr).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new st;_scrolledCount=0;scrollContainers=new Map;register(r){this.scrollContainers.has(r)||this.scrollContainers.set(r,r.elementScrolled().subscribe(()=>this._scrolled.next(r)))}deregister(r){let n=this.scrollContainers.get(r);n&&(n.unsubscribe(),this.scrollContainers.delete(r))}scrolled(r=TO){return this._platform.isBrowser?new Ui(n=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let i=r>0?this._scrolled.pipe(ju(r)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):et()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((r,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(r,n){let i=this.getAncestorScrollContainers(r);return this.scrolled(n).pipe(bt(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(r){let n=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,r)&&n.push(o)}),n}_scrollableContainsElement(r,n){let i=Gi(n),o=r.getElementRef().nativeElement;do if(i==o)return!0;while(i=i.parentElement);return!1}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Sh=(()=>{class t{elementRef=E(Gt);scrollDispatcher=E(Ja);ngZone=E(zt);dir=E(Sn,{optional:!0});_scrollElement=this.elementRef.nativeElement;_destroyed=new st;_renderer=E(Sr);_cleanupScroll;_elementScrolled=new st;constructor(){}ngOnInit(){this._cleanupScroll=this.ngZone.runOutsideAngular(()=>this._renderer.listen(this._scrollElement,"scroll",r=>this._elementScrolled.next(r))),this.scrollDispatcher.register(this)}ngOnDestroy(){this._cleanupScroll?.(),this._elementScrolled.complete(),this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(r){let n=this.elementRef.nativeElement,i=this.dir&&this.dir.value=="rtl";r.left==null&&(r.left=i?r.end:r.start),r.right==null&&(r.right=i?r.start:r.end),r.bottom!=null&&(r.top=n.scrollHeight-n.clientHeight-r.bottom),i&&Yi()!=ur.NORMAL?(r.left!=null&&(r.right=n.scrollWidth-n.clientWidth-r.left),Yi()==ur.INVERTED?r.left=r.right:Yi()==ur.NEGATED&&(r.left=r.right?-r.right:r.right)):r.right!=null&&(r.left=n.scrollWidth-n.clientWidth-r.right),this._applyScrollToOptions(r)}_applyScrollToOptions(r){let n=this.elementRef.nativeElement;Gs()?n.scrollTo(r):(r.top!=null&&(n.scrollTop=r.top),r.left!=null&&(n.scrollLeft=r.left))}measureScrollOffset(r){let n="left",i="right",o=this.elementRef.nativeElement;if(r=="top")return o.scrollTop;if(r=="bottom")return o.scrollHeight-o.clientHeight-o.scrollTop;let c=this.dir&&this.dir.value=="rtl";return r=="start"?r=c?i:n:r=="end"&&(r=c?n:i),c&&Yi()==ur.INVERTED?r==n?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:c&&Yi()==ur.NEGATED?r==n?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:r==n?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Pt({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return t})(),MO=20,ko=(()=>{class t{_platform=E(_e);_listeners;_viewportSize;_change=new st;_document=E(oe,{optional:!0});constructor(){let r=E(zt),n=E(qr).createRenderer(null,null);r.runOutsideAngular(()=>{if(this._platform.isBrowser){let i=o=>this._change.next(o);this._listeners=[n.listen("window","resize",i),n.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(r=>r()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let r={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),r}getViewportRect(){let r=this.getViewportScrollPosition(),{width:n,height:i}=this.getViewportSize();return{top:r.top,left:r.left,bottom:r.top+i,right:r.left+n,height:i,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let r=this._document,n=this._getWindow(),i=r.documentElement,o=i.getBoundingClientRect(),c=-o.top||r.body.scrollTop||n.scrollY||i.scrollTop||0,l=-o.left||r.body.scrollLeft||n.scrollX||i.scrollLeft||0;return{top:c,left:l}}change(r=MO){return r>0?this._change.pipe(ju(r)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let r=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:r.innerWidth,height:r.innerHeight}:{width:0,height:0}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ch=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Qt({type:t});static \u0275inj=qt({})}return t})(),Rh=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Qt({type:t});static \u0275inj=qt({imports:[aa,Ch,aa,Ch]})}return t})();var w_=Gs();function To(t){return new Ul(t.get(ko),t.get(oe))}var Ul=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,r){this._viewportRuler=e,this._document=r}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Yt(-this._previousScrollPosition.left),e.style.top=Yt(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,r=this._document.body,n=e.style,i=r.style,o=n.scrollBehavior||"",c=i.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),w_&&(n.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),w_&&(n.scrollBehavior=o,i.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let r=this._document.documentElement,n=this._viewportRuler.getViewportSize();return r.scrollHeight>n.height||r.scrollWidth>n.width}};function A_(t,e){return new zl(t.get(Ja),t.get(zt),t.get(ko),e)}var zl=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,r,n,i){this._scrollDispatcher=e,this._ngZone=r,this._viewportRuler=n,this._config=i}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(bt(r=>!r||!this._overlayRef.overlayElement.contains(r.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let r=this._viewportRuler.getViewportScrollPosition().top;Math.abs(r-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var ts=class{enable(){}disable(){}attach(){}};function Eh(t,e){return e.some(r=>{let n=t.bottom<r.top,i=t.top>r.bottom,o=t.right<r.left,c=t.left>r.right;return n||i||o||c})}function C_(t,e){return e.some(r=>{let n=t.top<r.top,i=t.bottom>r.bottom,o=t.left<r.left,c=t.right>r.right;return n||i||o||c})}function ql(t,e){return new Vl(t.get(Ja),t.get(ko),t.get(zt),e)}var Vl=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,r,n,i){this._scrollDispatcher=e,this._viewportRuler=r,this._ngZone=n,this._config=i}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let r=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:i}=this._viewportRuler.getViewportSize();Eh(r,[{width:n,height:i,bottom:i,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},k_=(()=>{class t{_injector=E(Ct);constructor(){}noop=()=>new ts;close=r=>A_(this._injector,r);block=()=>To(this._injector);reposition=r=>ql(this._injector,r);static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),cn=class{positionStrategy;scrollStrategy=new ts;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(e){if(e){let r=Object.keys(e);for(let n of r)e[n]!==void 0&&(this[n]=e[n])}}};var Hl=class{connectionPair;scrollableViewProperties;constructor(e,r){this.connectionPair=e,this.scrollableViewProperties=r}};var I_=(()=>{class t{_attachedOverlays=[];_document=E(oe);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(r){this.remove(r),this._attachedOverlays.push(r)}remove(r){let n=this._attachedOverlays.indexOf(r);n>-1&&this._attachedOverlays.splice(n,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),T_=(()=>{class t extends I_{_ngZone=E(zt);_renderer=E(qr).createRenderer(null,null);_cleanupKeydown;add(r){super.add(r),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=r=>{let n=this._attachedOverlays;for(let i=n.length-1;i>-1;i--)if(n[i]._keydownEvents.observers.length>0){this._ngZone.run(()=>n[i]._keydownEvents.next(r));break}};static \u0275fac=(()=>{let r;return function(i){return(r||(r=Ne(t)))(i||t)}})();static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),M_=(()=>{class t extends I_{_platform=E(_e);_ngZone=E(zt);_renderer=E(qr).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(r){if(super.add(r),!this._isAttached){let n=this._document.body,i={capture:!0},o=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[o.listen(n,"pointerdown",this._pointerDownListener,i),o.listen(n,"click",this._clickListener,i),o.listen(n,"auxclick",this._clickListener,i),o.listen(n,"contextmenu",this._clickListener,i)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(r=>r()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=r=>{this._pointerDownEventTarget=Yr(r)};_clickListener=r=>{let n=Yr(r),i=r.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:n;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let c=o.length-1;c>-1;c--){let l=o[c];if(l._outsidePointerEvents.observers.length<1||!l.hasAttached())continue;if(S_(l.overlayElement,n)||S_(l.overlayElement,i))break;let f=l._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>f.next(r)):f.next(r)}};static \u0275fac=(()=>{let r;return function(i){return(r||(r=Ne(t)))(i||t)}})();static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function S_(t,e){let r=typeof ShadowRoot<"u"&&ShadowRoot,n=e;for(;n;){if(n===t)return!0;n=r&&n instanceof ShadowRoot?n.host:n.parentNode}return!1}var P_=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Xt({type:t,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(n,i){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return t})(),Gl=(()=>{class t{_platform=E(_e);_containerElement;_document=E(oe);_styleLoader=E(di);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let r="cdk-overlay-container";if(this._platform.isBrowser||rd()){let i=this._document.querySelectorAll(`.${r}[platform="server"], .${r}[platform="test"]`);for(let o=0;o<i.length;o++)i[o].remove()}let n=this._document.createElement("div");n.classList.add(r),rd()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}_loadStyles(){this._styleLoader.load(P_)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Oh=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(e,r,n,i){this._renderer=r,this._ngZone=n,this.element=e.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=r.listen(this.element,"click",i)}detach(){this._ngZone.runOutsideAngular(()=>{let e=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(e,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),e.style.pointerEvents="none",e.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},Io=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new st;_attachments=new st;_detachments=new st;_positionStrategy;_scrollStrategy;_locationChanges=xr.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new st;_outsidePointerEvents=new st;_afterNextRenderRef;constructor(e,r,n,i,o,c,l,f,g,m=!1,_,C){this._portalOutlet=e,this._host=r,this._pane=n,this._config=i,this._ngZone=o,this._keyboardDispatcher=c,this._document=l,this._location=f,this._outsideClickDispatcher=g,this._animationsDisabled=m,this._injector=_,this._renderer=C,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let r=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=sr(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof r?.onDestroy=="function"&&r.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),r}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,e&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=$($({},this._config),e),this._updateElementSize()}setDirection(e){this._config=gt($({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Yt(this._config.width),e.height=Yt(this._config.height),e.minWidth=Yt(this._config.minWidth),e.minHeight=Yt(this._config.minHeight),e.maxWidth=Yt(this._config.maxWidth),e.maxHeight=Yt(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new Oh(this._document,this._renderer,this._ngZone,r=>{this._backdropClick.next(r)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(e))}):this._backdropRef.element.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(e,r,n){let i=Zu(r||[]).filter(o=>!!o);i.length&&(n?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenEmpty(){let e=!1;try{this._detachContentAfterRenderRef=sr(()=>{e=!0,this._detachContent()},{injector:this._injector})}catch(r){if(e)throw r;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let e=this._scrollStrategy;e?.disable(),e?.detach?.()}},R_="cdk-overlay-connected-position-bounding-box",NO=/([A-Za-z%]+)$/;function kh(t,e){return new Wl(e,t.get(ko),t.get(oe),t.get(_e),t.get(Gl))}var Wl=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new st;_resizeSubscription=xr.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,r,n,i,o){this._viewportRuler=r,this._document=n,this._platform=i,this._overlayContainer=o,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(R_),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,r=this._overlayRect,n=this._viewportRect,i=this._containerRect,o=[],c;for(let l of this._preferredPositions){let f=this._getOriginPoint(e,i,l),g=this._getOverlayPoint(f,r,l),m=this._getOverlayFit(g,r,n,l);if(m.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(l,f);return}if(this._canFitWithFlexibleDimensions(m,g,n)){o.push({position:l,origin:f,overlayRect:r,boundingBoxRect:this._calculateBoundingBoxRect(f,l)});continue}(!c||c.overlayFit.visibleArea<m.visibleArea)&&(c={overlayFit:m,overlayPoint:g,originPoint:f,position:l,overlayRect:r})}if(o.length){let l=null,f=-1;for(let g of o){let m=g.boundingBoxRect.width*g.boundingBoxRect.height*(g.position.weight||1);m>f&&(f=m,l=g)}this._isPushed=!1,this._applyPosition(l.position,l.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(c.position,c.originPoint);return}this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ki(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(R_),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let r=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,r)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,r,n){let i;if(n.originX=="center")i=e.left+e.width/2;else{let c=this._isRtl()?e.right:e.left,l=this._isRtl()?e.left:e.right;i=n.originX=="start"?c:l}r.left<0&&(i-=r.left);let o;return n.originY=="center"?o=e.top+e.height/2:o=n.originY=="top"?e.top:e.bottom,r.top<0&&(o-=r.top),{x:i,y:o}}_getOverlayPoint(e,r,n){let i;n.overlayX=="center"?i=-r.width/2:n.overlayX==="start"?i=this._isRtl()?-r.width:0:i=this._isRtl()?0:-r.width;let o;return n.overlayY=="center"?o=-r.height/2:o=n.overlayY=="top"?0:-r.height,{x:e.x+i,y:e.y+o}}_getOverlayFit(e,r,n,i){let o=O_(r),{x:c,y:l}=e,f=this._getOffset(i,"x"),g=this._getOffset(i,"y");f&&(c+=f),g&&(l+=g);let m=0-c,_=c+o.width-n.width,C=0-l,R=l+o.height-n.height,A=this._subtractOverflows(o.width,m,_),B=this._subtractOverflows(o.height,C,R),W=A*B;return{visibleArea:W,isCompletelyWithinViewport:o.width*o.height===W,fitsInViewportVertically:B===o.height,fitsInViewportHorizontally:A==o.width}}_canFitWithFlexibleDimensions(e,r,n){if(this._hasFlexibleDimensions){let i=n.bottom-r.y,o=n.right-r.x,c=E_(this._overlayRef.getConfig().minHeight),l=E_(this._overlayRef.getConfig().minWidth),f=e.fitsInViewportVertically||c!=null&&c<=i,g=e.fitsInViewportHorizontally||l!=null&&l<=o;return f&&g}return!1}_pushOverlayOnScreen(e,r,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let i=O_(r),o=this._viewportRect,c=Math.max(e.x+i.width-o.width,0),l=Math.max(e.y+i.height-o.height,0),f=Math.max(o.top-n.top-e.y,0),g=Math.max(o.left-n.left-e.x,0),m=0,_=0;return i.width<=o.width?m=g||-c:m=e.x<this._viewportMargin?o.left-n.left-e.x:0,i.height<=o.height?_=f||-l:_=e.y<this._viewportMargin?o.top-n.top-e.y:0,this._previousPushAmount={x:m,y:_},{x:e.x+m,y:e.y+_}}_applyPosition(e,r){if(this._setTransformOrigin(e),this._setOverlayElementStyles(r,e),this._setBoundingBoxStyles(r,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let n=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!LO(this._lastScrollVisibility,n)){let i=new Hl(e,n);this._positionChanges.next(i)}this._lastScrollVisibility=n}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let r=this._boundingBox.querySelectorAll(this._transformOriginSelector),n,i=e.overlayY;e.overlayX==="center"?n="center":this._isRtl()?n=e.overlayX==="start"?"right":"left":n=e.overlayX==="start"?"left":"right";for(let o=0;o<r.length;o++)r[o].style.transformOrigin=`${n} ${i}`}_calculateBoundingBoxRect(e,r){let n=this._viewportRect,i=this._isRtl(),o,c,l;if(r.overlayY==="top")c=e.y,o=n.height-c+this._viewportMargin;else if(r.overlayY==="bottom")l=n.height-e.y+this._viewportMargin*2,o=n.height-l+this._viewportMargin;else{let R=Math.min(n.bottom-e.y+n.top,e.y),A=this._lastBoundingBoxSize.height;o=R*2,c=e.y-R,o>A&&!this._isInitialRender&&!this._growAfterOpen&&(c=e.y-A/2)}let f=r.overlayX==="start"&&!i||r.overlayX==="end"&&i,g=r.overlayX==="end"&&!i||r.overlayX==="start"&&i,m,_,C;if(g)C=n.width-e.x+this._viewportMargin*2,m=e.x-this._viewportMargin;else if(f)_=e.x,m=n.right-e.x;else{let R=Math.min(n.right-e.x+n.left,e.x),A=this._lastBoundingBoxSize.width;m=R*2,_=e.x-R,m>A&&!this._isInitialRender&&!this._growAfterOpen&&(_=e.x-A/2)}return{top:c,left:_,bottom:l,right:C,width:m,height:o}}_setBoundingBoxStyles(e,r){let n=this._calculateBoundingBoxRect(e,r);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));let i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;i.height=Yt(n.height),i.top=Yt(n.top),i.bottom=Yt(n.bottom),i.width=Yt(n.width),i.left=Yt(n.left),i.right=Yt(n.right),r.overlayX==="center"?i.alignItems="center":i.alignItems=r.overlayX==="end"?"flex-end":"flex-start",r.overlayY==="center"?i.justifyContent="center":i.justifyContent=r.overlayY==="bottom"?"flex-end":"flex-start",o&&(i.maxHeight=Yt(o)),c&&(i.maxWidth=Yt(c))}this._lastBoundingBoxSize=n,ki(this._boundingBox.style,i)}_resetBoundingBoxStyles(){ki(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ki(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,r){let n={},i=this._hasExactPosition(),o=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(i){let m=this._viewportRuler.getViewportScrollPosition();ki(n,this._getExactOverlayY(r,e,m)),ki(n,this._getExactOverlayX(r,e,m))}else n.position="static";let l="",f=this._getOffset(r,"x"),g=this._getOffset(r,"y");f&&(l+=`translateX(${f}px) `),g&&(l+=`translateY(${g}px)`),n.transform=l.trim(),c.maxHeight&&(i?n.maxHeight=Yt(c.maxHeight):o&&(n.maxHeight="")),c.maxWidth&&(i?n.maxWidth=Yt(c.maxWidth):o&&(n.maxWidth="")),ki(this._pane.style,n)}_getExactOverlayY(e,r,n){let i={top:"",bottom:""},o=this._getOverlayPoint(r,this._overlayRect,e);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),e.overlayY==="bottom"){let c=this._document.documentElement.clientHeight;i.bottom=`${c-(o.y+this._overlayRect.height)}px`}else i.top=Yt(o.y);return i}_getExactOverlayX(e,r,n){let i={left:"",right:""},o=this._getOverlayPoint(r,this._overlayRect,e);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n));let c;if(this._isRtl()?c=e.overlayX==="end"?"left":"right":c=e.overlayX==="end"?"right":"left",c==="right"){let l=this._document.documentElement.clientWidth;i.right=`${l-(o.x+this._overlayRect.width)}px`}else i.left=Yt(o.x);return i}_getScrollVisibility(){let e=this._getOriginRect(),r=this._pane.getBoundingClientRect(),n=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:C_(e,n),isOriginOutsideView:Eh(e,n),isOverlayClipped:C_(r,n),isOverlayOutsideView:Eh(r,n)}}_subtractOverflows(e,...r){return r.reduce((n,i)=>n-Math.max(i,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,r=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+r-this._viewportMargin,width:e-2*this._viewportMargin,height:r-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,r){return r==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Zu(e).forEach(r=>{r!==""&&this._appliedPanelClasses.indexOf(r)===-1&&(this._appliedPanelClasses.push(r),this._pane.classList.add(r))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof Gt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let r=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+r,height:n,width:r}}};function ki(t,e){for(let r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function E_(t){if(typeof t!="number"&&t!=null){let[e,r]=t.split(NO);return!r||r==="px"?parseFloat(e):null}return t||null}function O_(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function LO(t,e){return t===e?!0:t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}var D_="cdk-global-overlay-wrapper";function Kn(t){return new Kl}var Kl=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){let r=e.getConfig();this._overlayRef=e,this._width&&!r.width&&e.updateSize({width:this._width}),this._height&&!r.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(D_),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,r=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:i,height:o,maxWidth:c,maxHeight:l}=n,f=(i==="100%"||i==="100vw")&&(!c||c==="100%"||c==="100vw"),g=(o==="100%"||o==="100vh")&&(!l||l==="100%"||l==="100vh"),m=this._xPosition,_=this._xOffset,C=this._overlayRef.getConfig().direction==="rtl",R="",A="",B="";f?B="flex-start":m==="center"?(B="center",C?A=_:R=_):C?m==="left"||m==="end"?(B="flex-end",R=_):(m==="right"||m==="start")&&(B="flex-start",A=_):m==="left"||m==="start"?(B="flex-start",R=_):(m==="right"||m==="end")&&(B="flex-end",A=_),e.position=this._cssPosition,e.marginLeft=f?"0":R,e.marginTop=g?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=f?"0":A,r.justifyContent=B,r.alignItems=g?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,r=this._overlayRef.hostElement,n=r.style;r.classList.remove(D_),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},N_=(()=>{class t{_injector=E(Ct);constructor(){}global(){return Kn()}flexibleConnectedTo(r){return kh(this._injector,r)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ii(t,e){t.get(di).load(P_);let r=t.get(Gl),n=t.get(oe),i=t.get(Xr),o=t.get(zs),c=t.get(Sn),l=n.createElement("div"),f=n.createElement("div");f.id=i.getId("cdk-overlay-"),f.classList.add("cdk-overlay-pane"),l.appendChild(f),r.getContainerElement().appendChild(l);let g=new Ks(f,o,t),m=new cn(e),_=t.get(Sr,null,{optional:!0})||t.get(qr).createRenderer(null,null);return m.direction=m.direction||c.value,new Io(g,l,f,m,t.get(zt),t.get(T_),n,t.get(Or),t.get(M_),e?.disableAnimations??t.get(Fs,null,{optional:!0})==="NoopAnimations",t.get(ar),_)}var L_=(()=>{class t{scrollStrategies=E(k_);_positionBuilder=E(N_);_injector=E(Ct);constructor(){}create(r){return Ii(this._injector,r)}position(){return this._positionBuilder}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),$O=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],$_=new lt("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=E(Ct);return()=>ql(t)}}),Dh=(()=>{class t{elementRef=E(Gt);constructor(){}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Pt({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]})}return t})(),BO=(()=>{class t{_dir=E(Sn,{optional:!0});_injector=E(Ct);_overlayRef;_templatePortal;_backdropSubscription=xr.EMPTY;_attachSubscription=xr.EMPTY;_detachSubscription=xr.EMPTY;_positionSubscription=xr.EMPTY;_offsetX;_offsetY;_position;_scrollStrategyFactory=E($_);_disposeOnNavigation=!1;_ngZone=E(zt);origin;positions;positionStrategy;get offsetX(){return this._offsetX}set offsetX(r){this._offsetX=r,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(r){this._offsetY=r,this._position&&this._updatePositionStrategy(this._position)}width;height;minWidth;minHeight;backdropClass;panelClass;viewportMargin=0;scrollStrategy;open=!1;disableClose=!1;transformOriginSelector;hasBackdrop=!1;lockPosition=!1;flexibleDimensions=!1;growAfterOpen=!1;push=!1;get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(r){this._disposeOnNavigation=r}backdropClick=new ee;positionChange=new ee;attach=new ee;detach=new ee;overlayKeydown=new ee;overlayOutsideClick=new ee;constructor(){let r=E(Kr),n=E(Cn);this._templatePortal=new Dr(r,n),this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef?.dispose()}ngOnChanges(r){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef?.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),r.origin&&this.open&&this._position.apply()),r.open&&(this.open?this.attachOverlay():this.detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=$O);let r=this._overlayRef=Ii(this._injector,this._buildConfig());this._attachSubscription=r.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=r.detachments().subscribe(()=>this.detach.emit()),r.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),n.keyCode===27&&!this.disableClose&&!Qi(n)&&(n.preventDefault(),this.detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{let i=this._getOriginElement(),o=Yr(n);(!i||i!==o&&!i.contains(o))&&this.overlayOutsideClick.next(n)})}_buildConfig(){let r=this._position=this.positionStrategy||this._createPositionStrategy(),n=new cn({direction:this._dir||"ltr",positionStrategy:r,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(n.width=this.width),(this.height||this.height===0)&&(n.height=this.height),(this.minWidth||this.minWidth===0)&&(n.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(r){let n=this.positions.map(i=>({originX:i.originX,originY:i.originY,overlayX:i.overlayX,overlayY:i.overlayY,offsetX:i.offsetX||this.offsetX,offsetY:i.offsetY||this.offsetY,panelClass:i.panelClass||void 0}));return r.setOrigin(this._getOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let r=kh(this._injector,this._getOrigin());return this._updatePositionStrategy(r),r}_getOrigin(){return this.origin instanceof Dh?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof Dh?this.origin.elementRef.nativeElement:this.origin instanceof Gt?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(r=>{this.backdropClick.emit(r)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(Ip(()=>this.positionChange.observers.length>0)).subscribe(r=>{this._ngZone.run(()=>this.positionChange.emit(r)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()})),this.open=!0}detachOverlay(){this._overlayRef?.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.open=!1}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Pt({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",de],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",de],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",de],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",de],push:[2,"cdkConnectedOverlayPush","push",de],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",de]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Wr]})}return t})();function FO(t){let e=E(Ct);return()=>ql(e)}var jO={provide:$_,useFactory:FO},Ti=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Qt({type:t});static \u0275inj=qt({providers:[L_,jO],imports:[aa,Jr,Rh,Rh]})}return t})();function UO(t,e){if(t&1){let r=Zp();Qr(0,"div",1)(1,"button",2),si("click",function(){Pp(r);let i=Qu();return Np(i.action())}),Yu(2),Rr()()}if(t&2){let r=Qu();Wi(2),Xu(" ",r.data.action," ")}}var zO=["label"];function VO(t,e){}var HO=Math.pow(2,31)-1,es=class{_overlayRef;instance;containerInstance;_afterDismissed=new st;_afterOpened=new st;_onAction=new st;_durationTimeoutId;_dismissedByAction=!1;constructor(e,r){this._overlayRef=r,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,HO))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},B_=new lt("MatSnackBarData"),Mo=class{politeness="polite";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"},WO=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Pt({type:t,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return t})(),KO=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Pt({type:t,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return t})(),qO=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Pt({type:t,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return t})(),F_=(()=>{class t{snackBarRef=E(es);data=E(B_);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Xt({type:t,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["matButton","","matSnackBarAction","",3,"click"]],template:function(n,i){n&1&&(Qr(0,"div",0),Yu(1),Rr(),Yp(2,UO,3,1,"div",1)),n&2&&(Wi(),Xu(" ",i.data.message,`
`),Wi(),Xp(i.hasAction?2:-1))},dependencies:[Pm,WO,KO,qO],styles:[`.mat-mdc-simple-snack-bar{display:flex}
`],encapsulation:2,changeDetection:0})}return t})(),Ih="_mat-snack-bar-enter",Th="_mat-snack-bar-exit",GO=(()=>{class t extends Rn{_ngZone=E(zt);_elementRef=E(Gt);_changeDetectorRef=E(Er);_platform=E(_e);_animationsDisabled=Ge();snackBarConfig=E(Mo);_document=E(oe);_trackedModals=new Set;_enterFallback;_exitFallback;_injector=E(Ct);_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new st;_onExit=new st;_onEnter=new st;_animationState="void";_live;_label;_role;_liveElementId=E(Xr).getId("mat-snack-bar-container-live-");constructor(){super();let r=this.snackBarConfig;r.politeness==="assertive"&&!r.announcementMessage?this._live="assertive":r.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(r){this._assertNotAttached();let n=this._portalOutlet.attachComponentPortal(r);return this._afterPortalAttached(),n}attachTemplatePortal(r){this._assertNotAttached();let n=this._portalOutlet.attachTemplatePortal(r);return this._afterPortalAttached(),n}attachDomPortal=r=>{this._assertNotAttached();let n=this._portalOutlet.attachDomPortal(r);return this._afterPortalAttached(),n};onAnimationEnd(r){r===Th?this._completeExit():r===Ih&&(clearTimeout(this._enterFallback),this._ngZone.run(()=>{this._onEnter.next(),this._onEnter.complete()}))}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce(),this._animationsDisabled?sr(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(Ih)))},{injector:this._injector}):(clearTimeout(this._enterFallback),this._enterFallback=setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-snack-bar-fallback-visible"),this.onAnimationEnd(Ih)},200)))}exit(){return this._destroyed?et(void 0):(this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._animationsDisabled?sr(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(Th)))},{injector:this._injector}):(clearTimeout(this._exitFallback),this._exitFallback=setTimeout(()=>this.onAnimationEnd(Th),200))}),this._onExit)}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){clearTimeout(this._exitFallback),queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let r=this._elementRef.nativeElement,n=this.snackBarConfig.panelClass;n&&(Array.isArray(n)?n.forEach(c=>r.classList.add(c)):r.classList.add(n)),this._exposeToModals();let i=this._label.nativeElement,o="mdc-snackbar__label";i.classList.toggle(o,!i.querySelector(`.${o}`))}_exposeToModals(){let r=this._liveElementId,n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let i=0;i<n.length;i++){let o=n[i],c=o.getAttribute("aria-owns");this._trackedModals.add(o),c?c.indexOf(r)===-1&&o.setAttribute("aria-owns",c+" "+r):o.setAttribute("aria-owns",r)}}_clearFromModals(){this._trackedModals.forEach(r=>{let n=r.getAttribute("aria-owns");if(n){let i=n.replace(this._liveElementId,"").trim();i.length>0?r.setAttribute("aria-owns",i):r.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{if(this._destroyed)return;let r=this._elementRef.nativeElement,n=r.querySelector("[aria-hidden]"),i=r.querySelector("[aria-live]");if(n&&i){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&n.contains(document.activeElement)&&(o=document.activeElement),n.removeAttribute("aria-hidden"),i.appendChild(n),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Xt({type:t,selectors:[["mat-snack-bar-container"]],viewQuery:function(n,i){if(n&1&&(qi(En,7),qi(zO,7)),n&2){let o;li(o=ui())&&(i._portalOutlet=o.first),li(o=ui())&&(i._label=o.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:6,hostBindings:function(n,i){n&1&&si("animationend",function(c){return i.onAnimationEnd(c.animationName)})("animationcancel",function(c){return i.onAnimationEnd(c.animationName)}),n&2&&Ke("mat-snack-bar-container-enter",i._animationState==="visible")("mat-snack-bar-container-exit",i._animationState==="hidden")("mat-snack-bar-container-animations-enabled",!i._animationsDisabled)},features:[be],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(n,i){n&1&&(Qr(0,"div",1)(1,"div",2,0)(3,"div",3),Ki(4,VO,0,0,"ng-template",4),Rr(),lr(5,"div"),Rr()()),n&2&&(Wi(5),cr("aria-live",i._live)("role",i._role)("id",i._liveElementId))},dependencies:[En],styles:[`@keyframes _mat-snack-bar-enter{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _mat-snack-bar-exit{from{opacity:1}to{opacity:0}}.mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-snack-bar-container-animations-enabled{opacity:0}.mat-snack-bar-container-animations-enabled.mat-snack-bar-fallback-visible{opacity:1}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-enter{animation:_mat-snack-bar-enter 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-exit{animation:_mat-snack-bar-exit 75ms cubic-bezier(0.4, 0, 1, 1) forwards}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mat-snack-bar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mat-snack-bar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-snack-bar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mat-snack-bar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-snack-bar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-snack-bar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mat-snack-bar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-button-text-state-layer-color:currentColor;--mat-button-text-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}
`],encapsulation:2})}return t})();function QO(){return new Mo}var YO=new lt("mat-snack-bar-default-options",{providedIn:"root",factory:QO}),XO=(()=>{class t{_live=E(ym);_injector=E(Ct);_breakpointObserver=E(td);_parentSnackBar=E(t,{optional:!0,skipSelf:!0});_defaultConfig=E(YO);_animationsDisabled=Ge();_snackBarRefAtThisLevel=null;simpleSnackBarComponent=F_;snackBarContainerComponent=GO;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){let r=this._parentSnackBar;return r?r._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(r){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=r:this._snackBarRefAtThisLevel=r}constructor(){}openFromComponent(r,n){return this._attach(r,n)}openFromTemplate(r,n){return this._attach(r,n)}open(r,n="",i){let o=$($({},this._defaultConfig),i);return o.data={message:r,action:n},o.announcementMessage===r&&(o.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,o)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(r,n){let i=n&&n.viewContainerRef&&n.viewContainerRef.injector,o=Ct.create({parent:i||this._injector,providers:[{provide:Mo,useValue:n}]}),c=new Zr(this.snackBarContainerComponent,n.viewContainerRef,o),l=r.attach(c);return l.instance.snackBarConfig=n,l.instance}_attach(r,n){let i=$($($({},new Mo),this._defaultConfig),n),o=this._createOverlay(i),c=this._attachSnackBarContainer(o,i),l=new es(c,o);if(r instanceof Kr){let f=new Dr(r,null,{$implicit:i.data,snackBarRef:l});l.instance=c.attachTemplatePortal(f)}else{let f=this._createInjector(i,l),g=new Zr(r,void 0,f),m=c.attachComponentPortal(g);l.instance=m.instance}return this._breakpointObserver.observe(Cm.HandsetPortrait).pipe(Hi(o.detachments())).subscribe(f=>{o.overlayElement.classList.toggle(this.handsetCssClass,f.matches)}),i.announcementMessage&&c._onAnnounce.subscribe(()=>{this._live.announce(i.announcementMessage,i.politeness)}),this._animateSnackBar(l,i),this._openedSnackBarRef=l,this._openedSnackBarRef}_animateSnackBar(r,n){r.afterDismissed().subscribe(()=>{this._openedSnackBarRef==r&&(this._openedSnackBarRef=null),n.announcementMessage&&this._live.clear()}),n.duration&&n.duration>0&&r.afterOpened().subscribe(()=>r._dismissAfter(n.duration)),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{r.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):r.containerInstance.enter()}_createOverlay(r){let n=new cn;n.direction=r.direction;let i=Kn(this._injector),o=r.direction==="rtl",c=r.horizontalPosition==="left"||r.horizontalPosition==="start"&&!o||r.horizontalPosition==="end"&&o,l=!c&&r.horizontalPosition!=="center";return c?i.left("0"):l?i.right("0"):i.centerHorizontally(),r.verticalPosition==="top"?i.top("0"):i.bottom("0"),n.positionStrategy=i,n.disableAnimations=this._animationsDisabled,Ii(this._injector,n)}_createInjector(r,n){let i=r&&r.viewContainerRef&&r.viewContainerRef.injector;return Ct.create({parent:i||this._injector,providers:[{provide:es,useValue:n},{provide:B_,useValue:r.data}]})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var zY=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Qt({type:t});static \u0275inj=qt({providers:[XO],imports:[Ti,Jr,Nm,qe,F_,qe]})}return t})();var WY={APP:{POSTS:"app.posts",NOT_FOUND:"app.not-found"},POSTS:{DETAIL:"posts.detail",CREATE:"posts.create",EDIT:"posts.edit"}};function ZO(t,e){}var qn=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;disableAnimations=!1;providers;container;templateContext};var Ph=(()=>{class t extends Rn{_elementRef=E(Gt);_focusTrapFactory=E(vm);_config;_interactivityChecker=E(gm);_ngZone=E(zt);_focusMonitor=E(Ws);_renderer=E(Sr);_platform=E(_e);_document=E(oe,{optional:!0});_portalOutlet;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_changeDetectorRef=E(Er);_injector=E(Ct);_isDestroyed=!1;constructor(){super(),this._config=E(qn,{optional:!0})||new qn,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(r){this._ariaLabelledByQueue.push(r),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(r){let n=this._ariaLabelledByQueue.indexOf(r);n>-1&&(this._ariaLabelledByQueue.splice(n,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(r){this._portalOutlet.hasAttached();let n=this._portalOutlet.attachComponentPortal(r);return this._contentAttached(),n}attachTemplatePortal(r){this._portalOutlet.hasAttached();let n=this._portalOutlet.attachTemplatePortal(r);return this._contentAttached(),n}attachDomPortal=r=>{this._portalOutlet.hasAttached();let n=this._portalOutlet.attachDomPortal(r);return this._contentAttached(),n};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(r,n){this._interactivityChecker.isFocusable(r)||(r.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let i=()=>{o(),c(),r.removeAttribute("tabindex")},o=this._renderer.listen(r,"blur",i),c=this._renderer.listen(r,"mousedown",i)})),r.focus(n)}_focusByCssSelector(r,n){let i=this._elementRef.nativeElement.querySelector(r);i&&this._forceFocus(i,n)}_trapFocus(r){this._isDestroyed||sr(()=>{let n=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||n.focus(r);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(r)||this._focusDialogContainer(r);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',r);break;default:this._focusByCssSelector(this._config.autoFocus,r);break}},{injector:this._injector})}_restoreFocus(){let r=this._config.restoreFocus,n=null;if(typeof r=="string"?n=this._document.querySelector(r):typeof r=="boolean"?n=r?this._elementFocusedBeforeDialogWasOpened:null:r&&(n=r),this._config.restoreFocus&&n&&typeof n.focus=="function"){let i=ia(),o=this._elementRef.nativeElement;(!i||i===this._document.body||i===o||o.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(n,this._closeInteractionType),this._closeInteractionType=null):n.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(r){this._elementRef.nativeElement.focus?.(r)}_containsFocus(){let r=this._elementRef.nativeElement,n=ia();return r===n||r.contains(n)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=ia()))}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Xt({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(n,i){if(n&1&&qi(En,7),n&2){let o;li(o=ui())&&(i._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(n,i){n&2&&cr("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[be],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(n,i){n&1&&Ki(0,ZO,0,0,"ng-template",0)},dependencies:[En],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return t})(),rs=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new st;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(e,r){this.overlayRef=e,this.config=r,this.disableClose=r.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=r.id,this.keydownEvents.subscribe(n=>{n.keyCode===27&&!this.disableClose&&!Qi(n)&&(n.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{!this.disableClose&&this._canClose()?this.close(void 0,{focusOrigin:"mouse"}):this.containerInstance._recaptureFocus?.()}),this._detachSubscription=e.detachments().subscribe(()=>{r.closeOnOverlayDetachments!==!1&&this.close()})}close(e,r){if(this._canClose(e)){let n=this.closed;this.containerInstance._closeInteractionType=r?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),n.next(e),n.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",r=""){return this.overlayRef.updateSize({width:e,height:r}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}_canClose(e){let r=this.config;return!!this.containerInstance&&(!r.closePredicate||r.closePredicate(e,r,this.componentInstance))}},JO=new lt("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=E(Ct);return()=>To(t)}}),tD=new lt("DialogData"),eD=new lt("DefaultDialogConfig");function rD(t){let e=Bs(t),r=new ee;return{valueSignal:e,get value(){return e()},change:r,ngOnDestroy(){r.complete()}}}var Nh=(()=>{class t{_injector=E(Ct);_defaultOptions=E(eD,{optional:!0});_parentDialog=E(t,{optional:!0,skipSelf:!0});_overlayContainer=E(Gl);_idGenerator=E(Xr);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new st;_afterOpenedAtThisLevel=new st;_ariaHiddenElements=new Map;_scrollStrategy=E(JO);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=xn(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(or(void 0)));constructor(){}open(r,n){let i=this._defaultOptions||new qn;n=$($({},i),n),n.id=n.id||this._idGenerator.getId("cdk-dialog-"),n.id&&this.getDialogById(n.id);let o=this._getOverlayConfig(n),c=Ii(this._injector,o),l=new rs(c,n),f=this._attachContainer(c,l,n);return l.containerInstance=f,this._attachDialogContent(r,l,f,n),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(l),l.closed.subscribe(()=>this._removeOpenDialog(l,!0)),this.afterOpened.next(l),l}closeAll(){Mh(this.openDialogs,r=>r.close())}getDialogById(r){return this.openDialogs.find(n=>n.id===r)}ngOnDestroy(){Mh(this._openDialogsAtThisLevel,r=>{r.config.closeOnDestroy===!1&&this._removeOpenDialog(r,!1)}),Mh(this._openDialogsAtThisLevel,r=>r.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(r){let n=new cn({positionStrategy:r.positionStrategy||Kn().centerHorizontally().centerVertically(),scrollStrategy:r.scrollStrategy||this._scrollStrategy(),panelClass:r.panelClass,hasBackdrop:r.hasBackdrop,direction:r.direction,minWidth:r.minWidth,minHeight:r.minHeight,maxWidth:r.maxWidth,maxHeight:r.maxHeight,width:r.width,height:r.height,disposeOnNavigation:r.closeOnNavigation,disableAnimations:r.disableAnimations});return r.backdropClass&&(n.backdropClass=r.backdropClass),n}_attachContainer(r,n,i){let o=i.injector||i.viewContainerRef?.injector,c=[{provide:qn,useValue:i},{provide:rs,useValue:n},{provide:Io,useValue:r}],l;i.container?typeof i.container=="function"?l=i.container:(l=i.container.type,c.push(...i.container.providers(i))):l=Ph;let f=new Zr(l,i.viewContainerRef,Ct.create({parent:o||this._injector,providers:c}));return r.attach(f).instance}_attachDialogContent(r,n,i,o){if(r instanceof Kr){let c=this._createInjector(o,n,i,void 0),l={$implicit:o.data,dialogRef:n};o.templateContext&&(l=$($({},l),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),i.attachTemplatePortal(new Dr(r,null,l,c))}else{let c=this._createInjector(o,n,i,this._injector),l=i.attachComponentPortal(new Zr(r,o.viewContainerRef,c));n.componentRef=l,n.componentInstance=l.instance}}_createInjector(r,n,i,o){let c=r.injector||r.viewContainerRef?.injector,l=[{provide:tD,useValue:r.data},{provide:rs,useValue:n}];return r.providers&&(typeof r.providers=="function"?l.push(...r.providers(n,r,i)):l.push(...r.providers)),r.direction&&(!c||!c.get(Sn,null,{optional:!0}))&&l.push({provide:Sn,useValue:rD(r.direction)}),Ct.create({parent:c||o,providers:l})}_removeOpenDialog(r,n){let i=this.openDialogs.indexOf(r);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,c)=>{o?c.setAttribute("aria-hidden",o):c.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),n&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let r=this._overlayContainer.getContainerElement();if(r.parentElement){let n=r.parentElement.children;for(let i=n.length-1;i>-1;i--){let o=n[i];o!==r&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let r=this._parentDialog;return r?r._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Mh(t,e){let r=t.length;for(;r--;)e(t[r])}var j_=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Qt({type:t});static \u0275inj=qt({providers:[Nh],imports:[Ti,Jr,bm,Jr]})}return t})();function nD(t,e){}var is=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;enterAnimationDuration;exitAnimationDuration},Lh="mdc-dialog--open",U_="mdc-dialog--opening",z_="mdc-dialog--closing",iD=150,oD=75,W_=(()=>{class t extends Ph{_animationStateChanged=new ee;_animationsEnabled=!Ge();_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?H_(this._config.enterAnimationDuration)??iD:0;_exitAnimationDuration=this._animationsEnabled?H_(this._config.exitAnimationDuration)??oD:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(V_,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(U_,Lh)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(Lh),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(Lh),this._animationsEnabled?(this._hostElement.style.setProperty(V_,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(z_)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(r){this._actionSectionCount+=r,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(U_,z_)}_waitForAnimationToComplete(r,n){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(n,r)}_requestAnimationFrame(r){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(r):r()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(r){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:r})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(r){let n=super.attachComponentPortal(r);return n.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),n}static \u0275fac=(()=>{let r;return function(i){return(r||(r=Ne(t)))(i||t)}})();static \u0275cmp=Xt({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(n,i){n&2&&(Gu("id",i._config.id),cr("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),Ke("_mat-animation-noopable",!i._animationsEnabled)("mat-mdc-dialog-container-with-actions",i._actionSectionCount>0))},features:[be],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(n,i){n&1&&(Qr(0,"div",0)(1,"div",1),Ki(2,nD,0,0,"ng-template",2),Rr()())},dependencies:[En],styles:[`.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mat-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mat-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mat-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mat-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mat-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mat-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mat-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mat-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mat-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mat-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mat-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mat-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mat-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}
`],encapsulation:2})}return t})(),V_="--mat-dialog-transition-duration";function H_(t){return t==null?null:typeof t=="number"?t:t.endsWith("ms")?oa(t.substring(0,t.length-2)):t.endsWith("s")?oa(t.substring(0,t.length-1))*1e3:t==="0"?0:null}var ns=function(t){return t[t.OPEN=0]="OPEN",t[t.CLOSING=1]="CLOSING",t[t.CLOSED=2]="CLOSED",t}(ns||{}),Po=class{_ref;_config;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new st;_beforeClosed=new st;_result;_closeFallbackTimeout;_state=ns.OPEN;_closeInteractionType;constructor(e,r,n){this._ref=e,this._config=r,this._containerInstance=n,this.disableClose=r.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),n._animationStateChanged.pipe(bt(i=>i.state==="opened"),wr(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),n._animationStateChanged.pipe(bt(i=>i.state==="closed"),wr(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Ls(this.backdropClick(),this.keydownEvents().pipe(bt(i=>i.keyCode===27&&!this.disableClose&&!Qi(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),$h(this,i.type==="keydown"?"keyboard":"mouse"))})}close(e){let r=this._config.closePredicate;r&&!r(e,this._config,this.componentInstance)||(this._result=e,this._containerInstance._animationStateChanged.pipe(bt(n=>n.state==="closing"),wr(1)).subscribe(n=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=ns.CLOSING,this._containerInstance._startExitAnimation())}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let r=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?r.left(e.left):r.right(e.right):r.centerHorizontally(),e&&(e.top||e.bottom)?e.top?r.top(e.top):r.bottom(e.bottom):r.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",r=""){return this._ref.updateSize(e,r),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=ns.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function $h(t,e,r){return t._closeInteractionType=e,t.close(r)}var K_=new lt("MatMdcDialogData"),q_=new lt("mat-mdc-dialog-default-options"),G_=new lt("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let t=E(Ct);return()=>To(t)}}),Ql=(()=>{class t{_defaultOptions=E(q_,{optional:!0});_scrollStrategy=E(G_);_parentDialog=E(t,{optional:!0,skipSelf:!0});_idGenerator=E(Xr);_injector=E(Ct);_dialog=E(Nh);_animationsDisabled=Ge();_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new st;_afterOpenedAtThisLevel=new st;dialogConfigClass=is;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let r=this._parentDialog;return r?r._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=xn(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(or(void 0)));constructor(){this._dialogRefConstructor=Po,this._dialogContainerType=W_,this._dialogDataToken=K_}open(r,n){let i;n=$($({},this._defaultOptions||new is),n),n.id=n.id||this._idGenerator.getId("mat-mdc-dialog-"),n.scrollStrategy=n.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(r,gt($({},n),{positionStrategy:Kn(this._injector).centerHorizontally().centerVertically(),disableClose:!0,closePredicate:void 0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,disableAnimations:this._animationsDisabled||n.enterAnimationDuration?.toLocaleString()==="0"||n.exitAnimationDuration?.toString()==="0",container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:n},{provide:qn,useValue:n}]},templateContext:()=>({dialogRef:i}),providers:(c,l,f)=>(i=new this._dialogRefConstructor(c,n,f),i.updatePosition(n?.position),[{provide:this._dialogContainerType,useValue:f},{provide:this._dialogDataToken,useValue:l.data},{provide:this._dialogRefConstructor,useValue:i}])}));return i.componentRef=o.componentRef,i.componentInstance=o.componentInstance,this.openDialogs.push(i),this.afterOpened.next(i),i.afterClosed().subscribe(()=>{let c=this.openDialogs.indexOf(i);c>-1&&(this.openDialogs.splice(c,1),this.openDialogs.length||this._getAfterAllClosed().next())}),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(r){return this.openDialogs.find(n=>n.id===r)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(r){let n=r.length;for(;n--;)r[n].close()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),aD=(()=>{class t{dialogRef=E(Po,{optional:!0});_elementRef=E(Gt);_dialog=E(Ql);ariaLabel;type="button";dialogResult;_matDialogClose;constructor(){}ngOnInit(){this.dialogRef||(this.dialogRef=Y_(this._elementRef,this._dialog.openDialogs))}ngOnChanges(r){let n=r._matDialogClose||r._matDialogCloseResult;n&&(this.dialogResult=n.currentValue)}_onButtonClick(r){$h(this.dialogRef,r.screenX===0&&r.screenY===0?"keyboard":"mouse",this.dialogResult)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Pt({type:t,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(n,i){n&1&&si("click",function(c){return i._onButtonClick(c)}),n&2&&cr("aria-label",i.ariaLabel||null)("type",i.type)},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],type:"type",dialogResult:[0,"mat-dialog-close","dialogResult"],_matDialogClose:[0,"matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[Wr]})}return t})(),Q_=(()=>{class t{_dialogRef=E(Po,{optional:!0});_elementRef=E(Gt);_dialog=E(Ql);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=Y_(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Pt({type:t})}return t})(),sD=(()=>{class t extends Q_{id=E(Xr).getId("mat-mdc-dialog-title-");_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static \u0275fac=(()=>{let r;return function(i){return(r||(r=Ne(t)))(i||t)}})();static \u0275dir=Pt({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(n,i){n&2&&Gu("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],features:[be]})}return t})(),cD=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Pt({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],features:[Wp([Sh])]})}return t})(),lD=(()=>{class t extends Q_{align;_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}static \u0275fac=(()=>{let r;return function(i){return(r||(r=Ne(t)))(i||t)}})();static \u0275dir=Pt({type:t,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(n,i){n&2&&Ke("mat-mdc-dialog-actions-align-start",i.align==="start")("mat-mdc-dialog-actions-align-center",i.align==="center")("mat-mdc-dialog-actions-align-end",i.align==="end")},inputs:{align:"align"},features:[be]})}return t})();function Y_(t,e){let r=t.nativeElement.parentElement;for(;r&&!r.classList.contains("mat-mdc-dialog-container");)r=r.parentElement;return r?e.find(n=>n.id===r.id):null}var uD=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Qt({type:t});static \u0275inj=qt({providers:[Ql],imports:[j_,Ti,Jr,qe,qe]})}return t})();export{Zr as a,Dr as b,gD as c,En as d,Jr as e,CD as f,Ge as g,ND as h,QD as i,km as j,Lw as k,Tm as l,Pm as m,Nm as n,Xe as o,Ze as p,Dd as q,Id as r,Se as s,wg as t,gC as u,Mg as v,Ec as w,Aa as x,Ud as y,Dk as z,LC as A,eQ as B,oQ as C,cQ as D,IO as E,dQ as F,Ja as G,ko as H,Ch as I,Rh as J,ql as K,cn as L,kh as M,Ii as N,Dh as O,BO as P,Ti as Q,Po as R,K_ as S,Ql as T,aD as U,sD as V,cD as W,lD as X,uD as Y,YO as Z,XO as _,zY as $,WY as aa};
