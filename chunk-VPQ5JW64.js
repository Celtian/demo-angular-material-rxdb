import{a as vt,b as bt,c as _t}from"./chunk-RJ4Q7GVI.js";import{a as it,b as rt,e as ot,g as at,h,j as nt,k as lt,m as k,o as mt,p as pt,q as st,r as ct,t as dt,u as ut,v as ft}from"./chunk-GG2FUCVU.js";import{a as gt,b as xt,c as Mt}from"./chunk-EOF2NJKF.js";import{U as ht,W as Ct,c as _,e as L,f as A,g as G,h as Q,i as q,n as W,o as J,t as Z,u as $,v as tt,x as et}from"./chunk-N3YCHSDA.js";import{a as yt,b as St,c as It,e as Pt,f as wt}from"./chunk-UGK5LUZJ.js";import{Ad as K,Bb as N,Bd as X,Cb as B,Cd as Y,Eb as r,Fb as o,Ib as V,Jb as j,Ka as t,La as p,Lb as z,Na as E,Oa as F,P as D,Va as S,Wa as d,ab as C,bb as I,fb as n,gb as l,ha as O,hb as v,ia as R,lb as P,na as M,oa as y,pb as b,rb as w,vb as s,wb as f,xb as T,xd as U,yd as H}from"./chunk-UCMM7BKK.js";function Rt(i,c){if(i&1){let g=P();n(0,"button",11),b("click",function(){M(g);let e=w();return y(e.form.controls.title.setValue(""))}),r(1,"translate"),r(2,"translate"),n(3,"mat-icon"),s(4,"close"),l()()}i&2&&(d("matTooltip",o(2,4,"uni.clear")),S("aria-label",o(1,2,"uni.clear")))}function Et(i,c){if(i&1){let g=P();n(0,"button",11),b("click",function(){M(g);let e=w();return y(e.form.controls.body.setValue(""))}),r(1,"translate"),r(2,"translate"),n(3,"mat-icon"),s(4,"close"),l()()}i&2&&(d("matTooltip",o(2,4,"uni.clear")),S("aria-label",o(1,2,"uni.clear")))}var Tt=i=>[i];function Ft(i,c){i&1&&(n(0,"div",12)(1,"a",13),r(2,"localize"),s(3),r(4,"translate"),l(),v(5,"mat-icon",14),n(6,"a",13),r(7,"localize"),s(8),r(9,"translate"),l()()),i&2&&(t(1),d("routerLink",B(12,Tt,o(2,4,"/"))),t(2),f(o(4,6,"breadcrumbs.app.posts")),t(3),d("routerLink",B(14,Tt,o(7,8,"/create"))),t(2),f(o(9,10,"breadcrumbs.posts.create")))}var be=(()=>{let c=class c{constructor(m,e,a,u,x,Bt,kt,Dt,Ot){this.fb=m,this.apiService=e,this.breadcrumbsPortalService=a,this.cdr=u,this.translate=x,this.lr=Bt,this.snackBar=kt,this.router=Dt,this.confirm=Ot,this.destroyRef=O(F),this.ROUTE_DEFINITION=Ct,this.form=this.fb.group({title:new k("",{nonNullable:!0,validators:[h.required,h.min(3)]}),body:new k("",{nonNullable:!0,validators:[h.required,h.min(3)]})})}canDeactivate(){return this.form.pristine||this.confirm.openCustomConfirmDialog(gt.UnsavedWork)}ngOnInit(){this.breadcrumbsPortalService.setPortal(this.portalContent),setTimeout(()=>this.cdr.detectChanges())}ngOnDestroy(){this.portalContent?.detach()}onSubmit(){this.apiService.create(this.form.value).pipe(D()).subscribe({next:m=>{this.form.reset(m),this.snackBar.open(this.translate.instant("response.create.success"),this.translate.instant("uni.close"));let e=this.lr.translateRoute("/");this.router.navigate([e])},error:()=>{this.snackBar.open(this.translate.instant("response.create.failed"),this.translate.instant("uni.close"))}})}onReset(m){m.preventDefault(),this.form.reset()}};c.\u0275fac=function(e){return new(e||c)(p(ct),p(Mt),p(et),p(E),p(K),p(Z),p(ht),p(W),p(xt))},c.\u0275cmp=R({type:c,selectors:[["app-post-create"]],viewQuery:function(e,a){if(e&1&&j(_,7),e&2){let u;V(u=z())&&(a.portalContent=u.first)}},standalone:!0,features:[N],decls:28,vars:21,consts:[[1,"flex","flex-col","gap-2","mt-2","text-center"],[3,"formGroup","ngSubmit","reset"],[1,"w-full"],["matInput","","type","text","formControlName","title"],["matSuffix","","mat-icon-button","",3,"matTooltip"],["matInput","","cdkTextareaAutosize","","formControlName","body",3,"placeholder"],["autosize","cdkTextareaAutosize"],[1,"flex","justify-center","gap-2"],["mat-button","","color","primary","type","reset",3,"disabled"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["class","container flex items-center gap-1 py-4",4,"cdkPortal"],["matSuffix","","mat-icon-button","",3,"matTooltip","click"],[1,"container","flex","items-center","gap-1","py-4"],["mat-button","","color","primary",3,"routerLink"],["aria-hidden","false","aria-label","Arrow icon","fontIcon","chevron_right"]],template:function(e,a){e&1&&(n(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),s(3),l()(),n(4,"mat-card-content",0)(5,"form",1),b("ngSubmit",function(){return a.onSubmit()})("reset",function(x){return a.onReset(x)}),n(6,"mat-form-field",2)(7,"mat-label"),s(8),r(9,"translate"),l(),v(10,"input",3),C(11,Rt,5,6,"button",4),l(),n(12,"mat-form-field",2)(13,"mat-label"),s(14),r(15,"translate"),l(),v(16,"textarea",5,6),r(18,"translate"),C(19,Et,5,6,"button",4),l(),n(20,"div",7)(21,"button",8),s(22),r(23,"translate"),l(),n(24,"button",9),s(25),r(26,"translate"),l()()()()(),C(27,Ft,10,16,"div",10)),e&2&&(t(3),f(a.form.controls.title.value),t(2),d("formGroup",a.form),t(3),f(o(9,11,"form.post.title.label")),t(3),I(11,a.form.controls.title.value?11:-1),t(3),f(o(15,13,"form.post.body.label")),t(2),d("placeholder",o(18,15,"form.post.body.placeholder")),t(3),I(19,a.form.controls.body.value?19:-1),t(2),d("disabled",a.form.pristine),t(1),T(" ",o(23,17,"uni.reset")," "),t(2),d("disabled",a.form.pristine||a.form.invalid),t(1),T(" ",o(26,19,"uni.submit")," "))},dependencies:[dt,mt,at,nt,lt,pt,st,wt,yt,It,Pt,St,H,U,_t,bt,ot,it,rt,vt,q,G,A,Q,ft,ut,L,_,Y,X,J,tt,$],styles:["[_nghost-%COMP%]{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}@media (min-width: 640px){[_nghost-%COMP%]{max-width:640px}}@media (min-width: 768px){[_nghost-%COMP%]{max-width:768px}}@media (min-width: 1024px){[_nghost-%COMP%]{max-width:1024px}}@media (min-width: 1280px){[_nghost-%COMP%]{max-width:1280px}}@media (min-width: 1536px){[_nghost-%COMP%]{max-width:1536px}}[_nghost-%COMP%]{display:block}[_nghost-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}[_nghost-%COMP%]{padding-top:1rem;padding-bottom:1rem}"],changeDetection:0});let i=c;return i})();export{be as PostCreateComponent};
