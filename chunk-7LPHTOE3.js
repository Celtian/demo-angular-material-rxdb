import{a as ut,b as ft,c as Ct}from"./chunk-ID46EBE4.js";import{a as Z,b as $,e as tt,f as et,g as h,i as it,j as rt,l as T,n as ot,o as at,p as nt,q as lt,s as mt,w as st,x as pt}from"./chunk-7SSFVAP3.js";import{a as ht,b as bt,c as _t}from"./chunk-MQTLTI7H.js";import{C as z,E as L,F as A,K as q,L as U,Q as J,R as K,S as X,T as Y,c as x,e as F,qa as ct,sa as dt}from"./chunk-PMCWLD75.js";import{a as vt,b as gt,c as xt,e as yt,f as Mt}from"./chunk-G5RHCZQC.js";import{Bb as v,Db as g,Fb as w,Jb as D,Kb as R,La as t,Lb as E,N as I,Sb as p,Tb as d,Ub as S,Uc as G,Vc as Q,Xa as O,Xb as P,Xc as j,Yc as H,Zb as r,Zc as W,_b as o,bb as V,ea as m,ja as f,ka as C,kc as N,lb as b,mb as y,nb as M,pa as k,rb as c,sb as a,tb as n,ub as _}from"./chunk-LS3YDF6O.js";var wt=e=>[e];function Tt(e,B){if(e&1){let s=v();a(0,"button",11),r(1,"translate"),r(2,"translate"),g("click",function(){f(s);let i=w();return C(i.form.controls.title.setValue(""))}),a(3,"mat-icon"),p(4,"close"),n()()}e&2&&(c("matTooltip",o(1,2,"uni.clear")),b("aria-label",o(2,4,"uni.clear")))}function Bt(e,B){if(e&1){let s=v();a(0,"button",11),r(1,"translate"),r(2,"translate"),g("click",function(){f(s);let i=w();return C(i.form.controls.body.setValue(""))}),a(3,"mat-icon"),p(4,"close"),n()()}e&2&&(c("matTooltip",o(1,2,"uni.clear")),b("aria-label",o(2,4,"uni.clear")))}function It(e,B){e&1&&(a(0,"div",12)(1,"a",13),r(2,"localize"),p(3),r(4,"translate"),n(),_(5,"mat-icon",14),r(6,"translate"),a(7,"a",13),r(8,"localize"),p(9),r(10,"translate"),n()()),e&2&&(t(),c("routerLink",P(15,wt,o(2,5,"/"))),t(2),d(o(4,7,"breadcrumbs.app.posts")),t(2),b("aria-label",o(6,9,"uni.aria-label.arrow-icon")),t(2),c("routerLink",P(17,wt,o(8,11,"/create"))),t(2),d(o(10,13,"breadcrumbs.posts.create")))}var me=(()=>{class e{constructor(){this.fb=m(lt),this.apiService=m(ht),this.breadcrumbsPortalService=m(Y),this.cdr=m(N),this.translate=m(j),this.lr=m(J),this.snackBar=m(ct),this.router=m(q),this.confirm=m(_t),this.destroyRef=m(k),this.ROUTE_DEFINITION=dt,this.form=this.fb.group({title:new T("",{nonNullable:!0,validators:[h.required,h.min(3)]}),body:new T("",{nonNullable:!0,validators:[h.required,h.min(3)]})})}canDeactivate(){return this.form.pristine||this.confirm.openCustomConfirmDialog(bt.UnsavedWork)}ngOnInit(){this.breadcrumbsPortalService.setPortal(this.portalContent),setTimeout(()=>this.cdr.detectChanges())}ngOnDestroy(){this.portalContent?.detach()}onSubmit(){this.apiService.create(this.form.value).pipe(I()).subscribe({next:s=>{this.form.reset(s),this.snackBar.open(this.translate.instant("response.create.success"),this.translate.instant("uni.close"));let l=this.lr.translateRoute("/");this.router.navigate([l])},error:()=>{this.snackBar.open(this.translate.instant("response.create.failed"),this.translate.instant("uni.close"))}})}onReset(s){s.preventDefault(),this.form.reset()}static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275cmp=O({type:e,selectors:[["app-post-create"]],viewQuery:function(l,i){if(l&1&&D(x,7),l&2){let u;R(u=E())&&(i.portalContent=u.first)}},decls:28,vars:21,consts:[["autosize","cdkTextareaAutosize"],[1,"flex","flex-col","gap-2","mt-2","text-center"],[3,"ngSubmit","reset","formGroup"],[1,"w-full"],["matInput","","type","text","formControlName","title"],["matSuffix","","mat-icon-button","",3,"matTooltip"],["matInput","","cdkTextareaAutosize","","formControlName","body",3,"placeholder"],[1,"flex","justify-center","gap-2"],["mat-button","","color","primary","type","reset",3,"disabled"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["class","container flex items-center gap-1 py-4",4,"cdkPortal"],["matSuffix","","mat-icon-button","",3,"click","matTooltip"],[1,"container","flex","items-center","gap-1","py-4"],["mat-button","","color","primary",3,"routerLink"],["aria-hidden","false","fontIcon","chevron_right"]],template:function(l,i){if(l&1){let u=v();a(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),p(3),n()(),a(4,"mat-card-content",1)(5,"form",2),g("ngSubmit",function(){return f(u),C(i.onSubmit())})("reset",function(Pt){return f(u),C(i.onReset(Pt))}),a(6,"mat-form-field",3)(7,"mat-label"),p(8),r(9,"translate"),n(),_(10,"input",4),y(11,Tt,5,6,"button",5),n(),a(12,"mat-form-field",3)(13,"mat-label"),p(14),r(15,"translate"),n(),_(16,"textarea",6,0),r(18,"translate"),y(19,Bt,5,6,"button",5),n(),a(20,"div",7)(21,"button",8),p(22),r(23,"translate"),n(),a(24,"button",9),p(25),r(26,"translate"),n()()()()(),V(27,It,11,19,"div",10)}l&2&&(t(3),d(i.form.controls.title.value),t(2),c("formGroup",i.form),t(3),d(o(9,11,"form.post.title.label")),t(3),M(i.form.controls.title.value?11:-1),t(3),d(o(15,13,"form.post.body.label")),t(2),c("placeholder",o(18,15,"form.post.body.placeholder")),t(3),M(i.form.controls.body.value?19:-1),t(2),c("disabled",i.form.pristine),t(),S(" ",o(23,17,"uni.reset")," "),t(2),c("disabled",i.form.pristine||i.form.invalid),t(),S(" ",o(26,19,"uni.submit")," "))},dependencies:[mt,ot,et,it,rt,nt,at,Mt,vt,xt,yt,gt,Q,G,Ct,ft,tt,Z,$,ut,A,L,z,pt,st,F,x,W,U,X,H,K],styles:["[_nghost-%COMP%]{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}@media(min-width:640px){[_nghost-%COMP%]{max-width:640px}}@media(min-width:768px){[_nghost-%COMP%]{max-width:768px}}@media(min-width:1024px){[_nghost-%COMP%]{max-width:1024px}}@media(min-width:1280px){[_nghost-%COMP%]{max-width:1280px}}@media(min-width:1536px){[_nghost-%COMP%]{max-width:1536px}}[_nghost-%COMP%]{display:block}[_nghost-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}[_nghost-%COMP%]{padding-top:1rem;padding-bottom:1rem}"],changeDetection:0})}}return e})();export{me as PostCreateComponent};
