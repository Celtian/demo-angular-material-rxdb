import{a as vt,b as bt,c as _t}from"./chunk-BVWVZPNV.js";import{a as it,b as rt,e as ot,f as at,g as v,i as nt,j as lt,l as O,n as mt,o as st,p as pt,q as ct,s as dt,w as ut,x as ft}from"./chunk-LSIVNARC.js";import{a as gt,b as xt,c as yt}from"./chunk-TQFERLXQ.js";import{A as tt,C as et,_ as ht,aa as Ct,c as y,e as A,k as G,m as Q,n as q,s as W,t as J,y as Z,z as $}from"./chunk-JO7GBBUB.js";import{a as Mt,b as wt,c as St,e as It,f as Pt}from"./chunk-PXMPYODV.js";import{$a as N,Db as F,Eb as j,Fb as z,Kb as p,La as t,Lb as f,Mb as B,O as V,Ob as k,Pa as s,Qb as i,Rb as r,Va as E,cc as L,fa as D,gb as b,hb as d,jd as U,kd as H,la as h,lb as I,ma as C,mb as P,md as K,nd as X,od as Y,qb as n,ra as R,rb as l,sb as _,wb as g,yb as x,zb as T}from"./chunk-NOAIZCS2.js";var Tt=o=>[o];function Vt(o,c){if(o&1){let M=g();n(0,"button",11),i(1,"translate"),i(2,"translate"),x("click",function(){h(M);let e=T();return C(e.form.controls.title.setValue(""))}),n(3,"mat-icon"),p(4,"close"),l()()}o&2&&(d("matTooltip",r(1,2,"uni.clear")),b("aria-label",r(2,4,"uni.clear")))}function Dt(o,c){if(o&1){let M=g();n(0,"button",11),i(1,"translate"),i(2,"translate"),x("click",function(){h(M);let e=T();return C(e.form.controls.body.setValue(""))}),n(3,"mat-icon"),p(4,"close"),l()()}o&2&&(d("matTooltip",r(1,2,"uni.clear")),b("aria-label",r(2,4,"uni.clear")))}function Rt(o,c){o&1&&(n(0,"div",12)(1,"a",13),i(2,"localize"),p(3),i(4,"translate"),l(),_(5,"mat-icon",14),i(6,"translate"),n(7,"a",13),i(8,"localize"),p(9),i(10,"translate"),l()()),o&2&&(t(),d("routerLink",k(15,Tt,r(2,5,"/"))),t(2),f(r(4,7,"breadcrumbs.app.posts")),t(2),b("aria-label",r(6,9,"uni.aria-label.arrow-icon")),t(2),d("routerLink",k(17,Tt,r(8,11,"/create"))),t(2),f(r(10,13,"breadcrumbs.posts.create")))}var he=(()=>{let c=class c{constructor(m,e,a,u,w,S,Bt,kt,Ot){this.fb=m,this.apiService=e,this.breadcrumbsPortalService=a,this.cdr=u,this.translate=w,this.lr=S,this.snackBar=Bt,this.router=kt,this.confirm=Ot,this.destroyRef=D(R),this.ROUTE_DEFINITION=Ct,this.form=this.fb.group({title:new O("",{nonNullable:!0,validators:[v.required,v.min(3)]}),body:new O("",{nonNullable:!0,validators:[v.required,v.min(3)]})})}canDeactivate(){return this.form.pristine||this.confirm.openCustomConfirmDialog(gt.UnsavedWork)}ngOnInit(){this.breadcrumbsPortalService.setPortal(this.portalContent),setTimeout(()=>this.cdr.detectChanges())}ngOnDestroy(){this.portalContent?.detach()}onSubmit(){this.apiService.create(this.form.value).pipe(V()).subscribe({next:m=>{this.form.reset(m),this.snackBar.open(this.translate.instant("response.create.success"),this.translate.instant("uni.close"));let e=this.lr.translateRoute("/");this.router.navigate([e])},error:()=>{this.snackBar.open(this.translate.instant("response.create.failed"),this.translate.instant("uni.close"))}})}onReset(m){m.preventDefault(),this.form.reset()}};c.\u0275fac=function(e){return new(e||c)(s(ct),s(yt),s(et),s(L),s(K),s(Z),s(ht),s(W),s(xt))},c.\u0275cmp=E({type:c,selectors:[["app-post-create"]],viewQuery:function(e,a){if(e&1&&F(y,7),e&2){let u;j(u=z())&&(a.portalContent=u.first)}},decls:28,vars:21,consts:[["autosize","cdkTextareaAutosize"],[1,"flex","flex-col","gap-2","mt-2","text-center"],[3,"ngSubmit","reset","formGroup"],[1,"w-full"],["matInput","","type","text","formControlName","title"],["matSuffix","","mat-icon-button","",3,"matTooltip"],["matInput","","cdkTextareaAutosize","","formControlName","body",3,"placeholder"],[1,"flex","justify-center","gap-2"],["mat-button","","color","primary","type","reset",3,"disabled"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["class","container flex items-center gap-1 py-4",4,"cdkPortal"],["matSuffix","","mat-icon-button","",3,"click","matTooltip"],[1,"container","flex","items-center","gap-1","py-4"],["mat-button","","color","primary",3,"routerLink"],["aria-hidden","false","fontIcon","chevron_right"]],template:function(e,a){if(e&1){let u=g();n(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),p(3),l()(),n(4,"mat-card-content",1)(5,"form",2),x("ngSubmit",function(){return h(u),C(a.onSubmit())})("reset",function(S){return h(u),C(a.onReset(S))}),n(6,"mat-form-field",3)(7,"mat-label"),p(8),i(9,"translate"),l(),_(10,"input",4),I(11,Vt,5,6,"button",5),l(),n(12,"mat-form-field",3)(13,"mat-label"),p(14),i(15,"translate"),l(),_(16,"textarea",6,0),i(18,"translate"),I(19,Dt,5,6,"button",5),l(),n(20,"div",7)(21,"button",8),p(22),i(23,"translate"),l(),n(24,"button",9),p(25),i(26,"translate"),l()()()()(),N(27,Rt,11,19,"div",10)}e&2&&(t(3),f(a.form.controls.title.value),t(2),d("formGroup",a.form),t(3),f(r(9,11,"form.post.title.label")),t(3),P(a.form.controls.title.value?11:-1),t(3),f(r(15,13,"form.post.body.label")),t(2),d("placeholder",r(18,15,"form.post.body.placeholder")),t(3),P(a.form.controls.body.value?19:-1),t(2),d("disabled",a.form.pristine),t(),B(" ",r(23,17,"uni.reset")," "),t(2),d("disabled",a.form.pristine||a.form.invalid),t(),B(" ",r(26,19,"uni.submit")," "))},dependencies:[dt,mt,at,nt,lt,st,pt,Pt,Mt,St,It,wt,H,U,_t,bt,ot,it,rt,vt,q,Q,G,ft,ut,A,y,Y,X,J,tt,$],styles:["[_nghost-%COMP%]{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}@media (min-width: 640px){[_nghost-%COMP%]{max-width:640px}}@media (min-width: 768px){[_nghost-%COMP%]{max-width:768px}}@media (min-width: 1024px){[_nghost-%COMP%]{max-width:1024px}}@media (min-width: 1280px){[_nghost-%COMP%]{max-width:1280px}}@media (min-width: 1536px){[_nghost-%COMP%]{max-width:1536px}}[_nghost-%COMP%]{display:block}[_nghost-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}[_nghost-%COMP%]{padding-top:1rem;padding-bottom:1rem}"],changeDetection:0});let o=c;return o})();export{he as PostCreateComponent};
