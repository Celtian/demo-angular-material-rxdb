import{L as P,M as V,N as W,O as L,P as q,Q as G,R as H,S as N,f as E,i as A,w as O}from"./chunk-N3YCHSDA.js";import{Ad as C,Bb as S,Bd as F,Cd as B,Eb as D,Fb as U,Ka as d,La as y,P as T,Wa as I,a as c,ba as p,fb as m,ga as l,gb as u,ia as R,p as s,v as a,vb as f,w as k,wb as g}from"./chunk-UCMM7BKK.js";var $=(()=>{let t=class t{constructor(e,o){this.data=e,this.dialogRef=o}};t.\u0275fac=function(o){return new(o||t)(y(V),y(P))},t.\u0275cmp=R({type:t,selectors:[["app-confirm-dialog"]],standalone:!0,features:[S],decls:11,vars:10,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","","align","center"],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(o,r){o&1&&(m(0,"h1",0),f(1),u(),m(2,"div",1),f(3),u(),m(4,"div",2)(5,"button",3),f(6),D(7,"translate"),u(),m(8,"button",4),f(9),D(10,"translate"),u()()),o&2&&(d(1),g(r.data.title),d(2),g(r.data.content),d(2),I("mat-dialog-close",!1),d(1),g(U(7,6,"uni.no")),d(2),I("mat-dialog-close",!0),d(1),g(U(10,8,"uni.yes")))},dependencies:[N,L,q,H,G,A,E,B,F],changeDetection:0});let i=t;return i})();var z=(()=>{let t=class t{constructor(e){this.dialog=e}open(e,o){return this.dialog.open($,{width:"sm",data:{title:e,content:o}}).afterClosed()}};t.\u0275fac=function(o){return new(o||t)(l(W))},t.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var h=function(i){return i[i.Delete=0]="Delete",i[i.UnsavedWork=1]="UnsavedWork",i}(h||{}),st=(()=>{let t=class t{constructor(e,o){this.confirm=e,this.translate=o}openCustomConfirmDialog(e){let o=this.getTitle(e),r=this.getContent(e);return this.open(o,r)}getTitle(e){switch(e){case h.Delete:return this.translate.instant("custom-confirm-dialog.delete-post.title");case h.UnsavedWork:return this.translate.instant("custom-confirm-dialog.unsaved-work.title");default:return this.translate.instant("custom-confirm-dialog.default.title")}}getContent(e){switch(e){case h.Delete:return this.translate.instant("custom-confirm-dialog.delete-post.content");case h.UnsavedWork:return this.translate.instant("custom-confirm-dialog.unsaved-work.content");default:return this.translate.instant("custom-confirm-dialog.default.content")}}open(e,o){return this.confirm.open(e,o).pipe(T(),a(r=>!!r))}};t.\u0275fac=function(o){return new(o||t)(l(z),l(C))},t.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var v,Z=new Uint8Array(16);function b(){if(!v&&(v=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!v))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return v(Z)}var n=[];for(let i=0;i<256;++i)n.push((i+256).toString(16).slice(1));function J(i,t=0){return n[i[t+0]]+n[i[t+1]]+n[i[t+2]]+n[i[t+3]]+"-"+n[i[t+4]]+n[i[t+5]]+"-"+n[i[t+6]]+n[i[t+7]]+"-"+n[i[t+8]]+n[i[t+9]]+"-"+n[i[t+10]]+n[i[t+11]]+n[i[t+12]]+n[i[t+13]]+n[i[t+14]]+n[i[t+15]]}var _=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),j={randomUUID:_};function tt(i,t,x){if(j.randomUUID&&!t&&!i)return j.randomUUID();i=i||{};let e=i.random||(i.rng||b)();if(e[6]=e[6]&15|64,e[8]=e[8]&63|128,t){x=x||0;for(let o=0;o<16;++o)t[x+o]=e[o];return t}return J(e)}var w=tt;var Ut=(()=>{let t=class t{constructor(e){this.rxdbProvider=e}get collection(){return this.rxdbProvider.getDatabaseCollection("posts")}create(e){return s(this.collection.insert(c({id:w()},e))).pipe(a(o=>o._data))}patch(e,o){return s(this.collection.findOne({selector:{id:e}}).update(c({id:e},o))).pipe(a(r=>c(c({},r._data),o)))}put(e,o){return s(this.collection.upsert(c({id:e},o))).pipe(a(r=>c(c({},r._data),o)))}detail(e){return s(this.collection.findOne({selector:{id:e}}).exec()).pipe(a(o=>o._data))}delete(e){return s(this.collection.findOne({selector:{id:e}}).remove()).pipe(a(o=>o._data))}list(e){let o=e.query?{title:{$regex:new RegExp(e.query,"i")}}:void 0;return s(this.collection.find({skip:e.page-1,limit:e.limit,selector:o,sort:[{[e.sort]:e.order}]}).exec()).pipe(a(r=>r.map(K=>K._data)))}count(){return s(this.collection.count().exec())}listAndCount(e){return k([this.list(e),this.count()]).pipe(a(([o,r])=>({items:o,totalCount:r})))}};t.\u0275fac=function(o){return new(o||t)(l(O))},t.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();export{h as a,st as b,Ut as c};
