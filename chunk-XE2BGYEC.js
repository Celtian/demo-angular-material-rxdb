import{C as V,R as F,S as $,T as B,U as L,V as O,W as P,X as W,Y as q,m as R,n as S}from"./chunk-BKWKYVVQ.js";import{Ia as p,O as j,Qb as g,Rb as h,Wa as k,Xb as y,Yb as D,a as c,ba as m,ga as l,pb as x,q as d,qb as u,rb as f,ud as E,vd as A,w as a,wd as C,x as T}from"./chunk-OASJ4F2E.js";var n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));function G(e,t=0){return(n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]).toLowerCase()}var I,z=new Uint8Array(16);function U(){if(!I){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");I=crypto.getRandomValues.bind(crypto)}return I(z)}var J=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),b={randomUUID:J};function K(e,t,s){e=e||{};let o=e.random??e.rng?.()??U();if(o.length<16)throw new Error("Random bytes length must be >= 16");if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){if(s=s||0,s<0||s+16>t.length)throw new RangeError(`UUID byte range ${s}:${s+15} is out of buffer bounds`);for(let i=0;i<16;++i)t[s+i]=o[i];return t}return G(o)}function Q(e,t,s){return b.randomUUID&&!t&&!e?b.randomUUID():K(e,t,s)}var w=Q;var pt=(()=>{let t=class t{constructor(){this.rxdbProvider=l(V)}get collection(){return this.rxdbProvider.getDatabaseCollection("posts")}create(o){return d(this.collection.insert(c({id:w()},o))).pipe(a(i=>i._data))}patch(o,i){return d(this.collection.findOne({selector:{id:o}}).update({$set:c({id:o},i)})).pipe(a(r=>c(c({},r._data),i)))}put(o,i){return d(this.collection.upsert(c({id:o},i))).pipe(a(r=>c(c({},r._data),i)))}detail(o){return d(this.collection.findOne({selector:{id:o}}).exec()).pipe(a(i=>i._data))}delete(o){return d(this.collection.findOne({selector:{id:o}}).remove()).pipe(a(i=>i._data))}list(o){let i=o.query?{title:{$regex:o.query,$options:"i"}}:void 0;return d(this.collection.find({skip:o.page-1,limit:o.limit,selector:i,sort:[{[o.sort]:o.order}]}).exec()).pipe(a(r=>r.map(X=>X._data)))}count(){return d(this.collection.count().exec())}listAndCount(o){return T([this.list(o),this.count()]).pipe(a(([i,r])=>({items:i,totalCount:r})))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var H=(()=>{let t=class t{constructor(){this.data=l($),this.dialogRef=l(F)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=k({type:t,selectors:[["app-confirm-dialog"]],decls:11,vars:10,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","","align","center"],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(i,r){i&1&&(u(0,"h1",0),g(1),f(),u(2,"div",1),g(3),f(),u(4,"div",2)(5,"button",3),g(6),y(7,"translate"),f(),u(8,"button",4),g(9),y(10,"translate"),f()()),i&2&&(p(),h(r.data.title),p(2),h(r.data.content),p(2),x("mat-dialog-close",!1),p(),h(D(7,6,"uni.no")),p(2),x("mat-dialog-close",!0),p(),h(D(10,8,"uni.yes")))},dependencies:[q,L,O,W,P,S,R,C,A],encapsulation:2,changeDetection:0});let e=t;return e})();var N=(()=>{let t=class t{constructor(){this.dialog=l(B)}open(o,i){return this.dialog.open(H,{width:"sm",data:{title:o,content:i}}).afterClosed()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var v=(function(e){return e[e.Delete=0]="Delete",e[e.UnsavedWork=1]="UnsavedWork",e})(v||{}),Vt=(()=>{let t=class t{constructor(){this.confirm=l(N),this.translate=l(E)}openCustomConfirmDialog(o){let i=this.getTitle(o),r=this.getContent(o);return this.open(i,r)}getTitle(o){switch(o){case v.Delete:return this.translate.instant("custom-confirm-dialog.delete-post.title");case v.UnsavedWork:return this.translate.instant("custom-confirm-dialog.unsaved-work.title");default:return this.translate.instant("custom-confirm-dialog.default.title")}}getContent(o){switch(o){case v.Delete:return this.translate.instant("custom-confirm-dialog.delete-post.content");case v.UnsavedWork:return this.translate.instant("custom-confirm-dialog.unsaved-work.content");default:return this.translate.instant("custom-confirm-dialog.default.content")}}open(o,i){return this.confirm.open(o,i).pipe(j(),a(r=>!!r))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();export{pt as a,v as b,Vt as c};
