import{E as S,F as j,U as E,ha as V,ia as F,ja as $,ka as B,la as L,ma as O,na as P,oa as W}from"./chunk-UAPYB3RG.js";import{$ as p,La as d,N as C,Sb as f,Tb as g,Xa as T,Xc as k,Yc as R,Zb as x,Zc as A,_b as y,a as s,ea as l,q as c,rb as v,sb as m,tb as u,w as a,x as M}from"./chunk-YF3Q6QAA.js";var r=[];for(let t=0;t<256;++t)r.push((t+256).toString(16).slice(1));function _(t,i=0){return(r[t[i+0]]+r[t[i+1]]+r[t[i+2]]+r[t[i+3]]+"-"+r[t[i+4]]+r[t[i+5]]+"-"+r[t[i+6]]+r[t[i+7]]+"-"+r[t[i+8]]+r[t[i+9]]+"-"+r[t[i+10]]+r[t[i+11]]+r[t[i+12]]+r[t[i+13]]+r[t[i+14]]+r[t[i+15]]).toLowerCase()}var D,N=new Uint8Array(16);function I(){if(!D){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");D=crypto.getRandomValues.bind(crypto)}return D(N)}var X=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),U={randomUUID:X};function z(t,i,e){t=t||{};let o=t.random??t.rng?.()??I();if(o.length<16)throw new Error("Random bytes length must be >= 16");if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,i){if(e=e||0,e<0||e+16>i.length)throw new RangeError(`UUID byte range ${e}:${e+15} is out of buffer bounds`);for(let n=0;n<16;++n)i[e+n]=o[n];return i}return _(o)}function J(t,i,e){return U.randomUUID&&!i&&!t?U.randomUUID():z(t,i,e)}var b=J;var dt=(()=>{class t{constructor(){this.rxdbProvider=l(E)}get collection(){return this.rxdbProvider.getDatabaseCollection("posts")}create(e){return c(this.collection.insert(s({id:b()},e))).pipe(a(o=>o._data))}patch(e,o){return c(this.collection.findOne({selector:{id:e}}).update({$set:s({id:e},o)})).pipe(a(n=>s(s({},n._data),o)))}put(e,o){return c(this.collection.upsert(s({id:e},o))).pipe(a(n=>s(s({},n._data),o)))}detail(e){return c(this.collection.findOne({selector:{id:e}}).exec()).pipe(a(o=>o._data))}delete(e){return c(this.collection.findOne({selector:{id:e}}).remove()).pipe(a(o=>o._data))}list(e){let o=e.query?{title:{$regex:e.query,$options:"i"}}:void 0;return c(this.collection.find({skip:e.page-1,limit:e.limit,selector:o,sort:[{[e.sort]:e.order}]}).exec()).pipe(a(n=>n.map(H=>H._data)))}count(){return c(this.collection.count().exec())}listAndCount(e){return M([this.list(e),this.count()]).pipe(a(([o,n])=>({items:o,totalCount:n})))}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var q=(()=>{class t{constructor(){this.data=l(F),this.dialogRef=l(V)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=T({type:t,selectors:[["app-confirm-dialog"]],decls:11,vars:10,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","","align","center"],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(o,n){o&1&&(m(0,"h1",0),f(1),u(),m(2,"div",1),f(3),u(),m(4,"div",2)(5,"button",3),f(6),x(7,"translate"),u(),m(8,"button",4),f(9),x(10,"translate"),u()()),o&2&&(d(),g(n.data.title),d(2),g(n.data.content),d(2),v("mat-dialog-close",!1),d(),g(y(7,6,"uni.no")),d(2),v("mat-dialog-close",!0),d(),g(y(10,8,"uni.yes")))},dependencies:[W,B,L,P,O,j,S,A,R],encapsulation:2,changeDetection:0})}}return t})();var G=(()=>{class t{constructor(){this.dialog=l($)}open(e,o){return this.dialog.open(q,{width:"sm",data:{title:e,content:o}}).afterClosed()}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var h=(function(t){return t[t.Delete=0]="Delete",t[t.UnsavedWork=1]="UnsavedWork",t})(h||{}),Et=(()=>{class t{constructor(){this.confirm=l(G),this.translate=l(k)}openCustomConfirmDialog(e){let o=this.getTitle(e),n=this.getContent(e);return this.open(o,n)}getTitle(e){switch(e){case h.Delete:return this.translate.instant("custom-confirm-dialog.delete-post.title");case h.UnsavedWork:return this.translate.instant("custom-confirm-dialog.unsaved-work.title");default:return this.translate.instant("custom-confirm-dialog.default.title")}}getContent(e){switch(e){case h.Delete:return this.translate.instant("custom-confirm-dialog.delete-post.content");case h.UnsavedWork:return this.translate.instant("custom-confirm-dialog.unsaved-work.content");default:return this.translate.instant("custom-confirm-dialog.default.content")}}open(e,o){return this.confirm.open(e,o).pipe(C(),a(n=>!!n))}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();export{dt as a,h as b,Et as c};
