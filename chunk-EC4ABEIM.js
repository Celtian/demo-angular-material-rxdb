import{$ as Vt,$a as sn,$c as Un,Aa as Ih,Ab as $e,Ac as Tc,B as yh,Ba as Me,Bc as ms,Bd as lf,C as An,Ca as Th,Cc as Mc,D as X,Da as cs,E as yc,Ea as _t,Ec as Pc,F as In,Fa as Mh,G as Tn,Gb as tr,Hb as an,I as _c,Ib as Fn,Ic as jn,J as Zt,Ja as $n,K as _h,Ka as T,Kb as cn,Kc as ps,La as Ni,Lc as Nc,M as Mn,Ma as Rr,Mb as jh,Mc as wt,N as Pn,Nb as Bn,Nc as tf,O as Cr,Oa as Lt,Ob as Uh,P as xc,Pa as ht,Pb as Li,Pc as ef,Q as xh,Qa as Ph,Qb as kc,Qc as rf,R as wh,Ra as Wt,Rb as ds,S as wc,Sb as zh,T as Ch,Ta as Or,Tb as te,U as Mi,Ua as le,Ub as Vh,V as Se,Vb as Wh,W as ge,Wc as gs,X as on,Xa as Pe,Xb as xt,Xc as vs,Y as Sh,Ya as ls,Z as Mt,Zb as Hh,_a as Dr,_b as Fi,_c as nf,a as S,aa as z,ab as Nh,ac as Kh,ad as of,b as Q,ba as Et,bc as qh,bd as zn,c as ty,ca as Eh,cc as Re,cd as Bi,d as O,da as Cc,e as Te,ea as Y,eb as Ne,f as ph,fa as D,fb as Ee,fd as er,g as ns,ga as P,gb as ve,h as Ii,ha as Jt,i as en,ia as Rt,ic as hs,j as U,ja as vt,jc as Yh,k as Nt,ka as Rh,kb as $h,kc as Qh,l as gh,la as Sr,lb as Sc,lc as Xh,ma as Oh,mb as Lh,n as rn,na as Dh,nb as Fh,o as $t,ob as Ln,od as sf,p as N,pb as Bh,q as Ti,qa as Nn,qb as Ec,r as kn,ra as kh,rb as $i,rc as Gh,s as vh,sa as ss,sb as Je,sc as ue,t as is,ta as as,u as K,ua as Ah,ub as Rc,v as os,vc as Zh,vd as af,w as bt,wa as Pi,wb as Oc,wc as fs,x as bc,xa as Er,xc as Ac,y as bh,yb as us,yc as Ic,z as nn,za as yt,zb as Dc,zc as Jh,zd as cf}from"./chunk-EYFDHA4V.js";var ji=class{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},rr=class extends ji{constructor(t,n,r,i,o){super(),this.component=t,this.viewContainerRef=n,this.injector=r,this.componentFactoryResolver=i,this.projectableNodes=o}},Le=class extends ji{constructor(t,n,r,i){super(),this.templateRef=t,this.viewContainerRef=n,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(t,n=this.context){return this.context=n,super.attach(t)}detach(){return this.context=void 0,super.detach()}},$c=class extends ji{constructor(t){super(),this.element=t instanceof _t?t.nativeElement:t}},kr=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof rr)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof Le)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof $c)return this._attachedPortal=t,this.attachDomPortal(t)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var bs=class extends kr{constructor(t,n,r,i,o){super(),this.outletElement=t,this._componentFactoryResolver=n,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=s=>{this._document;let a=s.element;a.parentNode;let c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}attachComponentPortal(t){let r=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),i;return t.viewContainerRef?(i=t.viewContainerRef.createComponent(r,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>i.destroy())):(i=r.create(t.injector||this._defaultInjector||yt.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=t,i}attachTemplatePortal(t){let n=t.viewContainerRef,r=n.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=n.indexOf(r);i!==-1&&n.remove(i)}),this._attachedPortal=t,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var lR=(()=>{let t=class t extends Le{constructor(r,i){super(r,i)}};t.\u0275fac=function(i){return new(i||t)(T(tr),T(Dr))},t.\u0275dir=vt({type:t,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[Wt]});let e=t;return e})();var Be=(()=>{let t=class t extends kr{constructor(r,i,o){super(),this._componentFactoryResolver=r,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new Lt,this.attachDomPortal=s=>{this._document;let a=s.element;a.parentNode;let c=this._document.createComment("dom-portal");s.setAttachedHost(this),a.parentNode.insertBefore(c,a),this._getRootNode().appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}get portal(){return this._attachedPortal}set portal(r){this.hasAttached()&&!r&&!this._isInitialized||(this.hasAttached()&&super.detach(),r&&super.attach(r),this._attachedPortal=r||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(r){r.setAttachedHost(this);let i=r.viewContainerRef!=null?r.viewContainerRef:this._viewContainerRef,s=(r.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(r.component),a=i.createComponent(s,i.length,r.injector||i.injector,r.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=r,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(r){r.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(r.templateRef,r.context,{injector:r.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=r,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){let r=this._viewContainerRef.element.nativeElement;return r.nodeType===r.ELEMENT_NODE?r:r.parentNode}};t.\u0275fac=function(i){return new(i||t)(T(cs),T(Dr),T(xt))},t.\u0275dir=vt({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Wt]});let e=t;return e})();var be=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Rt({type:t}),t.\u0275inj=Et({});let e=t;return e})();var uf=["mat-button",""],df=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],hf=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],ry='.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);--mdc-text-button-container-shape:4px;--mdc-text-button-container-height:36px;--mdc-text-button-keep-touch-target:false}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button[disabled]{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);--mdc-filled-button-container-shape:4px;--mdc-filled-button-container-elevation:0;--mdc-filled-button-disabled-container-elevation:0;--mdc-filled-button-focus-container-elevation:0;--mdc-filled-button-hover-container-elevation:0;--mdc-filled-button-keep-touch-target:false;--mdc-filled-button-pressed-container-elevation:0}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button[disabled]{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);--mdc-protected-button-container-shape:4px;--mdc-protected-button-keep-touch-target:false}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button[disabled]{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled][disabled]{box-shadow:none}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);--mdc-outlined-button-keep-touch-target:false;--mdc-outlined-button-outline-width:1px;--mdc-outlined-button-container-shape:4px}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',ff=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}";var ny=["mat-icon-button",""],iy=["*"];var oy=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],Bc=(()=>{let t=class t{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(r){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,r)}get disableRipple(){return this._disableRipple}set disableRipple(r){this._disableRipple=r,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(r){this._disabled=r,this._updateRippleDisabled()}constructor(r,i,o,s){this._elementRef=r,this._platform=i,this._ngZone=o,this._animationMode=s,this._focusMonitor=P(Un),this._rippleLoader=P(af),this._isFab=!1,this._disableRipple=!1,this._disabled=!1,this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-button-ripple"});let a=this._elementRef.nativeElement,c=a.classList;for(let{attribute:l,mdcClasses:u}of oy)a.hasAttribute(l)&&c.add(...u)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(r="program",i){r?this._focusMonitor.focusVia(this._elementRef.nativeElement,r,i):this._elementRef.nativeElement.focus(i)}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};t.\u0275fac=function(i){Ni()},t.\u0275dir=vt({type:t,inputs:{color:"color",disableRipple:["disableRipple","disableRipple",te],disabled:["disabled","disabled",te]},features:[Or]});let e=t;return e})();var sy=(()=>{let t=class t extends Bc{constructor(r,i,o,s){super(r,i,o,s),this._haltDisabledEvents=a=>{this.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}}ngOnInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)})}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}};t.\u0275fac=function(i){Ni()},t.\u0275dir=vt({type:t,inputs:{tabIndex:["tabIndex","tabIndex",r=>r==null?void 0:Vh(r)]},features:[Or,Wt]});let e=t;return e})(),mf=(()=>{let t=class t extends Bc{constructor(r,i,o,s){super(r,i,o,s)}};t.\u0275fac=function(i){return new(i||t)(T(_t),T(ue),T(ht),T(Me,8))},t.\u0275cmp=Jt({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:9,hostBindings:function(i,o){i&2&&(le("disabled",o.disabled||null),ls(o.color?"mat-"+o.color:""),Pe("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[Wt],attrs:uf,ngContentSelectors:hf,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,o){i&1&&($i(df),ve(0,"span",0),Je(1),Ne(2,"span",1),Je(3,1),Ee(),Je(4,2),ve(5,"span",2)(6,"span",3)),i&2&&Pe("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);--mdc-text-button-container-shape:4px;--mdc-text-button-container-height:36px;--mdc-text-button-keep-touch-target:false}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button[disabled]{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);--mdc-filled-button-container-shape:4px;--mdc-filled-button-container-elevation:0;--mdc-filled-button-disabled-container-elevation:0;--mdc-filled-button-focus-container-elevation:0;--mdc-filled-button-hover-container-elevation:0;--mdc-filled-button-keep-touch-target:false;--mdc-filled-button-pressed-container-elevation:0}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button[disabled]{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);--mdc-protected-button-container-shape:4px;--mdc-protected-button-keep-touch-target:false}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button[disabled]{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled][disabled]{box-shadow:none}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);--mdc-outlined-button-keep-touch-target:false;--mdc-outlined-button-outline-width:1px;--mdc-outlined-button-container-shape:4px}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let e=t;return e})(),wR=(()=>{let t=class t extends sy{constructor(r,i,o,s){super(r,i,o,s)}};t.\u0275fac=function(i){return new(i||t)(T(_t),T(ue),T(ht),T(Me,8))},t.\u0275cmp=Jt({type:t,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostVars:11,hostBindings:function(i,o){i&2&&(le("disabled",o.disabled||null)("tabindex",o.disabled?-1:o.tabIndex)("aria-disabled",o.disabled.toString()),ls(o.color?"mat-"+o.color:""),Pe("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton","matAnchor"],features:[Wt],attrs:uf,ngContentSelectors:hf,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,o){i&1&&($i(df),ve(0,"span",0),Je(1),Ne(2,"span",1),Je(3,1),Ee(),Je(4,2),ve(5,"span",2)(6,"span",3)),i&2&&Pe("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:[ry,ff],encapsulation:2,changeDetection:0});let e=t;return e})();var CR=(()=>{let t=class t extends Bc{constructor(r,i,o,s){super(r,i,o,s),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}};t.\u0275fac=function(i){return new(i||t)(T(_t),T(ue),T(ht),T(Me,8))},t.\u0275cmp=Jt({type:t,selectors:[["button","mat-icon-button",""]],hostVars:9,hostBindings:function(i,o){i&2&&(le("disabled",o.disabled||null),ls(o.color?"mat-"+o.color:""),Pe("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[Wt],attrs:ny,ngContentSelectors:iy,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,o){i&1&&($i(),ve(0,"span",0),Je(1),ve(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size);width:var(--mdc-icon-button-state-layer-size);color:var(--mdc-icon-button-icon-color);--mdc-icon-button-state-layer-size:48px;--mdc-icon-button-icon-size:24px}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{padding:12px;border-radius:50%;flex-shrink:0;text-align:center;font-size:var(--mdc-icon-button-icon-size);-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color)}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity)}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity)}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity)}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',ff],encapsulation:2,changeDetection:0});let e=t;return e})();var jc=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Rt({type:t}),t.\u0275inj=Et({imports:[er,sf,er]});let e=t;return e})();var H="primary",eo=Symbol("RouteTitle"),Hc=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function qn(e){return new Hc(e)}function cy(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=e[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function ly(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!je(e[n],t[n]))return!1;return!0}function je(e,t){let n=e?Kc(e):void 0,r=t?Kc(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Sf(e[i],t[i]))return!1;return!0}function Kc(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function Sf(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function Ef(e){return e.length>0?e[e.length-1]:null}function Pr(e){return kn(e)?e:Fh(e)?$t(Promise.resolve(e)):N(e)}var uy={exact:Of,subset:Df},Rf={exact:dy,subset:hy,ignored:()=>!0};function pf(e,t,n){return uy[n.paths](e.root,t.root,n.matrixParams)&&Rf[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function dy(e,t){return je(e,t)}function Of(e,t,n){if(!un(e.segments,t.segments)||!xs(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!Of(e.children[r],t.children[r],n))return!1;return!0}function hy(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Sf(e[n],t[n]))}function Df(e,t,n){return kf(e,t,t.segments,n)}function kf(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!un(i,n)||t.hasChildren()||!xs(i,n,r))}else if(e.segments.length===n.length){if(!un(e.segments,n)||!xs(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!Df(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!un(e.segments,i)||!xs(e.segments,i,r)||!e.children[H]?!1:kf(e.children[H],t,o,r)}}function xs(e,t,n){return t.every((r,i)=>Rf[n](e[i].parameters,r.parameters))}var Ar=class{constructor(t=new et([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qn(this.queryParams)),this._queryParamMap}toString(){return py.serialize(this)}},et=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ws(this)}},ln=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=qn(this.parameters)),this._parameterMap}toString(){return If(this)}};function fy(e,t){return un(e,t)&&e.every((n,r)=>je(n.parameters,t[r].parameters))}function un(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function my(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===H&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==H&&(n=n.concat(t(i,r)))}),n}var ro=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=z({token:t,factory:()=>(()=>new qi)(),providedIn:"root"});let e=t;return e})(),qi=class{parse(t){let n=new Yc(t);return new Ar(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${Ui(t.root,!0)}`,r=by(t.queryParams),i=typeof t.fragment=="string"?`#${gy(t.fragment)}`:"";return`${n}${r}${i}`}},py=new qi;function ws(e){return e.segments.map(t=>If(t)).join("/")}function Ui(e,t){if(!e.hasChildren())return ws(e);if(t){let n=e.children[H]?Ui(e.children[H],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==H&&r.push(`${i}:${Ui(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=my(e,(r,i)=>i===H?[Ui(e.children[H],!1)]:[`${i}:${Ui(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[H]!=null?`${ws(e)}/${n[0]}`:`${ws(e)}/(${n.join("//")})`}}function Af(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ys(e){return Af(e).replace(/%3B/gi,";")}function gy(e){return encodeURI(e)}function qc(e){return Af(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Cs(e){return decodeURIComponent(e)}function gf(e){return Cs(e.replace(/\+/g,"%20"))}function If(e){return`${qc(e.path)}${vy(e.parameters)}`}function vy(e){return Object.keys(e).map(t=>`;${qc(t)}=${qc(e[t])}`).join("")}function by(e){let t=Object.keys(e).map(n=>{let r=e[n];return Array.isArray(r)?r.map(i=>`${ys(n)}=${ys(i)}`).join("&"):`${ys(n)}=${ys(r)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}var yy=/^[^\/()?;#]+/;function Uc(e){let t=e.match(yy);return t?t[0]:""}var _y=/^[^\/()?;=#]+/;function xy(e){let t=e.match(_y);return t?t[0]:""}var wy=/^[^=?&#]+/;function Cy(e){let t=e.match(wy);return t?t[0]:""}var Sy=/^[^&#]+/;function Ey(e){let t=e.match(Sy);return t?t[0]:""}var Yc=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new et([],{}):new et([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[H]=new et(t,n)),r}parseSegment(){let t=Uc(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Vt(4009,!1);return this.capture(t),new ln(Cs(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=xy(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Uc(this.remaining);i&&(r=i,this.capture(r))}t[Cs(n)]=Cs(r)}parseQueryParam(t){let n=Cy(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=Ey(this.remaining);s&&(r=s,this.capture(r))}let i=gf(n),o=gf(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Uc(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Vt(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=H);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[H]:new et([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Vt(4011,!1)}};function Tf(e){return e.segments.length>0?new et([],{[H]:e}):e}function Mf(e){let t={};for(let r of Object.keys(e.children)){let i=e.children[r],o=Mf(i);if(r===H&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new et(e.segments,t);return Ry(n)}function Ry(e){if(e.numberOfChildren===1&&e.children[H]){let t=e.children[H];return new et(e.segments.concat(t.segments),t.children)}return e}function Yn(e){return e instanceof Ar}function Oy(e,t,n=null,r=null){let i=Pf(e);return Nf(i,t,n,r)}function Pf(e){let t;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new et(o.url,s);return o===e&&(t=a),a}let r=n(e.root),i=Tf(r);return t??i}function Nf(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return zc(i,i,i,n,r);let o=Dy(t);if(o.toRoot())return zc(i,i,new et([],{}),n,r);let s=ky(o,i,e),a=s.processChildren?Wi(s.segmentGroup,s.index,o.commands):Lf(s.segmentGroup,s.index,o.commands);return zc(i,s.segmentGroup,a,n,r)}function Ss(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Yi(e){return typeof e=="object"&&e!=null&&e.outlets}function zc(e,t,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;e===t?s=n:s=$f(e,t,n);let a=Tf(Mf(s));return new Ar(a,o,i)}function $f(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=$f(o,t,n)}),new et(e.segments,r)}var Es=class{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Ss(r[0]))throw new Vt(4003,!1);let i=r.find(Yi);if(i&&i!==Ef(r))throw new Vt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Dy(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Es(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Es(n,t,r)}var Hn=class{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function ky(e,t,n){if(e.isAbsolute)return new Hn(t,!0,0);if(!n)return new Hn(t,!1,NaN);if(n.parent===null)return new Hn(n,!0,0);let r=Ss(e.commands[0])?0:1,i=n.segments.length-1+r;return Ay(n,i,e.numberOfDoubleDots)}function Ay(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Vt(4005,!1);i=r.segments.length}return new Hn(r,!1,i-o)}function Iy(e){return Yi(e[0])?e[0].outlets:{[H]:e}}function Lf(e,t,n){if(e||(e=new et([],{})),e.segments.length===0&&e.hasChildren())return Wi(e,t,n);let r=Ty(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new et(e.segments.slice(0,r.pathIndex),{});return o.children[H]=new et(e.segments.slice(r.pathIndex),e.children),Wi(o,0,i)}else return r.match&&i.length===0?new et(e.segments,{}):r.match&&!e.hasChildren()?Qc(e,t,n):r.match?Wi(e,0,i):Qc(e,t,n)}function Wi(e,t,n){if(n.length===0)return new et(e.segments,{});{let r=Iy(n),i={};if(Object.keys(r).some(o=>o!==H)&&e.children[H]&&e.numberOfChildren===1&&e.children[H].segments.length===0){let o=Wi(e.children[H],t,n);return new et(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Lf(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new et(e.segments,i)}}function Ty(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let s=e.segments[i],a=n[r];if(Yi(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!bf(c,l,s))return o;r+=2}else{if(!bf(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Qc(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(Yi(o)){let c=My(o.outlets);return new et(r,c)}if(i===0&&Ss(n[0])){let c=e.segments[t];r.push(new ln(c.path,vf(n[0]))),i++;continue}let s=Yi(o)?o.outlets[H]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Ss(a)?(r.push(new ln(s,vf(a))),i+=2):(r.push(new ln(s,{})),i++)}return new et(r,{})}function My(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=Qc(new et([],{}),0,r))}),t}function vf(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function bf(e,t,n){return e==n.path&&je(t,n.parameters)}var Hi="imperative",ye=class{constructor(t,n){this.id=t,this.url=n}},Ir=class extends ye{constructor(t,n,r="imperative",i=null){super(t,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ue=class extends ye{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ze=class extends ye{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Tr=class extends ye{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=16}},Qi=class extends ye{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Rs=class extends ye{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xc=class extends ye{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gc=class extends ye{constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Zc=class extends ye{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jc=class extends ye{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tl=class{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},el=class{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},rl=class{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nl=class{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},il=class{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ol=class{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Os=class{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=15}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Xi=class{},Gi=class{constructor(t){this.url=t}};var sl=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new no,this.attachRef=null}},no=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new sl,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Ds=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=al(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=al(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=cl(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return cl(t,this._root).map(n=>n.value)}};function al(e,t){if(e===t.value)return t;for(let n of t.children){let r=al(e,n);if(r)return r}return null}function cl(e,t){if(e===t.value)return[t];for(let n of t.children){let r=cl(e,n);if(r.length)return r.unshift(t),r}return[]}var de=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Wn(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var ks=class extends Ds{constructor(t,n){super(t),this.snapshot=n,bl(this,t)}toString(){return this.snapshot.toString()}};function Ff(e,t){let n=Py(e,t),r=new Nt([new ln("",{})]),i=new Nt({}),o=new Nt({}),s=new Nt({}),a=new Nt(""),c=new Ve(r,i,s,a,o,H,t,n.root);return c.snapshot=n.root,new ks(new de(c,[]),n)}function Py(e,t){let n={},r={},i={},o="",s=new Zi([],n,i,o,r,H,t,null,{});return new As("",new de(s,[]))}var Ve=class{constructor(t,n,r,i,o,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(K(l=>l[eo]))??N(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(K(t=>qn(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(K(t=>qn(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function vl(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:S(S({},t.params),e.params),data:S(S({},t.data),e.data),resolve:S(S(S(S({},e.data),t.data),i?.data),e._resolvedData)}:r={params:S({},e.params),data:S({},e.data),resolve:S(S({},e.data),e._resolvedData??{})},i&&jf(i)&&(r.resolve[eo]=i.title),r}var Zi=class{get title(){return this.data?.[eo]}constructor(t,n,r,i,o,s,a,c,l){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qn(this.queryParams)),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},As=class extends Ds{constructor(t,n){super(n),this.url=t,bl(this,n)}toString(){return Bf(this._root)}};function bl(e,t){t.value._routerState=e,t.children.forEach(n=>bl(e,n))}function Bf(e){let t=e.children.length>0?` { ${e.children.map(Bf).join(", ")} } `:"";return`${e.value}${t}`}function Vc(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,je(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),je(t.params,n.params)||e.paramsSubject.next(n.params),ly(t.url,n.url)||e.urlSubject.next(n.url),je(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function ll(e,t){let n=je(e.params,t.params)&&fy(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||ll(e.parent,t.parent))}function jf(e){return typeof e.title=="string"||e.title===null}var Ny=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=H,this.activateEvents=new Lt,this.deactivateEvents=new Lt,this.attachEvents=new Lt,this.detachEvents=new Lt,this.parentContexts=P(no),this.location=P(Dr),this.changeDetector=P(Rr),this.environmentInjector=P(Pi),this.inputBinder=P(Ps,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Vt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Vt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Vt(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new Vt(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new ul(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=vt({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Sr]});let e=t;return e})(),ul=class{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===Ve?this.route:t===no?this.childContexts:this.parent.get(t,n)}},Ps=new Y(""),yf=(()=>{let t=class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=os([i.queryParams,i.params,i.data]).pipe(ge(([s,a,c],l)=>(c=S(S(S({},s),a),c),l===0?N(c):Promise.resolve(c)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=Wh(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(r,o)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac});let e=t;return e})();function $y(e,t,n){let r=Ji(e,t._root,n?n._root:void 0);return new ks(r,t)}function Ji(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=Ly(e,t,n);return new de(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Ji(e,a)),s}}let r=Fy(t.value),i=t.children.map(o=>Ji(e,o));return new de(r,i)}}function Ly(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Ji(e,r,i);return Ji(e,r)})}function Fy(e){return new Ve(new Nt(e.url),new Nt(e.params),new Nt(e.queryParams),new Nt(e.fragment),new Nt(e.data),e.outlet,e.component,e)}var Uf="ngNavigationCancelingError";function zf(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=Yn(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=Vf(!1,0,t);return i.url=n,i.navigationBehaviorOptions=r,i}function Vf(e,t,n){let r=new Error("NavigationCancelingError: "+(e||""));return r[Uf]=!0,r.cancellationCode=t,n&&(r.url=n),r}function By(e){return Wf(e)&&Yn(e.url)}function Wf(e){return e&&e[Uf]}var yl=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Jt({type:t,selectors:[["ng-component"]],standalone:!0,features:[$e],decls:1,vars:0,template:function(i,o){i&1&&ve(0,"router-outlet")},dependencies:[Ny],encapsulation:2});let e=t;return e})();function jy(e,t){return e.providers&&!e._injector&&(e._injector=Dc(e.providers,t,`Route: ${e.path}`)),e._injector??t}function _l(e){let t=e.children&&e.children.map(_l),n=t?Q(S({},e),{children:t}):S({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==H&&(n.component=yl),n}function We(e){return e.outlet||H}function Uy(e,t){let n=e.filter(r=>We(r)===t);return n.push(...e.filter(r=>We(r)!==t)),n}function io(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var zy=(e,t,n,r)=>K(i=>(new dl(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),dl=class{constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Vc(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=Wn(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Wn(t);for(let s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Wn(t);for(let s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=Wn(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new ol(o.value.snapshot))}),t.children.length&&this.forwardEvent(new nl(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(Vc(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Vc(a.route.value),this.activateChildRoutes(t,null,s.children)}else{let a=io(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,r)}},Is=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Kn=class{constructor(t,n){this.component=t,this.route=n}};function Vy(e,t,n){let r=e._root,i=t?t._root:null;return zi(r,i,n,[r.value])}function Wy(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Xn(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!Eh(e)?e:t.get(e):r}function zi(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Wn(t);return e.children.forEach(s=>{Hy(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ki(a,n.getContext(s),i)),i}function Hy(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=Ky(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Is(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?zi(e,t,a?a.children:null,r,i):zi(e,t,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Kn(a.outlet.component,s))}else s&&Ki(t,a,i),i.canActivateChecks.push(new Is(r)),o.component?zi(e,null,a?a.children:null,r,i):zi(e,null,n,r,i);return i}function Ky(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!un(e.url,t.url);case"pathParamsOrQueryParamsChange":return!un(e.url,t.url)||!je(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ll(e,t)||!je(e.queryParams,t.queryParams);case"paramsChange":default:return!ll(e,t)}}function Ki(e,t,n){let r=Wn(e),i=e.value;Object.entries(r).forEach(([o,s])=>{i.component?t?Ki(s,t.children.getContext(o),n):Ki(s,null,n):Ki(s,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Kn(t.outlet.component,i)):n.canDeactivateChecks.push(new Kn(null,i)):n.canDeactivateChecks.push(new Kn(null,i))}function oo(e){return typeof e=="function"}function qy(e){return typeof e=="boolean"}function Yy(e){return e&&oo(e.canLoad)}function Qy(e){return e&&oo(e.canActivate)}function Xy(e){return e&&oo(e.canActivateChild)}function Gy(e){return e&&oo(e.canDeactivate)}function Zy(e){return e&&oo(e.canMatch)}function Hf(e){return e instanceof vh||e?.name==="EmptyError"}var _s=Symbol("INITIAL_VALUE");function Qn(){return ge(e=>os(e.map(t=>t.pipe(Zt(1),Se(_s)))).pipe(K(t=>{for(let n of t)if(n!==!0){if(n===_s)return _s;if(n===!1||n instanceof Ar)return n}return!0}),X(t=>t!==_s),Zt(1)))}function Jy(e,t){return bt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?N(Q(S({},n),{guardsResult:!0})):t_(s,r,i,e).pipe(bt(a=>a&&qy(a)?e_(r,o,e,t):N(a)),K(a=>Q(S({},n),{guardsResult:a})))})}function t_(e,t,n,r){return $t(e).pipe(bt(i=>s_(i.component,i.route,n,t,r)),Cr(i=>i!==!0,!0))}function e_(e,t,n,r){return $t(t).pipe(Tn(i=>bh(n_(i.route.parent,r),r_(i.route,r),o_(e,i.path,n),i_(e,i.route,n))),Cr(i=>i!==!0,!0))}function r_(e,t){return e!==null&&t&&t(new il(e)),N(!0)}function n_(e,t){return e!==null&&t&&t(new rl(e)),N(!0)}function i_(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return N(!0);let i=r.map(o=>nn(()=>{let s=io(t)??n,a=Xn(o,s),c=Qy(a)?a.canActivate(t,e):Er(s,()=>a(t,e));return Pr(c).pipe(Cr())}));return N(i).pipe(Qn())}function o_(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>Wy(s)).filter(s=>s!==null).map(s=>nn(()=>{let a=s.guards.map(c=>{let l=io(s.node)??n,u=Xn(c,l),d=Xy(u)?u.canActivateChild(r,e):Er(l,()=>u(r,e));return Pr(d).pipe(Cr())});return N(a).pipe(Qn())}));return N(o).pipe(Qn())}function s_(e,t,n,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return N(!0);let s=o.map(a=>{let c=io(t)??i,l=Xn(a,c),u=Gy(l)?l.canDeactivate(e,t,n,r):Er(c,()=>l(e,t,n,r));return Pr(u).pipe(Cr())});return N(s).pipe(Qn())}function a_(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return N(!0);let o=i.map(s=>{let a=Xn(s,e),c=Yy(a)?a.canLoad(t,n):Er(e,()=>a(t,n));return Pr(c)});return N(o).pipe(Qn(),Kf(r))}function Kf(e){return ph(Mt(t=>{if(Yn(t))throw zf(e,t)}),K(t=>t===!0))}function c_(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return N(!0);let o=i.map(s=>{let a=Xn(s,e),c=Zy(a)?a.canMatch(t,n):Er(e,()=>a(t,n));return Pr(c)});return N(o).pipe(Qn(),Kf(r))}var to=class{constructor(t){this.segmentGroup=t||null}},Ts=class extends Error{constructor(t){super(),this.urlTree=t}};function Vn(e){return Ti(new to(e))}function l_(e){return Ti(new Vt(4e3,!1))}function u_(e){return Ti(Vf(!1,3))}var hl=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return N(r);if(i.numberOfChildren>1||!i.children[H])return l_(t.redirectTo);i=i.children[H]}}applyRedirectCommands(t,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n.startsWith("/"))throw new Ts(i);return i}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new Ar(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,i)}),new et(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new Vt(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}},fl={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function d_(e,t,n,r,i){let o=xl(e,t,n);return o.matched?(r=jy(t,r),c_(r,t,n,i).pipe(K(s=>s===!0?o:S({},fl)))):N(o)}function xl(e,t,n){if(t.path==="**")return h_(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?S({},fl):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||cy)(n,e,t);if(!i)return S({},fl);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?S(S({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function h_(e){return{matched:!0,parameters:e.length>0?Ef(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function _f(e,t,n,r){return n.length>0&&p_(e,n,r)?{segmentGroup:new et(t,m_(r,new et(n,e.children))),slicedSegments:[]}:n.length===0&&g_(e,n,r)?{segmentGroup:new et(e.segments,f_(e,t,n,r,e.children)),slicedSegments:n}:{segmentGroup:new et(e.segments,e.children),slicedSegments:n}}function f_(e,t,n,r,i){let o={};for(let s of r)if(Ns(e,n,s)&&!i[We(s)]){let a=new et([],{});o[We(s)]=a}return S(S({},i),o)}function m_(e,t){let n={};n[H]=t;for(let r of e)if(r.path===""&&We(r)!==H){let i=new et([],{});n[We(r)]=i}return n}function p_(e,t,n){return n.some(r=>Ns(e,t,r)&&We(r)!==H)}function g_(e,t,n){return n.some(r=>Ns(e,t,r))}function Ns(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function v_(e,t,n,r){return We(e)!==r&&(r===H||!Ns(t,n,e))?!1:xl(t,e,n).matched}function b_(e,t,n){return t.length===0&&!e.children[n]}var ml=class{};function y_(e,t,n,r,i,o,s="emptyOnly"){return new pl(e,t,n,r,i,s,o).recognize()}var __=31,pl=class{constructor(t,n,r,i,o,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new hl(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new Vt(4002,`'${t.segmentGroup}'`)}recognize(){let t=_f(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(K(n=>{let r=new Zi([],Object.freeze({}),Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,{},H,this.rootComponentType,null,{}),i=new de(r,n),o=new As("",i),s=Oy(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,H).pipe(In(r=>{if(r instanceof Ts)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof to?this.noMatchError(r):r}))}inheritParamsAndData(t,n){let r=t.value,i=vl(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),t.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(t,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,i,!0).pipe(K(o=>o instanceof de?[o]:[]))}processChildren(t,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return $t(i).pipe(Tn(o=>{let s=r.children[o],a=Uy(n,o);return this.processSegmentGroup(t,a,s,o)}),Ch((o,s)=>(o.push(...s),o)),_c(null),xh(),bt(o=>{if(o===null)return Vn(r);let s=qf(o);return x_(s),N(s)}))}processSegment(t,n,r,i,o,s){return $t(n).pipe(Tn(a=>this.processSegmentAgainstRoute(a._injector??t,n,a,r,i,o,s).pipe(In(c=>{if(c instanceof to)return N(null);throw c}))),Cr(a=>!!a),In(a=>{if(Hf(a))return b_(r,i,o)?N(new ml):Vn(r);throw a}))}processSegmentAgainstRoute(t,n,r,i,o,s,a){return v_(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s):Vn(i):Vn(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=xl(n,i,o);if(!a)return Vn(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>__&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,d).pipe(bt(h=>this.processSegment(t,r,n,h.concat(u),s,!1)))}matchSegmentAgainstRoute(t,n,r,i,o){let s=d_(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(ge(a=>a.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(ge(({routes:c})=>{let l=r._loadedInjector??t,{consumedSegments:u,remainingSegments:d,parameters:h}=a,f=new Zi(u,h,Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,C_(r),We(r),r.component??r._loadedComponent??null,r,S_(r)),{segmentGroup:m,slicedSegments:p}=_f(n,u,d,c);if(p.length===0&&m.hasChildren())return this.processChildren(l,c,m).pipe(K(g=>g===null?null:new de(f,g)));if(c.length===0&&p.length===0)return N(new de(f,[]));let b=We(r)===o;return this.processSegment(l,c,m,p,b?H:o,!0).pipe(K(g=>new de(f,g instanceof de?[g]:[])))}))):Vn(n)))}getChildConfig(t,n,r){return n.children?N({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?N({routes:n._loadedRoutes,injector:n._loadedInjector}):a_(t,n,r,this.urlSerializer).pipe(bt(i=>i?this.configLoader.loadChildren(t,n).pipe(Mt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):u_(n))):N({routes:[],injector:t})}};function x_(e){e.sort((t,n)=>t.value.outlet===H?-1:n.value.outlet===H?1:t.value.outlet.localeCompare(n.value.outlet))}function w_(e){let t=e.value.routeConfig;return t&&t.path===""}function qf(e){let t=[],n=new Set;for(let r of e){if(!w_(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=qf(r.children);t.push(new de(r.value,i))}return t.filter(r=>!n.has(r))}function C_(e){return e.data||{}}function S_(e){return e.resolve||{}}function E_(e,t,n,r,i,o){return bt(s=>y_(e,t,n,r,s.extractedUrl,i,o).pipe(K(({state:a,tree:c})=>Q(S({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function R_(e,t){return bt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return N(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of Yf(c))s.add(l);let a=0;return $t(s).pipe(Tn(c=>o.has(c)?O_(c,r,e,t):(c.data=vl(c,c.parent,e).resolve,N(void 0))),Mt(()=>a++),xc(1),bt(c=>a===s.size?N(n):rn))})}function Yf(e){let t=e.children.map(n=>Yf(n)).flat();return[e,...t]}function O_(e,t,n,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!jf(i)&&(o[eo]=i.title),D_(o,e,t,r).pipe(K(s=>(e._resolvedData=s,e.data=vl(e,e.parent,n).resolve,null)))}function D_(e,t,n,r){let i=Kc(e);if(i.length===0)return N({});let o={};return $t(i).pipe(bt(s=>k_(e[s],t,n,r).pipe(Cr(),Mt(a=>{o[s]=a}))),xc(1),_h(o),In(s=>Hf(s)?rn:Ti(s)))}function k_(e,t,n,r){let i=io(t)??r,o=Xn(e,i),s=o.resolve?o.resolve(t,n):Er(i,()=>o(t,n));return Pr(s)}function Wc(e){return ge(t=>{let n=e(t);return n?$t(n).pipe(K(()=>t)):N(t)})}var Qf=(()=>{let t=class t{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===H);return i}getResolvedTitleForRoute(r){return r.data[eo]}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=z({token:t,factory:()=>(()=>P(A_))(),providedIn:"root"});let e=t;return e})(),A_=(()=>{let t=class t extends Qf{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};t.\u0275fac=function(i){return new(i||t)(D(Gh))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),so=new Y("",{providedIn:"root",factory:()=>({})}),Mr=new Y("ROUTES"),wl=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=P(Bn)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return N(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Pr(r.loadComponent()).pipe(K(Xf),Mt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Pn(()=>{this.componentLoaders.delete(r)})),o=new en(i,()=>new U).pipe(Ii());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return N({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=I_(i,this.compiler,r,this.onLoadEndListener).pipe(Pn(()=>{this.childrenLoaders.delete(i)})),a=new en(s,()=>new U).pipe(Ii());return this.childrenLoaders.set(i,a),a}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function I_(e,t,n,r){return Pr(e.loadChildren()).pipe(K(Xf),bt(i=>i instanceof us||Array.isArray(i)?N(i):$t(t.compileModuleAsync(i))),K(i=>{r&&r(e);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Mr,[],{optional:!0,self:!0}).flat()),{routes:s.map(_l),injector:o}}))}function T_(e){return e&&typeof e=="object"&&"default"in e}function Xf(e){return T_(e)?e.default:e}var Cl=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=z({token:t,factory:()=>(()=>P(M_))(),providedIn:"root"});let e=t;return e})(),M_=(()=>{let t=class t{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Gf=new Y(""),Zf=new Y("");function P_(e,t,n){let r=e.get(Zf),i=e.get(xt);return e.get(ht).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),N_(e))),{onViewTransitionCreated:c}=r;return c&&Er(e,()=>c({transition:a,from:t,to:n})),s})}function N_(e){return new Promise(t=>{Ph(t,{injector:e})})}var Sl=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new U,this.transitionAbortSubject=new U,this.configLoader=P(wl),this.environmentInjector=P(Pi),this.urlSerializer=P(ro),this.rootContexts=P(no),this.location=P(Re),this.inputBindingEnabled=P(Ps,{optional:!0})!==null,this.titleStrategy=P(Qf),this.options=P(so,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=P(Cl),this.createViewTransition=P(Gf,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>N(void 0),this.rootComponentType=null;let r=o=>this.events.next(new tl(o)),i=o=>this.events.next(new el(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Q(S(S({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new Nt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Hi,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(X(s=>s.id!==0),K(s=>Q(S({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),ge(s=>{this.currentTransition=s;let a=!1,c=!1;return N(s).pipe(Mt(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Q(S({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ge(l=>{let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new Tr(l.id,this.urlSerializer.serialize(l.rawUrl),h,0)),l.resolve(null),rn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return N(l).pipe(ge(h=>{let f=this.transitions?.getValue();return this.events.next(new Ir(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?rn:Promise.resolve(h)}),E_(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Mt(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=Q(S({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Rs(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:m,restoredState:p,extras:b}=l,g=new Ir(h,this.urlSerializer.serialize(f),m,p);this.events.next(g);let x=Ff(f,this.rootComponentType).snapshot;return this.currentTransition=s=Q(S({},l),{targetSnapshot:x,urlAfterRedirects:f,extras:Q(S({},b),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,N(s)}else{let h="";return this.events.next(new Tr(l.id,this.urlSerializer.serialize(l.extractedUrl),h,1)),l.resolve(null),rn}}),Mt(l=>{let u=new Xc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),K(l=>(this.currentTransition=s=Q(S({},l),{guards:Vy(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),Jy(this.environmentInjector,l=>this.events.next(l)),Mt(l=>{if(s.guardsResult=l.guardsResult,Yn(l.guardsResult))throw zf(this.urlSerializer,l.guardsResult);let u=new Gc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),X(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",3),!1)),Wc(l=>{if(l.guards.canActivateChecks.length)return N(l).pipe(Mt(u=>{let d=new Zc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),ge(u=>{let d=!1;return N(u).pipe(R_(this.paramsInheritanceStrategy,this.environmentInjector),Mt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",2)}}))}),Mt(u=>{let d=new Jc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),Wc(l=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Mt(f=>{d.component=f}),K(()=>{})));for(let f of d.children)h.push(...u(f));return h};return os(u(l.targetSnapshot.root)).pipe(_c(null),Zt(1))}),Wc(()=>this.afterPreactivation()),ge(()=>{let{currentSnapshot:l,targetSnapshot:u}=s,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?$t(d).pipe(K(()=>s)):N(s)}),K(l=>{let u=$y(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=Q(S({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),Mt(()=>{this.events.next(new Xi)}),zy(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Zt(1),Mt({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ue(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),on(this.transitionAbortSubject.pipe(Mt(l=>{throw l}))),Pn(()=>{if(!a&&!c){let l="";this.cancelNavigationTransition(s,l,1)}this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),In(l=>{if(c=!0,Wf(l))this.events.next(new ze(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),By(l)?this.events.next(new Gi(l.url)):s.resolve(!1);else{this.events.next(new Qi(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(l))}catch(u){s.reject(u)}}return rn}))}))}cancelNavigationTransition(r,i,o){let s=new ze(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function $_(e){return e!==Hi}var El=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=z({token:t,factory:()=>(()=>P(L_))(),providedIn:"root"});let e=t;return e})(),gl=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},L_=(()=>{let t=class t extends gl{};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Nn(t)))(o||t)}})(),t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Jf=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=z({token:t,factory:()=>(()=>P(F_))(),providedIn:"root"});let e=t;return e})(),F_=(()=>{let t=class t extends Jf{constructor(){super(...arguments),this.location=P(Re),this.urlSerializer=P(ro),this.options=P(so,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=P(Cl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ar,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Ff(this.currentUrlTree,null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Ir)this.stateMemento=this.createStateMemento();else if(r instanceof Tr)this.rawUrlTree=i.initialUrl;else if(r instanceof Rs){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof Xi?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof ze&&(r.code===3||r.code===2)?this.restoreHistory(i):r instanceof Qi?this.restoreHistory(i,!0):r instanceof Ue&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=S(S({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=S(S({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Nn(t)))(o||t)}})(),t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Vi=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(Vi||{});function tm(e,t){e.events.pipe(X(n=>n instanceof Ue||n instanceof ze||n instanceof Qi||n instanceof Tr),K(n=>n instanceof Ue||n instanceof Tr?Vi.COMPLETE:(n instanceof ze?n.code===0||n.code===1:!1)?Vi.REDIRECTING:Vi.FAILED),X(n=>n!==Vi.REDIRECTING),Zt(1)).subscribe(()=>{t()})}function B_(e){throw e}var j_={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},U_={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ee=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=P(jh),this.stateManager=P(Jf),this.options=P(so,{optional:!0})||{},this.pendingTasks=P(Uh),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=P(Sl),this.urlSerializer=P(ro),this.location=P(Re),this.urlHandlingStrategy=P(Cl),this._events=new U,this.errorHandler=this.options.errorHandler||B_,this.navigated=!1,this.routeReuseStrategy=P(El),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=P(Mr,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!P(Ps,{optional:!0}),this.eventsSubscription=new Te,this.isNgZoneEnabled=P(ht)instanceof ht&&ht.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof ze&&i.code!==0&&i.code!==1)this.navigated=!0;else if(i instanceof Ue)this.navigated=!0;else if(i instanceof Gi){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c={skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||$_(o.source)};this.scheduleNavigation(a,Hi,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}V_(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Hi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)}))}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=S({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(_l),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=S(S({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=Pf(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return Nf(h,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=Yn(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,Hi,null,i)}navigate(r,i={skipLocationChange:!1}){return z_(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=S({},j_):i===!1?o=S({},U_):o=i,Yn(r))return pf(this.currentUrlTree,r,o);let s=this.parseUrl(r);return pf(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.keys(r).reduce((i,o)=>{let s=r[o];return s!=null&&(i[o]=s),i},{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((h,f)=>{c=h,l=f});let d=this.pendingTasks.add();return tm(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function z_(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new Vt(4008,!1)}function V_(e){return!(e instanceof Xi)&&!(e instanceof Gi)}var HR=(()=>{let t=class t{constructor(r,i,o,s,a,c){this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new U,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(u=>{u instanceof Ue&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,s,a){if(this.urlTree===null||this.isAnchorElement&&(r!==0||i||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state};return this.router.navigateByUrl(this.urlTree,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=this.urlTree!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;let r=this.href===null?null:Th(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(r,i){let o=this.renderer,s=this.el.nativeElement;i!==null?o.setAttribute(s,r,i):o.removeAttribute(s,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};t.\u0275fac=function(i){return new(i||t)(T(ee),T(Ve),kh("tabindex"),T(Mh),T(_t),T(Fi))},t.\u0275dir=vt({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){i&1&&Ln("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&le("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",te],skipLocationChange:["skipLocationChange","skipLocationChange",te],replaceUrl:["replaceUrl","replaceUrl",te],routerLink:"routerLink"},standalone:!0,features:[Or,Sr]});let e=t;return e})();var Ms=class{};var W_=(()=>{let t=class t{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(X(r=>r instanceof Ue),Tn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=Dc(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(c,s.children??s._loadedRoutes))}return $t(o).pipe(bc())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=N(null);let s=o.pipe(bt(a=>a===null?N(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return $t([s,a]).pipe(bc())}else return s})}};t.\u0275fac=function(i){return new(i||t)(D(ee),D(Bn),D(Pi),D(Ms),D(wl))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),em=new Y(""),H_=(()=>{let t=class t{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Ir?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Ue?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Tr&&r.code===0&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Os&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Os(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};t.\u0275fac=function(i){Ni()},t.\u0275prov=z({token:t,factory:t.\u0275fac});let e=t;return e})();function KR(e,...t){return Ah([{provide:Mr,multi:!0,useValue:e},[],{provide:Ve,useFactory:rm,deps:[ee]},{provide:kc,multi:!0,useFactory:nm},t.map(n=>n.\u0275providers)])}function rm(e){return e.routerState.root}function ao(e,t){return{\u0275kind:e,\u0275providers:t}}function nm(){let e=P(yt);return t=>{let n=e.get(ds);if(t!==n.components[0])return;let r=e.get(ee),i=e.get(im);e.get(Rl)===1&&r.initialNavigation(),e.get(om,null,Cc.Optional)?.setUpPreloading(),e.get(em,null,Cc.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var im=new Y("",{factory:()=>new U}),Rl=new Y("",{providedIn:"root",factory:()=>1});function K_(){return ao(2,[{provide:Rl,useValue:0},{provide:Li,multi:!0,deps:[yt],useFactory:t=>{let n=t.get(Hh,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=t.get(ee),o=t.get(im);tm(i,()=>{r(!0)}),t.get(Sl).afterPreactivation=()=>(r(!0),o.closed?N(void 0):o),i.initialNavigation()}))}}])}function q_(){return ao(3,[{provide:Li,multi:!0,useFactory:()=>{let t=P(ee);return()=>{t.setUpLocationChangeListener()}}},{provide:Rl,useValue:2}])}var om=new Y("");function Y_(e){return ao(0,[{provide:om,useExisting:W_},{provide:Ms,useExisting:e}])}function Q_(){return ao(8,[yf,{provide:Ps,useExisting:yf}])}function X_(e){let t=[{provide:Gf,useValue:P_},{provide:Zf,useValue:S({skipNextTransition:!!e?.skipInitialTransition},e)}];return ao(9,t)}var xf=new Y("ROUTER_FORROOT_GUARD"),G_=[Re,{provide:ro,useClass:qi},ee,no,{provide:Ve,useFactory:rm,deps:[ee]},wl,[]],sm=(()=>{let t=class t{constructor(r){}static forRoot(r,i){return{ngModule:t,providers:[G_,[],{provide:Mr,multi:!0,useValue:r},{provide:xf,useFactory:ex,deps:[[ee,new ss,new as]]},{provide:so,useValue:i||{}},i?.useHash?J_():tx(),Z_(),i?.preloadingStrategy?Y_(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?rx(i):[],i?.bindToComponentInputs?Q_().\u0275providers:[],i?.enableViewTransitions?X_().\u0275providers:[],nx()]}}static forChild(r){return{ngModule:t,providers:[{provide:Mr,multi:!0,useValue:r}]}}};t.\u0275fac=function(i){return new(i||t)(D(xf,8))},t.\u0275mod=Rt({type:t}),t.\u0275inj=Et({});let e=t;return e})();function Z_(){return{provide:em,useFactory:()=>{let e=P(Qh),t=P(ht),n=P(so),r=P(Sl),i=P(ro);return n.scrollOffset&&e.setOffset(n.scrollOffset),new H_(i,r,e,t,n)}}}function J_(){return{provide:Fi,useClass:qh}}function tx(){return{provide:Fi,useClass:Kh}}function ex(e){return"guarded"}function rx(e){return[e.initialNavigation==="disabled"?q_().\u0275providers:[],e.initialNavigation==="enabledBlocking"?K_().\u0275providers:[]]}var wf=new Y("");function nx(){return[{provide:wf,useFactory:nm},{provide:kc,multi:!0,useExisting:wf}]}var ix=new Y("LOCALIZE_ROUTER_FORROOT_GUARD"),Ol=new Y("RAW_ROUTES"),Nr=function(e){return e.LocalStorage="LocalStorage",e.SessionStorage="SessionStorage",e.Cookie="Cookie",e}(Nr||{}),cm=new Y("USE_CACHED_LANG"),lm=new Y("CACHE_MECHANISM"),um=new Y("CACHE_NAME"),dm=new Y("COOKIE_FORMAT"),hm=new Y("INITIAL_NAVIGATION"),fm=new Y("DEFAULT_LANG_FUNCTION"),mm=new Y("ALWAYS_SET_PREFIX"),ox="LOCALIZE_DEFAULT_LANGUAGE",sx="{{value}};{{expires}}",ax=!1,Ls=(()=>{let t=class t{constructor(r=!0,i=!0,o=Nr.LocalStorage,s=ox,a=void 0,c=sx,l=ax){this.useCachedLang=r,this.alwaysSetPrefix=i,this.cacheName=s,this.cookieFormat=c,this.initialNavigation=l,this.cacheMechanism=o,this.defaultLangFunction=a}};t.\u0275fac=function(i){return new(i||t)(D(cm),D(mm),D(lm),D(um),D(fm),D(dm),D(hm))},t.\u0275prov=z({token:t,factory:t.\u0275fac});let e=t;return e})(),cx=30,co=(()=>{let t=class t{constructor(r,i,o){this.translate=r,this.location=i,this.settings=o}init(r){let i;if(this.routes=r,!this.locales||!this.locales.length)return Promise.resolve();let o=this.getLocationLang(),s=this._getBrowserLang();this.settings.defaultLangFunction?this.defaultLang=this.settings.defaultLangFunction(this.locales,this._cachedLang,s):this.defaultLang=this._cachedLang||s||this.locales[0],i=o||this.defaultLang,this.translate.setDefaultLang(this.defaultLang);let a=[];if(this.settings.alwaysSetPrefix){let c={path:"",redirectTo:this.defaultLang,pathMatch:"full"},l=r.findIndex(u=>u.path==="**");l!==-1&&(this._wildcardRoute=r.splice(l,1)[0]),a=this.routes.splice(0,this.routes.length,c)}else a=[...this.routes];for(let c=a.length-1;c>=0;c--)a[c].data&&a[c].data.skipRouteLocalization&&(this.settings.alwaysSetPrefix&&this.routes.push(a[c]),(a[c].redirectTo===void 0||!a[c].data.skipRouteLocalization.localizeRedirectTo)&&a.splice(c,1));return a&&a.length&&(this.locales.length>1||this.settings.alwaysSetPrefix)&&(this._languageRoute={children:a},this.routes.unshift(this._languageRoute)),this._wildcardRoute&&this.settings.alwaysSetPrefix&&this.routes.push(this._wildcardRoute),is(this.translateRoutes(i))}initChildRoutes(r){return this._translateRouteTree(r),r}translateRoutes(r){return new ns(i=>{this._cachedLang=r,this._languageRoute&&(this._languageRoute.path=r),this.translate.use(r).subscribe(o=>{this._translationObject=o,this.currentLang=r,this._languageRoute?(this._translateRouteTree(this._languageRoute.children,!0),this._wildcardRoute&&this._wildcardRoute.redirectTo&&this._translateProperty(this._wildcardRoute,"redirectTo",!0)):this._translateRouteTree(this.routes,!0),i.next(void 0),i.complete()})})}_translateRouteTree(r,i){r.forEach(o=>{let s=o.data&&o.data.skipRouteLocalization,a=!s||s.localizeRedirectTo;if(o.redirectTo&&a){let c=o.redirectTo.indexOf("/")===0||i;this._translateProperty(o,"redirectTo",c)}s||(o.path!==null&&o.path!==void 0&&this._translateProperty(o,"path"),o.children&&this._translateRouteTree(o.children),o.loadChildren&&o._loadedRoutes?.length&&this._translateRouteTree(o._loadedRoutes))})}_translateProperty(r,i,o){let s=r.data=r.data||{};s.localizeRouter||(s.localizeRouter={}),s.localizeRouter[i]||(s.localizeRouter=Q(S({},s.localizeRouter),{[i]:r[i]}));let a=this.translateRoute(s.localizeRouter[i]);r[i]=o?this.addPrefixToUrl(a):a}get urlPrefix(){return this.settings.alwaysSetPrefix||this.currentLang!==this.defaultLang?this.currentLang?this.currentLang:this.defaultLang:""}addPrefixToUrl(r){let i=r.split("?"),o=i[0].length===1&&i[0]==="/";i[0]=i[0].replace(/\/$/,"");let s=i.join("?");return this.urlPrefix===""?s:!s.startsWith("/")&&!o?`${this.urlPrefix}/${s}`:`/${this.urlPrefix}${s}`}translateRoute(r){let i=r.split("?");if(i.length>2)throw Error("There should be only one query parameter block in the URL");return i[0].split("/").map(s=>s.length?this.translateText(s):s).join("/")+(i.length>1?`?${i[1]}`:"")}getLocationLang(r){let i=(r||this.location.path()).split(/[\?;]/),o=[];return i.length>0&&(o=i[0].split("/")),o.length>1&&this.locales.indexOf(o[1])!==-1?o[1]:o.length&&this.locales.indexOf(o[0])!==-1?o[0]:null}_getBrowserLang(){return this._returnIfInLocales(this.translate.getBrowserLang())}get _cachedLang(){if(this.settings.useCachedLang){if(this.settings.cacheMechanism===Nr.LocalStorage)return this._cacheWithLocalStorage();if(this.settings.cacheMechanism===Nr.SessionStorage)return this._cacheWithSessionStorage();if(this.settings.cacheMechanism===Nr.Cookie)return this._cacheWithCookies()}}set _cachedLang(r){this.settings.useCachedLang&&(this.settings.cacheMechanism===Nr.LocalStorage&&this._cacheWithLocalStorage(r),this.settings.cacheMechanism===Nr.SessionStorage&&this._cacheWithSessionStorage(r),this.settings.cacheMechanism===Nr.Cookie&&this._cacheWithCookies(r))}_cacheWithLocalStorage(r){try{if(typeof window>"u"||typeof window.localStorage>"u")return;if(r){window.localStorage.setItem(this.settings.cacheName,r);return}return this._returnIfInLocales(window.localStorage.getItem(this.settings.cacheName))}catch{return}}_cacheWithSessionStorage(r){try{if(typeof window>"u"||typeof window.sessionStorage>"u")return;if(r){window.sessionStorage.setItem(this.settings.cacheName,r);return}return this._returnIfInLocales(window.sessionStorage.getItem(this.settings.cacheName))}catch{return}}_cacheWithCookies(r){try{if(typeof document>"u"||typeof document.cookie>"u")return;let i=encodeURIComponent(this.settings.cacheName);if(r){let a=`${this.settings.cookieFormat}`;a=a.replace("{{value}}",`${i}=${encodeURIComponent(r)}`).replace(/{{expires:?(\d+)?}}/g,(c,l)=>{let u=l===void 0?cx:parseInt(l,10),d=new Date;return d.setTime(d.getTime()+u*864e5),`expires=${d.toUTCString()}`}),document.cookie=a;return}let s=new RegExp("(?:^"+i+"|;\\s*"+i+")=(.*?)(?:;|$)","g").exec(document.cookie);return decodeURIComponent(s[1])}catch{return}}_returnIfInLocales(r){return r&&this.locales.indexOf(r)!==-1?r:null}translateText(r){if(this.escapePrefix&&r.startsWith(this.escapePrefix))return r.replace(this.escapePrefix,"");{if(!this._translationObject)return r;let i=this.prefix+r,o=this.translate.getParsedResult(this._translationObject,i);return o!==i?o:r}}chooseQueryParams(r,i){let o;return r&&r.queryParams?o=r.queryParams:i&&(o=i),o}formatQueryParams(r){return new Xh({fromObject:r}).toString()}getPrefix(){return this.prefix}getEscapePrefix(){return this.escapePrefix}};t.\u0275fac=function(i){return new(i||t)(D(cf),D(Re),D(Ls))},t.\u0275prov=z({token:t,factory:t.\u0275fac});let e=t;return e})();var lx=(()=>{let t=class t extends co{load(r){return new Promise(i=>{this.init(r).then(i)})}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Nn(t)))(o||t)}})(),t.\u0275prov=z({token:t,factory:t.\u0275fac});let e=t;return e})();function $s(e,t){if(e===t)return!0;if(e===null||t===null)return!1;if(e!==e&&t!==t)return!0;let n=typeof e,r=typeof t,i,o,s;if(n===r&&n==="object")if(Array.isArray(e)){if(!Array.isArray(t))return!1;if((i=e.length)===t.length){for(o=0;o<i;o++)if(!$s(e[o],t[o]))return!1;return!0}}else{if(Array.isArray(t))return!1;s=Object.create(null);for(o in e)if(e.hasOwnProperty(o)){if(!$s(e[o],t[o]))return!1;s[o]=!0}for(o in t)if(t.hasOwnProperty(o)&&!(o in s)&&typeof t[o]<"u")return!1;return!0}return!1}function ux(e){return!!e&&typeof e.then=="function"}function kl(e){let t=Array.isArray(e)?[]:{};for(let n in e)if(n){let r=e[n];t[n]=typeof r=="object"?kl(r):r}return t}var Al=(()=>{let t=class t{constructor(r,i,o,s){this.parser=r,this.settings=i,this.router=o,this.route=s,this.routerEvents=new U;let a=new gh(1);this.hooks={_initializedSubject:a,initialized:a.asObservable()}}init(){this.applyConfigToRouter(this.parser.routes),this.router.events.pipe(X(r=>r instanceof Ir),wc()).subscribe(this._routeChanged()),this.settings.initialNavigation&&this.router.initialNavigation()}changeLanguage(r,i,o){if(r!==this.parser.currentLang){let s=this.router.routerState.snapshot.root;this.parser.translateRoutes(r).subscribe(()=>{let a=this.traverseRouteSnapshot(s);if(a=this.translateRoute(a),!this.settings.alwaysSetPrefix){let u=a.split("/"),d=u.indexOf(this.parser.currentLang);if(this.parser.currentLang===this.parser.defaultLang)(d===0||d===1&&u[0]==="")&&(u=u.slice(0,d).concat(u.slice(d+1)));else if(d===-1){let h=u[0]===""?1:0;u=u.slice(0,h).concat(this.parser.currentLang,u.slice(h))}a=u.join("/")}a=a.replace(/\/+/g,"/");let c=a.lastIndexOf("/");c>0&&c===a.length-1&&(a=a.slice(0,-1));let l=this.parser.chooseQueryParams(i,this.route.snapshot.queryParams);if(this.applyConfigToRouter(this.parser.routes),this.lastExtras=i,o){let u=i?S({},i):{};l&&(u.queryParams=l),this.router.navigate([a],u)}else{let u=this.parser.formatQueryParams(l);u=u?`?${u}`:"",this.router.navigateByUrl(`${a}${u}`,i)}})}}traverseRouteSnapshot(r){return r.firstChild&&r.routeConfig?`${this.parseSegmentValue(r)}/${this.traverseRouteSnapshot(r.firstChild)}`:r.firstChild?this.traverseRouteSnapshot(r.firstChild):this.parseSegmentValue(r)}buildUrlFromSegments(r,i){return i.map((o,s)=>o.indexOf(":")===0?r.url[s].path:o).join("/")}parseSegmentValue(r){if(r.routeConfig&&r.routeConfig.matcher){let i=this.parseSegmentValueMatcher(r);return this.buildUrlFromSegments(r,i)}else if(r.data.localizeRouter){let o=r.data.localizeRouter.path.split("/");return this.buildUrlFromSegments(r,o)}else if(r.parent&&r.parent.parent){let o=r.routeConfig.path.split("/");return this.buildUrlFromSegments(r,o)}else return""}parseSegmentValueMatcher(r){let i=r.data&&r.data.localizeMatcher&&r.data.localizeMatcher.params||{};return r.url.map(s=>{let a=s.path,c=s.localizedParamName;return(c&&i[c]?i[c](a):null)||`${this.parser.getEscapePrefix()}${a}`})}translateRoute(r){if(typeof r=="string"){let o=this.parser.translateRoute(r);return r.indexOf("/")?o:this.parser.addPrefixToUrl(o)}let i=[];return r.forEach((o,s)=>{if(typeof o=="string"){let a=this.parser.translateRoute(o);!s&&!o.indexOf("/")?i.push(this.parser.addPrefixToUrl(a)):i.push(a)}else i.push(o)}),i}_routeChanged(){return([r,i])=>{let o=this.parser.getLocationLang(r.url)||this.parser.defaultLang,s=this.parser.getLocationLang(i.url)||this.parser.defaultLang,a=this.lastExtras;s!==o&&this.latestUrl!==i.url&&(this.latestUrl=i.url,this.cancelCurrentNavigation(),this.parser.translateRoutes(s).subscribe(()=>{this.applyConfigToRouter(this.parser.routes),this.lastExtras=void 0,this.router.navigateByUrl(i.url,a),this.routerEvents.next(s)})),this.latestUrl=i.url}}cancelCurrentNavigation(){let r=this.router.getCurrentNavigation(),i=this.router.serializeUrl(r.extractedUrl);this.router.events.next(new ze(r.id,i,"")),this.router.navigationTransitions.transitions.next(Q(S({},this.router.navigationTransitions.transitions.getValue()),{id:0}))}applyConfigToRouter(r){this.router.resetConfig(kl(r))}};t.\u0275fac=function(i){return new(i||t)(D(co),D(Ls),D(ee),D(Ve))},t.\u0275prov=z({token:t,factory:t.\u0275fac});let e=t;return e})(),dx=128,sO=(()=>{let t=class t{constructor(r,i){this.localize=r,this._ref=i,this.value="",this.subscription=this.localize.routerEvents.subscribe(()=>{this.transform(this.lastKey)})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}transform(r){if(!r||r.length===0||!this.localize.parser.currentLang)return r;if($s(r,this.lastKey)&&$s(this.lastLanguage,this.localize.parser.currentLang))return this.value;this.lastKey=r,this.lastLanguage=this.localize.parser.currentLang,this.value=this.localize.translateRoute(r),this.lastKey=r;let i=this._ref._view;return i&&i.state&dx?this.value:(setTimeout(()=>{this._ref.detectChanges()},0),this.value)}};t.\u0275fac=function(i){return new(i||t)(T(Al,16),T(Rr,16))},t.\u0275pipe=Rh({name:"localize",type:t,pure:!1});let e=t;return e})(),Dl=class{constructor(){}shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t&&n?this.getKey(t)===this.getKey(n):!1}getKey(t){if(t.firstChild&&t.firstChild.routeConfig&&t.firstChild.routeConfig.path&&t.firstChild.routeConfig.path.indexOf("**")!==-1)return"WILDCARD";if(!t.data.localizeRouter&&(!t.parent||!t.parent.parent)&&!t.data.skipRouteLocalization)return"LANG";if(t.routeConfig.matcher){let n=`${this.getKey(t.parent)}/${t.routeConfig.matcher.name}`;return t.data.discriminantPathKey&&(n=`${n}-${t.data.discriminantPathKey}`),n}else if(t.data.localizeRouter){let n=`${this.getKey(t.parent)}/${t.data.localizeRouter.path}`;return t.data.discriminantPathKey&&(n=`${n}-${t.data.discriminantPathKey}`),n}else{let n=t.routeConfig.path;return t.parent&&(n=`${this.getKey(t.parent)}/${t.routeConfig.path}`),t.data.discriminantPathKey&&(n=`${n}-${t.data.discriminantPathKey}`),n}}},hx=(()=>{let t=class t extends ee{constructor(){super(),this.platformId=P(Ih),this.compiler=P(Bn),this.localize=P(co),this.childrenLoaders=new WeakMap,this.loadModuleFactoryOrRoutes=(o,s)=>px(s.loadChildren()).pipe(K(mx),bt(a=>a instanceof us||Array.isArray(a)?N(a):$t(this.compiler.compileModuleAsync(a))),K(a=>{this.onLoadEndListener&&this.onLoadEndListener(s);let c,l;if(Array.isArray(a))l=this.localize.initChildRoutes([].concat(...a));else{c=a.create(o).injector;let d=c.get.bind(c);c.get=(h,f,m)=>{let p=d(h,f,m);return h===Mr?this.localize.initChildRoutes([].concat(...p)):p},l=c.get(Mr,[],{optional:!0,self:!0}).reduce((h,f)=>h.concat(f),[])}return{routes:l.map(pm),injector:c}}));let i=Yh(this.platformId)?this.navigationTransitions.configLoader.__proto__:this.navigationTransitions.configLoader;i.loadChildren=(o,s)=>{if(this.childrenLoaders.get(s))return this.childrenLoaders.get(s);if(s._loadedRoutes)return N({routes:s._loadedRoutes,injector:s._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(s);let c=this.loadModuleFactoryOrRoutes(o,s).pipe(Pn(()=>{this.childrenLoaders.delete(s)})),l=new en(c,()=>new U).pipe(Ii());return this.childrenLoaders.set(s,l),l}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function pm(e){let t=e.children&&e.children.map(pm),n=t?Q(S({},e),{children:t}):S({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==H&&(n.component=yl),n}function fx(e){return e&&typeof e=="object"&&"default"in e}function mx(e){return fx(e)?e.default:e}function px(e){return kn(e)?e:ux(e)?$t(Promise.resolve(e)):N(e)}var am=(()=>{let t=class t{constructor(r){this.injector=r}appInitializer(){return this.parser.load(this.routes).then(()=>{let i=this.injector.get(Al),o=this.injector.get(ee),s=this.injector.get(Ls);if(i.init(),s.initialNavigation)return new Promise(a=>{let c=o.navigationTransitions.afterPreactivation,l=!0;o.navigationTransitions.afterPreactivation=()=>(l&&(a(),l=!1,i.hooks._initializedSubject.next(!0),i.hooks._initializedSubject.complete()),c())});i.hooks._initializedSubject.next(!0),i.hooks._initializedSubject.complete()})}generateInitializer(r,i){return this.parser=r,this.routes=i.reduce((o,s)=>o.concat(s)),this.appInitializer}};t.\u0275fac=function(i){return new(i||t)(D(yt))},t.\u0275prov=z({token:t,factory:t.\u0275fac});let e=t;return e})();function gx(e,t,n){let r=kl(n);return e.generateInitializer(t,r).bind(e)}var aO=(()=>{let t=class t{static forRoot(r,i={}){return{ngModule:t,providers:[{provide:ee,useClass:hx},{provide:ix,useFactory:vx,deps:[[t,new ss,new as]]},{provide:cm,useValue:i.useCachedLang},{provide:mm,useValue:i.alwaysSetPrefix},{provide:um,useValue:i.cacheName},{provide:lm,useValue:i.cacheMechanism},{provide:fm,useValue:i.defaultLangFunction},{provide:dm,useValue:i.cookieFormat},{provide:hm,useValue:i.initialNavigation},Ls,i.parser||{provide:co,useClass:lx},{provide:Ol,multi:!0,useValue:r},Al,am,{provide:Li,multi:!0,useFactory:gx,deps:[am,co,Ol]},{provide:El,useClass:Dl}]}}static forChild(r){return{ngModule:t,providers:[{provide:Ol,multi:!0,useValue:r}]}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Rt({type:t}),t.\u0275inj=Et({imports:[hs,sm,lf]});let e=t;return e})();function vx(e){if(e)throw new Error("LocalizeRouterModule.forRoot() called twice. Lazy loaded modules should use LocalizeRouterModule.forChild() instead.");return"guarded"}function $r(e){"@babel/helpers - typeof";return $r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$r(e)}function Il(e,t){if($r(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if($r(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tl(e){var t=Il(e,"string");return $r(t)=="symbol"?t:String(t)}function gm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tl(r.key),r)}}function Ft(e,t,n){return t&&gm(e.prototype,t),n&&gm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function lo(e){return Array.isArray(e)?e.slice(0):[e]}function He(e){return Array.isArray(e)}function vm(e){return e!=null}function Fs(e,t){var n=0,r=-1;for(var i of e){r=r+1;var o=t(i,r);if(o)n=n+1;else break}return n}function nr(e,t){for(var n=t.length,r=0;r<n;++r){var i=t[r];e.push(i)}}function bm(e){return e.filter(function(t,n,r){return r.indexOf(t)===n})}function ym(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return btoa(t)}function _m(e,t){return O(this,null,function*(){var n=yield fetch("data:"+t+";base64,"+e),r=yield n.blob();return r})}function xm(e){var t=Object.prototype.toString.call(e);return t==="[object Uint8Array]"&&(e=new Blob([e])),typeof e=="string"?Promise.resolve(e):e.text()}function wm(e){return O(this,null,function*(){if(typeof e=="string")return e;var t=Object.prototype.toString.call(e);t==="[object Uint8Array]"&&(e=new Blob([e]));var n=yield e.arrayBuffer();return ym(n)})}function Cm(e){return e.size}function Bs(e){var t=e.split("-");if(t.length!==2)throw new Error("malformatted revision: "+e);return{height:parseInt(t[0],10),hash:t[1]}}function Ml(e){var t=parseInt(e.split("-")[0],10);return t}function Gn(e,t){var n=t?t._rev:null,r=n?Bs(n).height:0,i=r+1;return i+"-"+e}var js=1;function Lr(){return{lwt:js}}function ir(){return""}function Sm(e){return Object.assign({},e,{_meta:void 0,_deleted:void 0,_rev:void 0})}function Em(e,t,n){if(t.length!==n.length)return!1;for(var r=0,i=t.length;r<i;){var o=t[r],s=n[r];if(r++,o._rev!==s._rev||o[e]!==s[e])return!1}return!0}var RO=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});var OO=Object.freeze(["prototype","__proto__","constructor"]);var bx="[native code] }",DO=bx.length;var Fr=class e{constructor(t,n){t=this.words=t||[],this.sigBytes=n===void 0?t.length*4:n}toString(t){return(t||yx).stringify(this)}concat(t){if(this.clamp(),this.sigBytes%4)for(let n=0;n<t.sigBytes;n++){let r=t.words[n>>>2]>>>24-n%4*8&255;this.words[this.sigBytes+n>>>2]|=r<<24-(this.sigBytes+n)%4*8}else for(let n=0;n<t.sigBytes;n+=4)this.words[this.sigBytes+n>>>2]=t.words[n>>>2];return this.sigBytes+=t.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new e([...this.words])}},yx={stringify(e){let t=[];for(let n=0;n<e.sigBytes;n++){let r=e.words[n>>>2]>>>24-n%4*8&255;t.push((r>>>4).toString(16),(r&15).toString(16))}return t.join("")}};var _x={parse(e){let t=e.length,n=[];for(let r=0;r<t;r++)n[r>>>2]|=(e.charCodeAt(r)&255)<<24-r%4*8;return new Fr(n,t)}},xx={parse(e){return _x.parse(unescape(encodeURIComponent(e)))}},Pl=class{constructor(){this._data=new Fr,this._nDataBytes=0,this._minBufferSize=0,this.blockSize=512/32}reset(){this._data=new Fr,this._nDataBytes=0}_append(t){typeof t=="string"&&(t=xx.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}_doProcessBlock(t,n){}_process(t){let n,r=this._data.sigBytes/(this.blockSize*4);t?r=Math.ceil(r):r=Math.max((r|0)-this._minBufferSize,0);let i=r*this.blockSize,o=Math.min(i*4,this._data.sigBytes);if(i){for(let s=0;s<i;s+=this.blockSize)this._doProcessBlock(this._data.words,s);n=this._data.words.splice(0,i),this._data.sigBytes-=o}return new Fr(n,o)}},Nl=class extends Pl{update(t){return this._append(t),this._process(),this}finalize(t){t&&this._append(t)}},Rm=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],wx=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],dn=[],$l=class extends Nl{constructor(){super(...arguments),this._hash=new Fr([...Rm])}reset(){super.reset(),this._hash=new Fr([...Rm])}_doProcessBlock(t,n){let r=this._hash.words,i=r[0],o=r[1],s=r[2],a=r[3],c=r[4],l=r[5],u=r[6],d=r[7];for(let h=0;h<64;h++){if(h<16)dn[h]=t[n+h]|0;else{let w=dn[h-15],_=(w<<25|w>>>7)^(w<<14|w>>>18)^w>>>3,C=dn[h-2],R=(C<<15|C>>>17)^(C<<13|C>>>19)^C>>>10;dn[h]=_+dn[h-7]+R+dn[h-16]}let f=c&l^~c&u,m=i&o^i&s^o&s,p=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),b=(c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25),g=d+b+f+wx[h]+dn[h],x=p+m;d=u,u=l,l=c,c=a+g|0,a=s,s=o,o=i,i=g+x|0}r[0]=r[0]+i|0,r[1]=r[1]+o|0,r[2]=r[2]+s|0,r[3]=r[3]+a|0,r[4]=r[4]+c|0,r[5]=r[5]+l|0,r[6]=r[6]+u|0,r[7]=r[7]+d|0}finalize(t){super.finalize(t);let n=this._nDataBytes*8,r=this._data.sigBytes*8;return this._data.words[r>>>5]|=128<<24-r%32,this._data.words[(r+64>>>9<<4)+14]=Math.floor(n/4294967296),this._data.words[(r+64>>>9<<4)+15]=n,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}};function Om(e){return new $l().finalize(e).toString()}function Cx(e){return Promise.resolve(Om(e))}function Sx(e){return O(this,null,function*(){var t=new TextEncoder().encode(e),n=yield crypto.subtle.digest("SHA-256",t),r=Array.prototype.map.call(new Uint8Array(n),i=>("00"+i.toString(16)).slice(-2)).join("");return r})}var Ex=typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof crypto.subtle.digest=="function",Dm=Ex?Sx:Cx;function km(){return new Promise(e=>setTimeout(e,0))}function Am(e=0){return new Promise(t=>setTimeout(t,e))}var Rx=Promise.resolve(!0),Oe=Promise.resolve(!1),Im=Promise.resolve(null),Br=Promise.resolve();function Fl(e=1e4){return typeof requestIdleCallback=="function"?new Promise(t=>{requestIdleCallback(()=>t(),{timeout:e})}):Am(0)}var Ll=Br;function Tm(e=void 0){return Ll=Ll.then(()=>Fl(e)),Ll}function Mm(e,t){return e.reduce((n,r)=>n.then(r),Promise.resolve(t))}var Pm=/\./g;var Nm="abcdefghijklmnopqrstuvwxyz";function hn(e=10){for(var t="",n=0;n<e;n++)t+=Nm.charAt(Math.floor(Math.random()*Nm.length));return t}function Us(e){e+="";var t=e.charAt(0).toUpperCase();return t+e.substr(1)}function Ke(e){for(;e.charAt(0)===".";)e=e.substr(1);for(;e.slice(-1)===".";)e=e.slice(0,-1);return e}function Bl(e){return!!(e.includes("/")||e.includes("\\"))}function jr(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r;if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!jr(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();var i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){var o=i[r];if(!jr(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}var Ul=e=>{var t=typeof e;return e!==null&&(t==="object"||t==="function")},jl=new Set(["__proto__","prototype","constructor"]),Ox=new Set("0123456789");function $m(e){var t=[],n="",r="start",i=!1;for(var o of e)switch(o){case"\\":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd")throw new Error("Invalid character after an index");i&&(n+=o),r="property",i=!i;break}case".":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd"){r="property";break}if(i){i=!1,n+=o;break}if(jl.has(n))return[];t.push(n),n="",r="property";break}case"[":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd"){r="index";break}if(i){i=!1,n+=o;break}if(r==="property"){if(jl.has(n))return[];t.push(n),n=""}r="index";break}case"]":{if(r==="index"){t.push(Number.parseInt(n,10)),n="",r="indexEnd";break}if(r==="indexEnd")throw new Error("Invalid character after an index")}default:{if(r==="index"&&!Ox.has(o))throw new Error("Invalid character in an index");if(r==="indexEnd")throw new Error("Invalid character after an index");r==="start"&&(r="property"),i&&(i=!1,n+="\\"),n+=o}}switch(i&&(n+="\\"),r){case"property":{if(jl.has(n))return[];t.push(n);break}case"index":throw new Error("Index was not closed");case"start":{t.push("");break}}return t}function Lm(e,t){if(typeof t!="number"&&Array.isArray(e)){var n=Number.parseInt(t,10);return Number.isInteger(n)&&e[n]===e[t]}return!1}function Dx(e,t){if(Lm(e,t))throw new Error("Cannot use string index")}function re(e,t,n){if(Array.isArray(t)&&(t=t.join(".")),!t.includes(".")&&!t.includes("["))return e[t];if(!Ul(e)||typeof t!="string")return n===void 0?e:n;var r=$m(t);if(r.length===0)return n;for(var i=0;i<r.length;i++){var o=r[i];if(Lm(e,o)?e=i===r.length-1?void 0:null:e=e[o],e==null){if(i!==r.length-1)return n;break}}return e===void 0?n:e}function zl(e,t,n){if(Array.isArray(t)&&(t=t.join(".")),!Ul(e)||typeof t!="string")return e;for(var r=e,i=$m(t),o=0;o<i.length;o++){var s=i[o];Dx(e,s),o===i.length-1?e[s]=n:Ul(e[s])||(e[s]=typeof i[o+1]=="number"?[]:{}),e=e[s]}return r}function Wl(e){return Object.freeze(e),Object.getOwnPropertyNames(e).forEach(function(t){Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==null&&(typeof e[t]=="object"||typeof e[t]=="function")&&!Object.isFrozen(e[t])&&Wl(e[t])}),e}function Fm(e){var t=e.split("."),n=t.length;return n===1?r=>r[e]:r=>{for(var i=r,o=0;o<n;++o){var s=t[o];if(i=i[s],typeof i>"u")return i}return i}}function zs(e){var t={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n))if(typeof e[n]=="object"){var r=zs(e[n]);for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[n+"."+i]=r[i])}else t[n]=e[n];return t}function J(e){return Object.assign({},e)}function Bm(e){return Object.keys(e)[0]}function Zn(e,t=!1){if(!e)return e;if(!t&&Array.isArray(e))return e.sort((r,i)=>typeof r=="string"&&typeof i=="string"?r.localeCompare(i):typeof r=="object"?1:-1).map(r=>Zn(r,t));if(typeof e=="object"&&!Array.isArray(e)){var n={};return Object.keys(e).sort((r,i)=>r.localeCompare(i)).forEach(r=>{n[r]=Zn(e[r],t)}),n}return e}function Vl(e){if(!e||e===null||typeof e!="object")return e;if(Array.isArray(e)){for(var t=new Array(e.length),n=t.length;n--;)t[n]=Vl(e[n]);return t}var r={};for(var i in e)r[i]=Vl(e[i]);return r}var _e=Vl;function xe(e,t,n){return Object.defineProperty(e,t,{get:function(){return n}}),n}function Ur(e,t){var n=e.get(t);if(typeof n>"u")throw new Error("missing value from map "+t);return n}function Ht(e,t,n,r){var i=e.get(t);return typeof i>"u"?(i=n(),e.set(t,i)):r&&r(i),i}function ot(e){var t=e.split("-"),n="RxDB";return t.forEach(r=>{n+=Us(r)}),n+="Plugin",new Error(`You are using a function which must be overwritten by a plugin.
        You should either prevent the usage of this function or add the plugin via:
            import { `+n+" } from 'rxdb/plugins/"+e+`';
            addRxPlugin(`+n+`);
        `)}var Hl=0;function Ot(){var e=Date.now();e=e+.01,e<=Hl&&(e=Hl+.01);var t=parseFloat(e.toFixed(2));return Hl=t,t}function rt(e){if(!e)throw new Error("ensureNotFalsy() is falsy");return e}var Vs={bufferSize:1,refCount:!0};var uo="15.2.0";function or(e,t){return or=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},or(e,t)}function Ws(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,or(e,t)}function ho(e){return ho=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ho(e)}function Kl(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function ql(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Jn(e,t,n){return ql()?Jn=Reflect.construct.bind():Jn=function(i,o,s){var a=[null];a.push.apply(a,o);var c=Function.bind.apply(i,a),l=new c;return s&&or(l,s.prototype),l},Jn.apply(null,arguments)}function ti(e){var t=typeof Map=="function"?new Map:void 0;return ti=function(r){if(r===null||!Kl(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(r))return t.get(r);t.set(r,i)}function i(){return Jn(r,arguments,ho(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),or(i,r)},ti(e)}var nt={isDevMode(){return!1},deepFreezeWhenDevMode(e){return e},tunnelErrorMessage(e){return"RxDB Error-Code "+e+`.
        Error messages are not included in RxDB core to reduce build size.
        - To find out what this error means, either use the dev-mode-plugin https://rxdb.info/dev-mode.html
        - or search for the error code here: https://github.com/pubkey/rxdb/search?q=`+e+`
        `}};function kx(e){var t="";return Object.keys(e).length===0||(t+=`Given parameters: {
`,t+=Object.keys(e).map(n=>{var r="[object Object]";try{n==="errors"?r=e[n].map(i=>JSON.stringify(i,Object.getOwnPropertyNames(i))):r=JSON.stringify(e[n],function(i,o){return o===void 0?null:o},2)}catch{}return n+":"+r}).join(`
`),t+="}"),t}function jm(e,t,n){return"RxError ("+t+`):
`+e+`
`+kx(n)}var Ax=function(e){Ws(t,e);function t(r,i,o={}){var s,a=jm(i,r,o);return s=e.call(this,a)||this,s.code=r,s.message=a,s.parameters=o,s.rxdb=!0,s}var n=t.prototype;return n.toString=function(){return this.message},Ft(t,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}]),t}(ti(Error)),Ix=function(e){Ws(t,e);function t(r,i,o={}){var s,a=jm(i,r,o);return s=e.call(this,a)||this,s.code=r,s.message=a,s.parameters=o,s.rxdb=!0,s}var n=t.prototype;return n.toString=function(){return this.message},Ft(t,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}]),t}(ti(TypeError));function y(e,t){return new Ax(e,nt.tunnelErrorMessage(e),t)}function At(e,t){return new Ix(e,nt.tunnelErrorMessage(e),t)}function Hs(e){return e&&e.status===409?e:!1}var Tx={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};function Um(e){return y("COL20",{name:Tx[e.status],document:e.documentId,writeError:e})}var ei={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],postDestroyRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preMigrateDocument:[],postMigrateDocument:[],preDestroyRxDatabase:[],postRemoveRxDatabase:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function It(e,t){ei[e]&&ei[e].forEach(n=>n(t))}function zr(e,t){return Promise.all(ei[e].map(n=>n(t)))}function ne(e,t){var n=t;n=n.replace(Pm,".properties."),n="properties."+n,n=Ke(n);var r=re(e,n);return r}function Ks(e,t,n){if(typeof t.primaryKey=="string")return n;var r=fo(t,n),i=n[e];if(i&&i!==r)throw y("DOC19",{args:{documentData:n,existingPrimary:i,newPrimary:r},schema:t});return n[e]=r,n}function Kt(e){return typeof e=="string"?e:e.key}function fo(e,t){if(typeof e.primaryKey=="string")return t[e.primaryKey];var n=e.primaryKey;return n.fields.map(r=>{var i=re(t,r);if(typeof i>"u")throw y("DOC18",{args:{field:r,documentData:t}});return i}).join(n.separator)}function zm(e){var t=Zn(e,!0);return t}function Mx(e){return["_deleted",e]}function qs(e){e=J(e);var t=Kt(e.primaryKey);e.properties=J(e.properties),e.additionalProperties=!1,Object.prototype.hasOwnProperty.call(e,"keyCompression")||(e.keyCompression=!1),e.indexes=e.indexes?e.indexes.slice(0):[],e.required=e.required?e.required.slice(0):[],e.encrypted=e.encrypted?e.encrypted.slice(0):[],e.properties._rev={type:"string",minLength:1},e.properties._attachments={type:"object"},e.properties._deleted={type:"boolean"},e.properties._meta=Px,e.required=e.required?e.required.slice(0):[],e.required.push("_deleted"),e.required.push("_rev"),e.required.push("_meta"),e.required.push("_attachments");var n=Yl(e);nr(e.required,n),e.required=e.required.filter(o=>!o.includes(".")).filter((o,s,a)=>a.indexOf(o)===s),e.version=e.version||0;var r=e.indexes.map(o=>{var s=He(o)?o.slice(0):[o];return s.includes(t)||s.push(t),s[0]!=="_deleted"&&s.unshift("_deleted"),s});r.length===0&&r.push(Mx(t)),r.push(["_meta.lwt",t]);var i=new Set;return r.filter(o=>{var s=o.join(",");return i.has(s)?!1:(i.add(s),!0)}),e.indexes=r,e}var Px={type:"object",properties:{lwt:{type:"number",minimum:js,maximum:1e15,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function Yl(e){var t=Object.keys(e.properties).filter(r=>e.properties[r].final),n=Kt(e.primaryKey);return t.push(n),typeof e.primaryKey!="string"&&e.primaryKey.fields.forEach(r=>t.push(r)),t}function Vm(e,t){for(var n=Object.keys(e.defaultValues),r=0;r<n.length;++r){var i=n[r];(!Object.prototype.hasOwnProperty.call(t,i)||typeof t[i]>"u")&&(t[i]=e.defaultValues[i])}return t}var Ql=function(){function e(n,r){this.jsonSchema=n,this.hashFunction=r,this.indexes=Nx(this.jsonSchema),this.primaryPath=Kt(this.jsonSchema.primaryKey),this.finalFields=Yl(this.jsonSchema)}var t=e.prototype;return t.validateChange=function(r,i){this.finalFields.forEach(o=>{if(!jr(r[o],i[o]))throw y("DOC9",{dataBefore:r,dataAfter:i,fieldName:o,schema:this.jsonSchema})})},t.getDocumentPrototype=function(){var r={},i=ne(this.jsonSchema,"");return Object.keys(i).forEach(o=>{var s=o;r.__defineGetter__(o,function(){if(!(!this.get||typeof this.get!="function")){var a=this.get(s);return a}}),Object.defineProperty(r,o+"$",{get:function(){return this.get$(s)},enumerable:!1,configurable:!1}),Object.defineProperty(r,o+"_",{get:function(){return this.populate(s)},enumerable:!1,configurable:!1})}),xe(this,"getDocumentPrototype",()=>r),r},t.getPrimaryOfDocumentData=function(r){return fo(this.jsonSchema,r)},Ft(e,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var n={};return Object.entries(this.jsonSchema.properties).filter(([,r])=>Object.prototype.hasOwnProperty.call(r,"default")).forEach(([r,i])=>n[r]=i.default),xe(this,"defaultValues",n)}},{key:"hash",get:function(){return xe(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}]),e}();function Nx(e){return(e.indexes||[]).map(t=>He(t)?t:[t])}function Wm(e){var t=e.version?e.version:0,n=0;return new Array(t).fill(0).map(()=>n++)}function Hm(e,t,n=!0){n&&It("preCreateRxSchema",e);var r=qs(e);r=zm(r),nt.deepFreezeWhenDevMode(r);var i=new Ql(r,t);return It("createRxSchema",i),i}function Ys(e){return e.documentData?e.documentData:e.previousDocumentData}function Km(e){switch(e.operation){case"INSERT":return{operation:e.operation,id:e.documentId,doc:e.documentData,previous:null};case"UPDATE":return{operation:e.operation,id:e.documentId,doc:nt.deepFreezeWhenDevMode(e.documentData),previous:e.previousDocumentData?e.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:e.operation,id:e.documentId,doc:null,previous:e.previousDocumentData}}}function Qs(e){return e[e.length-1]}function $x(e){let t=typeof e;return e!==null&&(t==="object"||t==="function")}function Xl(e,t,n){if(Array.isArray(t)&&(t=t.join(".")),!$x(e)||typeof t!="string")return n===void 0?e:n;let r=t.split(".");if(r.length===0)return n;for(let i=0;i<r.length;i++){let o=r[i];if(Lx(e,o)?e=i===r.length-1?void 0:null:e=e[o],e==null){if(i!==r.length-1)return n;break}}return e===void 0?n:e}function Lx(e,t){if(typeof t!="number"&&Array.isArray(e)){let n=Number.parseInt(t,10);return Number.isInteger(n)&&e[n]===e[t]}return!1}var Gl=e=>!!e.queryParams.limit,qm=e=>e.queryParams.limit===1,Ym=e=>!!(e.queryParams.skip&&e.queryParams.skip>0),Qm=e=>e.changeEvent.operation==="DELETE",Xm=e=>e.changeEvent.operation==="INSERT",Gm=e=>e.changeEvent.operation==="UPDATE",Zm=e=>Gl(e)&&e.previousResults.length>=e.queryParams.limit,Jm=e=>{let t=e.queryParams.sortFields,n=e.changeEvent.previous,r=e.changeEvent.doc;if(!r)return!1;if(!n)return!0;for(let i=0;i<t.length;i++){let o=t[i],s=Xl(n,o),a=Xl(r,o);if(s!==a)return!0}return!1},tp=e=>{let t=e.changeEvent.id;if(e.keyDocumentMap)return e.keyDocumentMap.has(t);{let n=e.queryParams.primaryKey,r=e.previousResults;for(let i=0;i<r.length;i++)if(r[i][n]===t)return!0;return!1}},ep=e=>{let t=e.previousResults[0];return!!(t&&t[e.queryParams.primaryKey]===e.changeEvent.id)},rp=e=>{let t=Qs(e.previousResults);return!!(t&&t[e.queryParams.primaryKey]===e.changeEvent.id)},np=e=>{let t=e.changeEvent.previous;if(!t)return!1;let n=e.previousResults[0];return n?n[e.queryParams.primaryKey]===e.changeEvent.id?!0:e.queryParams.sortComparator(t,n)<0:!1},ip=e=>{let t=e.changeEvent.previous;if(!t)return!1;let n=Qs(e.previousResults);return n?n[e.queryParams.primaryKey]===e.changeEvent.id?!0:e.queryParams.sortComparator(t,n)>0:!1},op=e=>{let t=e.changeEvent.doc;if(!t)return!1;let n=e.previousResults[0];return n?n[e.queryParams.primaryKey]===e.changeEvent.id?!0:e.queryParams.sortComparator(t,n)<0:!1},sp=e=>{let t=e.changeEvent.doc;if(!t)return!1;let n=Qs(e.previousResults);return n?n[e.queryParams.primaryKey]===e.changeEvent.id?!0:e.queryParams.sortComparator(t,n)>0:!1},ap=e=>{let t=e.changeEvent.previous;return t?e.queryParams.queryMatcher(t):!1},cp=e=>{let t=e.changeEvent.doc;return t?e.queryParams.queryMatcher(t):!1},lp=e=>e.previousResults.length===0;var up={0:Xm,1:Gm,2:Qm,3:Gl,4:qm,5:Ym,6:lp,7:Zm,8:ep,9:rp,10:Jm,11:tp,12:np,13:ip,14:op,15:sp,16:ap,17:cp};function dp(e,t,n,r){var i=e.length,o=i-1,s=0;if(i===0)return e.push(t),0;for(var a;r<=o;)s=r+(o-r>>1),a=e[s],n(a,t)<=0?r=s+1:o=s-1;return n(a,t)<=0&&s++,e.splice(s,0,t),s}var hp=e=>{},Xs=e=>{e.previousResults.unshift(e.changeEvent.doc),e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,e.changeEvent.doc)},Gs=e=>{e.previousResults.push(e.changeEvent.doc),e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,e.changeEvent.doc)},Zs=e=>{let t=e.previousResults.shift();e.keyDocumentMap&&t&&e.keyDocumentMap.delete(t[e.queryParams.primaryKey])},Js=e=>{let t=e.previousResults.pop();e.keyDocumentMap&&t&&e.keyDocumentMap.delete(t[e.queryParams.primaryKey])},fp=e=>{Zs(e),Gs(e)},mp=e=>{Js(e),Xs(e)},pp=e=>{Zs(e),Xs(e)},gp=e=>{Js(e),Gs(e)},Zl=e=>{e.keyDocumentMap&&e.keyDocumentMap.delete(e.changeEvent.id);let t=e.queryParams.primaryKey,n=e.previousResults;for(let r=0;r<n.length;r++)if(n[r][t]===e.changeEvent.id){n.splice(r,1);break}},vp=e=>{let t=e.changeEvent.doc,n=e.queryParams.primaryKey,r=e.previousResults;for(let i=0;i<r.length;i++)if(r[i][n]===e.changeEvent.id){r[i]=t,e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,t);break}},bp=e=>{let t={_id:"wrongHuman"+new Date().getTime()};e.previousResults.length=0,e.previousResults.push(t),e.keyDocumentMap&&(e.keyDocumentMap.clear(),e.keyDocumentMap.set(t._id,t))},Jl=e=>{let t=e.changeEvent.id,n=e.changeEvent.doc;if(e.keyDocumentMap){if(e.keyDocumentMap.has(t))return;e.keyDocumentMap.set(t,n)}else if(e.previousResults.find(i=>i[e.queryParams.primaryKey]===t))return;dp(e.previousResults,n,e.queryParams.sortComparator,0)},yp=e=>{Zl(e),Jl(e)},_p=e=>{throw new Error("Action runFullQueryAgain must be implemented by yourself")},xp=e=>{throw new Error("Action unknownAction should never be called")};var wp=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],Cp={doNothing:hp,insertFirst:Xs,insertLast:Gs,removeFirstItem:Zs,removeLastItem:Js,removeFirstInsertLast:fp,removeLastInsertFirst:mp,removeFirstInsertFirst:pp,removeLastInsertLast:gp,removeExisting:Zl,replaceExisting:vp,alwaysWrong:bp,insertAtSortPosition:Jl,removeExistingAndInsertAtSortPosition:yp,runFullQueryAgain:_p,unknownAction:xp};function ta(e){return e.charCodeAt(0)-40}function Sp(e){return e?"1":"0"}function Fx(e=6){let t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length;for(let i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*r));return t}var jD=Fx(4);function tu(e,t){let n=[];for(let r=0,i=e.length;r<i;r+=t)n.push(e.substring(r,r+t));return n}function Ep(e){let t=new Map,r=2+parseInt(e.charAt(0)+e.charAt(1),10)*2,i=e.substring(2,r),o=tu(i,2);for(let p=0;p<o.length;p++){let b=o[p],g=b.charAt(0),x=ta(b.charAt(1));t.set(g,x)}let s=e.substring(r,e.length-3),a=tu(s,4);for(let p=0;p<a.length;p++){let b=a[p],g=b.charAt(0),x=b.charAt(1),w=b.charAt(2),_=ta(b.charAt(3));if(!t.has(x))throw new Error("missing node with id "+x);if(!t.has(w))throw new Error("missing node with id "+w);let C=t.get(x),R=t.get(w),k={l:_,0:C,1:R};t.set(g,k)}let c=e.slice(-3),l=c.charAt(0),u=c.charAt(1),d=ta(c.charAt(2)),h=t.get(l),f=t.get(u);return{l:d,0:h,1:f}}function Rp(e,t,n){let r=e,i=e.l;for(;;){let o=t[i](n),s=Sp(o);if(r=r[s],typeof r=="number"||typeof r=="string")return r;i=r.l}}var Bx="14a1b,c+d2e5f0g/h.i4j*k-l)m(n6oeh6pnm6qen6ril6snh6tin6ubo9vce9wmh9xns9yne9zmi9{cm9|ad9}cp9~aq9\x7Fae9\xA1bf9\xA2bq9\xA3cg9\xA4ck9\xA5cn9\xA6nd9\xA7np9\xA8nq9\xA9nf9\xAAng9\xABnm9\xACnk9\xADmr9\xAEms9\xAFmt9\xB0mj9\xB1mk9\xB2ml9\xB3mn9\xB4mc8\xB5\xB3{8\xB6\xAF}8\xB7\xB0\xA48\xB8\xB3\xA78\xB9mn8\xBA\xB3\xAB8\xBB\xB3m8\xBCm\xB44\xBDz\xB24\xBE\xB3w4\xBFz\xB54\xC0\xAF\xB64\xC1\xB0\xB74\xC2\xB3\xBA4\xC3\xB3\xB84\xC4m\xB94\xC5v\xA47\xC6yn7\xC7\xC0\xC17\xC8~\x7F7\xC9\xA5\xA47\xCA\xC3\xC47\xCB\xA8n7\xCC\xBA\xB97\xCD\xAD\xB07\xCE\xAEm7\xCF\xAF\xB07\xD0\xB1m7\xD1\xB3m7\xD2\xBCm5\xD3\xC4m5\xD4\xB9m5\xD5\xBD\xB05\xD6\xBEm5\xD7\xBF\xB05\xD8\xC7\xCF5\xD9\xC2m5\xDA\xCA\xD15\xDB\xB1m5\xDC\xBAm5\xDD\xCC\xD15\xDE\xD5\xCD2\xDF|\x7F2\xE0\xA1u2\xE1\xA3\xC52\xE2\xD6\xCE2\xE3\xA6\xC62\xE4\xA9x2\xE5\xAA\xC62\xE6\xD7\xD82\xE7|\xC82\xE8\xA1\xA22\xE9\xA3\xC92\xEA\xA4\xA52\xEB\xD9\xDA2\xEC\xA6\xCB2\xED\xA9n2\xEE\xAAn2\xEF\xDB\xD02\xF0\xDC\xDD2\xF1\xACn2\xF2\xD2\xD3/\xF3an/\xF4bn/\xF5cn/\xF6\xDE\xE2/\xF7\xDF\xE3/\xF8\xE0\xE4/\xF9\xE1\xE5/\xFA\xE6\xEB/\xFB\xE7\xEC/\xFC\xE8\xED/\xFD\xE9\xEE/\xFE\xCD\xCE/\xFF\xCF\xD1/\u0100\xF2\xD4,\u0101cn,\u0102\xF6\xEF,\u0103\xA4\xF1,\u0104\xFA\xF0,\u0105\xEA\xF1,\u0106\xFE\xD0,\u0107\xFF\xD1,\u0108ac0\u0109bc0\u010A\xF3\xF50\u010B\xF4\u01010\u010C\xDF\xE10\u010D\xE0\xA40\u010E\xE7\xE90\u010F\xE8\xEA0\u0110\xF7\xF90\u0111\xF8\u01030\u0112\xFB\xFD0\u0113\xFC\u01050\u0114m\xD2-\u0115m\u0100-\u0116\xDE\xE6-\u0117\u010C\u010E-\u0118\u010D\u010F-\u0119\u0102\u0104-\u011A\u0110\u0112-\u011B\u0111\u0113-\u011C\xB2\xBB-\u011D\xCD\xCF-\u011E\u0106\u0107-\u011F\xB2\xB3-\u0120\u0114\u01083\u0121\u0115\u010A3\u0122\u0116\u01173\u0123\u0119\u011A3\u0124\u0122\u011D(\u0125\u011C\u011F(\u0126\u0123\u011E(\u0127\u0120\u0121+\u0128\u0109\u010B+\u0129\u0124\u0126+\u012A\u0118\u011B+\u012B\u0127\u01281\u012C\u0129\u012A1\u012D\u012C\u012B*\u012E\u0125m*\u012D\u012E.",eu;function jx(){return eu||(eu=Ep(Bx)),eu}var Op=e=>Rp(jx(),up,e);function Dp(e){let t=Op(e);return wp[t]}function kp(e,t,n,r,i){let o=Cp[e];return o({queryParams:t,changeEvent:n,previousResults:r,keyDocumentMap:i}),r}var fn=String.fromCharCode(65535),mn=Number.MIN_SAFE_INTEGER;function Ap(e,t){var n=t.selector,r=e.indexes?e.indexes.slice(0):[];t.index&&(r=[t.index]);var i=!!t.sort.find(u=>Object.values(u)[0]==="desc"),o=new Set;Object.keys(n).forEach(u=>{var d=ne(e,u);d&&d.type==="boolean"&&Object.prototype.hasOwnProperty.call(n[u],"$eq")&&o.add(u)});var s=t.sort.map(u=>Object.keys(u)[0]),a=s.filter(u=>!o.has(u)).join(","),c=-1,l;if(r.forEach(u=>{var d=!0,h=!0,f=u.map(x=>{var w=n[x],_=w?Object.keys(w):[],C={};if(!w||!_.length){var R=h?mn:fn;C={startKey:R,endKey:d?fn:mn,inclusiveStart:!0,inclusiveEnd:!0}}else _.forEach(k=>{if(ea.has(k)){var I=w[k],F=Wx(k,I);C=Object.assign(C,F)}});return typeof C.startKey>"u"&&(C.startKey=mn),typeof C.endKey>"u"&&(C.endKey=fn),typeof C.inclusiveStart>"u"&&(C.inclusiveStart=!0),typeof C.inclusiveEnd>"u"&&(C.inclusiveEnd=!0),h&&!C.inclusiveStart&&(h=!1),d&&!C.inclusiveEnd&&(d=!1),C}),m=f.map(x=>x.startKey),p=f.map(x=>x.endKey),b={index:u,startKeys:m,endKeys:p,inclusiveEnd:d,inclusiveStart:h,sortSatisfiedByIndex:!i&&a===u.filter(x=>!o.has(x)).join(","),selectorSatisfiedByIndex:Vx(u,t.selector,m,p)},g=Hx(e,t,b);(g>=c||t.index)&&(c=g,l=b)}),!l)throw y("SNH",{query:t});return l}var ea=new Set(["$eq","$gt","$gte","$lt","$lte"]),Ux=new Set(["$eq","$gt","$gte"]),zx=new Set(["$eq","$lt","$lte"]);function Vx(e,t,n,r){var i=Object.entries(t),o=i.find(([k,I])=>{if(!e.includes(k))return!0;var F=Object.entries(I).find(([Z,q])=>!ea.has(Z));return F});if(o||t.$and||t.$or)return!1;var s=[],a=new Set;for(var[c,l]of Object.entries(t)){if(!e.includes(c))return!1;var u=Object.keys(l).filter(k=>Ux.has(k));if(u.length>1)return!1;var d=u[0];if(d&&a.add(c),d!=="$eq"){if(s.length>0)return!1;s.push(d)}}var h=[],f=new Set;for(var[m,p]of Object.entries(t)){if(!e.includes(m))return!1;var b=Object.keys(p).filter(k=>zx.has(k));if(b.length>1)return!1;var g=b[0];if(g&&f.add(m),g!=="$eq"){if(h.length>0)return!1;h.push(g)}}var x=0;for(var w of e){for(var _ of[a,f]){if(!_.has(w)&&_.size>0)return!1;_.delete(w)}var C=n[x],R=r[x];if(C!==R&&a.size>0&&f.size>0)return!1;x++}return!0}function Wx(e,t){switch(e){case"$eq":return{startKey:t,endKey:t,inclusiveEnd:!0,inclusiveStart:!0};case"$lte":return{endKey:t,inclusiveEnd:!0};case"$gte":return{startKey:t,inclusiveStart:!0};case"$lt":return{endKey:t,inclusiveEnd:!1};case"$gt":return{startKey:t,inclusiveStart:!1};default:throw new Error("SNH")}}function Hx(e,t,n){var r=0,i=u=>{u>0&&(r=r+u)},o=10,s=Fs(n.startKeys,u=>u!==mn&&u!==fn);i(s*o);var a=Fs(n.startKeys,u=>u!==fn&&u!==mn);i(a*o);var c=Fs(n.startKeys,(u,d)=>u===n.endKeys[d]);i(c*o*1.5);var l=n.sortSatisfiedByIndex?5:0;return i(l),r}var ou=Number.MAX_SAFE_INTEGER,su=Number.MIN_SAFE_INTEGER,sr=Symbol("missing"),Pp=Object.freeze(new Error("mingo: cycle detected while processing object/array")),Kx=Object.getPrototypeOf([]),Np=Object.getPrototypeOf({}),qx="[object Object]",Yx=/^\[object ([a-zA-Z0-9]+)\]$/,po=class{},go=class{},pn=e=>e===null?po:e===void 0?go:e.constructor,vo=e=>{let t=Jx(e),n=0,r=t.length;for(;r;)n=(n<<5)-n^t.charCodeAt(--r);return n>>>0},$p=new Set(["null","undefined","boolean","number","string","date","regexp"]),Ip=new Set([go,po,Boolean,String,Number]),mo=e=>e.toString(),De=e=>`${pn(e).name}[${e.toString()}]`,gn=new Map([[Number,mo],[Boolean,mo],[RegExp,mo],[Function,mo],[Symbol,mo],[Date,e=>e.toISOString()],[String,JSON.stringify],[po,e=>"null"],[go,e=>"undefined"],[Int8Array,De],[Uint8Array,De],[Uint8ClampedArray,De],[Int16Array,De],[Uint16Array,De],[Int32Array,De],[Uint32Array,De],[Float32Array,De],[Float64Array,De]]);typeof BigInt<"u"&&gn.set(BigInt,e=>"0x"+e.toString(16));typeof BigInt64Array<"u"&&gn.set(BigInt64Array,De);typeof BigUint64Array<"u"&&gn.set(BigUint64Array,De);var Qx={null:0,undefined:0,number:1,string:2,object:3,array:4,boolean:5,date:6,regexp:7,function:8},ct=(e,t)=>{e===sr&&(e=void 0),t===sr&&(t=void 0);let[n,r]=[e,t].map(i=>Qx[Vr(i).toLowerCase()]);return n!==r?n-r:n===1||n===2||n===6?e<t?-1:e>t?1:0:Bt(e,t)?0:e<t?-1:e>t?1:0};function E(e,t){if(!e)throw new Error(t)}var Xx=e=>{let t=Object.getPrototypeOf(pn(e));return t&&t.name==="TypedArray"},ii=e=>{if(Ip.has(pn(e)))return e;let t=new Set,n=r=>{if(t.has(r))throw Pp;let i=pn(r);if(Ip.has(i))return r;try{if($(r))return t.add(r),r.map(n);if(V(r)){t.add(r);let o={};for(let s in r)o[s]=n(r[s]);return o}}finally{t.delete(r)}return i===Date||i===RegExp||Xx(r)?new i(r):r};return n(e)},Vr=e=>Yx.exec(Object.prototype.toString.call(e))[1],bo=e=>typeof e=="boolean",tt=e=>typeof e=="string";var W=e=>!isNaN(e)&&typeof e=="number";var $=Array.isArray,V=e=>{if(!e)return!1;let t=Object.getPrototypeOf(e);return(t===Np||t===null)&&qx===Object.prototype.toString.call(e)},yo=e=>e===Object(e),vn=e=>e instanceof Date,_o=e=>e instanceof RegExp,oi=e=>typeof e=="function",A=e=>e==null,qe=(e,t)=>e.includes(t),ia=(e,t)=>!qe(e,t),Ye=(e,t=!0)=>!!e||t&&e==="",he=e=>A(e)||tt(e)&&!e||e instanceof Array&&e.length===0||V(e)&&Object.keys(e).length===0,Tp=e=>e===sr,ar=e=>e instanceof Array?e:[e],ft=(e,t)=>!!e&&Object.prototype.hasOwnProperty.call(e,t),Gx=(e,t)=>V(e)&&V(t)||$(e)&&$(t);function ra(e,t,n){if(n=n||{flatten:!1},Tp(e)||A(e))return t;if(Tp(t)||A(t))return e;if(!Gx(e,t)){if(n.skipValidation)return t||e;throw Error("mismatched types. must both be array or object")}if(n.skipValidation=!0,$(e)){let r=e,i=t;if(n.flatten){let o=0,s=0;for(;o<r.length&&s<i.length;)r[o]=ra(r[o++],i[s++],n);for(;s<i.length;)r.push(t[s++])}else we(r,i)}else for(let r in t)e[r]=ra(e[r],t[r],n);return e}function nu(e,t=vo){let n=new Map;return e.forEach((r,i)=>{let o=oa(r,t);n.has(o)?n.get(o).some(s=>Bt(e[s],r))||n.get(o).push(i):n.set(o,[i])}),n}function cr(e,t=vo){if(e.some(a=>a.length==0))return[];if(e.length===1)return Array.from(e);let n=Lp(e.map((a,c)=>[c,a.length]),a=>a[1]),r=e[n[0][0]],i=nu(r,t),o=new Map,s=new Array;return i.forEach((a,c)=>{let l=a.map(f=>r[f]),u=l.map(f=>0),d=l.map(f=>[n[0][0],0]),h=!1;for(let f=1;f<e.length;f++){let[m,p]=n[f],b=e[m];if(o.has(f)||o.set(f,nu(b)),o.get(f).has(c)){let g=o.get(f).get(c).map(x=>b[x]);h=l.map((x,w)=>g.some((_,C)=>{let R=u[w];return Bt(x,_)&&(u[w]++,m<d[w][0]&&(d[w]=[m,o.get(f).get(c)[C]])),R<u[w]})).some(Boolean)}if(!h)return}h&&we(s,u.map((f,m)=>f===e.length-1?[l[m],d[m]]:sr).filter(f=>f!==sr))}),s.sort((a,c)=>{let[l,[u,d]]=a,[h,[f,m]]=c,p=ct(u,f);return p!==0?p:ct(d,m)}).map(a=>a[0])}function au(e,t=0){let n=new Array;function r(i,o){for(let s=0,a=i.length;s<a;s++)$(i[s])&&(o>0||o<0)?r(i[s],Math.max(-1,o-1)):n.push(i[s])}return r(e,t),n}var Zx=e=>{let[t,n]=[Object.getPrototypeOf(e),Object.getOwnPropertyNames(e)],r=t;for(;!n.length&&t!==Np&&t!==Kx;)r=t,n=Object.getOwnPropertyNames(t),t=Object.getPrototypeOf(t);let i={};return n.forEach(o=>i[o]=e[o]),[i,r]};function Bt(e,t){let n=[[e,t]];for(;n.length>0;){if([e,t]=n.pop(),e===t)continue;let r=pn(e);if(r!==pn(t)||oi(e))return!1;if(gn.has(r)){let i=gn.get(r);if(i(e)!==i(t))return!1;continue}if(r===Array||r===Object){let i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length||new Set(i.concat(o)).size!=i.length)return!1;for(let s of i)n.push([e[s],t[s]]);continue}return!1}return!n.length}function xo(e,t=vo){let n=e.map(r=>sr);return nu(e,t).forEach((r,i)=>{r.forEach(o=>n[o]=e[o])}),n.filter(r=>r!==sr)}function Jx(e){let t=new Set,n=r=>{let i=pn(r);if(gn.has(i))return gn.get(i)(r);let o=i===Object?"":i.name;if(oi(r.toJSON))return`${o}(${JSON.stringify(r)})`;if(t.has(r))throw Pp;t.add(r);try{if(i===Array)return"["+r.map(n).join(",")+"]";if(i!==Object){let[a,c]=Zx(r);if($(r))return`${o}${n([...r,a])}`;r=a}let s=Object.keys(r);return s.sort(),`${o}{`+s.map(a=>`${a}:${n(r[a])}`).join(",")+"}"}finally{t.delete(r)}};return n(e)}function oa(e,t){return t=t||vo,A(e)?null:t(e).toString()}function Lp(e,t,n=ct){if(he(e))return e;let r=new Array,i=new Array;for(let o=0;o<e.length;o++){let s=e[o],a=t(s,o);A(a)?i.push(s):r.push([a,s])}return r.sort((o,s)=>n(o[0],s[0])),we(i,r.map(o=>o[1]))}function sa(e,t,n=vo){if(e.length<1)return new Map;let r=new Map,i=new Map;for(let o=0;o<e.length;o++){let s=e[o],a=t(s,o),c=oa(a,n);if(c===null)i.has(null)?i.get(null).push(s):i.set(null,[s]);else{let l=r.has(c)?r.get(c).find(u=>Bt(u,a)):null;A(l)?(i.set(a,[s]),r.has(c)?r.get(c).push(a):r.set(c,[a])):i.get(l).push(s)}}return i}var ru=5e4;function we(e,...t){return e instanceof Array?t.reduce((n,r)=>{let i=Math.ceil(r.length/ru),o=0;for(;i-- >0;)Array.prototype.push.apply(n,r.slice(o,o+ru)),o+=ru;return n},e):t.filter(yo).reduce((n,r)=>(Object.assign(n,r),n),e)}function iu(e,t){return yo(e)?e[t]:void 0}function t0(e,t){if(t<1)return e;for(;t--&&e.length===1;)e=e[0];return e}function qt(e,t,n){let r=0;function i(s,a){let c=s;for(let l=0;l<a.length;l++){let u=a[l];if(/^\d+$/.exec(u)===null&&c instanceof Array){if(l===0&&r>0)break;r+=1;let h=a.slice(l);c=c.reduce((f,m)=>{let p=i(m,h);return p!==void 0&&f.push(p),f},[]);break}else c=iu(c,u);if(c===void 0)break}return c}let o=$p.has(Vr(e).toLowerCase())?e:i(e,t.split("."));return o instanceof Array&&n?.unwrapArray?t0(o,r):o}function ri(e,t,n){let r=t.split("."),i=r[0],o=r.slice(1).join("."),s=/^\d+$/.exec(i)!==null,a=r.length>1,c,l;if(e instanceof Array)if(s)c=iu(e,Number(i)),a&&(c=ri(c,o,n)),c=[c];else{c=[];for(let u of e)l=ri(u,t,n),n?.preserveMissing?(l===void 0&&(l=sr),c.push(l)):l!==void 0&&c.push(l)}else{if(l=iu(e,i),a&&(l=ri(l,o,n)),l===void 0)return;c=n?.preserveKeys?Object.assign({},e):{},c[i]=l}return c}function na(e){if(e instanceof Array)for(let t=e.length-1;t>=0;t--)e[t]===sr?e.splice(t,1):na(e[t]);else if(V(e))for(let t in e)ft(e,t)&&na(e[t])}var Mp=/^\d+$/;function ni(e,t,n,r){let i=t.split("."),o=i[0],s=i.slice(1).join(".");if(i.length===1)(V(e)||$(e)&&Mp.test(o))&&n(e,o);else{r?.buildGraph&&A(e[o])&&(e[o]={});let a=e[o];if(!a)return;let c=!!(i.length>1&&Mp.test(i[1]));a instanceof Array&&r?.descendArray&&!c?a.forEach(l=>ni(l,s,n,r)):ni(a,s,n,r)}}function aa(e,t,n){ni(e,t,(r,i)=>{r[i]=oi(n)?n(r[i]):n},{buildGraph:!0})}function wo(e,t,n){ni(e,t,(r,i)=>{if(r instanceof Array){if(/^\d+$/.test(i))r.splice(parseInt(i),1);else if(n&&n.descendArray)for(let o of r)V(o)&&delete o[i]}else V(r)&&delete r[i]},n)}var e0=/^\$[a-zA-Z0-9_]+$/;function fe(e){return e0.test(e)}function ca(e){if($p.has(Vr(e).toLowerCase()))return _o(e)?{$regex:e}:{$eq:e};if(yo(e)){if(!Object.keys(e).some(fe))return{$eq:e};if(ft(e,"$regex")){let n=Object.assign({},e);return n.$regex=new RegExp(e.$regex,e.$options),delete n.$options,n}}return e}var lr=function(e){return e.CLONE_ALL="CLONE_ALL",e.CLONE_INPUT="CLONE_INPUT",e.CLONE_OUTPUT="CLONE_OUTPUT",e.CLONE_OFF="CLONE_OFF",e}(lr||{}),pt=class e{constructor(t,n,r,i=Date.now()){this._opts=t,this._root=n,this._local=r,this.timestamp=i,this.update(n,r)}static init(t,n,r){return t instanceof e?new e(t._opts,A(t.root)?n:t.root,Object.assign({},t.local,r)):new e(t,n,r)}update(t,n){var r;return this._root=t,this._local=n&&Object.assign({},n,{variables:Object.assign({},(r=this._local)===null||r===void 0?void 0:r.variables,n?.variables)}),this}getOptions(){return Object.freeze(Object.assign(Object.assign({},this._opts),{context:si.from(this._opts.context)}))}get root(){return this._root}get local(){return this._local}get idKey(){return this._opts.idKey}get collation(){var t;return(t=this._opts)===null||t===void 0?void 0:t.collation}get processingMode(){var t;return((t=this._opts)===null||t===void 0?void 0:t.processingMode)||lr.CLONE_OFF}get useStrictMode(){var t;return(t=this._opts)===null||t===void 0?void 0:t.useStrictMode}get scriptEnabled(){var t;return(t=this._opts)===null||t===void 0?void 0:t.scriptEnabled}get useGlobalContext(){var t;return(t=this._opts)===null||t===void 0?void 0:t.useGlobalContext}get hashFunction(){var t;return(t=this._opts)===null||t===void 0?void 0:t.hashFunction}get collectionResolver(){var t;return(t=this._opts)===null||t===void 0?void 0:t.collectionResolver}get jsonSchemaValidator(){var t;return(t=this._opts)===null||t===void 0?void 0:t.jsonSchemaValidator}get variables(){var t;return(t=this._opts)===null||t===void 0?void 0:t.variables}get context(){var t;return(t=this._opts)===null||t===void 0?void 0:t.context}};function Wr(e){return e instanceof pt?e.getOptions():Object.freeze(Object.assign(Object.assign({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,useGlobalContext:!0,processingMode:lr.CLONE_OFF},e),{context:e?.context?si.from(e?.context):si.init({})}))}var G=function(e){return e.ACCUMULATOR="accumulator",e.EXPRESSION="expression",e.PIPELINE="pipeline",e.PROJECTION="projection",e.QUERY="query",e.WINDOW="window",e}(G||{}),si=class e{constructor(t){this.operators={[G.ACCUMULATOR]:{},[G.EXPRESSION]:{},[G.PIPELINE]:{},[G.PROJECTION]:{},[G.QUERY]:{},[G.WINDOW]:{}};for(let[n,r]of Object.entries(t))this.addOperators(n,r)}static init(t={}){return new e(t)}static from(t){return new e(t.operators)}addOperators(t,n){for(let[r,i]of Object.entries(n))this.getOperator(t,r)||(this.operators[t][r]=i);return this}addAccumulatorOps(t){return this.addOperators(G.ACCUMULATOR,t)}addExpressionOps(t){return this.addOperators(G.EXPRESSION,t)}addQueryOps(t){return this.addOperators(G.QUERY,t)}addPipelineOps(t){return this.addOperators(G.PIPELINE,t)}addProjectionOps(t){return this.addOperators(G.PROJECTION,t)}addWindowOps(t){return this.addOperators(G.WINDOW,t)}getOperator(t,n){return t in this.operators&&this.operators[t][n]||null}},bn=si.init();function uu(e,t){for(let[n,r]of Object.entries(t)){E(oi(r)&&fe(n),`'${n}' is not a valid operator`);let i=ke(e,n,null);E(!i||r===i,`${n} already exists for '${e}' operators. Cannot change operator function once registered.`)}switch(e){case G.ACCUMULATOR:bn.addAccumulatorOps(t);break;case G.EXPRESSION:bn.addExpressionOps(t);break;case G.PIPELINE:bn.addPipelineOps(t);break;case G.PROJECTION:bn.addProjectionOps(t);break;case G.QUERY:bn.addQueryOps(t);break;case G.WINDOW:bn.addWindowOps(t);break}}function ke(e,t,n){let{context:r,useGlobalContext:i}=n||{},o=r?r.getOperator(e,t):null;return!o&&i?bn.getOperator(e,t):o}var Fp={$$ROOT(e,t,n){return n.root},$$CURRENT(e,t,n){return e},$$REMOVE(e,t,n){},$$NOW(e,t,n){return new Date(n.timestamp)}},cu={$$KEEP(e,t,n){return e},$$PRUNE(e,t,n){},$$DESCEND(e,t,n){if(!ft(t,"$cond"))return e;let r;for(let[i,o]of Object.entries(e))if(yo(o)){if(o instanceof Array){let s=[];for(let a of o)V(a)&&(a=lu(a,t,n.update(a))),A(a)||s.push(a);r=s}else r=lu(o,t,n.update(o));A(r)?delete e[i]:e[i]=r}return e}};function v(e,t,n,r){var i;let o=pt.init(r,e);if(n=n||"",fe(n)){let s=ke(G.EXPRESSION,n,r);if(s)return s(e,t,o);let a=ke(G.ACCUMULATOR,n,r);if(a)return e instanceof Array||(e=v(e,t,null,o),t=null),E(e instanceof Array,`'${n}' target must be an array.`),a(e,t,o.update(null,o.local));throw new Error(`operator '${n}' is not registered`)}if(tt(t)&&t.length>0&&t[0]==="$"){if(ft(cu,t))return t;let s=o.root,a=t.split(".");if(ft(Fp,a[0]))s=Fp[a[0]](e,null,o),t=t.slice(a[0].length+1);else if(a[0].slice(0,2)==="$$"){s=Object.assign({},o.variables,{this:e},(i=o.local)===null||i===void 0?void 0:i.variables);let c=a[0].slice(2);E(ft(s,c),`Use of undefined variable: ${c}`),t=t.slice(2)}else t=t.slice(1);return t===""?s:qt(s,t)}if($(t))return t.map(s=>v(e,s,null,o));if(V(t)){let s={};for(let[a,c]of Object.entries(t))if(s[a]=v(e,c,a,o),[G.EXPRESSION,G.ACCUMULATOR].some(l=>!!ke(l,a,r)))return E(Object.keys(t).length===1,"Invalid aggregation expression '"+JSON.stringify(t)+"'"),s[a];return s}return t}function lu(e,t,n){let r=v(e,t,null,n);return ft(cu,r)?cu[r](e,t,n):r}function me(e){return e instanceof Co?e:new Co(e)}function la(...e){let t=0;return me(()=>{for(;t<e.length;){let n=e[t].next();if(!n.done)return n;t++}return{done:!0}})}function r0(e){return!!e&&typeof e=="object"&&e?.next instanceof Function}function n0(e,t){let n=e.slice(t+1);e.splice(t),Array.prototype.push.apply(e,n)}var du=new Error,ur=function(e){return e[e.MAP=0]="MAP",e[e.FILTER=1]="FILTER",e[e.TAKE=2]="TAKE",e[e.DROP=3]="DROP",e}(ur||{});function i0(e,t,n){let r=!1,i=-1,o=0;return function(s){try{t:for(;!r;){let a=e();i++;let c=-1,l=t.length,u=!1;for(;++c<l;){let d=t[c];switch(d.action){case ur.MAP:a=d.func(a,i);break;case ur.FILTER:if(!d.func(a,i))continue t;break;case ur.TAKE:--d.count,d.count||(u=!0);break;case ur.DROP:--d.count,d.count||n0(t,c);continue t;default:break t}}if(r=u,s)n[o++]=a;else return{value:a,done:!1}}}catch(a){if(a!==du)throw a}return r=!0,{done:r}}}var Co=class{constructor(t){this.iteratees=[],this.yieldedValues=[],this.isDone=!1;let n;if(t instanceof Function&&(t={next:t}),r0(t)){let r=t;n=()=>{let i=r.next();if(i.done)throw du;return i.value}}else if(t instanceof Array){let r=t,i=r.length,o=0;n=()=>{if(o<i)return r[o++];throw du}}else if(!(t instanceof Function))throw new Error("Lazy must be initialized with an array, generator, or function.");this.getNext=i0(n,this.iteratees,this.yieldedValues)}push(t,n){return typeof n=="function"?this.iteratees.push({action:t,func:n}):typeof n=="number"&&this.iteratees.push({action:t,count:n}),this}next(){return this.getNext()}map(t){return this.push(ur.MAP,t)}filter(t){return this.push(ur.FILTER,t)}take(t){return t>0?this.push(ur.TAKE,t):this}drop(t){return t>0?this.push(ur.DROP,t):this}transform(t){let n=this,r;return me(()=>(r||(r=me(t(n.value()))),r.next()))}value(){return this.isDone||(this.isDone=this.getNext(!0).done),this.yieldedValues}each(t){for(;;){let n=this.next();if(n.done)break;if(t(n.value)===!1)return!1}return!0}reduce(t,n){let r=this.next();for(n===void 0&&!r.done&&(n=r.value,r=this.next());!r.done;)n=t(n,r.value),r=this.next();return n}size(){return this.reduce((t,n)=>++t,0)}[Symbol.iterator](){return this}};var Qe=class{constructor(t,n){this.pipeline=t,this.options=Wr(n)}stream(t){let n=me(t),r=this.options.processingMode;(r==lr.CLONE_ALL||r==lr.CLONE_INPUT)&&n.map(ii);let i=new Array;if(!he(this.pipeline))for(let o of this.pipeline){let s=Object.keys(o),a=s[0],c=ke(G.PIPELINE,a,this.options);E(s.length===1&&!!c,`invalid pipeline operator ${a}`),i.push(a),n=c(n,o[a],this.options)}return(r==lr.CLONE_OUTPUT||r==lr.CLONE_ALL&&cr([["$group","$unwind"],i]).length)&&n.map(ii),n}run(t){return this.stream(t).value()}};var ua=class{constructor(t,n,r,i){this.source=t,this.predicate=n,this.projection=r,this.options=i,this.operators=[],this.result=null,this.buffer=[]}fetch(){return this.result?this.result:(V(this.projection)&&this.operators.push({$project:this.projection}),this.result=me(this.source).filter(this.predicate),this.operators.length>0&&(this.result=new Qe(this.operators,this.options).stream(this.result)),this.result)}fetchAll(){let t=me([...this.buffer]);return this.buffer=[],la(t,this.fetch())}all(){return this.fetchAll().value()}count(){return this.all().length}skip(t){return this.operators.push({$skip:t}),this}limit(t){return this.operators.push({$limit:t}),this}sort(t){return this.operators.push({$sort:t}),this}collation(t){return this.options=Object.assign(Object.assign({},this.options),{collation:t}),this}next(){if(this.buffer.length>0)return this.buffer.pop();let t=this.fetch().next();if(!t.done)return t.value}hasNext(){if(this.buffer.length>0)return!0;let t=this.fetch().next();return t.done?!1:(this.buffer.push(t.value),!0)}map(t){return this.all().map(t)}forEach(t){this.all().forEach(t)}[Symbol.iterator](){return this.fetchAll()}};var Dt=class{constructor(t,n){this.condition=t,this.options=Wr(n),this.compiled=[],this.compile()}compile(){E(V(this.condition),`query criteria must be an object: ${JSON.stringify(this.condition)}`);let t={};for(let[n,r]of Object.entries(this.condition)){if(n==="$where")Object.assign(t,{field:n,expr:r});else if(qe(["$and","$or","$nor","$expr","$jsonSchema"],n))this.processOperator(n,n,r);else{E(!fe(n),`unknown top level operator: ${n}`);for(let[i,o]of Object.entries(ca(r)))this.processOperator(n,i,o)}t.field&&this.processOperator(t.field,t.field,t.expr)}}processOperator(t,n,r){let i=ke(G.QUERY,n,this.options);if(!i)throw new Error(`unknown operator ${n}`);let o=i(t,r,this.options);this.compiled.push(o)}test(t){for(let n=0,r=this.compiled.length;n<r;n++)if(!this.compiled[n](t))return!1;return!0}find(t,n){return new ua(t,r=>this.test(r),n||{},this.options)}remove(t){return t.reduce((n,r)=>(this.test(r)||n.push(r),n),[])}};var ai=1e3*60*60*24,Bp={week:ai*7,day:ai,hour:1e3*60*60,minute:1e3*60,second:1e3,millisecond:1};var qA={week:ai*7,day:ai,hour:ai/24,minute:6e4,second:1e3,millisecond:1};var ha=(e,t,n)=>{if(he(t)||!V(t))return e;let r=ct,i=n.collation;return V(i)&&tt(i.locale)&&(r=m0(i)),e.transform(o=>{let s=Object.keys(t);for(let a of s.reverse()){let c=sa(o,u=>qt(u,a),n.hashFunction),l=Array.from(c.keys()).sort(r);t[a]===-1&&l.reverse(),o=[],l.reduce((u,d)=>we(u,c.get(d)),o)}return o})},f0={1:"base",2:"accent",3:"variant"};function m0(e){let t={sensitivity:f0[e.strength||3],caseFirst:e.caseFirst==="off"?"false":e.caseFirst||"false",numeric:e.numericOrdering||!1,ignorePunctuation:e.alternate==="shifted"};(e.caseLevel||!1)===!0&&(t.sensitivity==="base"&&(t.sensitivity="case"),t.sensitivity==="accent"&&(t.sensitivity="variant"));let n=new Intl.Collator(e.locale,t);return(r,i)=>{if(!tt(r)||!tt(i))return ct(r,i);let o=n.compare(r,i);return o<0?-1:o>0?1:0}}function it(e){let t=(n,r,i)=>{let o={unwrapArray:!0},s=Math.max(1,n.split(".").length-1);return a=>{let c=qt(a,n,o);return e(c,r,Object.assign(Object.assign({},i),{depth:s}))}};return t.op="query",t}function ie(e){return(t,n,r)=>{let i=v(t,n,null,r);return e(...i)}}function So(e,t,n){if(Bt(e,t)||A(e)&&A(t))return!0;if(e instanceof Array){let r=Bt.bind(null,t);return e.some(r)||au(e,n?.depth).some(r)}return!1}function fa(e,t,n){return!So(e,t,n)}function pu(e,t,n){return A(e)?t.some(r=>r===null):cr([ar(e),t],n?.hashFunction).length>0}function ma(e,t,n){return!pu(e,t,n)}function pa(e,t,n){return ya(e,t,(r,i)=>ct(r,i)<0)}function ga(e,t,n){return ya(e,t,(r,i)=>ct(r,i)<=0)}function va(e,t,n){return ya(e,t,(r,i)=>ct(r,i)>0)}function ba(e,t,n){return ya(e,t,(r,i)=>ct(r,i)>=0)}function Hp(e,t,n){return ar(e).some(r=>t.length===2&&r%t[0]===t[1])}function Kp(e,t,n){let r=ar(e),i=o=>tt(o)&&Ye(t.exec(o),n?.useStrictMode);return r.some(i)||au(r,1).some(i)}function qp(e,t,n){return(t===!1||t===0)&&e===void 0||(t===!0||t===1)&&e!==void 0}function Yp(e,t,n){if(!$(e)||!$(t)||!e.length||!t.length)return!1;let r=!0;for(let i of t){if(!r)break;V(i)&&qe(Object.keys(i),"$elemMatch")?r=gu(e,i.$elemMatch,n):i instanceof RegExp?r=e.some(o=>typeof o=="string"&&i.test(o)):r=e.some(o=>Bt(i,o))}return r}function Qp(e,t,n){return Array.isArray(e)&&e.length===t}function b0(e){return fe(e)&&["$and","$or","$nor"].indexOf(e)===-1}function gu(e,t,n){if($(e)&&!he(e)){let r=s=>s,i=t;Object.keys(t).every(b0)&&(i={temp:t},r=s=>({temp:s}));let o=new Dt(i,n);for(let s=0,a=e.length;s<a;s++)if(o.test(r(e[s])))return!0}return!1}var Up=e=>e===null,zp=e=>W(e)&&e>=-2147483648&&e<=2147483647&&e.toString().indexOf(".")===-1,Vp=e=>W(e)&&e>=su&&e<=ou&&e.toString().indexOf(".")===-1,y0={array:$,bool:bo,boolean:bo,date:vn,decimal:W,double:W,int:zp,long:Vp,number:W,null:Up,object:V,regex:_o,regexp:_o,string:tt,undefined:A,function:e=>{throw new Error("unsupported type key `function`.")},1:W,2:tt,3:V,4:$,6:A,8:bo,9:vn,10:Up,11:_o,16:zp,18:Vp,19:W};function Wp(e,t,n){let r=y0[t];return r?r(e):!1}function Xp(e,t,n){return Array.isArray(t)?t.findIndex(r=>Wp(e,r,n))>=0:Wp(e,t,n)}function ya(e,t,n){return ar(e).some(r=>Vr(r)===Vr(t)&&n(r,t))}var rP=ie(ma);var ci=(e,t)=>(n,r,i)=>{E($(r),`${e}: expression must be an array.`);let o=v(n,r,null,i);return o.some(A)?null:(E(o.every(W),`${e}: expression must evalue to array of numbers.`),t(o))};var ZP=ci("$bitAnd",e=>e.reduce((t,n)=>t&n,-1));var iN=ci("$bitOr",e=>e.reduce((t,n)=>t|n,0));var aN=ci("$bitXor",e=>e.reduce((t,n)=>t^n,0));var AN=ie(So);var MN=ie(va);var $N=ie(ba);var BN=ie(pa);var zN=ie(ga);var HN=ie(fa);var Gp=(e,t)=>{let n={};return e.split("").forEach((r,i)=>n[r]=t*(i+1)),n},R$=Object.assign(Object.assign(Object.assign({},Gp("ABCDEFGHIKLM",1)),Gp("NOPQRSTUVWXY",-1)),{Z:0});var eg={undefined:null,null:null,NaN:NaN,Infinity:new Error,"-Infinity":new Error};function lt(e,t=eg){let n=Object.assign({},eg,t),r=new Set(Object.keys(n));return(i,o,s)=>{let a=v(i,o,null,s);if(r.has(`${a}`)){let c=n[`${a}`];if(c instanceof Error)throw new Error(`cannot apply $${e.name} to -inf, value must in (-inf,inf)`);return c}return e(a)}}var kj=lt(Math.acos,{Infinity:1/0,0:new Error});var Tj=lt(Math.acosh,{Infinity:1/0,0:new Error});var Nj=lt(Math.asin);var Fj=lt(Math.asinh,{Infinity:1/0,"-Infinity":-1/0});var Uj=lt(Math.atan);var qj=lt(Math.atanh,{1:1/0,"-1":-1/0});var Xj=lt(Math.cos);var Jj=lt(Math.cosh,{"-Infinity":1/0,Infinity:1/0});var C0=Math.PI/180,r2=lt(e=>e*C0,{Infinity:1/0,"-Infinity":1/0});var S0=180/Math.PI,o2=lt(e=>e*S0,{Infinity:1/0,"-Infinity":-1/0});var c2=lt(Math.sin);var d2=lt(Math.sinh,{"-Infinity":-1/0,Infinity:1/0});var m2=lt(Math.tan);var bu=(e,t,n)=>{if(he(t))return e;let r=Object.keys(t),i=!1;ng(t,n);let o=n.idKey;if(qe(r,o)){let a=t[o];(a===0||a===!1)&&(r=r.filter(ia.bind(null,[o])),i=r.length==0)}else r.push(o);let s=pt.init(n);return e.map(a=>vu(a,t,s.update(a),r,i))};function vu(e,t,n,r,i){let o={},s=!1,a=!1,c=[];i&&c.push(n.idKey);for(let l of r){let u,d=t[l];if(l!==n.idKey&&qe([0,!1],d)&&(a=!0),l===n.idKey&&he(d))u=e[l];else if(tt(d))u=v(e,d,l,n);else if(!qe([1,!0],d))if(d instanceof Array)u=d.map(f=>{let m=v(e,f,null,n);return A(m)?null:m});else if(V(d)){let f=d,m=Object.keys(d),p=m.length==1?m[0]:"",b=ke(G.PROJECTION,p,n);if(b)p==="$slice"?ar(f[p]).every(W)?(u=b(e,f[p],l,n),s=!0):u=v(e,f,l,n):u=b(e,f[p],l,n);else if(fe(p))u=v(e,f[p],p,n);else if(ft(e,l)){ng(f,n);let g=e[l];g instanceof Array?u=g.map(x=>vu(x,f,n,m,!1)):(g=V(g)?g:e,u=vu(g,f,n,m,!1))}else u=v(e,d,null,n)}else{c.push(l);continue}let h=ri(e,l,{preserveMissing:!0});h!==void 0&&ra(o,h,{flatten:!0}),ia([0,1,!1,!0],d)&&(u===void 0?wo(o,l,{descendArray:!0}):aa(o,l,u))}if(na(o),(s||a||i)&&(o=we({},e,o),c.length>0))for(let l of c)wo(o,l,{descendArray:!0});return o}function ng(e,t){let n=[!1,!1];for(let[r,i]of Object.entries(e)){if(r===t?.idKey)return;i===0||i===!1?n[0]=!0:(i===1||i===!0)&&(n[1]=!0),E(!(n[0]&&n[1]),"Projection cannot have a mix of inclusion and exclusion.")}}var ig=(e,t,n)=>{E($(t),"Invalid expression: $and expects value to be an Array.");let r=t.map(i=>new Dt(i,n));return i=>r.every(o=>o.test(i))};var _a=(e,t,n)=>{E($(t),"Invalid expression. $or expects value to be an Array");let r=t.map(i=>new Dt(i,n));return i=>r.some(o=>o.test(i))};var og=(e,t,n)=>{E($(t),"Invalid expression. $nor expects value to be an array.");let r=_a("$or",t,n);return i=>!r(i)};var sg=(e,t,n)=>{let r={};r[e]=ca(t);let i=new Dt(r,n);return o=>!i.test(o)};var yu=it(So);var _u=it(va);var xu=it(ba);var wu=it(pu);var Cu=it(pa);var Su=it(ga);var Eu=it(fa);var Ru=it(ma);var ag=it(Hp);var cg=it(Kp);var g4=it(Yp);var lg=it(gu);var ug=it(Qp);var dg=it(qp);var hg=it(Xp);var fg=!1;function mg(e){return fg||(uu(G.PIPELINE,{$sort:ha,$project:bu}),uu(G.QUERY,{$and:ig,$eq:yu,$elemMatch:lg,$exists:dg,$gt:_u,$gte:xu,$in:wu,$lt:Cu,$lte:Su,$ne:Eu,$nin:Ru,$mod:ag,$nor:og,$not:sg,$or:_a,$regex:cg,$size:ug,$type:hg}),fg=!0),new Dt(e)}function Eo(e,t){var n=Kt(e.primaryKey);t=J(t);var r=_e(t);if(typeof r.skip!="number"&&(r.skip=0),r.selector?(r.selector=r.selector,Object.entries(r.selector).forEach(([l,u])=>{(typeof u!="object"||u===null)&&(r.selector[l]={$eq:u})})):r.selector={},r.index){var i=lo(r.index);i.includes(n)||i.push(n),r.index=i}if(r.sort){var c=r.sort.find(l=>Bm(l)===n);c||(r.sort=r.sort.slice(0),r.sort.push({[n]:"asc"}))}else if(r.index)r.sort=r.index.map(l=>({[l]:"asc"}));else{if(e.indexes){var o=new Set;Object.entries(r.selector).forEach(([l,u])=>{var d=!1;typeof u=="object"&&u!==null?d=!!Object.keys(u).find(h=>ea.has(h)):d=!0,d&&o.add(l)});var s=-1,a;e.indexes.forEach(l=>{var u=He(l)?l:[l],d=u.findIndex(h=>!o.has(h));d>0&&d>s&&(s=d,a=u)}),a&&(r.sort=a.map(l=>({[l]:"asc"})))}r.sort||(r.sort=[{[n]:"asc"}])}return r}function xa(e,t){if(!t.sort)throw y("SNH",{query:t});var n=[];t.sort.forEach(i=>{var o=Object.keys(i)[0],s=Object.values(i)[0];n.push({key:o,direction:s,getValueFn:Fm(o)})});var r=(i,o)=>{for(var s=0;s<n.length;++s){var a=n[s],c=a.getValueFn(i),l=a.getValueFn(o);if(c!==l){var u=a.direction==="asc"?ct(c,l):ct(l,c);return u}}};return r}function li(e,t){if(!t.sort)throw y("SNH",{query:t});var n=mg(t.selector),r=i=>n.test(i);return r}function O0(e,t){return!t.sort||t.sort.length===0?[e]:t.sort.map(n=>Object.keys(n)[0])}var D0=new WeakMap;function k0(e){return Ht(D0,e,()=>{var t=e.collection,n=Eo(t.storageInstance.schema,_e(e.mangoQuery)),r=t.schema.primaryPath,i=xa(t.schema.jsonSchema,n),o=(l,u)=>{var d={docA:l,docB:u,rxQuery:e};return i(d.docA,d.docB)},s=li(t.schema.jsonSchema,n),a=l=>{var u={doc:l,rxQuery:e};return s(u.doc)},c={primaryKey:e.collection.schema.primaryPath,skip:n.skip,limit:n.limit,sortFields:O0(r,n),sortComparator:o,queryMatcher:a};return c})}function pg(e,t){if(!e.collection.database.eventReduce)return{runFullQueryAgain:!0};var n=k0(e),r=rt(e._result).docsData.slice(0),i=rt(e._result).docsDataMap,o=!1,s=t.map(c=>Km(c)).filter(vm),a=s.find(c=>{var l={queryParams:n,changeEvent:c,previousResults:r,keyDocumentMap:i},u=Dp(l);if(u==="runFullQueryAgain")return!0;if(u!=="doNothing")return o=!0,kp(u,n,c,r,i),!1});return a?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:o,newResults:r}}var A0=function(){function e(){this._map=new Map}var t=e.prototype;return t.getByQuery=function(r){var i=r.toString();return Ht(this._map,i,()=>r)},e}();function vg(){return new A0}function gg(e,t){t.uncached=!0;var n=t.toString();e._map.delete(n)}function I0(e){return e.refCount$.observers.length}var T0=100,M0=30*1e3,P0=(e,t)=>(n,r)=>{if(!(r._map.size<e)){var i=Ot()-t,o=[],s=Array.from(r._map.values());for(var a of s)if(!(I0(a)>0)){if(a._lastEnsureEqual===0&&a._creationTime<i){gg(r,a);continue}o.push(a)}var c=o.length-e;if(!(c<=0)){var l=o.sort((d,h)=>d._lastEnsureEqual-h._lastEnsureEqual),u=l.slice(0,c);u.forEach(d=>gg(r,d))}}},Du=P0(T0,M0),Ou=new WeakSet;function bg(e){Ou.has(e)||(Ou.add(e),km().then(()=>Tm(200)).then(()=>{e.destroyed||e.cacheReplacementPolicy(e,e._queryCache),Ou.delete(e)}))}var yg=function(){function e(n,r,i){this.cacheItemByDocId=new Map,this.registry=typeof FinalizationRegistry=="function"?new FinalizationRegistry(o=>{var s=o.docId,a=this.cacheItemByDocId.get(s);a&&(a.byRev.delete(o.revisionHeight),a.byRev.size===0&&this.cacheItemByDocId.delete(s))}):void 0,this.registerIdleTasks=[],this.primaryPath=n,this.changes$=r,this.documentCreator=i,r.subscribe(o=>{var s=o.documentId,a=this.cacheItemByDocId.get(s);if(a){var c=Ys(o);a.last=c}})}var t=e.prototype;return t.getLatestDocumentData=function(r){var i=Ur(this.cacheItemByDocId,r);return i.last},t.getLatestDocumentDataIfExists=function(r){var i=this.cacheItemByDocId.get(r);if(i)return i.last},Ft(e,[{key:"getCachedRxDocument",get:function(){var n=N0(this);return xe(this,"getCachedRxDocument",n)}}]),e}();function N0(e){var t=e.primaryPath,n=e.cacheItemByDocId,r=e.registry,i=nt.deepFreezeWhenDevMode,o=e.documentCreator,s=a=>{var c=a[t],l=Ml(a._rev),u=Ht(n,c,()=>$0(a)),d=u.byRev,h=d.get(l),f=h?h.deref():void 0;return f||(a=i(a),f=o(a),d.set(l,F0(f)),r&&(e.registerIdleTasks.push(f),e.registerIdlePromise||(e.registerIdlePromise=Fl().then(()=>{e.registerIdlePromise=void 0;var m=e.registerIdleTasks;m.length!==0&&(e.registerIdleTasks=[],m.forEach(p=>{r.register(p,{docId:p.primary,revisionHeight:Ml(p.revision)})}))})))),f};return s}function wa(e,t){for(var n=e.getCachedRxDocument,r=[],i=0;i<t.length;i++){var o=t[i],s=n(o);r.push(s)}return r}function $0(e){return{byRev:new Map,last:e}}var L0=typeof WeakRef=="function",F0=L0?B0:j0;function B0(e){return new WeakRef(e)}function j0(e){return{deref(){return e}}}var ku=function(){function e(t,n,r){this.time=Ot(),this.collection=t,this.count=r,this.documents=wa(this.collection._docCache,n)}return Ft(e,[{key:"docsData",get:function(){return xe(this,"docsData",this.documents.map(t=>t._data))}},{key:"docsDataMap",get:function(){var t=new Map;return this.documents.forEach(n=>{t.set(n.primary,n._data)}),xe(this,"docsDataMap",t)}},{key:"docsMap",get:function(){for(var t=new Map,n=this.documents,r=0;r<n.length;r++){var i=n[r];t.set(i.primary,i)}return xe(this,"docsMap",t)}}]),e}();var U0=0,z0=function(){return++U0},Au=function(){function e(n,r,i,o={}){this.id=z0(),this._execOverDatabaseCount=0,this._creationTime=Ot(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new Nt(null),this._result=null,this._latestChangeEvent=-1,this._lastExecStart=0,this._lastExecEnd=0,this._ensureEqualQueue=Oe,this.op=n,this.mangoQuery=r,this.collection=i,this.other=o,r||(this.mangoQuery=Ro()),this.isFindOneByIdQuery=K0(this.collection.schema.primaryPath,r)}var t=e.prototype;return t._setResultData=function(r){if(typeof r=="number"){this._result=new ku(this.collection,[],r);return}else r instanceof Map&&(r=Array.from(r.values()));var i=new ku(this.collection,r,r.length);this._result=i},t._execOverDatabase=function(){return O(this,null,function*(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this._lastExecStart=Ot(),this.op==="count"){var r=this.getPreparedQuery(),i=yield this.collection.storageInstance.count(r);if(i.mode==="slow"&&!this.collection.database.allowSlowCount)throw y("QU14",{collection:this.collection,queryObj:this.mangoQuery});return i.count}if(this.op==="findByIds"){var o=rt(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,s=new Map,a=[];if(o.forEach(u=>{var d=this.collection._docCache.getLatestDocumentDataIfExists(u);if(d){if(!d._deleted){var h=this.collection._docCache.getCachedRxDocument(d);s.set(u,h)}}else a.push(u)}),a.length>0){var c=yield this.collection.storageInstance.findDocumentsById(a,!1);c.forEach(u=>{var d=this.collection._docCache.getCachedRxDocument(u);s.set(d.primary,d)})}return s}var l=H0(this);return l.then(u=>(this._lastExecEnd=Ot(),u))})},t.exec=function(r){if(r&&this.op!=="findOne")throw y("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return _g(this).then(()=>is(this.$)).then(i=>{if(!i&&r)throw y("QU10",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return i})},t.toString=function(){var r=Zn({op:this.op,query:this.mangoQuery,other:this.other},!0),i=JSON.stringify(r);return this.toString=()=>i,i},t.getPreparedQuery=function(){var r={rxQuery:this,mangoQuery:Eo(this.collection.schema.jsonSchema,this.mangoQuery)};r.mangoQuery.selector._deleted={$eq:!1},r.mangoQuery.index&&r.mangoQuery.index.unshift("_deleted"),It("prePrepareQuery",r);var i=Oo(this.collection.schema.jsonSchema,r.mangoQuery);return this.getPreparedQuery=()=>i,i},t.doesDocumentDataMatch=function(r){return r._deleted?!1:this.queryMatcher(r)},t.remove=function(){return this.exec().then(r=>Array.isArray(r)?Promise.all(r.map(i=>i.remove())):r.remove())},t.update=function(r){throw ot("update")},t.where=function(r){throw ot("query-builder")},t.sort=function(r){throw ot("query-builder")},t.skip=function(r){throw ot("query-builder")},t.limit=function(r){throw ot("query-builder")},Ft(e,[{key:"$",get:function(){if(!this._$){var n=this.collection.$.pipe(X(r=>!r.isLocal),Se(null),bt(()=>_g(this)),K(()=>this._result),Mi(Vs),Mn((r,i)=>!!(r&&r.time===rt(i).time)),X(r=>!!r),K(r=>{var i=rt(r);return this.op==="count"?i.count:this.op==="findOne"?i.documents.length===0?null:i.documents[0]:this.op==="findByIds"?i.docsMap:i.documents.slice(0)}));this._$=An(n,this.refCount$.pipe(X(()=>!1)))}return this._$}},{key:"queryMatcher",get:function(){var n=this.collection.schema.jsonSchema,r=Eo(this.collection.schema.jsonSchema,this.mangoQuery);return xe(this,"queryMatcher",li(n,r))}},{key:"asRxQuery",get:function(){return this}}]),e}();function Ro(){return{selector:{}}}function V0(e){return e.collection._queryCache.getByQuery(e)}function ui(e,t,n,r){It("preCreateRxQuery",{op:e,queryObj:t,collection:n,other:r});var i=new Au(e,t,n,r);return i=V0(i),bg(n),i}function xg(e){var t=e.asRxQuery.collection._changeEventBuffer.counter;return e._latestChangeEvent>=t}function _g(e){return e.collection.database.destroyed||xg(e)?Oe:(e._ensureEqualQueue=e._ensureEqualQueue.then(()=>W0(e)),e._ensureEqualQueue)}function W0(e){if(e._lastEnsureEqual=Ot(),e.collection.database.destroyed||xg(e))return Oe;var t=!1,n=!1;if(e._latestChangeEvent===-1&&(n=!0),!n){var r=e.asRxQuery.collection._changeEventBuffer.getFrom(e._latestChangeEvent+1);if(r===null)n=!0;else{e._latestChangeEvent=e.asRxQuery.collection._changeEventBuffer.counter;var i=e.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(r);if(e.op==="count"){var o=rt(e._result).count,s=o;i.forEach(c=>{var l=c.previousDocumentData&&e.doesDocumentDataMatch(c.previousDocumentData),u=e.doesDocumentDataMatch(c.documentData);!l&&u&&s++,l&&!u&&s--}),s!==o&&(t=!0,e._setResultData(s))}else{var a=pg(e,i);a.runFullQueryAgain?n=!0:a.changed&&(t=!0,e._setResultData(a.newResults))}}}return n?e._execOverDatabase().then(c=>(e._latestChangeEvent=e.collection._changeEventBuffer.counter,typeof c=="number"?((!e._result||c!==e._result.count)&&(t=!0,e._setResultData(c)),t):((!e._result||!Em(e.collection.schema.primaryPath,c,e._result.docsData))&&(t=!0,e._setResultData(c)),t))):Promise.resolve(t)}function Oo(e,t){if(!t.sort)throw y("SNH",{query:t});var n=Ap(e,t);return{query:t,queryPlan:n}}function H0(e){return O(this,null,function*(){var t=[],n=e.collection;if(e.isFindOneByIdQuery)if(Array.isArray(e.isFindOneByIdQuery)){var r=e.isFindOneByIdQuery;if(r=r.filter(u=>{var d=e.collection._docCache.getLatestDocumentDataIfExists(u);return d?(d._deleted||t.push(d),!1):!0}),r.length>0){var i=yield n.storageInstance.findDocumentsById(r,!1);nr(t,i)}}else{var o=e.isFindOneByIdQuery,s=e.collection._docCache.getLatestDocumentDataIfExists(o);if(!s){var a=yield n.storageInstance.findDocumentsById([o],!1);a[0]&&(s=a[0])}s&&!s._deleted&&t.push(s)}else{var c=e.getPreparedQuery(),l=yield n.storageInstance.query(c);t=l.documents}return t})}function K0(e,t){if(!t.skip&&t.selector&&Object.keys(t.selector).length===1&&t.selector[e]){var n=t.selector[e];if(typeof n=="string")return n;if(Object.keys(n).length===1&&typeof n.$eq=="string"||Object.keys(n).length===1&&Array.isArray(n.$eq)&&!n.$eq.find(r=>typeof r!="string"))return n.$eq}return!1}var wg="_rxdb_internal";function Cg(e,t){return O(this,null,function*(){var n=yield e.findDocumentsById([t],!1),r=n[0];if(r)return r})}function Sg(e,t,n){var r=t.documentData,i=t.previousDocumentData,o={documentId:t.documentId,collectionName:n?n.name:void 0,isLocal:e,operation:t.operation,documentData:nt.deepFreezeWhenDevMode(r),previousDocumentData:nt.deepFreezeWhenDevMode(i)};return o}function di(e,t,n,r){if(r)throw r.status===409?y("CONFLICT",{collection:e.name,id:t,writeError:r,data:n}):r.status===422?y("VD2",{collection:e.name,id:t,writeError:r,data:n}):r}function Eg(e,t,n,r,i,o,s){for(var a=!!e.schema.attachments,c=[],l=[],u=[],d=hn(10),h={id:d,events:[],checkpoint:null,context:i,startTime:Ot(),endTime:0},f=h.events,m=[],p=[],b=[],g=n.size>0,x,w=r.length,_=function(){var R=r[C],k=R.document,I=R.previous,F=k[t],Z=k._deleted,q=I&&I._deleted,St=void 0;g&&(St=n.get(F));var j;if(St){var zt=St._rev;if(!I||I&&zt!==I._rev){var Gt={isError:!0,status:409,documentId:F,writeRow:R,documentInDb:St};return u.push(Gt),1}var gt=a?Iu(R):R;a&&(Z?I&&Object.keys(I._attachments).forEach(Pt=>{p.push({documentId:F,attachmentId:Pt,digest:rt(I)._attachments[Pt].digest})}):(Object.entries(k._attachments).find(([Pt,ce])=>{var rs=I?I._attachments[Pt]:void 0;return!rs&&!ce.data&&(j={documentId:F,documentInDb:St,isError:!0,status:510,writeRow:R,attachmentId:Pt}),!0}),j||Object.entries(k._attachments).forEach(([Pt,ce])=>{var rs=I?I._attachments[Pt]:void 0;if(!rs)m.push({documentId:F,attachmentId:Pt,attachmentData:ce,digest:ce.digest});else{var Jb=gt.document._attachments[Pt].digest;ce.data&&rs.digest!==Jb&&b.push({documentId:F,attachmentId:Pt,attachmentData:ce,digest:ce.digest})}}))),j?u.push(j):(a?(l.push(Iu(gt)),s&&s(k)):(l.push(gt),s&&s(k)),x=gt);var Ie=null,Ai=null,xr=null;if(q&&!Z)xr="INSERT",Ie=a?Hr(k):k;else if(I&&!q&&!Z)xr="UPDATE",Ie=a?Hr(k):k,Ai=I;else if(Z)xr="DELETE",Ie=rt(k),Ai=I;else throw y("SNH",{args:{writeRow:R}});var wr={documentId:F,documentData:Ie,previousDocumentData:Ai,operation:xr};f.push(wr)}else{var se=!!Z;if(a&&Object.entries(k._attachments).forEach(([Pt,ce])=>{ce.data?m.push({documentId:F,attachmentId:Pt,attachmentData:ce,digest:ce.digest}):(j={documentId:F,isError:!0,status:510,writeRow:R,attachmentId:Pt},u.push(j))}),j||(a?(c.push(Iu(R)),o&&o(k)):(c.push(R),o&&o(k)),x=R),!se){var ae={documentId:F,operation:"INSERT",documentData:a?Hr(k):k,previousDocumentData:a&&I?Hr(I):I};f.push(ae)}}},C=0;C<w;C++)_();return{bulkInsertDocs:c,bulkUpdateDocs:l,newestRow:x,errors:u,eventBulk:h,attachmentsAdd:m,attachmentsRemove:p,attachmentsUpdate:b}}function Iu(e){return{previous:e.previous,document:Hr(e.document)}}function q0(e){return atob(e).length}function Y0(e){var t=e.data;if(!t)return e;var n={length:q0(t),digest:e.digest,type:e.type};return n}function Hr(e){if(!e._attachments||Object.keys(e._attachments).length===0)return e;var t=J(e);return t._attachments={},Object.entries(e._attachments).forEach(([n,r])=>{t._attachments[n]=Y0(r)}),t}function Ca(e){var t=J(e);return t._meta=J(e._meta),t}function Sa(e,t,n){nt.deepFreezeWhenDevMode(n);var r=Kt(n.primaryKey);function i(s){var a=J(s.document);if(a._meta=J(a._meta),nt.isDevMode()){a=Ks(r,n,a);try{typeof structuredClone=="function"?structuredClone(s):JSON.parse(JSON.stringify(s))}catch{throw y("DOC24",{collection:t.collectionName,document:s.document})}s.previous,s.previous&&Object.keys(s.previous._meta).forEach(c=>{if(!Object.prototype.hasOwnProperty.call(s.document._meta,c))throw y("SNH",{dataBefore:s.previous,dataAfter:s.document})})}return a._meta.lwt=Ot(),a._rev=Gn(e.token,s.previous),{document:a,previous:s.previous}}var o={originalStorageInstance:t,schema:t.schema,internals:t.internals,collectionName:t.collectionName,databaseName:t.databaseName,options:t.options,bulkWrite(s,a){var c=s.map(l=>i(l));return e.lockedRun(()=>t.bulkWrite(c,a)).then(l=>{var u={error:[],success:l.success.slice(0)},d=l.error.filter(f=>f.status===409&&!f.writeRow.previous&&!f.writeRow.document._deleted&&rt(f.documentInDb)._deleted?!0:(u.error.push(f),!1));if(d.length>0){var h=d.map(f=>({previous:f.documentInDb,document:Object.assign({},f.writeRow.document,{_rev:Gn(e.token,f.documentInDb)})}));return e.lockedRun(()=>t.bulkWrite(h,a)).then(f=>(nr(u.error,f.error),nr(u.success,f.success),u))}return l})},query(s){return e.lockedRun(()=>t.query(s))},count(s){return e.lockedRun(()=>t.count(s))},findDocumentsById(s,a){return e.lockedRun(()=>t.findDocumentsById(s,a))},getAttachmentData(s,a,c){return e.lockedRun(()=>t.getAttachmentData(s,a,c))},getChangedDocumentsSince:t.getChangedDocumentsSince?(s,a)=>e.lockedRun(()=>t.getChangedDocumentsSince(rt(s),a)):void 0,cleanup(s){return e.lockedRun(()=>t.cleanup(s))},remove(){return e.storageInstances.delete(o),e.lockedRun(()=>t.remove())},close(){return e.storageInstances.delete(o),e.lockedRun(()=>t.close())},changeStream(){return t.changeStream()},conflictResultionTasks(){return t.conflictResultionTasks()},resolveConflictResultionTask(s){if(s.output.isEqual)return t.resolveConflictResultionTask(s);var a=Object.assign({},s.output.documentData,{_meta:Lr(),_rev:ir(),_attachments:{}}),c=J(a);return delete c._meta,delete c._rev,delete c._attachments,t.resolveConflictResultionTask({id:s.id,output:{isEqual:!1,documentData:c}})}};return e.storageInstances.add(o),o}function Rg(e){if(e.schema.keyCompression)throw y("UT5",{args:{params:e}});if(Q0(e.schema))throw y("UT6",{args:{params:e}});if(e.schema.attachments&&e.schema.attachments.compression)throw y("UT7",{args:{params:e}})}function Q0(e){return!!(e.encrypted&&e.encrypted.length>0||e.attachments&&e.attachments.encrypted)}var Og=function(){function e(n,r,i,o){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=n,this.primaryPath=r,this.preWrite=i,this.postWrite=o}var t=e.prototype;return t.addWrite=function(r,i){var o=r[this.primaryPath],s=Ht(this.queueByDocId,o,()=>[]),a=new Promise((c,l)=>{var u={lastKnownDocumentState:r,modifier:i,resolve:c,reject:l};rt(s).push(u),this.triggerRun()});return a},t.triggerRun=function(){return O(this,null,function*(){if(!(this.isRunning===!0||this.queueByDocId.size===0)){this.isRunning=!0;var r=[],i=this.queueByDocId;this.queueByDocId=new Map,yield Promise.all(Array.from(i.entries()).map(c=>O(this,[c],function*([s,a]){var l=X0(a.map(h=>h.lastKnownDocumentState)),u=l;for(var d of a)try{u=yield d.modifier(_e(u))}catch(h){d.reject(h),d.reject=()=>{},d.resolve=()=>{}}try{yield this.preWrite(u,l)}catch(h){a.forEach(f=>f.reject(h));return}r.push({previous:l,document:u})})));var o=r.length>0?yield this.storageInstance.bulkWrite(r,"incremental-write"):{error:[],success:[]};return yield Promise.all(o.success.map(s=>{var a=s[this.primaryPath];this.postWrite(s);var c=Ur(i,a);c.forEach(l=>l.resolve(s))})),o.error.forEach(s=>{var a=s.documentId,c=Ur(i,a),l=Hs(s);if(l){var u=Ht(this.queueByDocId,a,()=>[]);c.reverse().forEach(h=>{h.lastKnownDocumentState=rt(l.documentInDb),rt(u).unshift(h)})}else{var d=Um(s);c.forEach(h=>h.reject(d))}}),this.isRunning=!1,this.triggerRun()}})},e}();function Tu(e){var t=n=>O(this,null,function*(){var r=Sm(n);r._deleted=n._deleted;var i=yield e(r),o=Object.assign({},i,{_meta:n._meta,_attachments:n._attachments,_rev:n._rev,_deleted:typeof i._deleted<"u"?i._deleted:n._deleted});return typeof o._deleted>"u"&&(o._deleted=!1),o});return t}function X0(e){var t=e[0],n=Bs(t._rev).height;return e.forEach(r=>{var i=Bs(r._rev).height;i>n&&(t=r,n=i)}),t}var Kr={get primaryPath(){var e=this;if(e.isInstanceOfRxDocument)return e.collection.schema.primaryPath},get primary(){var e=this;if(e.isInstanceOfRxDocument)return e._data[e.primaryPath]},get revision(){var e=this;if(e.isInstanceOfRxDocument)return e._data._rev},get deleted$(){var e=this;if(e.isInstanceOfRxDocument)return e.$.pipe(K(t=>t._data._deleted))},get deleted(){var e=this;if(e.isInstanceOfRxDocument)return e._data._deleted},getLatest(){var e=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(e)},get $(){var e=this;return e.collection.$.pipe(X(t=>!t.isLocal),X(t=>t.documentId===this.primary),K(t=>Ys(t)),Se(e.collection._docCache.getLatestDocumentData(this.primary)),Mn((t,n)=>t._rev===n._rev),K(t=>this.collection._docCache.getCachedRxDocument(t)),Mi(Vs))},get$(e){if(nt.isDevMode()){if(e.includes(".item."))throw y("DOC1",{path:e});if(e===this.primaryPath)throw y("DOC2");if(this.collection.schema.finalFields.includes(e))throw y("DOC3",{path:e});var t=ne(this.collection.schema.jsonSchema,e);if(!t)throw y("DOC4",{path:e})}return this.$.pipe(K(n=>re(n,e)),Mn())},populate(e){var t=ne(this.collection.schema.jsonSchema,e),n=this.get(e);if(!n)return Im;if(!t)throw y("DOC5",{path:e});if(!t.ref)throw y("DOC6",{path:e,schemaObj:t});var r=this.collection.database.collections[t.ref];if(!r)throw y("DOC7",{ref:t.ref,path:e,schemaObj:t});return t.type==="array"?r.findByIds(n).exec().then(i=>{var o=i.values();return Array.from(o)}):r.findOne(n).exec()},get(e){return Ht(this._propertyCache,e,()=>{var t=re(this._data,e);if(typeof t!="object"||t===null||Array.isArray(t))return nt.deepFreezeWhenDevMode(t);var n=this,r=new Proxy(J(t),{get(i,o){if(typeof o!="string")return i[o];var s=o.charAt(o.length-1);if(s==="$"){var a=o.slice(0,-1);return n.get$(Ke(e+"."+a))}else if(s==="_"){var c=o.slice(0,-1);return n.populate(Ke(e+"."+c))}else return n.get(Ke(e+"."+o))}});return r})},toJSON(e=!1){if(e)return nt.deepFreezeWhenDevMode(this._data);var t=J(this._data);return delete t._rev,delete t._attachments,delete t._deleted,delete t._meta,nt.deepFreezeWhenDevMode(t)},toMutableJSON(e=!1){return _e(this.toJSON(e))},update(e){throw ot("update")},incrementalUpdate(e){throw ot("update")},updateCRDT(e){throw ot("crdt")},putAttachment(){throw ot("attachments")},getAttachment(){throw ot("attachments")},allAttachments(){throw ot("attachments")},get allAttachments$(){throw ot("attachments")},modify(e,t){return O(this,null,function*(){var n=this._data,r=yield Tu(e)(n);return this._saveData(r,n)})},incrementalModify(e,t){return this.collection.incrementalWriteQueue.addWrite(this._data,Tu(e)).then(n=>this.collection._docCache.getCachedRxDocument(n))},patch(e){var t=this._data,n=_e(t);return Object.entries(e).forEach(([r,i])=>{n[r]=i}),this._saveData(n,t)},incrementalPatch(e){return this.incrementalModify(t=>(Object.entries(e).forEach(([n,r])=>{t[n]=r}),t))},_saveData(e,t){return O(this,null,function*(){if(e=J(e),this._data._deleted)throw y("DOC11",{id:this.primary,document:this});yield Mu(this.collection,e,t);var n=yield this.collection.storageInstance.bulkWrite([{previous:t,document:e}],"rx-document-save-data"),r=n.error[0];return di(this.collection,this.primary,e,r),yield this.collection._runHooks("post","save",e,this),this.collection._docCache.getCachedRxDocument(n.success[0])})},remove(){var e=this.collection;if(this.deleted)return Promise.reject(y("DOC13",{document:this,id:this.primary}));var t=J(this._data),n;return e._runHooks("pre","remove",t,this).then(()=>O(this,null,function*(){t._deleted=!0;var r=yield e.storageInstance.bulkWrite([{previous:this._data,document:t}],"rx-document-remove"),i=r.error[0];return di(e,this.primary,t,i),r.success[0]})).then(r=>(n=r,this.collection._runHooks("post","remove",t,this))).then(()=>this.collection._docCache.getCachedRxDocument(n))},incrementalRemove(){return this.incrementalModify(e=>O(this,null,function*(){return yield this.collection._runHooks("pre","remove",e,this),e._deleted=!0,e})).then(e=>O(this,null,function*(){return yield this.collection._runHooks("post","remove",e._data,e),e}))},destroy(){throw y("DOC14")}};function Ea(e=Kr){var t=function(r,i){this.collection=r,this._data=i,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return t.prototype=e,t}function Dg(e,t,n){var r=new e(t,n);return It("createRxDocument",r),r}function Mu(e,t,n){return t._meta=Object.assign({},n._meta,t._meta),nt.isDevMode()&&e.schema.validateChange(n,t),e._runHooks("pre","save",t,n)}var hi="collection",Pu="storage-token",G0="rx-migration-status",Z0="RxInternalDocument",Ra=qs({version:0,title:Z0,primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[hi,Pu,G0,"OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function Oa(e,t){return fo(Ra,{key:e,context:t})}function Da(e){return O(this,null,function*(){var t=Oo(e.schema,{selector:{context:hi,_deleted:{$eq:!1}},sort:[{id:"asc"}],skip:0}),n=yield e.query(t),r=n.documents;return r})}var kg="storageToken",J0=Oa(kg,Pu);function Ag(e){return O(this,null,function*(){var t=hn(10),n=e.password?yield e.hashFunction(JSON.stringify(e.password)):void 0,r={id:J0,context:Pu,key:kg,data:{rxdbVersion:e.rxdbVersion,token:t,instanceToken:e.token,passwordHash:n},_deleted:!1,_meta:Lr(),_rev:ir(),_attachments:{}},i=yield e.internalStore.bulkWrite([{document:r}],"internal-add-storage-token");if(i.success[0])return i.success[0];var o=rt(i.error[0]);if(o.isError&&Hs(o)){var s=o;if(!tw(s.documentInDb.data.rxdbVersion,e.rxdbVersion))throw y("DM5",{args:{database:e.name,databaseStateVersion:s.documentInDb.data.rxdbVersion,codeVersion:e.rxdbVersion}});if(n&&n!==s.documentInDb.data.passwordHash)throw y("DB1",{passwordHash:n,existingPasswordHash:s.documentInDb.data.passwordHash});var a=s.documentInDb;return rt(a)}throw o})}function tw(e,t){if(!e||t.includes("beta")&&t!==e)return!1;var n=e.split(".")[0],r=t.split(".")[0];return n===r}function Nu(e,t){return e+"-"+t.version}function ka(e,t){return t=J(t),t=Vm(e,t),t=Ks(e.primaryPath,e.jsonSchema,t),t._meta=Lr(),Object.prototype.hasOwnProperty.call(t,"_deleted")||(t._deleted=!1),Object.prototype.hasOwnProperty.call(t,"_attachments")||(t._attachments={}),Object.prototype.hasOwnProperty.call(t,"_rev")||(t._rev=ir()),t}function Ig(e,t){return O(this,null,function*(){t.multiInstance=e.multiInstance;var n=yield e.storage.createStorageInstance(t);return n})}function Aa(e,t,n,r,i,o,s){return O(this,null,function*(){var a=yield Da(t),c=a.filter(h=>h.data.name===i),l=[];c.forEach(h=>{l.push({collectionName:h.data.name,schema:h.data.schema,isCollection:!0}),h.data.connectedStorages.forEach(f=>l.push({collectionName:f.collectionName,isCollection:!1,schema:f.schema}))});var u=new Set;if(l=l.filter(h=>{var f=h.collectionName+"||"+h.schema.version;return u.has(f)?!1:(u.add(f),!0)}),yield Promise.all(l.map(h=>O(this,null,function*(){var f=yield e.createStorageInstance({collectionName:h.collectionName,databaseInstanceToken:n,databaseName:r,multiInstance:!1,options:{},schema:h.schema,password:o,devMode:nt.isDevMode()});yield f.remove(),h.isCollection&&(yield zr("postRemoveRxCollection",{storage:e,databaseName:r,collectionName:i}))}))),s){var d=c.map(h=>{var f=Ca(h);return f._deleted=!0,f._meta.lwt=Ot(),f._rev=Gn(n,h),{previous:h,document:f}});yield t.bulkWrite(d,"rx-database-remove-collection-all")}})}var ew=function(){function e(n){this.subs=[],this.limit=100,this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.collection=n,this.subs.push(this.collection.$.pipe(X(r=>!r.isLocal)).subscribe(r=>this._handleChangeEvent(r)))}var t=e.prototype;return t._handleChangeEvent=function(r){for(this.counter++,this.buffer.push(r),this.eventCounterMap.set(r,this.counter);this.buffer.length>this.limit;)this.buffer.shift()},t.getArrayIndexByPointer=function(r){var i=this.buffer[0],o=this.eventCounterMap.get(i);if(r<o)return null;var s=r-o;return s},t.getFrom=function(r){var i=[],o=this.getArrayIndexByPointer(r);if(o===null)return null;for(;;){var s=this.buffer[o];if(o++,s)i.push(s);else return i}},t.runFrom=function(r,i){var o=this.getFrom(r);if(o===null)throw new Error("out of bounds");o.forEach(s=>i(s))},t.reduceByLastOfDoc=function(r){return r.slice(0);var i},t.destroy=function(){this.subs.forEach(r=>r.unsubscribe())},e}();function Tg(e){return new ew(e)}var rw=new WeakMap;function nw(e){var t=e.schema.getDocumentPrototype(),n=ow(e),r=Kr,i={};return[t,n,r].forEach(o=>{var s=Object.getOwnPropertyNames(o);s.forEach(a=>{var c=Object.getOwnPropertyDescriptor(o,a),l=!0;(a.startsWith("_")||a.endsWith("_")||a.startsWith("$")||a.endsWith("$"))&&(l=!1),typeof c.value=="function"?Object.defineProperty(i,a,{get(){return c.value.bind(this)},enumerable:l,configurable:!1}):(c.enumerable=l,c.configurable=!1,c.writable&&(c.writable=!1),Object.defineProperty(i,a,c))})}),i}function iw(e){return Ht(rw,e,()=>Ea(nw(e)))}function Mg(e,t){var n=Dg(iw(e),e,nt.deepFreezeWhenDevMode(t));return e._runHooksSync("post","create",t,n),It("postCreateRxDocument",n),n}function ow(e){var t={};return Object.entries(e.methods).forEach(([n,r])=>{t[n]=r}),t}var $u=function(e,t){var n=Hr(e.newDocumentState),r=Hr(e.realMasterState);return jr(n,r)?Promise.resolve({isEqual:!0}):Promise.resolve({isEqual:!1,documentData:e.realMasterState})};function Ia(e){var t=e.collection.schema.jsonSchema;if(!t.attachments)throw y("AT1",{link:"https://pubkey.github.io/rxdb/rx-attachment.html"})}function Pg(e){Object.entries(e.doc.collection.attachments).forEach(([t,n])=>{Object.defineProperty(e,t,{get:()=>n.bind(e)})})}var sw=function(){function e({doc:n,id:r,type:i,length:o,digest:s}){this.doc=n,this.id=r,this.type=i,this.length=o,this.digest=s,Pg(this)}var t=e.prototype;return t.remove=function(){return this.doc.collection.incrementalWriteQueue.addWrite(this.doc._data,r=>(delete r._attachments[this.id],r)).then(()=>{})},t.getData=function(){return O(this,null,function*(){var r=yield this.doc.collection.storageInstance.getAttachmentData(this.doc.primary,this.id,this.digest),i=yield _m(r,this.type);return i})},t.getStringData=function(){return O(this,null,function*(){var r=yield this.getData(),i=yield xm(r);return i})},e}();function Ta(e,t,n){return new sw({doc:n,id:e,type:t.type,length:t.length,digest:t.digest})}function aw(e){return O(this,null,function*(){Ia(this);var t=Cm(e.data),n=yield wm(e.data),r=yield this.collection.database.hashFunction(n),i=e.id,o=e.type,s=n;return this.collection.incrementalWriteQueue.addWrite(this._data,a=>(a=J(a),a._attachments=J(a._attachments),a._attachments[i]={length:t,type:o,data:s,digest:r},a)).then(a=>{var c=this.collection._docCache.getCachedRxDocument(a),l=a._attachments[i],u=Ta(i,l,c);return u})})}function cw(e){Ia(this);var t=this._data;if(!t._attachments||!t._attachments[e])return null;var n=t._attachments[e],r=Ta(e,n,this);return r}function lw(){Ia(this);var e=this._data;return e._attachments?Object.keys(e._attachments).map(t=>Ta(t,e._attachments[t],this)):[]}function uw(e){return O(this,null,function*(){var t=e.docData._attachments;if(t){var n={};yield Promise.all(Object.keys(t).map(r=>O(this,null,function*(){var i=t[r],o=e.docData[e.oldCollection.schema.primaryPath],s=yield e.oldCollection.storageInstance.getAttachmentData(o,r,i.digest),a=yield e.oldCollection.database.hashFunction(s);n[r]={length:i.length,type:i.type,data:s,digest:a}}))),e.docData._attachments=n}})}function dw(e){return Br}var Ng={name:"attachments",rxdb:!0,prototypes:{RxDocument:e=>{e.putAttachment=aw,e.getAttachment=cw,e.allAttachments=lw,Object.defineProperty(e,"allAttachments$",{get:function(){return this.$.pipe(K(n=>Object.entries(n.toJSON(!0)._attachments)),K(n=>n.map(([r,i])=>Ta(r,i,this))))}})}},overwritable:{},hooks:{preMigrateDocument:{after:uw},postMigrateDocument:{after:dw}}};var Lg=["pre","post"],Fg=["insert","save","remove","create"],$g=!1,Do=function(){function e(n,r,i,o,s={},a={},c={},l={},u={},d=Du,h={},f=$u){this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=vg(),this.$={},this.checkpoint$={},this._changeEventBuffer={},this.onDestroy=[],this.destroyed=!1,this.database=n,this.name=r,this.schema=i,this.internalStorageInstance=o,this.instanceCreationOptions=s,this.migrationStrategies=a,this.methods=c,this.attachments=l,this.options=u,this.cacheReplacementPolicy=d,this.statics=h,this.conflictHandler=f,hw(this.asRxCollection)}var t=e.prototype;return t.prepare=function(){return O(this,null,function*(){this.storageInstance=Sa(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new Og(this.storageInstance,this.schema.primaryPath,(s,a)=>Mu(this,s,a),s=>this._runHooks("post","save",s));var r=this.database.eventBulks$.pipe(X(s=>s.collectionName===this.name));this.$=r.pipe(bt(s=>s.events)),this.checkpoint$=r.pipe(K(s=>s.checkpoint)),this._changeEventBuffer=Tg(this.asRxCollection),this._docCache=new yg(this.schema.primaryPath,this.$.pipe(X(s=>!s.isLocal)),s=>Mg(this.asRxCollection,s));var i=yield this.database.storageToken,o=this.storageInstance.changeStream().subscribe(s=>{var a={id:s.id,internal:!1,collectionName:this.name,storageToken:i,events:s.events.map(c=>Sg(!1,c,this)),databaseToken:this.database.token,checkpoint:s.checkpoint,context:s.context,endTime:s.endTime,startTime:s.startTime};this.database.$emit(a)});return this._subs.push(o),this._subs.push(this.storageInstance.conflictResultionTasks().subscribe(s=>{this.conflictHandler(s.input,s.context).then(a=>{this.storageInstance.resolveConflictResultionTask({id:s.id,output:a})})})),Br})},t.cleanup=function(r){throw ot("cleanup")},t.migrationNeeded=function(){throw ot("migration")},t.getMigrationState=function(){throw ot("migration")},t.startMigration=function(r=10){return this.getMigrationState().startMigration(r)},t.migratePromise=function(r=10){return this.getMigrationState().migratePromise(r)},t.insert=function(r){return O(this,null,function*(){var i=yield this.bulkInsert([r]),o=i.error[0];di(this,r[this.schema.primaryPath],r,o);var s=rt(i.success[0]);return s})},t.bulkInsert=function(r){return O(this,null,function*(){if(r.length===0)return{success:[],error:[]};var i=this.schema.primaryPath,o=r.map(d=>{var h=ka(this.schema,d);return h}),s=this.hasHooks("pre","insert")?yield Promise.all(o.map(d=>this._runHooks("pre","insert",d).then(()=>d))):o,a=s.map(d=>{var h={document:d};return h}),c=yield this.storageInstance.bulkWrite(a,"rx-collection-bulk-insert"),l=wa(this._docCache,c.success);if(this.hasHooks("post","insert")){var u=new Map;s.forEach(d=>{u.set(d[i],d)}),yield Promise.all(l.map(d=>this._runHooks("post","insert",u.get(d.primary),d)))}return{success:l,error:c.error}})},t.bulkRemove=function(r){return O(this,null,function*(){var i=this.schema.primaryPath;if(r.length===0)return{success:[],error:[]};var o=yield this.findByIds(r).exec(),s=[],a=new Map;Array.from(o.values()).forEach(h=>{var f=h.toMutableJSON(!0);s.push(f),a.set(h.primary,f)}),yield Promise.all(s.map(h=>{var f=h[this.schema.primaryPath];return this._runHooks("pre","remove",h,o.get(f))}));var c=s.map(h=>{var f=J(h);return f._deleted=!0,{previous:h,document:f}}),l=yield this.storageInstance.bulkWrite(c,"rx-collection-bulk-remove"),u=l.success.map(h=>h[i]);yield Promise.all(u.map(h=>this._runHooks("post","remove",a.get(h),o.get(h))));var d=u.map(h=>Ur(o,h));return{success:d,error:l.error}})},t.bulkUpsert=function(r){return O(this,null,function*(){var i=[],o=new Map;r.forEach(l=>{var u=ka(this.schema,l),d=u[this.schema.primaryPath];if(!d)throw y("COL3",{primaryPath:this.schema.primaryPath,data:u,schema:this.schema.jsonSchema});o.set(d,u),i.push(u)});var s=yield this.bulkInsert(i),a=s.success.slice(0),c=[];return yield Promise.all(s.error.map(l=>O(this,null,function*(){if(l.status!==409)c.push(l);else{var u=l.documentId,d=Ur(o,u),h=rt(l.documentInDb),f=this._docCache.getCachedRxDocument(h),m=yield f.incrementalModify(()=>d);a.push(m)}}))),{error:c,success:a}})},t.upsert=function(r){return O(this,null,function*(){var i=yield this.bulkUpsert([r]);return di(this.asRxCollection,r[this.schema.primaryPath],r,i.error[0]),i.success[0]})},t.incrementalUpsert=function(r){var i=ka(this.schema,r),o=i[this.schema.primaryPath];if(!o)throw y("COL4",{data:r});var s=this._incrementalUpsertQueues.get(o);return s||(s=Br),s=s.then(()=>mw(this,o,i)).then(a=>a.inserted?a.doc:fw(a.doc,i)),this._incrementalUpsertQueues.set(o,s),s},t.find=function(r){if(typeof r=="string")throw y("COL5",{queryObj:r});r||(r=Ro());var i=ui("find",r,this);return i},t.findOne=function(r){if(typeof r=="number"||Array.isArray(r))throw At("COL6",{queryObj:r});var i;if(typeof r=="string")i=ui("findOne",{selector:{[this.schema.primaryPath]:r},limit:1},this);else{if(r||(r=Ro()),r.limit)throw y("QU6");r=J(r),r.limit=1,i=ui("findOne",r,this)}return i},t.count=function(r){r||(r=Ro());var i=ui("count",r,this);return i},t.findByIds=function(r){var i={selector:{[this.schema.primaryPath]:{$in:r.slice(0)}}},o=ui("findByIds",i,this);return o},t.exportJSON=function(){throw ot("json-dump")},t.importJSON=function(r){throw ot("json-dump")},t.insertCRDT=function(r){throw ot("crdt")},t.addHook=function(r,i,o,s=!1){if(typeof o!="function")throw At("COL7",{key:i,when:r});if(!Lg.includes(r))throw At("COL8",{key:i,when:r});if(!Fg.includes(i))throw y("COL9",{key:i});if(r==="post"&&i==="create"&&s===!0)throw y("COL10",{when:r,key:i,parallel:s});var a=o.bind(this),c=s?"parallel":"series";this.hooks[i]=this.hooks[i]||{},this.hooks[i][r]=this.hooks[i][r]||{series:[],parallel:[]},this.hooks[i][r][c].push(a)},t.getHooks=function(r,i){return!this.hooks[i]||!this.hooks[i][r]?{series:[],parallel:[]}:this.hooks[i][r]},t.hasHooks=function(r,i){var o=this.getHooks(r,i);return o?o.series.length>0||o.parallel.length>0:!1},t._runHooks=function(r,i,o,s){var a=this.getHooks(r,i);if(!a)return Br;var c=a.series.map(l=>()=>l(o,s));return Mm(c).then(()=>Promise.all(a.parallel.map(l=>l(o,s))))},t._runHooksSync=function(r,i,o,s){var a=this.getHooks(r,i);a&&a.series.forEach(c=>c(o,s))},t.promiseWait=function(r){var i=new Promise(o=>{var s=setTimeout(()=>{this.timeouts.delete(s),o()},r);this.timeouts.add(s)});return i},t.destroy=function(){return this.destroyed?Oe:(this.destroyed=!0,Array.from(this.timeouts).forEach(r=>clearTimeout(r)),this._changeEventBuffer&&this._changeEventBuffer.destroy(),this.database.requestIdlePromise().then(()=>Promise.all(this.onDestroy.map(r=>r()))).then(()=>this.storageInstance.close()).then(()=>(this._subs.forEach(r=>r.unsubscribe()),delete this.database.collections[this.name],zr("postDestroyRxCollection",this).then(()=>!0))))},t.remove=function(){return O(this,null,function*(){yield this.destroy(),yield Aa(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.password,this.database.hashFunction)})},Ft(e,[{key:"insert$",get:function(){return this.$.pipe(X(n=>n.operation==="INSERT"))}},{key:"update$",get:function(){return this.$.pipe(X(n=>n.operation==="UPDATE"))}},{key:"remove$",get:function(){return this.$.pipe(X(n=>n.operation==="DELETE"))}},{key:"asRxCollection",get:function(){return this}}]),e}();function hw(e){if(!$g){$g=!0;var t=Object.getPrototypeOf(e);Fg.forEach(n=>{Lg.map(r=>{var i=r+Us(n);t[i]=function(o,s){return this.addHook(r,n,o,s)}})})}}function fw(e,t){return e.incrementalModify(n=>t)}function mw(e,t,n){var r=e._docCache.getLatestDocumentDataIfExists(t);return r?Promise.resolve({doc:e._docCache.getCachedRxDocument(r),inserted:!1}):e.findOne(t).exec().then(i=>i?{doc:i,inserted:!1}:e.insert(n).then(o=>({doc:o,inserted:!0})))}function Bg({database:e,name:t,schema:n,instanceCreationOptions:r={},migrationStrategies:i={},autoMigrate:o=!0,statics:s={},methods:a={},attachments:c={},options:l={},localDocuments:u=!1,cacheReplacementPolicy:d=Du,conflictHandler:h=$u}){var f={databaseInstanceToken:e.token,databaseName:e.name,collectionName:t,schema:n.jsonSchema,options:r,multiInstance:e.multiInstance,password:e.password,devMode:nt.isDevMode()};return It("preCreateRxStorageInstance",f),Ig(e,f).then(m=>{var p=new Do(e,t,n,m,r,i,a,c,l,d,s,h);return p.prepare().then(()=>{Object.entries(s).forEach(([g,x])=>{Object.defineProperty(p,g,{get:()=>x.bind(p)})});var b=Br;return o&&p.schema.version!==0&&(b=p.migratePromise()),b}).then(()=>(It("createRxCollection",{collection:p,creator:{name:t,schema:n,storageInstance:m,instanceCreationOptions:r,migrationStrategies:i,methods:a,attachments:c,options:l,cacheReplacementPolicy:d,localDocuments:u,statics:s}}),p)).catch(b=>m.close().then(()=>Promise.reject(b)))})}var Bu=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this._parallels=t||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};Bu.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,Fu(this)},wrapCall:function(t){var n=this;this.lock();var r;try{r=t()}catch(i){throw this.unlock(),i}return!r.then||typeof r.then!="function"?(this.unlock(),r):r.then(function(i){return n.unlock(),i}).catch(function(i){throw n.unlock(),i})},requestIdlePromise:function(t){var n=this;t=t||{};var r,i=new Promise(function(a){return r=a}),o=function(){Lu(n,i),r()};if(i._manRes=o,t.timeout){var s=setTimeout(function(){i._manRes()},t.timeout);i._timeoutObj=s}return this._iC.add(i),Fu(this),i},cancelIdlePromise:function(t){Lu(this,t)},requestIdleCallback:function(t,n){var r=this._lHN++,i=this.requestIdlePromise(n);return this._hPM.set(r,i),this._pHM.set(i,r),i.then(function(){return t()}),r},cancelIdleCallback:function(t){var n=this._hPM.get(t);this.cancelIdlePromise(n)},clear:function(){var t=this;this._iC.forEach(function(n){return Lu(t,n)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}};function pw(e){if(e._iC.size!==0){var t=e._iC.values(),n=t.next().value;n._manRes(),setTimeout(function(){return Fu(e)},0)}}function Lu(e,t){if(t){if(t._timeoutObj&&clearTimeout(t._timeoutObj),e._pHM.has(t)){var n=e._pHM.get(t);e._hPM.delete(n),e._pHM.delete(t)}e._iC.delete(t)}}function Fu(e){e._tryIR||e._iC.size===0||(e._tryIR=!0,setTimeout(function(){if(!e.isIdle()){e._tryIR=!1;return}setTimeout(function(){if(!e.isIdle()){e._tryIR=!1;return}pw(e),e._tryIR=!1},0)},0))}var qr=class{ttl;map=new Map;_to=!1;constructor(t){this.ttl=t}has(t){return this.map.has(t)}add(t){this.map.set(t,jg()),this._to||(this._to=!0,setTimeout(()=>{this._to=!1,gw(this)},0))}clear(){this.map.clear()}};function gw(e){let t=jg()-e.ttl,n=e.map[Symbol.iterator]();for(;;){let r=n.next().value;if(!r)return;let i=r[0];if(r[1]<t)e.map.delete(i);else return}}function jg(){return Date.now()}var Ma=new Set,Ug=0,ko=function(){function e(n,r,i,o,s,a,c=!1,l={},u,d,h,f){this.idleQueue=new Bu,this.rxdbVersion=uo,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onDestroy=[],this.destroyed=!1,this.collections={},this.eventBulks$=new U,this.observable$=this.eventBulks$.pipe(bt(m=>m.events)),this.storageToken=Oe,this.storageTokenDocument=Oe,this.emittedEventBulkIds=new qr(60*1e3),this.name=n,this.token=r,this.storage=i,this.instanceCreationOptions=o,this.password=s,this.multiInstance=a,this.eventReduce=c,this.options=l,this.internalStore=u,this.hashFunction=d,this.cleanupPolicy=h,this.allowSlowCount=f,Ug++,this.name!=="pseudoInstance"&&(this.internalStore=Sa(this.asRxDatabase,u,Ra),this.storageTokenDocument=Ag(this.asRxDatabase).catch(m=>this.startupErrors.push(m)),this.storageToken=this.storageTokenDocument.then(m=>m.data.token).catch(m=>this.startupErrors.push(m)))}var t=e.prototype;return t.$emit=function(r){this.emittedEventBulkIds.has(r.id)||(this.emittedEventBulkIds.add(r.id),this.eventBulks$.next(r))},t.removeCollectionDoc=function(r,i){return O(this,null,function*(){var o=yield Cg(this.internalStore,Oa(Nu(r,i),hi));if(!o)throw y("SNH",{name:r,schema:i});var s=Ca(o);s._deleted=!0,yield this.internalStore.bulkWrite([{document:s,previous:o}],"rx-database-remove-collection")})},t.addCollections=function(r){return O(this,null,function*(){var i={},o={},s=[],a={};yield Promise.all(Object.entries(r).map(h=>O(this,[h],function*([u,d]){var f=u,m=d.schema;i[f]=m;var p=Hm(m,this.hashFunction);if(o[f]=p,this.collections[u])throw y("DB3",{name:u});var b=Nu(u,m),g={id:Oa(b,hi),key:b,context:hi,data:{name:f,schemaHash:yield p.hash,schema:p.jsonSchema,version:p.version,connectedStorages:[]},_deleted:!1,_meta:Lr(),_rev:ir(),_attachments:{}};s.push({document:g});var x=Object.assign({},d,{name:f,schema:p,database:this}),w=J(d);w.database=this,w.name=u,It("preCreateRxCollection",w),x.conflictHandler=w.conflictHandler,a[f]=x})));var c=yield this.internalStore.bulkWrite(s,"rx-database-add-collection");yield yw(this),yield Promise.all(c.error.map(u=>O(this,null,function*(){if(u.status!==409)throw y("DB12",{database:this.name,writeError:u});var d=rt(u.documentInDb),h=d.data.name,f=o[h];if(d.data.schemaHash!==(yield f.hash))throw y("DB6",{database:this.name,collection:h,previousSchemaHash:d.data.schemaHash,schemaHash:yield f.hash,previousSchema:d.data.schema,schema:rt(i[h])})})));var l={};return yield Promise.all(Object.keys(r).map(u=>O(this,null,function*(){var d=a[u],h=yield Bg(d);l[u]=h,this.collections[u]=h,this[u]||Object.defineProperty(this,u,{get:()=>this.collections[u]})}))),l})},t.lockedRun=function(r){return this.idleQueue.wrapCall(r)},t.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},t.exportJSON=function(r){throw ot("json-dump")},t.importJSON=function(r){throw ot("json-dump")},t.backup=function(r){throw ot("backup")},t.leaderElector=function(){throw ot("leader-election")},t.isLeader=function(){throw ot("leader-election")},t.waitForLeadership=function(){throw ot("leader-election")},t.migrationStates=function(){throw ot("migration")},t.destroy=function(){return O(this,null,function*(){return this.destroyed?Oe:(this.destroyed=!0,yield zr("preDestroyRxDatabase",this),this.eventBulks$.complete(),Ug--,this._subs.map(r=>r.unsubscribe()),this.name==="pseudoInstance"?Oe:this.requestIdlePromise().then(()=>Promise.all(this.onDestroy.map(r=>r()))).then(()=>Promise.all(Object.keys(this.collections).map(r=>this.collections[r]).map(r=>r.destroy()))).then(()=>this.internalStore.close()).then(()=>Ma.delete(this.name)).then(()=>!0))})},t.remove=function(){return this.destroy().then(()=>bw(this.name,this.storage,this.password))},Ft(e,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}]),e}();function vw(e){if(Ma.has(e))throw y("DB8",{name:e,link:"https://pubkey.github.io/rxdb/rx-database.html#ignoreduplicate"})}function zg(e,t,n,r,i,o){return O(this,null,function*(){var s=yield t.createStorageInstance({databaseInstanceToken:e,databaseName:n,collectionName:wg,schema:Ra,options:r,multiInstance:i,password:o,devMode:nt.isDevMode()});return s})}function Vg({storage:e,instanceCreationOptions:t,name:n,password:r,multiInstance:i=!0,eventReduce:o=!0,ignoreDuplicate:s=!1,options:a={},cleanupPolicy:c,allowSlowCount:l=!1,localDocuments:u=!1,hashFunction:d=Dm}){It("preCreateRxDatabase",{storage:e,instanceCreationOptions:t,name:n,password:r,multiInstance:i,eventReduce:o,ignoreDuplicate:s,options:a,localDocuments:u}),s||vw(n),Ma.add(n);var h=hn(10);return zg(h,e,n,t,i,r).catch(f=>{throw Ma.delete(n),f}).then(f=>{var m=new ko(n,h,e,t,r,i,o,a,f,d,c,l);return zr("createRxDatabase",{database:m,creator:{storage:e,instanceCreationOptions:t,name:n,password:r,multiInstance:i,eventReduce:o,ignoreDuplicate:s,options:a,localDocuments:u}}).then(()=>m)})}function bw(e,t,n){return O(this,null,function*(){var r=hn(10),i=yield zg(r,t,e,{},!1,n),o=yield Da(i),s=new Set;o.forEach(c=>s.add(c.data.name));var a=Array.from(s);return yield Promise.all(a.map(c=>Aa(t,i,r,e,c,n))),yield zr("postRemoveRxDatabase",{databaseName:e,storage:t}),yield i.remove(),a})}function yw(e){return O(this,null,function*(){if(yield e.storageToken,e.startupErrors[0])throw e.startupErrors[0]})}var _w={RxSchema:Ql.prototype,RxDocument:Kr,RxQuery:Au.prototype,RxCollection:Do.prototype,RxDatabase:ko.prototype},ju=new Set,Wg=new Set;function Pa(e){if(It("preAddRxPlugin",{plugin:e,plugins:ju}),!ju.has(e)){{if(Wg.has(e.name))throw y("PL3",{name:e.name,plugin:e});ju.add(e),Wg.add(e.name)}if(!e.rxdb)throw At("PL1",{plugin:e});e.init&&e.init(),e.prototypes&&Object.entries(e.prototypes).forEach(([t,n])=>n(_w[t])),e.overwritable&&Object.assign(nt,e.overwritable),e.hooks&&Object.entries(e.hooks).forEach(([t,n])=>{n.after&&ei[t].push(n.after),n.before&&ei[t].unshift(n.before)})}}function Hg(e){return e&&typeof e.then=="function"}var xw=Promise.resolve(!1),vH=Promise.resolve(!0),Xe=Promise.resolve();function Na(e,t){return e||(e=0),new Promise(function(n){return setTimeout(function(){return n(t)},e)})}function Kg(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function Ao(){return Math.random().toString(36).substring(2)}var Uu=0;function dr(){var e=Date.now()*1e3;return e<=Uu&&(e=Uu+1),Uu=e,e}var ww=dr,Cw="native";function Sw(e){var t={time:dr(),messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(n){t.messagesCallback&&t.messagesCallback(n.data)},t}function Ew(e){e.bc.close(),e.subFns=[]}function Rw(e,t){try{return e.bc.postMessage(t,!1),Xe}catch(n){return Promise.reject(n)}}function Ow(e,t){e.messagesCallback=t}function Dw(){if(typeof globalThis<"u"&&globalThis.Deno&&globalThis.Deno.args)return!0;if((typeof window<"u"||typeof self<"u")&&typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function kw(){return 150}var qg={create:Sw,close:Ew,onMessage:Ow,postMessage:Rw,canBeUsed:Dw,type:Cw,averageResponseTime:kw,microSeconds:ww};function fi(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return typeof t.webWorkerSupport>"u"&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=1e3*45),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&typeof e.idb.onclose=="function"&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=1e3*60),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=1e3*60*2),t.node.maxParallelWrites||(t.node.maxParallelWrites=2048),typeof t.node.useFastPath>"u"&&(t.node.useFastPath=!0),t}var Aw=dr,Iw="pubkey.broadcast-channel-0-",hr="messages",$a={durability:"relaxed"},Tw="idb";function Yg(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function zu(e){e.commit&&e.commit()}function Mw(e){var t=Yg(),n=Iw+e,r=t.open(n);return r.onupgradeneeded=function(i){var o=i.target.result;o.createObjectStore(hr,{keyPath:"id",autoIncrement:!0})},new Promise(function(i,o){r.onerror=function(s){return o(s)},r.onsuccess=function(){i(r.result)}})}function Pw(e,t,n){var r=Date.now(),i={uuid:t,time:r,data:n},o=e.transaction([hr],"readwrite",$a);return new Promise(function(s,a){o.oncomplete=function(){return s()},o.onerror=function(l){return a(l)};var c=o.objectStore(hr);c.add(i),zu(o)})}function Nw(e,t){var n=e.transaction(hr,"readonly",$a),r=n.objectStore(hr),i=[],o=IDBKeyRange.bound(t+1,1/0);if(r.getAll){var s=r.getAll(o);return new Promise(function(c,l){s.onerror=function(u){return l(u)},s.onsuccess=function(u){c(u.target.result)}})}function a(){try{return o=IDBKeyRange.bound(t+1,1/0),r.openCursor(o)}catch{return r.openCursor()}}return new Promise(function(c,l){var u=a();u.onerror=function(d){return l(d)},u.onsuccess=function(d){var h=d.target.result;h?h.value.id<t+1?h.continue(t+1):(i.push(h.value),h.continue()):(zu(n),c(i))}})}function $w(e,t){if(e.closed)return Promise.resolve([]);var n=e.db.transaction(hr,"readwrite",$a),r=n.objectStore(hr);return Promise.all(t.map(function(i){var o=r.delete(i);return new Promise(function(s){o.onsuccess=function(){return s()}})}))}function Lw(e,t){var n=Date.now()-t,r=e.transaction(hr,"readonly",$a),i=r.objectStore(hr),o=[];return new Promise(function(s){i.openCursor().onsuccess=function(a){var c=a.target.result;if(c){var l=c.value;l.time<n?(o.push(l),c.continue()):(zu(r),s(o))}else s(o)}})}function Fw(e){return Lw(e.db,e.options.idb.ttl).then(function(t){return $w(e,t.map(function(n){return n.id}))})}function Bw(e,t){return t=fi(t),Mw(e).then(function(n){var r={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:Ao(),eMIs:new qr(t.idb.ttl*2),writeBlockPromise:Xe,messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,t.idb.onclose&&t.idb.onclose()},Qg(r),r})}function Qg(e){e.closed||Xg(e).then(function(){return Na(e.options.idb.fallbackInterval)}).then(function(){return Qg(e)})}function jw(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}function Xg(e){return e.closed?Xe:e.messagesCallback?Nw(e.db,e.lastCursorId).then(function(t){var n=t.filter(function(r){return!!r}).map(function(r){return r.id>e.lastCursorId&&(e.lastCursorId=r.id),r}).filter(function(r){return jw(r,e)}).sort(function(r,i){return r.time-i.time});return n.forEach(function(r){e.messagesCallback&&(e.eMIs.add(r.id),e.messagesCallback(r.data))}),Xe}):Xe}function Uw(e){e.closed=!0,e.db.close()}function zw(e,t){return e.writeBlockPromise=e.writeBlockPromise.then(function(){return Pw(e.db,e.uuid,t)}).then(function(){Kg(0,10)===0&&Fw(e)}),e.writeBlockPromise}function Vw(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,Xg(e)}function Ww(){return!!Yg()}function Hw(e){return e.idb.fallbackInterval*2}var Gg={create:Bw,close:Uw,onMessage:Vw,postMessage:zw,canBeUsed:Ww,type:Tw,averageResponseTime:Hw,microSeconds:Aw};var Kw=dr,qw="pubkey.broadcastChannel-",Yw="localstorage";function Zg(){var e;if(typeof window>"u")return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return e}function Jg(e){return qw+e}function Qw(e,t){return new Promise(function(n){Na().then(function(){var r=Jg(e.channelName),i={token:Ao(),time:Date.now(),data:t,uuid:e.uuid},o=JSON.stringify(i);Zg().setItem(r,o);var s=document.createEvent("Event");s.initEvent("storage",!0,!0),s.key=r,s.newValue=o,window.dispatchEvent(s),n()})})}function Xw(e,t){var n=Jg(e),r=function(o){o.key===n&&t(JSON.parse(o.newValue))};return window.addEventListener("storage",r),r}function Gw(e){window.removeEventListener("storage",e)}function Zw(e,t){if(t=fi(t),!tv())throw new Error("BroadcastChannel: localstorage cannot be used");var n=Ao(),r=new qr(t.localstorage.removeTimeout),i={channelName:e,uuid:n,eMIs:r};return i.listener=Xw(e,function(o){i.messagesCallback&&o.uuid!==n&&(!o.token||r.has(o.token)||o.data.time&&o.data.time<i.messagesCallbackTime||(r.add(o.token),i.messagesCallback(o.data)))}),i}function Jw(e){Gw(e.listener)}function tC(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t}function tv(){var e=Zg();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch{return!1}return!0}function eC(){var e=120,t=navigator.userAgent.toLowerCase();return t.includes("safari")&&!t.includes("chrome")?e*2:e}var ev={create:Zw,close:Jw,onMessage:tC,postMessage:Qw,canBeUsed:tv,type:Yw,averageResponseTime:eC,microSeconds:Kw};var rv=dr,rC="simulate",Vu=new Set;function nC(e){var t={time:rv(),name:e,messagesCallback:null};return Vu.add(t),t}function iC(e){Vu.delete(e)}var nv=5;function oC(e,t){return new Promise(function(n){return setTimeout(function(){var r=Array.from(Vu);r.forEach(function(i){i.name===e.name&&i!==e&&i.messagesCallback&&i.time<t.time&&i.messagesCallback(t)}),n()},nv)})}function sC(e,t){e.messagesCallback=t}function aC(){return!0}function cC(){return nv}var iv={create:nC,close:iC,onMessage:sC,postMessage:oC,canBeUsed:aC,type:rC,averageResponseTime:cC,microSeconds:rv};var ov=[qg,Gg,ev];function sv(e){var t=[].concat(e.methods,ov).filter(Boolean);if(e.type){if(e.type==="simulate")return iv;var n=t.find(function(i){return i.type===e.type});if(n)return n;throw new Error("method-type "+e.type+" not found")}e.webWorkerSupport||(t=t.filter(function(i){return i.type!=="idb"}));var r=t.find(function(i){return i.canBeUsed()});if(r)return r;throw new Error("No usable method found in "+JSON.stringify(ov.map(function(i){return i.type})))}var Wu=new Set,lC=0,Io=function(t,n){this.id=lC++,Wu.add(this),this.name=t,av&&(n=av),this.options=fi(n),this.method=sv(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,uC(this)};Io._pubkey=!0;var av;Io.prototype={postMessage:function(t){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(t));return cv(this,"message",t)},postInternal:function(t){return cv(this,"internal",t)},set onmessage(e){var t=this.method.microSeconds(),n={time:t,fn:e};uv(this,"message",this._onML),e&&typeof e=="function"?(this._onML=n,lv(this,"message",n)):this._onML=null},addEventListener:function(t,n){var r=this.method.microSeconds(),i={time:r,fn:n};lv(this,t,i)},removeEventListener:function(t,n){var r=this._addEL[t].find(function(i){return i.fn===n});uv(this,t,r)},close:function(){var t=this;if(!this.closed){Wu.delete(this),this.closed=!0;var n=this._prepP?this._prepP:Xe;return this._onML=null,this._addEL.message=[],n.then(function(){return Promise.all(Array.from(t._uMP))}).then(function(){return Promise.all(t._befC.map(function(r){return r()}))}).then(function(){return t.method.close(t._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function cv(e,t,n){var r=e.method.microSeconds(),i={time:r,type:t,data:n},o=e._prepP?e._prepP:Xe;return o.then(function(){var s=e.method.postMessage(e._state,i);return e._uMP.add(s),s.catch().then(function(){return e._uMP.delete(s)}),s})}function uC(e){var t=e.method.create(e.name,e.options);Hg(t)?(e._prepP=t,t.then(function(n){e._state=n})):e._state=t}function dv(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function lv(e,t,n){e._addEL[t].push(n),dC(e)}function uv(e,t,n){e._addEL[t]=e._addEL[t].filter(function(r){return r!==n}),hC(e)}function dC(e){if(!e._iL&&dv(e)){var t=function(i){e._addEL[i.type].forEach(function(o){i.time>=o.time&&o.fn(i.data)})},n=e.method.microSeconds();e._prepP?e._prepP.then(function(){e._iL=!0,e.method.onMessage(e._state,t,n)}):(e._iL=!0,e.method.onMessage(e._state,t,n))}}function hC(e){if(e._iL&&!dv(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}var La=new Map;function fC(e,t,n,r){var i=La.get(t);return i||(i={bc:new Io(["RxDB:",e,n].join("|")),refs:new Set},La.set(t,i)),i.refs.add(r),i.bc}function hv(e,t){var n=La.get(e);if(n&&(n.refs.delete(t),n.refs.size===0))return La.delete(e),n.bc.close()}function fv(e,t,n,r){if(t.multiInstance){var i=r||fC(e,t.databaseInstanceToken,n.databaseName,n),o=new U,s=h=>{h.storageName===e&&h.databaseName===t.databaseName&&h.collectionName===t.collectionName&&h.version===t.schema.version&&o.next(h.eventBulk)};i.addEventListener("message",s);var a=n.changeStream(),c=!1,l=a.subscribe(h=>{c||i.postMessage({storageName:e,databaseName:t.databaseName,collectionName:t.collectionName,version:t.schema.version,eventBulk:h})});n.changeStream=function(){return o.asObservable().pipe(wh(a))};var u=n.close.bind(n);n.close=function(){return O(this,null,function*(){return c=!0,l.unsubscribe(),i.removeEventListener("message",s),r||(yield hv(t.databaseInstanceToken,n)),u()})};var d=n.remove.bind(n);n.remove=function(){return O(this,null,function*(){return c=!0,l.unsubscribe(),i.removeEventListener("message",s),r||(yield hv(t.databaseInstanceToken,n)),d()})}}}var Hu={UT1:"given name is no string or empty",UT2:`collection- and database-names must match the regex to be compatible with couchdb databases.
    See https://neighbourhood.ie/blog/2020/10/13/everything-you-need-to-know-about-couchdb-database-names/
    info: if your database-name specifies a folder, the name must contain the slash-char '/' or '\\'`,UT3:"replication-direction must either be push or pull or both. But not none",UT4:"given leveldown is no valid adapter",UT5:"keyCompression is set to true in the schema but no key-compression handler is used in the storage",UT6:"schema contains encrypted fields but no encryption handler is used in the storage",UT7:"attachments.compression is enabled but no attachment-compression plugin is used",PL1:"Given plugin is not RxDB plugin.",PL3:"A plugin with the same name was already added but it was not the exact same JavaScript object",P2:"bulkWrite() cannot be called with an empty array",QU1:"RxQuery._execOverDatabase(): op not known",QU4:"RxQuery.regex(): You cannot use .regex() on the primary field",QU5:"RxQuery.sort(): does not work because key is not defined in the schema",QU6:"RxQuery.limit(): cannot be called on .findOne()",QU9:"throwIfMissing can only be used in findOne queries",QU10:"result empty and throwIfMissing: true",QU11:"RxQuery: no valid query params given",QU12:"Given index is not in schema",QU13:"A top level field of the query is not included in the schema",QU14:"Running a count() query in slow mode is now allowed. Either run a count() query with a selector that fully matches an index or set allowSlowCount=true when calling the createRxDatabase",QU15:"For count queries it is not allowed to use skip or limit",QU16:"$regex queries must be defined by a string, not an RegExp instance. This is because RegExp objects cannot be JSON stringified and also they are mutable which would be dangerous",MQ1:"path must be a string or object",MQ2:"Invalid argument",MQ3:"Invalid sort() argument. Must be a string, object, or array",MQ4:"Invalid argument. Expected instanceof mquery or plain object",MQ5:"method must be used after where() when called with these arguments",MQ6:"Can't mix sort syntaxes. Use either array or object | .sort([['field', 1], ['test', -1]]) | .sort({ field: 1, test: -1 })",MQ7:"Invalid sort value",MQ8:"Can't mix sort syntaxes. Use either array or object",DB1:"RxDocument.prepare(): another instance on this adapter has a different password",DB2:"RxDatabase.addCollections(): collection-names cannot start with underscore _",DB3:"RxDatabase.addCollections(): collection already exists. use myDatabase.[collectionName] to get it",DB4:"RxDatabase.addCollections(): schema is missing",DB5:"RxDatabase.addCollections(): collection-name not allowed",DB6:"RxDatabase.addCollections(): another instance created this collection with a different schema. Read this https://pubkey.github.io/rxdb/questions-answers.html#cant-change-the-schema",DB8:`RxDatabase.create(): A RxDatabase with the same name and adapter already exists.
Make sure to use this combination only once or set ignoreDuplicate to true if you do this intentional`,DB11:"createRxDatabase(): Invalid db-name, folder-paths must not have an ending slash",DB12:"RxDatabase.addCollections(): could not write to internal store",DB13:"createRxDatabase(): Invalid db-name or collection name, name contains the dollar sign",COL1:"RxDocument.insert() You cannot insert an existing document",COL2:"RxCollection.insert() fieldName ._id can only be used as primaryKey",COL3:"RxCollection.upsert() does not work without primary",COL4:"RxCollection.incrementalUpsert() does not work without primary",COL5:"RxCollection.find() if you want to search by _id, use .findOne(_id)",COL6:"RxCollection.findOne() needs a queryObject or string",COL7:"hook must be a function",COL8:"hooks-when not known",COL9:"RxCollection.addHook() hook-name not known",COL10:"RxCollection .postCreate-hooks cannot be async",COL11:"migrationStrategies must be an object",COL12:"A migrationStrategy is missing or too much",COL13:"migrationStrategy must be a function",COL14:"given static method-name is not a string",COL15:"static method-names cannot start with underscore _",COL16:"given static method is not a function",COL17:"RxCollection.ORM: statics-name not allowed",COL18:"collection-method not allowed because fieldname is in the schema",COL20:"Storage write error",CONFLICT:"Document update conflict. When changing a document you must work on the previous revision",DOC1:"RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed",DOC2:"cannot observe primary path",DOC3:"final fields cannot be observed",DOC4:"RxDocument.get$ cannot observe a non-existed field",DOC5:"RxDocument.populate() cannot populate a non-existed field",DOC6:"RxDocument.populate() cannot populate because path has no ref",DOC7:"RxDocument.populate() ref-collection not in database",DOC8:"RxDocument.set(): primary-key cannot be modified",DOC9:"final fields cannot be modified",DOC10:"RxDocument.set(): cannot set childpath when rootPath not selected",DOC11:"RxDocument.save(): can't save deleted document",DOC13:"RxDocument.remove(): Document is already deleted",DOC14:"RxDocument.destroy() does not exist",DOC15:"query cannot be an array",DOC16:"Since version 8.0.0 RxDocument.set() can only be called on temporary RxDocuments",DOC17:"Since version 8.0.0 RxDocument.save() can only be called on non-temporary documents",DOC18:"Document property for composed primary key is missing",DOC19:"Value of primary key(s) cannot be changed",DOC20:"PrimaryKey missing",DOC21:"PrimaryKey must be equal to PrimaryKey.trim(). It cannot start or end with a whitespace",DOC22:"PrimaryKey must not contain a linebreak",DOC23:'PrimaryKey must not contain a double-quote ["]',DOC24:"Given document data could not be structured cloned. This happens if you pass non-plain-json data into it, like a Date() or a Function. In vue.js this happens if you use ref() on the document data which transforms it into a Proxy object.",DM1:"migrate() Migration has already run",DM2:"migration of document failed final document does not match final schema",DM3:"migration already running",DM4:"Migration errored",DM5:"Cannot open database state with newer RxDB version. You have to migrate your database state first. See see https://rxdb.info/migration-storage.html",AT1:"to use attachments, please define this in your schema",EN1:"password is not valid",EN2:"validatePassword: min-length of password not complied",EN3:"Schema contains encrypted properties but no password is given",EN4:"Password not valid",JD1:"You must create the collections before you can import their data",JD2:"RxCollection.importJSON(): the imported json relies on a different schema",JD3:"RxCollection.importJSON(): json.passwordHash does not match the own",LD1:"RxDocument.allAttachments$ can't use attachments on local documents",LD2:"RxDocument.get(): objPath must be a string",LD3:"RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed",LD4:"cannot observe primary path",LD5:"RxDocument.set() id cannot be modified",LD6:"LocalDocument: Function is not usable on local documents",LD7:"Local document already exists",LD8:"localDocuments not activated. Set localDocuments=true on creation, when you want to store local documents on the RxDatabase or RxCollection.",RC1:"Replication: already added",RC2:"replicateCouchDB() query must be from the same RxCollection",RC4:"RxCouchDBReplicationState.awaitInitialReplication() cannot await initial replication when live: true",RC5:"RxCouchDBReplicationState.awaitInitialReplication() cannot await initial replication if multiInstance because the replication might run on another instance",RC6:"syncFirestore() serverTimestampField MUST NOT be part of the collections schema and MUST NOT be nested.",RC_PULL:"RxReplication pull handler threw an error - see .errors for more details",RC_STREAM:"RxReplication pull stream$ threw an error - see .errors for more details",RC_PUSH:"RxReplication push handler threw an error - see .errors for more details",RC_PUSH_NO_AR:"RxReplication push handler did not return an array with the conflicts",RC_WEBRTC_PEER:"RxReplication WebRTC Peer has error",RC_COUCHDB_1:"replicateCouchDB() url must end with a slash like 'https://example.com/mydatabase/'",RC_COUCHDB_2:"replicateCouchDB() did not get valid result with rows.",SC1:"fieldnames do not match the regex",SC2:"SchemaCheck: name 'item' reserved for array-fields",SC3:"SchemaCheck: fieldname has a ref-array but items-type is not string",SC4:"SchemaCheck: fieldname has a ref but is not type string, [string,null] or array<string>",SC6:"SchemaCheck: primary can only be defined at top-level",SC7:"SchemaCheck: default-values can only be defined at top-level",SC8:"SchemaCheck: first level-fields cannot start with underscore _",SC10:"SchemaCheck: schema defines ._rev, this will be done automatically",SC11:"SchemaCheck: schema needs a number >=0 as version",SC13:"SchemaCheck: primary is always index, do not declare it as index",SC14:"SchemaCheck: primary is always unique, do not declare it as index",SC15:"SchemaCheck: primary cannot be encrypted",SC16:"SchemaCheck: primary must have type: string",SC17:"SchemaCheck: top-level fieldname is not allowed",SC18:"SchemaCheck: indexes must be an array",SC19:"SchemaCheck: indexes must contain strings or arrays of strings",SC20:"SchemaCheck: indexes.array must contain strings",SC21:"SchemaCheck: given index is not defined in schema",SC22:"SchemaCheck: given indexKey is not type:string",SC23:"SchemaCheck: fieldname is not allowed",SC24:"SchemaCheck: required fields must be set via array. See https://spacetelescope.github.io/understanding-json-schema/reference/object.html#required",SC25:"SchemaCheck: compoundIndexes needs to be specified in the indexes field",SC26:"SchemaCheck: indexes needs to be specified at collection schema level",SC27:"SchemaCheck: encrypted fields need to be specified at collection schema level",SC28:"SchemaCheck: encrypted fields is not defined in the schema",SC29:"SchemaCheck: missing object key 'properties'",SC30:"SchemaCheck: primaryKey is required",SC32:"SchemaCheck: primary field must have the type string/number/integer",SC33:"SchemaCheck: used primary key is not a property in the schema",SC34:"Fields of type string that are used in an index, must have set the maxLength attribute in the schema",SC35:"Fields of type number/integer that are used in an index, must have set the multipleOf attribute in the schema",SC36:"A field of this type cannot be used as index",SC37:"Fields of type number that are used in an index, must have set the minimum and maximum attribute in the schema",SC38:"Fields of type boolean that are used in an index, must be required in the schema",SC39:"The primary key must have the maxLength attribute set",SC40:"$ref fields in the schema are not allowed. RxDB cannot resolve related schemas because it would have a negative performance impact.It would have to run http requests on runtime. $ref fields should be resolved during build time.",VD1:"Sub-schema not found, does the schemaPath exists in your schema?",VD2:"object does not match schema",S1:"You cannot create collections after calling RxDatabase.server()",GQL1:"GraphQL replication: cannot find sub schema by key",GQL3:"GraphQL replication: pull returns more documents then batchSize",CRDT1:"CRDT operations cannot be used because the crdt options are not set in the schema.",CRDT2:"RxDocument.incrementalModify() cannot be used when CRDTs are activated.",CRDT3:"To use CRDTs you MUST NOT set a conflictHandler because the default CRDT conflict handler must be used",SNH:"This should never happen"};var Ku;function mv(){if(!Ku){var e=new Do,t=Object.getOwnPropertyNames(e),n=Object.getOwnPropertyNames(Object.getPrototypeOf(e));Ku=[...t,...n]}return Ku}var qu;function pv(){if(!qu){var e=new ko("pseudoInstance","memory"),t=Object.getOwnPropertyNames(e),n=Object.getOwnPropertyNames(Object.getPrototypeOf(e));qu=[...t,...n],e.destroy()}return qu}var mC=Ea(Kr),pC=new mC,Yu;function Fa(){if(!Yu){var e=["deleted","synced"],t=Object.getOwnPropertyNames(pC),n=Object.getOwnPropertyNames(Kr);Yu=[...t,...n,...e]}return Yu}function gC(e){if(e!=="_deleted"){if(["properties"].includes(e))throw y("SC23",{fieldName:e});var t="^[a-zA-Z](?:[[a-zA-Z0-9_]*]?[a-zA-Z0-9])?$",n=new RegExp(t);if(e!=="_id"&&!e.match(n))throw y("SC1",{regex:t,fieldName:e})}}function vC(e){var t=Kt(e.primaryKey);function n(i,o,s){if(typeof i=="string"&&typeof o=="object"&&!Array.isArray(o)&&s.split(".").pop()!=="patternProperties"&&gC(i),Object.prototype.hasOwnProperty.call(o,"item")&&o.type!=="array")throw y("SC2",{fieldName:i});if(Object.prototype.hasOwnProperty.call(o,"required")&&typeof o.required=="boolean")throw y("SC24",{fieldName:i});if(Object.prototype.hasOwnProperty.call(o,"$ref"))throw y("SC40",{fieldName:i});if(Object.prototype.hasOwnProperty.call(o,"ref"))if(Array.isArray(o.type)){if(o.type.length>2||!o.type.includes("string")||!o.type.includes("null"))throw y("SC4",{fieldName:i})}else switch(o.type){case"string":break;case"array":if(!o.items||!o.items.type||o.items.type!=="string")throw y("SC3",{fieldName:i});break;default:throw y("SC4",{fieldName:i})}var a=s.split(".").length>=2;if(a&&o.default)throw y("SC7",{path:s});if(!a){if(i==="_id"&&t!=="_id")throw y("COL2",{fieldName:i});if(i.charAt(0)==="_"){if(i==="_id"||i==="_deleted")return;throw y("SC8",{fieldName:i})}}}function r(i,o){!i||typeof i!="object"||Object.keys(i).forEach(s=>{var a=i[s];!i.properties&&a&&typeof a=="object"&&!Array.isArray(i)&&n(s,a,o);var c=o;s!=="properties"&&(c=c+"."+s),r(a,c)})}return r(e,""),!0}function bC(e){if(!e.primaryKey)throw y("SC30",{schema:e});function t(c){if(!c)throw y("SC33",{schema:e});var l=c.type;if(!l||!["string","number","integer"].includes(l))throw y("SC32",{schema:e,args:{schemaPart:c}})}if(typeof e.primaryKey=="string"){var n=e.primaryKey,r=e.properties[n];t(r)}else{var i=e.primaryKey,o=ne(e,i.key);t(o),i.fields.forEach(c=>{var l=ne(e,c);t(l)})}var s=Kt(e.primaryKey),a=e.properties[s];if(!a.maxLength)throw y("SC39",{schema:e,args:{primaryPathSchemaPart:a}})}function gv(e){for(var t=e.split("."),n="",r=0;r<t.length;r+=1)t[r]!=="[]"?n=n.concat(".properties.".concat(t[r])):n=n.concat(".items");return Ke(n)}function vv(e){if(!e.primaryKey)throw y("SC30",{schema:e});if(!Object.prototype.hasOwnProperty.call(e,"properties"))throw y("SC29",{schema:e});if(e.properties._rev)throw y("SC10",{schema:e});if(!Object.prototype.hasOwnProperty.call(e,"version")||typeof e.version!="number"||e.version<0)throw y("SC11",{version:e.version});if(vC(e),bC(e),Object.keys(e.properties).forEach(t=>{var n=e.properties[t];if(t===e.primaryKey){if(e.indexes&&e.indexes.includes(t))throw y("SC13",{value:n,schema:e});if(n.unique)throw y("SC14",{value:n,schema:e});if(e.encrypted&&e.encrypted.includes(t))throw y("SC15",{value:n,schema:e});if(n.type!=="string")throw y("SC16",{value:n,schema:e})}if(Fa().includes(t))throw y("SC17",{key:t,schema:e})}),e.indexes){if(!He(e.indexes))throw y("SC18",{indexes:e.indexes,schema:e});e.indexes.forEach(t=>{if(!(typeof t=="string"||Array.isArray(t)))throw y("SC19",{index:t,schema:e});if(Array.isArray(t)){for(var n=0;n<t.length;n+=1)if(typeof t[n]!="string")throw y("SC20",{index:t,schema:e})}var r=He(t)?t:[t];r.forEach(i=>{var o=ne(e,i),s=o.type;switch(s){case"string":var a=o.maxLength;if(!a)throw y("SC34",{index:t,field:i,schema:e});break;case"number":case"integer":var c=o.multipleOf;if(!c)throw y("SC35",{index:t,field:i,schema:e});var l=o.maximum,u=o.minimum;if(typeof l>"u"||typeof u>"u")throw y("SC37",{index:t,field:i,schema:e});break;case"boolean":var d="",h=i;if(i.includes(".")){var f=i.split(".");h=f.pop(),d=f.join(".")}var m=d===""?e:ne(e,d);if(!m.required||!m.required.includes(h))throw y("SC38",{index:t,field:i,schema:e});break;default:throw y("SC36",{fieldName:i,type:o.type,schema:e})}})})}Object.keys(zs(e)).map(t=>{var n=t.split(".");return n.pop(),n.join(".")}).filter(t=>t!=="").filter((t,n,r)=>r.indexOf(t)===n).filter(t=>{var n=re(e,t);return n&&!!n.index}).forEach(t=>{throw t=t.replace("properties.",""),t=t.replace(/\.properties\./g,"."),y("SC26",{index:Ke(t),schema:e})}),(e.indexes||[]).reduce((t,n)=>(He(n)?nr(t,n):t.push(n),t),[]).filter((t,n,r)=>r.indexOf(t)===n).map(t=>{var n=gv(t),r=re(e,n);if(!r||typeof r!="object")throw y("SC21",{index:t,schema:e});return{indexPath:t,schemaObj:r}}).filter(t=>t.schemaObj.type!=="string"&&t.schemaObj.type!=="integer"&&t.schemaObj.type!=="number"&&t.schemaObj.type!=="boolean").forEach(t=>{throw y("SC22",{key:t.indexPath,type:t.schemaObj.type,schema:e})}),Object.keys(zs(e)).map(t=>{var n=t.split(".");return n.pop(),n.join(".")}).filter(t=>t!==""&&t!=="attachments").filter((t,n,r)=>r.indexOf(t)===n).filter(t=>{var n=re(e,t);return n&&!!n.encrypted}).forEach(t=>{throw t=t.replace("properties.",""),t=t.replace(/\.properties\./g,"."),y("SC27",{index:Ke(t),schema:e})}),e.encrypted&&e.encrypted.forEach(t=>{var n=gv(t),r=re(e,n);if(!r||typeof r!="object")throw y("SC28",{field:t,schema:e})})}function Ba(e){e&&Object.entries(e).forEach(([t,n])=>{if(typeof t!="string")throw At("COL14",{name:t});if(t.startsWith("_"))throw At("COL15",{name:t});if(typeof n!="function")throw At("COL16",{name:t,type:typeof t});if(mv().includes(t)||Fa().includes(t))throw y("COL17",{name:t})})}function bv(e,t){var n=Object.keys(e.properties);t&&Object.keys(t).filter(r=>n.includes(r)).forEach(r=>{throw y("COL18",{funName:r})})}function yv(e,t){if(typeof t!="object"||Array.isArray(t))throw At("COL11",{schema:e});var n=Wm(e);if(n.length!==Object.keys(t).length)throw y("COL12",{have:Object.keys(t),should:n});return n.map(r=>({v:r,s:t[r+1]})).filter(r=>typeof r.s!="function").forEach(r=>{throw At("COL13",{version:r.v,type:typeof r,schema:e})}),!0}function _v(e){if(pv().includes(e.name))throw y("DB5",{name:e.name});Cv(e.name)}function xv(e){if(Cv(e.name),e.name.includes("$"))throw y("DB13",{name:e.name});if(Bl(e.name)&&(e.name.endsWith("/")||e.name.endsWith("\\")))throw y("DB11",{name:e.name})}var wv="^[a-z][_$a-z0-9\\-]*$",yC=new RegExp(wv);function Cv(e){if(typeof e!="string"||e.length===0)throw At("UT1",{name:e});if(Bl(e))return!0;if(!e.match(yC)&&e!==":memory:")throw y("UT2",{regex:wv,givenName:e});return!0}function Sv(e){var t=Object.prototype.toString.call(e.queryObj)==="[object Object]";if(!t)throw At("QU11",{op:e.op,collection:e.collection.name,queryObj:e.queryObj});var n=["selector","limit","skip","sort","index"];if(Object.keys(e.queryObj).forEach(r=>{if(!n.includes(r))throw At("QU11",{op:e.op,collection:e.collection.name,queryObj:e.queryObj,key:r,args:{validKeys:n}})}),e.op==="count"&&(e.queryObj.limit||e.queryObj.skip))throw y("QU15",{collection:e.collection.name,query:e.queryObj});ja(e.queryObj)}function Ev(e){var t=e.rxQuery.collection.schema.jsonSchema,n=e.mangoQuery.selector,r=Object.keys(t.properties);Object.keys(n).filter(a=>!a.startsWith("$")).filter(a=>!a.includes(".")).forEach(a=>{if(!r.includes(a))throw y("QU13",{schema:t,field:a,query:e.mangoQuery})});var i=t.indexes?t.indexes:[],o=e.mangoQuery.index;if(o){var s=i.find(a=>jr(a,o));if(!s)throw y("QU12",{collection:e.rxQuery.collection.name,query:e.mangoQuery,schema:t})}if(e.rxQuery.op==="count"&&!_C(e.rxQuery.collection.schema.jsonSchema,e.mangoQuery)&&!e.rxQuery.collection.database.allowSlowCount)throw y("QU14",{collection:e.rxQuery.collection,query:e.mangoQuery});e.mangoQuery.sort&&e.mangoQuery.sort.map(a=>Object.keys(a)[0]).filter(a=>!a.includes(".")).forEach(a=>{if(!r.includes(a))throw y("QU13",{schema:t,field:a,query:e.mangoQuery})}),ja(e.mangoQuery)}function _C(e,t){var n=Oo(e,t);return n.queryPlan.selectorSatisfiedByIndex}function ja(e){if(!(typeof e!="object"||e===null)){var t=Object.keys(e);t.forEach(n=>{var r=e[n];if(r instanceof RegExp)throw y("QU16",{field:n,query:e});Array.isArray(r)?r.forEach(i=>ja(i)):ja(r)})}}function Rv(e,t){if(!e)throw y("DOC20",{primaryKey:e,document:t});if(e!==e.trim())throw y("DOC21",{primaryKey:e,document:t});if(e.includes("\r")||e.includes(`
`))throw y("DOC22",{primaryKey:e,document:t});if(e.includes('"'))throw y("DOC23",{primaryKey:e,document:t})}function xC(e){return!e||typeof e=="string"||typeof e=="number"?e:Wl(e)}var wC="dev-mode",Ov={name:wC,rxdb:!0,init:()=>{console.warn(["-------------- RxDB dev-mode warning -------------------------------","you are seeing this because you use the RxDB dev-mode plugin https://rxdb.info/dev-mode.html ","This is great in development mode, because it will run many checks to ensure","that you use RxDB correct. If you see this in production mode,","you did something wrong because the dev-mode plugin will decrease the performance.","","\u{1F917} Hint: To get the most out of RxDB, check out the Premium Plugins","to get access to faster storages and more professional features: https://rxdb.info/premium","---------------------------------------------------------------------"].join(`
`))},overwritable:{isDevMode(){return!0},deepFreezeWhenDevMode:xC,tunnelErrorMessage(e){if(!Hu[e])throw console.error("RxDB: Error-Code not known: "+e),new Error("Error-Code "+e+" not known, contact the maintainer");return Hu[e]}},hooks:{preCreateRxSchema:{after:vv},preCreateRxDatabase:{after:function(e){xv(e)}},preCreateRxCollection:{after:function(e){if(_v(e),bv(e.schema,e.methods),e.name.charAt(0)==="_")throw y("DB2",{name:e.name});if(!e.schema)throw y("DB4",{name:e.name,args:e})}},createRxDocument:{before:function(e){Rv(e.primary,e.toJSON(!0))}},preCreateRxQuery:{after:function(e){Sv(e)}},prePrepareQuery:{after:e=>{Ev(e)}},createRxCollection:{after:e=>{Ba(e.creator.statics),Ba(e.creator.methods),Ba(e.creator.attachments),e.creator.schema&&e.creator.migrationStrategies&&yv(e.creator.schema,e.creator.migrationStrategies)}}}};var dt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ct=Object.keys,Ut=Array.isArray;typeof Promise<"u"&&!dt.Promise&&(dt.Promise=Promise);function Xt(e,t){return typeof t!="object"||Ct(t).forEach(function(n){e[n]=t[n]}),e}var bi=Object.getPrototypeOf,CC={}.hasOwnProperty;function Ce(e,t){return CC.call(e,t)}function yi(e,t){typeof t=="function"&&(t=t(bi(e))),(typeof Reflect>"u"?Ct:Reflect.ownKeys)(t).forEach(n=>{br(e,n,t[n])})}var jv=Object.defineProperty;function br(e,t,n,r){jv(e,t,Xt(n&&Ce(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function xi(e){return{from:function(t){return e.prototype=Object.create(t.prototype),br(e.prototype,"constructor",e),{extend:yi.bind(null,e.prototype)}}}}var SC=Object.getOwnPropertyDescriptor;function kd(e,t){let n=SC(e,t),r;return n||(r=bi(e))&&kd(r,t)}var EC=[].slice;function cc(e,t,n){return EC.call(e,t,n)}function Uv(e,t){return t(e)}function To(e){if(!e)throw new Error("Assertion Failed")}function zv(e){dt.setImmediate?setImmediate(e):setTimeout(e,0)}function Vv(e,t){return e.reduce((n,r,i)=>{var o=t(r,i);return o&&(n[o[0]]=o[1]),n},{})}function RC(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function vr(e,t){if(Ce(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var o=vr(e,t[r]);n.push(o)}return n}var s=t.indexOf(".");if(s!==-1){var a=e[t.substr(0,s)];return a===void 0?void 0:vr(a,t.substr(s+1))}}function Ae(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){To(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)Ae(e,t[r],n[r])}else{var o=t.indexOf(".");if(o!==-1){var s=t.substr(0,o),a=t.substr(o+1);if(a==="")n===void 0?Ut(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n;else{var c=e[s];(!c||!Ce(e,s))&&(c=e[s]={}),Ae(c,a,n)}}else n===void 0?Ut(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function OC(e,t){typeof t=="string"?Ae(e,t,void 0):"length"in t&&[].map.call(t,function(n){Ae(e,n,void 0)})}function Wv(e){var t={};for(var n in e)Ce(e,n)&&(t[n]=e[n]);return t}var DC=[].concat;function Hv(e){return DC.apply([],e)}var Kv="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Hv([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>dt[e]),kC=Kv.map(e=>dt[e]);Vv(Kv,e=>[e,!0]);var Qr=null;function Vo(e){Qr=typeof WeakMap<"u"&&new WeakMap;let t=ed(e);return Qr=null,t}function ed(e){if(!e||typeof e!="object")return e;let t=Qr&&Qr.get(e);if(t)return t;if(Ut(e)){t=[],Qr&&Qr.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(ed(e[n]))}else if(kC.indexOf(e.constructor)>=0)t=e;else{let o=bi(e);t=o===Object.prototype?{}:Object.create(o),Qr&&Qr.set(e,t);for(var i in e)Ce(e,i)&&(t[i]=ed(e[i]))}return t}var{toString:AC}={};function rd(e){return AC.call(e).slice(8,-1)}var nd=typeof Symbol<"u"?Symbol.iterator:"@@iterator",IC=typeof nd=="symbol"?function(e){var t;return e!=null&&(t=e[nd])&&t.apply(e)}:function(){return null},gi={};function pr(e){var t,n,r,i;if(arguments.length===1){if(Ut(e))return e.slice();if(this===gi&&typeof e=="string")return[e];if(i=IC(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Ad=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1,Ze=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function qv(e,t){Ze=e,Yv=t}var Yv=()=>!0,TC=!new Error("").stack;function En(){if(TC)try{throw En.arguments,new Error}catch(e){return e}return new Error}function id(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(Yv).map(r=>`
`+r).join("")):""}var MC=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Qv=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Id=MC.concat(Qv),PC={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function wi(e,t){this._e=En(),this.name=e,this.message=t}xi(wi).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+id(this._e,2))}},toString:function(){return this.name+": "+this.message}});function Xv(e,t){return e+". Errors: "+Object.keys(t).map(n=>t[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function Za(e,t,n,r){this._e=En(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Xv(e,t)}xi(Za).from(wi);function Po(e,t){this._e=En(),this.name="BulkError",this.failures=Object.keys(t).map(n=>t[n]),this.failuresByPos=t,this.message=Xv(e,t)}xi(Po).from(wi);var Td=Id.reduce((e,t)=>(e[t]=t+"Error",e),{}),NC=wi,B=Id.reduce((e,t)=>{var n=t+"Error";function r(i,o){this._e=En(),this.name=n,i?typeof i=="string"?(this.message=`${i}${o?`
 `+o:""}`,this.inner=o||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=PC[t]||n,this.inner=null)}return xi(r).from(NC),e[t]=r,e},{});B.Syntax=SyntaxError;B.Type=TypeError;B.Range=RangeError;var Dv=Qv.reduce((e,t)=>(e[t+"Error"]=B[t],e),{});function $C(e,t){if(!e||e instanceof wi||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Dv[e.name])return e;var n=new Dv[e.name](t||e.message,e);return"stack"in e&&br(n,"stack",{get:function(){return this.inner.stack}}),n}var lc=Id.reduce((e,t)=>(["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=B[t]),e),{});lc.ModifyError=Za;lc.DexieError=wi;lc.BulkError=Po;function st(){}function Wo(e){return e}function LC(e,t){return e==null||e===Wo?t:function(n){return t(e(n))}}function Cn(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function FC(e,t){return e===st?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Cn(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Cn(i,this.onerror):i),o!==void 0?o:n}}function BC(e,t){return e===st?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Cn(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Cn(r,this.onerror):r)}}function jC(e,t){return e===st?t:function(n){var r=e.apply(this,arguments);Xt(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Cn(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Cn(o,this.onerror):o),r===void 0?s===void 0?void 0:s:Xt(r,s)}}function UC(e,t){return e===st?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function Md(e,t){return e===st?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}var Lo={},zC=100,VC=20,Gv=100,[od,Ja,sd]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,bi(e),e];let t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,bi(t),e]})(),Zv=Ja&&Ja.then,Ka=od&&od.constructor,Pd=!!sd,ad=!1,WC=sd?()=>{sd.then(Ua)}:dt.setImmediate?setImmediate.bind(null,Ua):dt.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{Ua(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(Ua,0)},Fo=function(e,t){Mo.push([e,t]),tc&&(WC(),tc=!1)},cd=!0,tc=!0,xn=[],qa=[],ld=null,ud=Wo,vi={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Iv,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{Iv(e[0],e[1])}catch{}})}},L=vi,Mo=[],wn=0,Ya=[];function M(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=st,this._lib=!1;var t=this._PSD=L;if(Ze&&(this._stackHolder=En(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==Lo)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&hd(this,this._value);return}this._state=null,this._value=null,++t.ref,tb(this,e)}var dd={get:function(){var e=L,t=ec;function n(r,i){var o=!e.global&&(e!==L||t!==ec);let s=o&&!yr();var a=new M((c,l)=>{Nd(this,new Jv(nc(r,e,o,s),nc(i,e,o,s),c,l,e))});return Ze&&nb(a,this),a}return n.prototype=Lo,n},set:function(e){br(this,"then",e&&e.prototype===Lo?dd:{get:function(){return e},set:dd.set})}};yi(M.prototype,{then:dd,_then:function(e,t){Nd(this,new Jv(null,null,e,t,L))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,r=>r instanceof t?n(r):Qa(r)):this.then(null,r=>r&&r.name===t?n(r):Qa(r))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),Qa(t)))},stack:{get:function(){if(this._stack)return this._stack;try{ad=!0;var e=rb(this,[],VC),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{ad=!1}}},timeout:function(e,t){return e<1/0?new M((n,r)=>{var i=setTimeout(()=>r(new B.Timeout(t)),e);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&br(M.prototype,Symbol.toStringTag,"Dexie.Promise");vi.env=ib();function Jv(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}yi(M,{all:function(){var e=pr.apply(null,arguments).map(rc);return new M(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach((i,o)=>M.resolve(i).then(s=>{e[o]=s,--r||t(e)},n))})},resolve:e=>{if(e instanceof M)return e;if(e&&typeof e.then=="function")return new M((n,r)=>{e.then(n,r)});var t=new M(Lo,!0,e);return nb(t,ld),t},reject:Qa,race:function(){var e=pr.apply(null,arguments).map(rc);return new M((t,n)=>{e.map(r=>M.resolve(r).then(t,n))})},PSD:{get:()=>L,set:e=>L=e},totalEchoes:{get:()=>ec},newPSD:Gr,usePSD:Si,scheduler:{get:()=>Fo,set:e=>{Fo=e}},rejectionMapper:{get:()=>ud,set:e=>{ud=e}},follow:(e,t)=>new M((n,r)=>Gr((i,o)=>{var s=L;s.unhandleds=[],s.onunhandled=o,s.finalize=Cn(function(){KC(()=>{this.unhandleds.length===0?i():o(this.unhandleds[0])})},s.finalize),e()},t,n,r))});Ka&&(Ka.allSettled&&br(M,"allSettled",function(){let e=pr.apply(null,arguments).map(rc);return new M(t=>{e.length===0&&t([]);let n=e.length,r=new Array(n);e.forEach((i,o)=>M.resolve(i).then(s=>r[o]={status:"fulfilled",value:s},s=>r[o]={status:"rejected",reason:s}).then(()=>--n||t(r)))})}),Ka.any&&typeof AggregateError<"u"&&br(M,"any",function(){let e=pr.apply(null,arguments).map(rc);return new M((t,n)=>{e.length===0&&n(new AggregateError([]));let r=e.length,i=new Array(r);e.forEach((o,s)=>M.resolve(o).then(a=>t(a),a=>{i[s]=a,--r||n(new AggregateError(i))}))})}));function tb(e,t){try{t(n=>{if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&Ho();n&&typeof n.then=="function"?tb(e,(i,o)=>{n instanceof M?n._then(i,o):n.then(i,o)}):(e._state=!0,e._value=n,eb(e)),r&&Ko()}},hd.bind(null,e))}catch(n){hd(e,n)}}function hd(e,t){if(qa.push(t),e._state===null){var n=e._lib&&Ho();t=ud(t),e._state=!1,e._value=t,Ze&&t!==null&&typeof t=="object"&&!t._promise&&RC(()=>{var r=kd(t,"stack");t._promise=e,br(t,"stack",{get:()=>ad?r&&(r.get?r.get.apply(t):r.value):e.stack})}),qC(e),eb(e),n&&Ko()}}function eb(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Nd(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),wn===0&&(++wn,Fo(()=>{--wn===0&&$d()},[]))}function Nd(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++wn,Fo(HC,[n,e,t])}function HC(e,t,n){try{ld=t;var r,i=t._value;t._state?r=e(i):(qa.length&&(qa=[]),r=e(i),qa.indexOf(i)===-1&&YC(t)),n.resolve(r)}catch(o){n.reject(o)}finally{ld=null,--wn===0&&$d(),--n.psd.ref||n.psd.finalize()}}function rb(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i=e._value,o,s;i!=null?(o=i.name||"Error",s=i.message||i,r=id(i,0)):(o=i,s=""),t.push(o+(s?": "+s:"")+r)}return Ze&&(r=id(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&rb(e._prev,t,n)),t}function nb(e,t){var n=t?t._numPrev+1:0;n<zC&&(e._prev=t,e._numPrev=n)}function Ua(){Ho()&&Ko()}function Ho(){var e=cd;return cd=!1,tc=!1,e}function Ko(){var e,t,n;do for(;Mo.length>0;)for(e=Mo,Mo=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Mo.length>0);cd=!0,tc=!0}function $d(){var e=xn;xn=[],e.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var t=Ya.slice(0),n=t.length;n;)t[--n]()}function KC(e){function t(){e(),Ya.splice(Ya.indexOf(t),1)}Ya.push(t),++wn,Fo(()=>{--wn===0&&$d()},[])}function qC(e){xn.some(t=>t._value===e._value)||xn.push(e)}function YC(e){for(var t=xn.length;t;)if(xn[--t]._value===e._value){xn.splice(t,1);return}}function Qa(e){return new M(Lo,!1,e)}function mt(e,t){var n=L;return function(){var r=Ho(),i=L;try{return Zr(n,!0),e.apply(this,arguments)}catch(o){t&&t(o)}finally{Zr(i,!1),r&&Ko()}}}var jt={awaits:0,echoes:0,id:0},QC=0,Xa=[],Qu=0,ec=0,XC=0;function Gr(e,t,n,r){var i=L,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++XC;var s=vi.env;o.env=Pd?{Promise:M,PromiseProp:{value:M,configurable:!0,writable:!0},all:M.all,race:M.race,allSettled:M.allSettled,any:M.any,resolve:M.resolve,reject:M.reject,nthen:kv(s.nthen,o),gthen:kv(s.gthen,o)}:{},t&&Xt(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=Si(o,e,n,r);return o.ref===0&&o.finalize(),a}function Ci(){return jt.id||(jt.id=++QC),++jt.awaits,jt.echoes+=Gv,jt.id}function yr(){return jt.awaits?(--jt.awaits===0&&(jt.id=0),jt.echoes=jt.awaits*Gv,!0):!1}(""+Zv).indexOf("[native code]")===-1&&(Ci=yr=st);function rc(e){return jt.echoes&&e&&e.constructor===Ka?(Ci(),e.then(t=>(yr(),t),t=>(yr(),kt(t)))):e}function GC(e){++ec,(!jt.echoes||--jt.echoes===0)&&(jt.echoes=jt.id=0),Xa.push(L),Zr(e,!0)}function ZC(){var e=Xa[Xa.length-1];Xa.pop(),Zr(e,!1)}function Zr(e,t){var n=L;if((t?jt.echoes&&(!Qu++||e!==L):Qu&&(!--Qu||e!==L))&&ob(t?GC.bind(null,e):ZC),e!==L&&(L=e,n===vi&&(vi.env=ib()),Pd)){var r=vi.env.Promise,i=e.env;Ja.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(dt,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function ib(){var e=dt.Promise;return Pd?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(dt,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Ja.then,gthen:e.prototype.then}:{}}function Si(e,t,n,r,i){var o=L;try{return Zr(e,!0),t(n,r,i)}finally{Zr(o,!1)}}function ob(e){Zv.call(od,e)}function nc(e,t,n,r){return typeof e!="function"?e:function(){var i=L;n&&Ci(),Zr(t,!0);try{return e.apply(this,arguments)}finally{Zr(i,!1),r&&ob(yr)}}}function kv(e,t){return function(n,r){return e.call(this,nc(n,t),nc(r,t))}}var Av="unhandledrejection";function Iv(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(dt.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(Av,!0,!0),Xt(r,i)):dt.CustomEvent&&(r=new CustomEvent(Av,{detail:i}),Xt(r,i)),r&&dt.dispatchEvent&&(dispatchEvent(r),!dt.PromiseRejectionEvent&&dt.onunhandledrejection))try{dt.onunhandledrejection(r)}catch{}Ze&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var kt=M.reject;function fd(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!L.letThrough&&!e._vip){if(e._state.openComplete)return kt(new B.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return kt(new B.DatabaseClosed);e.open().catch(st)}return e._state.dbReadyPromise.then(()=>fd(e,t,n,r))}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===Td.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>fd(e,t,n,r))):kt(o)}return i._promise(t,(o,s)=>Gr(()=>(L.trans=i,r(o,s,i)))).then(o=>i._completion.then(()=>o))}}var Tv="4.0.0-alpha.4",_n=String.fromCharCode(65535),md=-1/0,fr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",sb="String expected.",No=[],uc=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),JC=uc,tS=uc,ab=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),dc="__dbnames",Xu="readonly",Gu="readwrite";function Sn(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var cb={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function za(e){return typeof e=="string"&&!/\./.test(e)?t=>(t[e]===void 0&&e in t&&(t=Vo(t),delete t[e]),t):t=>t}function eS(){throw B.Type()}var pd=class{_trans(t,n,r){let i=this._tx||L.trans,o=this.name;function s(c,l,u){if(!u.schema[o])throw new B.NotFound("Table "+o+" not part of transaction");return n(u.idbtrans,u)}let a=Ho();try{return i&&i.db===this.db?i===L.trans?i._promise(t,s,r):Gr(()=>i._promise(t,s,r),{trans:i,transless:L.transless||L}):fd(this.db,t,[this.name],s)}finally{a&&Ko()}}get(t,n){return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:t}).then(i=>this.hook.reading.fire(i))).then(n)}where(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(Ut(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);let n=Ct(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);let r=this.schema.indexes.concat(this.schema.primKey).filter(l=>l.compound&&n.every(u=>l.keyPath.indexOf(u)>=0)&&l.keyPath.every(u=>n.indexOf(u)>=0))[0];if(r&&this.db._maxKey!==_n)return this.where(r.name).equals(r.keyPath.map(l=>t[l]));!r&&Ze&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);let{idxByName:i}=this.schema,o=this.db._deps.indexedDB;function s(l,u){try{return o.cmp(l,u)===0}catch{return!1}}let[a,c]=n.reduce(([l,u],d)=>{let h=i[d],f=t[d];return[l||h,l||!h?Sn(u,h&&h.multi?m=>{let p=vr(m,d);return Ut(p)&&p.some(b=>s(f,b))}:m=>s(f,vr(m,d))):u]},[null,null]);return a?this.where(a.name).equals(t[a.keyPath]).filter(c):r?this.filter(c):this.where(n).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,Ut(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){let{db:n,name:r}=this;this.schema.mappedClass=t,t.prototype instanceof eS&&(t=class extends t{get db(){return n}table(){return r}});let i=new Set;for(let s=t.prototype;s;s=bi(s))Object.getOwnPropertyNames(s).forEach(a=>i.add(a));let o=s=>{if(!s)return s;let a=Object.create(t.prototype);for(let c in s)if(!i.has(c))try{a[c]=s[c]}catch{}return a};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=o,this.hook("reading",o),t}defineClass(){function t(n){Xt(this,n)}return this.mapToClass(t)}add(t,n){let{auto:r,keyPath:i}=this.schema.primKey,o=t;return i&&r&&(o=za(i)(t)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[o]})).then(s=>s.numFailures?M.reject(s.failures[0]):s.lastResult).then(s=>{if(i)try{Ae(t,i,s)}catch{}return s})}update(t,n){if(typeof t=="object"&&!Ut(t)){let r=vr(t,this.schema.primKey.keyPath);if(r===void 0)return kt(new B.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?Ct(n).forEach(i=>{Ae(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)}put(t,n){let{auto:r,keyPath:i}=this.schema.primKey,o=t;return i&&r&&(o=za(i)(t)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"put",values:[o],keys:n!=null?[n]:null})).then(s=>s.numFailures?M.reject(s.failures[0]):s.lastResult).then(s=>{if(i)try{Ae(t,i,s)}catch{}return s})}delete(t){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[t]})).then(n=>n.numFailures?M.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:cb})).then(t=>t.numFailures?M.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",n=>this.core.getMany({keys:t,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(t,n,r){let i=Array.isArray(n)?n:void 0;r=r||(i?void 0:n);let o=r?r.allKeys:void 0;return this._trans("readwrite",s=>{let{auto:a,keyPath:c}=this.schema.primKey;if(c&&i)throw new B.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new B.InvalidArgument("Arguments objects and keys must have the same length");let l=t.length,u=c&&a?t.map(za(c)):t;return this.core.mutate({trans:s,type:"add",keys:i,values:u,wantResults:o}).then(({numFailures:d,results:h,lastResult:f,failures:m})=>{let p=o?h:f;if(d===0)return p;throw new Po(`${this.name}.bulkAdd(): ${d} of ${l} operations failed`,m)})})}bulkPut(t,n,r){let i=Array.isArray(n)?n:void 0;r=r||(i?void 0:n);let o=r?r.allKeys:void 0;return this._trans("readwrite",s=>{let{auto:a,keyPath:c}=this.schema.primKey;if(c&&i)throw new B.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new B.InvalidArgument("Arguments objects and keys must have the same length");let l=t.length,u=c&&a?t.map(za(c)):t;return this.core.mutate({trans:s,type:"put",keys:i,values:u,wantResults:o}).then(({numFailures:d,results:h,lastResult:f,failures:m})=>{let p=o?h:f;if(d===0)return p;throw new Po(`${this.name}.bulkPut(): ${d} of ${l} operations failed`,m)})})}bulkDelete(t){let n=t.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:t})).then(({numFailures:r,lastResult:i,failures:o})=>{if(r===0)return i;throw new Po(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,o)})}};function qo(e){var t={},n=function(a,c){if(c){for(var l=arguments.length,u=new Array(l-1);--l;)u[l-1]=arguments[l];return t[a].subscribe.apply(null,u),e}else if(typeof a=="string")return t[a]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(a,c,l){if(typeof a=="object")return s(a);c||(c=UC),l||(l=st);var u={subscribers:[],fire:l,subscribe:function(d){u.subscribers.indexOf(d)===-1&&(u.subscribers.push(d),u.fire=c(u.fire,d))},unsubscribe:function(d){u.subscribers=u.subscribers.filter(function(h){return h!==d}),u.fire=u.subscribers.reduce(c,l)}};return t[a]=n[a]=u,u}function s(a){Ct(a).forEach(function(c){var l=a[c];if(Ut(l))o(c,a[c][0],a[c][1]);else if(l==="asap")var u=o(c,Wo,function(){for(var h=arguments.length,f=new Array(h);h--;)f[h]=arguments[h];u.subscribers.forEach(function(m){zv(function(){m.apply(null,f)})})});else throw new B.InvalidArgument("Invalid event config")})}}function Yo(e,t){return xi(t).from({prototype:e}),t}function rS(e){return Yo(pd.prototype,function(n,r,i){this.db=e,this._tx=i,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:qo(null,{creating:[FC,st],reading:[LC,Wo],updating:[jC,st],deleting:[BC,st]})})}function mi(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Zu(e,t){e.filter=Sn(e.filter,t)}function Ju(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>Sn(r(),t()):t,e.justLimit=n&&!r}function nS(e,t){e.isMatch=Sn(e.isMatch,t)}function Ga(e,t){if(e.isPrimKey)return t.primaryKey;let n=t.getIndexByKeyPath(e.index);if(!n)throw new B.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Mv(e,t,n){let r=Ga(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function Va(e,t,n,r){let i=e.replayFilter?Sn(e.filter,e.replayFilter()):e.filter;if(e.or){let o={},s=(a,c,l)=>{if(!i||i(c,l,h=>c.stop(h),h=>c.fail(h))){var u=c.primaryKey,d=""+u;d==="[object ArrayBuffer]"&&(d=""+new Uint8Array(u)),Ce(o,d)||(o[d]=!0,t(a,c,l))}};return Promise.all([e.or._iterate(s,n),Pv(Mv(e,r,n),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}else return Pv(Mv(e,r,n),Sn(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Pv(e,t,n,r){var i=r?(s,a,c)=>n(r(s),a,c):n,o=mt(i);return e.then(s=>{if(s)return s.start(()=>{var a=()=>s.continue();(!t||t(s,c=>a=c,c=>{s.stop(c),a=st},c=>{s.fail(c),a=st}))&&o(s.value,s,c=>a=c),a()})})}function Qt(e,t){try{let n=Nv(e),r=Nv(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return oS($v(e),$v(t));case"Array":return iS(e,t)}}catch{}return NaN}function iS(e,t){let n=e.length,r=t.length,i=n<r?n:r;for(let o=0;o<i;++o){let s=Qt(e[o],t[o]);if(s!==0)return s}return n===r?0:n<r?-1:1}function oS(e,t){let n=e.length,r=t.length,i=n<r?n:r;for(let o=0;o<i;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return n===r?0:n<r?-1:1}function Nv(e){let t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";let n=rd(e);return n==="ArrayBuffer"?"binary":n}function $v(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var gd=class{_read(t,n){var r=this._ctx;return r.error?r.table._trans(null,kt.bind(null,r.error)):r.table._trans("readonly",t).then(n)}_write(t){var n=this._ctx;return n.error?n.table._trans(null,kt.bind(null,n.error)):n.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var n=this._ctx;n.algorithm=Sn(n.algorithm,t)}_iterate(t,n){return Va(this._ctx,t,n,this._ctx.table.core)}clone(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&Xt(r,t),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(t){var n=this._ctx;return this._read(r=>Va(n,t,r,n.table.core))}count(t){return this._read(n=>{let r=this._ctx,i=r.table.core;if(mi(r,!0))return i.count({trans:n,query:{index:Ga(r,i.schema),range:r.range}}).then(s=>Math.min(s,r.limit));var o=0;return Va(r,()=>(++o,!1),n,i).then(()=>o)}).then(t)}sortBy(t,n){let r=t.split(".").reverse(),i=r[0],o=r.length-1;function s(l,u){return u?s(l[r[u]],u-1):l[i]}var a=this._ctx.dir==="next"?1:-1;function c(l,u){var d=s(l,o),h=s(u,o);return d<h?-a:d>h?a:0}return this.toArray(function(l){return l.sort(c)}).then(n)}toArray(t){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&mi(r,!0)&&r.limit>0){let{valueMapper:i}=r,o=Ga(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:o,range:r.range}}).then(({result:s})=>i?s.map(i):s)}else{let i=[];return Va(r,o=>i.push(o),n,r.table.core).then(()=>i)}},t)}offset(t){var n=this._ctx;return t<=0?this:(n.offset+=t,mi(n)?Ju(n,()=>{var r=t;return(i,o)=>r===0?!0:r===1?(--r,!1):(o(()=>{i.advance(r),r=0}),!1)}):Ju(n,()=>{var r=t;return()=>--r<0}),this)}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Ju(this._ctx,()=>{var n=t;return function(r,i,o){return--n<=0&&i(o),n>=0}},!0),this}until(t,n){return Zu(this._ctx,function(r,i,o){return t(r.value)?(i(o),n):!0}),this}first(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){return Zu(this._ctx,function(n){return t(n.value)}),nS(this._ctx,t),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})}keys(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.key)}).then(function(){return r}).then(t)}primaryKeys(t){var n=this._ctx;if(n.dir==="next"&&mi(n,!0)&&n.limit>0)return this._read(i=>{var o=Ga(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(({result:i})=>i).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.primaryKey)}).then(function(){return r}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(n){return n[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return Zu(this._ctx,function(i){var o=i.primaryKey.toString(),s=Ce(r,o);return r[o]=!0,!s}),this}modify(t){var n=this._ctx;return this._write(r=>{var i;if(typeof t=="function")i=t;else{var o=Ct(t),s=o.length;i=function(p){for(var b=!1,g=0;g<s;++g){var x=o[g],w=t[x];vr(p,x)!==w&&(Ae(p,x,w),b=!0)}return b}}let a=n.table.core,{outbound:c,extractKey:l}=a.schema.primaryKey,u=this.db._options.modifyChunkSize||200,d=[],h=0,f=[],m=(p,b)=>{let{failures:g,numFailures:x}=b;h+=p-x;for(let w of Ct(g))d.push(g[w])};return this.clone().primaryKeys().then(p=>{let b=g=>{let x=Math.min(u,p.length-g);return a.getMany({trans:r,keys:p.slice(g,g+x),cache:"immutable"}).then(w=>{let _=[],C=[],R=c?[]:null,k=[];for(let F=0;F<x;++F){let Z=w[F],q={value:Vo(Z),primKey:p[g+F]};i.call(q,q.value,q)!==!1&&(q.value==null?k.push(p[g+F]):!c&&Qt(l(Z),l(q.value))!==0?(k.push(p[g+F]),_.push(q.value)):(C.push(q.value),c&&R.push(p[g+F])))}let I=mi(n)&&n.limit===1/0&&(typeof t!="function"||t===td)&&{index:n.index,range:n.range};return Promise.resolve(_.length>0&&a.mutate({trans:r,type:"add",values:_}).then(F=>{for(let Z in F.failures)k.splice(parseInt(Z),1);m(_.length,F)})).then(()=>(C.length>0||I&&typeof t=="object")&&a.mutate({trans:r,type:"put",keys:R,values:C,criteria:I,changeSpec:typeof t!="function"&&t}).then(F=>m(C.length,F))).then(()=>(k.length>0||I&&t===td)&&a.mutate({trans:r,type:"delete",keys:k,criteria:I}).then(F=>m(k.length,F))).then(()=>p.length>g+x&&b(g+u))})};return b(0).then(()=>{if(d.length>0)throw new Za("Error modifying one or more objects",d,h,f);return p.length})})})}delete(){var t=this._ctx,n=t.range;return mi(t)&&(t.isPrimKey&&!tS||n.type===3)?this._write(r=>{let{primaryKey:i}=t.table.core.schema,o=n;return t.table.core.count({trans:r,query:{index:i,range:o}}).then(s=>t.table.core.mutate({trans:r,type:"deleteRange",range:o}).then(({failures:a,lastResult:c,results:l,numFailures:u})=>{if(u)throw new Za("Could not delete some values",Object.keys(a).map(d=>a[d]),s-u);return s-u}))}):this.modify(td)}},td=(e,t)=>t.value=null;function sS(e){return Yo(gd.prototype,function(n,r){this.db=e;let i=cb,o=null;if(r)try{i=r()}catch(l){o=l}let s=n._ctx,a=s.table,c=a.hook.reading.fire;this._ctx={table:a,index:s.index,isPrimKey:!s.index||a.schema.primKey.keyPath&&s.index===a.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:o,or:s.or,valueMapper:c!==Wo?c:null}})}function aS(e,t){return e<t?-1:e===t?0:1}function cS(e,t){return e>t?-1:e===t?0:1}function pe(e,t,n){var r=e instanceof ic?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function pi(e){return new e.Collection(e,()=>lb("")).limit(0)}function lS(e){return e==="next"?t=>t.toUpperCase():t=>t.toLowerCase()}function uS(e){return e==="next"?t=>t.toLowerCase():t=>t.toUpperCase()}function dS(e,t,n,r,i,o){for(var s=Math.min(e.length,r.length),a=-1,c=0;c<s;++c){var l=t[c];if(l!==r[c])return i(e[c],n[c])<0?e.substr(0,c)+n[c]+n.substr(c+1):i(e[c],r[c])<0?e.substr(0,c)+r[c]+n.substr(c+1):a>=0?e.substr(0,a)+t[a]+n.substr(a+1):null;i(e[c],l)<0&&(a=c)}return s<r.length&&o==="next"?e+n.substr(e.length):s<e.length&&o==="prev"?e.substr(0,n.length):a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}function Wa(e,t,n,r){var i,o,s,a,c,l,u,d=n.length;if(!n.every(p=>typeof p=="string"))return pe(e,sb);function h(p){i=lS(p),o=uS(p),s=p==="next"?aS:cS;var b=n.map(function(g){return{lower:o(g),upper:i(g)}}).sort(function(g,x){return s(g.lower,x.lower)});a=b.map(function(g){return g.upper}),c=b.map(function(g){return g.lower}),l=p,u=p==="next"?"":r}h("next");var f=new e.Collection(e,()=>Yr(a[0],c[d-1]+r));f._ondirectionchange=function(p){h(p)};var m=0;return f._addAlgorithm(function(p,b,g){var x=p.key;if(typeof x!="string")return!1;var w=o(x);if(t(w,c,m))return!0;for(var _=null,C=m;C<d;++C){var R=dS(x,w,a[C],c[C],s,l);R===null&&_===null?m=C+1:(_===null||s(_,R)>0)&&(_=R)}return b(_!==null?function(){p.continue(_+u)}:g),!1}),f}function Yr(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function lb(e){return{type:1,lower:e,upper:e}}var ic=class{get Collection(){return this._ctx.table.db.Collection}between(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&!(r&&i)?pi(this):new this.Collection(this,()=>Yr(t,n,!r,!i))}catch{return pe(this,fr)}}equals(t){return t==null?pe(this,fr):new this.Collection(this,()=>lb(t))}above(t){return t==null?pe(this,fr):new this.Collection(this,()=>Yr(t,void 0,!0))}aboveOrEqual(t){return t==null?pe(this,fr):new this.Collection(this,()=>Yr(t,void 0,!1))}below(t){return t==null?pe(this,fr):new this.Collection(this,()=>Yr(void 0,t,!1,!0))}belowOrEqual(t){return t==null?pe(this,fr):new this.Collection(this,()=>Yr(void 0,t))}startsWith(t){return typeof t!="string"?pe(this,sb):this.between(t,t+_n,!0,!0)}startsWithIgnoreCase(t){return t===""?this.startsWith(t):Wa(this,(n,r)=>n.indexOf(r[0])===0,[t],_n)}equalsIgnoreCase(t){return Wa(this,(n,r)=>n===r[0],[t],"")}anyOfIgnoreCase(){var t=pr.apply(gi,arguments);return t.length===0?pi(this):Wa(this,(n,r)=>r.indexOf(n)!==-1,t,"")}startsWithAnyOfIgnoreCase(){var t=pr.apply(gi,arguments);return t.length===0?pi(this):Wa(this,(n,r)=>r.some(i=>n.indexOf(i)===0),t,_n)}anyOf(){let t=pr.apply(gi,arguments),n=this._cmp;try{t.sort(n)}catch{return pe(this,fr)}if(t.length===0)return pi(this);let r=new this.Collection(this,()=>Yr(t[0],t[t.length-1]));r._ondirectionchange=o=>{n=o==="next"?this._ascending:this._descending,t.sort(n)};let i=0;return r._addAlgorithm((o,s,a)=>{let c=o.key;for(;n(c,t[i])>0;)if(++i,i===t.length)return s(a),!1;return n(c,t[i])===0?!0:(s(()=>{o.continue(t[i])}),!1)}),r}notEqual(t){return this.inAnyRange([[md,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){let t=pr.apply(gi,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return pe(this,fr)}let n=t.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[md,i]],null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,n){let r=this._cmp,i=this._ascending,o=this._descending,s=this._min,a=this._max;if(t.length===0)return pi(this);if(!t.every(_=>_[0]!==void 0&&_[1]!==void 0&&i(_[0],_[1])<=0))return pe(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",B.InvalidArgument);let c=!n||n.includeLowers!==!1,l=n&&n.includeUppers===!0;function u(_,C){let R=0,k=_.length;for(;R<k;++R){let I=_[R];if(r(C[0],I[1])<0&&r(C[1],I[0])>0){I[0]=s(I[0],C[0]),I[1]=a(I[1],C[1]);break}}return R===k&&_.push(C),_}let d=i;function h(_,C){return d(_[0],C[0])}let f;try{f=t.reduce(u,[]),f.sort(h)}catch{return pe(this,fr)}let m=0,p=l?_=>i(_,f[m][1])>0:_=>i(_,f[m][1])>=0,b=c?_=>o(_,f[m][0])>0:_=>o(_,f[m][0])>=0;function g(_){return!p(_)&&!b(_)}let x=p,w=new this.Collection(this,()=>Yr(f[0][0],f[f.length-1][1],!c,!l));return w._ondirectionchange=_=>{_==="next"?(x=p,d=i):(x=b,d=o),f.sort(h)},w._addAlgorithm((_,C,R)=>{for(var k=_.key;x(k);)if(++m,m===f.length)return C(R),!1;return g(k)?!0:(this._cmp(k,f[m][1])===0||this._cmp(k,f[m][0])===0||C(()=>{d===i?_.continue(f[m][0]):_.continue(f[m][1])}),!1)}),w}startsWithAnyOf(){let t=pr.apply(gi,arguments);return t.every(n=>typeof n=="string")?t.length===0?pi(this):this.inAnyRange(t.map(n=>[n,n+_n])):pe(this,"startsWithAnyOf() only works with strings")}};function hS(e){return Yo(ic.prototype,function(n,r,i){this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:i};let o=e._deps.indexedDB;if(!o)throw new B.MissingAPI;this._cmp=this._ascending=o.cmp.bind(o),this._descending=(s,a)=>o.cmp(a,s),this._max=(s,a)=>o.cmp(s,a)>0?s:a,this._min=(s,a)=>o.cmp(s,a)<0?s:a,this._IDBKeyRange=e._deps.IDBKeyRange})}function Ge(e){return mt(function(t){return Bo(t),e(t.target.error),!1})}function Bo(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var jo="storagemutated",Xr="x-storagemutated-1",Jr=qo(null,jo),vd=class{_lock(){return To(!L.global),++this._reculock,this._reculock===1&&!L.global&&(L.lockOwnerFor=this),this}_unlock(){if(To(!L.global),--this._reculock===0)for(L.global||(L.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Si(t[1],t[0])}catch{}}return this}_locked(){return this._reculock&&L.lockOwnerFor!==this}create(t){if(!this.mode)return this;let n=this.db.idbdb,r=this.db._state.dbOpenError;if(To(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new B.DatabaseClosed(r);case"MissingAPIError":throw new B.MissingAPI(r.message,r);default:throw new B.OpenFailed(r)}if(!this.active)throw new B.TransactionInactive;return To(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=mt(i=>{Bo(i),this._reject(t.error)}),t.onabort=mt(i=>{Bo(i),this.active&&this._reject(new B.Abort(t.error)),this.active=!1,this.on("abort").fire(i)}),t.oncomplete=mt(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&Jr.storagemutated.fire(t.mutatedParts)}),this}_promise(t,n,r){if(t==="readwrite"&&this.mode!=="readwrite")return kt(new B.ReadOnly("Transaction is readonly"));if(!this.active)return kt(new B.TransactionInactive);if(this._locked())return new M((o,s)=>{this._blockedFuncs.push([()=>{this._promise(t,n,r).then(o,s)},L])});if(r)return Gr(()=>{var o=new M((s,a)=>{this._lock();let c=n(s,a,this);c&&c.then&&c.then(s,a)});return o.finally(()=>this._unlock()),o._lib=!0,o});var i=new M((o,s)=>{var a=n(o,s,this);a&&a.then&&a.then(o,s)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(t){var n=this._root();let r=M.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function s(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=s)})()}var o=n._waitingFor;return new M((s,a)=>{r.then(c=>n._waitingQueue.push(mt(s.bind(null,c))),c=>n._waitingQueue.push(mt(a.bind(null,c)))).finally(()=>{n._waitingFor===o&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new B.Abort))}table(t){let n=this._memoizedTables||(this._memoizedTables={});if(Ce(n,t))return n[t];let r=this.schema[t];if(!r)throw new B.NotFound("Table "+t+" not part of transaction");let i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i}};function fS(e){return Yo(vd.prototype,function(n,r,i,o,s){this.db=e,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=o,this.idbtrans=null,this.on=qo(this,"complete","error","abort"),this.parent=s||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new M((a,c)=>{this._resolve=a,this._reject=c}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},a=>{var c=this.active;return this.active=!1,this.on.error.fire(a),this.parent?this.parent._reject(a):c&&this.idbtrans&&this.idbtrans.abort(),kt(a)})})}function bd(e,t,n,r,i,o,s){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!s?"&":"")+(r?"*":"")+(i?"++":"")+ub(t)}}function ub(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function db(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:Vv(n,r=>[r.name,r])}}function mS(e){return e.length===1?e[0]:e}var Uo=e=>{try{return e.only([[]]),Uo=()=>[[]],[[]]}catch{return Uo=()=>_n,_n}};function yd(e){return e==null?()=>{}:typeof e=="string"?pS(e):t=>vr(t,e)}function pS(e){return e.split(".").length===1?n=>n[e]:n=>vr(n,e)}function Lv(e){return[].slice.call(e)}var gS=0;function $o(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function vS(e,t,n){function r(u,d){let h=Lv(u.objectStoreNames);return{schema:{name:u.name,tables:h.map(f=>d.objectStore(f)).map(f=>{let{keyPath:m,autoIncrement:p}=f,b=Ut(m),g=m==null,x={},w={name:f.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:g,compound:b,keyPath:m,autoIncrement:p,unique:!0,extractKey:yd(m)},indexes:Lv(f.indexNames).map(_=>f.index(_)).map(_=>{let{name:C,unique:R,multiEntry:k,keyPath:I}=_,F=Ut(I),Z={name:C,compound:F,keyPath:I,unique:R,multiEntry:k,extractKey:yd(I)};return x[$o(I)]=Z,Z}),getIndexByKeyPath:_=>x[$o(_)]};return x[":id"]=w.primaryKey,m!=null&&(x[$o(m)]=w.primaryKey),w})},hasGetAll:h.length>0&&"getAll"in d.objectStore(h[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(u){if(u.type===3)return null;if(u.type===4)throw new Error("Cannot convert never type to IDBKeyRange");let{lower:d,upper:h,lowerOpen:f,upperOpen:m}=u;return d===void 0?h===void 0?null:t.upperBound(h,!!m):h===void 0?t.lowerBound(d,!!f):t.bound(d,h,!!f,!!m)}function o(u){let d=u.name;function h({trans:p,type:b,keys:g,values:x,range:w}){return new Promise((_,C)=>{_=mt(_);let R=p.objectStore(d),k=R.keyPath==null,I=b==="put"||b==="add";if(!I&&b!=="delete"&&b!=="deleteRange")throw new Error("Invalid operation type: "+b);let{length:F}=g||x||{length:1};if(g&&x&&g.length!==x.length)throw new Error("Given keys array must have same length as given values array.");if(F===0)return _({numFailures:0,failures:{},results:[],lastResult:void 0});let Z,q=[],St=[],j=0,se=zt=>{++j,Bo(zt)};if(b==="deleteRange"){if(w.type===4)return _({numFailures:j,failures:St,results:[],lastResult:void 0});w.type===3?q.push(Z=R.clear()):q.push(Z=R.delete(i(w)))}else{let[zt,Gt]=I?k?[x,g]:[x,null]:[g,null];if(I)for(let gt=0;gt<F;++gt)q.push(Z=Gt&&Gt[gt]!==void 0?R[b](zt[gt],Gt[gt]):R[b](zt[gt])),Z.onerror=se;else for(let gt=0;gt<F;++gt)q.push(Z=R[b](zt[gt])),Z.onerror=se}let ae=zt=>{let Gt=zt.target.result;q.forEach((gt,Ie)=>gt.error!=null&&(St[Ie]=gt.error)),_({numFailures:j,failures:St,results:b==="delete"?g:q.map(gt=>gt.result),lastResult:Gt})};Z.onerror=zt=>{se(zt),ae(zt)},Z.onsuccess=ae})}function f({trans:p,values:b,query:g,reverse:x,unique:w}){return new Promise((_,C)=>{_=mt(_);let{index:R,range:k}=g,I=p.objectStore(d),F=R.isPrimaryKey?I:I.index(R.name),Z=x?w?"prevunique":"prev":w?"nextunique":"next",q=b||!("openKeyCursor"in F)?F.openCursor(i(k),Z):F.openKeyCursor(i(k),Z);q.onerror=Ge(C),q.onsuccess=mt(St=>{let j=q.result;if(!j){_(null);return}j.___id=++gS,j.done=!1;let se=j.continue.bind(j),ae=j.continuePrimaryKey;ae&&(ae=ae.bind(j));let zt=j.advance.bind(j),Gt=()=>{throw new Error("Cursor not started")},gt=()=>{throw new Error("Cursor not stopped")};j.trans=p,j.stop=j.continue=j.continuePrimaryKey=j.advance=Gt,j.fail=mt(C),j.next=function(){let Ie=1;return this.start(()=>Ie--?this.continue():this.stop()).then(()=>this)},j.start=Ie=>{let Ai=new Promise((wr,Pt)=>{wr=mt(wr),q.onerror=Ge(Pt),j.fail=Pt,j.stop=ce=>{j.stop=j.continue=j.continuePrimaryKey=j.advance=gt,wr(ce)}}),xr=()=>{if(q.result)try{Ie()}catch(wr){j.fail(wr)}else j.done=!0,j.start=()=>{throw new Error("Cursor behind last entry")},j.stop()};return q.onsuccess=mt(wr=>{q.onsuccess=xr,xr()}),j.continue=se,j.continuePrimaryKey=ae,j.advance=zt,xr(),Ai},_(j)},C)})}function m(p){return b=>new Promise((g,x)=>{g=mt(g);let{trans:w,values:_,limit:C,query:R}=b,k=C===1/0?void 0:C,{index:I,range:F}=R,Z=w.objectStore(d),q=I.isPrimaryKey?Z:Z.index(I.name),St=i(F);if(C===0)return g({result:[]});if(p){let j=_?q.getAll(St,k):q.getAllKeys(St,k);j.onsuccess=se=>g({result:se.target.result}),j.onerror=Ge(x)}else{let j=0,se=_||!("openKeyCursor"in q)?q.openCursor(St):q.openKeyCursor(St),ae=[];se.onsuccess=zt=>{let Gt=se.result;if(!Gt)return g({result:ae});if(ae.push(_?Gt.value:Gt.primaryKey),++j===C)return g({result:ae});Gt.continue()},se.onerror=Ge(x)}})}return{name:d,schema:u,mutate:h,getMany({trans:p,keys:b}){return new Promise((g,x)=>{g=mt(g);let w=p.objectStore(d),_=b.length,C=new Array(_),R=0,k=0,I,F=q=>{let St=q.target;(C[St._pos]=St.result)!=null,++k===R&&g(C)},Z=Ge(x);for(let q=0;q<_;++q)b[q]!=null&&(I=w.get(b[q]),I._pos=q,I.onsuccess=F,I.onerror=Z,++R);R===0&&g(C)})},get({trans:p,key:b}){return new Promise((g,x)=>{g=mt(g);let _=p.objectStore(d).get(b);_.onsuccess=C=>g(C.target.result),_.onerror=Ge(x)})},query:m(a),openCursor:f,count({query:p,trans:b}){let{index:g,range:x}=p;return new Promise((w,_)=>{let C=b.objectStore(d),R=g.isPrimaryKey?C:C.index(g.name),k=i(x),I=k?R.count(k):R.count();I.onsuccess=mt(F=>w(F.target.result)),I.onerror=Ge(_)})}}}let{schema:s,hasGetAll:a}=r(e,n),c=s.tables.map(u=>o(u)),l={};return c.forEach(u=>l[u.name]=u),{stack:"dbcore",transaction:e.transaction.bind(e),table(u){if(!l[u])throw new Error(`Table '${u}' not found`);return l[u]},MIN_KEY:-1/0,MAX_KEY:Uo(t),schema:s}}function bS(e,t){return t.reduce((n,{create:r})=>S(S({},n),r(n)),e)}function yS(e,t,{IDBKeyRange:n,indexedDB:r},i){return{dbcore:bS(vS(t,n,i),e.dbcore)}}function Ld({_novip:e},t){let n=t.db,r=yS(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(i=>{let o=i.name;e.core.schema.tables.some(s=>s.name===o)&&(i.core=e.core.table(o),e[o]instanceof e.Table&&(e[o].core=i.core))})}function oc({_novip:e},t,n,r){n.forEach(i=>{let o=r[i];t.forEach(s=>{let a=kd(s,i);(!a||"value"in a&&a.value===void 0)&&(s===e.Transaction.prototype||s instanceof e.Transaction?br(s,i,{get(){return this.table(i)},set(c){jv(this,i,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):s[i]=new e.Table(i,o))})})}function _d({_novip:e},t){t.forEach(n=>{for(let r in n)n[r]instanceof e.Table&&delete n[r]})}function _S(e,t){return e._cfg.version-t._cfg.version}function xS(e,t,n,r){let i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);let s=o._reject.bind(o),a=L.transless||L;Gr(()=>{L.trans=o,L.transless=a,t===0?(Ct(i).forEach(c=>{Fd(n,c,i[c].primKey,i[c].indexes)}),Ld(e,n),M.follow(()=>e.on.populate.fire(o)).catch(s)):wS(e,t,o,n).catch(s)})}function wS({_novip:e},t,n,r){let i=[],o=e._versions,s=e._dbSchema=Bd(e,e.idbdb,r),a=!1;o.filter(u=>u._cfg.version>=t).forEach(u=>{i.push(()=>{let d=s,h=u._cfg.dbschema;wd(e,d,r),wd(e,h,r),s=e._dbSchema=h;let f=hb(d,h);f.add.forEach(p=>{Fd(r,p[0],p[1].primKey,p[1].indexes)}),f.change.forEach(p=>{if(p.recreate)throw new B.Upgrade("Not yet support for changing primary key");{let b=r.objectStore(p.name);p.add.forEach(g=>xd(b,g)),p.change.forEach(g=>{b.deleteIndex(g.name),xd(b,g)}),p.del.forEach(g=>b.deleteIndex(g))}});let m=u._cfg.contentUpgrade;if(m&&u._cfg.version>t){Ld(e,r),n._memoizedTables={},a=!0;let p=Wv(h);f.del.forEach(w=>{p[w]=d[w]}),_d(e,[e.Transaction.prototype]),oc(e,[e.Transaction.prototype],Ct(p),p),n.schema=p;let b=Ad(m);b&&Ci();let g,x=M.follow(()=>{if(g=m(n),g&&b){var w=yr.bind(null,null);g.then(w,w)}});return g&&typeof g.then=="function"?M.resolve(g):x.then(()=>g)}}),i.push(d=>{if(!a||!JC){let h=u._cfg.dbschema;SS(h,d)}_d(e,[e.Transaction.prototype]),oc(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema})});function l(){return i.length?M.resolve(i.shift()(n.idbtrans)).then(l):M.resolve()}return l().then(()=>{CS(s,r)})}function hb(e,t){let n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){let i=e[r],o=t[r];if(!i)n.add.push([r,o]);else{let s={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!uc)s.recreate=!0,n.change.push(s);else{let a=i.idxByName,c=o.idxByName,l;for(l in a)c[l]||s.del.push(l);for(l in c){let u=a[l],d=c[l];u?u.src!==d.src&&s.change.push(d):s.add.push(d)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}}return n}function Fd(e,t,n,r){let i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(o=>xd(i,o)),i}function CS(e,t){Ct(e).forEach(n=>{t.db.objectStoreNames.contains(n)||Fd(t,n,e[n].primKey,e[n].indexes)})}function SS(e,t){[].slice.call(t.db.objectStoreNames).forEach(n=>e[n]==null&&t.db.deleteObjectStore(n))}function xd(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Bd(e,t,n){let r={};return cc(t.objectStoreNames,0).forEach(o=>{let s=n.objectStore(o),a=s.keyPath,c=bd(ub(a),a||"",!1,!1,!!s.autoIncrement,a&&typeof a!="string",!0),l=[];for(let d=0;d<s.indexNames.length;++d){let h=s.index(s.indexNames[d]);a=h.keyPath;var u=bd(h.name,a,!!h.unique,!!h.multiEntry,!1,a&&typeof a!="string",!1);l.push(u)}r[o]=db(o,c,l)}),r}function ES({_novip:e},t,n){e.verno=t.version/10;let r=e._dbSchema=Bd(e,t,n);e._storeNames=cc(t.objectStoreNames,0),oc(e,[e._allTables],Ct(r),r)}function RS(e,t){let n=Bd(e,e.idbdb,t),r=hb(n,e._dbSchema);return!(r.add.length||r.change.some(i=>i.add.length||i.change.length))}function wd({_novip:e},t,n){let r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){let o=r[i],s=n.objectStore(o);e._hasGetAll="getAll"in s;for(let a=0;a<s.indexNames.length;++a){let c=s.indexNames[a],l=s.index(c).keyPath,u=typeof l=="string"?l:"["+cc(l).join("+")+"]";if(t[o]){let d=t[o].idxByName[u];d&&(d.name=c,delete t[o].idxByName[u],t[o].idxByName[c]=d)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&dt.WorkerGlobalScope&&dt instanceof dt.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function OS(e){return e.split(",").map((t,n)=>{t=t.trim();let r=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return bd(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),Ut(i),n===0)})}var Cd=class{_parseStoresSpec(t,n){Ct(t).forEach(r=>{if(t[r]!==null){var i=OS(t[r]),o=i.shift();if(o.multi)throw new B.Schema("Primary key cannot be multi-valued");i.forEach(s=>{if(s.auto)throw new B.Schema("Only primary key can be marked as autoIncrement (++)");if(!s.keyPath)throw new B.Schema("Index must have a name and cannot be an empty string")}),n[r]=db(r,o,i)}})}stores(t){let n=this.db;this._cfg.storesSource=this._cfg.storesSource?Xt(this._cfg.storesSource,t):t;let r=n._versions,i={},o={};return r.forEach(s=>{Xt(i,s._cfg.storesSource),o=s._cfg.dbschema={},s._parseStoresSpec(i,o)}),n._dbSchema=o,_d(n,[n._allTables,n,n.Transaction.prototype]),oc(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],Ct(o),o),n._storeNames=Ct(o),this}upgrade(t){return this._cfg.contentUpgrade=Md(this._cfg.contentUpgrade||st,t),this}};function DS(e){return Yo(Cd.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function jd(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new _i(dc,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Ud(e){return e&&typeof e.databases=="function"}function kS({indexedDB:e,IDBKeyRange:t}){return Ud(e)?Promise.resolve(e.databases()).then(n=>n.map(r=>r.name).filter(r=>r!==dc)):jd(e,t).toCollection().primaryKeys()}function AS({indexedDB:e,IDBKeyRange:t},n){!Ud(e)&&n!==dc&&jd(e,t).put({name:n}).catch(st)}function IS({indexedDB:e,IDBKeyRange:t},n){!Ud(e)&&n!==dc&&jd(e,t).delete(n).catch(st)}function Sd(e){return Gr(function(){return L.letThrough=!0,e()})}function TS(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function MS(e){let t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?kt(t.dbOpenError):e);Ze&&(t.openCanceller._stackHolder=En()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;let r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new B.DatabaseClosed("db.open() was cancelled")}let o=t.dbReadyResolve,s=null,a=!1;return M.race([r,(typeof navigator>"u"?M.resolve():TS()).then(()=>new M((c,l)=>{if(i(),!n)throw new B.MissingAPI;let u=e.name,d=t.autoSchema?n.open(u):n.open(u,Math.round(e.verno*10));if(!d)throw new B.MissingAPI;d.onerror=Ge(l),d.onblocked=mt(e._fireOnBlocked),d.onupgradeneeded=mt(h=>{if(s=d.transaction,t.autoSchema&&!e._options.allowEmptyDB){d.onerror=Bo,s.abort(),d.result.close();let m=n.deleteDatabase(u);m.onsuccess=m.onerror=mt(()=>{l(new B.NoSuchDatabase(`Database ${u} doesnt exist`))})}else{s.onerror=Ge(l);var f=h.oldVersion>Math.pow(2,62)?0:h.oldVersion;a=f<1,e._novip.idbdb=d.result,xS(e,f/10,s,l)}},l),d.onsuccess=mt(()=>{s=null;let h=e._novip.idbdb=d.result,f=cc(h.objectStoreNames);if(f.length>0)try{let m=h.transaction(mS(f),"readonly");t.autoSchema?ES(e,h,m):(wd(e,e._dbSchema,m),RS(e,m)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Ld(e,m)}catch{}No.push(e),h.onversionchange=mt(m=>{t.vcFired=!0,e.on("versionchange").fire(m)}),h.onclose=mt(m=>{e.on("close").fire(m)}),a&&AS(e._deps,u),c()},l)}))]).then(()=>(i(),t.onReadyBeingFired=[],M.resolve(Sd(()=>e.on.ready.fire(e.vip))).then(function c(){if(t.onReadyBeingFired.length>0){let l=t.onReadyBeingFired.reduce(Md,st);return t.onReadyBeingFired=[],M.resolve(Sd(()=>l(e.vip))).then(c)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(c=>{t.dbOpenError=c;try{s&&s.abort()}catch{}return r===t.openCanceller&&e._close(),kt(c)}).finally(()=>{t.openComplete=!0,o()})}function Ed(e){var t=s=>e.next(s),n=s=>e.throw(s),r=o(t),i=o(n);function o(s){return a=>{var c=s(a),l=c.value;return c.done?l:!l||typeof l.then!="function"?Ut(l)?Promise.all(l).then(r,i):r(l):l.then(r,i)}}return o(t)()}function PS(e,t,n){var r=arguments.length;if(r<2)throw new B.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=Hv(i);return[e,o,n]}function fb(e,t,n,r,i){return M.resolve().then(()=>{let o=L.transless||L,s=e._createTransaction(t,n,e._dbSchema,r),a={trans:s,transless:o};if(r)s.idbtrans=r.idbtrans;else try{s.create(),e._state.PR1398_maxLoop=3}catch(d){return d.name===Td.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>fb(e,t,n,null,i))):kt(d)}let c=Ad(i);c&&Ci();let l,u=M.follow(()=>{if(l=i.call(s,s),l)if(c){var d=yr.bind(null,null);l.then(d,d)}else typeof l.next=="function"&&typeof l.throw=="function"&&(l=Ed(l))},a);return(l&&typeof l.then=="function"?M.resolve(l).then(d=>s.active?d:kt(new B.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):u.then(()=>l)).then(d=>(r&&s._resolve(),s._completion.then(()=>d))).catch(d=>(s._reject(d),kt(d)))})}function Ha(e,t,n){let r=Ut(e)?e.slice():[e];for(let i=0;i<n;++i)r.push(t);return r}function NS(e){return Q(S({},e),{table(t){let n=e.table(t),{schema:r}=n,i={},o=[];function s(h,f,m){let p=$o(h),b=i[p]=i[p]||[],g=h==null?0:typeof h=="string"?1:h.length,x=f>0,w=Q(S({},m),{isVirtual:x,keyTail:f,keyLength:g,extractKey:yd(h),unique:!x&&m.unique});if(b.push(w),w.isPrimaryKey||o.push(w),g>1){let _=g===2?h[0]:h.slice(0,g-1);s(_,f+1,m)}return b.sort((_,C)=>_.keyTail-C.keyTail),w}let a=s(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[a];for(let h of r.indexes)s(h.keyPath,0,h);function c(h){let f=i[$o(h)];return f&&f[0]}function l(h,f){return{type:h.type===1?2:h.type,lower:Ha(h.lower,h.lowerOpen?e.MAX_KEY:e.MIN_KEY,f),lowerOpen:!0,upper:Ha(h.upper,h.upperOpen?e.MIN_KEY:e.MAX_KEY,f),upperOpen:!0}}function u(h){let f=h.query.index;return f.isVirtual?Q(S({},h),{query:{index:f,range:l(h.query.range,f.keyTail)}}):h}return Q(S({},n),{schema:Q(S({},r),{primaryKey:a,indexes:o,getIndexByKeyPath:c}),count(h){return n.count(u(h))},query(h){return n.query(u(h))},openCursor(h){let{keyTail:f,isVirtual:m,keyLength:p}=h.query.index;if(!m)return n.openCursor(h);function b(g){function x(_){_!=null?g.continue(Ha(_,h.reverse?e.MAX_KEY:e.MIN_KEY,f)):h.unique?g.continue(g.key.slice(0,p).concat(h.reverse?e.MIN_KEY:e.MAX_KEY,f)):g.continue()}return Object.create(g,{continue:{value:x},continuePrimaryKey:{value(_,C){g.continuePrimaryKey(Ha(_,e.MAX_KEY,f),C)}},primaryKey:{get(){return g.primaryKey}},key:{get(){let _=g.key;return p===1?_[0]:_.slice(0,p)}},value:{get(){return g.value}}})}return n.openCursor(u(h)).then(g=>g&&b(g))}})}})}var $S={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:NS};function zd(e,t,n,r){return n=n||{},r=r||"",Ct(e).forEach(i=>{if(!Ce(t,i))n[r+i]=void 0;else{var o=e[i],s=t[i];if(typeof o=="object"&&typeof s=="object"&&o&&s){let a=rd(o),c=rd(s);a!==c?n[r+i]=t[i]:a==="Object"?zd(o,s,n,r+i+"."):o!==s&&(n[r+i]=t[i])}else o!==s&&(n[r+i]=t[i])}}),Ct(t).forEach(i=>{Ce(e,i)||(n[r+i]=t[i])}),n}function LS(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var FS={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>Q(S({},e),{table(t){let n=e.table(t),{primaryKey:r}=n.schema;return Q(S({},n),{mutate(o){let s=L.trans,{deleting:a,creating:c,updating:l}=s.table(t).hook;switch(o.type){case"add":if(c.fire===st)break;return s._promise("readwrite",()=>u(o),!0);case"put":if(c.fire===st&&l.fire===st)break;return s._promise("readwrite",()=>u(o),!0);case"delete":if(a.fire===st)break;return s._promise("readwrite",()=>u(o),!0);case"deleteRange":if(a.fire===st)break;return s._promise("readwrite",()=>d(o),!0)}return n.mutate(o);function u(f){let m=L.trans,p=f.keys||LS(r,f);if(!p)throw new Error("Keys missing");return f=f.type==="add"||f.type==="put"?Q(S({},f),{keys:p}):S({},f),f.type!=="delete"&&(f.values=[...f.values]),f.keys&&(f.keys=[...f.keys]),BS(n,f,p).then(b=>{let g=p.map((x,w)=>{let _=b[w],C={onerror:null,onsuccess:null};if(f.type==="delete")a.fire.call(C,x,_,m);else if(f.type==="add"||_===void 0){let R=c.fire.call(C,x,f.values[w],m);x==null&&R!=null&&(x=R,f.keys[w]=x,r.outbound||Ae(f.values[w],r.keyPath,x))}else{let R=zd(_,f.values[w]),k=l.fire.call(C,R,x,_,m);if(k){let I=f.values[w];Object.keys(k).forEach(F=>{Ce(I,F)?I[F]=k[F]:Ae(I,F,k[F])})}}return C});return n.mutate(f).then(({failures:x,results:w,numFailures:_,lastResult:C})=>{for(let R=0;R<p.length;++R){let k=w?w[R]:p[R],I=g[R];k==null?I.onerror&&I.onerror(x[R]):I.onsuccess&&I.onsuccess(f.type==="put"&&b[R]?f.values[R]:k)}return{failures:x,results:w,numFailures:_,lastResult:C}}).catch(x=>(g.forEach(w=>w.onerror&&w.onerror(x)),Promise.reject(x)))})}function d(f){return h(f.trans,f.range,1e4)}function h(f,m,p){return n.query({trans:f,values:!1,query:{index:r,range:m},limit:p}).then(({result:b})=>u({type:"delete",keys:b,trans:f}).then(g=>g.numFailures>0?Promise.reject(g.failures[0]):b.length<p?{failures:[],numFailures:0,lastResult:void 0}:h(f,Q(S({},m),{lower:b[b.length-1],lowerOpen:!0}),p)))}}})}})};function BS(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function mb(e,t,n){try{if(!t||t.keys.length<e.length)return null;let r=[];for(let i=0,o=0;i<t.keys.length&&o<e.length;++i)Qt(t.keys[i],e[o])===0&&(r.push(n?Vo(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch{return null}}var jS={stack:"dbcore",level:-1,create:e=>({table:t=>{let n=e.table(t);return Q(S({},n),{getMany:r=>{if(!r.cache)return n.getMany(r);let i=mb(r.keys,r.trans._cache,r.cache==="clone");return i?M.resolve(i):n.getMany(r).then(o=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?Vo(o):o},o))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))})}})};function Vd(e){return!("from"in e)}var mr=function(e,t){if(this)Xt(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{let n=new mr;return e&&"d"in e&&Xt(n,e),n}};yi(mr.prototype,{add(e){return sc(this,e),this},addKey(e){return zo(this,e,e),this},addKeys(e){return e.forEach(t=>zo(this,t,t)),this},[nd](){return Rd(this)}});function zo(e,t,n){let r=Qt(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Vd(e))return Xt(e,{from:t,to:n,d:1});let i=e.l,o=e.r;if(Qt(n,e.from)<0)return i?zo(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Fv(e);if(Qt(t,e.to)>0)return o?zo(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Fv(e);Qt(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),Qt(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);let s=!e.r;i&&!e.l&&sc(e,i),o&&s&&sc(e,o)}function sc(e,t){function n(r,{from:i,to:o,l:s,r:a}){zo(r,i,o),s&&n(r,s),a&&n(r,a)}Vd(t)||n(e,t)}function US(e,t){let n=Rd(t),r=n.next();if(r.done)return!1;let i=r.value,o=Rd(e),s=o.next(i.from),a=s.value;for(;!r.done&&!s.done;){if(Qt(a.from,i.to)<=0&&Qt(a.to,i.from)>=0)return!0;Qt(i.from,a.from)<0?i=(r=n.next(a.from)).value:a=(s=o.next(i.from)).value}return!1}function Rd(e){let t=Vd(e)?null:{s:0,n:e};return{next(n){let r=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&Qt(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||Qt(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Fv(e){var t,n;let r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){let o=i==="r"?"l":"r",s=S({},e),a=e[i];e.from=a.from,e.to=a.to,e[i]=a[i],s[i]=a[o],e[o]=s,s.d=Bv(s)}e.d=Bv(e)}function Bv({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}var zS={stack:"dbcore",level:0,create:e=>{let t=e.schema.name,n=new mr(e.MIN_KEY,e.MAX_KEY);return Q(S({},e),{table:r=>{let i=e.table(r),{schema:o}=i,{primaryKey:s}=o,{extractKey:a,outbound:c}=s,l=Q(S({},i),{mutate:h=>{let f=h.trans,m=f.mutatedParts||(f.mutatedParts={}),p=R=>{let k=`idb://${t}/${r}/${R}`;return m[k]||(m[k]=new mr)},b=p(""),g=p(":dels"),{type:x}=h,[w,_]=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[],C=h.trans._cache;return i.mutate(h).then(R=>{if(Ut(w)){x!=="delete"&&(w=R.results),b.addKeys(w);let k=mb(w,C);!k&&x!=="add"&&g.addKeys(w),(k||_)&&VS(p,o,k,_)}else if(w){let k={from:w.lower,to:w.upper};g.add(k),b.add(k)}else b.add(n),g.add(n),o.indexes.forEach(k=>p(k.name).add(n));return R})}}),u=({query:{index:h,range:f}})=>{var m,p;return[h,new mr((m=f.lower)!==null&&m!==void 0?m:e.MIN_KEY,(p=f.upper)!==null&&p!==void 0?p:e.MAX_KEY)]},d={get:h=>[s,new mr(h.key)],getMany:h=>[s,new mr().addKeys(h.keys)],count:u,query:u,openCursor:u};return Ct(d).forEach(h=>{l[h]=function(f){let{subscr:m}=L;if(m){let p=_=>{let C=`idb://${t}/${r}/${_}`;return m[C]||(m[C]=new mr)},b=p(""),g=p(":dels"),[x,w]=d[h](f);if(p(x.name||"").add(w),!x.isPrimaryKey)if(h==="count")g.add(n);else{let _=h==="query"&&c&&f.values&&i.query(Q(S({},f),{values:!1}));return i[h].apply(this,arguments).then(C=>{if(h==="query"){if(c&&f.values)return _.then(({result:k})=>(b.addKeys(k),C));let R=f.values?C.result.map(a):C.result;f.values?b.addKeys(R):g.addKeys(R)}else if(h==="openCursor"){let R=C,k=f.values;return R&&Object.create(R,{key:{get(){return g.addKey(R.primaryKey),R.key}},primaryKey:{get(){let I=R.primaryKey;return g.addKey(I),I}},value:{get(){return k&&b.addKey(R.primaryKey),R.value}}})}return C})}}return i[h].apply(this,arguments)}}),l}})}};function VS(e,t,n,r){function i(o){let s=e(o.name||"");function a(l){return l!=null?o.extractKey(l):null}let c=l=>o.multiEntry&&Ut(l)?l.forEach(u=>s.addKey(u)):s.addKey(l);(n||r).forEach((l,u)=>{let d=n&&a(n[u]),h=r&&a(r[u]);Qt(d,h)!==0&&(d!=null&&c(d),h!=null&&c(h))})}t.indexes.forEach(i)}var _i=class e{constructor(t,n){this._middlewares={},this.verno=0;let r=e.dependencies;this._options=n=S({addons:e.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};let{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;let o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:st,dbReadyPromise:null,cancelOpen:st,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};o.dbReadyPromise=new M(s=>{o.dbReadyResolve=s}),o.openCanceller=new M((s,a)=>{o.cancelOpen=a}),this._state=o,this.name=t,this.on=qo(this,"populate","blocked","versionchange","close",{ready:[Md,st]}),this.on.ready.subscribe=Uv(this.on.ready.subscribe,s=>(a,c)=>{e.vip(()=>{let l=this._state;if(l.openComplete)l.dbOpenError||M.resolve().then(a),c&&s(a);else if(l.onReadyBeingFired)l.onReadyBeingFired.push(a),c&&s(a);else{s(a);let u=this;c||s(function d(){u.on.ready.unsubscribe(a),u.on.ready.unsubscribe(d)})}})}),this.Collection=sS(this),this.Table=rS(this),this.Transaction=fS(this),this.Version=DS(this),this.WhereClause=hS(this),this.on("versionchange",s=>{s.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",s=>{!s.newVersion||s.newVersion<s.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${s.oldVersion/10}`)}),this._maxKey=Uo(n.IDBKeyRange),this._createTransaction=(s,a,c,l)=>new this.Transaction(s,a,c,this._options.chromeTransactionDurability,l),this._fireOnBlocked=s=>{this.on("blocked").fire(s),No.filter(a=>a.name===this.name&&a!==this&&!a._state.vcFired).map(a=>a.on("versionchange").fire(s))},this.use($S),this.use(FS),this.use(zS),this.use(jS),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(s=>s(this))}version(t){if(isNaN(t)||t<.1)throw new B.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new B.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);let n=this._versions;var r=n.filter(i=>i._cfg.version===t)[0];return r||(r=new this.Version(t),n.push(r),n.sort(_S),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(t){return this.idbdb&&(this._state.openComplete||L.letThrough||this._vip)?t():new M((n,r)=>{if(this._state.openComplete)return r(new B.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen){r(new B.DatabaseClosed);return}this.open().catch(st)}this._state.dbReadyPromise.then(n,r)}).then(t)}use({stack:t,create:n,level:r,name:i}){i&&this.unuse({stack:t,name:i});let o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:n,level:r??10,name:i}),o.sort((s,a)=>s.level-a.level),this}unuse({stack:t,name:n,create:r}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(i=>r?i.create!==r:n?i.name!==n:!1)),this}open(){return MS(this)}_close(){let t=this._state,n=No.indexOf(this);if(n>=0&&No.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new M(r=>{t.dbReadyResolve=r}),t.openCanceller=new M((r,i)=>{t.cancelOpen=i})}close(){this._close();let t=this._state;this._options.autoOpen=!1,t.dbOpenError=new B.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){let t=arguments.length>0,n=this._state;return new M((r,i)=>{let o=()=>{this.close();var s=this._deps.indexedDB.deleteDatabase(this.name);s.onsuccess=mt(()=>{IS(this._deps,this.name),r()}),s.onerror=Ge(i),s.onblocked=this._fireOnBlocked};if(t)throw new B.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){let t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Ct(this._allTables).map(t=>this._allTables[t])}transaction(){let t=PS.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,n,r){let i=L.trans;(!i||i.db!==this||t.indexOf("!")!==-1)&&(i=null);let o=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");let s,a;try{if(a=n.map(l=>{var u=l instanceof this.Table?l.name:l;if(typeof u!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return u}),t=="r"||t===Xu)s=Xu;else if(t=="rw"||t==Gu)s=Gu;else throw new B.InvalidArgument("Invalid transaction mode: "+t);if(i){if(i.mode===Xu&&s===Gu)if(o)i=null;else throw new B.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i&&a.forEach(l=>{if(i&&i.storeNames.indexOf(l)===-1)if(o)i=null;else throw new B.SubTransaction("Table "+l+" not included in parent transaction.")}),o&&i&&!i.active&&(i=null)}}catch(l){return i?i._promise(null,(u,d)=>{d(l)}):kt(l)}let c=fb.bind(null,this,s,a,i,r);return i?i._promise(s,c,"lock"):L.trans?Si(L.transless,()=>this._whenReady(c)):this._whenReady(c)}table(t){if(!Ce(this._allTables,t))throw new B.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}},WS=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Od=class{constructor(t){this._subscribe=t}subscribe(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)}[WS](){return this}};function pb(e,t){return Ct(t).forEach(n=>{let r=e[n]||(e[n]=new mr);sc(r,t[n])}),e}function HS(e){return new Od(t=>{let n=Ad(e);function r(f){n&&Ci();let m=()=>Gr(e,{subscr:f,trans:null}),p=L.trans?Si(L.transless,m):m();return n&&p.then(yr,yr),p}let i=!1,o={},s={},a={get closed(){return i},unsubscribe:()=>{i=!0,Jr.storagemutated.unsubscribe(d)}};t.start&&t.start(a);let c=!1,l=!1;function u(){return Ct(s).some(f=>o[f]&&US(o[f],s[f]))}let d=f=>{pb(o,f),u()&&h()},h=()=>{if(c||i)return;o={};let f={},m=r(f);l||(Jr(jo,d),l=!0),c=!0,Promise.resolve(m).then(p=>{c=!1,!i&&(u()?h():(o={},s=f,t.next&&t.next(p)))},p=>{["DatabaseClosedError","AbortError"].includes(p?.name)||(c=!1,t.error&&t.error(p),a.unsubscribe())})};return h(),a})}var Dd;try{Dd={indexedDB:dt.indexedDB||dt.mozIndexedDB||dt.webkitIndexedDB||dt.msIndexedDB,IDBKeyRange:dt.IDBKeyRange||dt.webkitIDBKeyRange}}catch{Dd={indexedDB:null,IDBKeyRange:null}}var yn=_i;yi(yn,Q(S({},lc),{delete(e){return new yn(e,{addons:[]}).delete()},exists(e){return new yn(e,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1)},getDatabaseNames(e){try{return kS(yn.dependencies).then(e)}catch{return kt(new B.MissingAPI)}},defineClass(){function e(t){Xt(this,t)}return e},ignoreTransaction(e){return L.trans?Si(L.transless,e):e()},vip:Sd,async:function(e){return function(){try{var t=Ed(e.apply(this,arguments));return!t||typeof t.then!="function"?M.resolve(t):t}catch(n){return kt(n)}}},spawn:function(e,t,n){try{var r=Ed(e.apply(n,t||[]));return!r||typeof r.then!="function"?M.resolve(r):r}catch(i){return kt(i)}},currentTransaction:{get:()=>L.trans||null},waitFor:function(e,t){let n=M.resolve(typeof e=="function"?yn.ignoreTransaction(e):e).timeout(t||6e4);return L.trans?L.trans.waitFor(n):n},Promise:M,debug:{get:()=>Ze,set:e=>{qv(e,e==="dexie"?()=>!0:ab)}},derive:xi,extend:Xt,props:yi,override:Uv,Events:qo,on:Jr,liveQuery:HS,extendObservabilitySet:pb,getByKeyPath:vr,setByKeyPath:Ae,delByKeyPath:OC,shallowClone:Wv,deepClone:Vo,getObjectDiff:zd,cmp:Qt,asap:zv,minKey:md,addons:[],connections:No,errnames:Td,dependencies:Dd,semVer:Tv,version:Tv.split(".").map(e=>parseInt(e)).reduce((e,t,n)=>e+t/Math.pow(10,n*2))}));yn.maxKey=Uo(yn.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Jr(jo,e=>{if(!gr){let t;uc?(t=document.createEvent("CustomEvent"),t.initCustomEvent(Xr,!0,!0,e)):t=new CustomEvent(Xr,{detail:e}),gr=!0,dispatchEvent(t),gr=!1}}),addEventListener(Xr,({detail:e})=>{gr||ac(e)}));function ac(e){let t=gr;try{gr=!0,Jr.storagemutated.fire(e)}finally{gr=t}}var gr=!1;if(typeof BroadcastChannel<"u"){let e=new BroadcastChannel(Xr);typeof e.unref=="function"&&e.unref(),Jr(jo,t=>{gr||e.postMessage(t)}),e.onmessage=t=>{t.data&&ac(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Jr(jo,t=>{try{gr||(typeof localStorage<"u"&&localStorage.setItem(Xr,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:Xr,changedParts:t})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",t=>{if(t.key===Xr){let n=JSON.parse(t.newValue);n&&ac(n.changedParts)}});let e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",KS)}function KS({data:e}){e&&e.type===Xr&&ac(e.changedParts)}M.rejectionMapper=$C;qv(Ze,ab);var Qo="docs",qS="changes",gb="attachments",fc="dexie",vb=new Map,hc=new Map;function bb(e,t,n,r){var i="rxdb-dexie-"+e+"--"+r.version+"--"+t,o=Ht(vb,i,()=>{var s=(()=>O(this,null,function*(){var a=J(n);a.autoOpen=!1;var c=new _i(i,a),l={[Qo]:YS(r),[qS]:"++sequence, id",[gb]:"id"};return c.version(1).stores(l),yield c.open(),{dexieDb:c,dexieTable:c[Qo],dexieAttachmentsTable:c[gb],booleanIndexes:QS(r)}}))();return vb.set(i,o),hc.set(o,0),s});return o}function yb(e){return O(this,null,function*(){var t=yield e,n=hc.get(e),r=n-1;r===0?(t.dexieDb.close(),hc.delete(e)):hc.set(e,r)})}var Wd="__";function Ei(e){var t=e.split(".");if(t.length>1)return t.map(r=>Ei(r)).join(".");if(e.startsWith("|")){var n=e.substring(1);return Wd+n}else return e}function _b(e){var t=e.split(".");if(t.length>1)return t.map(r=>_b(r)).join(".");if(e.startsWith(Wd)){var n=e.substring(Wd.length);return"|"+n}else return e}function xb(e,t){return t&&(t=J(t),t=Hd(t),e.forEach(n=>{var r=re(t,n),i=r?"1":"0";zl(t,n,i)}),t)}function qd(e,t){return t&&(t=J(t),t=Kd(t),e.forEach(n=>{var r=re(t,n),i=r==="1";zl(t,n,i)}),t)}function Hd(e){if(!e||typeof e=="string"||typeof e=="number"||typeof e=="boolean")return e;if(Array.isArray(e))return e.map(n=>Hd(n));if(typeof e=="object"){var t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="object"&&(r=Hd(r)),t[Ei(n)]=r}),t}}function Kd(e){if(!e||typeof e=="string"||typeof e=="number"||typeof e=="boolean")return e;if(Array.isArray(e))return e.map(n=>Kd(n));if(typeof e=="object"){var t={};return Object.entries(e).forEach(([n,r])=>{(typeof r=="object"||Array.isArray(e))&&(r=Kd(r)),t[_b(n)]=r}),t}}function YS(e){var t=[],n=Kt(e.primaryKey);t.push([n]),t.push(["_deleted",n]),e.indexes&&e.indexes.forEach(o=>{var s=lo(o);t.push(s)}),t.push(["_meta.lwt",n]),t.push(["_meta.lwt"]),t=t.map(o=>o.map(s=>Ei(s)));var r=t.map(o=>o.length===1?o[0]:"["+o.join("+")+"]");r=r.filter((o,s,a)=>a.indexOf(o)===s);var i=r.join(", ");return i}function Yd(e,t){return O(this,null,function*(){var n=yield e,r=yield n.dexieTable.bulkGet(t);return r.map(i=>qd(n.booleanIndexes,i))})}function Xo(e,t){return e+"||"+t}function QS(e){var t=new Set,n=[];return e.indexes?(e.indexes.forEach(r=>{var i=lo(r);i.forEach(o=>{if(!t.has(o)){t.add(o);var s=ne(e,o);s.type==="boolean"&&n.push(o)}})}),n.push("_deleted"),bm(n)):n}function wb(e){return e===mn?-1/0:e}function Cb(e,t,n){if(e.includes(t)){var r=n===fn||n===!0?"1":"0";return r}else return n}function Sb(e,t,n){if(!n){if(typeof window>"u")throw new Error("IDBKeyRange missing");n=window.IDBKeyRange}var r=t.startKeys.map((s,a)=>{var c=t.index[a];return Cb(e,c,s)}).map(wb),i=t.endKeys.map((s,a)=>{var c=t.index[a];return Cb(e,c,s)}).map(wb),o=n.bound(r,i,!t.inclusiveStart,!t.inclusiveEnd);return o}function Qd(e,t){return O(this,null,function*(){var n=yield e.internals,r=t.query,i=r.skip?r.skip:0,o=r.limit?r.limit:1/0,s=i+o,a=t.queryPlan,c=!1;a.selectorSatisfiedByIndex||(c=li(e.schema,t.query));var l=Sb(n.booleanIndexes,a,n.dexieDb._options.IDBKeyRange),u=a.index,d=[];if(yield n.dexieDb.transaction("r",n.dexieTable,f=>O(this,null,function*(){var m=f.idbtrans,p=m.objectStore(Qo),b,g;g="["+u.map(w=>Ei(w)).join("+")+"]",b=p.index(g);var x=b.openCursor(l);yield new Promise(w=>{x.onsuccess=function(_){var C=_.target.result;if(C){var R=qd(n.booleanIndexes,C.value);(!c||c(R))&&d.push(R),a.sortSatisfiedByIndex&&d.length===s?w():C.continue()}else w()}})})),!a.sortSatisfiedByIndex){var h=xa(e.schema,t.query);d=d.sort(h)}return d=d.slice(i,s),{documents:d}})}function Eb(e,t){return O(this,null,function*(){var n=yield e.internals,r=t.queryPlan,i=r.index,o=Sb(n.booleanIndexes,r,n.dexieDb._options.IDBKeyRange),s=-1;return yield n.dexieDb.transaction("r",n.dexieTable,a=>O(this,null,function*(){var c=a.idbtrans,l=c.objectStore(Qo),u,d;d="["+i.map(f=>Ei(f)).join("+")+"]",u=l.index(d);var h=u.count(o);s=yield new Promise((f,m)=>{h.onsuccess=function(){f(h.result)},h.onerror=p=>m(p)})})),s})}var XS=Ot(),GS=function(){function e(n,r,i,o,s,a,c){this.changes$=new U,this.instanceId=XS++,this.storage=n,this.databaseName=r,this.collectionName=i,this.schema=o,this.internals=s,this.options=a,this.settings=c,this.primaryPath=Kt(this.schema.primaryKey)}var t=e.prototype;return t.bulkWrite=function(r,i){return O(this,null,function*(){Rn(this),r.forEach(u=>{if(!u.document._rev||u.previous&&!u.previous._rev)throw y("SNH",{args:{row:u}})});var o=yield this.internals,s={success:[],error:[]},a=r.map(u=>u.document[this.primaryPath]),c;if(yield o.dexieDb.transaction("rw",o.dexieTable,o.dexieAttachmentsTable,()=>O(this,null,function*(){var u=new Map,d=yield Yd(this.internals,a);d.forEach(m=>{var p=m;return p&&u.set(p[this.primaryPath],p),p}),c=Eg(this,this.primaryPath,u,r,i),s.error=c.errors;var h=[];c.bulkInsertDocs.forEach(m=>{s.success.push(m.document),h.push(m.document)}),c.bulkUpdateDocs.forEach(m=>{s.success.push(m.document),h.push(m.document)}),h=h.map(m=>xb(o.booleanIndexes,m)),h.length>0&&(yield o.dexieTable.bulkPut(h));var f=[];c.attachmentsAdd.forEach(m=>{f.push({id:Xo(m.documentId,m.attachmentId),data:m.attachmentData.data})}),c.attachmentsUpdate.forEach(m=>{f.push({id:Xo(m.documentId,m.attachmentId),data:m.attachmentData.data})}),yield o.dexieAttachmentsTable.bulkPut(f),yield o.dexieAttachmentsTable.bulkDelete(c.attachmentsRemove.map(m=>Xo(m.documentId,m.attachmentId)))})),c=rt(c),c.eventBulk.events.length>0){var l=rt(c.newestRow).document;c.eventBulk.checkpoint={id:l[this.primaryPath],lwt:l._meta.lwt},c.eventBulk.endTime=Ot(),this.changes$.next(c.eventBulk)}return s})},t.findDocumentsById=function(r,i){return O(this,null,function*(){Rn(this);var o=yield this.internals,s=[];return yield o.dexieDb.transaction("r",o.dexieTable,()=>O(this,null,function*(){var a=yield Yd(this.internals,r);a.forEach(c=>{c&&(!c._deleted||i)&&s.push(c)})})),s})},t.query=function(r){return Rn(this),Qd(this,r)},t.count=function(r){return O(this,null,function*(){if(r.queryPlan.selectorSatisfiedByIndex){var i=yield Eb(this,r);return{count:i,mode:"fast"}}else{var o=yield Qd(this,r);return{count:o.documents.length,mode:"slow"}}})},t.changeStream=function(){return Rn(this),this.changes$.asObservable()},t.cleanup=function(r){return O(this,null,function*(){Rn(this);var i=yield this.internals;return yield i.dexieDb.transaction("rw",i.dexieTable,()=>O(this,null,function*(){var o=Ot()-r,s=yield i.dexieTable.where("_meta.lwt").below(o).toArray(),a=[];s.forEach(c=>{c._deleted==="1"&&a.push(c[this.primaryPath])}),yield i.dexieTable.bulkDelete(a)})),!0})},t.getAttachmentData=function(r,i,o){return O(this,null,function*(){Rn(this);var s=yield this.internals,a=Xo(r,i);return yield s.dexieDb.transaction("r",s.dexieAttachmentsTable,()=>O(this,null,function*(){var c=yield s.dexieAttachmentsTable.get(a);if(c)return c.data;throw new Error("attachment missing documentId: "+r+" attachmentId: "+i)}))})},t.remove=function(){return O(this,null,function*(){Rn(this);var r=yield this.internals;return yield r.dexieTable.clear(),this.close()})},t.close=function(){return this.closed?this.closed:(this.closed=(()=>O(this,null,function*(){this.changes$.complete(),yield yb(this.internals)}))(),this.closed)},t.conflictResultionTasks=function(){return new U},t.resolveConflictResultionTask=function(r){return O(this,null,function*(){})},e}();function Rb(e,t,n){return O(this,null,function*(){var r=bb(t.databaseName,t.collectionName,n,t.schema),i=new GS(e,t.databaseName,t.collectionName,t.schema,r,t.options,n);return yield fv(fc,t,i),Promise.resolve(i)})}function Rn(e){if(e.closed)throw new Error("RxStorageInstanceDexie is closed "+e.databaseName+"-"+e.collectionName)}var ZS=function(){function e(n){this.name=fc,this.rxdbVersion=uo,this.settings=n}var t=e.prototype;return t.createStorageInstance=function(r){return Rg(r),Rb(this,r,this.settings)},e}();function Ob(e={}){var t=new ZS(e);return t}var mc={};ty(mc,{$addToSet:()=>tE,$bit:()=>rE,$currentDate:()=>nE,$inc:()=>iE,$max:()=>oE,$min:()=>sE,$mul:()=>aE,$pop:()=>cE,$pull:()=>Xd,$pullAll:()=>lE,$push:()=>dE,$rename:()=>hE,$set:()=>Gd,$unset:()=>fE});var Ri=(e,t)=>{switch(e){case"deep":return ii(t);case"copy":return vn(t)?new Date(t):$(t)?[...t]:V(t)?Object.assign({},t):t;default:return t}},JS=/^[a-z]+[a-zA-Z0-9]*$/;function Db(e){if(!e.includes(".$"))return[{parent:e,selector:e},[]];let t=e.indexOf(".$"),n=e.indexOf("]"),r=e.substring(0,t),i=e.substring(t+3,n);E(i===""||JS.test(i),"The filter <identifier> must begin with a lowercase letter and contain only alphanumeric characters.");let o=e.substring(n+2),[s,a]=o?Db(o):[];return[{selector:e,parent:r,child:i||"$",next:s},[i,...a||[]].filter(Boolean)]}var at=(e,t,n,r,i)=>{let{parent:o,child:s,next:a}=t;if(!s){let l=!1;return ni(e,o,(d,h)=>l=!!r(d,h)||l,i),l}let c=qt(e,o);return $(c)?c.map((l,u)=>n[s]&&!n[s].test({[s]:l})?!1:a?at(l,a,n,r,i):r(c,u)).some(Boolean):!1};function ut(e,t,n,r){let i=[];for(let[o,s]of Object.entries(e)){let[a,c]=Db(o);if(!c.length)r(s,a,{})&&i.push(a.parent);else{let l={};t.forEach(d=>{Object.keys(d).forEach(h=>{c.forEach(f=>{(h===f||h.startsWith(f+"."))&&(l[f]=l[f]||{},Object.assign(l[f],{[h]:d[h]}))})})});let u={};for(let[d,h]of Object.entries(l))u[d]=new Dt(h,n.queryOptions);r(s,a,u)&&i.push(a.parent)}}return i}var tE=(e,t,n=[],r={})=>ut(t,n,r,(i,o,s)=>{let a={$each:[i]};return V(i)&&ft(i,"$each")&&Object.assign(a,i),at(e,o,s,(c,l)=>{let u=c[l]||(c[l]=[]);return cr([u,a.$each]).length===a.$each.length?!1:(c[l]=Ri(r.cloneMode,xo(u.concat(a.$each))),!0)},{buildGraph:!0})});var eE=new Set(["and","or","xor"]),rE=(e,t,n=[],r={})=>ut(t,n,r,(i,o,s)=>{let a=Object.keys(i);return E(a.length===1&&eE.has(a[0]),`Invalid bit operator '${a[0]}'. Must be one of 'and', 'or', or 'xor'.`),at(e,o,s,(c,l)=>{let u=c[l],d=i[a[0]];if(u!==void 0&&!(W(u)&&W(d)))return!1;switch(u=u||0,a[0]){case"and":c[l]=u&d;break;case"or":c[l]=u|d;break;case"xor":c[l]=u^d;break}return c[l]!==u},{buildGraph:!0})});var nE=(e,t,n=[],r={})=>{let i=Date.now();return ut(t,n,r,(o,s,a)=>at(e,s,a,(c,l)=>(c[l]=i,!0),{buildGraph:!0}))};var iE=(e,t,n=[],r={})=>ut(t,n,r,(i,o,s)=>{if(!o.child){let a=qt(e,o.parent);E(a===void 0||W(a),"cannot apply $inc to a value of non-numeric type")}return at(e,o,s,(a,c)=>(a[c]=(a[c]||(a[c]=0))+i,!0),{buildGraph:!0})});var oE=(e,t,n=[],r={})=>ut(t,n,r,(i,o,s)=>at(e,o,s,(a,c)=>a[c]!==void 0&&ct(a[c],i)>-1?!1:(a[c]=i,!0),{buildGraph:!0}));var sE=(e,t,n=[],r={})=>ut(t,n,r,(i,o,s)=>at(e,o,s,(a,c)=>a[c]!==void 0&&ct(a[c],i)<1?!1:(a[c]=i,!0),{buildGraph:!0}));var aE=(e,t,n=[],r={})=>ut(t,n,r,(i,o,s)=>at(e,o,s,(a,c)=>{let l=a[c];return a[c]=a[c]===void 0?0:a[c]*i,a[c]!==l},{buildGraph:!0}));var cE=(e,t,n=[],r={})=>ut(t,n,r,(i,o,s)=>at(e,o,s,(a,c)=>{let l=a[c];return E($(l),`path '${o.selector}' contains an element of non-array type.`),l.length?(i===-1?l.splice(0,1):l.pop(),!0):!1}));var Xd=(e,t,n=[],r={})=>ut(t,n,r,(i,o,s)=>{let a=!V(i)||Object.keys(i).some(fe),c=new Dt(a?{k:i}:i,r.queryOptions),l=a?u=>c.test({k:u}):u=>c.test(u);return at(e,o,s,(u,d)=>{let h=u[d],f=new Array;return h.map(p=>{let b=l(p);return b||f.push(p),b}).some(Boolean)?(u[d]=f,!0):!1})});var lE=(e,t,n=[],r={})=>{let i={};return Object.entries(t).forEach(([o,s])=>{i[o]={$in:s}}),Xd(e,i,n,r)};var uE=Object.freeze(["$each","$slice","$sort","$position"]),dE=(e,t,n=[],r={})=>ut(t,n,r,(i,o,s)=>{let a={$each:[i]};return V(i)&&uE.some(c=>ft(i,c))&&Object.assign(a,i),at(e,o,s,(c,l)=>{let u=c[l]||(c[l]=[]),d=u.slice(0,a.$slice||u.length),h=u.length,f=W(a.$position)?a.$position:u.length;if(u.splice(f,0,...Ri(r.cloneMode,a.$each)),a.$sort){let m=V(a.$sort)?Object.keys(a.$sort||{}).pop():"",p=m?a.$sort[m]:a.$sort,b=m?g=>qt(g,m):g=>g;u.sort((g,x)=>p*ct(b(g),b(x)))}return W(a.$slice)&&(a.$slice<0?u.splice(0,u.length+a.$slice):u.splice(a.$slice)),h!=u.length||!Bt(d,u)},{descendArray:!0,buildGraph:!0})});var Gd=(e,t,n=[],r={})=>ut(t,n,r,(i,o,s)=>at(e,o,s,(a,c)=>Bt(a[c],i)?!1:(a[c]=Ri(r.cloneMode,i),!0),{buildGraph:!0}));var hE=(e,t,n=[],r={})=>{let i=[],o=ut(t,n,r,(s,a,c)=>at(e,a,c,(l,u)=>ft(l,u)?(i.push(...Gd(e,{[s]:l[u]},n,r)),delete l[u],!0):!1));return Array.from(new Set(o.concat(i)))};var fE=(e,t,n=[],r={})=>ut(t,n,r,(i,o,s)=>at(e,o,s,(a,c)=>ft(a,c)?($(a)?a[c]=null:delete a[c],!0):!1));function Zd(e){return(t,n,r=[],i={},o={})=>{let s=Object.assign({cloneMode:"copy"},e,o);Object.assign(s,{queryOptions:Wr(Object.assign({useStrictMode:!1},s?.queryOptions))}),r=r||[],i=i||{};let a=Object.entries(n);E(a.length===1,"Update expression must contain only one operator.");let[c,l]=a[0];E(ft(mc,c),`Update operator '${c}' is not supported.`);let u=mc[c];return Object.keys(i).length&&!new Dt(i,s.queryOptions).test(t)?[]:u(t,l,r,s)}}var g3=Zd({});var Jd;function th(e,t){if(!Jd){var n=Zd({cloneMode:"none"});Jd=(r,i)=>{var o=_e(r);return n(o,i),o}}return Jd(e,t)}function mE(e){return this.incrementalModify(t=>{var n=th(t,e);return n})}function pE(e){var t=this._data,n=th(t,e);return this._saveData(n,t)}function gE(e){return this.exec().then(t=>t?Array.isArray(t)?Promise.all(t.map(n=>n.update(e))).then(()=>t):t.update(e).then(()=>t):null)}var kb={name:"update",rxdb:!0,prototypes:{RxDocument:e=>{e.update=pE,e.incrementalUpdate=mE},RxQuery:e=>{e.update=gE}}};var vE={title:"posts schema",version:0,type:"object",primaryKey:"id",properties:{id:{type:"string",primary:!0,maxLength:100},title:{type:"string"},body:{type:"string"}}};function bE(){return O(this,null,function*(){Pa(Ng),Pa(kb),zh()&&Pa(Ov)})}bE();var I3=(()=>{let t=class t{constructor(){this.dataBaseReadySubj=new Nt(!1),this.dataBaseReady$=this.dataBaseReadySubj.asObservable()}getDatabaseCollection(r){if(!this.rxDatabase)throw new Error("Database is not initialized. Please make sure the database is initialized before getting the collection");return this.rxDatabase[r]}initDB(r){return O(this,null,function*(){return this.rxDatabase&&this.rxDatabase.name===r&&!this.rxDatabase.destroyed?this.rxDatabase:(this.rxDatabase=yield Vg({name:r,storage:Ob(),password:"myLongAndStupidPassword"}),yield this.rxDatabase.addCollections({posts:{schema:vE}}),this.dataBaseReadySubj.next(!0),this.rxDatabase)})}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var N3=(()=>{let t=class t{constructor(){this.activePortal=new U,this.portal$=this.activePortal.asObservable()}setPortal(r){this.activePortal.next(r)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function j3(e){return e&&typeof e.connect=="function"&&!(e instanceof en)}var Ab=class{applyChanges(t,n,r,i,o){t.forEachOperation((s,a,c)=>{let l,u;if(s.previousIndex==null){let d=r(s,a,c);l=n.createEmbeddedView(d.templateRef,d.context,d.index),u=1}else c==null?(n.remove(a),u=3):(l=n.get(a),n.move(l,c),u=2);o&&o({context:l?.context,operation:u,record:s})})}detach(){}};var Ib=class{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(t=!1,n,r=!0,i){this._multiple=t,this._emitChanges=r,this.compareWith=i,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new U,n&&n.length&&(t?n.forEach(o=>this._markSelected(o)):this._markSelected(n[0]),this._selectedToEmit.length=0)}select(...t){this._verifyValueAssignment(t),t.forEach(r=>this._markSelected(r));let n=this._hasQueuedChanges();return this._emitChangeEvent(),n}deselect(...t){this._verifyValueAssignment(t),t.forEach(r=>this._unmarkSelected(r));let n=this._hasQueuedChanges();return this._emitChangeEvent(),n}setSelection(...t){this._verifyValueAssignment(t);let n=this.selected,r=new Set(t);t.forEach(o=>this._markSelected(o)),n.filter(o=>!r.has(o)).forEach(o=>this._unmarkSelected(o));let i=this._hasQueuedChanges();return this._emitChangeEvent(),i}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();let n=this._hasQueuedChanges();return t&&this._emitChangeEvent(),n}isSelected(t){return this._selection.has(this._getConcreteValue(t))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){t=this._getConcreteValue(t),this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){t=this._getConcreteValue(t),this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){t.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(t){if(this.compareWith){for(let n of this._selection)if(this.compareWith(t,n))return n;return t}else return t}};var U3=new Y("_ViewRepeater");var yE=20,eh=(()=>{let t=class t{constructor(r,i,o){this._ngZone=r,this._platform=i,this._scrolled=new U,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(r){this.scrollContainers.has(r)||this.scrollContainers.set(r,r.elementScrolled().subscribe(()=>this._scrolled.next(r)))}deregister(r){let i=this.scrollContainers.get(r);i&&(i.unsubscribe(),this.scrollContainers.delete(r))}scrolled(r=yE){return this._platform.isBrowser?new ns(i=>{this._globalSubscription||this._addGlobalListener();let o=r>0?this._scrolled.pipe(yc(r)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):N()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((r,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(r,i){let o=this.getAncestorScrollContainers(r);return this.scrolled(i).pipe(X(s=>!s||o.indexOf(s)>-1))}getAncestorScrollContainers(r){let i=[];return this.scrollContainers.forEach((o,s)=>{this._scrollableContainsElement(s,r)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(r,i){let o=tf(i),s=r.getElementRef().nativeElement;do if(o==s)return!0;while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let r=this._getWindow();return yh(r.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};t.\u0275fac=function(i){return new(i||t)(D(ht),D(ue),D(xt,8))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var _E=20,pc=(()=>{let t=class t{constructor(r,i,o){this._platform=r,this._change=new U,this._changeListener=s=>{this._change.next(s)},this._document=o,i.runOutsideAngular(()=>{if(r.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let r=this._getWindow();r.removeEventListener("resize",this._changeListener),r.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let r={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),r}getViewportRect(){let r=this.getViewportScrollPosition(),{width:i,height:o}=this.getViewportSize();return{top:r.top,left:r.left,bottom:r.top+o,right:r.left+i,height:o,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let r=this._document,i=this._getWindow(),o=r.documentElement,s=o.getBoundingClientRect(),a=-s.top||r.body.scrollTop||i.scrollY||o.scrollTop||0,c=-s.left||r.body.scrollLeft||i.scrollX||o.scrollLeft||0;return{top:a,left:c}}change(r=_E){return r>0?this._change.pipe(yc(r)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let r=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:r.innerWidth,height:r.innerHeight}:{width:0,height:0}}};t.\u0275fac=function(i){return new(i||t)(D(ue),D(ht),D(xt,8))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Tb=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Rt({type:t}),t.\u0275inj=Et({});let e=t;return e})(),rh=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Rt({type:t}),t.\u0275inj=Et({imports:[Bi,Tb,Bi,Tb]});let e=t;return e})();var Mb=Zh(),nh=class{constructor(t,n){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=wt(-this._previousScrollPosition.left),t.style.top=wt(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,n=this._document.body,r=t.style,i=n.style,o=r.scrollBehavior||"",s=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),Mb&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Mb&&(r.scrollBehavior=o,i.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.body,r=this._viewportRuler.getViewportSize();return n.scrollHeight>r.height||n.scrollWidth>r.width}};var ih=class{constructor(t,n,r,i){this._scrollDispatcher=t,this._ngZone=n,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(X(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},gc=class{enable(){}disable(){}attach(){}};function oh(e,t){return t.some(n=>{let r=e.bottom<n.top,i=e.top>n.bottom,o=e.right<n.left,s=e.left>n.right;return r||i||o||s})}function Pb(e,t){return t.some(n=>{let r=e.top<n.top,i=e.bottom>n.bottom,o=e.left<n.left,s=e.right>n.right;return r||i||o||s})}var sh=class{constructor(t,n,r,i){this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();oh(n,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},wE=(()=>{let t=class t{constructor(r,i,o,s){this._scrollDispatcher=r,this._viewportRuler=i,this._ngZone=o,this.noop=()=>new gc,this.close=a=>new ih(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new nh(this._viewportRuler,this._document),this.reposition=a=>new sh(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=s}};t.\u0275fac=function(i){return new(i||t)(D(eh),D(pc),D(ht),D(xt))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),tn=class{constructor(t){if(this.scrollStrategy=new gc,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){let n=Object.keys(t);for(let r of n)t[r]!==void 0&&(this[r]=t[r])}}};var ah=class{constructor(t,n){this.connectionPair=t,this.scrollableViewProperties=n}};var Bb=(()=>{let t=class t{constructor(r){this._attachedOverlays=[],this._document=r}ngOnDestroy(){this.detach()}add(r){this.remove(r),this._attachedOverlays.push(r)}remove(r){let i=this._attachedOverlays.indexOf(r);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}};t.\u0275fac=function(i){return new(i||t)(D(xt))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),CE=(()=>{let t=class t extends Bb{constructor(r,i){super(r),this._ngZone=i,this._keydownListener=o=>{let s=this._attachedOverlays;for(let a=s.length-1;a>-1;a--)if(s[a]._keydownEvents.observers.length>0){let c=s[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(o)):c.next(o);break}}}add(r){super.add(r),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};t.\u0275fac=function(i){return new(i||t)(D(xt),D(ht,8))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),SE=(()=>{let t=class t extends Bb{constructor(r,i,o){super(r),this._platform=i,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Ac(s)},this._clickListener=s=>{let a=Ac(s),c=s.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;let l=this._attachedOverlays.slice();for(let u=l.length-1;u>-1;u--){let d=l[u];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(a)||d.overlayElement.contains(c))break;let h=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(s)):h.next(s)}}}add(r){if(super.add(r),!this._isAttached){let i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let r=this._document.body;r.removeEventListener("pointerdown",this._pointerDownListener,!0),r.removeEventListener("click",this._clickListener,!0),r.removeEventListener("auxclick",this._clickListener,!0),r.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(r.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(r){r.addEventListener("pointerdown",this._pointerDownListener,!0),r.addEventListener("click",this._clickListener,!0),r.addEventListener("auxclick",this._clickListener,!0),r.addEventListener("contextmenu",this._clickListener,!0)}};t.\u0275fac=function(i){return new(i||t)(D(xt),D(ue),D(ht,8))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Oi=(()=>{let t=class t{constructor(r,i){this._platform=i,this._document=r}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let r="cdk-overlay-container";if(this._platform.isBrowser||Ic()){let o=this._document.querySelectorAll(`.${r}[platform="server"], .${r}[platform="test"]`);for(let s=0;s<o.length;s++)o[s].remove()}let i=this._document.createElement("div");i.classList.add(r),Ic()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}};t.\u0275fac=function(i){return new(i||t)(D(xt),D(ue))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),_r=class{constructor(t,n,r,i,o,s,a,c,l,u=!1){this._portalOutlet=t,this._host=n,this._pane=r,this._config=i,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new U,this._attachments=new U,this._detachments=new U,this._locationChanges=Te.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new U,this._outsidePointerEvents=new U,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Zt(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=S(S({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Q(S({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=wt(this._config.width),t.height=wt(this._config.height),t.minWidth=wt(this._config.minWidth),t.minHeight=wt(this._config.minHeight),t.maxWidth=wt(this._config.maxWidth),t.maxHeight=wt(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t=this._backdropElement;if(t){if(this._animationsDisabled){this._disposeBackdrop(t);return}t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,n,r){let i=Nc(n||[]).filter(o=>!!o);i.length&&(r?t.classList.add(...i):t.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let t=this._ngZone.onStable.pipe(on(An(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},Nb="cdk-overlay-connected-position-bounding-box",EE=/([A-Za-z%]+)$/,ch=class{get positions(){return this._preferredPositions}constructor(t,n,r,i,o){this._viewportRuler=n,this._document=r,this._platform=i,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new U,this._resizeSubscription=Te.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(Nb),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,n=this._overlayRect,r=this._viewportRect,i=this._containerRect,o=[],s;for(let a of this._preferredPositions){let c=this._getOriginPoint(t,i,a),l=this._getOverlayPoint(c,n,a),u=this._getOverlayFit(l,n,r,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(u,l,r)){o.push({position:a,origin:c,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!s||s.overlayFit.visibleArea<u.visibleArea)&&(s={overlayFit:u,overlayPoint:l,originPoint:c,position:a,overlayRect:n})}if(o.length){let a=null,c=-1;for(let l of o){let u=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);u>c&&(c=u,a=l)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&On(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Nb),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,n)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,n,r){let i;if(r.originX=="center")i=t.left+t.width/2;else{let s=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;i=r.originX=="start"?s:a}n.left<0&&(i-=n.left);let o;return r.originY=="center"?o=t.top+t.height/2:o=r.originY=="top"?t.top:t.bottom,n.top<0&&(o-=n.top),{x:i,y:o}}_getOverlayPoint(t,n,r){let i;r.overlayX=="center"?i=-n.width/2:r.overlayX==="start"?i=this._isRtl()?-n.width:0:i=this._isRtl()?0:-n.width;let o;return r.overlayY=="center"?o=-n.height/2:o=r.overlayY=="top"?0:-n.height,{x:t.x+i,y:t.y+o}}_getOverlayFit(t,n,r,i){let o=Lb(n),{x:s,y:a}=t,c=this._getOffset(i,"x"),l=this._getOffset(i,"y");c&&(s+=c),l&&(a+=l);let u=0-s,d=s+o.width-r.width,h=0-a,f=a+o.height-r.height,m=this._subtractOverflows(o.width,u,d),p=this._subtractOverflows(o.height,h,f),b=m*p;return{visibleArea:b,isCompletelyWithinViewport:o.width*o.height===b,fitsInViewportVertically:p===o.height,fitsInViewportHorizontally:m==o.width}}_canFitWithFlexibleDimensions(t,n,r){if(this._hasFlexibleDimensions){let i=r.bottom-n.y,o=r.right-n.x,s=$b(this._overlayRef.getConfig().minHeight),a=$b(this._overlayRef.getConfig().minWidth),c=t.fitsInViewportVertically||s!=null&&s<=i,l=t.fitsInViewportHorizontally||a!=null&&a<=o;return c&&l}return!1}_pushOverlayOnScreen(t,n,r){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let i=Lb(n),o=this._viewportRect,s=Math.max(t.x+i.width-o.width,0),a=Math.max(t.y+i.height-o.height,0),c=Math.max(o.top-r.top-t.y,0),l=Math.max(o.left-r.left-t.x,0),u=0,d=0;return i.width<=o.width?u=l||-s:u=t.x<this._viewportMargin?o.left-r.left-t.x:0,i.height<=o.height?d=c||-a:d=t.y<this._viewportMargin?o.top-r.top-t.y:0,this._previousPushAmount={x:u,y:d},{x:t.x+u,y:t.y+d}}_applyPosition(t,n){if(this._setTransformOrigin(t),this._setOverlayElementStyles(n,t),this._setBoundingBoxStyles(n,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){let r=this._getScrollVisibility(),i=new ah(t,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),r,i=t.overlayY;t.overlayX==="center"?r="center":this._isRtl()?r=t.overlayX==="start"?"right":"left":r=t.overlayX==="start"?"left":"right";for(let o=0;o<n.length;o++)n[o].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(t,n){let r=this._viewportRect,i=this._isRtl(),o,s,a;if(n.overlayY==="top")s=t.y,o=r.height-s+this._viewportMargin;else if(n.overlayY==="bottom")a=r.height-t.y+this._viewportMargin*2,o=r.height-a+this._viewportMargin;else{let f=Math.min(r.bottom-t.y+r.top,t.y),m=this._lastBoundingBoxSize.height;o=f*2,s=t.y-f,o>m&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-m/2)}let c=n.overlayX==="start"&&!i||n.overlayX==="end"&&i,l=n.overlayX==="end"&&!i||n.overlayX==="start"&&i,u,d,h;if(l)h=r.width-t.x+this._viewportMargin,u=t.x-this._viewportMargin;else if(c)d=t.x,u=r.right-t.x;else{let f=Math.min(r.right-t.x+r.left,t.x),m=this._lastBoundingBoxSize.width;u=f*2,d=t.x-f,u>m&&!this._isInitialRender&&!this._growAfterOpen&&(d=t.x-m/2)}return{top:s,left:d,bottom:a,right:h,width:u,height:o}}_setBoundingBoxStyles(t,n){let r=this._calculateBoundingBoxRect(t,n);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));let i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;i.height=wt(r.height),i.top=wt(r.top),i.bottom=wt(r.bottom),i.width=wt(r.width),i.left=wt(r.left),i.right=wt(r.right),n.overlayX==="center"?i.alignItems="center":i.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?i.justifyContent="center":i.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",o&&(i.maxHeight=wt(o)),s&&(i.maxWidth=wt(s))}this._lastBoundingBoxSize=r,On(this._boundingBox.style,i)}_resetBoundingBoxStyles(){On(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){On(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,n){let r={},i=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(i){let u=this._viewportRuler.getViewportScrollPosition();On(r,this._getExactOverlayY(n,t,u)),On(r,this._getExactOverlayX(n,t,u))}else r.position="static";let a="",c=this._getOffset(n,"x"),l=this._getOffset(n,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),r.transform=a.trim(),s.maxHeight&&(i?r.maxHeight=wt(s.maxHeight):o&&(r.maxHeight="")),s.maxWidth&&(i?r.maxWidth=wt(s.maxWidth):o&&(r.maxWidth="")),On(this._pane.style,r)}_getExactOverlayY(t,n,r){let i={top:"",bottom:""},o=this._getOverlayPoint(n,this._overlayRect,t);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),t.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;i.bottom=`${s-(o.y+this._overlayRect.height)}px`}else i.top=wt(o.y);return i}_getExactOverlayX(t,n,r){let i={left:"",right:""},o=this._getOverlayPoint(n,this._overlayRect,t);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r));let s;if(this._isRtl()?s=t.overlayX==="end"?"left":"right":s=t.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;i.right=`${a-(o.x+this._overlayRect.width)}px`}else i.left=wt(o.x);return i}_getScrollVisibility(){let t=this._getOriginRect(),n=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Pb(t,r),isOriginOutsideView:oh(t,r),isOverlayClipped:Pb(n,r),isOverlayOutsideView:oh(n,r)}}_subtractOverflows(t,...n){return n.reduce((r,i)=>r-Math.max(i,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+t-this._viewportMargin,bottom:r.top+n-this._viewportMargin,width:t-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,n){return n==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Nc(t).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof _t)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let n=t.width||0,r=t.height||0;return{top:t.y,bottom:t.y+r,left:t.x,right:t.x+n,height:r,width:n}}};function On(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function $b(e){if(typeof e!="number"&&e!=null){let[t,n]=e.split(EE);return!n||n==="px"?parseFloat(t):null}return e||null}function Lb(e){return{top:Math.floor(e.top),right:Math.floor(e.right),bottom:Math.floor(e.bottom),left:Math.floor(e.left),width:Math.floor(e.width),height:Math.floor(e.height)}}var Fb="cdk-global-overlay-wrapper",lh=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){let n=t.getConfig();this._overlayRef=t,this._width&&!n.width&&t.updateSize({width:this._width}),this._height&&!n.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(Fb),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:o,maxWidth:s,maxHeight:a}=r,c=(i==="100%"||i==="100vw")&&(!s||s==="100%"||s==="100vw"),l=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,d=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",f="",m="",p="";c?p="flex-start":u==="center"?(p="center",h?m=d:f=d):h?u==="left"||u==="end"?(p="flex-end",f=d):(u==="right"||u==="start")&&(p="flex-start",m=d):u==="left"||u==="start"?(p="flex-start",f=d):(u==="right"||u==="end")&&(p="flex-end",m=d),t.position=this._cssPosition,t.marginLeft=c?"0":f,t.marginTop=l?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=c?"0":m,n.justifyContent=p,n.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,r=n.style;n.classList.remove(Fb),r.justifyContent=r.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},RE=(()=>{let t=class t{constructor(r,i,o,s){this._viewportRuler=r,this._document=i,this._platform=o,this._overlayContainer=s}global(){return new lh}flexibleConnectedTo(r){return new ch(r,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};t.\u0275fac=function(i){return new(i||t)(D(pc),D(xt),D(ue),D(Oi))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),OE=0,oe=(()=>{let t=class t{constructor(r,i,o,s,a,c,l,u,d,h,f,m){this.scrollStrategies=r,this._overlayContainer=i,this._componentFactoryResolver=o,this._positionBuilder=s,this._keyboardDispatcher=a,this._injector=c,this._ngZone=l,this._document=u,this._directionality=d,this._location=h,this._outsideClickDispatcher=f,this._animationsModuleType=m}create(r){let i=this._createHostElement(),o=this._createPaneElement(i),s=this._createPortalOutlet(o),a=new tn(r);return a.direction=a.direction||this._directionality.value,new _r(s,i,o,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(r){let i=this._document.createElement("div");return i.id=`cdk-overlay-${OE++}`,i.classList.add("cdk-overlay-pane"),r.appendChild(i),i}_createHostElement(){let r=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(r),r}_createPortalOutlet(r){return this._appRef||(this._appRef=this._injector.get(ds)),new bs(r,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};t.\u0275fac=function(i){return new(i||t)(D(wE),D(Oi),D(cs),D(RE),D(CE),D(yt),D(ht),D(xt),D(zn),D(Re),D(SE),D(Me,8))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),DE=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],jb=new Y("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let e=P(oe);return()=>e.scrollStrategies.reposition()}}),kE=(()=>{let t=class t{constructor(r){this.elementRef=r}};t.\u0275fac=function(i){return new(i||t)(T(_t))},t.\u0275dir=vt({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0});let e=t;return e})(),v8=(()=>{let t=class t{get offsetX(){return this._offsetX}set offsetX(r){this._offsetX=r,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(r){this._offsetY=r,this._position&&this._updatePositionStrategy(this._position)}get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(r){this._disposeOnNavigation=r}constructor(r,i,o,s,a){this._overlay=r,this._dir=a,this._backdropSubscription=Te.EMPTY,this._attachSubscription=Te.EMPTY,this._detachSubscription=Te.EMPTY,this._positionSubscription=Te.EMPTY,this._disposeOnNavigation=!1,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.hasBackdrop=!1,this.lockPosition=!1,this.flexibleDimensions=!1,this.growAfterOpen=!1,this.push=!1,this.backdropClick=new Lt,this.positionChange=new Lt,this.attach=new Lt,this.detach=new Lt,this.overlayKeydown=new Lt,this.overlayOutsideClick=new Lt,this._templatePortal=new Le(i,o),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(r){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),r.origin&&this.open&&this._position.apply()),r.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=DE);let r=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=r.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=r.detachments().subscribe(()=>this.detach.emit()),r.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),i.keyCode===27&&!this.disableClose&&!jn(i)&&(i.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{this.overlayOutsideClick.next(i)})}_buildConfig(){let r=this._position=this.positionStrategy||this._createPositionStrategy(),i=new tn({direction:this._dir,positionStrategy:r,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(i.width=this.width),(this.height||this.height===0)&&(i.height=this.height),(this.minWidth||this.minWidth===0)&&(i.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(r){let i=this.positions.map(o=>({originX:o.originX,originY:o.originY,overlayX:o.overlayX,overlayY:o.overlayY,offsetX:o.offsetX||this.offsetX,offsetY:o.offsetY||this.offsetY,panelClass:o.panelClass||void 0}));return r.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let r=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(r),r}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof kE?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(r=>{this.backdropClick.emit(r)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(Sh(()=>this.positionChange.observers.length>0)).subscribe(r=>{this.positionChange.emit(r),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}};t.\u0275fac=function(i){return new(i||t)(T(oe),T(tr),T(Dr),T(jb),T(zn,8))},t.\u0275dir=vt({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop",te],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition",te],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",te],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen",te],push:["cdkConnectedOverlayPush","push",te],disposeOnNavigation:["cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",te]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[Or,Sr]});let e=t;return e})();function AE(e){return()=>e.scrollStrategies.reposition()}var IE={provide:jb,deps:[oe],useFactory:AE},Di=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Rt({type:t}),t.\u0275inj=Et({providers:[oe,IE],imports:[Bi,be,rh,rh]});let e=t;return e})();function TE(e,t){if(e&1){let n=$h();Ne(0,"div",1)(1,"button",2),Ln("click",function(){Oh(n);let i=Ec();return Dh(i.action())}),Rc(2),Ee()()}if(e&2){let n=Ec();$n(2),Oc(" ",n.data.action," ")}}var ME=["label"];function PE(e,t){}var NE=Math.pow(2,31)-1,Zo=class{constructor(t,n){this._overlayRef=n,this._afterDismissed=new U,this._afterOpened=new U,this._onAction=new U,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,NE))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},zb=new Y("MatSnackBarData"),ki=class{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}},$E=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=vt({type:t,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"],standalone:!0});let e=t;return e})(),LE=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=vt({type:t,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"],standalone:!0});let e=t;return e})(),FE=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=vt({type:t,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"],standalone:!0});let e=t;return e})(),Vb=(()=>{let t=class t{constructor(r,i){this.snackBarRef=r,this.data=i}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}};t.\u0275fac=function(i){return new(i||t)(T(Zo),T(zb))},t.\u0275cmp=Jt({type:t,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],standalone:!0,features:[$e],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(i,o){i&1&&(Ne(0,"div",0),Rc(1),Ee(),sn(2,TE,3,1,"div",1)),i&2&&($n(1),Oc(" ",o.data.message,`
`),$n(1),Nh(2,o.hasAction?2:-1))},dependencies:[jc,mf,$E,LE,FE,hs],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0});let e=t;return e})(),BE={snackBarState:Jh("state",[Mc("void, hidden",ms({transform:"scale(0.8)",opacity:0})),Mc("visible",ms({transform:"scale(1)",opacity:1})),Pc("* => visible",Tc("150ms cubic-bezier(0, 0, 0.2, 1)")),Pc("* => void, * => hidden",Tc("75ms cubic-bezier(0.4, 0.0, 1, 1)",ms({opacity:0})))])},jE=0,Wb=(()=>{let t=class t extends kr{constructor(r,i,o,s,a){super(),this._ngZone=r,this._elementRef=i,this._changeDetectorRef=o,this._platform=s,this.snackBarConfig=a,this._document=P(xt),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new U,this._onExit=new U,this._onEnter=new U,this._animationState="void",this._liveElementId=`mat-snack-bar-container-live-${jE++}`,this.attachDomPortal=c=>{this._assertNotAttached();let l=this._portalOutlet.attachDomPortal(c);return this._afterPortalAttached(),l},a.politeness==="assertive"&&!a.announcementMessage?this._live="assertive":a.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(r){this._assertNotAttached();let i=this._portalOutlet.attachComponentPortal(r);return this._afterPortalAttached(),i}attachTemplatePortal(r){this._assertNotAttached();let i=this._portalOutlet.attachTemplatePortal(r);return this._afterPortalAttached(),i}onAnimationEnd(r){let{fromState:i,toState:o}=r;if((o==="void"&&i!=="void"||o==="hidden")&&this._completeExit(),o==="visible"){let s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(Zt(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){let r=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(a=>r.classList.add(a)):r.classList.add(i)),this._exposeToModals();let o=this._label.nativeElement,s="mdc-snackbar__label";o.classList.toggle(s,!o.querySelector(`.${s}`))}_exposeToModals(){let r=this._liveElementId,i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<i.length;o++){let s=i[o],a=s.getAttribute("aria-owns");this._trackedModals.add(s),a?a.indexOf(r)===-1&&s.setAttribute("aria-owns",a+" "+r):s.setAttribute("aria-owns",r)}}_clearFromModals(){this._trackedModals.forEach(r=>{let i=r.getAttribute("aria-owns");if(i){let o=i.replace(this._liveElementId,"").trim();o.length>0?r.setAttribute("aria-owns",o):r.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{let r=this._elementRef.nativeElement.querySelector("[aria-hidden]"),i=this._elementRef.nativeElement.querySelector("[aria-live]");if(r&&i){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&r.contains(document.activeElement)&&(o=document.activeElement),r.removeAttribute("aria-hidden"),i.appendChild(r),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}};t.\u0275fac=function(i){return new(i||t)(T(ht),T(_t),T(Rr),T(ue),T(ki))},t.\u0275cmp=Jt({type:t,selectors:[["mat-snack-bar-container"]],viewQuery:function(i,o){if(i&1&&(Fn(Be,7),Fn(ME,7)),i&2){let s;an(s=cn())&&(o._portalOutlet=s.first),an(s=cn())&&(o._label=s.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(i,o){i&1&&Bh("@state.done",function(a){return o.onAnimationEnd(a)}),i&2&&Lh("@state",o._animationState)},standalone:!0,features:[Wt,$e],decls:6,vars:3,consts:[[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["label",""],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(i,o){i&1&&(Ne(0,"div",0)(1,"div",1,2)(3,"div",3),sn(4,PE,0,0,"ng-template",4),Ee(),ve(5,"div"),Ee()()),i&2&&($n(5),le("aria-live",o._live)("role",o._role)("id",o._liveElementId))},dependencies:[be,Be],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container{width:100vw}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape)}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size);font-family:var(--mdc-snackbar-supporting-text-font);font-weight:var(--mdc-snackbar-supporting-text-weight);line-height:var(--mdc-snackbar-supporting-text-line-height)}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color);--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}.mat-mdc-snack-bar-container .mdc-snackbar__label::before{display:none}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[BE.snackBarState]}});let e=t;return e})();function UE(){return new ki}var zE=new Y("mat-snack-bar-default-options",{providedIn:"root",factory:UE}),VE=(()=>{let t=class t{get _openedSnackBarRef(){let r=this._parentSnackBar;return r?r._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(r){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=r:this._snackBarRefAtThisLevel=r}constructor(r,i,o,s,a,c){this._overlay=r,this._live=i,this._injector=o,this._breakpointObserver=s,this._parentSnackBar=a,this._defaultConfig=c,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=Vb,this.snackBarContainerComponent=Wb,this.handsetCssClass="mat-mdc-snack-bar-handset"}openFromComponent(r,i){return this._attach(r,i)}openFromTemplate(r,i){return this._attach(r,i)}open(r,i="",o){let s=S(S({},this._defaultConfig),o);return s.data={message:r,action:i},s.announcementMessage===r&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(r,i){let o=i&&i.viewContainerRef&&i.viewContainerRef.injector,s=yt.create({parent:o||this._injector,providers:[{provide:ki,useValue:i}]}),a=new rr(this.snackBarContainerComponent,i.viewContainerRef,s),c=r.attach(a);return c.instance.snackBarConfig=i,c.instance}_attach(r,i){let o=S(S(S({},new ki),this._defaultConfig),i),s=this._createOverlay(o),a=this._attachSnackBarContainer(s,o),c=new Zo(a,s);if(r instanceof tr){let l=new Le(r,null,{$implicit:o.data,snackBarRef:c});c.instance=a.attachTemplatePortal(l)}else{let l=this._createInjector(o,c),u=new rr(r,void 0,l),d=a.attachComponentPortal(u);c.instance=d.instance}return this._breakpointObserver.observe(rf.HandsetPortrait).pipe(on(s.detachments())).subscribe(l=>{s.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),o.announcementMessage&&a._onAnnounce.subscribe(()=>{this._live.announce(o.announcementMessage,o.politeness)}),this._animateSnackBar(c,o),this._openedSnackBarRef=c,this._openedSnackBarRef}_animateSnackBar(r,i){r.afterDismissed().subscribe(()=>{this._openedSnackBarRef==r&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{r.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):r.containerInstance.enter(),i.duration&&i.duration>0&&r.afterOpened().subscribe(()=>r._dismissAfter(i.duration))}_createOverlay(r){let i=new tn;i.direction=r.direction;let o=this._overlay.position().global(),s=r.direction==="rtl",a=r.horizontalPosition==="left"||r.horizontalPosition==="start"&&!s||r.horizontalPosition==="end"&&s,c=!a&&r.horizontalPosition!=="center";return a?o.left("0"):c?o.right("0"):o.centerHorizontally(),r.verticalPosition==="top"?o.top("0"):o.bottom("0"),i.positionStrategy=o,this._overlay.create(i)}_createInjector(r,i){let o=r&&r.viewContainerRef&&r.viewContainerRef.injector;return yt.create({parent:o||this._injector,providers:[{provide:Zo,useValue:i},{provide:zb,useValue:r.data}]})}};t.\u0275fac=function(i){return new(i||t)(D(oe),D(nf),D(yt),D(ef),D(t,12),D(zE))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var U8=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Rt({type:t}),t.\u0275inj=Et({providers:[VE],imports:[Di,be,jc,er,Vb,Wb,er]});let e=t;return e})();var W8={APP:{POSTS:"app.posts",NOT_FOUND:"app.not-found"},POSTS:{DETAIL:"posts.detail",CREATE:"posts.create",EDIT:"posts.edit"}};function WE(e,t){}var Dn=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}};var vc=(()=>{let t=class t extends kr{constructor(r,i,o,s,a,c,l,u){super(),this._elementRef=r,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=a,this._ngZone=c,this._overlayRef=l,this._focusMonitor=u,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=d=>{this._portalOutlet.hasAttached();let h=this._portalOutlet.attachDomPortal(d);return this._contentAttached(),h},this._document=o,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(r){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachComponentPortal(r);return this._contentAttached(),i}attachTemplatePortal(r){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachTemplatePortal(r);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(r,i){this._interactivityChecker.isFocusable(r)||(r.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let o=()=>{r.removeEventListener("blur",o),r.removeEventListener("mousedown",o),r.removeAttribute("tabindex")};r.addEventListener("blur",o),r.addEventListener("mousedown",o)})),r.focus(i)}_focusByCssSelector(r,i){let o=this._elementRef.nativeElement.querySelector(r);o&&this._forceFocus(o,i)}_trapFocus(){let r=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||r.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}}_restoreFocus(){let r=this._config.restoreFocus,i=null;if(typeof r=="string"?i=this._document.querySelector(r):typeof r=="boolean"?i=r?this._elementFocusedBeforeDialogWasOpened:null:r&&(i=r),this._config.restoreFocus&&i&&typeof i.focus=="function"){let o=fs(),s=this._elementRef.nativeElement;(!o||o===this._document.body||o===s||s.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let r=this._elementRef.nativeElement,i=fs();return r===i||r.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=fs())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}};t.\u0275fac=function(i){return new(i||t)(T(_t),T(vs),T(xt,8),T(Dn),T(gs),T(ht),T(_r),T(Un))},t.\u0275cmp=Jt({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(i,o){if(i&1&&Fn(Be,7),i&2){let s;an(s=cn())&&(o._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,o){i&2&&le("id",o._config.id||null)("role",o._config.role)("aria-modal",o._config.ariaModal)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null)},standalone:!0,features:[Wt,$e],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,o){i&1&&sn(0,WE,0,0,"ng-template",0)},dependencies:[be,Be],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2});let e=t;return e})(),Jo=class{constructor(t,n){this.overlayRef=t,this.config=n,this.closed=new U,this.disableClose=n.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(r=>{r.keyCode===27&&!this.disableClose&&!jn(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=t.detachments().subscribe(()=>{n.closeOnOverlayDetachments!==!1&&this.close()})}close(t,n){if(this.containerInstance){let r=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(t),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",n=""){return this.overlayRef.updateSize({width:t,height:n}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}},HE=new Y("DialogScrollStrategy",{providedIn:"root",factory:()=>{let e=P(oe);return()=>e.scrollStrategies.block()}}),KE=new Y("DialogData"),qE=new Y("DefaultDialogConfig");var YE=0,hh=(()=>{let t=class t{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(r,i,o,s,a,c){this._overlay=r,this._injector=i,this._defaultOptions=o,this._parentDialog=s,this._overlayContainer=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new U,this._afterOpenedAtThisLevel=new U,this._ariaHiddenElements=new Map,this.afterAllClosed=nn(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Se(void 0))),this._scrollStrategy=c}open(r,i){let o=this._defaultOptions||new Dn;i=S(S({},o),i),i.id=i.id||`cdk-dialog-${YE++}`,i.id&&this.getDialogById(i.id);let s=this._getOverlayConfig(i),a=this._overlay.create(s),c=new Jo(a,i),l=this._attachContainer(a,c,i);return c.containerInstance=l,this._attachDialogContent(r,c,l,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.closed.subscribe(()=>this._removeOpenDialog(c,!0)),this.afterOpened.next(c),c}closeAll(){dh(this.openDialogs,r=>r.close())}getDialogById(r){return this.openDialogs.find(i=>i.id===r)}ngOnDestroy(){dh(this._openDialogsAtThisLevel,r=>{r.config.closeOnDestroy===!1&&this._removeOpenDialog(r,!1)}),dh(this._openDialogsAtThisLevel,r=>r.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(r){let i=new tn({positionStrategy:r.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:r.scrollStrategy||this._scrollStrategy(),panelClass:r.panelClass,hasBackdrop:r.hasBackdrop,direction:r.direction,minWidth:r.minWidth,minHeight:r.minHeight,maxWidth:r.maxWidth,maxHeight:r.maxHeight,width:r.width,height:r.height,disposeOnNavigation:r.closeOnNavigation});return r.backdropClass&&(i.backdropClass=r.backdropClass),i}_attachContainer(r,i,o){let s=o.injector||o.viewContainerRef?.injector,a=[{provide:Dn,useValue:o},{provide:Jo,useValue:i},{provide:_r,useValue:r}],c;o.container?typeof o.container=="function"?c=o.container:(c=o.container.type,a.push(...o.container.providers(o))):c=vc;let l=new rr(c,o.viewContainerRef,yt.create({parent:s||this._injector,providers:a}),o.componentFactoryResolver);return r.attach(l).instance}_attachDialogContent(r,i,o,s){if(r instanceof tr){let a=this._createInjector(s,i,o,void 0),c={$implicit:s.data,dialogRef:i};s.templateContext&&(c=S(S({},c),typeof s.templateContext=="function"?s.templateContext():s.templateContext)),o.attachTemplatePortal(new Le(r,null,c,a))}else{let a=this._createInjector(s,i,o,this._injector),c=o.attachComponentPortal(new rr(r,s.viewContainerRef,a,s.componentFactoryResolver));i.componentRef=c,i.componentInstance=c.instance}}_createInjector(r,i,o,s){let a=r.injector||r.viewContainerRef?.injector,c=[{provide:KE,useValue:r.data},{provide:Jo,useValue:i}];return r.providers&&(typeof r.providers=="function"?c.push(...r.providers(i,r,o)):c.push(...r.providers)),r.direction&&(!a||!a.get(zn,null,{optional:!0}))&&c.push({provide:zn,useValue:{value:r.direction,change:N()}}),yt.create({parent:a||s,providers:c})}_removeOpenDialog(r,i){let o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,a)=>{s?a.setAttribute("aria-hidden",s):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let r=this._overlayContainer.getContainerElement();if(r.parentElement){let i=r.parentElement.children;for(let o=i.length-1;o>-1;o--){let s=i[o];s!==r&&s.nodeName!=="SCRIPT"&&s.nodeName!=="STYLE"&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let r=this._parentDialog;return r?r._getAfterAllClosed():this._afterAllClosedAtThisLevel}};t.\u0275fac=function(i){return new(i||t)(D(oe),D(yt),D(qE,8),D(t,12),D(Oi),D(HE))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function dh(e,t){let n=e.length;for(;n--;)t(e[n])}var Hb=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Rt({type:t}),t.\u0275inj=Et({providers:[hh],imports:[Di,be,of,vc,be]});let e=t;return e})();function QE(e,t){}var ts=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}},fh="mdc-dialog--open",Kb="mdc-dialog--opening",qb="mdc-dialog--closing",XE=150,GE=75,Xb=(()=>{let t=class t extends vc{constructor(r,i,o,s,a,c,l,u,d){super(r,i,o,s,a,c,l,d),this._animationMode=u,this._animationStateChanged=new Lt,this._animationsEnabled=this._animationMode!=="NoopAnimations",this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?Qb(this._config.enterAnimationDuration)??XE:0,this._exitAnimationDuration=this._animationsEnabled?Qb(this._config.exitAnimationDuration)??GE:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(Yb,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Kb,fh)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(fh),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(fh),this._animationsEnabled?(this._hostElement.style.setProperty(Yb,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(qb)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(Kb,qb)}_waitForAnimationToComplete(r,i){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,r)}_requestAnimationFrame(r){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(r):r()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(r){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:r})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(r){let i=super.attachComponentPortal(r);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}};t.\u0275fac=function(i){return new(i||t)(T(_t),T(vs),T(xt,8),T(ts),T(gs),T(ht),T(_r),T(Me,8),T(Un))},t.\u0275cmp=Jt({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(i,o){i&2&&(Sc("id",o._config.id),le("aria-modal",o._config.ariaModal)("role",o._config.role)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null),Pe("_mat-animation-noopable",!o._animationsEnabled))},standalone:!0,features:[Wt,$e],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,o){i&1&&(Ne(0,"div",0)(1,"div",1),sn(2,QE,0,0,"ng-template",2),Ee()())},dependencies:[be,Be],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{width:100%;height:100%}.mat-mdc-dialog-component-host{display:contents}.mat-mdc-dialog-container{--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2});let e=t;return e})(),Yb="--mat-dialog-transition-duration";function Qb(e){return e==null?null:typeof e=="number"?e:e.endsWith("ms")?ps(e.substring(0,e.length-2)):e.endsWith("s")?ps(e.substring(0,e.length-1))*1e3:e==="0"?0:null}var es=class{constructor(t,n,r){this._ref=t,this._containerInstance=r,this._afterOpened=new U,this._beforeClosed=new U,this._state=0,this.disableClose=n.disableClose,this.id=t.id,r._animationStateChanged.pipe(X(i=>i.state==="opened"),Zt(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(X(i=>i.state==="closed"),Zt(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),An(this.backdropClick(),this.keydownEvents().pipe(X(i=>i.keyCode===27&&!this.disableClose&&!jn(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),Gb(this,i.type==="keydown"?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(X(n=>n.state==="closing"),Zt(1)).subscribe(n=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let n=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?n.left(t.left):n.right(t.right):n.centerHorizontally(),t&&(t.top||t.bottom)?t.top?n.top(t.top):n.bottom(t.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",n=""){return this._ref.updateSize(t,n),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function Gb(e,t,n){return e._closeInteractionType=t,e.close(n)}var ZE=new Y("MatMdcDialogData"),JE=new Y("mat-mdc-dialog-default-options"),tR=new Y("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let e=P(oe);return()=>e.scrollStrategies.block()}});var eR=0,mh=(()=>{let t=class t{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let r=this._parentDialog;return r?r._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(r,i,o,s,a,c,l,u){this._overlay=r,this._defaultOptions=s,this._scrollStrategy=a,this._parentDialog=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new U,this._afterOpenedAtThisLevel=new U,this.dialogConfigClass=ts,this.afterAllClosed=nn(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Se(void 0))),this._dialog=i.get(hh),this._dialogRefConstructor=es,this._dialogContainerType=Xb,this._dialogDataToken=ZE}open(r,i){let o;i=S(S({},this._defaultOptions||new ts),i),i.id=i.id||`mat-mdc-dialog-${eR++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();let s=this._dialog.open(r,Q(S({},i),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:Dn,useValue:i}]},templateContext:()=>({dialogRef:o}),providers:(a,c,l)=>(o=new this._dialogRefConstructor(a,i,l),o.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:c.data},{provide:this._dialogRefConstructor,useValue:o}])}));return o.componentRef=s.componentRef,o.componentInstance=s.componentInstance,this.openDialogs.push(o),this.afterOpened.next(o),o.afterClosed().subscribe(()=>{let a=this.openDialogs.indexOf(o);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(r){return this.openDialogs.find(i=>i.id===r)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(r){let i=r.length;for(;i--;)r[i].close()}};t.\u0275fac=function(i){return new(i||t)(D(oe),D(yt),D(Re,8),D(JE,8),D(tR),D(t,12),D(Oi),D(Me,8))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),rR=0,P6=(()=>{let t=class t{constructor(r,i,o){this.dialogRef=r,this._elementRef=i,this._dialog=o,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=Zb(this._elementRef,this._dialog.openDialogs))}ngOnChanges(r){let i=r._matDialogClose||r._matDialogCloseResult;i&&(this.dialogResult=i.currentValue)}_onButtonClick(r){Gb(this.dialogRef,r.screenX===0&&r.screenY===0?"keyboard":"mouse",this.dialogResult)}};t.\u0275fac=function(i){return new(i||t)(T(es,8),T(_t),T(mh))},t.\u0275dir=vt({type:t,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(i,o){i&1&&Ln("click",function(a){return o._onButtonClick(a)}),i&2&&le("aria-label",o.ariaLabel||null)("type",o.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],standalone:!0,features:[Sr]});let e=t;return e})(),N6=(()=>{let t=class t{constructor(r,i,o){this._dialogRef=r,this._elementRef=i,this._dialog=o,this.id=`mat-mdc-dialog-title-${rR++}`}ngOnInit(){this._dialogRef||(this._dialogRef=Zb(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._dialogRef._containerInstance?._ariaLabelledByQueue?.push(this.id)})}ngOnDestroy(){let r=this._dialogRef?._containerInstance?._ariaLabelledByQueue;r&&Promise.resolve().then(()=>{let i=r.indexOf(this.id);i>-1&&r.splice(i,1)})}};t.\u0275fac=function(i){return new(i||t)(T(es,8),T(_t),T(mh))},t.\u0275dir=vt({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,o){i&2&&Sc("id",o.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0});let e=t;return e})(),$6=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=vt({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0});let e=t;return e})(),L6=(()=>{let t=class t{constructor(){this.align="start"}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=vt({type:t,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:4,hostBindings:function(i,o){i&2&&Pe("mat-mdc-dialog-actions-align-center",o.align==="center")("mat-mdc-dialog-actions-align-end",o.align==="end")},inputs:{align:"align"},standalone:!0});let e=t;return e})();function Zb(e,t){let n=e.nativeElement.parentElement;for(;n&&!n.classList.contains("mat-mdc-dialog-container");)n=n.parentElement;return n?t.find(r=>r.id===n.id):null}var F6=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Rt({type:t}),t.\u0275inj=Et({providers:[mh],imports:[Hb,Di,be,er,Xb,er]});let e=t;return e})();export{rr as a,Le as b,lR as c,Be as d,be as e,mf as f,wR as g,CR as h,jc as i,Ue as j,Ve as k,Ny as l,Qf as m,ee as n,HR as o,KR as p,X_ as q,Ls as r,co as s,Al as t,sO as u,aO as v,I3 as w,N3 as x,j3 as y,Ab as z,Ib as A,U3 as B,eh as C,pc as D,Tb as E,rh as F,tn as G,oe as H,kE as I,v8 as J,Di as K,es as L,ZE as M,mh as N,P6 as O,N6 as P,$6 as Q,L6 as R,F6 as S,zE as T,VE as U,U8 as V,W8 as W};
