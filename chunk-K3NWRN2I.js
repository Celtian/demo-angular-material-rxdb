import{$ as P,_ as O,aa as W,ba as $,ca as q,da as G,ea as H,f as C,fa as N,i as E,w as L}from"./chunk-FOP7KEGR.js";import{Cd as F,Dd as V,Ed as B,Kb as f,Lb as v,Ob as A,Pa as d,Qa as I,R as S,Rb as U,Sb as M,a as s,da as p,gb as D,ia as c,ma as R,pb as m,qb as u,r as l,x as a,y as k}from"./chunk-J44DNVTL.js";var X=(()=>{let t=class t{constructor(e,o){this.data=e,this.dialogRef=o}};t.\u0275fac=function(o){return new(o||t)(I(P),I(O))},t.\u0275cmp=R({type:t,selectors:[["app-confirm-dialog"]],standalone:!0,features:[A],decls:11,vars:10,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","","align","center"],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(o,n){o&1&&(m(0,"h1",0),f(1),u(),m(2,"div",1),f(3),u(),m(4,"div",2)(5,"button",3),f(6),U(7,"translate"),u(),m(8,"button",4),f(9),U(10,"translate"),u()()),o&2&&(d(),v(n.data.title),d(2),v(n.data.content),d(2),D("mat-dialog-close",!1),d(),v(M(7,6,"uni.no")),d(2),D("mat-dialog-close",!0),d(),v(M(10,8,"uni.yes")))},dependencies:[N,$,q,H,G,E,C,B,V],changeDetection:0});let i=t;return i})();var z=(()=>{let t=class t{constructor(e){this.dialog=e}open(e,o){return this.dialog.open(X,{width:"sm",data:{title:e,content:o}}).afterClosed()}};t.\u0275fac=function(o){return new(o||t)(c(W))},t.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var g=function(i){return i[i.Delete=0]="Delete",i[i.UnsavedWork=1]="UnsavedWork",i}(g||{}),ct=(()=>{let t=class t{constructor(e,o){this.confirm=e,this.translate=o}openCustomConfirmDialog(e){let o=this.getTitle(e),n=this.getContent(e);return this.open(o,n)}getTitle(e){switch(e){case g.Delete:return this.translate.instant("custom-confirm-dialog.delete-post.title");case g.UnsavedWork:return this.translate.instant("custom-confirm-dialog.unsaved-work.title");default:return this.translate.instant("custom-confirm-dialog.default.title")}}getContent(e){switch(e){case g.Delete:return this.translate.instant("custom-confirm-dialog.delete-post.content");case g.UnsavedWork:return this.translate.instant("custom-confirm-dialog.unsaved-work.content");default:return this.translate.instant("custom-confirm-dialog.default.content")}}open(e,o){return this.confirm.open(e,o).pipe(S(),a(n=>!!n))}};t.\u0275fac=function(o){return new(o||t)(c(z),c(F))},t.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var r=[];for(h=0;h<256;++h)r.push((h+256).toString(16).slice(1));var h;function J(i,t=0){return(r[i[t+0]]+r[i[t+1]]+r[i[t+2]]+r[i[t+3]]+"-"+r[i[t+4]]+r[i[t+5]]+"-"+r[i[t+6]]+r[i[t+7]]+"-"+r[i[t+8]]+r[i[t+9]]+"-"+r[i[t+10]]+r[i[t+11]]+r[i[t+12]]+r[i[t+13]]+r[i[t+14]]+r[i[t+15]]).toLowerCase()}var x,_=new Uint8Array(16);function j(){if(!x&&(x=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!x))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return x(_)}var tt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),w={randomUUID:tt};function et(i,t,y){if(w.randomUUID&&!t&&!i)return w.randomUUID();i=i||{};var e=i.random||(i.rng||j)();if(e[6]=e[6]&15|64,e[8]=e[8]&63|128,t){y=y||0;for(var o=0;o<16;++o)t[y+o]=e[o];return t}return J(e)}var T=et;var Mt=(()=>{let t=class t{constructor(e){this.rxdbProvider=e}get collection(){return this.rxdbProvider.getDatabaseCollection("posts")}create(e){return l(this.collection.insert(s({id:T()},e))).pipe(a(o=>o._data))}patch(e,o){return l(this.collection.findOne({selector:{id:e}}).update({$set:s({id:e},o)})).pipe(a(n=>s(s({},n._data),o)))}put(e,o){return l(this.collection.upsert(s({id:e},o))).pipe(a(n=>s(s({},n._data),o)))}detail(e){return l(this.collection.findOne({selector:{id:e}}).exec()).pipe(a(o=>o._data))}delete(e){return l(this.collection.findOne({selector:{id:e}}).remove()).pipe(a(o=>o._data))}list(e){let o=e.query?{title:{$regex:e.query,$options:"i"}}:void 0;return l(this.collection.find({skip:e.page-1,limit:e.limit,selector:o,sort:[{[e.sort]:e.order}]}).exec()).pipe(a(n=>n.map(K=>K._data)))}count(){return l(this.collection.count().exec())}listAndCount(e){return k([this.list(e),this.count()]).pipe(a(([o,n])=>({items:o,totalCount:n})))}};t.\u0275fac=function(o){return new(o||t)(c(L))},t.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();export{g as a,ct as b,Mt as c};
