import{B as F,R as $,S as B,T as L,U as O,V as P,W,X as q,Y as G,m as S,n as E}from"./chunk-JO7GBBUB.js";import{Kb as g,La as p,Lb as h,O as k,Pa as x,Qb as I,Rb as D,Va as R,a as s,aa as m,ea as d,hb as y,md as A,nd as C,od as V,q as l,qb as u,rb as f,w as a,x as T}from"./chunk-NOAIZCS2.js";var H=(()=>{let t=class t{constructor(e,o){this.data=e,this.dialogRef=o}};t.\u0275fac=function(o){return new(o||t)(x(B),x($))},t.\u0275cmp=R({type:t,selectors:[["app-confirm-dialog"]],decls:11,vars:10,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","","align","center"],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(o,r){o&1&&(u(0,"h1",0),g(1),f(),u(2,"div",1),g(3),f(),u(4,"div",2)(5,"button",3),g(6),I(7,"translate"),f(),u(8,"button",4),g(9),I(10,"translate"),f()()),o&2&&(p(),h(r.data.title),p(2),h(r.data.content),p(2),y("mat-dialog-close",!1),p(),h(D(7,6,"uni.no")),p(2),y("mat-dialog-close",!0),p(),h(D(10,8,"uni.yes")))},dependencies:[G,O,P,q,W,E,S,V,C],encapsulation:2,changeDetection:0});let i=t;return i})();var N=(()=>{let t=class t{constructor(e){this.dialog=e}open(e,o){return this.dialog.open(H,{width:"sm",data:{title:e,content:o}}).afterClosed()}};t.\u0275fac=function(o){return new(o||t)(d(L))},t.\u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var v=function(i){return i[i.Delete=0]="Delete",i[i.UnsavedWork=1]="UnsavedWork",i}(v||{}),st=(()=>{let t=class t{constructor(e,o){this.confirm=e,this.translate=o}openCustomConfirmDialog(e){let o=this.getTitle(e),r=this.getContent(e);return this.open(o,r)}getTitle(e){switch(e){case v.Delete:return this.translate.instant("custom-confirm-dialog.delete-post.title");case v.UnsavedWork:return this.translate.instant("custom-confirm-dialog.unsaved-work.title");default:return this.translate.instant("custom-confirm-dialog.default.title")}}getContent(e){switch(e){case v.Delete:return this.translate.instant("custom-confirm-dialog.delete-post.content");case v.UnsavedWork:return this.translate.instant("custom-confirm-dialog.unsaved-work.content");default:return this.translate.instant("custom-confirm-dialog.default.content")}}open(e,o){return this.confirm.open(e,o).pipe(k(),a(r=>!!r))}};t.\u0275fac=function(o){return new(o||t)(d(N),d(A))},t.\u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var n=[];for(let i=0;i<256;++i)n.push((i+256).toString(16).slice(1));function X(i,t=0){return(n[i[t+0]]+n[i[t+1]]+n[i[t+2]]+n[i[t+3]]+"-"+n[i[t+4]]+n[i[t+5]]+"-"+n[i[t+6]]+n[i[t+7]]+"-"+n[i[t+8]]+n[i[t+9]]+"-"+n[i[t+10]]+n[i[t+11]]+n[i[t+12]]+n[i[t+13]]+n[i[t+14]]+n[i[t+15]]).toLowerCase()}var b,Y=new Uint8Array(16);function w(){if(!b){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");b=crypto.getRandomValues.bind(crypto)}return b(Y)}var Z=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),M={randomUUID:Z};function _(i,t,c){if(M.randomUUID&&!t&&!i)return M.randomUUID();i=i||{};let e=i.random??i.rng?.()??w();if(e.length<16)throw new Error("Random bytes length must be >= 16");if(e[6]=e[6]&15|64,e[8]=e[8]&63|128,t){if(c=c||0,c<0||c+16>t.length)throw new RangeError(`UUID byte range ${c}:${c+15} is out of buffer bounds`);for(let o=0;o<16;++o)t[c+o]=e[o];return t}return X(e)}var j=_;var Dt=(()=>{let t=class t{constructor(e){this.rxdbProvider=e}get collection(){return this.rxdbProvider.getDatabaseCollection("posts")}create(e){return l(this.collection.insert(s({id:j()},e))).pipe(a(o=>o._data))}patch(e,o){return l(this.collection.findOne({selector:{id:e}}).update({$set:s({id:e},o)})).pipe(a(r=>s(s({},r._data),o)))}put(e,o){return l(this.collection.upsert(s({id:e},o))).pipe(a(r=>s(s({},r._data),o)))}detail(e){return l(this.collection.findOne({selector:{id:e}}).exec()).pipe(a(o=>o._data))}delete(e){return l(this.collection.findOne({selector:{id:e}}).remove()).pipe(a(o=>o._data))}list(e){let o=e.query?{title:{$regex:e.query,$options:"i"}}:void 0;return l(this.collection.find({skip:e.page-1,limit:e.limit,selector:o,sort:[{[e.sort]:e.order}]}).exec()).pipe(a(r=>r.map(z=>z._data)))}count(){return l(this.collection.count().exec())}listAndCount(e){return T([this.list(e),this.count()]).pipe(a(([o,r])=>({items:o,totalCount:r})))}};t.\u0275fac=function(o){return new(o||t)(d(F))},t.\u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();export{v as a,st as b,Dt as c};
