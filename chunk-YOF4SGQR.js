import{$ as O,_ as L,aa as P,ba as W,ca as $,da as q,ea as _,f as R,fa as G,i as A,w as B}from"./chunk-MD3C45FJ.js";import{Bd as E,Cd as F,Dd as V,Jb as f,Kb as v,Nb as k,Pa as d,Qa as y,Qb as I,R as S,Rb as U,a as s,da as p,gb as D,ia as c,ma as T,ob as m,pb as u,r as l,x as a,y as C}from"./chunk-OKNWWQ6Y.js";var H=(()=>{class t{constructor(e,i){this.data=e,this.dialogRef=i}static{this.\u0275fac=function(i){return new(i||t)(y(O),y(L))}}static{this.\u0275cmp=T({type:t,selectors:[["app-confirm-dialog"]],standalone:!0,features:[k],decls:11,vars:10,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","","align","center"],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(i,r){i&1&&(m(0,"h1",0),f(1),u(),m(2,"div",1),f(3),u(),m(4,"div",2)(5,"button",3),f(6),I(7,"translate"),u(),m(8,"button",4),f(9),I(10,"translate"),u()()),i&2&&(d(),v(r.data.title),d(2),v(r.data.content),d(2),D("mat-dialog-close",!1),d(),v(U(7,6,"uni.no")),d(2),D("mat-dialog-close",!0),d(),v(U(10,8,"uni.yes")))},dependencies:[G,W,$,_,q,A,R,V,F],changeDetection:0})}}return t})();var N=(()=>{class t{constructor(e){this.dialog=e}open(e,i){return this.dialog.open(H,{width:"sm",data:{title:e,content:i}}).afterClosed()}static{this.\u0275fac=function(i){return new(i||t)(c(P))}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var g=function(t){return t[t.Delete=0]="Delete",t[t.UnsavedWork=1]="UnsavedWork",t}(g||{}),lt=(()=>{class t{constructor(e,i){this.confirm=e,this.translate=i}openCustomConfirmDialog(e){let i=this.getTitle(e),r=this.getContent(e);return this.open(i,r)}getTitle(e){switch(e){case g.Delete:return this.translate.instant("custom-confirm-dialog.delete-post.title");case g.UnsavedWork:return this.translate.instant("custom-confirm-dialog.unsaved-work.title");default:return this.translate.instant("custom-confirm-dialog.default.title")}}getContent(e){switch(e){case g.Delete:return this.translate.instant("custom-confirm-dialog.delete-post.content");case g.UnsavedWork:return this.translate.instant("custom-confirm-dialog.unsaved-work.content");default:return this.translate.instant("custom-confirm-dialog.default.content")}}open(e,i){return this.confirm.open(e,i).pipe(S(),a(r=>!!r))}static{this.\u0275fac=function(i){return new(i||t)(c(N),c(E))}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var n=[];for(h=0;h<256;++h)n.push((h+256).toString(16).slice(1));var h;function X(t,o=0){return(n[t[o+0]]+n[t[o+1]]+n[t[o+2]]+n[t[o+3]]+"-"+n[t[o+4]]+n[t[o+5]]+"-"+n[t[o+6]]+n[t[o+7]]+"-"+n[t[o+8]]+n[t[o+9]]+"-"+n[t[o+10]]+n[t[o+11]]+n[t[o+12]]+n[t[o+13]]+n[t[o+14]]+n[t[o+15]]).toLowerCase()}var x,Y=new Uint8Array(16);function b(){if(!x&&(x=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!x))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return x(Y)}var Z=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),j={randomUUID:Z};function tt(t,o,e){if(j.randomUUID&&!o&&!t)return j.randomUUID();t=t||{};var i=t.random||(t.rng||b)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,o){e=e||0;for(var r=0;r<16;++r)o[e+r]=i[r];return o}return X(i)}var w=tt;var Ut=(()=>{class t{constructor(e){this.rxdbProvider=e}get collection(){return this.rxdbProvider.getDatabaseCollection("posts")}create(e){return l(this.collection.insert(s({id:w()},e))).pipe(a(i=>i._data))}patch(e,i){return l(this.collection.findOne({selector:{id:e}}).update({$set:s({id:e},i)})).pipe(a(r=>s(s({},r._data),i)))}put(e,i){return l(this.collection.upsert(s({id:e},i))).pipe(a(r=>s(s({},r._data),i)))}detail(e){return l(this.collection.findOne({selector:{id:e}}).exec()).pipe(a(i=>i._data))}delete(e){return l(this.collection.findOne({selector:{id:e}}).remove()).pipe(a(i=>i._data))}list(e){let i=e.query?{title:{$regex:e.query,$options:"i"}}:void 0;return l(this.collection.find({skip:e.page-1,limit:e.limit,selector:i,sort:[{[e.sort]:e.order}]}).exec()).pipe(a(r=>r.map(z=>z._data)))}count(){return l(this.collection.count().exec())}listAndCount(e){return C([this.list(e),this.count()]).pipe(a(([i,r])=>({items:i,totalCount:r})))}static{this.\u0275fac=function(i){return new(i||t)(c(B))}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();export{g as a,lt as b,Ut as c};
