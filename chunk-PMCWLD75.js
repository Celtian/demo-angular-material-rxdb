import{$ as J,$a as ym,A as Vs,Aa as Pr,B as On,Ba as qe,Bb as Sm,Ca as dm,Cb as hd,D as qs,Da as Bt,Db as mi,Dc as Nm,E as gt,Ea as ad,F as td,Fa as Ys,Fb as pd,Fc as nc,G as Ws,Ga as Xs,Gb as la,Gc as Lm,H as aa,Ha as Zs,Hb as gi,I as Hs,Ia as fm,J as Ne,Ja as hm,Jb as to,Ka as pm,Kb as vi,Kc as Fm,L as Dn,La as Xi,Lb as yi,M as Ks,Ma as mm,N as An,Na as We,O as ed,Oa as nn,P as rm,Pa as wr,Pc as Bm,Q as rd,Qa as Nr,Qb as ir,Qc as Cr,R as sa,Ra as on,Rb as Em,Rc as ic,S as Gs,Sa as gm,Sb as md,Sc as In,T as Ve,Ta as kn,Tc as He,U as vr,Ua as sd,Ub as gd,V as yr,Va as Js,W as nm,Wa as tc,X as Se,Xa as re,Xc as $m,Y as Ee,Ya as Ht,Z as im,Za as kt,Zc as jm,_a as vm,a as $,aa as Wt,ab as Re,b as bt,ba as om,bb as Zi,bc as rc,ca as ot,d as yx,da as Gt,db as bm,e as Us,ea as w,eb as cd,ec as Rm,f as bx,fa as nd,fb as _m,g as U,gb as wm,gc as Om,h as rr,ha as br,hb as ld,i as Xp,ia as nr,ib as ud,j as Rn,ja as am,jb as ca,jc as Dm,k as Zp,ka as sm,kc as Lr,l as zs,lb as xr,m as it,mb as xm,mc as oe,n as fe,na as wt,nb as Cm,nc as Am,o as ia,oa as Lt,p as en,pa as id,pc as km,q as Ce,qa as cm,qc as Im,r as lt,ra as ee,s as Jp,sa as Ct,sb as Ji,t as Yi,tb as hi,tc as Tm,u as tm,ua as Qs,ub as ec,uc as ua,v as em,va as _r,vb as dd,w as mt,wa as od,wb as fd,wc as Mm,x as oa,xa as rn,xb as pi,xc as Fr,y as he,ya as lm,yc as Pm,z as Ju,za as um}from"./chunk-LS3YDF6O.js";var Y_=yx((Bh,$h)=>{"use strict";(function(t,r){typeof Bh=="object"&&typeof $h<"u"?$h.exports=r():typeof define=="function"&&define.amd?define(r):(t=typeof globalThis<"u"?globalThis:t||self).Dexie=r()})(Bh,function(){"use strict";var t=function(a,c){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(a,c)},r=function(){return(r=Object.assign||function(a){for(var c,u=1,f=arguments.length;u<f;u++)for(var h in c=arguments[u])Object.prototype.hasOwnProperty.call(c,h)&&(a[h]=c[h]);return a}).apply(this,arguments)};function e(a,c,u){if(u||arguments.length===2)for(var f,h=0,g=c.length;h<g;h++)!f&&h in c||((f=f||Array.prototype.slice.call(c,0,h))[h]=c[h]);return a.concat(f||Array.prototype.slice.call(c))}var n=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,i=Object.keys,o=Array.isArray;function s(a,c){return typeof c!="object"||i(c).forEach(function(u){a[u]=c[u]}),a}typeof Promise>"u"||n.Promise||(n.Promise=Promise);var l=Object.getPrototypeOf,d={}.hasOwnProperty;function p(a,c){return d.call(a,c)}function m(a,c){typeof c=="function"&&(c=c(l(a))),(typeof Reflect>"u"?i:Reflect.ownKeys)(c).forEach(function(u){S(a,u,c[u])})}var y=Object.defineProperty;function S(a,c,u,f){y(a,c,s(u&&p(u,"get")&&typeof u.get=="function"?{get:u.get,set:u.set,configurable:!0}:{value:u,configurable:!0,writable:!0},f))}function A(a){return{from:function(c){return a.prototype=Object.create(c.prototype),S(a.prototype,"constructor",a),{extend:m.bind(null,a.prototype)}}}}var N=Object.getOwnPropertyDescriptor,j=[].slice;function G(a,c,u){return j.call(a,c,u)}function tt(a,c){return c(a)}function rt(a){if(!a)throw new Error("Assertion Failed")}function et(a){n.setImmediate?setImmediate(a):setTimeout(a,0)}function Tt(a,c){if(typeof c=="string"&&p(a,c))return a[c];if(!c)return a;if(typeof c!="string"){for(var u=[],f=0,h=c.length;f<h;++f){var g=Tt(a,c[f]);u.push(g)}return u}var v=c.indexOf(".");if(v!==-1){var b=a[c.substr(0,v)];return b==null?void 0:Tt(b,c.substr(v+1))}}function ct(a,c,u){if(a&&c!==void 0&&!("isFrozen"in Object&&Object.isFrozen(a)))if(typeof c!="string"&&"length"in c){rt(typeof u!="string"&&"length"in u);for(var f=0,h=c.length;f<h;++f)ct(a,c[f],u[f])}else{var g,v,b=c.indexOf(".");b!==-1?(g=c.substr(0,b),(v=c.substr(b+1))===""?u===void 0?o(a)&&!isNaN(parseInt(g))?a.splice(g,1):delete a[g]:a[g]=u:ct(b=!(b=a[g])||!p(a,g)?a[g]={}:b,v,u)):u===void 0?o(a)&&!isNaN(parseInt(c))?a.splice(c,1):delete a[c]:a[c]=u}}function Nt(a){var c,u={};for(c in a)p(a,c)&&(u[c]=a[c]);return u}var At=[].concat;function Vt(a){return At.apply([],a)}var Jr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Vt([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(c){return c+a+"Array"})}))).filter(function(a){return n[a]}),ve=new Set(Jr.map(function(a){return n[a]})),je=null;function pr(a){return je=new WeakMap,a=(function c(u){if(!u||typeof u!="object")return u;var f=je.get(u);if(f)return f;if(o(u)){f=[],je.set(u,f);for(var h=0,g=u.length;h<g;++h)f.push(c(u[h]))}else if(ve.has(u.constructor))f=u;else{var v,b=l(u);for(v in f=b===Object.prototype?{}:Object.create(b),je.set(u,f),u)p(u,v)&&(f[v]=c(u[v]))}return f})(a),je=null,a}var ri={}.toString;function mr(a){return ri.call(a).slice(8,-1)}var zo=typeof Symbol<"u"?Symbol.iterator:"@@iterator",mu=typeof zo=="symbol"?function(a){var c;return a!=null&&(c=a[zo])&&c.apply(a)}:function(){return null};function Xr(a,c){return c=a.indexOf(c),0<=c&&a.splice(c,1),0<=c}var gn={};function Pe(a){var c,u,f,h;if(arguments.length===1){if(o(a))return a.slice();if(this===gn&&typeof a=="string")return[a];if(h=mu(a)){for(u=[];!(f=h.next()).done;)u.push(f.value);return u}if(a==null)return[a];if(typeof(c=a.length)!="number")return[a];for(u=new Array(c);c--;)u[c]=a[c];return u}for(c=arguments.length,u=new Array(c);c--;)u[c]=arguments[c];return u}var vn=typeof Symbol<"u"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ho=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],er=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ho),Vo={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function gr(a,c){this.name=a,this.message=c}function hs(a,c){return a+". Errors: "+Object.keys(c).map(function(u){return c[u].toString()}).filter(function(u,f,h){return h.indexOf(u)===f}).join(`
`)}function ce(a,c,u,f){this.failures=c,this.failedKeys=f,this.successCount=u,this.message=hs(a,c)}function le(a,c){this.name="BulkError",this.failures=Object.keys(c).map(function(u){return c[u]}),this.failuresByPos=c,this.message=hs(a,this.failures)}A(gr).from(Error).extend({toString:function(){return this.name+": "+this.message}}),A(ce).from(gr),A(le).from(gr);var yn=er.reduce(function(a,c){return a[c]=c+"Error",a},{}),gu=gr,at=er.reduce(function(a,c){var u=c+"Error";function f(h,g){this.name=u,h?typeof h=="string"?(this.message="".concat(h).concat(g?`
 `+g:""),this.inner=g||null):typeof h=="object"&&(this.message="".concat(h.name," ").concat(h.message),this.inner=h):(this.message=Vo[c]||u,this.inner=null)}return A(f).from(gu),a[c]=f,a},{});at.Syntax=SyntaxError,at.Type=TypeError,at.Range=RangeError;var vp=Ho.reduce(function(a,c){return a[c+"Error"]=at[c],a},{}),ps=er.reduce(function(a,c){return["Syntax","Type","Range"].indexOf(c)===-1&&(a[c+"Error"]=at[c]),a},{});function Mt(){}function qo(a){return a}function zw(a,c){return a==null||a===qo?c:function(u){return c(a(u))}}function ni(a,c){return function(){a.apply(this,arguments),c.apply(this,arguments)}}function Vw(a,c){return a===Mt?c:function(){var u=a.apply(this,arguments);u!==void 0&&(arguments[0]=u);var f=this.onsuccess,h=this.onerror;this.onsuccess=null,this.onerror=null;var g=c.apply(this,arguments);return f&&(this.onsuccess=this.onsuccess?ni(f,this.onsuccess):f),h&&(this.onerror=this.onerror?ni(h,this.onerror):h),g!==void 0?g:u}}function qw(a,c){return a===Mt?c:function(){a.apply(this,arguments);var u=this.onsuccess,f=this.onerror;this.onsuccess=this.onerror=null,c.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?ni(u,this.onsuccess):u),f&&(this.onerror=this.onerror?ni(f,this.onerror):f)}}function Ww(a,c){return a===Mt?c:function(u){var f=a.apply(this,arguments);s(u,f);var h=this.onsuccess,g=this.onerror;return this.onsuccess=null,this.onerror=null,u=c.apply(this,arguments),h&&(this.onsuccess=this.onsuccess?ni(h,this.onsuccess):h),g&&(this.onerror=this.onerror?ni(g,this.onerror):g),f===void 0?u===void 0?void 0:u:s(f,u)}}function Hw(a,c){return a===Mt?c:function(){return c.apply(this,arguments)!==!1&&a.apply(this,arguments)}}function vu(a,c){return a===Mt?c:function(){var u=a.apply(this,arguments);if(u&&typeof u.then=="function"){for(var f=this,h=arguments.length,g=new Array(h);h--;)g[h]=arguments[h];return u.then(function(){return c.apply(f,g)})}return c.apply(this,arguments)}}ps.ModifyError=ce,ps.DexieError=gr,ps.BulkError=le;var Ir=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function yp(a){Ir=a}var Wo={},bp=100,Jr=typeof Promise>"u"?[]:(function(){var a=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[a,l(a),a];var c=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[c,l(c),a]})(),Ho=Jr[0],er=Jr[1],Jr=Jr[2],er=er&&er.then,ii=Ho&&Ho.constructor,yu=!!Jr,Ko=function(a,c){Go.push([a,c]),ms&&(queueMicrotask(Gw),ms=!1)},bu=!0,ms=!0,oi=[],gs=[],_u=qo,bn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Mt,pgp:!1,env:{},finalize:Mt},nt=bn,Go=[],ai=0,vs=[];function Y(a){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var c=this._PSD=nt;if(typeof a!="function"){if(a!==Wo)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&xu(this,this._value))}this._state=null,this._value=null,++c.ref,(function u(f,h){try{h(function(g){if(f._state===null){if(g===f)throw new TypeError("A promise cannot be resolved with itself.");var v=f._lib&&Vi();g&&typeof g.then=="function"?u(f,function(b,x){g instanceof Y?g._then(b,x):g.then(b,x)}):(f._state=!0,f._value=g,wp(f)),v&&qi()}},xu.bind(null,f))}catch(g){xu(f,g)}})(this,a)}var wu={get:function(){var a=nt,c=ws;function u(f,h){var g=this,v=!a.global&&(a!==nt||c!==ws),b=v&&!wn(),x=new Y(function(E,D){Cu(g,new _p(Cp(f,a,v,b),Cp(h,a,v,b),E,D,a))});return this._consoleTask&&(x._consoleTask=this._consoleTask),x}return u.prototype=Wo,u},set:function(a){S(this,"then",a&&a.prototype===Wo?wu:{get:function(){return a},set:wu.set})}};function _p(a,c,u,f,h){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof c=="function"?c:null,this.resolve=u,this.reject=f,this.psd=h}function xu(a,c){var u,f;gs.push(c),a._state===null&&(u=a._lib&&Vi(),c=_u(c),a._state=!1,a._value=c,f=a,oi.some(function(h){return h._value===f._value})||oi.push(f),wp(a),u&&qi())}function wp(a){var c=a._listeners;a._listeners=[];for(var u=0,f=c.length;u<f;++u)Cu(a,c[u]);var h=a._PSD;--h.ref||h.finalize(),ai===0&&(++ai,Ko(function(){--ai==0&&Su()},[]))}function Cu(a,c){if(a._state!==null){var u=a._state?c.onFulfilled:c.onRejected;if(u===null)return(a._state?c.resolve:c.reject)(a._value);++c.psd.ref,++ai,Ko(Kw,[u,a,c])}else a._listeners.push(c)}function Kw(a,c,u){try{var f,h=c._value;!c._state&&gs.length&&(gs=[]),f=Ir&&c._consoleTask?c._consoleTask.run(function(){return a(h)}):a(h),c._state||gs.indexOf(h)!==-1||(function(g){for(var v=oi.length;v;)if(oi[--v]._value===g._value)return oi.splice(v,1)})(c),u.resolve(f)}catch(g){u.reject(g)}finally{--ai==0&&Su(),--u.psd.ref||u.psd.finalize()}}function Gw(){si(bn,function(){Vi()&&qi()})}function Vi(){var a=bu;return ms=bu=!1,a}function qi(){var a,c,u;do for(;0<Go.length;)for(a=Go,Go=[],u=a.length,c=0;c<u;++c){var f=a[c];f[0].apply(null,f[1])}while(0<Go.length);ms=bu=!0}function Su(){var a=oi;oi=[],a.forEach(function(f){f._PSD.onunhandled.call(null,f._value,f)});for(var c=vs.slice(0),u=c.length;u;)c[--u]()}function ys(a){return new Y(Wo,!1,a)}function Kt(a,c){var u=nt;return function(){var f=Vi(),h=nt;try{return xn(u,!0),a.apply(this,arguments)}catch(g){c&&c(g)}finally{xn(h,!1),f&&qi()}}}m(Y.prototype,{then:wu,_then:function(a,c){Cu(this,new _p(null,null,a,c,nt))},catch:function(a){if(arguments.length===1)return this.then(null,a);var c=a,u=arguments[1];return typeof c=="function"?this.then(null,function(f){return(f instanceof c?u:ys)(f)}):this.then(null,function(f){return(f&&f.name===c?u:ys)(f)})},finally:function(a){return this.then(function(c){return Y.resolve(a()).then(function(){return c})},function(c){return Y.resolve(a()).then(function(){return ys(c)})})},timeout:function(a,c){var u=this;return a<1/0?new Y(function(f,h){var g=setTimeout(function(){return h(new at.Timeout(c))},a);u.then(f,h).finally(clearTimeout.bind(null,g))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&S(Y.prototype,Symbol.toStringTag,"Dexie.Promise"),bn.env=xp(),m(Y,{all:function(){var a=Pe.apply(null,arguments).map(xs);return new Y(function(c,u){a.length===0&&c([]);var f=a.length;a.forEach(function(h,g){return Y.resolve(h).then(function(v){a[g]=v,--f||c(a)},u)})})},resolve:function(a){return a instanceof Y?a:a&&typeof a.then=="function"?new Y(function(c,u){a.then(c,u)}):new Y(Wo,!0,a)},reject:ys,race:function(){var a=Pe.apply(null,arguments).map(xs);return new Y(function(c,u){a.map(function(f){return Y.resolve(f).then(c,u)})})},PSD:{get:function(){return nt},set:function(a){return nt=a}},totalEchoes:{get:function(){return ws}},newPSD:_n,usePSD:si,scheduler:{get:function(){return Ko},set:function(a){Ko=a}},rejectionMapper:{get:function(){return _u},set:function(a){_u=a}},follow:function(a,c){return new Y(function(u,f){return _n(function(h,g){var v=nt;v.unhandleds=[],v.onunhandled=g,v.finalize=ni(function(){var b,x=this;b=function(){x.unhandleds.length===0?h():g(x.unhandleds[0])},vs.push(function E(){b(),vs.splice(vs.indexOf(E),1)}),++ai,Ko(function(){--ai==0&&Su()},[])},v.finalize),a()},c,u,f)})}}),ii&&(ii.allSettled&&S(Y,"allSettled",function(){var a=Pe.apply(null,arguments).map(xs);return new Y(function(c){a.length===0&&c([]);var u=a.length,f=new Array(u);a.forEach(function(h,g){return Y.resolve(h).then(function(v){return f[g]={status:"fulfilled",value:v}},function(v){return f[g]={status:"rejected",reason:v}}).then(function(){return--u||c(f)})})})}),ii.any&&typeof AggregateError<"u"&&S(Y,"any",function(){var a=Pe.apply(null,arguments).map(xs);return new Y(function(c,u){a.length===0&&u(new AggregateError([]));var f=a.length,h=new Array(f);a.forEach(function(g,v){return Y.resolve(g).then(function(b){return c(b)},function(b){h[v]=b,--f||u(new AggregateError(h))})})})}),ii.withResolvers&&(Y.withResolvers=ii.withResolvers));var ue={awaits:0,echoes:0,id:0},Qw=0,bs=[],_s=0,ws=0,Yw=0;function _n(a,c,u,f){var h=nt,g=Object.create(h);return g.parent=h,g.ref=0,g.global=!1,g.id=++Yw,bn.env,g.env=yu?{Promise:Y,PromiseProp:{value:Y,configurable:!0,writable:!0},all:Y.all,race:Y.race,allSettled:Y.allSettled,any:Y.any,resolve:Y.resolve,reject:Y.reject}:{},c&&s(g,c),++h.ref,g.finalize=function(){--this.parent.ref||this.parent.finalize()},f=si(g,a,u,f),g.ref===0&&g.finalize(),f}function Wi(){return ue.id||(ue.id=++Qw),++ue.awaits,ue.echoes+=bp,ue.id}function wn(){return!!ue.awaits&&(--ue.awaits==0&&(ue.id=0),ue.echoes=ue.awaits*bp,!0)}function xs(a){return ue.echoes&&a&&a.constructor===ii?(Wi(),a.then(function(c){return wn(),c},function(c){return wn(),Zt(c)})):a}function Xw(){var a=bs[bs.length-1];bs.pop(),xn(a,!1)}function xn(a,c){var u,f=nt;(c?!ue.echoes||_s++&&a===nt:!_s||--_s&&a===nt)||queueMicrotask(c?function(h){++ws,ue.echoes&&--ue.echoes!=0||(ue.echoes=ue.awaits=ue.id=0),bs.push(nt),xn(h,!0)}.bind(null,a):Xw),a!==nt&&(nt=a,f===bn&&(bn.env=xp()),yu&&(u=bn.env.Promise,c=a.env,(f.global||a.global)&&(Object.defineProperty(n,"Promise",c.PromiseProp),u.all=c.all,u.race=c.race,u.resolve=c.resolve,u.reject=c.reject,c.allSettled&&(u.allSettled=c.allSettled),c.any&&(u.any=c.any))))}function xp(){var a=n.Promise;return yu?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(n,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject}:{}}function si(a,c,u,f,h){var g=nt;try{return xn(a,!0),c(u,f,h)}finally{xn(g,!1)}}function Cp(a,c,u,f){return typeof a!="function"?a:function(){var h=nt;u&&Wi(),xn(c,!0);try{return a.apply(this,arguments)}finally{xn(h,!1),f&&queueMicrotask(wn)}}}function Eu(a){Promise===ii&&ue.echoes===0?_s===0?a():enqueueNativeMicroTask(a):setTimeout(a,0)}(""+er).indexOf("[native code]")===-1&&(Wi=wn=Mt);var Zt=Y.reject,ci="\uFFFF",Zr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Sp="String expected.",Hi=[],Cs="__dbnames",Ru="readonly",Ou="readwrite";function li(a,c){return a?c?function(){return a.apply(this,arguments)&&c.apply(this,arguments)}:a:c}var Ep={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ss(a){return typeof a!="string"||/\./.test(a)?function(c){return c}:function(c){return c[a]===void 0&&a in c&&delete(c=pr(c))[a],c}}function Rp(){throw at.Type()}function _t(a,c){try{var u=Op(a),f=Op(c);if(u!==f)return u==="Array"?1:f==="Array"?-1:u==="binary"?1:f==="binary"?-1:u==="string"?1:f==="string"?-1:u==="Date"?1:f!=="Date"?NaN:-1;switch(u){case"number":case"Date":case"string":return c<a?1:a<c?-1:0;case"binary":return(function(h,g){for(var v=h.length,b=g.length,x=v<b?v:b,E=0;E<x;++E)if(h[E]!==g[E])return h[E]<g[E]?-1:1;return v===b?0:v<b?-1:1})(Dp(a),Dp(c));case"Array":return(function(h,g){for(var v=h.length,b=g.length,x=v<b?v:b,E=0;E<x;++E){var D=_t(h[E],g[E]);if(D!==0)return D}return v===b?0:v<b?-1:1})(a,c)}}catch{}return NaN}function Op(a){var c=typeof a;return c!="object"?c:ArrayBuffer.isView(a)?"binary":(a=mr(a),a==="ArrayBuffer"?"binary":a)}function Dp(a){return a instanceof Uint8Array?a:ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var Ap=(qt.prototype._trans=function(a,c,u){var f=this._tx||nt.trans,h=this.name,g=Ir&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(a==="readonly"?"read":"write"," ").concat(this.name));function v(E,D,_){if(!_.schema[h])throw new at.NotFound("Table "+h+" not part of transaction");return c(_.idbtrans,_)}var b=Vi();try{var x=f&&f.db._novip===this.db._novip?f===nt.trans?f._promise(a,v,u):_n(function(){return f._promise(a,v,u)},{trans:f,transless:nt.transless||nt}):(function E(D,_,I,C){if(D.idbdb&&(D._state.openComplete||nt.letThrough||D._vip)){var O=D._createTransaction(_,I,D._dbSchema);try{O.create(),D._state.PR1398_maxLoop=3}catch(k){return k.name===yn.InvalidState&&D.isOpen()&&0<--D._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),D.close({disableAutoOpen:!1}),D.open().then(function(){return E(D,_,I,C)})):Zt(k)}return O._promise(_,function(k,R){return _n(function(){return nt.trans=O,C(k,R,O)})}).then(function(k){if(_==="readwrite")try{O.idbtrans.commit()}catch{}return _==="readonly"?k:O._completion.then(function(){return k})})}if(D._state.openComplete)return Zt(new at.DatabaseClosed(D._state.dbOpenError));if(!D._state.isBeingOpened){if(!D._state.autoOpen)return Zt(new at.DatabaseClosed);D.open().catch(Mt)}return D._state.dbReadyPromise.then(function(){return E(D,_,I,C)})})(this.db,a,[this.name],v);return g&&(x._consoleTask=g,x=x.catch(function(E){return console.trace(E),Zt(E)})),x}finally{b&&qi()}},qt.prototype.get=function(a,c){var u=this;return a&&a.constructor===Object?this.where(a).first(c):a==null?Zt(new at.Type("Invalid argument to Table.get()")):this._trans("readonly",function(f){return u.core.get({trans:f,key:a}).then(function(h){return u.hook.reading.fire(h)})}).then(c)},qt.prototype.where=function(a){if(typeof a=="string")return new this.db.WhereClause(this,a);if(o(a))return new this.db.WhereClause(this,"[".concat(a.join("+"),"]"));var c=i(a);if(c.length===1)return this.where(c[0]).equals(a[c[0]]);var u=this.schema.indexes.concat(this.schema.primKey).filter(function(b){if(b.compound&&c.every(function(E){return 0<=b.keyPath.indexOf(E)})){for(var x=0;x<c.length;++x)if(c.indexOf(b.keyPath[x])===-1)return!1;return!0}return!1}).sort(function(b,x){return b.keyPath.length-x.keyPath.length})[0];if(u&&this.db._maxKey!==ci){var g=u.keyPath.slice(0,c.length);return this.where(g).equals(g.map(function(x){return a[x]}))}!u&&Ir&&console.warn("The query ".concat(JSON.stringify(a)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(c.join("+"),"]"));var f=this.schema.idxByName;function h(b,x){return _t(b,x)===0}var v=c.reduce(function(_,x){var E=_[0],D=_[1],_=f[x],I=a[x];return[E||_,E||!_?li(D,_&&_.multi?function(C){return C=Tt(C,x),o(C)&&C.some(function(O){return h(I,O)})}:function(C){return h(I,Tt(C,x))}):D]},[null,null]),g=v[0],v=v[1];return g?this.where(g.name).equals(a[g.keyPath]).filter(v):u?this.filter(v):this.where(c).equals("")},qt.prototype.filter=function(a){return this.toCollection().and(a)},qt.prototype.count=function(a){return this.toCollection().count(a)},qt.prototype.offset=function(a){return this.toCollection().offset(a)},qt.prototype.limit=function(a){return this.toCollection().limit(a)},qt.prototype.each=function(a){return this.toCollection().each(a)},qt.prototype.toArray=function(a){return this.toCollection().toArray(a)},qt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},qt.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,o(a)?"[".concat(a.join("+"),"]"):a))},qt.prototype.reverse=function(){return this.toCollection().reverse()},qt.prototype.mapToClass=function(a){var c,u=this.db,f=this.name;function h(){return c!==null&&c.apply(this,arguments)||this}(this.schema.mappedClass=a).prototype instanceof Rp&&((function(x,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function D(){this.constructor=x}t(x,E),x.prototype=E===null?Object.create(E):(D.prototype=E.prototype,new D)})(h,c=a),Object.defineProperty(h.prototype,"db",{get:function(){return u},enumerable:!1,configurable:!0}),h.prototype.table=function(){return f},a=h);for(var g=new Set,v=a.prototype;v;v=l(v))Object.getOwnPropertyNames(v).forEach(function(x){return g.add(x)});function b(x){if(!x)return x;var E,D=Object.create(a.prototype);for(E in x)if(!g.has(E))try{D[E]=x[E]}catch{}return D}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=b,this.hook("reading",b),a},qt.prototype.defineClass=function(){return this.mapToClass(function(a){s(this,a)})},qt.prototype.add=function(a,c){var u=this,f=this.schema.primKey,h=f.auto,g=f.keyPath,v=a;return g&&h&&(v=Ss(g)(a)),this._trans("readwrite",function(b){return u.core.mutate({trans:b,type:"add",keys:c!=null?[c]:null,values:[v]})}).then(function(b){return b.numFailures?Y.reject(b.failures[0]):b.lastResult}).then(function(b){if(g)try{ct(a,g,b)}catch{}return b})},qt.prototype.update=function(a,c){return typeof a!="object"||o(a)?this.where(":id").equals(a).modify(c):(a=Tt(a,this.schema.primKey.keyPath),a===void 0?Zt(new at.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(a).modify(c))},qt.prototype.put=function(a,c){var u=this,f=this.schema.primKey,h=f.auto,g=f.keyPath,v=a;return g&&h&&(v=Ss(g)(a)),this._trans("readwrite",function(b){return u.core.mutate({trans:b,type:"put",values:[v],keys:c!=null?[c]:null})}).then(function(b){return b.numFailures?Y.reject(b.failures[0]):b.lastResult}).then(function(b){if(g)try{ct(a,g,b)}catch{}return b})},qt.prototype.delete=function(a){var c=this;return this._trans("readwrite",function(u){return c.core.mutate({trans:u,type:"delete",keys:[a]})}).then(function(u){return u.numFailures?Y.reject(u.failures[0]):void 0})},qt.prototype.clear=function(){var a=this;return this._trans("readwrite",function(c){return a.core.mutate({trans:c,type:"deleteRange",range:Ep})}).then(function(c){return c.numFailures?Y.reject(c.failures[0]):void 0})},qt.prototype.bulkGet=function(a){var c=this;return this._trans("readonly",function(u){return c.core.getMany({keys:a,trans:u}).then(function(f){return f.map(function(h){return c.hook.reading.fire(h)})})})},qt.prototype.bulkAdd=function(a,c,u){var f=this,h=Array.isArray(c)?c:void 0,g=(u=u||(h?void 0:c))?u.allKeys:void 0;return this._trans("readwrite",function(v){var E=f.schema.primKey,b=E.auto,E=E.keyPath;if(E&&h)throw new at.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(h&&h.length!==a.length)throw new at.InvalidArgument("Arguments objects and keys must have the same length");var x=a.length,E=E&&b?a.map(Ss(E)):a;return f.core.mutate({trans:v,type:"add",keys:h,values:E,wantResults:g}).then(function(O){var _=O.numFailures,I=O.results,C=O.lastResult,O=O.failures;if(_===0)return g?I:C;throw new le("".concat(f.name,".bulkAdd(): ").concat(_," of ").concat(x," operations failed"),O)})})},qt.prototype.bulkPut=function(a,c,u){var f=this,h=Array.isArray(c)?c:void 0,g=(u=u||(h?void 0:c))?u.allKeys:void 0;return this._trans("readwrite",function(v){var E=f.schema.primKey,b=E.auto,E=E.keyPath;if(E&&h)throw new at.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(h&&h.length!==a.length)throw new at.InvalidArgument("Arguments objects and keys must have the same length");var x=a.length,E=E&&b?a.map(Ss(E)):a;return f.core.mutate({trans:v,type:"put",keys:h,values:E,wantResults:g}).then(function(O){var _=O.numFailures,I=O.results,C=O.lastResult,O=O.failures;if(_===0)return g?I:C;throw new le("".concat(f.name,".bulkPut(): ").concat(_," of ").concat(x," operations failed"),O)})})},qt.prototype.bulkUpdate=function(a){var c=this,u=this.core,f=a.map(function(v){return v.key}),h=a.map(function(v){return v.changes}),g=[];return this._trans("readwrite",function(v){return u.getMany({trans:v,keys:f,cache:"clone"}).then(function(b){var x=[],E=[];a.forEach(function(_,I){var C=_.key,O=_.changes,k=b[I];if(k){for(var R=0,T=Object.keys(O);R<T.length;R++){var M=T[R],P=O[M];if(M===c.schema.primKey.keyPath){if(_t(P,C)!==0)throw new at.Constraint("Cannot update primary key in bulkUpdate()")}else ct(k,M,P)}g.push(I),x.push(C),E.push(k)}});var D=x.length;return u.mutate({trans:v,type:"put",keys:x,values:E,updates:{keys:f,changeSpecs:h}}).then(function(_){var I=_.numFailures,C=_.failures;if(I===0)return D;for(var O=0,k=Object.keys(C);O<k.length;O++){var R,T=k[O],M=g[Number(T)];M!=null&&(R=C[T],delete C[T],C[M]=R)}throw new le("".concat(c.name,".bulkUpdate(): ").concat(I," of ").concat(D," operations failed"),C)})})})},qt.prototype.bulkDelete=function(a){var c=this,u=a.length;return this._trans("readwrite",function(f){return c.core.mutate({trans:f,type:"delete",keys:a})}).then(function(v){var h=v.numFailures,g=v.lastResult,v=v.failures;if(h===0)return g;throw new le("".concat(c.name,".bulkDelete(): ").concat(h," of ").concat(u," operations failed"),v)})},qt);function qt(){}function Qo(a){function c(v,b){if(b){for(var x=arguments.length,E=new Array(x-1);--x;)E[x-1]=arguments[x];return u[v].subscribe.apply(null,E),a}if(typeof v=="string")return u[v]}var u={};c.addEventType=g;for(var f=1,h=arguments.length;f<h;++f)g(arguments[f]);return c;function g(v,b,x){if(typeof v!="object"){var E;b=b||Hw;var D={subscribers:[],fire:x=x||Mt,subscribe:function(_){D.subscribers.indexOf(_)===-1&&(D.subscribers.push(_),D.fire=b(D.fire,_))},unsubscribe:function(_){D.subscribers=D.subscribers.filter(function(I){return I!==_}),D.fire=D.subscribers.reduce(b,x)}};return u[v]=c[v]=D}i(E=v).forEach(function(_){var I=E[_];if(o(I))g(_,E[_][0],E[_][1]);else{if(I!=="asap")throw new at.InvalidArgument("Invalid event config");var C=g(_,qo,function(){for(var O=arguments.length,k=new Array(O);O--;)k[O]=arguments[O];C.subscribers.forEach(function(R){et(function(){R.apply(null,k)})})})}})}}function Yo(a,c){return A(c).from({prototype:a}),c}function Ki(a,c){return!(a.filter||a.algorithm||a.or)&&(c?a.justLimit:!a.replayFilter)}function Du(a,c){a.filter=li(a.filter,c)}function Au(a,c,u){var f=a.replayFilter;a.replayFilter=f?function(){return li(f(),c())}:c,a.justLimit=u&&!f}function Es(a,c){if(a.isPrimKey)return c.primaryKey;var u=c.getIndexByKeyPath(a.index);if(!u)throw new at.Schema("KeyPath "+a.index+" on object store "+c.name+" is not indexed");return u}function kp(a,c,u){var f=Es(a,c.schema);return c.openCursor({trans:u,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:f,range:a.range}})}function Rs(a,c,u,f){var h=a.replayFilter?li(a.filter,a.replayFilter()):a.filter;if(a.or){var g={},v=function(b,x,E){var D,_;h&&!h(x,E,function(I){return x.stop(I)},function(I){return x.fail(I)})||((_=""+(D=x.primaryKey))=="[object ArrayBuffer]"&&(_=""+new Uint8Array(D)),p(g,_)||(g[_]=!0,c(b,x,E)))};return Promise.all([a.or._iterate(v,u),Ip(kp(a,f,u),a.algorithm,v,!a.keysOnly&&a.valueMapper)])}return Ip(kp(a,f,u),li(a.algorithm,h),c,!a.keysOnly&&a.valueMapper)}function Ip(a,c,u,f){var h=Kt(f?function(g,v,b){return u(f(g),v,b)}:u);return a.then(function(g){if(g)return g.start(function(){var v=function(){return g.continue()};c&&!c(g,function(b){return v=b},function(b){g.stop(b),v=Mt},function(b){g.fail(b),v=Mt})||h(g.value,g,function(b){return v=b}),v()})})}var Jr=Symbol(),Xo=(Tp.prototype.execute=function(a){if(this.add!==void 0){var c=this.add;if(o(c))return e(e([],o(a)?a:[],!0),c,!0).sort();if(typeof c=="number")return(Number(a)||0)+c;if(typeof c=="bigint")try{return BigInt(a)+c}catch{return BigInt(0)+c}throw new TypeError("Invalid term ".concat(c))}if(this.remove!==void 0){var u=this.remove;if(o(u))return o(a)?a.filter(function(f){return!u.includes(f)}).sort():[];if(typeof u=="number")return Number(a)-u;if(typeof u=="bigint")try{return BigInt(a)-u}catch{return BigInt(0)-u}throw new TypeError("Invalid subtrahend ".concat(u))}return c=(c=this.replacePrefix)===null||c===void 0?void 0:c[0],c&&typeof a=="string"&&a.startsWith(c)?this.replacePrefix[1]+a.substring(c.length):a},Tp);function Tp(a){Object.assign(this,a)}var Zw=(xt.prototype._read=function(a,c){var u=this._ctx;return u.error?u.table._trans(null,Zt.bind(null,u.error)):u.table._trans("readonly",a).then(c)},xt.prototype._write=function(a){var c=this._ctx;return c.error?c.table._trans(null,Zt.bind(null,c.error)):c.table._trans("readwrite",a,"locked")},xt.prototype._addAlgorithm=function(a){var c=this._ctx;c.algorithm=li(c.algorithm,a)},xt.prototype._iterate=function(a,c){return Rs(this._ctx,a,c,this._ctx.table.core)},xt.prototype.clone=function(a){var c=Object.create(this.constructor.prototype),u=Object.create(this._ctx);return a&&s(u,a),c._ctx=u,c},xt.prototype.raw=function(){return this._ctx.valueMapper=null,this},xt.prototype.each=function(a){var c=this._ctx;return this._read(function(u){return Rs(c,a,u,c.table.core)})},xt.prototype.count=function(a){var c=this;return this._read(function(u){var f=c._ctx,h=f.table.core;if(Ki(f,!0))return h.count({trans:u,query:{index:Es(f,h.schema),range:f.range}}).then(function(v){return Math.min(v,f.limit)});var g=0;return Rs(f,function(){return++g,!1},u,h).then(function(){return g})}).then(a)},xt.prototype.sortBy=function(a,c){var u=a.split(".").reverse(),f=u[0],h=u.length-1;function g(x,E){return E?g(x[u[E]],E-1):x[f]}var v=this._ctx.dir==="next"?1:-1;function b(x,E){return _t(g(x,h),g(E,h))*v}return this.toArray(function(x){return x.sort(b)}).then(c)},xt.prototype.toArray=function(a){var c=this;return this._read(function(u){var f=c._ctx;if(f.dir==="next"&&Ki(f,!0)&&0<f.limit){var h=f.valueMapper,g=Es(f,f.table.core.schema);return f.table.core.query({trans:u,limit:f.limit,values:!0,query:{index:g,range:f.range}}).then(function(b){return b=b.result,h?b.map(h):b})}var v=[];return Rs(f,function(b){return v.push(b)},u,f.table.core).then(function(){return v})},a)},xt.prototype.offset=function(a){var c=this._ctx;return a<=0||(c.offset+=a,Ki(c)?Au(c,function(){var u=a;return function(f,h){return u===0||(u===1?--u:h(function(){f.advance(u),u=0}),!1)}}):Au(c,function(){var u=a;return function(){return--u<0}})),this},xt.prototype.limit=function(a){return this._ctx.limit=Math.min(this._ctx.limit,a),Au(this._ctx,function(){var c=a;return function(u,f,h){return--c<=0&&f(h),0<=c}},!0),this},xt.prototype.until=function(a,c){return Du(this._ctx,function(u,f,h){return!a(u.value)||(f(h),c)}),this},xt.prototype.first=function(a){return this.limit(1).toArray(function(c){return c[0]}).then(a)},xt.prototype.last=function(a){return this.reverse().first(a)},xt.prototype.filter=function(a){var c;return Du(this._ctx,function(u){return a(u.value)}),(c=this._ctx).isMatch=li(c.isMatch,a),this},xt.prototype.and=function(a){return this.filter(a)},xt.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)},xt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},xt.prototype.desc=function(){return this.reverse()},xt.prototype.eachKey=function(a){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(u,f){a(f.key,f)})},xt.prototype.eachUniqueKey=function(a){return this._ctx.unique="unique",this.eachKey(a)},xt.prototype.eachPrimaryKey=function(a){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(u,f){a(f.primaryKey,f)})},xt.prototype.keys=function(a){var c=this._ctx;c.keysOnly=!c.isMatch;var u=[];return this.each(function(f,h){u.push(h.key)}).then(function(){return u}).then(a)},xt.prototype.primaryKeys=function(a){var c=this._ctx;if(c.dir==="next"&&Ki(c,!0)&&0<c.limit)return this._read(function(f){var h=Es(c,c.table.core.schema);return c.table.core.query({trans:f,values:!1,limit:c.limit,query:{index:h,range:c.range}})}).then(function(f){return f.result}).then(a);c.keysOnly=!c.isMatch;var u=[];return this.each(function(f,h){u.push(h.primaryKey)}).then(function(){return u}).then(a)},xt.prototype.uniqueKeys=function(a){return this._ctx.unique="unique",this.keys(a)},xt.prototype.firstKey=function(a){return this.limit(1).keys(function(c){return c[0]}).then(a)},xt.prototype.lastKey=function(a){return this.reverse().firstKey(a)},xt.prototype.distinct=function(){var a=this._ctx,a=a.index&&a.table.schema.idxByName[a.index];if(!a||!a.multi)return this;var c={};return Du(this._ctx,function(h){var f=h.primaryKey.toString(),h=p(c,f);return c[f]=!0,!h}),this},xt.prototype.modify=function(a){var c=this,u=this._ctx;return this._write(function(f){var h,g,v;v=typeof a=="function"?a:(h=i(a),g=h.length,function(R){for(var T=!1,M=0;M<g;++M){var P=h[M],B=a[P],V=Tt(R,P);B instanceof Xo?(ct(R,P,B.execute(V)),T=!0):V!==B&&(ct(R,P,B),T=!0)}return T});var b=u.table.core,_=b.schema.primaryKey,x=_.outbound,E=_.extractKey,D=200,_=c.db._options.modifyChunkSize;_&&(D=typeof _=="object"?_[b.name]||_["*"]||200:_);function I(R,P){var M=P.failures,P=P.numFailures;O+=R-P;for(var B=0,V=i(M);B<V.length;B++){var K=V[B];C.push(M[K])}}var C=[],O=0,k=[];return c.clone().primaryKeys().then(function(R){function T(P){var B=Math.min(D,R.length-P);return b.getMany({trans:f,keys:R.slice(P,P+B),cache:"immutable"}).then(function(V){for(var K=[],q=[],W=x?[]:null,Q=[],H=0;H<B;++H){var Z=V[H],pt={value:pr(Z),primKey:R[P+H]};v.call(pt,pt.value,pt)!==!1&&(pt.value==null?Q.push(R[P+H]):x||_t(E(Z),E(pt.value))===0?(q.push(pt.value),x&&W.push(R[P+H])):(Q.push(R[P+H]),K.push(pt.value)))}return Promise.resolve(0<K.length&&b.mutate({trans:f,type:"add",values:K}).then(function(vt){for(var yt in vt.failures)Q.splice(parseInt(yt),1);I(K.length,vt)})).then(function(){return(0<q.length||M&&typeof a=="object")&&b.mutate({trans:f,type:"put",keys:W,values:q,criteria:M,changeSpec:typeof a!="function"&&a,isAdditionalChunk:0<P}).then(function(vt){return I(q.length,vt)})}).then(function(){return(0<Q.length||M&&a===ku)&&b.mutate({trans:f,type:"delete",keys:Q,criteria:M,isAdditionalChunk:0<P}).then(function(vt){return I(Q.length,vt)})}).then(function(){return R.length>P+B&&T(P+D)})})}var M=Ki(u)&&u.limit===1/0&&(typeof a!="function"||a===ku)&&{index:u.index,range:u.range};return T(0).then(function(){if(0<C.length)throw new ce("Error modifying one or more objects",C,O,k);return R.length})})})},xt.prototype.delete=function(){var a=this._ctx,c=a.range;return Ki(a)&&(a.isPrimKey||c.type===3)?this._write(function(u){var f=a.table.core.schema.primaryKey,h=c;return a.table.core.count({trans:u,query:{index:f,range:h}}).then(function(g){return a.table.core.mutate({trans:u,type:"deleteRange",range:h}).then(function(v){var b=v.failures;if(v.lastResult,v.results,v=v.numFailures,v)throw new ce("Could not delete some values",Object.keys(b).map(function(x){return b[x]}),g-v);return g-v})})}):this.modify(ku)},xt);function xt(){}var ku=function(a,c){return c.value=null};function Jw(a,c){return a<c?-1:a===c?0:1}function tx(a,c){return c<a?-1:a===c?0:1}function Ue(a,c,u){return a=a instanceof Pp?new a.Collection(a):a,a._ctx.error=new(u||TypeError)(c),a}function Gi(a){return new a.Collection(a,function(){return Mp("")}).limit(0)}function Os(a,c,u,f){var h,g,v,b,x,E,D,_=u.length;if(!u.every(function(O){return typeof O=="string"}))return Ue(a,Sp);function I(O){h=O==="next"?function(R){return R.toUpperCase()}:function(R){return R.toLowerCase()},g=O==="next"?function(R){return R.toLowerCase()}:function(R){return R.toUpperCase()},v=O==="next"?Jw:tx;var k=u.map(function(R){return{lower:g(R),upper:h(R)}}).sort(function(R,T){return v(R.lower,T.lower)});b=k.map(function(R){return R.upper}),x=k.map(function(R){return R.lower}),D=(E=O)==="next"?"":f}I("next"),a=new a.Collection(a,function(){return Cn(b[0],x[_-1]+f)}),a._ondirectionchange=function(O){I(O)};var C=0;return a._addAlgorithm(function(O,k,R){var T=O.key;if(typeof T!="string")return!1;var M=g(T);if(c(M,x,C))return!0;for(var P=null,B=C;B<_;++B){var V=(function(K,q,W,Q,H,Z){for(var pt=Math.min(K.length,Q.length),vt=-1,yt=0;yt<pt;++yt){var ze=q[yt];if(ze!==Q[yt])return H(K[yt],W[yt])<0?K.substr(0,yt)+W[yt]+W.substr(yt+1):H(K[yt],Q[yt])<0?K.substr(0,yt)+Q[yt]+W.substr(yt+1):0<=vt?K.substr(0,vt)+q[vt]+W.substr(vt+1):null;H(K[yt],ze)<0&&(vt=yt)}return pt<Q.length&&Z==="next"?K+W.substr(K.length):pt<K.length&&Z==="prev"?K.substr(0,W.length):vt<0?null:K.substr(0,vt)+Q[vt]+W.substr(vt+1)})(T,M,b[B],x[B],v,E);V===null&&P===null?C=B+1:(P===null||0<v(P,V))&&(P=V)}return k(P!==null?function(){O.continue(P+D)}:R),!1}),a}function Cn(a,c,u,f){return{type:2,lower:a,upper:c,lowerOpen:u,upperOpen:f}}function Mp(a){return{type:1,lower:a,upper:a}}var Pp=(Object.defineProperty(de.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),de.prototype.between=function(a,c,u,f){u=u!==!1,f=f===!0;try{return 0<this._cmp(a,c)||this._cmp(a,c)===0&&(u||f)&&(!u||!f)?Gi(this):new this.Collection(this,function(){return Cn(a,c,!u,!f)})}catch{return Ue(this,Zr)}},de.prototype.equals=function(a){return a==null?Ue(this,Zr):new this.Collection(this,function(){return Mp(a)})},de.prototype.above=function(a){return a==null?Ue(this,Zr):new this.Collection(this,function(){return Cn(a,void 0,!0)})},de.prototype.aboveOrEqual=function(a){return a==null?Ue(this,Zr):new this.Collection(this,function(){return Cn(a,void 0,!1)})},de.prototype.below=function(a){return a==null?Ue(this,Zr):new this.Collection(this,function(){return Cn(void 0,a,!1,!0)})},de.prototype.belowOrEqual=function(a){return a==null?Ue(this,Zr):new this.Collection(this,function(){return Cn(void 0,a)})},de.prototype.startsWith=function(a){return typeof a!="string"?Ue(this,Sp):this.between(a,a+ci,!0,!0)},de.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):Os(this,function(c,u){return c.indexOf(u[0])===0},[a],ci)},de.prototype.equalsIgnoreCase=function(a){return Os(this,function(c,u){return c===u[0]},[a],"")},de.prototype.anyOfIgnoreCase=function(){var a=Pe.apply(gn,arguments);return a.length===0?Gi(this):Os(this,function(c,u){return u.indexOf(c)!==-1},a,"")},de.prototype.startsWithAnyOfIgnoreCase=function(){var a=Pe.apply(gn,arguments);return a.length===0?Gi(this):Os(this,function(c,u){return u.some(function(f){return c.indexOf(f)===0})},a,ci)},de.prototype.anyOf=function(){var a=this,c=Pe.apply(gn,arguments),u=this._cmp;try{c.sort(u)}catch{return Ue(this,Zr)}if(c.length===0)return Gi(this);var f=new this.Collection(this,function(){return Cn(c[0],c[c.length-1])});f._ondirectionchange=function(g){u=g==="next"?a._ascending:a._descending,c.sort(u)};var h=0;return f._addAlgorithm(function(g,v,b){for(var x=g.key;0<u(x,c[h]);)if(++h===c.length)return v(b),!1;return u(x,c[h])===0||(v(function(){g.continue(c[h])}),!1)}),f},de.prototype.notEqual=function(a){return this.inAnyRange([[-1/0,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},de.prototype.noneOf=function(){var a=Pe.apply(gn,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch{return Ue(this,Zr)}var c=a.reduce(function(u,f){return u?u.concat([[u[u.length-1][1],f]]):[[-1/0,f]]},null);return c.push([a[a.length-1],this.db._maxKey]),this.inAnyRange(c,{includeLowers:!1,includeUppers:!1})},de.prototype.inAnyRange=function(T,c){var u=this,f=this._cmp,h=this._ascending,g=this._descending,v=this._min,b=this._max;if(T.length===0)return Gi(this);if(!T.every(function(M){return M[0]!==void 0&&M[1]!==void 0&&h(M[0],M[1])<=0}))return Ue(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",at.InvalidArgument);var x=!c||c.includeLowers!==!1,E=c&&c.includeUppers===!0,D,_=h;function I(M,P){return _(M[0],P[0])}try{(D=T.reduce(function(M,P){for(var B=0,V=M.length;B<V;++B){var K=M[B];if(f(P[0],K[1])<0&&0<f(P[1],K[0])){K[0]=v(K[0],P[0]),K[1]=b(K[1],P[1]);break}}return B===V&&M.push(P),M},[])).sort(I)}catch{return Ue(this,Zr)}var C=0,O=E?function(M){return 0<h(M,D[C][1])}:function(M){return 0<=h(M,D[C][1])},k=x?function(M){return 0<g(M,D[C][0])}:function(M){return 0<=g(M,D[C][0])},R=O,T=new this.Collection(this,function(){return Cn(D[0][0],D[D.length-1][1],!x,!E)});return T._ondirectionchange=function(M){_=M==="next"?(R=O,h):(R=k,g),D.sort(I)},T._addAlgorithm(function(M,P,B){for(var V,K=M.key;R(K);)if(++C===D.length)return P(B),!1;return!O(V=K)&&!k(V)||(u._cmp(K,D[C][1])===0||u._cmp(K,D[C][0])===0||P(function(){_===h?M.continue(D[C][0]):M.continue(D[C][1])}),!1)}),T},de.prototype.startsWithAnyOf=function(){var a=Pe.apply(gn,arguments);return a.every(function(c){return typeof c=="string"})?a.length===0?Gi(this):this.inAnyRange(a.map(function(c){return[c,c+ci]})):Ue(this,"startsWithAnyOf() only works with strings")},de);function de(){}function Tr(a){return Kt(function(c){return Zo(c),a(c.target.error),!1})}function Zo(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var Jo="storagemutated",Iu="x-storagemutated-1",Sn=Qo(null,Jo),ex=(Mr.prototype._lock=function(){return rt(!nt.global),++this._reculock,this._reculock!==1||nt.global||(nt.lockOwnerFor=this),this},Mr.prototype._unlock=function(){if(rt(!nt.global),--this._reculock==0)for(nt.global||(nt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var a=this._blockedFuncs.shift();try{si(a[1],a[0])}catch{}}return this},Mr.prototype._locked=function(){return this._reculock&&nt.lockOwnerFor!==this},Mr.prototype.create=function(a){var c=this;if(!this.mode)return this;var u=this.db.idbdb,f=this.db._state.dbOpenError;if(rt(!this.idbtrans),!a&&!u)switch(f&&f.name){case"DatabaseClosedError":throw new at.DatabaseClosed(f);case"MissingAPIError":throw new at.MissingAPI(f.message,f);default:throw new at.OpenFailed(f)}if(!this.active)throw new at.TransactionInactive;return rt(this._completion._state===null),(a=this.idbtrans=a||(this.db.core||u).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Kt(function(h){Zo(h),c._reject(a.error)}),a.onabort=Kt(function(h){Zo(h),c.active&&c._reject(new at.Abort(a.error)),c.active=!1,c.on("abort").fire(h)}),a.oncomplete=Kt(function(){c.active=!1,c._resolve(),"mutatedParts"in a&&Sn.storagemutated.fire(a.mutatedParts)}),this},Mr.prototype._promise=function(a,c,u){var f=this;if(a==="readwrite"&&this.mode!=="readwrite")return Zt(new at.ReadOnly("Transaction is readonly"));if(!this.active)return Zt(new at.TransactionInactive);if(this._locked())return new Y(function(g,v){f._blockedFuncs.push([function(){f._promise(a,c,u).then(g,v)},nt])});if(u)return _n(function(){var g=new Y(function(v,b){f._lock();var x=c(v,b,f);x&&x.then&&x.then(v,b)});return g.finally(function(){return f._unlock()}),g._lib=!0,g});var h=new Y(function(g,v){var b=c(g,v,f);b&&b.then&&b.then(g,v)});return h._lib=!0,h},Mr.prototype._root=function(){return this.parent?this.parent._root():this},Mr.prototype.waitFor=function(a){var c,u=this._root(),f=Y.resolve(a);u._waitingFor?u._waitingFor=u._waitingFor.then(function(){return f}):(u._waitingFor=f,u._waitingQueue=[],c=u.idbtrans.objectStore(u.storeNames[0]),(function g(){for(++u._spinCount;u._waitingQueue.length;)u._waitingQueue.shift()();u._waitingFor&&(c.get(-1/0).onsuccess=g)})());var h=u._waitingFor;return new Y(function(g,v){f.then(function(b){return u._waitingQueue.push(Kt(g.bind(null,b)))},function(b){return u._waitingQueue.push(Kt(v.bind(null,b)))}).finally(function(){u._waitingFor===h&&(u._waitingFor=null)})})},Mr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new at.Abort))},Mr.prototype.table=function(a){var c=this._memoizedTables||(this._memoizedTables={});if(p(c,a))return c[a];var u=this.schema[a];if(!u)throw new at.NotFound("Table "+a+" not part of transaction");return u=new this.db.Table(a,u,this),u.core=this.db.core.table(a),c[a]=u},Mr);function Mr(){}function Tu(a,c,u,f,h,g,v){return{name:a,keyPath:c,unique:u,multi:f,auto:h,compound:g,src:(u&&!v?"&":"")+(f?"*":"")+(h?"++":"")+Np(c)}}function Np(a){return typeof a=="string"?a:a?"["+[].join.call(a,"+")+"]":""}function Mu(a,c,u){return{name:a,primKey:c,indexes:u,mappedClass:null,idxByName:(f=function(h){return[h.name,h]},u.reduce(function(h,g,v){return v=f(g,v),v&&(h[v[0]]=v[1]),h},{}))};var f}var ta=function(a){try{return a.only([[]]),ta=function(){return[[]]},[[]]}catch{return ta=function(){return ci},ci}};function Pu(a){return a==null?function(){}:typeof a=="string"?(c=a).split(".").length===1?function(u){return u[c]}:function(u){return Tt(u,c)}:function(u){return Tt(u,a)};var c}function Lp(a){return[].slice.call(a)}var rx=0;function ea(a){return a==null?":id":typeof a=="string"?a:"[".concat(a.join("+"),"]")}function nx(a,c,x){function f(R){if(R.type===3)return null;if(R.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var C=R.lower,O=R.upper,k=R.lowerOpen,R=R.upperOpen;return C===void 0?O===void 0?null:c.upperBound(O,!!R):O===void 0?c.lowerBound(C,!!k):c.bound(C,O,!!k,!!R)}function h(I){var C,O=I.name;return{name:O,schema:I,mutate:function(k){var R=k.trans,T=k.type,M=k.keys,P=k.values,B=k.range;return new Promise(function(V,K){V=Kt(V);var q=R.objectStore(O),W=q.keyPath==null,Q=T==="put"||T==="add";if(!Q&&T!=="delete"&&T!=="deleteRange")throw new Error("Invalid operation type: "+T);var H,Z=(M||P||{length:1}).length;if(M&&P&&M.length!==P.length)throw new Error("Given keys array must have same length as given values array.");if(Z===0)return V({numFailures:0,failures:{},results:[],lastResult:void 0});function pt(Oe){++ze,Zo(Oe)}var vt=[],yt=[],ze=0;if(T==="deleteRange"){if(B.type===4)return V({numFailures:ze,failures:yt,results:[],lastResult:void 0});B.type===3?vt.push(H=q.clear()):vt.push(H=q.delete(f(B)))}else{var W=Q?W?[P,M]:[P,null]:[M,null],ht=W[0],we=W[1];if(Q)for(var xe=0;xe<Z;++xe)vt.push(H=we&&we[xe]!==void 0?q[T](ht[xe],we[xe]):q[T](ht[xe])),H.onerror=pt;else for(xe=0;xe<Z;++xe)vt.push(H=q[T](ht[xe])),H.onerror=pt}function js(Oe){Oe=Oe.target.result,vt.forEach(function(fi,Zu){return fi.error!=null&&(yt[Zu]=fi.error)}),V({numFailures:ze,failures:yt,results:T==="delete"?M:vt.map(function(fi){return fi.result}),lastResult:Oe})}H.onerror=function(Oe){pt(Oe),js(Oe)},H.onsuccess=js})},getMany:function(k){var R=k.trans,T=k.keys;return new Promise(function(M,P){M=Kt(M);for(var B,V=R.objectStore(O),K=T.length,q=new Array(K),W=0,Q=0,H=function(vt){vt=vt.target,q[vt._pos]=vt.result,++Q===W&&M(q)},Z=Tr(P),pt=0;pt<K;++pt)T[pt]!=null&&((B=V.get(T[pt]))._pos=pt,B.onsuccess=H,B.onerror=Z,++W);W===0&&M(q)})},get:function(k){var R=k.trans,T=k.key;return new Promise(function(M,P){M=Kt(M);var B=R.objectStore(O).get(T);B.onsuccess=function(V){return M(V.target.result)},B.onerror=Tr(P)})},query:(C=E,function(k){return new Promise(function(R,T){R=Kt(R);var M,P,B,W=k.trans,V=k.values,K=k.limit,H=k.query,q=K===1/0?void 0:K,Q=H.index,H=H.range,W=W.objectStore(O),Q=Q.isPrimaryKey?W:W.index(Q.name),H=f(H);if(K===0)return R({result:[]});C?((q=V?Q.getAll(H,q):Q.getAllKeys(H,q)).onsuccess=function(Z){return R({result:Z.target.result})},q.onerror=Tr(T)):(M=0,P=!V&&"openKeyCursor"in Q?Q.openKeyCursor(H):Q.openCursor(H),B=[],P.onsuccess=function(Z){var pt=P.result;return pt?(B.push(V?pt.value:pt.primaryKey),++M===K?R({result:B}):void pt.continue()):R({result:B})},P.onerror=Tr(T))})}),openCursor:function(k){var R=k.trans,T=k.values,M=k.query,P=k.reverse,B=k.unique;return new Promise(function(V,K){V=Kt(V);var Q=M.index,q=M.range,W=R.objectStore(O),W=Q.isPrimaryKey?W:W.index(Q.name),Q=P?B?"prevunique":"prev":B?"nextunique":"next",H=!T&&"openKeyCursor"in W?W.openKeyCursor(f(q),Q):W.openCursor(f(q),Q);H.onerror=Tr(K),H.onsuccess=Kt(function(Z){var pt,vt,yt,ze,ht=H.result;ht?(ht.___id=++rx,ht.done=!1,pt=ht.continue.bind(ht),vt=(vt=ht.continuePrimaryKey)&&vt.bind(ht),yt=ht.advance.bind(ht),ze=function(){throw new Error("Cursor not stopped")},ht.trans=R,ht.stop=ht.continue=ht.continuePrimaryKey=ht.advance=function(){throw new Error("Cursor not started")},ht.fail=Kt(K),ht.next=function(){var we=this,xe=1;return this.start(function(){return xe--?we.continue():we.stop()}).then(function(){return we})},ht.start=function(we){function xe(){if(H.result)try{we()}catch(Oe){ht.fail(Oe)}else ht.done=!0,ht.start=function(){throw new Error("Cursor behind last entry")},ht.stop()}var js=new Promise(function(Oe,fi){Oe=Kt(Oe),H.onerror=Tr(fi),ht.fail=fi,ht.stop=function(Zu){ht.stop=ht.continue=ht.continuePrimaryKey=ht.advance=ze,Oe(Zu)}});return H.onsuccess=Kt(function(Oe){H.onsuccess=xe,xe()}),ht.continue=pt,ht.continuePrimaryKey=vt,ht.advance=yt,xe(),js},V(ht)):V(null)},K)})},count:function(k){var R=k.query,T=k.trans,M=R.index,P=R.range;return new Promise(function(B,V){var K=T.objectStore(O),q=M.isPrimaryKey?K:K.index(M.name),K=f(P),q=K?q.count(K):q.count();q.onsuccess=Kt(function(W){return B(W.target.result)}),q.onerror=Tr(V)})}}}var g,v,b,D=(v=x,b=Lp((g=a).objectStoreNames),{schema:{name:g.name,tables:b.map(function(I){return v.objectStore(I)}).map(function(I){var C=I.keyPath,R=I.autoIncrement,O=o(C),k={},R={name:I.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:C==null,compound:O,keyPath:C,autoIncrement:R,unique:!0,extractKey:Pu(C)},indexes:Lp(I.indexNames).map(function(T){return I.index(T)}).map(function(B){var M=B.name,P=B.unique,V=B.multiEntry,B=B.keyPath,V={name:M,compound:o(B),keyPath:B,unique:P,multiEntry:V,extractKey:Pu(B)};return k[ea(B)]=V}),getIndexByKeyPath:function(T){return k[ea(T)]}};return k[":id"]=R.primaryKey,C!=null&&(k[ea(C)]=R.primaryKey),R})},hasGetAll:0<b.length&&"getAll"in v.objectStore(b[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),x=D.schema,E=D.hasGetAll,D=x.tables.map(h),_={};return D.forEach(function(I){return _[I.name]=I}),{stack:"dbcore",transaction:a.transaction.bind(a),table:function(I){if(!_[I])throw new Error("Table '".concat(I,"' not found"));return _[I]},MIN_KEY:-1/0,MAX_KEY:ta(c),schema:x}}function ix(a,c,u,f){var h=u.IDBKeyRange;return u.indexedDB,{dbcore:(f=nx(c,h,f),a.dbcore.reduce(function(g,v){return v=v.create,r(r({},g),v(g))},f))}}function Ds(a,f){var u=f.db,f=ix(a._middlewares,u,a._deps,f);a.core=f.dbcore,a.tables.forEach(function(h){var g=h.name;a.core.schema.tables.some(function(v){return v.name===g})&&(h.core=a.core.table(g),a[g]instanceof a.Table&&(a[g].core=h.core))})}function As(a,c,u,f){u.forEach(function(h){var g=f[h];c.forEach(function(v){var b=(function x(E,D){return N(E,D)||(E=l(E))&&x(E,D)})(v,h);(!b||"value"in b&&b.value===void 0)&&(v===a.Transaction.prototype||v instanceof a.Transaction?S(v,h,{get:function(){return this.table(h)},set:function(x){y(this,h,{value:x,writable:!0,configurable:!0,enumerable:!0})}}):v[h]=new a.Table(h,g))})})}function Nu(a,c){c.forEach(function(u){for(var f in u)u[f]instanceof a.Table&&delete u[f]})}function ox(a,c){return a._cfg.version-c._cfg.version}function ax(a,c,u,f){var h=a._dbSchema;u.objectStoreNames.contains("$meta")&&!h.$meta&&(h.$meta=Mu("$meta",Bp("")[0],[]),a._storeNames.push("$meta"));var g=a._createTransaction("readwrite",a._storeNames,h);g.create(u),g._completion.catch(f);var v=g._reject.bind(g),b=nt.transless||nt;_n(function(){return nt.trans=g,nt.transless=b,c!==0?(Ds(a,u),E=c,((x=g).storeNames.includes("$meta")?x.table("$meta").get("version").then(function(D){return D??E}):Y.resolve(E)).then(function(D){return I=D,C=g,O=u,k=[],D=(_=a)._versions,R=_._dbSchema=Is(0,_.idbdb,O),(D=D.filter(function(T){return T._cfg.version>=I})).length!==0?(D.forEach(function(T){k.push(function(){var M=R,P=T._cfg.dbschema;Ts(_,M,O),Ts(_,P,O),R=_._dbSchema=P;var B=Lu(M,P);B.add.forEach(function(Q){Fu(O,Q[0],Q[1].primKey,Q[1].indexes)}),B.change.forEach(function(Q){if(Q.recreate)throw new at.Upgrade("Not yet support for changing primary key");var H=O.objectStore(Q.name);Q.add.forEach(function(Z){return ks(H,Z)}),Q.change.forEach(function(Z){H.deleteIndex(Z.name),ks(H,Z)}),Q.del.forEach(function(Z){return H.deleteIndex(Z)})});var V=T._cfg.contentUpgrade;if(V&&T._cfg.version>I){Ds(_,O),C._memoizedTables={};var K=Nt(P);B.del.forEach(function(Q){K[Q]=M[Q]}),Nu(_,[_.Transaction.prototype]),As(_,[_.Transaction.prototype],i(K),K),C.schema=K;var q,W=vn(V);return W&&Wi(),B=Y.follow(function(){var Q;(q=V(C))&&W&&(Q=wn.bind(null,null),q.then(Q,Q))}),q&&typeof q.then=="function"?Y.resolve(q):B.then(function(){return q})}}),k.push(function(M){var P,B,V=T._cfg.dbschema;P=V,B=M,[].slice.call(B.db.objectStoreNames).forEach(function(K){return P[K]==null&&B.db.deleteObjectStore(K)}),Nu(_,[_.Transaction.prototype]),As(_,[_.Transaction.prototype],_._storeNames,_._dbSchema),C.schema=_._dbSchema}),k.push(function(M){_.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(_.idbdb.version/10)===T._cfg.version?(_.idbdb.deleteObjectStore("$meta"),delete _._dbSchema.$meta,_._storeNames=_._storeNames.filter(function(P){return P!=="$meta"})):M.objectStore("$meta").put(T._cfg.version,"version"))})}),(function T(){return k.length?Y.resolve(k.shift()(C.idbtrans)).then(T):Y.resolve()})().then(function(){Fp(R,O)})):Y.resolve();var _,I,C,O,k,R}).catch(v)):(i(h).forEach(function(D){Fu(u,D,h[D].primKey,h[D].indexes)}),Ds(a,u),void Y.follow(function(){return a.on.populate.fire(g)}).catch(v));var x,E})}function sx(a,c){Fp(a._dbSchema,c),c.db.version%10!=0||c.objectStoreNames.contains("$meta")||c.db.createObjectStore("$meta").add(Math.ceil(c.db.version/10-1),"version");var u=Is(0,a.idbdb,c);Ts(a,a._dbSchema,c);for(var f=0,h=Lu(u,a._dbSchema).change;f<h.length;f++){var g=(function(v){if(v.change.length||v.recreate)return console.warn("Unable to patch indexes of table ".concat(v.name," because it has changes on the type of index or primary key.")),{value:void 0};var b=c.objectStore(v.name);v.add.forEach(function(x){Ir&&console.debug("Dexie upgrade patch: Creating missing index ".concat(v.name,".").concat(x.src)),ks(b,x)})})(h[f]);if(typeof g=="object")return g.value}}function Lu(a,c){var u,f={del:[],add:[],change:[]};for(u in a)c[u]||f.del.push(u);for(u in c){var h=a[u],g=c[u];if(h){var v={name:u,def:g,recreate:!1,del:[],add:[],change:[]};if(""+(h.primKey.keyPath||"")!=""+(g.primKey.keyPath||"")||h.primKey.auto!==g.primKey.auto)v.recreate=!0,f.change.push(v);else{var b=h.idxByName,x=g.idxByName,E=void 0;for(E in b)x[E]||v.del.push(E);for(E in x){var D=b[E],_=x[E];D?D.src!==_.src&&v.change.push(_):v.add.push(_)}(0<v.del.length||0<v.add.length||0<v.change.length)&&f.change.push(v)}}else f.add.push([u,g])}return f}function Fu(a,c,u,f){var h=a.db.createObjectStore(c,u.keyPath?{keyPath:u.keyPath,autoIncrement:u.auto}:{autoIncrement:u.auto});return f.forEach(function(g){return ks(h,g)}),h}function Fp(a,c){i(a).forEach(function(u){c.db.objectStoreNames.contains(u)||(Ir&&console.debug("Dexie: Creating missing table",u),Fu(c,u,a[u].primKey,a[u].indexes))})}function ks(a,c){a.createIndex(c.name,c.keyPath,{unique:c.unique,multiEntry:c.multi})}function Is(a,c,u){var f={};return G(c.objectStoreNames,0).forEach(function(h){for(var g=u.objectStore(h),v=Tu(Np(E=g.keyPath),E||"",!0,!1,!!g.autoIncrement,E&&typeof E!="string",!0),b=[],x=0;x<g.indexNames.length;++x){var D=g.index(g.indexNames[x]),E=D.keyPath,D=Tu(D.name,E,!!D.unique,!!D.multiEntry,!1,E&&typeof E!="string",!1);b.push(D)}f[h]=Mu(h,v,b)}),f}function Ts(a,c,u){for(var f=u.db.objectStoreNames,h=0;h<f.length;++h){var g=f[h],v=u.objectStore(g);a._hasGetAll="getAll"in v;for(var b=0;b<v.indexNames.length;++b){var x=v.indexNames[b],E=v.index(x).keyPath,D=typeof E=="string"?E:"["+G(E).join("+")+"]";!c[g]||(E=c[g].idxByName[D])&&(E.name=x,delete c[g].idxByName[D],c[g].idxByName[x]=E)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&n.WorkerGlobalScope&&n instanceof n.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function Bp(a){return a.split(",").map(function(c,u){var f=(c=c.trim()).replace(/([&*]|\+\+)/g,""),h=/^\[/.test(f)?f.match(/^\[(.*)\]$/)[1].split("+"):f;return Tu(f,h||null,/\&/.test(c),/\*/.test(c),/\+\+/.test(c),o(h),u===0)})}var cx=(Ms.prototype._parseStoresSpec=function(a,c){i(a).forEach(function(u){if(a[u]!==null){var f=Bp(a[u]),h=f.shift();if(h.unique=!0,h.multi)throw new at.Schema("Primary key cannot be multi-valued");f.forEach(function(g){if(g.auto)throw new at.Schema("Only primary key can be marked as autoIncrement (++)");if(!g.keyPath)throw new at.Schema("Index must have a name and cannot be an empty string")}),c[u]=Mu(u,h,f)}})},Ms.prototype.stores=function(u){var c=this.db;this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,u):u;var u=c._versions,f={},h={};return u.forEach(function(g){s(f,g._cfg.storesSource),h=g._cfg.dbschema={},g._parseStoresSpec(f,h)}),c._dbSchema=h,Nu(c,[c._allTables,c,c.Transaction.prototype]),As(c,[c._allTables,c,c.Transaction.prototype,this._cfg.tables],i(h),h),c._storeNames=i(h),this},Ms.prototype.upgrade=function(a){return this._cfg.contentUpgrade=vu(this._cfg.contentUpgrade||Mt,a),this},Ms);function Ms(){}function Bu(a,c){var u=a._dbNamesDB;return u||(u=a._dbNamesDB=new tn(Cs,{addons:[],indexedDB:a,IDBKeyRange:c})).version(1).stores({dbnames:"name"}),u.table("dbnames")}function $u(a){return a&&typeof a.databases=="function"}function ju(a){return _n(function(){return nt.letThrough=!0,a()})}function Uu(a){return!("from"in a)}var _e=function(a,c){if(!this){var u=new _e;return a&&"d"in a&&s(u,a),u}s(this,arguments.length?{d:1,from:a,to:1<arguments.length?c:a}:{d:0})};function ra(a,c,u){var f=_t(c,u);if(!isNaN(f)){if(0<f)throw RangeError();if(Uu(a))return s(a,{from:c,to:u,d:1});var h=a.l,f=a.r;if(_t(u,a.from)<0)return h?ra(h,c,u):a.l={from:c,to:u,d:1,l:null,r:null},jp(a);if(0<_t(c,a.to))return f?ra(f,c,u):a.r={from:c,to:u,d:1,l:null,r:null},jp(a);_t(c,a.from)<0&&(a.from=c,a.l=null,a.d=f?f.d+1:1),0<_t(u,a.to)&&(a.to=u,a.r=null,a.d=a.l?a.l.d+1:1),u=!a.r,h&&!a.l&&na(a,h),f&&u&&na(a,f)}}function na(a,c){Uu(c)||(function u(f,x){var g=x.from,v=x.to,b=x.l,x=x.r;ra(f,g,v),b&&u(f,b),x&&u(f,x)})(a,c)}function $p(a,c){var u=Ps(c),f=u.next();if(f.done)return!1;for(var h=f.value,g=Ps(a),v=g.next(h.from),b=v.value;!f.done&&!v.done;){if(_t(b.from,h.to)<=0&&0<=_t(b.to,h.from))return!0;_t(h.from,b.from)<0?h=(f=u.next(b.from)).value:b=(v=g.next(h.from)).value}return!1}function Ps(a){var c=Uu(a)?null:{s:0,n:a};return{next:function(u){for(var f=0<arguments.length;c;)switch(c.s){case 0:if(c.s=1,f)for(;c.n.l&&_t(u,c.n.from)<0;)c={up:c,n:c.n.l,s:1};else for(;c.n.l;)c={up:c,n:c.n.l,s:1};case 1:if(c.s=2,!f||_t(u,c.n.to)<=0)return{value:c.n,done:!1};case 2:if(c.n.r){c.s=3,c={up:c,n:c.n.r,s:0};continue}case 3:c=c.up}return{done:!0}}}}function jp(a){var c,u,f=(((c=a.r)===null||c===void 0?void 0:c.d)||0)-(((u=a.l)===null||u===void 0?void 0:u.d)||0),h=1<f?"r":f<-1?"l":"";h&&(c=h=="r"?"l":"r",u=r({},a),f=a[h],a.from=f.from,a.to=f.to,a[h]=f[h],u[h]=f[c],(a[c]=u).d=Up(u)),a.d=Up(a)}function Up(u){var c=u.r,u=u.l;return(c?u?Math.max(c.d,u.d):c.d:u?u.d:0)+1}function Ns(a,c){return i(c).forEach(function(u){a[u]?na(a[u],c[u]):a[u]=(function f(h){var g,v,b={};for(g in h)p(h,g)&&(v=h[g],b[g]=!v||typeof v!="object"||ve.has(v.constructor)?v:f(v));return b})(c[u])}),a}function zu(a,c){return a.all||c.all||Object.keys(a).some(function(u){return c[u]&&$p(c[u],a[u])})}m(_e.prototype,((er={add:function(a){return na(this,a),this},addKey:function(a){return ra(this,a,a),this},addKeys:function(a){var c=this;return a.forEach(function(u){return ra(c,u,u)}),this},hasKey:function(a){var c=Ps(this).next(a).value;return c&&_t(c.from,a)<=0&&0<=_t(c.to,a)}})[zo]=function(){return Ps(this)},er));var ui={},Vu={},qu=!1;function Ls(a){Ns(Vu,a),qu||(qu=!0,setTimeout(function(){qu=!1,Wu(Vu,!(Vu={}))},0))}function Wu(a,c){c===void 0&&(c=!1);var u=new Set;if(a.all)for(var f=0,h=Object.values(ui);f<h.length;f++)zp(v=h[f],a,u,c);else for(var g in a){var v,b=/^idb\:\/\/(.*)\/(.*)\//.exec(g);b&&(g=b[1],b=b[2],(v=ui["idb://".concat(g,"/").concat(b)])&&zp(v,a,u,c))}u.forEach(function(x){return x()})}function zp(a,c,u,f){for(var h=[],g=0,v=Object.entries(a.queries.query);g<v.length;g++){for(var b=v[g],x=b[0],E=[],D=0,_=b[1];D<_.length;D++){var I=_[D];zu(c,I.obsSet)?I.subscribers.forEach(function(R){return u.add(R)}):f&&E.push(I)}f&&h.push([x,E])}if(f)for(var C=0,O=h;C<O.length;C++){var k=O[C],x=k[0],E=k[1];a.queries.query[x]=E}}function lx(a){var c=a._state,u=a._deps.indexedDB;if(c.isBeingOpened||a.idbdb)return c.dbReadyPromise.then(function(){return c.dbOpenError?Zt(c.dbOpenError):a});c.isBeingOpened=!0,c.dbOpenError=null,c.openComplete=!1;var f=c.openCanceller,h=Math.round(10*a.verno),g=!1;function v(){if(c.openCanceller!==f)throw new at.DatabaseClosed("db.open() was cancelled")}function b(){return new Y(function(I,C){if(v(),!u)throw new at.MissingAPI;var O=a.name,k=c.autoSchema||!h?u.open(O):u.open(O,h);if(!k)throw new at.MissingAPI;k.onerror=Tr(C),k.onblocked=Kt(a._fireOnBlocked),k.onupgradeneeded=Kt(function(R){var T;D=k.transaction,c.autoSchema&&!a._options.allowEmptyDB?(k.onerror=Zo,D.abort(),k.result.close(),(T=u.deleteDatabase(O)).onsuccess=T.onerror=Kt(function(){C(new at.NoSuchDatabase("Database ".concat(O," doesnt exist")))})):(D.onerror=Tr(C),R=R.oldVersion>Math.pow(2,62)?0:R.oldVersion,_=R<1,a.idbdb=k.result,g&&sx(a,D),ax(a,R/10,D,C))},C),k.onsuccess=Kt(function(){D=null;var R,T,M,P,B,V=a.idbdb=k.result,K=G(V.objectStoreNames);if(0<K.length)try{var q=V.transaction((P=K).length===1?P[0]:P,"readonly");if(c.autoSchema)T=V,M=q,(R=a).verno=T.version/10,M=R._dbSchema=Is(0,T,M),R._storeNames=G(T.objectStoreNames,0),As(R,[R._allTables],i(M),M);else if(Ts(a,a._dbSchema,q),((B=Lu(Is(0,(B=a).idbdb,q),B._dbSchema)).add.length||B.change.some(function(W){return W.add.length||W.change.length}))&&!g)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),V.close(),h=V.version+1,g=!0,I(b());Ds(a,q)}catch{}Hi.push(a),V.onversionchange=Kt(function(W){c.vcFired=!0,a.on("versionchange").fire(W)}),V.onclose=Kt(function(W){a.on("close").fire(W)}),_&&(B=a._deps,q=O,V=B.indexedDB,B=B.IDBKeyRange,$u(V)||q===Cs||Bu(V,B).put({name:q}).catch(Mt)),I()},C)}).catch(function(I){switch(I?.name){case"UnknownError":if(0<c.PR1398_maxLoop)return c.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),b();break;case"VersionError":if(0<h)return h=0,b()}return Y.reject(I)})}var x,E=c.dbReadyResolve,D=null,_=!1;return Y.race([f,(typeof navigator>"u"?Y.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(I){function C(){return indexedDB.databases().finally(I)}x=setInterval(C,100),C()}).finally(function(){return clearInterval(x)}):Promise.resolve()).then(b)]).then(function(){return v(),c.onReadyBeingFired=[],Y.resolve(ju(function(){return a.on.ready.fire(a.vip)})).then(function I(){if(0<c.onReadyBeingFired.length){var C=c.onReadyBeingFired.reduce(vu,Mt);return c.onReadyBeingFired=[],Y.resolve(ju(function(){return C(a.vip)})).then(I)}})}).finally(function(){c.openCanceller===f&&(c.onReadyBeingFired=null,c.isBeingOpened=!1)}).catch(function(I){c.dbOpenError=I;try{D&&D.abort()}catch{}return f===c.openCanceller&&a._close(),Zt(I)}).finally(function(){c.openComplete=!0,E()}).then(function(){var I;return _&&(I={},a.tables.forEach(function(C){C.schema.indexes.forEach(function(O){O.name&&(I["idb://".concat(a.name,"/").concat(C.name,"/").concat(O.name)]=new _e(-1/0,[[[]]]))}),I["idb://".concat(a.name,"/").concat(C.name,"/")]=I["idb://".concat(a.name,"/").concat(C.name,"/:dels")]=new _e(-1/0,[[[]]])}),Sn(Jo).fire(I),Wu(I,!0)),a})}function Hu(a){function c(g){return a.next(g)}var u=h(c),f=h(function(g){return a.throw(g)});function h(g){return function(x){var b=g(x),x=b.value;return b.done?x:x&&typeof x.then=="function"?x.then(u,f):o(x)?Promise.all(x).then(u,f):u(x)}}return h(c)()}function Fs(a,c,u){for(var f=o(a)?a.slice():[a],h=0;h<u;++h)f.push(c);return f}var ux={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(a){return r(r({},a),{table:function(c){var u=a.table(c),f=u.schema,h={},g=[];function v(_,I,C){var O=ea(_),k=h[O]=h[O]||[],R=_==null?0:typeof _=="string"?1:_.length,T=0<I,T=r(r({},C),{name:T?"".concat(O,"(virtual-from:").concat(C.name,")"):C.name,lowLevelIndex:C,isVirtual:T,keyTail:I,keyLength:R,extractKey:Pu(_),unique:!T&&C.unique});return k.push(T),T.isPrimaryKey||g.push(T),1<R&&v(R===2?_[0]:_.slice(0,R-1),I+1,C),k.sort(function(M,P){return M.keyTail-P.keyTail}),T}c=v(f.primaryKey.keyPath,0,f.primaryKey),h[":id"]=[c];for(var b=0,x=f.indexes;b<x.length;b++){var E=x[b];v(E.keyPath,0,E)}function D(_){var I,C=_.query.index;return C.isVirtual?r(r({},_),{query:{index:C.lowLevelIndex,range:(I=_.query.range,C=C.keyTail,{type:I.type===1?2:I.type,lower:Fs(I.lower,I.lowerOpen?a.MAX_KEY:a.MIN_KEY,C),lowerOpen:!0,upper:Fs(I.upper,I.upperOpen?a.MIN_KEY:a.MAX_KEY,C),upperOpen:!0})}}):_}return r(r({},u),{schema:r(r({},f),{primaryKey:c,indexes:g,getIndexByKeyPath:function(_){return(_=h[ea(_)])&&_[0]}}),count:function(_){return u.count(D(_))},query:function(_){return u.query(D(_))},openCursor:function(_){var I=_.query.index,C=I.keyTail,O=I.isVirtual,k=I.keyLength;return O?u.openCursor(D(_)).then(function(T){return T&&R(T)}):u.openCursor(_);function R(T){return Object.create(T,{continue:{value:function(M){M!=null?T.continue(Fs(M,_.reverse?a.MAX_KEY:a.MIN_KEY,C)):_.unique?T.continue(T.key.slice(0,k).concat(_.reverse?a.MIN_KEY:a.MAX_KEY,C)):T.continue()}},continuePrimaryKey:{value:function(M,P){T.continuePrimaryKey(Fs(M,a.MAX_KEY,C),P)}},primaryKey:{get:function(){return T.primaryKey}},key:{get:function(){var M=T.key;return k===1?M[0]:M.slice(0,k)}},value:{get:function(){return T.value}}})}}})}})}};function Ku(a,c,u,f){return u=u||{},f=f||"",i(a).forEach(function(h){var g,v,b;p(c,h)?(g=a[h],v=c[h],typeof g=="object"&&typeof v=="object"&&g&&v?(b=mr(g))!==mr(v)?u[f+h]=c[h]:b==="Object"?Ku(g,v,u,f+h+"."):g!==v&&(u[f+h]=c[h]):g!==v&&(u[f+h]=c[h])):u[f+h]=void 0}),i(c).forEach(function(h){p(a,h)||(u[f+h]=c[h])}),u}function Gu(a,c){return c.type==="delete"?c.keys:c.keys||c.values.map(a.extractKey)}var dx={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return r(r({},a),{table:function(c){var u=a.table(c),f=u.schema.primaryKey;return r(r({},u),{mutate:function(h){var g=nt.trans,v=g.table(c).hook,b=v.deleting,x=v.creating,E=v.updating;switch(h.type){case"add":if(x.fire===Mt)break;return g._promise("readwrite",function(){return D(h)},!0);case"put":if(x.fire===Mt&&E.fire===Mt)break;return g._promise("readwrite",function(){return D(h)},!0);case"delete":if(b.fire===Mt)break;return g._promise("readwrite",function(){return D(h)},!0);case"deleteRange":if(b.fire===Mt)break;return g._promise("readwrite",function(){return(function _(I,C,O){return u.query({trans:I,values:!1,query:{index:f,range:C},limit:O}).then(function(k){var R=k.result;return D({type:"delete",keys:R,trans:I}).then(function(T){return 0<T.numFailures?Promise.reject(T.failures[0]):R.length<O?{failures:[],numFailures:0,lastResult:void 0}:_(I,r(r({},C),{lower:R[R.length-1],lowerOpen:!0}),O)})})})(h.trans,h.range,1e4)},!0)}return u.mutate(h);function D(_){var I,C,O,k=nt.trans,R=_.keys||Gu(f,_);if(!R)throw new Error("Keys missing");return(_=_.type==="add"||_.type==="put"?r(r({},_),{keys:R}):r({},_)).type!=="delete"&&(_.values=e([],_.values,!0)),_.keys&&(_.keys=e([],_.keys,!0)),I=u,O=R,((C=_).type==="add"?Promise.resolve([]):I.getMany({trans:C.trans,keys:O,cache:"immutable"})).then(function(T){var M=R.map(function(P,B){var V,K,q,W=T[B],Q={onerror:null,onsuccess:null};return _.type==="delete"?b.fire.call(Q,P,W,k):_.type==="add"||W===void 0?(V=x.fire.call(Q,P,_.values[B],k),P==null&&V!=null&&(_.keys[B]=P=V,f.outbound||ct(_.values[B],f.keyPath,P))):(V=Ku(W,_.values[B]),(K=E.fire.call(Q,V,P,W,k))&&(q=_.values[B],Object.keys(K).forEach(function(H){p(q,H)?q[H]=K[H]:ct(q,H,K[H])}))),Q});return u.mutate(_).then(function(P){for(var B=P.failures,V=P.results,K=P.numFailures,P=P.lastResult,q=0;q<R.length;++q){var W=(V||R)[q],Q=M[q];W==null?Q.onerror&&Q.onerror(B[q]):Q.onsuccess&&Q.onsuccess(_.type==="put"&&T[q]?_.values[q]:W)}return{failures:B,results:V,numFailures:K,lastResult:P}}).catch(function(P){return M.forEach(function(B){return B.onerror&&B.onerror(P)}),Promise.reject(P)})})}}})}})}};function Vp(a,c,u){try{if(!c||c.keys.length<a.length)return null;for(var f=[],h=0,g=0;h<c.keys.length&&g<a.length;++h)_t(c.keys[h],a[g])===0&&(f.push(u?pr(c.values[h]):c.values[h]),++g);return f.length===a.length?f:null}catch{return null}}var fx={stack:"dbcore",level:-1,create:function(a){return{table:function(c){var u=a.table(c);return r(r({},u),{getMany:function(f){if(!f.cache)return u.getMany(f);var h=Vp(f.keys,f.trans._cache,f.cache==="clone");return h?Y.resolve(h):u.getMany(f).then(function(g){return f.trans._cache={keys:f.keys,values:f.cache==="clone"?pr(g):g},g})},mutate:function(f){return f.type!=="add"&&(f.trans._cache=null),u.mutate(f)}})}}}};function qp(a,c){return a.trans.mode==="readonly"&&!!a.subscr&&!a.trans.explicit&&a.trans.db._options.cache!=="disabled"&&!c.schema.primaryKey.outbound}function Wp(a,c){switch(a){case"query":return c.values&&!c.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var hx={stack:"dbcore",level:0,name:"Observability",create:function(a){var c=a.schema.name,u=new _e(a.MIN_KEY,a.MAX_KEY);return r(r({},a),{transaction:function(f,h,g){if(nt.subscr&&h!=="readonly")throw new at.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(nt.querier));return a.transaction(f,h,g)},table:function(f){var h=a.table(f),g=h.schema,v=g.primaryKey,_=g.indexes,b=v.extractKey,x=v.outbound,E=v.autoIncrement&&_.filter(function(C){return C.compound&&C.keyPath.includes(v.keyPath)}),D=r(r({},h),{mutate:function(C){function O(H){return H="idb://".concat(c,"/").concat(f,"/").concat(H),P[H]||(P[H]=new _e)}var k,R,T,M=C.trans,P=C.mutatedParts||(C.mutatedParts={}),B=O(""),V=O(":dels"),K=C.type,Q=C.type==="deleteRange"?[C.range]:C.type==="delete"?[C.keys]:C.values.length<50?[Gu(v,C).filter(function(H){return H}),C.values]:[],q=Q[0],W=Q[1],Q=C.trans._cache;return o(q)?(B.addKeys(q),(Q=K==="delete"||q.length===W.length?Vp(q,Q):null)||V.addKeys(q),(Q||W)&&(k=O,R=Q,T=W,g.indexes.forEach(function(H){var Z=k(H.name||"");function pt(yt){return yt!=null?H.extractKey(yt):null}function vt(yt){return H.multiEntry&&o(yt)?yt.forEach(function(ze){return Z.addKey(ze)}):Z.addKey(yt)}(R||T).forEach(function(yt,we){var ht=R&&pt(R[we]),we=T&&pt(T[we]);_t(ht,we)!==0&&(ht!=null&&vt(ht),we!=null&&vt(we))})}))):q?(W={from:(W=q.lower)!==null&&W!==void 0?W:a.MIN_KEY,to:(W=q.upper)!==null&&W!==void 0?W:a.MAX_KEY},V.add(W),B.add(W)):(B.add(u),V.add(u),g.indexes.forEach(function(H){return O(H.name).add(u)})),h.mutate(C).then(function(H){return!q||C.type!=="add"&&C.type!=="put"||(B.addKeys(H.results),E&&E.forEach(function(Z){for(var pt=C.values.map(function(ht){return Z.extractKey(ht)}),vt=Z.keyPath.findIndex(function(ht){return ht===v.keyPath}),yt=0,ze=H.results.length;yt<ze;++yt)pt[yt][vt]=H.results[yt];O(Z.name).addKeys(pt)})),M.mutatedParts=Ns(M.mutatedParts||{},P),H})}}),_=function(O){var k=O.query,O=k.index,k=k.range;return[O,new _e((O=k.lower)!==null&&O!==void 0?O:a.MIN_KEY,(k=k.upper)!==null&&k!==void 0?k:a.MAX_KEY)]},I={get:function(C){return[v,new _e(C.key)]},getMany:function(C){return[v,new _e().addKeys(C.keys)]},count:_,query:_,openCursor:_};return i(I).forEach(function(C){D[C]=function(O){var k=nt.subscr,R=!!k,T=qp(nt,h)&&Wp(C,O)?O.obsSet={}:k;if(R){var M=function(W){return W="idb://".concat(c,"/").concat(f,"/").concat(W),T[W]||(T[W]=new _e)},P=M(""),B=M(":dels"),k=I[C](O),R=k[0],k=k[1];if((C==="query"&&R.isPrimaryKey&&!O.values?B:M(R.name||"")).add(k),!R.isPrimaryKey){if(C!=="count"){var V=C==="query"&&x&&O.values&&h.query(r(r({},O),{values:!1}));return h[C].apply(this,arguments).then(function(W){if(C==="query"){if(x&&O.values)return V.then(function(pt){return pt=pt.result,P.addKeys(pt),W});var Q=O.values?W.result.map(b):W.result;(O.values?P:B).addKeys(Q)}else if(C==="openCursor"){var H=W,Z=O.values;return H&&Object.create(H,{key:{get:function(){return B.addKey(H.primaryKey),H.key}},primaryKey:{get:function(){var pt=H.primaryKey;return B.addKey(pt),pt}},value:{get:function(){return Z&&P.addKey(H.primaryKey),H.value}}})}return W})}B.add(u)}}return h[C].apply(this,arguments)}}),D}})}};function Hp(a,c,u){if(u.numFailures===0)return c;if(c.type==="deleteRange")return null;var f=c.keys?c.keys.length:"values"in c&&c.values?c.values.length:1;return u.numFailures===f?null:(c=r({},c),o(c.keys)&&(c.keys=c.keys.filter(function(h,g){return!(g in u.failures)})),"values"in c&&o(c.values)&&(c.values=c.values.filter(function(h,g){return!(g in u.failures)})),c)}function Qu(a,c){return u=a,((f=c).lower===void 0||(f.lowerOpen?0<_t(u,f.lower):0<=_t(u,f.lower)))&&(a=a,(c=c).upper===void 0||(c.upperOpen?_t(a,c.upper)<0:_t(a,c.upper)<=0));var u,f}function Kp(a,c,I,f,h,g){if(!I||I.length===0)return a;var v=c.query.index,b=v.multiEntry,x=c.query.range,E=f.schema.primaryKey.extractKey,D=v.extractKey,_=(v.lowLevelIndex||v).extractKey,I=I.reduce(function(C,O){var k=C,R=[];if(O.type==="add"||O.type==="put")for(var T=new _e,M=O.values.length-1;0<=M;--M){var P,B=O.values[M],V=E(B);T.hasKey(V)||(P=D(B),(b&&o(P)?P.some(function(H){return Qu(H,x)}):Qu(P,x))&&(T.addKey(V),R.push(B)))}switch(O.type){case"add":var K=new _e().addKeys(c.values?C.map(function(Z){return E(Z)}):C),k=C.concat(c.values?R.filter(function(Z){return Z=E(Z),!K.hasKey(Z)&&(K.addKey(Z),!0)}):R.map(function(Z){return E(Z)}).filter(function(Z){return!K.hasKey(Z)&&(K.addKey(Z),!0)}));break;case"put":var q=new _e().addKeys(O.values.map(function(Z){return E(Z)}));k=C.filter(function(Z){return!q.hasKey(c.values?E(Z):Z)}).concat(c.values?R:R.map(function(Z){return E(Z)}));break;case"delete":var W=new _e().addKeys(O.keys);k=C.filter(function(Z){return!W.hasKey(c.values?E(Z):Z)});break;case"deleteRange":var Q=O.range;k=C.filter(function(Z){return!Qu(E(Z),Q)})}return k},a);return I===a?a:(I.sort(function(C,O){return _t(_(C),_(O))||_t(E(C),E(O))}),c.limit&&c.limit<1/0&&(I.length>c.limit?I.length=c.limit:a.length===c.limit&&I.length<c.limit&&(h.dirty=!0)),g?Object.freeze(I):I)}function Gp(a,c){return _t(a.lower,c.lower)===0&&_t(a.upper,c.upper)===0&&!!a.lowerOpen==!!c.lowerOpen&&!!a.upperOpen==!!c.upperOpen}function px(a,c){return(function(u,f,h,g){if(u===void 0)return f!==void 0?-1:0;if(f===void 0)return 1;if((f=_t(u,f))===0){if(h&&g)return 0;if(h)return 1;if(g)return-1}return f})(a.lower,c.lower,a.lowerOpen,c.lowerOpen)<=0&&0<=(function(u,f,h,g){if(u===void 0)return f!==void 0?1:0;if(f===void 0)return-1;if((f=_t(u,f))===0){if(h&&g)return 0;if(h)return-1;if(g)return 1}return f})(a.upper,c.upper,a.upperOpen,c.upperOpen)}function mx(a,c,u,f){a.subscribers.add(u),f.addEventListener("abort",function(){var h,g;a.subscribers.delete(u),a.subscribers.size===0&&(h=a,g=c,setTimeout(function(){h.subscribers.size===0&&Xr(g,h)},3e3))})}var gx={stack:"dbcore",level:0,name:"Cache",create:function(a){var c=a.schema.name;return r(r({},a),{transaction:function(u,f,h){var g,v,b=a.transaction(u,f,h);return f==="readwrite"&&(v=(g=new AbortController).signal,h=function(x){return function(){if(g.abort(),f==="readwrite"){for(var E=new Set,D=0,_=u;D<_.length;D++){var I=_[D],C=ui["idb://".concat(c,"/").concat(I)];if(C){var O=a.table(I),k=C.optimisticOps.filter(function(Z){return Z.trans===b});if(b._explicit&&x&&b.mutatedParts)for(var R=0,T=Object.values(C.queries.query);R<T.length;R++)for(var M=0,P=(K=T[R]).slice();M<P.length;M++)zu((q=P[M]).obsSet,b.mutatedParts)&&(Xr(K,q),q.subscribers.forEach(function(Z){return E.add(Z)}));else if(0<k.length){C.optimisticOps=C.optimisticOps.filter(function(Z){return Z.trans!==b});for(var B=0,V=Object.values(C.queries.query);B<V.length;B++)for(var K,q,W,Q=0,H=(K=V[B]).slice();Q<H.length;Q++)(q=H[Q]).res!=null&&b.mutatedParts&&(x&&!q.dirty?(W=Object.isFrozen(q.res),W=Kp(q.res,q.req,k,O,q,W),q.dirty?(Xr(K,q),q.subscribers.forEach(function(Z){return E.add(Z)})):W!==q.res&&(q.res=W,q.promise=Y.resolve({result:W}))):(q.dirty&&Xr(K,q),q.subscribers.forEach(function(Z){return E.add(Z)})))}}}E.forEach(function(Z){return Z()})}}},b.addEventListener("abort",h(!1),{signal:v}),b.addEventListener("error",h(!1),{signal:v}),b.addEventListener("complete",h(!0),{signal:v})),b},table:function(u){var f=a.table(u),h=f.schema.primaryKey;return r(r({},f),{mutate:function(g){var v=nt.trans;if(h.outbound||v.db._options.cache==="disabled"||v.explicit||v.idbtrans.mode!=="readwrite")return f.mutate(g);var b=ui["idb://".concat(c,"/").concat(u)];return b?(v=f.mutate(g),g.type!=="add"&&g.type!=="put"||!(50<=g.values.length||Gu(h,g).some(function(x){return x==null}))?(b.optimisticOps.push(g),g.mutatedParts&&Ls(g.mutatedParts),v.then(function(x){0<x.numFailures&&(Xr(b.optimisticOps,g),(x=Hp(0,g,x))&&b.optimisticOps.push(x),g.mutatedParts&&Ls(g.mutatedParts))}),v.catch(function(){Xr(b.optimisticOps,g),g.mutatedParts&&Ls(g.mutatedParts)})):v.then(function(x){var E=Hp(0,r(r({},g),{values:g.values.map(function(D,_){var I;return x.failures[_]?D:(D=(I=h.keyPath)!==null&&I!==void 0&&I.includes(".")?pr(D):r({},D),ct(D,h.keyPath,x.results[_]),D)})}),x);b.optimisticOps.push(E),queueMicrotask(function(){return g.mutatedParts&&Ls(g.mutatedParts)})}),v):f.mutate(g)},query:function(g){if(!qp(nt,f)||!Wp("query",g))return f.query(g);var v=((E=nt.trans)===null||E===void 0?void 0:E.db._options.cache)==="immutable",_=nt,b=_.requery,x=_.signal,E=(function(O,k,R,T){var M=ui["idb://".concat(O,"/").concat(k)];if(!M)return[];if(!(k=M.queries[R]))return[null,!1,M,null];var P=k[(T.query?T.query.index.name:null)||""];if(!P)return[null,!1,M,null];switch(R){case"query":var B=P.find(function(V){return V.req.limit===T.limit&&V.req.values===T.values&&Gp(V.req.query.range,T.query.range)});return B?[B,!0,M,P]:[P.find(function(V){return("limit"in V.req?V.req.limit:1/0)>=T.limit&&(!T.values||V.req.values)&&px(V.req.query.range,T.query.range)}),!1,M,P];case"count":return B=P.find(function(V){return Gp(V.req.query.range,T.query.range)}),[B,!!B,M,P]}})(c,u,"query",g),D=E[0],_=E[1],I=E[2],C=E[3];return D&&_?D.obsSet=g.obsSet:(_=f.query(g).then(function(O){var k=O.result;if(D&&(D.res=k),v){for(var R=0,T=k.length;R<T;++R)Object.freeze(k[R]);Object.freeze(k)}else O.result=pr(k);return O}).catch(function(O){return C&&D&&Xr(C,D),Promise.reject(O)}),D={obsSet:g.obsSet,promise:_,subscribers:new Set,type:"query",req:g,dirty:!1},C?C.push(D):(C=[D],(I=I||(ui["idb://".concat(c,"/").concat(u)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[g.query.index.name||""]=C)),mx(D,C,b,x),D.promise.then(function(O){return{result:Kp(O.result,g,I?.optimisticOps,f,D,v)}})}})}})}};function Bs(a,c){return new Proxy(a,{get:function(u,f,h){return f==="db"?c:Reflect.get(u,f,h)}})}var tn=(Jt.prototype.version=function(a){if(isNaN(a)||a<.1)throw new at.Type("Given version is not a positive number");if(a=Math.round(10*a)/10,this.idbdb||this._state.isBeingOpened)throw new at.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var c=this._versions,u=c.filter(function(f){return f._cfg.version===a})[0];return u||(u=new this.Version(a),c.push(u),c.sort(ox),u.stores({}),this._state.autoSchema=!1,u)},Jt.prototype._whenReady=function(a){var c=this;return this.idbdb&&(this._state.openComplete||nt.letThrough||this._vip)?a():new Y(function(u,f){if(c._state.openComplete)return f(new at.DatabaseClosed(c._state.dbOpenError));if(!c._state.isBeingOpened){if(!c._state.autoOpen)return void f(new at.DatabaseClosed);c.open().catch(Mt)}c._state.dbReadyPromise.then(u,f)}).then(a)},Jt.prototype.use=function(a){var c=a.stack,u=a.create,f=a.level,h=a.name;return h&&this.unuse({stack:c,name:h}),a=this._middlewares[c]||(this._middlewares[c]=[]),a.push({stack:c,create:u,level:f??10,name:h}),a.sort(function(g,v){return g.level-v.level}),this},Jt.prototype.unuse=function(a){var c=a.stack,u=a.name,f=a.create;return c&&this._middlewares[c]&&(this._middlewares[c]=this._middlewares[c].filter(function(h){return f?h.create!==f:!!u&&h.name!==u})),this},Jt.prototype.open=function(){var a=this;return si(bn,function(){return lx(a)})},Jt.prototype._close=function(){var a=this._state,c=Hi.indexOf(this);if(0<=c&&Hi.splice(c,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}a.isBeingOpened||(a.dbReadyPromise=new Y(function(u){a.dbReadyResolve=u}),a.openCanceller=new Y(function(u,f){a.cancelOpen=f}))},Jt.prototype.close=function(u){var c=(u===void 0?{disableAutoOpen:!0}:u).disableAutoOpen,u=this._state;c?(u.isBeingOpened&&u.cancelOpen(new at.DatabaseClosed),this._close(),u.autoOpen=!1,u.dbOpenError=new at.DatabaseClosed):(this._close(),u.autoOpen=this._options.autoOpen||u.isBeingOpened,u.openComplete=!1,u.dbOpenError=null)},Jt.prototype.delete=function(a){var c=this;a===void 0&&(a={disableAutoOpen:!0});var u=0<arguments.length&&typeof arguments[0]!="object",f=this._state;return new Y(function(h,g){function v(){c.close(a);var b=c._deps.indexedDB.deleteDatabase(c.name);b.onsuccess=Kt(function(){var x,E,D;x=c._deps,E=c.name,D=x.indexedDB,x=x.IDBKeyRange,$u(D)||E===Cs||Bu(D,x).delete(E).catch(Mt),h()}),b.onerror=Tr(g),b.onblocked=c._fireOnBlocked}if(u)throw new at.InvalidArgument("Invalid closeOptions argument to db.delete()");f.isBeingOpened?f.dbReadyPromise.then(v):v()})},Jt.prototype.backendDB=function(){return this.idbdb},Jt.prototype.isOpen=function(){return this.idbdb!==null},Jt.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"},Jt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Jt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Jt.prototype,"tables",{get:function(){var a=this;return i(this._allTables).map(function(c){return a._allTables[c]})},enumerable:!1,configurable:!0}),Jt.prototype.transaction=function(){var a=function(c,u,f){var h=arguments.length;if(h<2)throw new at.InvalidArgument("Too few arguments");for(var g=new Array(h-1);--h;)g[h-1]=arguments[h];return f=g.pop(),[c,Vt(g),f]}.apply(this,arguments);return this._transaction.apply(this,a)},Jt.prototype._transaction=function(a,c,u){var f=this,h=nt.trans;h&&h.db===this&&a.indexOf("!")===-1||(h=null);var g,v,b=a.indexOf("?")!==-1;a=a.replace("!","").replace("?","");try{if(v=c.map(function(E){if(E=E instanceof f.Table?E.name:E,typeof E!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return E}),a=="r"||a===Ru)g=Ru;else{if(a!="rw"&&a!=Ou)throw new at.InvalidArgument("Invalid transaction mode: "+a);g=Ou}if(h){if(h.mode===Ru&&g===Ou){if(!b)throw new at.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");h=null}h&&v.forEach(function(E){if(h&&h.storeNames.indexOf(E)===-1){if(!b)throw new at.SubTransaction("Table "+E+" not included in parent transaction.");h=null}}),b&&h&&!h.active&&(h=null)}}catch(E){return h?h._promise(null,function(D,_){_(E)}):Zt(E)}var x=function E(D,_,I,C,O){return Y.resolve().then(function(){var k=nt.transless||nt,R=D._createTransaction(_,I,D._dbSchema,C);if(R.explicit=!0,k={trans:R,transless:k},C)R.idbtrans=C.idbtrans;else try{R.create(),R.idbtrans._explicit=!0,D._state.PR1398_maxLoop=3}catch(P){return P.name===yn.InvalidState&&D.isOpen()&&0<--D._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),D.close({disableAutoOpen:!1}),D.open().then(function(){return E(D,_,I,null,O)})):Zt(P)}var T,M=vn(O);return M&&Wi(),k=Y.follow(function(){var P;(T=O.call(R,R))&&(M?(P=wn.bind(null,null),T.then(P,P)):typeof T.next=="function"&&typeof T.throw=="function"&&(T=Hu(T)))},k),(T&&typeof T.then=="function"?Y.resolve(T).then(function(P){return R.active?P:Zt(new at.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):k.then(function(){return T})).then(function(P){return C&&R._resolve(),R._completion.then(function(){return P})}).catch(function(P){return R._reject(P),Zt(P)})})}.bind(null,this,g,v,h,u);return h?h._promise(g,x,"lock"):nt.trans?si(nt.transless,function(){return f._whenReady(x)}):this._whenReady(x)},Jt.prototype.table=function(a){if(!p(this._allTables,a))throw new at.InvalidTable("Table ".concat(a," does not exist"));return this._allTables[a]},Jt);function Jt(a,c){var u=this;this._middlewares={},this.verno=0;var f=Jt.dependencies;this._options=c=r({addons:Jt.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange,cache:"cloned"},c),this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange},f=c.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var h,g,v,b,x,E={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Mt,dbReadyPromise:null,cancelOpen:Mt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:c.autoOpen};E.dbReadyPromise=new Y(function(_){E.dbReadyResolve=_}),E.openCanceller=new Y(function(_,I){E.cancelOpen=I}),this._state=E,this.name=a,this.on=Qo(this,"populate","blocked","versionchange","close",{ready:[vu,Mt]}),this.on.ready.subscribe=tt(this.on.ready.subscribe,function(_){return function(I,C){Jt.vip(function(){var O,k=u._state;k.openComplete?(k.dbOpenError||Y.resolve().then(I),C&&_(I)):k.onReadyBeingFired?(k.onReadyBeingFired.push(I),C&&_(I)):(_(I),O=u,C||_(function R(){O.on.ready.unsubscribe(I),O.on.ready.unsubscribe(R)}))})}}),this.Collection=(h=this,Yo(Zw.prototype,function(T,R){this.db=h;var C=Ep,O=null;if(R)try{C=R()}catch(M){O=M}var k=T._ctx,R=k.table,T=R.hook.reading.fire;this._ctx={table:R,index:k.index,isPrimKey:!k.index||R.schema.primKey.keyPath&&k.index===R.schema.primKey.name,range:C,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:O,or:k.or,valueMapper:T!==qo?T:null}})),this.Table=(g=this,Yo(Ap.prototype,function(_,I,C){this.db=g,this._tx=C,this.name=_,this.schema=I,this.hook=g._allTables[_]?g._allTables[_].hook:Qo(null,{creating:[Vw,Mt],reading:[zw,qo],updating:[Ww,Mt],deleting:[qw,Mt]})})),this.Transaction=(v=this,Yo(ex.prototype,function(_,I,C,O,k){var R=this;this.db=v,this.mode=_,this.storeNames=I,this.schema=C,this.chromeTransactionDurability=O,this.idbtrans=null,this.on=Qo(this,"complete","error","abort"),this.parent=k||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Y(function(T,M){R._resolve=T,R._reject=M}),this._completion.then(function(){R.active=!1,R.on.complete.fire()},function(T){var M=R.active;return R.active=!1,R.on.error.fire(T),R.parent?R.parent._reject(T):M&&R.idbtrans&&R.idbtrans.abort(),Zt(T)})})),this.Version=(b=this,Yo(cx.prototype,function(_){this.db=b,this._cfg={version:_,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(x=this,Yo(Pp.prototype,function(_,I,C){if(this.db=x,this._ctx={table:_,index:I===":id"?null:I,or:C},this._cmp=this._ascending=_t,this._descending=function(O,k){return _t(k,O)},this._max=function(O,k){return 0<_t(O,k)?O:k},this._min=function(O,k){return _t(O,k)<0?O:k},this._IDBKeyRange=x._deps.IDBKeyRange,!this._IDBKeyRange)throw new at.MissingAPI})),this.on("versionchange",function(_){0<_.newVersion?console.warn("Another connection wants to upgrade database '".concat(u.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(u.name,"'. Closing db now to resume the delete request.")),u.close({disableAutoOpen:!1})}),this.on("blocked",function(_){!_.newVersion||_.newVersion<_.oldVersion?console.warn("Dexie.delete('".concat(u.name,"') was blocked")):console.warn("Upgrade '".concat(u.name,"' blocked by other connection holding version ").concat(_.oldVersion/10))}),this._maxKey=ta(c.IDBKeyRange),this._createTransaction=function(_,I,C,O){return new u.Transaction(_,I,C,u._options.chromeTransactionDurability,O)},this._fireOnBlocked=function(_){u.on("blocked").fire(_),Hi.filter(function(I){return I.name===u.name&&I!==u&&!I._state.vcFired}).map(function(I){return I.on("versionchange").fire(_)})},this.use(fx),this.use(gx),this.use(hx),this.use(ux),this.use(dx);var D=new Proxy(this,{get:function(_,I,C){if(I==="_vip")return!0;if(I==="table")return function(k){return Bs(u.table(k),D)};var O=Reflect.get(_,I,C);return O instanceof Ap?Bs(O,D):I==="tables"?O.map(function(k){return Bs(k,D)}):I==="_createTransaction"?function(){return Bs(O.apply(this,arguments),D)}:O}});this.vip=D,f.forEach(function(_){return _(u)})}var $s,er=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",vx=(Yu.prototype.subscribe=function(a,c,u){return this._subscribe(a&&typeof a!="function"?a:{next:a,error:c,complete:u})},Yu.prototype[er]=function(){return this},Yu);function Yu(a){this._subscribe=a}try{$s={indexedDB:n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB,IDBKeyRange:n.IDBKeyRange||n.webkitIDBKeyRange}}catch{$s={indexedDB:null,IDBKeyRange:null}}function Qp(a){var c,u=!1,f=new vx(function(h){var g=vn(a),v,b=!1,x={},E={},D={get closed(){return b},unsubscribe:function(){b||(b=!0,v&&v.abort(),_&&Sn.storagemutated.unsubscribe(C))}};h.start&&h.start(D);var _=!1,I=function(){return Eu(O)},C=function(k){Ns(x,k),zu(E,x)&&I()},O=function(){var k,R,T;!b&&$s.indexedDB&&(x={},k={},v&&v.abort(),v=new AbortController,T=(function(M){var P=Vi();try{g&&Wi();var B=_n(a,M);return B=g?B.finally(wn):B}finally{P&&qi()}})(R={subscr:k,signal:v.signal,requery:I,querier:a,trans:null}),Promise.resolve(T).then(function(M){u=!0,c=M,b||R.signal.aborted||(x={},(function(P){for(var B in P)if(p(P,B))return;return 1})(E=k)||_||(Sn(Jo,C),_=!0),Eu(function(){return!b&&h.next&&h.next(M)}))},function(M){u=!1,["DatabaseClosedError","AbortError"].includes(M?.name)||b||Eu(function(){b||h.error&&h.error(M)})}))};return setTimeout(I,0),D});return f.hasValue=function(){return u},f.getValue=function(){return c},f}var di=tn;function Xu(a){var c=En;try{En=!0,Sn.storagemutated.fire(a),Wu(a,!0)}finally{En=c}}m(di,r(r({},ps),{delete:function(a){return new di(a,{addons:[]}).delete()},exists:function(a){return new di(a,{addons:[]}).open().then(function(c){return c.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return c=di.dependencies,u=c.indexedDB,c=c.IDBKeyRange,($u(u)?Promise.resolve(u.databases()).then(function(f){return f.map(function(h){return h.name}).filter(function(h){return h!==Cs})}):Bu(u,c).toCollection().primaryKeys()).then(a)}catch{return Zt(new at.MissingAPI)}var c,u},defineClass:function(){return function(a){s(this,a)}},ignoreTransaction:function(a){return nt.trans?si(nt.transless,a):a()},vip:ju,async:function(a){return function(){try{var c=Hu(a.apply(this,arguments));return c&&typeof c.then=="function"?c:Y.resolve(c)}catch(u){return Zt(u)}}},spawn:function(a,c,u){try{var f=Hu(a.apply(u,c||[]));return f&&typeof f.then=="function"?f:Y.resolve(f)}catch(h){return Zt(h)}},currentTransaction:{get:function(){return nt.trans||null}},waitFor:function(a,c){return c=Y.resolve(typeof a=="function"?di.ignoreTransaction(a):a).timeout(c||6e4),nt.trans?nt.trans.waitFor(c):c},Promise:Y,debug:{get:function(){return Ir},set:function(a){yp(a)}},derive:A,extend:s,props:m,override:tt,Events:Qo,on:Sn,liveQuery:Qp,extendObservabilitySet:Ns,getByKeyPath:Tt,setByKeyPath:ct,delByKeyPath:function(a,c){typeof c=="string"?ct(a,c,void 0):"length"in c&&[].map.call(c,function(u){ct(a,u,void 0)})},shallowClone:Nt,deepClone:pr,getObjectDiff:Ku,cmp:_t,asap:et,minKey:-1/0,addons:[],connections:Hi,errnames:yn,dependencies:$s,cache:ui,semVer:"4.0.10",version:"4.0.10".split(".").map(function(a){return parseInt(a)}).reduce(function(a,c,u){return a+c/Math.pow(10,2*u)})})),di.maxKey=ta(di.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Sn(Jo,function(a){En||(a=new CustomEvent(Iu,{detail:a}),En=!0,dispatchEvent(a),En=!1)}),addEventListener(Iu,function(a){a=a.detail,En||Xu(a)}));var Qi,En=!1,Yp=function(){};return typeof BroadcastChannel<"u"&&((Yp=function(){(Qi=new BroadcastChannel(Iu)).onmessage=function(a){return a.data&&Xu(a.data)}})(),typeof Qi.unref=="function"&&Qi.unref(),Sn(Jo,function(a){En||Qi.postMessage(a)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(a){if(!tn.disableBfCache&&a.persisted){Ir&&console.debug("Dexie: handling persisted pagehide"),Qi?.close();for(var c=0,u=Hi;c<u.length;c++)u[c].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(a){!tn.disableBfCache&&a.persisted&&(Ir&&console.debug("Dexie: handling persisted pageshow"),Yp(),Xu({all:new _e(-1/0,[[]])}))})),Y.rejectionMapper=function(a,c){return!a||a instanceof gr||a instanceof TypeError||a instanceof SyntaxError||!a.name||!vp[a.name]?a:(c=new vp[a.name](c||a.message,a),"stack"in a&&S(c,"stack",{get:function(){return this.inner.stack}}),c)},yp(Ir),r(tn,Object.freeze({__proto__:null,Dexie:tn,liveQuery:Qp,Entity:Rp,cmp:_t,PropModSymbol:Jr,PropModification:Xo,replacePrefix:function(a,c){return new Xo({replacePrefix:[a,c]})},add:function(a){return new Xo({add:a})},remove:function(a){return new Xo({remove:a})},default:tn,RangeSet:_e,mergeRanges:na,rangesOverlap:$p}),{default:tn}),tn})});var da=class{_attachedHost;attach(r){return this._attachedHost=r,r.attach(this)}detach(){let r=this._attachedHost;r!=null&&(this._attachedHost=null,r.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(r){this._attachedHost=r}},an=class extends da{component;viewContainerRef;injector;projectableNodes;constructor(r,e,n,i){super(),this.component=r,this.viewContainerRef=e,this.injector=n,this.projectableNodes=i}},Br=class extends da{templateRef;viewContainerRef;context;injector;constructor(r,e,n,i){super(),this.templateRef=r,this.viewContainerRef=e,this.context=n,this.injector=i}get origin(){return this.templateRef.elementRef}attach(r,e=this.context){return this.context=e,super.attach(r)}detach(){return this.context=void 0,super.detach()}},vd=class extends da{element;constructor(r){super(),this.element=r instanceof Bt?r.nativeElement:r}},Tn=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(r){if(r instanceof an)return this._attachedPortal=r,this.attachComponentPortal(r);if(r instanceof Br)return this._attachedPortal=r,this.attachTemplatePortal(r);if(this.attachDomPortal&&r instanceof vd)return this._attachedPortal=r,this.attachDomPortal(r)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(r){this._disposeFn=r}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},oc=class extends Tn{outletElement;_appRef;_defaultInjector;constructor(r,e,n){super(),this.outletElement=r,this._appRef=e,this._defaultInjector=n}attachComponentPortal(r){let e;if(r.viewContainerRef){let n=r.injector||r.viewContainerRef.injector,i=n.get(sd,null,{optional:!0})||void 0;e=r.viewContainerRef.createComponent(r.component,{index:r.viewContainerRef.length,injector:n,ngModuleRef:i,projectableNodes:r.projectableNodes||void 0}),this.setDisposeFn(()=>e.destroy())}else{let n=this._appRef,i=r.injector||this._defaultInjector||wt.NULL,o=i.get(br,n.injector);e=km(r.component,{elementInjector:i,environmentInjector:o,projectableNodes:r.projectableNodes||void 0}),n.attachView(e.hostView),this.setDisposeFn(()=>{n.viewCount>0&&n.detachView(e.hostView),e.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(e)),this._attachedPortal=r,e}attachTemplatePortal(r){let e=r.viewContainerRef,n=e.createEmbeddedView(r.templateRef,r.context,{injector:r.injector});return n.rootNodes.forEach(i=>this.outletElement.appendChild(i)),n.detectChanges(),this.setDisposeFn(()=>{let i=e.indexOf(n);i!==-1&&e.remove(i)}),this._attachedPortal=r,n}attachDomPortal=r=>{let e=r.element;e.parentNode;let n=this.outletElement.ownerDocument.createComment("dom-portal");e.parentNode.insertBefore(n,e),this.outletElement.appendChild(e),this._attachedPortal=r,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(e,n)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(r){return r.hostView.rootNodes[0]}},DD=(()=>{class t extends Br{constructor(){let e=w(nn),n=w(kn);super(e,n)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=kt({type:t,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[Re]})}return t})(),Mn=(()=>{class t extends Tn{_moduleRef=w(sd,{optional:!0});_document=w(Lt);_viewContainerRef=w(kn);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}attached=new ee;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);let n=e.viewContainerRef!=null?e.viewContainerRef:this._viewContainerRef,i=n.createComponent(e.component,{index:n.length,injector:e.injector||n.injector,projectableNodes:e.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return n!==this._viewContainerRef&&this._getRootNode().appendChild(i.hostView.rootNodes[0]),super.setDisposeFn(()=>i.destroy()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}attachTemplatePortal(e){e.setAttachedHost(this);let n=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}attachDomPortal=e=>{let n=e.element;n.parentNode;let i=this._document.createComment("dom-portal");e.setAttachedHost(this),n.parentNode.insertBefore(i,n),this._getRootNode().appendChild(n),this._attachedPortal=e,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(n,i)})};_getRootNode(){let e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static \u0275fac=function(n){return new(n||t)};static \u0275dir=kt({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Re]})}return t})(),sn=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Ht({type:t});static \u0275inj=Wt({})}return t})();function fa(t){return t.buttons===0||t.detail===0}function ha(t){let r=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!r&&r.identifier===-1&&(r.radiusX==null||r.radiusX===1)&&(r.radiusY==null||r.radiusY===1)}var yd;function Um(){if(yd==null){let t=typeof document<"u"?document.head:null;yd=!!(t&&(t.createShadowRoot||t.attachShadow))}return yd}function bd(t){if(Um()){let r=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&r instanceof ShadowRoot)return r}return null}function pa(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){let r=t.shadowRoot.activeElement;if(r===t)break;t=r}return t}function De(t){return t.composedPath?t.composedPath()[0]:t.target}var _d;try{_d=typeof Intl<"u"&&Intl.v8BreakIterator}catch{_d=!1}var $t=(()=>{class t{_platformId=w(Xs);isBrowser=this._platformId?nc(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||_d)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ma;function zm(){if(ma==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ma=!0}))}finally{ma=ma||!1}return ma}function eo(t){return zm()?t:!!t.capture}function ga(t,r=0){return Vm(t)?Number(t):arguments.length===2?r:0}function Vm(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function $r(t){return t instanceof Bt?t.nativeElement:t}var qm=new ot("cdk-input-modality-detector-options"),Wm={ignoreKeys:[18,17,224,91,16]},Hm=650,wd={passive:!0,capture:!0},Km=(()=>{class t{_platform=w($t);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new fe(null);_options;_lastTouchMs=0;_onKeydown=e=>{this._options?.ignoreKeys?.some(n=>n===e.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=De(e))};_onMousedown=e=>{Date.now()-this._lastTouchMs<Hm||(this._modality.next(fa(e)?"keyboard":"mouse"),this._mostRecentTarget=De(e))};_onTouchstart=e=>{if(ha(e)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=De(e)};constructor(){let e=w(Ct),n=w(Lt),i=w(qm,{optional:!0});if(this._options=$($({},Wm),i),this.modalityDetected=this._modality.pipe(Gs(1)),this.modalityChanged=this.modalityDetected.pipe(Dn()),this._platform.isBrowser){let o=w(wr).createRenderer(null,null);this._listenerCleanups=e.runOutsideAngular(()=>[o.listen(n,"keydown",this._onKeydown,wd),o.listen(n,"mousedown",this._onMousedown,wd),o.listen(n,"touchstart",this._onTouchstart,wd)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(e=>e())}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),va=(function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t})(va||{}),Gm=new ot("cdk-focus-monitor-default-options"),ac=eo({passive:!0,capture:!0}),ya=(()=>{class t{_ngZone=w(Ct);_platform=w($t);_inputModalityDetector=w(Km);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=w(Lt);_stopInputModalityDetector=new it;constructor(){let e=w(Gm,{optional:!0});this._detectionMode=e?.detectionMode||va.IMMEDIATE}_rootNodeFocusAndBlurListener=e=>{let n=De(e);for(let i=n;i;i=i.parentElement)e.type==="focus"?this._onFocus(e,i):this._onBlur(e,i)};monitor(e,n=!1){let i=$r(e);if(!this._platform.isBrowser||i.nodeType!==1)return lt();let o=bd(i)||this._document,s=this._elementInfo.get(i);if(s)return n&&(s.checkChildren=!0),s.subject;let l={checkChildren:n,subject:new it,rootNode:o};return this._elementInfo.set(i,l),this._registerGlobalListeners(l),l.subject}stopMonitoring(e){let n=$r(e),i=this._elementInfo.get(n);i&&(i.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(i))}focusVia(e,n,i){let o=$r(e),s=this._document.activeElement;o===s?this._getClosestElementsInfo(o).forEach(([l,d])=>this._originChanged(l,n,d)):(this._setOrigin(n),typeof o.focus=="function"&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((e,n)=>this.stopMonitoring(n))}_getWindow(){return this._document.defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===va.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,n){e.classList.toggle("cdk-focused",!!n),e.classList.toggle("cdk-touch-focused",n==="touch"),e.classList.toggle("cdk-keyboard-focused",n==="keyboard"),e.classList.toggle("cdk-mouse-focused",n==="mouse"),e.classList.toggle("cdk-program-focused",n==="program")}_setOrigin(e,n=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&n,this._detectionMode===va.IMMEDIATE){clearTimeout(this._originTimeoutId);let i=this._originFromTouchInteraction?Hm:1;this._originTimeoutId=setTimeout(()=>this._origin=null,i)}})}_onFocus(e,n){let i=this._elementInfo.get(n),o=De(e);!i||!i.checkChildren&&n!==o||this._originChanged(n,this._getFocusOrigin(o),i)}_onBlur(e,n){let i=this._elementInfo.get(n);!i||i.checkChildren&&e.relatedTarget instanceof Node&&n.contains(e.relatedTarget)||(this._setClasses(n),this._emitOrigin(i,null))}_emitOrigin(e,n){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(n))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let n=e.rootNode,i=this._rootNodeFocusListenerCount.get(n)||0;i||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,ac),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,ac)}),this._rootNodeFocusListenerCount.set(n,i+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(yr(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(e){let n=e.rootNode;if(this._rootNodeFocusListenerCount.has(n)){let i=this._rootNodeFocusListenerCount.get(n);i>1?this._rootNodeFocusListenerCount.set(n,i-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,ac),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,ac),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,n,i){this._setClasses(e,n),this._emitOrigin(i,n),this._lastFocusOrigin=n}_getClosestElementsInfo(e){let n=[];return this._elementInfo.forEach((i,o)=>{(o===e||i.checkChildren&&o.contains(e))&&n.push([o,i])}),n}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:n,mostRecentModality:i}=this._inputModalityDetector;if(i!=="mouse"||!n||n===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let o=e.labels;if(o){for(let s=0;s<o.length;s++)if(o[s].contains(n))return!0}return!1}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ro(t){return Array.isArray(t)?t:[t]}var Qm=new Set,bi,sc=(()=>{class t{_platform=w($t);_nonce=w(fm,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):wx}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&_x(e,this._nonce),this._matchMedia(e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function _x(t,r){if(!Qm.has(t))try{bi||(bi=document.createElement("style"),r&&bi.setAttribute("nonce",r),bi.setAttribute("type","text/css"),document.head.appendChild(bi)),bi.sheet&&(bi.sheet.insertRule(`@media ${t} {body{ }}`,0),Qm.add(t))}catch(e){console.error(e)}}function wx(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var ba=(()=>{class t{_mediaMatcher=w(sc);_zone=w(Ct);_queries=new Map;_destroySubject=new it;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return Ym(ro(e)).some(i=>this._registerQuery(i).mql.matches)}observe(e){let i=Ym(ro(e)).map(s=>this._registerQuery(s).observable),o=oa(i);return o=Vs(o.pipe(Ne(1)),o.pipe(Gs(1),Hs(0))),o.pipe(mt(s=>{let l={matches:!1,breakpoints:{}};return s.forEach(({matches:d,query:p})=>{l.matches=l.matches||d,l.breakpoints[p]=d}),l}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let n=this._mediaMatcher.matchMedia(e),o={observable:new Rn(s=>{let l=d=>this._zone.run(()=>s.next(d));return n.addListener(l),()=>{n.removeListener(l)}}).pipe(Ve(n),mt(({matches:s})=>({query:e,matches:s})),yr(this._destroySubject)),mql:n};return this._queries.set(e,o),o}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ym(t){return t.map(r=>r.split(",")).reduce((r,e)=>r.concat(e)).map(r=>r.trim())}var xx=(()=>{class t{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Xm=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Ht({type:t});static \u0275inj=Wt({providers:[xx]})}return t})();var Sd=(()=>{class t{_platform=w($t);constructor(){}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return Sx(e)&&getComputedStyle(e).visibility==="visible"}isTabbable(e){if(!this._platform.isBrowser)return!1;let n=Cx(Tx(e));if(n&&(Zm(n)===-1||!this.isVisible(n)))return!1;let i=e.nodeName.toLowerCase(),o=Zm(e);return e.hasAttribute("contenteditable")?o!==-1:i==="iframe"||i==="object"||this._platform.WEBKIT&&this._platform.IOS&&!kx(e)?!1:i==="audio"?e.hasAttribute("controls")?o!==-1:!1:i==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||e.hasAttribute("controls"):e.tabIndex>=0}isFocusable(e,n){return Ix(e)&&!this.isDisabled(e)&&(n?.ignoreVisibility||this.isVisible(e))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Cx(t){try{return t.frameElement}catch{return null}}function Sx(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function Ex(t){let r=t.nodeName.toLowerCase();return r==="input"||r==="select"||r==="button"||r==="textarea"}function Rx(t){return Dx(t)&&t.type=="hidden"}function Ox(t){return Ax(t)&&t.hasAttribute("href")}function Dx(t){return t.nodeName.toLowerCase()=="input"}function Ax(t){return t.nodeName.toLowerCase()=="a"}function eg(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let r=t.getAttribute("tabindex");return!!(r&&!isNaN(parseInt(r,10)))}function Zm(t){if(!eg(t))return null;let r=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(r)?-1:r}function kx(t){let r=t.nodeName.toLowerCase(),e=r==="input"&&t.type;return e==="text"||e==="password"||r==="select"||r==="textarea"}function Ix(t){return Rx(t)?!1:Ex(t)||Ox(t)||t.hasAttribute("contenteditable")||eg(t)}function Tx(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var Cd=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(r){this._enabled=r,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(r,this._startAnchor),this._toggleAnchorTabIndex(r,this._endAnchor))}_enabled=!0;constructor(r,e,n,i,o=!1,s){this._element=r,this._checker=e,this._ngZone=n,this._document=i,this._injector=s,o||this.attachAnchors()}destroy(){let r=this._startAnchor,e=this._endAnchor;r&&(r.removeEventListener("focus",this.startAnchorListener),r.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(r){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(r)))})}focusFirstTabbableElementWhenReady(r){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(r)))})}focusLastTabbableElementWhenReady(r){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(r)))})}_getRegionBoundary(r){let e=this._element.querySelectorAll(`[cdk-focus-region-${r}], [cdkFocusRegion${r}], [cdk-focus-${r}]`);return r=="start"?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(r){let e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){let n=this._getFirstTabbableElement(e);return n?.focus(r),!!n}return e.focus(r),!0}return this.focusFirstTabbableElement(r)}focusFirstTabbableElement(r){let e=this._getRegionBoundary("start");return e&&e.focus(r),!!e}focusLastTabbableElement(r){let e=this._getRegionBoundary("end");return e&&e.focus(r),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(r){if(this._checker.isFocusable(r)&&this._checker.isTabbable(r))return r;let e=r.children;for(let n=0;n<e.length;n++){let i=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(i)return i}return null}_getLastTabbableElement(r){if(this._checker.isFocusable(r)&&this._checker.isTabbable(r))return r;let e=r.children;for(let n=e.length-1;n>=0;n--){let i=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(i)return i}return null}_createAnchor(){let r=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,r),r.classList.add("cdk-visually-hidden"),r.classList.add("cdk-focus-trap-anchor"),r.setAttribute("aria-hidden","true"),r}_toggleAnchorTabIndex(r,e){r?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(r){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(r,this._startAnchor),this._toggleAnchorTabIndex(r,this._endAnchor))}_executeOnStable(r){this._injector?We(r,{injector:this._injector}):setTimeout(r)}},Ed=(()=>{class t{_checker=w(Sd);_ngZone=w(Ct);_document=w(Lt);_injector=w(wt);constructor(){w(Cr).load(ic)}create(e,n=!1){return new Cd(e,this._checker,this._ngZone,this._document,n,this._injector)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var rg=new ot("liveAnnouncerElement",{providedIn:"root",factory:()=>null}),ng=new ot("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),Mx=0,Rd=(()=>{class t{_ngZone=w(Ct);_defaultOptions=w(ng,{optional:!0});_liveElement;_document=w(Lt);_previousTimeout;_currentPromise;_currentResolve;constructor(){let e=w(rg,{optional:!0});this._liveElement=e||this._createLiveElement()}announce(e,...n){let i=this._defaultOptions,o,s;return n.length===1&&typeof n[0]=="number"?s=n[0]:[o,s]=n,this.clear(),clearTimeout(this._previousTimeout),o||(o=i&&i.politeness?i.politeness:"polite"),s==null&&i&&(s=i.duration),this._liveElement.setAttribute("aria-live",o),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(l=>this._currentResolve=l)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,typeof s=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),s)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let e="cdk-live-announcer-element",n=this._document.getElementsByClassName(e),i=this._document.createElement("div");for(let o=0;o<n.length;o++)n[o].remove();return i.classList.add(e),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),i.id=`cdk-live-announcer-${Mx++}`,this._document.body.appendChild(i),i}_exposeAnnouncerToModals(e){let n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let i=0;i<n.length;i++){let o=n[i],s=o.getAttribute("aria-owns");s?s.indexOf(e)===-1&&o.setAttribute("aria-owns",s+" "+e):o.setAttribute("aria-owns",e)}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Pn=(function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t})(Pn||{}),Jm="cdk-high-contrast-black-on-white",tg="cdk-high-contrast-white-on-black",xd="cdk-high-contrast-active",ig=(()=>{class t{_platform=w($t);_hasCheckedHighContrastMode;_document=w(Lt);_breakpointSubscription;constructor(){this._breakpointSubscription=w(ba).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Pn.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let n=this._document.defaultView||window,i=n&&n.getComputedStyle?n.getComputedStyle(e):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Pn.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Pn.BLACK_ON_WHITE}return Pn.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(xd,Jm,tg),this._hasCheckedHighContrastMode=!0;let n=this.getHighContrastMode();n===Pn.BLACK_ON_WHITE?e.add(xd,Jm):n===Pn.WHITE_ON_BLACK&&e.add(xd,tg)}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Od=(()=>{class t{constructor(){w(ig)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(n){return new(n||t)};static \u0275mod=Ht({type:t});static \u0275inj=Wt({imports:[Xm]})}return t})();var Dd={},or=class t{_appId=w(Ys);static _infix=`a${Math.floor(Math.random()*1e5).toString()}`;getId(r,e=!1){return this._appId!=="ng"&&(r+=this._appId),Dd.hasOwnProperty(r)||(Dd[r]=0),`${r}${e?t._infix+"-":""}${Dd[r]++}`}static \u0275fac=function(e){return new(e||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})};var Px=200,cc=class{_letterKeyStream=new it;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new it;selectedItem=this._selectedItem;constructor(r,e){let n=typeof e?.debounceInterval=="number"?e.debounceInterval:Px;e?.skipPredicate&&(this._skipPredicateFn=e.skipPredicate),this.setItems(r),this._setupKeyHandler(n)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(r){this._selectedItemIndex=r}setItems(r){this._items=r}handleKey(r){let e=r.keyCode;r.key&&r.key.length===1?this._letterKeyStream.next(r.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(r){this._letterKeyStream.pipe(Se(e=>this._pressedLetters.push(e)),Hs(r),gt(()=>this._pressedLetters.length>0),mt(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(e=>{for(let n=1;n<this._items.length+1;n++){let i=(this._selectedItemIndex+n)%this._items.length,o=this._items[i];if(!this._skipPredicateFn?.(o)&&o.getLabel?.().toLocaleUpperCase().trim().indexOf(e)===0){this._selectedItem.next(o);break}}this._pressedLetters=[]})}};function Nn(t,...r){return r.length?r.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}var no=class{_items;_activeItemIndex=_r(-1);_activeItem=_r(null);_wrap=!1;_typeaheadSubscription=rr.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=r=>r.disabled;constructor(r,e){this._items=r,r instanceof ad?this._itemChangesSubscription=r.changes.subscribe(n=>this._itemsChanged(n.toArray())):cd(r)&&(this._effectRef=od(()=>this._itemsChanged(r()),{injector:e}))}tabOut=new it;change=new it;skipPredicate(r){return this._skipPredicateFn=r,this}withWrap(r=!0){return this._wrap=r,this}withVerticalOrientation(r=!0){return this._vertical=r,this}withHorizontalOrientation(r){return this._horizontal=r,this}withAllowedModifierKeys(r){return this._allowedModifierKeys=r,this}withTypeAhead(r=200){this._typeaheadSubscription.unsubscribe();let e=this._getItemsArray();return this._typeahead=new cc(e,{debounceInterval:typeof r=="number"?r:void 0,skipPredicate:n=>this._skipPredicateFn(n)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(n=>{this.setActiveItem(n)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(r=!0){return this._homeAndEnd=r,this}withPageUpDown(r=!0,e=10){return this._pageUpAndDown={enabled:r,delta:e},this}setActiveItem(r){let e=this._activeItem();this.updateActiveItem(r),this._activeItem()!==e&&this.change.next(this._activeItemIndex())}onKeydown(r){let e=r.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!r[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&i){this.setNextItemActive();break}else return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&i){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&i){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&i){let o=this._activeItemIndex()-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&i){let o=this._activeItemIndex()+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(o<s?o:s-1,-1);break}else return;default:(i||Nn(r,"shiftKey"))&&this._typeahead?.handleKey(r);return}this._typeahead?.reset(),r.preventDefault()}get activeItemIndex(){return this._activeItemIndex()}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex()<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex()<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(r){let e=this._getItemsArray(),n=typeof r=="number"?r:e.indexOf(r),i=e[n];this._activeItem.set(i??null),this._activeItemIndex.set(n),this._typeahead?.setCurrentSelectedItemIndex(n)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(r){this._wrap?this._setActiveInWrapMode(r):this._setActiveInDefaultMode(r)}_setActiveInWrapMode(r){let e=this._getItemsArray();for(let n=1;n<=e.length;n++){let i=(this._activeItemIndex()+r*n+e.length)%e.length,o=e[i];if(!this._skipPredicateFn(o)){this.setActiveItem(i);return}}}_setActiveInDefaultMode(r){this._setActiveItemByIndex(this._activeItemIndex()+r,r)}_setActiveItemByIndex(r,e){let n=this._getItemsArray();if(n[r]){for(;this._skipPredicateFn(n[r]);)if(r+=e,!n[r])return;this.setActiveItem(r)}}_getItemsArray(){return cd(this._items)?this._items():this._items instanceof ad?this._items.toArray():this._items}_itemsChanged(r){this._typeahead?.setItems(r);let e=this._activeItem();if(e){let n=r.indexOf(e);n>-1&&n!==this._activeItemIndex()&&(this._activeItemIndex.set(n),this._typeahead?.setCurrentSelectedItemIndex(n))}}};var Ad=class extends no{setActiveItem(r){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(r),this.activeItem&&this.activeItem.setActiveStyles()}};var kd=class extends no{_origin="program";setFocusOrigin(r){return this._origin=r,this}setActiveItem(r){super.setActiveItem(r),this.activeItem&&this.activeItem.focus(this._origin)}};var ag=" ";function Nx(t,r,e){let n=uc(t,r);e=e.trim(),!n.some(i=>i.trim()===e)&&(n.push(e),t.setAttribute(r,n.join(ag)))}function Lx(t,r,e){let n=uc(t,r);e=e.trim();let i=n.filter(o=>o!==e);i.length?t.setAttribute(r,i.join(ag)):t.removeAttribute(r)}function uc(t,r){return t.getAttribute(r)?.match(/\S+/g)??[]}var sg="cdk-describedby-message",lc="cdk-describedby-host",Td=0,ck=(()=>{class t{_platform=w($t);_document=w(Lt);_messageRegistry=new Map;_messagesContainer=null;_id=`${Td++}`;constructor(){w(Cr).load(ic),this._id=w(Ys)+"-"+Td++}describe(e,n,i){if(!this._canBeDescribed(e,n))return;let o=Id(n,i);typeof n!="string"?(og(n,this._id),this._messageRegistry.set(o,{messageElement:n,referenceCount:0})):this._messageRegistry.has(o)||this._createMessageElement(n,i),this._isElementDescribedByMessage(e,o)||this._addMessageReference(e,o)}removeDescription(e,n,i){if(!n||!this._isElementNode(e))return;let o=Id(n,i);if(this._isElementDescribedByMessage(e,o)&&this._removeMessageReference(e,o),typeof n=="string"){let s=this._messageRegistry.get(o);s&&s.referenceCount===0&&this._deleteMessageElement(o)}this._messagesContainer?.childNodes.length===0&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){let e=this._document.querySelectorAll(`[${lc}="${this._id}"]`);for(let n=0;n<e.length;n++)this._removeCdkDescribedByReferenceIds(e[n]),e[n].removeAttribute(lc);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,n){let i=this._document.createElement("div");og(i,this._id),i.textContent=e,n&&i.setAttribute("role",n),this._createMessagesContainer(),this._messagesContainer.appendChild(i),this._messageRegistry.set(Id(e,n),{messageElement:i,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;let e="cdk-describedby-message-container",n=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let o=0;o<n.length;o++)n[o].remove();let i=this._document.createElement("div");i.style.visibility="hidden",i.classList.add(e),i.classList.add("cdk-visually-hidden"),this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._messagesContainer=i}_removeCdkDescribedByReferenceIds(e){let n=uc(e,"aria-describedby").filter(i=>i.indexOf(sg)!=0);e.setAttribute("aria-describedby",n.join(" "))}_addMessageReference(e,n){let i=this._messageRegistry.get(n);Nx(e,"aria-describedby",i.messageElement.id),e.setAttribute(lc,this._id),i.referenceCount++}_removeMessageReference(e,n){let i=this._messageRegistry.get(n);i.referenceCount--,Lx(e,"aria-describedby",i.messageElement.id),e.removeAttribute(lc)}_isElementDescribedByMessage(e,n){let i=uc(e,"aria-describedby"),o=this._messageRegistry.get(n),s=o&&o.messageElement.id;return!!s&&i.indexOf(s)!=-1}_canBeDescribed(e,n){if(!this._isElementNode(e))return!1;if(n&&typeof n=="object")return!0;let i=n==null?"":`${n}`.trim(),o=e.getAttribute("aria-label");return i?!o||o.trim()!==i:!1}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Id(t,r){return typeof t=="string"?`${r||""}/${t}`:t}function og(t,r){t.id||(t.id=`${sg}-${r}-${Td++}`)}var Sr=(function(t){return t[t.NORMAL=0]="NORMAL",t[t.NEGATED=1]="NEGATED",t[t.INVERTED=2]="INVERTED",t})(Sr||{}),dc,_i;function fc(){if(_i==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return _i=!1,_i;if(document.documentElement?.style&&"scrollBehavior"in document.documentElement.style)_i=!0;else{let t=Element.prototype.scrollTo;t?_i=!/\{\s*\[native code\]\s*\}/.test(t.toString()):_i=!1}}return _i}function io(){if(typeof document!="object"||!document)return Sr.NORMAL;if(dc==null){let t=document.createElement("div"),r=t.style;t.dir="rtl",r.width="1px",r.overflow="auto",r.visibility="hidden",r.pointerEvents="none",r.position="absolute";let e=document.createElement("div"),n=e.style;n.width="2px",n.height="1px",t.appendChild(e),document.body.appendChild(t),dc=Sr.NORMAL,t.scrollLeft===0&&(t.scrollLeft=1,dc=t.scrollLeft===0?Sr.NEGATED:Sr.INVERTED),t.remove()}return dc}function Md(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var oo,cg=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function yk(){if(oo)return oo;if(typeof document!="object"||!document)return oo=new Set(cg),oo;let t=document.createElement("input");return oo=new Set(cg.filter(r=>(t.setAttribute("type",r),t.type===r))),oo}var lg={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};var Fx=new ot("MATERIAL_ANIMATIONS"),ug=null;function Bx(){return w(Fx,{optional:!0})?.animationsDisabled||w(Zs,{optional:!0})==="NoopAnimations"?"di-disabled":(ug??=w(sc).matchMedia("(prefers-reduced-motion)").matches,ug?"reduced-motion":"enabled")}function ar(){return Bx()!=="enabled"}function te(t){return t==null?"":typeof t=="string"?t:`${t}px`}function Ak(t){return t!=null&&`${t}`!="false"}var sr=(function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t})(sr||{}),Pd=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=sr.HIDDEN;constructor(r,e,n,i=!1){this._renderer=r,this.element=e,this.config=n,this._animationForciblyDisabledThroughCss=i}fadeOut(){this._renderer.fadeOutRipple(this)}},dg=eo({passive:!0,capture:!0}),Nd=class{_events=new Map;addHandler(r,e,n,i){let o=this._events.get(e);if(o){let s=o.get(n);s?s.add(i):o.set(n,new Set([i]))}else this._events.set(e,new Map([[n,new Set([i])]])),r.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,dg)})}removeHandler(r,e,n){let i=this._events.get(r);if(!i)return;let o=i.get(e);o&&(o.delete(n),o.size===0&&i.delete(e),i.size===0&&(this._events.delete(r),document.removeEventListener(r,this._delegateEventHandler,dg)))}_delegateEventHandler=r=>{let e=De(r);e&&this._events.get(r.type)?.forEach((n,i)=>{(i===e||i.contains(e))&&n.forEach(o=>o.handleEvent(r))})}},_a={enterDuration:225,exitDuration:150},$x=800,fg=eo({passive:!0,capture:!0}),hg=["mousedown","touchstart"],pg=["mouseup","mouseleave","touchend","touchcancel"],jx=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=re({type:t,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(n,i){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return t})(),wa=class t{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new Nd;constructor(r,e,n,i,o){this._target=r,this._ngZone=e,this._platform=i,i.isBrowser&&(this._containerElement=$r(n)),o&&o.get(Cr).load(jx)}fadeInRipple(r,e,n={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=$($({},_a),n.animation);n.centered&&(r=i.left+i.width/2,e=i.top+i.height/2);let s=n.radius||Ux(r,e,i),l=r-i.left,d=e-i.top,p=o.enterDuration,m=document.createElement("div");m.classList.add("mat-ripple-element"),m.style.left=`${l-s}px`,m.style.top=`${d-s}px`,m.style.height=`${s*2}px`,m.style.width=`${s*2}px`,n.color!=null&&(m.style.backgroundColor=n.color),m.style.transitionDuration=`${p}ms`,this._containerElement.appendChild(m);let y=window.getComputedStyle(m),S=y.transitionProperty,A=y.transitionDuration,N=S==="none"||A==="0s"||A==="0s, 0s"||i.width===0&&i.height===0,j=new Pd(this,m,n,N);m.style.transform="scale3d(1, 1, 1)",j.state=sr.FADING_IN,n.persistent||(this._mostRecentTransientRipple=j);let G=null;return!N&&(p||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let tt=()=>{G&&(G.fallbackTimer=null),clearTimeout(et),this._finishRippleTransition(j)},rt=()=>this._destroyRipple(j),et=setTimeout(rt,p+100);m.addEventListener("transitionend",tt),m.addEventListener("transitioncancel",rt),G={onTransitionEnd:tt,onTransitionCancel:rt,fallbackTimer:et}}),this._activeRipples.set(j,G),(N||!p)&&this._finishRippleTransition(j),j}fadeOutRipple(r){if(r.state===sr.FADING_OUT||r.state===sr.HIDDEN)return;let e=r.element,n=$($({},_a),r.config.animation);e.style.transitionDuration=`${n.exitDuration}ms`,e.style.opacity="0",r.state=sr.FADING_OUT,(r._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(r)}fadeOutAll(){this._getActiveRipples().forEach(r=>r.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(r=>{r.config.persistent||r.fadeOut()})}setupTriggerEvents(r){let e=$r(r);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,hg.forEach(n=>{t._eventManager.addHandler(this._ngZone,n,e,this)}))}handleEvent(r){r.type==="mousedown"?this._onMousedown(r):r.type==="touchstart"?this._onTouchStart(r):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{pg.forEach(e=>{this._triggerElement.addEventListener(e,this,fg)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(r){r.state===sr.FADING_IN?this._startFadeOutTransition(r):r.state===sr.FADING_OUT&&this._destroyRipple(r)}_startFadeOutTransition(r){let e=r===this._mostRecentTransientRipple,{persistent:n}=r.config;r.state=sr.VISIBLE,!n&&(!e||!this._isPointerDown)&&r.fadeOut()}_destroyRipple(r){let e=this._activeRipples.get(r)??null;this._activeRipples.delete(r),this._activeRipples.size||(this._containerRect=null),r===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),r.state=sr.HIDDEN,e!==null&&(r.element.removeEventListener("transitionend",e.onTransitionEnd),r.element.removeEventListener("transitioncancel",e.onTransitionCancel),e.fallbackTimer!==null&&clearTimeout(e.fallbackTimer)),r.element.remove()}_onMousedown(r){let e=fa(r),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+$x;!this._target.rippleDisabled&&!e&&!n&&(this._isPointerDown=!0,this.fadeInRipple(r.clientX,r.clientY,this._target.rippleConfig))}_onTouchStart(r){if(!this._target.rippleDisabled&&!ha(r)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=r.changedTouches;if(e)for(let n=0;n<e.length;n++)this.fadeInRipple(e[n].clientX,e[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(r=>{let e=r.state===sr.VISIBLE||r.config.terminateOnPointerUp&&r.state===sr.FADING_IN;!r.config.persistent&&e&&r.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let r=this._triggerElement;r&&(hg.forEach(e=>t._eventManager.removeHandler(e,r,this)),this._pointerUpEventsRegistered&&(pg.forEach(e=>r.removeEventListener(e,this,fg)),this._pointerUpEventsRegistered=!1))}};function Ux(t,r,e){let n=Math.max(Math.abs(t-e.left),Math.abs(t-e.right)),i=Math.max(Math.abs(r-e.top),Math.abs(r-e.bottom));return Math.sqrt(n*n+i*i)}var Ld=new ot("mat-ripple-global-options"),Vk=(()=>{class t{_elementRef=w(Bt);_animationsDisabled=ar();color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){let e=w(Ct),n=w($t),i=w(Ld,{optional:!0}),o=w(wt);this._globalOptions=i||{},this._rippleRenderer=new wa(this,e,this._elementRef,n,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:$($($({},this._globalOptions.animation),this._animationsDisabled?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,n=0,i){return typeof e=="number"?this._rippleRenderer.fadeInRipple(e,n,$($({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,$($({},this.rippleConfig),e))}static \u0275fac=function(n){return new(n||t)};static \u0275dir=kt({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(n,i){n&2&&ir("mat-ripple-unbounded",i.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return t})();var zx={capture:!0},Vx=["focus","mousedown","mouseenter","touchstart"],Fd="mat-ripple-loader-uninitialized",Bd="mat-ripple-loader-class-name",mg="mat-ripple-loader-centered",hc="mat-ripple-loader-disabled",gg=(()=>{class t{_document=w(Lt);_animationsDisabled=ar();_globalRippleOptions=w(Ld,{optional:!0});_platform=w($t);_ngZone=w(Ct);_injector=w(wt);_eventCleanups;_hosts=new Map;constructor(){let e=w(wr).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>Vx.map(n=>e.listen(this._document,n,this._onInteraction,zx)))}ngOnDestroy(){let e=this._hosts.keys();for(let n of e)this.destroyRipple(n);this._eventCleanups.forEach(n=>n())}configureRipple(e,n){e.setAttribute(Fd,this._globalRippleOptions?.namespace??""),(n.className||!e.hasAttribute(Bd))&&e.setAttribute(Bd,n.className||""),n.centered&&e.setAttribute(mg,""),n.disabled&&e.setAttribute(hc,"")}setDisabled(e,n){let i=this._hosts.get(e);i?(i.target.rippleDisabled=n,!n&&!i.hasSetUpEvents&&(i.hasSetUpEvents=!0,i.renderer.setupTriggerEvents(e))):n?e.setAttribute(hc,""):e.removeAttribute(hc)}_onInteraction=e=>{let n=De(e);if(n instanceof HTMLElement){let i=n.closest(`[${Fd}="${this._globalRippleOptions?.namespace??""}"]`);i&&this._createRipple(i)}};_createRipple(e){if(!this._document||this._hosts.has(e))return;e.querySelector(".mat-ripple")?.remove();let n=this._document.createElement("span");n.classList.add("mat-ripple",e.getAttribute(Bd)),e.append(n);let i=this._globalRippleOptions,o=this._animationsDisabled?0:i?.animation?.enterDuration??_a.enterDuration,s=this._animationsDisabled?0:i?.animation?.exitDuration??_a.exitDuration,l={rippleDisabled:this._animationsDisabled||i?.disabled||e.hasAttribute(hc),rippleConfig:{centered:e.hasAttribute(mg),terminateOnPointerUp:i?.terminateOnPointerUp,animation:{enterDuration:o,exitDuration:s}}},d=new wa(l,this._ngZone,n,this._platform,this._injector),p=!l.rippleDisabled;p&&d.setupTriggerEvents(e),this._hosts.set(e,{target:l,renderer:d,hasSetUpEvents:p}),e.removeAttribute(Fd)}destroyRipple(e){let n=this._hosts.get(e);n&&(n.renderer._removeTriggerEvents(),this._hosts.delete(e))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var vg=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=re({type:t,selectors:[["structural-styles"]],decls:0,vars:0,template:function(n,i){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return t})();var qx=["mat-icon-button",""],Wx=["*"],Hx=new ot("MAT_BUTTON_CONFIG");function yg(t){return t==null?void 0:Am(t)}var $d=(()=>{class t{_elementRef=w(Bt);_ngZone=w(Ct);_animationsDisabled=ar();_config=w(Hx,{optional:!0});_focusMonitor=w(ya);_cleanupClick;_renderer=w(Nr);_rippleLoader=w(gg);_isAnchor;_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=e,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;tabIndex;set _tabindex(e){this.tabIndex=e}constructor(){w(Cr).load(vg);let e=this._elementRef.nativeElement;this._isAnchor=e.tagName==="A",this.disabledInteractive=this._config?.disabledInteractive??!1,this.color=this._config?.color??null,this._rippleLoader?.configureRipple(e,{className:"mat-mdc-button-ripple"})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0),this._isAnchor&&this._setupAsAnchor()}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",n){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,n):this._elementRef.nativeElement.focus(n)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this._isAnchor?this.disabled||null:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}_getTabIndex(){return this._isAnchor?this.disabled&&!this.disabledInteractive?-1:this.tabIndex:this.tabIndex}_setupAsAnchor(){this._cleanupClick=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"click",e=>{this.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}))}static \u0275fac=function(n){return new(n||t)};static \u0275dir=kt({type:t,hostAttrs:[1,"mat-mdc-button-base"],hostVars:13,hostBindings:function(n,i){n&2&&(xr("disabled",i._getDisabledAttribute())("aria-disabled",i._getAriaDisabled())("tabindex",i._getTabIndex()),Em(i.color?"mat-"+i.color:""),ir("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("mat-unthemed",!i.color)("_mat-animation-noopable",i._animationsDisabled))},inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",oe],disabled:[2,"disabled","disabled",oe],ariaDisabled:[2,"aria-disabled","ariaDisabled",oe],disabledInteractive:[2,"disabledInteractive","disabledInteractive",oe],tabIndex:[2,"tabIndex","tabIndex",yg],_tabindex:[2,"tabindex","_tabindex",yg]}})}return t})(),Kx=(()=>{class t extends $d{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=re({type:t,selectors:[["button","mat-icon-button",""],["a","mat-icon-button",""],["button","matIconButton",""],["a","matIconButton",""]],hostAttrs:[1,"mdc-icon-button","mat-mdc-icon-button"],exportAs:["matButton","matAnchor"],features:[Re],attrs:qx,ngContentSelectors:Wx,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,i){n&1&&(la(),pi(0,"span",0),gi(1),pi(2,"span",1)(3,"span",2))},styles:[`.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%));flex-shrink:0;text-align:center;width:var(--mat-icon-button-state-layer-size, 40px);height:var(--mat-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mat-icon-button-state-layer-size, 40px) - var(--mat-icon-button-icon-size, 24px)) / 2);font-size:var(--mat-icon-button-icon-size, 24px);color:var(--mat-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-icon-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-icon-button-touch-target-size, 48px);display:var(--mat-icon-button-touch-target-display, block);left:50%;width:var(--mat-icon-button-touch-target-size, 48px);transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mat-icon-button-icon-size, 24px);height:var(--mat-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%))}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return t})();var bg=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Ht({type:t});static \u0275inj=Wt({imports:[He]})}return t})();var Gx=["matButton",""],Qx=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Yx=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var _g=new Map([["text",["mat-mdc-button"]],["filled",["mdc-button--unelevated","mat-mdc-unelevated-button"]],["elevated",["mdc-button--raised","mat-mdc-raised-button"]],["outlined",["mdc-button--outlined","mat-mdc-outlined-button"]],["tonal",["mat-tonal-button"]]]),wg=(()=>{class t extends $d{get appearance(){return this._appearance}set appearance(e){this.setAppearance(e||this._config?.defaultAppearance||"text")}_appearance=null;constructor(){super();let e=Xx(this._elementRef.nativeElement);e&&this.setAppearance(e)}setAppearance(e){if(e===this._appearance)return;let n=this._elementRef.nativeElement.classList,i=this._appearance?_g.get(this._appearance):null,o=_g.get(e);i&&n.remove(...i),n.add(...o),this._appearance=e}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=re({type:t,selectors:[["button","matButton",""],["a","matButton",""],["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""],["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostAttrs:[1,"mdc-button"],inputs:{appearance:[0,"matButton","appearance"]},exportAs:["matButton","matAnchor"],features:[Re],attrs:Gx,ngContentSelectors:Yx,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,i){n&1&&(la(Qx),pi(0,"span",0),gi(1),dd(2,"span",1),gi(3,1),fd(),gi(4,2),pi(5,"span",2)(6,"span",3)),n&2&&ir("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab)},styles:[`.mat-mdc-button-base{text-decoration:none}.mat-mdc-button-base .mat-icon{min-height:fit-content;flex-shrink:0}@media(hover: none){.mat-mdc-button-base:hover>span.mat-mdc-button-persistent-ripple::before{opacity:0}}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-button-text-horizontal-padding, 12px);height:var(--mat-button-text-container-height, 40px);font-family:var(--mat-button-text-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-text-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-text-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-text-label-text-transform);font-weight:var(--mat-button-text-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mat-button-text-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mat-button-text-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-text-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-button-text-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-button-text-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-text-touch-target-size, 48px);display:var(--mat-button-text-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-filled-container-height, 40px);font-family:var(--mat-button-filled-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-filled-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-filled-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-filled-label-text-transform);font-weight:var(--mat-button-filled-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-filled-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-button-filled-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-filled-touch-target-size, 48px);display:var(--mat-button-filled-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mat-button-filled-label-text-color, var(--mat-sys-on-primary));background-color:var(--mat-button-filled-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mat-button-filled-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mat-button-protected-container-elevation-shadow, var(--mat-sys-level1));height:var(--mat-button-protected-container-height, 40px);font-family:var(--mat-button-protected-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-protected-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-protected-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-protected-label-text-transform);font-weight:var(--mat-button-protected-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-protected-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-button-protected-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-protected-touch-target-size, 48px);display:var(--mat-button-protected-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-raised-button:not(:disabled){color:var(--mat-button-protected-label-text-color, var(--mat-sys-primary));background-color:var(--mat-button-protected-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mat-button-protected-container-shape, var(--mat-sys-corner-full))}@media(hover: hover){.mat-mdc-raised-button:hover{box-shadow:var(--mat-button-protected-hover-container-elevation-shadow, var(--mat-sys-level2))}}.mat-mdc-raised-button:focus{box-shadow:var(--mat-button-protected-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mat-button-protected-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-protected-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-protected-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mat-button-protected-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-outlined-container-height, 40px);font-family:var(--mat-button-outlined-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-outlined-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-outlined-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-outlined-label-text-transform);font-weight:var(--mat-button-outlined-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mat-button-outlined-container-shape, var(--mat-sys-corner-full));border-width:var(--mat-button-outlined-outline-width, 1px);padding:0 var(--mat-button-outlined-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-button-outlined-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-outlined-touch-target-size, 48px);display:var(--mat-button-outlined-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-outlined-button:not(:disabled){color:var(--mat-button-outlined-label-text-color, var(--mat-sys-primary));border-color:var(--mat-button-outlined-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mat-button-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-tonal-container-height, 40px);font-family:var(--mat-button-tonal-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-tonal-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-tonal-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-tonal-label-text-transform);font-weight:var(--mat-button-tonal-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-tonal-horizontal-padding, 24px)}.mat-tonal-button:not(:disabled){color:var(--mat-button-tonal-label-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-button-tonal-container-color, var(--mat-sys-secondary-container))}.mat-tonal-button,.mat-tonal-button .mdc-button__ripple{border-radius:var(--mat-button-tonal-container-shape, var(--mat-sys-corner-full))}.mat-tonal-button[disabled],.mat-tonal-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-tonal-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-tonal-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-tonal-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}[dir=rtl] .mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}.mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}[dir=rtl] .mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}.mat-tonal-button .mat-ripple-element{background-color:var(--mat-button-tonal-ripple-color, color-mix(in srgb, var(--mat-sys-on-secondary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-tonal-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-tonal-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-tonal-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-tonal-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-tonal-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-tonal-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-tonal-touch-target-size, 48px);display:var(--mat-button-tonal-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button,.mat-tonal-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon,.mat-tonal-button .mdc-button__label,.mat-tonal-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator,.mat-tonal-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-button:focus>.mat-focus-indicator::before,.mat-mdc-unelevated-button:focus>.mat-focus-indicator::before,.mat-mdc-raised-button:focus>.mat-focus-indicator::before,.mat-mdc-outlined-button:focus>.mat-focus-indicator::before,.mat-tonal-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable,.mat-tonal-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon,.mat-tonal-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-tonal-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return t})();function Xx(t){return t.hasAttribute("mat-raised-button")?"elevated":t.hasAttribute("mat-stroked-button")?"outlined":t.hasAttribute("mat-flat-button")?"filled":t.hasAttribute("mat-button")?"text":null}var xg=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Ht({type:t});static \u0275inj=Wt({imports:[bg,He]})}return t})();var ut="primary",Ta=Symbol("RouteTitle"),qd=class{params;constructor(r){this.params=r||{}}has(r){return Object.prototype.hasOwnProperty.call(this.params,r)}get(r){if(this.has(r)){let e=this.params[r];return Array.isArray(e)?e[0]:e}return null}getAll(r){if(this.has(r)){let e=this.params[r];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Si(t){return new qd(t)}function Ig(t,r,e){let n=e.path.split("/");if(n.length>t.length||e.pathMatch==="full"&&(r.hasChildren()||n.length<t.length))return null;let i={};for(let o=0;o<n.length;o++){let s=n[o],l=t[o];if(s[0]===":")i[s.substring(1)]=l;else if(s!==l.path)return null}return{consumed:t.slice(0,n.length),posParams:i}}function bc(t){return new Promise((r,e)=>{t.pipe(An()).subscribe({next:n=>r(n),error:n=>e(n)})})}function Zx(t,r){if(t.length!==r.length)return!1;for(let e=0;e<t.length;++e)if(!jr(t[e],r[e]))return!1;return!0}function jr(t,r){let e=t?Wd(t):void 0,n=r?Wd(r):void 0;if(!e||!n||e.length!=n.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!Tg(t[i],r[i]))return!1;return!0}function Wd(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Tg(t,r){if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return!1;let e=[...t].sort(),n=[...r].sort();return e.every((i,o)=>n[o]===i)}else return t===r}function Mg(t){return t.length>0?t[t.length-1]:null}function Ei(t){return Yi(t)?t:_m(t)?Ce(Promise.resolve(t)):lt(t)}function Pg(t){return Yi(t)?bc(t):Promise.resolve(t)}var Jx={exact:Lg,subset:Fg},Ng={exact:t0,subset:e0,ignored:()=>!0};function Cg(t,r,e){return Jx[e.paths](t.root,r.root,e.matrixParams)&&Ng[e.queryParams](t.queryParams,r.queryParams)&&!(e.fragment==="exact"&&t.fragment!==r.fragment)}function t0(t,r){return jr(t,r)}function Lg(t,r,e){if(!xi(t.segments,r.segments)||!gc(t.segments,r.segments,e)||t.numberOfChildren!==r.numberOfChildren)return!1;for(let n in r.children)if(!t.children[n]||!Lg(t.children[n],r.children[n],e))return!1;return!0}function e0(t,r){return Object.keys(r).length<=Object.keys(t).length&&Object.keys(r).every(e=>Tg(t[e],r[e]))}function Fg(t,r,e){return Bg(t,r,r.segments,e)}function Bg(t,r,e,n){if(t.segments.length>e.length){let i=t.segments.slice(0,e.length);return!(!xi(i,e)||r.hasChildren()||!gc(i,e,n))}else if(t.segments.length===e.length){if(!xi(t.segments,e)||!gc(t.segments,e,n))return!1;for(let i in r.children)if(!t.children[i]||!Fg(t.children[i],r.children[i],n))return!1;return!0}else{let i=e.slice(0,t.segments.length),o=e.slice(t.segments.length);return!xi(t.segments,i)||!gc(t.segments,i,n)||!t.children[ut]?!1:Bg(t.children[ut],r,o,n)}}function gc(t,r,e){return r.every((n,i)=>Ng[e](t[i].parameters,n.parameters))}var Rr=class{root;queryParams;fragment;_queryParamMap;constructor(r=new Rt([],{}),e={},n=null){this.root=r,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap??=Si(this.queryParams),this._queryParamMap}toString(){return i0.serialize(this)}},Rt=class{segments;children;parent=null;constructor(r,e){this.segments=r,this.children=e,Object.values(e).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vc(this)}},Ln=class{path;parameters;_parameterMap;constructor(r,e){this.path=r,this.parameters=e}get parameterMap(){return this._parameterMap??=Si(this.parameters),this._parameterMap}toString(){return jg(this)}};function r0(t,r){return xi(t,r)&&t.every((e,n)=>jr(e.parameters,r[n].parameters))}function xi(t,r){return t.length!==r.length?!1:t.every((e,n)=>e.path===r[n].path)}function n0(t,r){let e=[];return Object.entries(t.children).forEach(([n,i])=>{n===ut&&(e=e.concat(r(i,n)))}),Object.entries(t.children).forEach(([n,i])=>{n!==ut&&(e=e.concat(r(i,n)))}),e}var Ri=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:()=>new cn,providedIn:"root"})}return t})(),cn=class{parse(r){let e=new Kd(r);return new Rr(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(r){let e=`/${xa(r.root,!0)}`,n=s0(r.queryParams),i=typeof r.fragment=="string"?`#${o0(r.fragment)}`:"";return`${e}${n}${i}`}},i0=new cn;function vc(t){return t.segments.map(r=>jg(r)).join("/")}function xa(t,r){if(!t.hasChildren())return vc(t);if(r){let e=t.children[ut]?xa(t.children[ut],!1):"",n=[];return Object.entries(t.children).forEach(([i,o])=>{i!==ut&&n.push(`${i}:${xa(o,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}else{let e=n0(t,(n,i)=>i===ut?[xa(t.children[ut],!1)]:[`${i}:${xa(n,!1)}`]);return Object.keys(t.children).length===1&&t.children[ut]!=null?`${vc(t)}/${e[0]}`:`${vc(t)}/(${e.join("//")})`}}function $g(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pc(t){return $g(t).replace(/%3B/gi,";")}function o0(t){return encodeURI(t)}function Hd(t){return $g(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function yc(t){return decodeURIComponent(t)}function Sg(t){return yc(t.replace(/\+/g,"%20"))}function jg(t){return`${Hd(t.path)}${a0(t.parameters)}`}function a0(t){return Object.entries(t).map(([r,e])=>`;${Hd(r)}=${Hd(e)}`).join("")}function s0(t){let r=Object.entries(t).map(([e,n])=>Array.isArray(n)?n.map(i=>`${pc(e)}=${pc(i)}`).join("&"):`${pc(e)}=${pc(n)}`).filter(e=>e);return r.length?`?${r.join("&")}`:""}var c0=/^[^\/()?;#]+/;function jd(t){let r=t.match(c0);return r?r[0]:""}var l0=/^[^\/()?;=#]+/;function u0(t){let r=t.match(l0);return r?r[0]:""}var d0=/^[^=?&#]+/;function f0(t){let r=t.match(d0);return r?r[0]:""}var h0=/^[^&#]+/;function p0(t){let r=t.match(h0);return r?r[0]:""}var Kd=class{url;remaining;constructor(r){this.url=r,this.remaining=r}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Rt([],{}):new Rt([],this.parseChildren())}parseQueryParams(){let r={};if(this.consumeOptional("?"))do this.parseQueryParam(r);while(this.consumeOptional("&"));return r}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let r=[];for(this.peekStartsWith("(")||r.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),r.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(r.length>0||Object.keys(e).length>0)&&(n[ut]=new Rt(r,e)),n}parseSegment(){let r=jd(this.remaining);if(r===""&&this.peekStartsWith(";"))throw new Ee(4009,!1);return this.capture(r),new Ln(yc(r),this.parseMatrixParams())}parseMatrixParams(){let r={};for(;this.consumeOptional(";");)this.parseParam(r);return r}parseParam(r){let e=u0(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let i=jd(this.remaining);i&&(n=i,this.capture(n))}r[yc(e)]=yc(n)}parseQueryParam(r){let e=f0(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let s=p0(this.remaining);s&&(n=s,this.capture(n))}let i=Sg(e),o=Sg(n);if(r.hasOwnProperty(i)){let s=r[i];Array.isArray(s)||(s=[s],r[i]=s),s.push(o)}else r[i]=o}parseParens(r){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=jd(this.remaining),i=this.remaining[n.length];if(i!=="/"&&i!==")"&&i!==";")throw new Ee(4010,!1);let o;n.indexOf(":")>-1?(o=n.slice(0,n.indexOf(":")),this.capture(o),this.capture(":")):r&&(o=ut);let s=this.parseChildren();e[o??ut]=Object.keys(s).length===1&&s[ut]?s[ut]:new Rt([],s),this.consumeOptional("//")}return e}peekStartsWith(r){return this.remaining.startsWith(r)}consumeOptional(r){return this.peekStartsWith(r)?(this.remaining=this.remaining.substring(r.length),!0):!1}capture(r){if(!this.consumeOptional(r))throw new Ee(4011,!1)}};function Ug(t){return t.segments.length>0?new Rt([],{[ut]:t}):t}function zg(t){let r={};for(let[n,i]of Object.entries(t.children)){let o=zg(i);if(n===ut&&o.segments.length===0&&o.hasChildren())for(let[s,l]of Object.entries(o.children))r[s]=l;else(o.segments.length>0||o.hasChildren())&&(r[n]=o)}let e=new Rt(t.segments,r);return m0(e)}function m0(t){if(t.numberOfChildren===1&&t.children[ut]){let r=t.children[ut];return new Rt(t.segments.concat(r.segments),r.children)}return t}function Fn(t){return t instanceof Rr}function Vg(t,r,e=null,n=null,i=new cn){let o=qg(t);return Wg(o,r,e,n,i)}function qg(t){let r;function e(o){let s={};for(let d of o.children){let p=e(d);s[d.outlet]=p}let l=new Rt(o.url,s);return o===t&&(r=l),l}let n=e(t.root),i=Ug(n);return r??i}function Wg(t,r,e,n,i){let o=t;for(;o.parent;)o=o.parent;if(r.length===0)return Ud(o,o,o,e,n,i);let s=g0(r);if(s.toRoot())return Ud(o,o,new Rt([],{}),e,n,i);let l=v0(s,o,t),d=l.processChildren?Sa(l.segmentGroup,l.index,s.commands):Kg(l.segmentGroup,l.index,s.commands);return Ud(o,l.segmentGroup,d,e,n,i)}function _c(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ra(t){return typeof t=="object"&&t!=null&&t.outlets}function Eg(t,r,e){t||="\u0275";let n=new Rr;return n.queryParams={[t]:r},e.parse(e.serialize(n)).queryParams[t]}function Ud(t,r,e,n,i,o){let s={};for(let[p,m]of Object.entries(n??{}))s[p]=Array.isArray(m)?m.map(y=>Eg(p,y,o)):Eg(p,m,o);let l;t===r?l=e:l=Hg(t,r,e);let d=Ug(zg(l));return new Rr(d,s,i)}function Hg(t,r,e){let n={};return Object.entries(t.children).forEach(([i,o])=>{o===r?n[i]=e:n[i]=Hg(o,r,e)}),new Rt(t.segments,n)}var wc=class{isAbsolute;numberOfDoubleDots;commands;constructor(r,e,n){if(this.isAbsolute=r,this.numberOfDoubleDots=e,this.commands=n,r&&n.length>0&&_c(n[0]))throw new Ee(4003,!1);let i=n.find(Ra);if(i&&i!==Mg(n))throw new Ee(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function g0(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new wc(!0,0,t);let r=0,e=!1,n=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let l={};return Object.entries(o.outlets).forEach(([d,p])=>{l[d]=typeof p=="string"?p.split("/"):p}),[...i,{outlets:l}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((l,d)=>{d==0&&l==="."||(d==0&&l===""?e=!0:l===".."?r++:l!=""&&i.push(l))}),i):[...i,o]},[]);return new wc(e,r,n)}var so=class{segmentGroup;processChildren;index;constructor(r,e,n){this.segmentGroup=r,this.processChildren=e,this.index=n}};function v0(t,r,e){if(t.isAbsolute)return new so(r,!0,0);if(!e)return new so(r,!1,NaN);if(e.parent===null)return new so(e,!0,0);let n=_c(t.commands[0])?0:1,i=e.segments.length-1+n;return y0(e,i,t.numberOfDoubleDots)}function y0(t,r,e){let n=t,i=r,o=e;for(;o>i;){if(o-=i,n=n.parent,!n)throw new Ee(4005,!1);i=n.segments.length}return new so(n,!1,i-o)}function b0(t){return Ra(t[0])?t[0].outlets:{[ut]:t}}function Kg(t,r,e){if(t??=new Rt([],{}),t.segments.length===0&&t.hasChildren())return Sa(t,r,e);let n=_0(t,r,e),i=e.slice(n.commandIndex);if(n.match&&n.pathIndex<t.segments.length){let o=new Rt(t.segments.slice(0,n.pathIndex),{});return o.children[ut]=new Rt(t.segments.slice(n.pathIndex),t.children),Sa(o,0,i)}else return n.match&&i.length===0?new Rt(t.segments,{}):n.match&&!t.hasChildren()?Gd(t,r,e):n.match?Sa(t,0,i):Gd(t,r,e)}function Sa(t,r,e){if(e.length===0)return new Rt(t.segments,{});{let n=b0(e),i={};if(Object.keys(n).some(o=>o!==ut)&&t.children[ut]&&t.numberOfChildren===1&&t.children[ut].segments.length===0){let o=Sa(t.children[ut],r,e);return new Rt(t.segments,o.children)}return Object.entries(n).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Kg(t.children[o],r,s))}),Object.entries(t.children).forEach(([o,s])=>{n[o]===void 0&&(i[o]=s)}),new Rt(t.segments,i)}}function _0(t,r,e){let n=0,i=r,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(n>=e.length)return o;let s=t.segments[i],l=e[n];if(Ra(l))break;let d=`${l}`,p=n<e.length-1?e[n+1]:null;if(i>0&&d===void 0)break;if(d&&p&&typeof p=="object"&&p.outlets===void 0){if(!Og(d,p,s))return o;n+=2}else{if(!Og(d,{},s))return o;n++}i++}return{match:!0,pathIndex:i,commandIndex:n}}function Gd(t,r,e){let n=t.segments.slice(0,r),i=0;for(;i<e.length;){let o=e[i];if(Ra(o)){let d=w0(o.outlets);return new Rt(n,d)}if(i===0&&_c(e[0])){let d=t.segments[r];n.push(new Ln(d.path,Rg(e[0]))),i++;continue}let s=Ra(o)?o.outlets[ut]:`${o}`,l=i<e.length-1?e[i+1]:null;s&&l&&_c(l)?(n.push(new Ln(s,Rg(l))),i+=2):(n.push(new Ln(s,{})),i++)}return new Rt(n,{})}function w0(t){let r={};return Object.entries(t).forEach(([e,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(r[e]=Gd(new Rt([],{}),0,n))}),r}function Rg(t){let r={};return Object.entries(t).forEach(([e,n])=>r[e]=`${n}`),r}function Og(t,r,e){return t==e.path&&jr(r,e.parameters)}var co="imperative",ae=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(ae||{}),Ge=class{id;url;constructor(r,e){this.id=r,this.url=e}},Ur=class extends Ge{type=ae.NavigationStart;navigationTrigger;restoredState;constructor(r,e,n="imperative",i=null){super(r,e),this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},lr=class extends Ge{urlAfterRedirects;type=ae.NavigationEnd;constructor(r,e,n){super(r,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ae=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(Ae||{}),uo=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(uo||{}),cr=class extends Ge{reason;code;type=ae.NavigationCancel;constructor(r,e,n,i){super(r,e),this.reason=n,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},zr=class extends Ge{reason;code;type=ae.NavigationSkipped;constructor(r,e,n,i){super(r,e),this.reason=n,this.code=i}},fo=class extends Ge{error;target;type=ae.NavigationError;constructor(r,e,n,i){super(r,e),this.error=n,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Oa=class extends Ge{urlAfterRedirects;state;type=ae.RoutesRecognized;constructor(r,e,n,i){super(r,e),this.urlAfterRedirects=n,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xc=class extends Ge{urlAfterRedirects;state;type=ae.GuardsCheckStart;constructor(r,e,n,i){super(r,e),this.urlAfterRedirects=n,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cc=class extends Ge{urlAfterRedirects;state;shouldActivate;type=ae.GuardsCheckEnd;constructor(r,e,n,i,o){super(r,e),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Sc=class extends Ge{urlAfterRedirects;state;type=ae.ResolveStart;constructor(r,e,n,i){super(r,e),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ec=class extends Ge{urlAfterRedirects;state;type=ae.ResolveEnd;constructor(r,e,n,i){super(r,e),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rc=class{route;type=ae.RouteConfigLoadStart;constructor(r){this.route=r}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Oc=class{route;type=ae.RouteConfigLoadEnd;constructor(r){this.route=r}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Dc=class{snapshot;type=ae.ChildActivationStart;constructor(r){this.snapshot=r}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ac=class{snapshot;type=ae.ChildActivationEnd;constructor(r){this.snapshot=r}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kc=class{snapshot;type=ae.ActivationStart;constructor(r){this.snapshot=r}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ic=class{snapshot;type=ae.ActivationEnd;constructor(r){this.snapshot=r}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ho=class{routerEvent;position;anchor;type=ae.Scroll;constructor(r,e,n){this.routerEvent=r,this.position=e,this.anchor=n}toString(){let r=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${r}')`}},Da=class{},po=class{url;navigationBehaviorOptions;constructor(r,e){this.url=r,this.navigationBehaviorOptions=e}};function x0(t){return!(t instanceof Da)&&!(t instanceof po)}function C0(t,r){return t.providers&&!t._injector&&(t._injector=tc(t.providers,r,`Route: ${t.path}`)),t._injector??r}function Er(t){return t.outlet||ut}function S0(t,r){let e=t.filter(n=>Er(n)===r);return e.push(...t.filter(n=>Er(n)!==r)),e}function vo(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let r=t.parent;r;r=r.parent){let e=r.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Tc=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return vo(this.route?.snapshot)??this.rootInjector}constructor(r){this.rootInjector=r,this.children=new Oi(this.rootInjector)}},Oi=(()=>{class t{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,n){let i=this.getOrCreateContext(e);i.outlet=n,this.contexts.set(e,i)}onChildOutletDestroyed(e){let n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new Tc(this.rootInjector),this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(n){return new(n||t)(Gt(br))};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Mc=class{_root;constructor(r){this._root=r}get root(){return this._root.value}parent(r){let e=this.pathFromRoot(r);return e.length>1?e[e.length-2]:null}children(r){let e=Qd(r,this._root);return e?e.children.map(n=>n.value):[]}firstChild(r){let e=Qd(r,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(r){let e=Yd(r,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==r)}pathFromRoot(r){return Yd(r,this._root).map(e=>e.value)}};function Qd(t,r){if(t===r.value)return r;for(let e of r.children){let n=Qd(t,e);if(n)return n}return null}function Yd(t,r){if(t===r.value)return[r];for(let e of r.children){let n=Yd(t,e);if(n.length)return n.unshift(r),n}return[]}var Ke=class{value;children;constructor(r,e){this.value=r,this.children=e}toString(){return`TreeNode(${this.value})`}};function ao(t){let r={};return t&&t.children.forEach(e=>r[e.value.outlet]=e),r}var Aa=class extends Mc{snapshot;constructor(r,e){super(r),this.snapshot=e,rf(this,r)}toString(){return this.snapshot.toString()}};function Gg(t){let r=E0(t),e=new fe([new Ln("",{})]),n=new fe({}),i=new fe({}),o=new fe({}),s=new fe(""),l=new ur(e,n,o,s,i,ut,t,r.root);return l.snapshot=r.root,new Aa(new Ke(l,[]),r)}function E0(t){let r={},e={},n={},o=new Ci([],r,n,"",e,ut,t,null,{});return new ka("",new Ke(o,[]))}var ur=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(r,e,n,i,o,s,l,d){this.urlSubject=r,this.paramsSubject=e,this.queryParamsSubject=n,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=l,this._futureSnapshot=d,this.title=this.dataSubject?.pipe(mt(p=>p[Ta]))??lt(void 0),this.url=r,this.params=e,this.queryParams=n,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(mt(r=>Si(r))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(mt(r=>Si(r))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Pc(t,r,e="emptyOnly"){let n,{routeConfig:i}=t;return r!==null&&(e==="always"||i?.path===""||!r.component&&!r.routeConfig?.loadComponent)?n={params:$($({},r.params),t.params),data:$($({},r.data),t.data),resolve:$($($($({},t.data),r.data),i?.data),t._resolvedData)}:n={params:$({},t.params),data:$({},t.data),resolve:$($({},t.data),t._resolvedData??{})},i&&Yg(i)&&(n.resolve[Ta]=i.title),n}var Ci=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ta]}constructor(r,e,n,i,o,s,l,d,p){this.url=r,this.params=e,this.queryParams=n,this.fragment=i,this.data=o,this.outlet=s,this.component=l,this.routeConfig=d,this._resolve=p}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Si(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Si(this.queryParams),this._queryParamMap}toString(){let r=this.url.map(n=>n.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${r}', path:'${e}')`}},ka=class extends Mc{url;constructor(r,e){super(e),this.url=r,rf(this,e)}toString(){return Qg(this._root)}};function rf(t,r){r.value._routerState=t,r.children.forEach(e=>rf(t,e))}function Qg(t){let r=t.children.length>0?` { ${t.children.map(Qg).join(", ")} } `:"";return`${t.value}${r}`}function zd(t){if(t.snapshot){let r=t.snapshot,e=t._futureSnapshot;t.snapshot=e,jr(r.queryParams,e.queryParams)||t.queryParamsSubject.next(e.queryParams),r.fragment!==e.fragment&&t.fragmentSubject.next(e.fragment),jr(r.params,e.params)||t.paramsSubject.next(e.params),Zx(r.url,e.url)||t.urlSubject.next(e.url),jr(r.data,e.data)||t.dataSubject.next(e.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Xd(t,r){let e=jr(t.params,r.params)&&r0(t.url,r.url),n=!t.parent!=!r.parent;return e&&!n&&(!t.parent||Xd(t.parent,r.parent))}function Yg(t){return typeof t.title=="string"||t.title===null}var Xg=new ot(""),nf=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ut;activateEvents=new ee;deactivateEvents=new ee;attachEvents=new ee;detachEvents=new ee;routerOutletData=Om();parentContexts=w(Oi);location=w(kn);changeDetector=w(Lr);inputBinder=w(Ma,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:n,previousValue:i}=e.name;if(n)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ee(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ee(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ee(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new Ee(4013,!1);this._activatedRoute=e;let i=this.location,s=e.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,d=new Zd(e,l,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:d,environmentInjector:n}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=kt({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Pr]})}return t})(),Zd=class{route;childContexts;parent;outletData;constructor(r,e,n,i){this.route=r,this.childContexts=e,this.parent=n,this.outletData=i}get(r,e){return r===ur?this.route:r===Oi?this.childContexts:r===Xg?this.outletData:this.parent.get(r,e)}},Ma=new ot(""),of=(()=>{class t{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:n}=e,i=oa([n.queryParams,n.params,n.data]).pipe(vr(([o,s,l],d)=>(l=$($($({},o),s),l),d===0?lt(l):Promise.resolve(l)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==n||n.component===null){this.unsubscribeFromRouteData(e);return}let s=Im(n.component);if(!s){this.unsubscribeFromRouteData(e);return}for(let{templateName:l}of s.inputs)e.activatedComponentRef.setInput(l,o[l])});this.outletDataSubscriptions.set(e,i)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac})}return t})(),Pa=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=re({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(n,i){n&1&&ec(0,"router-outlet")},dependencies:[nf],encapsulation:2})}return t})();function af(t){let r=t.children&&t.children.map(af),e=r?bt($({},t),{children:r}):$({},t);return!e.component&&!e.loadComponent&&(r||e.loadChildren)&&e.outlet&&e.outlet!==ut&&(e.component=Pa),e}function R0(t,r,e){let n=Ia(t,r._root,e?e._root:void 0);return new Aa(n,r)}function Ia(t,r,e){if(e&&t.shouldReuseRoute(r.value,e.value.snapshot)){let n=e.value;n._futureSnapshot=r.value;let i=O0(t,r,e);return new Ke(n,i)}else{if(t.shouldAttach(r.value)){let o=t.retrieve(r.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=r.value,s.children=r.children.map(l=>Ia(t,l)),s}}let n=D0(r.value),i=r.children.map(o=>Ia(t,o));return new Ke(n,i)}}function O0(t,r,e){return r.children.map(n=>{for(let i of e.children)if(t.shouldReuseRoute(n.value,i.value.snapshot))return Ia(t,n,i);return Ia(t,n)})}function D0(t){return new ur(new fe(t.url),new fe(t.params),new fe(t.queryParams),new fe(t.fragment),new fe(t.data),t.outlet,t.component,t)}var mo=class{redirectTo;navigationBehaviorOptions;constructor(r,e){this.redirectTo=r,this.navigationBehaviorOptions=e}},Zg="ngNavigationCancelingError";function Nc(t,r){let{redirectTo:e,navigationBehaviorOptions:n}=Fn(r)?{redirectTo:r,navigationBehaviorOptions:void 0}:r,i=Jg(!1,Ae.Redirect);return i.url=e,i.navigationBehaviorOptions=n,i}function Jg(t,r){let e=new Error(`NavigationCancelingError: ${t||""}`);return e[Zg]=!0,e.cancellationCode=r,e}function A0(t){return tv(t)&&Fn(t.url)}function tv(t){return!!t&&t[Zg]}var k0=(t,r,e,n)=>mt(i=>(new Jd(r,i.targetRouterState,i.currentRouterState,e,n).activate(t),i)),Jd=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(r,e,n,i,o){this.routeReuseStrategy=r,this.futureState=e,this.currState=n,this.forwardEvent=i,this.inputBindingEnabled=o}activate(r){let e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,r),zd(this.futureState.root),this.activateChildRoutes(e,n,r)}deactivateChildRoutes(r,e,n){let i=ao(e);r.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],n),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,n)})}deactivateRoutes(r,e,n){let i=r.value,o=e?e.value:null;if(i===o)if(i.component){let s=n.getContext(i.outlet);s&&this.deactivateChildRoutes(r,e,s.children)}else this.deactivateChildRoutes(r,e,n);else o&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(r,e){r.value.component&&this.routeReuseStrategy.shouldDetach(r.value.snapshot)?this.detachAndStoreRouteSubtree(r,e):this.deactivateRouteAndOutlet(r,e)}detachAndStoreRouteSubtree(r,e){let n=e.getContext(r.value.outlet),i=n&&r.value.component?n.children:e,o=ao(r);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(n&&n.outlet){let s=n.outlet.detach(),l=n.children.onOutletDeactivated();this.routeReuseStrategy.store(r.value.snapshot,{componentRef:s,route:r,contexts:l})}}deactivateRouteAndOutlet(r,e){let n=e.getContext(r.value.outlet),i=n&&r.value.component?n.children:e,o=ao(r);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(r,e,n){let i=ao(e);r.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],n),this.forwardEvent(new Ic(o.value.snapshot))}),r.children.length&&this.forwardEvent(new Ac(r.value.snapshot))}activateRoutes(r,e,n){let i=r.value,o=e?e.value:null;if(zd(i),i===o)if(i.component){let s=n.getOrCreateContext(i.outlet);this.activateChildRoutes(r,e,s.children)}else this.activateChildRoutes(r,e,n);else if(i.component){let s=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let l=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(l.contexts),s.attachRef=l.componentRef,s.route=l.route.value,s.outlet&&s.outlet.attach(l.componentRef,l.route.value),zd(l.route.value),this.activateChildRoutes(r,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(r,null,s.children)}else this.activateChildRoutes(r,null,n)}},Lc=class{path;route;constructor(r){this.path=r,this.route=this.path[this.path.length-1]}},lo=class{component;route;constructor(r,e){this.component=r,this.route=e}};function I0(t,r,e){let n=t._root,i=r?r._root:null;return Ca(n,i,e,[n.value])}function T0(t){let r=t.routeConfig?t.routeConfig.canActivateChild:null;return!r||r.length===0?null:{node:t,guards:r}}function yo(t,r){let e=Symbol(),n=r.get(t,e);return n===e?typeof t=="function"&&!om(t)?t:r.get(t):n}function Ca(t,r,e,n,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ao(r);return t.children.forEach(s=>{M0(s,o[s.value.outlet],e,n.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,l])=>Ea(l,e.getContext(s),i)),i}function M0(t,r,e,n,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=r?r.value:null,l=e?e.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let d=P0(s,o,o.routeConfig.runGuardsAndResolvers);d?i.canActivateChecks.push(new Lc(n)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ca(t,r,l?l.children:null,n,i):Ca(t,r,e,n,i),d&&l&&l.outlet&&l.outlet.isActivated&&i.canDeactivateChecks.push(new lo(l.outlet.component,s))}else s&&Ea(r,l,i),i.canActivateChecks.push(new Lc(n)),o.component?Ca(t,null,l?l.children:null,n,i):Ca(t,null,e,n,i);return i}function P0(t,r,e){if(typeof e=="function")return e(t,r);switch(e){case"pathParamsChange":return!xi(t.url,r.url);case"pathParamsOrQueryParamsChange":return!xi(t.url,r.url)||!jr(t.queryParams,r.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xd(t,r)||!jr(t.queryParams,r.queryParams);case"paramsChange":default:return!Xd(t,r)}}function Ea(t,r,e){let n=ao(t),i=t.value;Object.entries(n).forEach(([o,s])=>{i.component?r?Ea(s,r.children.getContext(o),e):Ea(s,null,e):Ea(s,r,e)}),i.component?r&&r.outlet&&r.outlet.isActivated?e.canDeactivateChecks.push(new lo(r.outlet.component,i)):e.canDeactivateChecks.push(new lo(null,i)):e.canDeactivateChecks.push(new lo(null,i))}function Na(t){return typeof t=="function"}function N0(t){return typeof t=="boolean"}function L0(t){return t&&Na(t.canLoad)}function F0(t){return t&&Na(t.canActivate)}function B0(t){return t&&Na(t.canActivateChild)}function $0(t){return t&&Na(t.canDeactivate)}function j0(t){return t&&Na(t.canMatch)}function ev(t){return t instanceof tm||t?.name==="EmptyError"}var mc=Symbol("INITIAL_VALUE");function go(){return vr(t=>oa(t.map(r=>r.pipe(Ne(1),Ve(mc)))).pipe(mt(r=>{for(let e of r)if(e!==!0){if(e===mc)return mc;if(e===!1||U0(e))return e}return!0}),gt(r=>r!==mc),Ne(1)))}function U0(t){return Fn(t)||t instanceof mo}function rv(t){return t.aborted?lt(void 0).pipe(Ne(1)):new Rn(r=>{let e=()=>{r.next(),r.complete()};return t.addEventListener("abort",e),()=>t.removeEventListener("abort",e)})}function nv(t){return yr(rv(t))}function z0(t,r){return he(e=>{let{targetSnapshot:n,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?lt(bt($({},e),{guardsResult:!0})):V0(s,n,i,t).pipe(he(l=>l&&N0(l)?q0(n,o,t,r):lt(l)),mt(l=>bt($({},e),{guardsResult:l})))})}function V0(t,r,e,n){return Ce(t).pipe(he(i=>Q0(i.component,i.route,e,r,n)),An(i=>i!==!0,!0))}function q0(t,r,e,n){return Ce(r).pipe(aa(i=>Vs(H0(i.route.parent,n),W0(i.route,n),G0(t,i.path,e),K0(t,i.route,e))),An(i=>i!==!0,!0))}function W0(t,r){return t!==null&&r&&r(new kc(t)),lt(!0)}function H0(t,r){return t!==null&&r&&r(new Dc(t)),lt(!0)}function K0(t,r,e){let n=r.routeConfig?r.routeConfig.canActivate:null;if(!n||n.length===0)return lt(!0);let i=n.map(o=>On(()=>{let s=vo(r)??e,l=yo(o,s),d=F0(l)?l.canActivate(r,t):nr(s,()=>l(r,t));return Ei(d).pipe(An())}));return lt(i).pipe(go())}function G0(t,r,e){let n=r[r.length-1],o=r.slice(0,r.length-1).reverse().map(s=>T0(s)).filter(s=>s!==null).map(s=>On(()=>{let l=s.guards.map(d=>{let p=vo(s.node)??e,m=yo(d,p),y=B0(m)?m.canActivateChild(n,t):nr(p,()=>m(n,t));return Ei(y).pipe(An())});return lt(l).pipe(go())}));return lt(o).pipe(go())}function Q0(t,r,e,n,i){let o=r&&r.routeConfig?r.routeConfig.canDeactivate:null;if(!o||o.length===0)return lt(!0);let s=o.map(l=>{let d=vo(r)??i,p=yo(l,d),m=$0(p)?p.canDeactivate(t,r,e,n):nr(d,()=>p(t,r,e,n));return Ei(m).pipe(An())});return lt(s).pipe(go())}function Y0(t,r,e,n,i){let o=r.canLoad;if(o===void 0||o.length===0)return lt(!0);let s=o.map(l=>{let d=yo(l,t),p=L0(d)?d.canLoad(r,e):nr(t,()=>d(r,e)),m=Ei(p);return i?m.pipe(nv(i)):m});return lt(s).pipe(go(),iv(n))}function iv(t){return Xp(Se(r=>{if(typeof r!="boolean")throw Nc(t,r)}),mt(r=>r===!0))}function X0(t,r,e,n,i){let o=r.canMatch;if(!o||o.length===0)return lt(!0);let s=o.map(l=>{let d=yo(l,t),p=j0(d)?d.canMatch(r,e):nr(t,()=>d(r,e)),m=Ei(p);return i?m.pipe(nv(i)):m});return lt(s).pipe(go(),iv(n))}var wi=class ov extends Error{segmentGroup;constructor(r){super(),this.segmentGroup=r||null,Object.setPrototypeOf(this,ov.prototype)}},tf=class av extends Error{urlTree;constructor(r){super(),this.urlTree=r,Object.setPrototypeOf(this,av.prototype)}};function Z0(t){throw new Ee(4e3,!1)}function J0(t){throw Jg(!1,Ae.GuardRejected)}var tC=class{urlSerializer;urlTree;constructor(r,e){this.urlSerializer=r,this.urlTree=e}lineralizeSegments(r,e){return U(this,null,function*(){let n=[],i=e.root;for(;;){if(n=n.concat(i.segments),i.numberOfChildren===0)return n;if(i.numberOfChildren>1||!i.children[ut])throw Z0(`${r.redirectTo}`);i=i.children[ut]}})}applyRedirectCommands(r,e,n,i,o){return U(this,null,function*(){let s=yield eC(e,i,o);if(s instanceof Rr)throw new tf(s);let l=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),r,n);if(s[0]==="/")throw new tf(l);return l})}applyRedirectCreateUrlTree(r,e,n,i){let o=this.createSegmentGroup(r,e.root,n,i);return new Rr(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(r,e){let n={};return Object.entries(r).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let l=o.substring(1);n[i]=e[l]}else n[i]=o}),n}createSegmentGroup(r,e,n,i){let o=this.createSegments(r,e.segments,n,i),s={};return Object.entries(e.children).forEach(([l,d])=>{s[l]=this.createSegmentGroup(r,d,n,i)}),new Rt(o,s)}createSegments(r,e,n,i){return e.map(o=>o.path[0]===":"?this.findPosParam(r,o,i):this.findOrReturn(o,n))}findPosParam(r,e,n){let i=n[e.path.substring(1)];if(!i)throw new Ee(4001,!1);return i}findOrReturn(r,e){let n=0;for(let i of e){if(i.path===r.path)return e.splice(n),i;n++}return r}};function eC(t,r,e){if(typeof t=="string")return Promise.resolve(t);let n=t,{queryParams:i,fragment:o,routeConfig:s,url:l,outlet:d,params:p,data:m,title:y}=r;return bc(Ei(nr(e,()=>n({params:p,data:m,queryParams:i,fragment:o,routeConfig:s,url:l,outlet:d,title:y}))))}var ef={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rC(t,r,e,n,i,o){let s=sv(t,r,e);return s.matched?(n=C0(r,n),X0(n,r,e,i,o).pipe(mt(l=>l===!0?s:$({},ef)))):lt(s)}function sv(t,r,e){if(r.path==="**")return nC(e);if(r.path==="")return r.pathMatch==="full"&&(t.hasChildren()||e.length>0)?$({},ef):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(r.matcher||Ig)(e,t,r);if(!i)return $({},ef);let o={};Object.entries(i.posParams??{}).forEach(([l,d])=>{o[l]=d.path});let s=i.consumed.length>0?$($({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function nC(t){return{matched:!0,parameters:t.length>0?Mg(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Dg(t,r,e,n){return e.length>0&&aC(t,e,n)?{segmentGroup:new Rt(r,oC(n,new Rt(e,t.children))),slicedSegments:[]}:e.length===0&&sC(t,e,n)?{segmentGroup:new Rt(t.segments,iC(t,e,n,t.children)),slicedSegments:e}:{segmentGroup:new Rt(t.segments,t.children),slicedSegments:e}}function iC(t,r,e,n){let i={};for(let o of e)if(Bc(t,r,o)&&!n[Er(o)]){let s=new Rt([],{});i[Er(o)]=s}return $($({},n),i)}function oC(t,r){let e={};e[ut]=r;for(let n of t)if(n.path===""&&Er(n)!==ut){let i=new Rt([],{});e[Er(n)]=i}return e}function aC(t,r,e){return e.some(n=>Bc(t,r,n)&&Er(n)!==ut)}function sC(t,r,e){return e.some(n=>Bc(t,r,n))}function Bc(t,r,e){return(t.hasChildren()||r.length>0)&&e.pathMatch==="full"?!1:e.path===""}function cC(t,r,e){return r.length===0&&!t.children[e]}var lC=class{};function uC(t,r,e,n,i,o,s="emptyOnly",l){return U(this,null,function*(){return new fC(t,r,e,n,i,s,o,l).recognize()})}var dC=31,fC=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(r,e,n,i,o,s,l,d){this.injector=r,this.configLoader=e,this.rootComponentType=n,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=l,this.abortSignal=d,this.applyRedirects=new tC(this.urlSerializer,this.urlTree)}noMatchError(r){return new Ee(4002,`'${r.segmentGroup}'`)}recognize(){return U(this,null,function*(){let r=Dg(this.urlTree.root,[],[],this.config).segmentGroup,{children:e,rootSnapshot:n}=yield this.match(r),i=new Ke(n,e),o=new ka("",i),s=Vg(n,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}})}match(r){return U(this,null,function*(){let e=new Ci([],Object.freeze({}),Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ut,this.rootComponentType,null,{});try{return{children:yield this.processSegmentGroup(this.injector,this.config,r,ut,e),rootSnapshot:e}}catch(n){if(n instanceof tf)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof wi?this.noMatchError(n):n}})}processSegmentGroup(r,e,n,i,o){return U(this,null,function*(){if(n.segments.length===0&&n.hasChildren())return this.processChildren(r,e,n,o);let s=yield this.processSegment(r,e,n,n.segments,i,!0,o);return s instanceof Ke?[s]:[]})}processChildren(r,e,n,i){return U(this,null,function*(){let o=[];for(let d of Object.keys(n.children))d==="primary"?o.unshift(d):o.push(d);let s=[];for(let d of o){let p=n.children[d],m=S0(e,d),y=yield this.processSegmentGroup(r,m,p,d,i);s.push(...y)}let l=cv(s);return hC(l),l})}processSegment(r,e,n,i,o,s,l){return U(this,null,function*(){for(let d of e)try{return yield this.processSegmentAgainstRoute(d._injector??r,e,d,n,i,o,s,l)}catch(p){if(p instanceof wi||ev(p))continue;throw p}if(cC(n,i,o))return new lC;throw new wi(n)})}processSegmentAgainstRoute(r,e,n,i,o,s,l,d){return U(this,null,function*(){if(Er(n)!==s&&(s===ut||!Bc(i,o,n)))throw new wi(i);if(n.redirectTo===void 0)return this.matchSegmentAgainstRoute(r,i,n,o,s,d);if(this.allowRedirects&&l)return this.expandSegmentAgainstRouteUsingRedirect(r,i,e,n,o,s,d);throw new wi(i)})}expandSegmentAgainstRouteUsingRedirect(r,e,n,i,o,s,l){return U(this,null,function*(){let{matched:d,parameters:p,consumedSegments:m,positionalParamSegments:y,remainingSegments:S}=sv(e,i,o);if(!d)throw new wi(e);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>dC&&(this.allowRedirects=!1));let A=new Ci(o,p,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,Ag(i),Er(i),i.component??i._loadedComponent??null,i,kg(i)),N=Pc(A,l,this.paramsInheritanceStrategy);if(A.params=Object.freeze(N.params),A.data=Object.freeze(N.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let j=yield this.applyRedirects.applyRedirectCommands(m,i.redirectTo,y,A,r),G=yield this.applyRedirects.lineralizeSegments(i,j);return this.processSegment(r,n,e,G.concat(S),s,!1,l)})}matchSegmentAgainstRoute(r,e,n,i,o,s){return U(this,null,function*(){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let l=yield bc(rC(e,n,i,r,this.urlSerializer,this.abortSignal));if(n.path==="**"&&(e.children={}),!l?.matched)throw new wi(e);r=n._injector??r;let{routes:d}=yield this.getChildConfig(r,n,i),p=n._loadedInjector??r,{parameters:m,consumedSegments:y,remainingSegments:S}=l,A=new Ci(y,m,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,Ag(n),Er(n),n.component??n._loadedComponent??null,n,kg(n)),N=Pc(A,s,this.paramsInheritanceStrategy);A.params=Object.freeze(N.params),A.data=Object.freeze(N.data);let{segmentGroup:j,slicedSegments:G}=Dg(e,y,S,d);if(G.length===0&&j.hasChildren()){let et=yield this.processChildren(p,d,j,A);return new Ke(A,et)}if(d.length===0&&G.length===0)return new Ke(A,[]);let tt=Er(n)===o,rt=yield this.processSegment(p,d,j,G,tt?ut:o,!0,A);return new Ke(A,rt instanceof Ke?[rt]:[])})}getChildConfig(r,e,n){return U(this,null,function*(){if(e.children)return{routes:e.children,injector:r};if(e.loadChildren){if(e._loadedRoutes!==void 0)return{routes:e._loadedRoutes,injector:e._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(yield bc(Y0(r,e,n,this.urlSerializer,this.abortSignal))){let o=yield this.configLoader.loadChildren(r,e);return e._loadedRoutes=o.routes,e._loadedInjector=o.injector,o}throw J0(e)}return{routes:[],injector:r}})}};function hC(t){t.sort((r,e)=>r.value.outlet===ut?-1:e.value.outlet===ut?1:r.value.outlet.localeCompare(e.value.outlet))}function pC(t){let r=t.value.routeConfig;return r&&r.path===""}function cv(t){let r=[],e=new Set;for(let n of t){if(!pC(n)){r.push(n);continue}let i=r.find(o=>n.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...n.children),e.add(i)):r.push(n)}for(let n of e){let i=cv(n.children);r.push(new Ke(n.value,i))}return r.filter(n=>!e.has(n))}function Ag(t){return t.data||{}}function kg(t){return t.resolve||{}}var mC=new ot("",{factory:()=>uC});function gC(t,r,e,n,i,o,s){let l=t.get(mC);return he(d=>lt(d).pipe(vr(p=>l(t,r,e,n,p.extractedUrl,i,o,s)),mt(({state:p,tree:m})=>bt($({},d),{targetSnapshot:p,urlAfterRedirects:m}))))}function vC(t,r){return he(e=>{let{targetSnapshot:n,guards:{canActivateChecks:i}}=e;if(!i.length)return lt(e);let o=new Set(i.map(d=>d.route)),s=new Set;for(let d of o)if(!s.has(d))for(let p of lv(d))s.add(p);let l=0;return Ce(s).pipe(aa(d=>o.has(d)?yC(d,n,t,r):(d.data=Pc(d,d.parent,t).resolve,lt(void 0))),Se(()=>l++),ed(1),he(d=>l===s.size?lt(e):en))})}function lv(t){let r=t.children.map(e=>lv(e)).flat();return[t,...r]}function yC(t,r,e,n){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!Yg(i)&&(o[Ta]=i.title),On(()=>(t.data=Pc(t,t.parent,e).resolve,bC(o,t,r,n).pipe(mt(s=>(t._resolvedData=s,t.data=$($({},t.data),s),null)))))}function bC(t,r,e,n){let i=Wd(t);if(i.length===0)return lt({});let o={};return Ce(i).pipe(he(s=>_C(t[s],r,e,n).pipe(An(),Se(l=>{if(l instanceof mo)throw Nc(new cn,l);o[s]=l}))),ed(1),mt(()=>o),Ws(s=>ev(s)?en:Jp(s)))}function _C(t,r,e,n){let i=vo(r)??n,o=yo(t,i),s=o.resolve?o.resolve(r,e):nr(i,()=>o(r,e));return Ei(s)}function Vd(t){return vr(r=>{let e=t(r);return e?Ce(e).pipe(mt(()=>r)):lt(r)})}var sf=(()=>{class t{buildTitle(e){let n,i=e.root;for(;i!==void 0;)n=this.getResolvedTitleForRoute(i)??n,i=i.children.find(o=>o.outlet===ut);return n}getResolvedTitleForRoute(e){return e.data[Ta]}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:()=>w(uv),providedIn:"root"})}return t})(),uv=(()=>{class t extends sf{title;constructor(e){super(),this.title=e}updateTitle(e){let n=this.buildTitle(e);n!==void 0&&this.title.setTitle(n)}static \u0275fac=function(n){return new(n||t)(Gt(Bm))};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Bn=new ot("",{factory:()=>({})}),Vr=new ot(""),$c=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=w(rc);loadComponent(e,n){return U(this,null,function*(){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Promise.resolve(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let i=U(this,null,function*(){try{let o=yield Pg(nr(e,()=>n.loadComponent())),s=yield hv(fv(o));return this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s,s}finally{this.componentLoaders.delete(n)}});return this.componentLoaders.set(n,i),i})}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return Promise.resolve({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let i=U(this,null,function*(){try{let o=yield dv(n,this.compiler,e,this.onLoadEndListener);return n._loadedRoutes=o.routes,n._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(n)}});return this.childrenLoaders.set(n,i),i}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function dv(t,r,e,n){return U(this,null,function*(){let i=yield Pg(nr(e,()=>t.loadChildren())),o=yield hv(fv(i)),s;o instanceof Js||Array.isArray(o)?s=o:s=yield r.compileModuleAsync(o),n&&n(t);let l,d,p=!1;return Array.isArray(s)?(d=s,p=!0):(l=s.create(e).injector,d=l.get(Vr,[],{optional:!0,self:!0}).flat()),{routes:d.map(af),injector:l}})}function wC(t){return t&&typeof t=="object"&&"default"in t}function fv(t){return wC(t)?t.default:t}function hv(t){return U(this,null,function*(){return t})}var jc=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:()=>w(xC),providedIn:"root"})}return t})(),xC=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),cf=new ot(""),lf=new ot("");function pv(t,r,e){let n=t.get(lf),i=t.get(Lt);if(!i.startViewTransition||n.skipNextTransition)return n.skipNextTransition=!1,new Promise(p=>setTimeout(p));let o,s=new Promise(p=>{o=p}),l=i.startViewTransition(()=>(o(),CC(t)));l.ready.catch(p=>{}),l.finished.catch(p=>{});let{onViewTransitionCreated:d}=n;return d&&nr(t,()=>d({transition:l,from:r,to:e})),s}function CC(t){return new Promise(r=>{We({read:()=>setTimeout(r)},{injector:t})})}var SC=()=>{},uf=new ot(""),Uc=(()=>{class t{currentNavigation=_r(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=_r(null);events=new it;transitionAbortWithErrorSubject=new it;configLoader=w($c);environmentInjector=w(br);destroyRef=w(id);urlSerializer=w(Ri);rootContexts=w(Oi);location=w(Fr);inputBindingEnabled=w(Ma,{optional:!0})!==null;titleStrategy=w(sf);options=w(Bn,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=w(jc);createViewTransition=w(cf,{optional:!0});navigationErrorHandler=w(uf,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>lt(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=i=>this.events.next(new Rc(i)),n=i=>this.events.next(new Oc(i));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let n=++this.navigationId;rn(()=>{this.transitions?.next(bt($({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:n}))})}setupNavigations(e){return this.transitions=new fe(null),this.transitions.pipe(gt(n=>n!==null),vr(n=>{let i=!1,o=new AbortController;return lt(n).pipe(vr(s=>{if(this.navigationId>n.id)return this.cancelNavigationTransition(n,"",Ae.SupersededByNewNavigation),en;this.currentTransition=n;let l=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:l?bt($({},l),{previousNavigation:null}):null,abort:()=>o.abort()});let d=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=s.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!d&&p!=="reload")return this.events.next(new zr(s.id,this.urlSerializer.serialize(s.rawUrl),"",uo.IgnoredSameUrlNavigation)),s.resolve(!1),en;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return lt(s).pipe(vr(m=>(this.events.next(new Ur(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),m.id!==this.navigationId?en:Promise.resolve(m))),gC(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),Se(m=>{n.targetSnapshot=m.targetSnapshot,n.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation.update(S=>(S.finalUrl=m.urlAfterRedirects,S));let y=new Oa(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:m,extractedUrl:y,source:S,restoredState:A,extras:N}=s,j=new Ur(m,this.urlSerializer.serialize(y),S,A);this.events.next(j);let G=Gg(this.rootComponentType).snapshot;return this.currentTransition=n=bt($({},s),{targetSnapshot:G,urlAfterRedirects:y,extras:bt($({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(tt=>(tt.finalUrl=y,tt)),lt(n)}else return this.events.next(new zr(s.id,this.urlSerializer.serialize(s.extractedUrl),"",uo.IgnoredByUrlHandlingStrategy)),s.resolve(!1),en}),Se(s=>{let l=new xc(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(l)}),mt(s=>(this.currentTransition=n=bt($({},s),{guards:I0(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),n)),z0(this.environmentInjector,s=>this.events.next(s)),Se(s=>{if(n.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Nc(this.urlSerializer,s.guardsResult);let l=new Cc(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(l)}),gt(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Ae.GuardRejected),!1)),Vd(s=>{if(s.guards.canActivateChecks.length!==0)return lt(s).pipe(Se(l=>{let d=new Sc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),vr(l=>{let d=!1;return lt(l).pipe(vC(this.paramsInheritanceStrategy,this.environmentInjector),Se({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Ae.NoDataFromResolver)}}))}),Se(l=>{let d=new Ec(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),Vd(s=>{let l=p=>{let m=[];if(p.routeConfig?._loadedComponent)p.component=p.routeConfig?._loadedComponent;else if(p.routeConfig?.loadComponent){let y=vo(p)??this.environmentInjector;m.push(this.configLoader.loadComponent(y,p.routeConfig).then(S=>{p.component=S}))}for(let y of p.children)m.push(...l(y));return m},d=l(s.targetSnapshot.root);return d.length===0?lt(s):Ce(Promise.all(d).then(()=>s))}),Vd(()=>this.afterPreactivation()),vr(()=>{let{currentSnapshot:s,targetSnapshot:l}=n,d=this.createViewTransition?.(this.environmentInjector,s.root,l.root);return d?Ce(d).pipe(mt(()=>n)):lt(n)}),mt(s=>{let l=R0(e.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=n=bt($({},s),{targetRouterState:l}),this.currentNavigation.update(d=>(d.targetRouterState=l,d)),n}),Se(()=>{this.events.next(new Da)}),k0(this.rootContexts,e.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Ne(1),yr(rv(o.signal).pipe(gt(()=>!i&&!n.targetRouterState),Se(()=>{this.cancelNavigationTransition(n,o.signal.reason+"",Ae.Aborted)}))),Se({next:s=>{i=!0,this.currentNavigation.update(l=>(l.abort=SC,l)),this.lastSuccessfulNavigation.set(rn(this.currentNavigation)),this.events.next(new lr(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),yr(this.transitionAbortWithErrorSubject.pipe(Se(s=>{throw s}))),Ks(()=>{o.abort(),i||this.cancelNavigationTransition(n,"",Ae.SupersededByNewNavigation),this.currentTransition?.id===n.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ws(s=>{if(this.destroyed)return n.resolve(!1),en;if(i=!0,tv(s))this.events.next(new cr(n.id,this.urlSerializer.serialize(n.extractedUrl),s.message,s.cancellationCode)),A0(s)?this.events.next(new po(s.url,s.navigationBehaviorOptions)):n.resolve(!1);else{let l=new fo(n.id,this.urlSerializer.serialize(n.extractedUrl),s,n.targetSnapshot??void 0);try{let d=nr(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof mo){let{message:p,cancellationCode:m}=Nc(this.urlSerializer,d);this.events.next(new cr(n.id,this.urlSerializer.serialize(n.extractedUrl),p,m)),this.events.next(new po(d.redirectTo,d.navigationBehaviorOptions))}else throw this.events.next(l),s}catch(d){this.options.resolveNavigationPromiseOnError?n.resolve(!1):n.reject(d)}}return en}))}))}cancelNavigationTransition(e,n,i){let o=new cr(e.id,this.urlSerializer.serialize(e.extractedUrl),n,i);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),n=rn(this.currentNavigation),i=n?.targetBrowserUrl??n?.extractedUrl;return e.toString()!==i?.toString()&&!n?.extras.skipLocationChange}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function EC(t){return t!==co}var zc=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:()=>w(RC),providedIn:"root"})}return t})(),Fc=class{shouldDetach(r){return!1}store(r,e){}shouldAttach(r){return!1}retrieve(r){return null}shouldReuseRoute(r,e){return r.routeConfig===e.routeConfig}},RC=(()=>{class t extends Fc{static \u0275fac=(()=>{let e;return function(i){return(e||(e=qe(t)))(i||t)}})();static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),df=(()=>{class t{urlSerializer=w(Ri);options=w(Bn,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=w(Fr);urlHandlingStrategy=w(jc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Rr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:n,targetBrowserUrl:i}){let o=e!==void 0?this.urlHandlingStrategy.merge(e,n):n,s=i??o;return s instanceof Rr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:e,finalUrl:n,initialUrl:i}){n&&e?(this.currentUrlTree=n,this.rawUrlTree=this.urlHandlingStrategy.merge(n,i),this.routerState=e):this.rawUrlTree=i}routerState=Gg(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:()=>w(mv),providedIn:"root"})}return t})(),mv=(()=>{class t extends df{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(n=>{n.type==="popstate"&&setTimeout(()=>{e(n.url,n.state,"popstate")})})}handleRouterEvent(e,n){e instanceof Ur?this.updateStateMemento():e instanceof zr?this.commitTransition(n):e instanceof Oa?this.urlUpdateStrategy==="eager"&&(n.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(n),n)):e instanceof Da?(this.commitTransition(n),this.urlUpdateStrategy==="deferred"&&!n.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(n),n)):e instanceof cr&&e.code!==Ae.SupersededByNewNavigation&&e.code!==Ae.Redirect?this.restoreHistory(n):e instanceof fo?this.restoreHistory(n,!0):e instanceof lr&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:n,id:i}){let{replaceUrl:o,state:s}=n;if(this.location.isCurrentPathEqualTo(e)||o){let l=this.browserPageId,d=$($({},s),this.generateNgRouterState(i,l));this.location.replaceState(e,"",d)}else{let l=$($({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(e,"",l)}}restoreHistory(e,n=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===e.finalUrl&&o===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,n){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=qe(t)))(i||t)}})();static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Vc(t,r){t.events.pipe(gt(e=>e instanceof lr||e instanceof cr||e instanceof fo||e instanceof zr),mt(e=>e instanceof lr||e instanceof zr?0:(e instanceof cr?e.code===Ae.Redirect||e.code===Ae.SupersededByNewNavigation:!1)?2:1),gt(e=>e!==2),Ne(1)).subscribe(()=>{r()})}var OC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},DC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Le=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=w(bm);stateManager=w(df);options=w(Bn,{optional:!0})||{};pendingTasks=w(cm);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=w(Uc);urlSerializer=w(Ri);location=w(Fr);urlHandlingStrategy=w(jc);injector=w(br);_events=new it;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=w(zc);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=w(Vr,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!w(Ma,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new rr;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(n=>{try{let i=this.navigationTransitions.currentTransition,o=rn(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(n,o),n instanceof cr&&n.code!==Ae.Redirect&&n.code!==Ae.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof lr)this.navigated=!0;else if(n instanceof po){let s=n.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(n.url,i.currentRawUrl),d=$({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||EC(i.source)},s);this.scheduleNavigation(l,co,null,d,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}x0(n)&&this._events.next(n)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),co,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,n,i)=>{this.navigateToSyncWithBrowser(e,i,n)})}navigateToSyncWithBrowser(e,n,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let d=$({},i);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(o.state=d)}let l=this.parseUrl(e);this.scheduleNavigation(l,n,s,o).catch(d=>{this.disposed||this.injector.get(Qs)(d)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return rn(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(af),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,n={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:l,preserveFragment:d}=n,p=d?this.currentUrlTree.fragment:s,m=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":m=$($({},this.currentUrlTree.queryParams),o);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=o||null}m!==null&&(m=this.removeEmptyProps(m));let y;try{let S=i?i.snapshot:this.routerState.snapshot.root;y=qg(S)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),y=this.currentUrlTree.root}return Wg(y,e,m,p??null,this.urlSerializer)}navigateByUrl(e,n={skipLocationChange:!1}){let i=Fn(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,co,null,n)}navigate(e,n={skipLocationChange:!1}){return AC(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.console.warn(im(4018,!1)),this.urlSerializer.parse("/")}}isActive(e,n){let i;if(n===!0?i=$({},OC):n===!1?i=$({},DC):i=n,Fn(e))return Cg(this.currentUrlTree,e,i);let o=this.parseUrl(e);return Cg(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.entries(e).reduce((n,[i,o])=>(o!=null&&(n[i]=o),n),{})}scheduleNavigation(e,n,i,o,s){if(this.disposed)return Promise.resolve(!1);let l,d,p;s?(l=s.resolve,d=s.reject,p=s.promise):p=new Promise((y,S)=>{l=y,d=S});let m=this.pendingTasks.add();return Vc(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:l,reject:d,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(y=>Promise.reject(y))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function AC(t){for(let r=0;r<t.length;r++)if(t[r]==null)throw new Ee(4008,!1)}var gv=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=_r(null);get href(){return rn(this.reactiveHref)}set href(e){this.reactiveHref.set(e)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new it;applicationErrorHandler=w(Qs);options=w(Bn,{optional:!0});constructor(e,n,i,o,s,l){this.router=e,this.route=n,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=l,this.reactiveHref.set(w(new Rm("href"),{optional:!0}));let d=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=d==="a"||d==="area"||!!(typeof customElements=="object"&&customElements.get(d)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let e=this.preserveFragment,n=i=>i==="merge"||i==="preserve";e||=n(this.queryParamsHandling),e||=!this.queryParamsHandling&&!n(this.options?.defaultQueryParamsHandling),e&&(this.subscription=this.router.events.subscribe(i=>{i instanceof lr&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Fn(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,n,i,o,s){let l=this.urlTree;if(l===null||this.isAnchorElement&&(e!==0||n||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let d={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,d)?.catch(p=>{this.applicationErrorHandler(p)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.reactiveHref.set(e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e))??"":null)}applyAttributeValue(e,n){let i=this.renderer,o=this.el.nativeElement;n!==null?i.setAttribute(o,e,n):i.removeAttribute(o,e)}get urlTree(){return this.routerLinkInput===null?null:Fn(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(n){return new(n||t)(on(Le),on(ur),dm("tabindex"),on(Nr),on(Bt),on(ua))};static \u0275dir=kt({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(n,i){n&1&&mi("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),n&2&&xr("href",i.reactiveHref(),pm)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",oe],skipLocationChange:[2,"skipLocationChange","skipLocationChange",oe],replaceUrl:[2,"replaceUrl","replaceUrl",oe],routerLink:"routerLink"},features:[Pr]})}return t})();var La=class{};var vv=(()=>{class t{router;injector;preloadingStrategy;loader;subscription;constructor(e,n,i,o){this.router=e,this.injector=n,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(gt(e=>e instanceof lr),aa(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){let i=[];for(let o of n){o.providers&&!o._injector&&(o._injector=tc(o.providers,e,`Route: ${o.path}`));let s=o._injector??e,l=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(l,o.children??o._loadedRoutes))}return Ce(i).pipe(Ju())}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>{let i;n.loadChildren&&n.canLoad===void 0?i=Ce(this.loader.loadChildren(e,n)):i=lt(null);let o=i.pipe(he(s=>s===null?lt(void 0):(n._loadedRoutes=s.routes,n._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));if(n.loadComponent&&!n._loadedComponent){let s=this.loader.loadComponent(e,n);return Ce([o,s]).pipe(Ju())}else return o})}static \u0275fac=function(n){return new(n||t)(Gt(Le),Gt(br),Gt(La),Gt($c))};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),yv=new ot(""),kC=(()=>{class t{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=co;restoredId=0;store={};constructor(e,n,i,o,s={}){this.urlSerializer=e,this.transitions=n,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Ur?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof lr?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof zr&&e.code===uo.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{if(!(e instanceof ho))return;let n={behavior:"instant"};e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],n):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position,n):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(e,n){this.zone.runOutsideAngular(()=>U(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new ho(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,n))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(n){gm()};static \u0275prov=J({token:t,factory:t.\u0275fac})}return t})();function IC(t,...r){return nd([{provide:Vr,multi:!0,useValue:t},[],{provide:ur,useFactory:bv},{provide:ud,multi:!0,useFactory:_v},r.map(e=>e.\u0275providers)])}function bv(){return w(Le).routerState.root}function Fa(t,r){return{\u0275kind:t,\u0275providers:r}}function _v(){let t=w(wt);return r=>{let e=t.get(ca);if(r!==e.components[0])return;let n=t.get(Le),i=t.get(wv);t.get(hf)===1&&n.initialNavigation(),t.get(Sv,null,{optional:!0})?.setUpPreloading(),t.get(yv,null,{optional:!0})?.init(),n.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var wv=new ot("",{factory:()=>new it}),hf=new ot("",{factory:()=>1});function xv(){let t=[{provide:hm,useValue:!0},{provide:hf,useValue:0},ld(()=>{let r=w(wt);return r.get(Tm,Promise.resolve()).then(()=>new Promise(n=>{let i=r.get(Le),o=r.get(wv);Vc(i,()=>{n(!0)}),r.get(Uc).afterPreactivation=()=>(n(!0),o.closed?lt(void 0):o),i.initialNavigation()}))})];return Fa(2,t)}function Cv(){let t=[ld(()=>{w(Le).setUpLocationChangeListener()}),{provide:hf,useValue:2}];return Fa(3,t)}var Sv=new ot("");function Ev(t){return Fa(0,[{provide:Sv,useExisting:vv},{provide:La,useExisting:t}])}function Rv(){return Fa(8,[of,{provide:Ma,useExisting:of}])}function Ov(t){mm("NgRouterViewTransitions");let r=[{provide:cf,useValue:pv},{provide:lf,useValue:$({skipNextTransition:!!t?.skipInitialTransition},t)}];return Fa(9,r)}var Dv=[Fr,{provide:Ri,useClass:cn},Le,Oi,{provide:ur,useFactory:bv},$c,[]],pf=(()=>{class t{constructor(){}static forRoot(e,n){return{ngModule:t,providers:[Dv,[],{provide:Vr,multi:!0,useValue:e},[],n?.errorHandler?{provide:uf,useValue:n.errorHandler}:[],{provide:Bn,useValue:n||{}},n?.useHash?MC():PC(),TC(),n?.preloadingStrategy?Ev(n.preloadingStrategy).\u0275providers:[],n?.initialNavigation?NC(n):[],n?.bindToComponentInputs?Rv().\u0275providers:[],n?.enableViewTransitions?Ov().\u0275providers:[],LC()]}}static forChild(e){return{ngModule:t,providers:[{provide:Vr,multi:!0,useValue:e}]}}static \u0275fac=function(n){return new(n||t)};static \u0275mod=Ht({type:t});static \u0275inj=Wt({})}return t})();function TC(){return{provide:yv,useFactory:()=>{let t=w(Lm),r=w(Ct),e=w(Bn),n=w(Uc),i=w(Ri);return e.scrollOffset&&t.setOffset(e.scrollOffset),new kC(i,n,t,r,e)}}}function MC(){return{provide:ua,useClass:Pm}}function PC(){return{provide:ua,useClass:Mm}}function NC(t){return[t.initialNavigation==="disabled"?Cv().\u0275providers:[],t.initialNavigation==="enabledBlocking"?xv().\u0275providers:[]]}var ff=new ot("");function LC(){return[{provide:ff,useFactory:_v},{provide:ud,multi:!0,useExisting:ff}]}var FC=new ot("LOCALIZE_ROUTER_FORROOT_GUARD"),mf=new ot("RAW_ROUTES"),$n=(function(t){return t.LocalStorage="LocalStorage",t.SessionStorage="SessionStorage",t.Cookie="Cookie",t})($n||{}),kv=new ot("USE_CACHED_LANG"),Iv=new ot("CACHE_MECHANISM"),Tv=new ot("CACHE_NAME"),Mv=new ot("COOKIE_FORMAT"),Pv=new ot("INITIAL_NAVIGATION"),Nv=new ot("DEFAULT_LANG_FUNCTION"),Lv=new ot("ALWAYS_SET_PREFIX"),BC="LOCALIZE_DEFAULT_LANGUAGE",$C="{{value}};{{expires}}",jC=!1,Wc=(()=>{class t{constructor(e=!0,n=!0,i=$n.LocalStorage,o=BC,s=void 0,l=$C,d=jC){this.useCachedLang=e,this.alwaysSetPrefix=n,this.cacheName=o,this.cookieFormat=l,this.initialNavigation=d,this.cacheMechanism=i,this.defaultLangFunction=s}static{this.\u0275fac=function(n){return new(n||t)(Gt(kv),Gt(Lv),Gt(Iv),Gt(Tv),Gt(Nv),Gt(Mv),Gt(Pv))}}static{this.\u0275prov=J({token:t,factory:t.\u0275fac})}}return t})(),UC=30,Ba=(()=>{class t{constructor(e,n,i){this.translate=e,this.location=n,this.settings=i}init(e){let n;if(this.routes=e,!this.locales||!this.locales.length)return Promise.resolve();let i=this.getLocationLang(),o=this._getBrowserLang();this.settings.defaultLangFunction?this.defaultLang=this.settings.defaultLangFunction(this.locales,this._cachedLang,o):this.defaultLang=this._cachedLang||o||this.locales[0],n=i||this.defaultLang,this.translate.setDefaultLang(this.defaultLang);let s=[];if(this.settings.alwaysSetPrefix){let l={path:"",redirectTo:this.defaultLang,pathMatch:"full"},d=e.findIndex(p=>p.path==="**");d!==-1&&(this._wildcardRoute=e.splice(d,1)[0]),s=this.routes.splice(0,this.routes.length,l)}else s=[...this.routes];for(let l=s.length-1;l>=0;l--)s[l].data&&s[l].data.skipRouteLocalization&&(this.settings.alwaysSetPrefix&&this.routes.push(s[l]),(s[l].redirectTo===void 0||!s[l].data.skipRouteLocalization.localizeRedirectTo||typeof s[l].redirectTo=="function")&&s.splice(l,1));return s&&s.length&&(this.locales.length>1||this.settings.alwaysSetPrefix)&&(this._languageRoute={children:s},this.routes.unshift(this._languageRoute)),this._wildcardRoute&&this.settings.alwaysSetPrefix&&this.routes.push(this._wildcardRoute),em(this.translateRoutes(n))}initChildRoutes(e){return this._translateRouteTree(e),e}translateRoutes(e){return new Rn(n=>{this._cachedLang=e,this._languageRoute&&(this._languageRoute.path=e),this.translate.use(e).subscribe(i=>{this._translationObject=i,this.currentLang=e,this._languageRoute?(this._translateRouteTree(this._languageRoute.children,!0),this._wildcardRoute&&this._wildcardRoute.redirectTo&&this._translateProperty(this._wildcardRoute,"redirectTo",!0)):this._translateRouteTree(this.routes,!0),n.next(void 0),n.complete()})})}_translateRouteTree(e,n){e.forEach(i=>{let o=i.data&&i.data.skipRouteLocalization,s=!o||o.localizeRedirectTo;if(i.redirectTo&&s&&typeof i.redirectTo!="function"){let l=i.redirectTo.indexOf("/")===0||n;this._translateProperty(i,"redirectTo",l)}o||(i.path!==null&&i.path!==void 0&&this._translateProperty(i,"path"),i.children&&this._translateRouteTree(i.children),i.loadChildren&&i._loadedRoutes?.length&&this._translateRouteTree(i._loadedRoutes))})}_translateProperty(e,n,i){let o=e.data=e.data||{};o.localizeRouter||(o.localizeRouter={}),o.localizeRouter[n]||(o.localizeRouter=bt($({},o.localizeRouter),{[n]:e[n]}));let s=this.translateRoute(o.localizeRouter[n]);e[n]=i?this.addPrefixToUrl(s):s}get urlPrefix(){return this.settings.alwaysSetPrefix||this.currentLang!==this.defaultLang?this.currentLang?this.currentLang:this.defaultLang:""}addPrefixToUrl(e){let n=e.split("?"),i=n[0].length===1&&n[0]==="/";n[0]=n[0].replace(/\/$/,"");let o=n.join("?");return this.urlPrefix===""?o:!o.startsWith("/")&&!i?`${this.urlPrefix}/${o}`:`/${this.urlPrefix}${o}`}translateRoute(e){let n=e.split("?");if(n.length>2)throw Error("There should be only one query parameter block in the URL");return n[0].split("/").map(o=>o.length?this.translateText(o):o).join("/")+(n.length>1?`?${n[1]}`:"")}getLocationLang(e){let n=(e||this.location.path()).split(/[\?;]/),i=[];return n.length>0&&(i=n[0].split("/")),i.length>1&&this.locales.indexOf(i[1])!==-1?i[1]:i.length&&this.locales.indexOf(i[0])!==-1?i[0]:null}_getBrowserLang(){return this._returnIfInLocales(this.translate.getBrowserLang())}get _cachedLang(){if(this.settings.useCachedLang){if(this.settings.cacheMechanism===$n.LocalStorage)return this._cacheWithLocalStorage();if(this.settings.cacheMechanism===$n.SessionStorage)return this._cacheWithSessionStorage();if(this.settings.cacheMechanism===$n.Cookie)return this._cacheWithCookies()}}set _cachedLang(e){this.settings.useCachedLang&&(this.settings.cacheMechanism===$n.LocalStorage&&this._cacheWithLocalStorage(e),this.settings.cacheMechanism===$n.SessionStorage&&this._cacheWithSessionStorage(e),this.settings.cacheMechanism===$n.Cookie&&this._cacheWithCookies(e))}_cacheWithLocalStorage(e){try{if(typeof window>"u"||typeof window.localStorage>"u")return;if(e){window.localStorage.setItem(this.settings.cacheName,e);return}return this._returnIfInLocales(window.localStorage.getItem(this.settings.cacheName))}catch{return}}_cacheWithSessionStorage(e){try{if(typeof window>"u"||typeof window.sessionStorage>"u")return;if(e){window.sessionStorage.setItem(this.settings.cacheName,e);return}return this._returnIfInLocales(window.sessionStorage.getItem(this.settings.cacheName))}catch{return}}_cacheWithCookies(e){try{if(typeof document>"u"||typeof document.cookie>"u")return;let n=encodeURIComponent(this.settings.cacheName);if(e){let s=`${this.settings.cookieFormat}`;s=s.replace("{{value}}",`${n}=${encodeURIComponent(e)}`).replace(/{{expires:?(\d+)?}}/g,(l,d)=>{let p=d===void 0?UC:parseInt(d,10),m=new Date;return m.setTime(m.getTime()+p*864e5),`expires=${m.toUTCString()}`}),document.cookie=s;return}let o=new RegExp("(?:^"+n+"|;\\s*"+n+")=(.*?)(?:;|$)","g").exec(document.cookie);return decodeURIComponent(o[1])}catch{return}}_returnIfInLocales(e){return e&&this.locales.indexOf(e)!==-1?e:null}translateText(e){if(this.escapePrefix&&e.startsWith(this.escapePrefix))return e.replace(this.escapePrefix,"");{if(!this._translationObject)return e;let n=this.prefix+e,i=this.translate.getParsedResult(this._translationObject,n);return i!==n?i:e}}chooseQueryParams(e,n){let i;return e&&e.queryParams?i=e.queryParams:n&&(i=n),i}formatQueryParams(e){return new Fm({fromObject:e}).toString()}getPrefix(){return this.prefix}getEscapePrefix(){return this.escapePrefix}static{this.\u0275fac=function(n){return new(n||t)(Gt($m),Gt(Fr),Gt(Wc))}}static{this.\u0275prov=J({token:t,factory:t.\u0275fac})}}return t})();var zC=(()=>{class t extends Ba{load(e){return new Promise(n=>{this.init(e).then(n)})}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=qe(t)))(i||t)}})()}static{this.\u0275prov=J({token:t,factory:t.\u0275fac})}}return t})();function qc(t,r){if(t===r)return!0;if(t===null||r===null)return!1;if(t!==t&&r!==r)return!0;let e=typeof t,n=typeof r,i,o,s;if(e===n&&e==="object")if(Array.isArray(t)){if(!Array.isArray(r))return!1;if((i=t.length)===r.length){for(o=0;o<i;o++)if(!qc(t[o],r[o]))return!1;return!0}}else{if(Array.isArray(r))return!1;s=Object.create(null);for(o in t)if(t.hasOwnProperty(o)){if(!qc(t[o],r[o]))return!1;s[o]=!0}for(o in r)if(r.hasOwnProperty(o)&&!(o in s)&&typeof r[o]<"u")return!1;return!0}return!1}function VC(t){return!!t&&typeof t.then=="function"}function vf(t){let r=Array.isArray(t)?[]:{};for(let e in t)if(e){let n=t[e];r[e]=typeof n=="object"?vf(n):n}return r}var yf=(()=>{class t{constructor(e,n,i,o){this.parser=e,this.settings=n,this.router=i,this.route=o,this.routerEvents=new it;let s=new ia(1);this.hooks={_initializedSubject:s,initialized:s.asObservable()}}init(){this.applyConfigToRouter(this.parser.routes),this.router.events.pipe(gt(e=>e instanceof Ur),rd()).subscribe(this._routeChanged()),this.settings.initialNavigation&&this.router.initialNavigation()}changeLanguage(e,n,i){if(e!==this.parser.currentLang){let o=this.router.routerState.snapshot.root;this.parser.translateRoutes(e).subscribe(()=>{let s=this.traverseRouteSnapshot(o);if(s=this.translateRoute(s),!this.settings.alwaysSetPrefix){let p=s.split("/"),m=p.indexOf(this.parser.currentLang);if(this.parser.currentLang===this.parser.defaultLang)(m===0||m===1&&p[0]==="")&&(p=p.slice(0,m).concat(p.slice(m+1)));else if(m===-1){let y=p[0]===""?1:0;p=p.slice(0,y).concat(this.parser.currentLang,p.slice(y))}s=p.join("/")}s=s.replace(/\/+/g,"/");let l=s.lastIndexOf("/");l>0&&l===s.length-1&&(s=s.slice(0,-1));let d=this.parser.chooseQueryParams(n,this.route.snapshot.queryParams);if(this.applyConfigToRouter(this.parser.routes),this.lastExtras=n,i){let p=n?$({},n):{};d&&(p.queryParams=d),this.router.navigate([s],p)}else{let p=this.parser.formatQueryParams(d);p=p?`?${p}`:"",this.router.navigateByUrl(`${s}${p}`,n)}})}}traverseRouteSnapshot(e){return e.firstChild&&e.routeConfig?`${this.parseSegmentValue(e)}/${this.traverseRouteSnapshot(e.firstChild)}`:e.firstChild?this.traverseRouteSnapshot(e.firstChild):this.parseSegmentValue(e)}buildUrlFromSegments(e,n){return n.map((i,o)=>i.indexOf(":")===0?e.url[o].path:i).join("/")}parseSegmentValue(e){if(e.routeConfig&&e.routeConfig.matcher){let n=this.parseSegmentValueMatcher(e);return this.buildUrlFromSegments(e,n)}else if(e.data.localizeRouter){let i=e.data.localizeRouter.path.split("/");return this.buildUrlFromSegments(e,i)}else if(e.parent&&e.parent.parent){let i=e.routeConfig.path.split("/");return this.buildUrlFromSegments(e,i)}else return""}parseSegmentValueMatcher(e){let n=e.data&&e.data.localizeMatcher&&e.data.localizeMatcher.params||{};return e.url.map(o=>{let s=o.path,l=o.localizedParamName;return(l&&n[l]?n[l](s):null)||`${this.parser.getEscapePrefix()}${s}`})}translateRoute(e){if(typeof e=="string"){let i=this.parser.translateRoute(e);return e.indexOf("/")?i:this.parser.addPrefixToUrl(i)}let n=[];return e.forEach((i,o)=>{if(typeof i=="string"){let s=this.parser.translateRoute(i);!o&&!i.indexOf("/")?n.push(this.parser.addPrefixToUrl(s)):n.push(s)}else n.push(i)}),n}_routeChanged(){return([e,n])=>{let i=this.parser.getLocationLang(e.url)||this.parser.defaultLang,o=this.parser.getLocationLang(n.url)||this.parser.defaultLang,s=this.lastExtras;o!==i&&this.latestUrl!==n.url&&(this.latestUrl=n.url,this.cancelCurrentNavigation(),this.parser.translateRoutes(o).subscribe(()=>{this.applyConfigToRouter(this.parser.routes),this.lastExtras=void 0,this.router.navigateByUrl(n.url,s),this.routerEvents.next(o)})),this.latestUrl=n.url}}cancelCurrentNavigation(){let e=this.router.getCurrentNavigation(),n=this.router.serializeUrl(e.extractedUrl);this.router.events.next(new cr(e.id,n,"")),this.router.navigationTransitions.transitions.next(bt($({},this.router.navigationTransitions.transitions.getValue()),{id:0}))}applyConfigToRouter(e){this.router.resetConfig(vf(e))}static{this.\u0275fac=function(n){return new(n||t)(Gt(Ba),Gt(Wc),Gt(Le),Gt(ur))}}static{this.\u0275prov=J({token:t,factory:t.\u0275fac})}}return t})(),qC=128,MT=(()=>{class t{constructor(e,n){this.localize=e,this._ref=n,this.value="",this.subscription=this.localize.routerEvents.subscribe(()=>{this.transform(this.lastKey)})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}transform(e){if(!e||e.length===0||!this.localize.parser.currentLang)return e;if(qc(e,this.lastKey)&&qc(this.lastLanguage,this.localize.parser.currentLang))return this.value;this.lastKey=e,this.lastLanguage=this.localize.parser.currentLang,this.value=this.localize.translateRoute(e),this.lastKey=e;let n=this._ref._view;return n&&n.state&qC?this.value:(setTimeout(()=>{this._ref.detectChanges()},0),this.value)}static{this.\u0275fac=function(n){return new(n||t)(on(yf,16),on(Lr,16))}}static{this.\u0275pipe=vm({name:"localize",type:t,pure:!1})}}return t})(),gf=class{constructor(){}shouldDetach(r){return!1}store(r,e){}shouldAttach(r){return!1}retrieve(r){return null}shouldReuseRoute(r,e){return r&&e?this.getKey(r)===this.getKey(e):!1}getKey(r){if(r.firstChild&&r.firstChild.routeConfig&&r.firstChild.routeConfig.path&&r.firstChild.routeConfig.path.indexOf("**")!==-1)return"WILDCARD";if(!r.data.localizeRouter&&(!r.parent||!r.parent.parent)&&!r.data.skipRouteLocalization)return"LANG";if(r.routeConfig.matcher){let e=`${this.getKey(r.parent)}/${r.routeConfig.matcher.name}`;return r.data.discriminantPathKey&&(e=`${e}-${r.data.discriminantPathKey}`),e}else if(r.data.localizeRouter){let e=`${this.getKey(r.parent)}/${r.data.localizeRouter.path}`;return r.data.discriminantPathKey&&(e=`${e}-${r.data.discriminantPathKey}`),e}else{let e=r.routeConfig.path;return r.parent&&(e=`${this.getKey(r.parent)}/${r.routeConfig.path}`),r.data.discriminantPathKey&&(e=`${e}-${r.data.discriminantPathKey}`),e}}},WC=(()=>{class t extends Le{constructor(){super(),this.platformId=w(Xs),this.compiler=w(rc),this.localize=w(Ba),this.childrenLoaders=new WeakMap,this.loadModuleFactoryOrRoutes=(i,o)=>GC(o.loadChildren()).pipe(mt(KC),he(s=>s instanceof Js||Array.isArray(s)?lt(s):Ce(this.compiler.compileModuleAsync(s))),mt(s=>{this.onLoadEndListener&&this.onLoadEndListener(o);let l,d;if(Array.isArray(s))d=this.localize.initChildRoutes([].concat(...s));else{l=s.create(i).injector;let m=l.get.bind(l);l.get=(y,S,A)=>{let N=m(y,S,A);return y===Vr?this.localize.initChildRoutes([].concat(...N)):N},d=l.get(Vr,[],{optional:!0,self:!0}).reduce((y,S)=>y.concat(S),[])}return{routes:d.map(Fv),injector:l}}));let n=nc(this.platformId)?this.navigationTransitions.configLoader.__proto__:this.navigationTransitions.configLoader;n.loadChildren=(i,o)=>{if(this.childrenLoaders.get(o))return this.childrenLoaders.get(o);if(o._loadedRoutes)return lt({routes:o._loadedRoutes,injector:o._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(o);let l=this.loadModuleFactoryOrRoutes(i,o).pipe(Ks(()=>{this.childrenLoaders.delete(o)})),d=new zs(l,()=>new it).pipe(Zp());return this.childrenLoaders.set(o,d),d}}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Fv(t){let r=t.children&&t.children.map(Fv),e=r?bt($({},t),{children:r}):$({},t);return!e.component&&!e.loadComponent&&(r||e.loadChildren)&&e.outlet&&e.outlet!==ut&&(e.component=Pa),e}function HC(t){return t&&typeof t=="object"&&"default"in t}function KC(t){return HC(t)?t.default:t}function GC(t){return Yi(t)?t:VC(t)?Ce(Promise.resolve(t)):lt(t)}var Av=(()=>{class t{constructor(e){this.injector=e}appInitializer(){return this.parser.load(this.routes).then(()=>{let n=this.injector.get(yf),i=this.injector.get(Le),o=this.injector.get(Wc);if(n.init(),o.initialNavigation)return new Promise(s=>{let l=i.navigationTransitions.afterPreactivation,d=!0;i.navigationTransitions.afterPreactivation=()=>(d&&(s(),d=!1,n.hooks._initializedSubject.next(!0),n.hooks._initializedSubject.complete()),l())});n.hooks._initializedSubject.next(!0),n.hooks._initializedSubject.complete()})}generateInitializer(e,n){return this.parser=e,this.routes=n.reduce((i,o)=>i.concat(o)),this.appInitializer}static{this.\u0275fac=function(n){return new(n||t)(Gt(wt))}}static{this.\u0275prov=J({token:t,factory:t.\u0275fac})}}return t})();function QC(t,r,e){let n=vf(e);return t.generateInitializer(r,n).bind(t)}function YC(t,r){return[{provide:Le,useClass:WC},{provide:FC,useFactory:ZC,deps:[[XC,new lm,new um]]},{provide:kv,useValue:r.useCachedLang},{provide:Lv,useValue:r.alwaysSetPrefix},{provide:Tv,useValue:r.cacheName},{provide:Iv,useValue:r.cacheMechanism},{provide:Nv,useValue:r.defaultLangFunction},{provide:Mv,useValue:r.cookieFormat},{provide:Pv,useValue:r.initialNavigation},Wc,r.parser||{provide:Ba,useClass:zC},{provide:mf,multi:!0,useValue:t},yf,Av,{provide:wm,multi:!0,useFactory:QC,deps:[Av,Ba,mf]},{provide:zc,useClass:gf}]}var XC=(()=>{class t{static forRoot(e,n={}){return{ngModule:t,providers:YC(e,n)}}static forChild(e){return{ngModule:t,providers:[{provide:mf,multi:!0,useValue:e}]}}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=Ht({type:t})}static{this.\u0275inj=Wt({imports:[Nm,pf,jm]})}}return t})();function ZC(t){if(t)throw new Error("LocalizeRouterModule.forRoot() called twice. Lazy loaded modules should use LocalizeRouterModule.forChild() instead.");return"guarded"}var FT=(()=>{class t{constructor(){this.activePortal=new it,this.portal$=this.activePortal.asObservable()}setPortal(e){this.activePortal.next(e)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Di(t){"@babel/helpers - typeof";return Di=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Di(t)}function Bv(t,r){if(Di(t)!="object"||!t)return t;var e=t[Symbol.toPrimitive];if(e!==void 0){var n=e.call(t,r||"default");if(Di(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function $v(t){var r=Bv(t,"string");return Di(r)=="symbol"?r:r+""}function jv(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$v(n.key),n)}}function ke(t,r,e){return r&&jv(t.prototype,r),e&&jv(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $a(t){return Array.isArray(t)?t.slice(0):[t]}function qr(t){return Array.isArray(t)}function Uv(t){return t!=null}function Hc(t,r){var e=0,n=-1;for(var i of t){n=n+1;var o=r(i,n);if(o)e=e+1;else break}return e}function Or(t,r){var e=r.length;if(e!==0){var n=t.length;t.length=n+r.length;for(var i=0;i<e;++i)t[n+i]=r[i]}}function zv(t){return t.filter(function(r,e,n){return n.indexOf(r)===e})}function Vv(t){for(var r="",e=new Uint8Array(t),n=e.byteLength,i=0;i<n;i++)r+=String.fromCharCode(e[i]);return btoa(r)}function qv(t,r){return U(this,null,function*(){var e=yield fetch("data:"+r+";base64,"+t),n=yield e.blob();return n})}function Wv(t){var r=Object.prototype.toString.call(t);return r==="[object Uint8Array]"&&(t=new Blob([t])),typeof t=="string"?Promise.resolve(t):t.text()}function Hv(t){return U(this,null,function*(){if(typeof t=="string")return t;var r=Object.prototype.toString.call(t);r==="[object Uint8Array]"&&(t=new Blob([t]));var e=yield t.arrayBuffer();return Vv(e)})}function Kv(t){return t.size}function Ai(t){for(var r="",e=0;e<t.length;e++){var n=t[e];if(n==="-")return parseInt(r,10);r+=n}throw new Error("malformatted revision: "+t)}function bo(t,r){var e=r?Ai(r._rev)+1:1;return e+"-"+t}function _f(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(r){Object.prototype.hasOwnProperty.call(t,r)&&t[r]!==null&&(typeof t[r]=="object"||typeof t[r]=="function")&&!Object.isFrozen(t[r])&&_f(t[r])}),t}function Gv(t){var r=t.split("."),e=r.length;return e===1?n=>n[t]:n=>{for(var i=n,o=0;o<e;++o){var s=r[o];if(i=i[s],typeof i>"u")return i}return i}}function Kc(t){var r={};for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))if(typeof t[e]=="object"){var n=Kc(t[e]);for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[e+"."+i]=n[i])}else r[e]=t[e];return r}function It(t){return Object.assign({},t)}function Qv(t){return Object.keys(t)[0]}function _o(t,r=!1){if(!t)return t;if(!r&&Array.isArray(t))return t.sort((n,i)=>typeof n=="string"&&typeof i=="string"?n.localeCompare(i):typeof n=="object"?1:-1).map(n=>_o(n,r));if(typeof t=="object"&&!Array.isArray(t)){var e={};return Object.keys(t).sort((n,i)=>n.localeCompare(i)).forEach(n=>{e[n]=_o(t[n],r)}),e}return t}function bf(t){if(!t||t===null||typeof t!="object")return t;if(Array.isArray(t)){for(var r=new Array(t.length),e=r.length;e--;)r[e]=bf(t[e]);return r}var n={};for(var i in t)n[i]=bf(t[i]);return n}var dr=bf;function Qe(t,r,e){return Object.defineProperty(t,r,{get:function(){return e}}),e}var Gc=1;function jn(){return{lwt:Gc}}function ln(){return""}function Yv(t){return Object.assign({},t,{_meta:void 0,_deleted:void 0,_rev:void 0})}function Xv(t,r,e){if(r.length!==e.length)return!1;for(var n=0,i=r.length;n<i;){var o=r[n],s=e[n];if(n++,o._rev!==s._rev||o[t]!==s[t])return!1}return!0}var rM=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});var nM=Object.freeze(["prototype","__proto__","constructor"]);var JC="[native code] }",iM=JC.length;var tS=Object.defineProperty,eS=(t,r,e)=>r in t?tS(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,wo=(t,r,e)=>(eS(t,typeof r!="symbol"?r+"":r,e),e),Un=class t{constructor(r,e){wo(this,"words"),wo(this,"sigBytes"),r=this.words=r||[],this.sigBytes=e===void 0?r.length*4:e}toString(r){return(r||rS).stringify(this)}concat(r){if(this.clamp(),this.sigBytes%4)for(let e=0;e<r.sigBytes;e++){let n=r.words[e>>>2]>>>24-e%4*8&255;this.words[this.sigBytes+e>>>2]|=n<<24-(this.sigBytes+e)%4*8}else for(let e=0;e<r.sigBytes;e+=4)this.words[this.sigBytes+e>>>2]=r.words[e>>>2];return this.sigBytes+=r.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new t([...this.words])}},rS={stringify(t){let r=[];for(let e=0;e<t.sigBytes;e++){let n=t.words[e>>>2]>>>24-e%4*8&255;r.push((n>>>4).toString(16),(n&15).toString(16))}return r.join("")}};var nS={parse(t){let r=t.length,e=[];for(let n=0;n<r;n++)e[n>>>2]|=(t.charCodeAt(n)&255)<<24-n%4*8;return new Un(e,r)}},iS={parse(t){return nS.parse(unescape(encodeURIComponent(t)))}},wf=class{constructor(){wo(this,"_data",new Un),wo(this,"_nDataBytes",0),wo(this,"_minBufferSize",0),wo(this,"blockSize",512/32)}reset(){this._data=new Un,this._nDataBytes=0}_append(r){typeof r=="string"&&(r=iS.parse(r)),this._data.concat(r),this._nDataBytes+=r.sigBytes}_doProcessBlock(r,e){}_process(r){let e,n=this._data.sigBytes/(this.blockSize*4);r?n=Math.ceil(n):n=Math.max((n|0)-this._minBufferSize,0);let i=n*this.blockSize,o=Math.min(i*4,this._data.sigBytes);if(i){for(let s=0;s<i;s+=this.blockSize)this._doProcessBlock(this._data.words,s);e=this._data.words.splice(0,i),this._data.sigBytes-=o}return new Un(e,o)}},xf=class extends wf{update(r){return this._append(r),this._process(),this}finalize(r){r&&this._append(r)}},oS=Object.defineProperty,aS=(t,r,e)=>r in t?oS(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,sS=(t,r,e)=>(aS(t,typeof r!="symbol"?r+"":r,e),e),Zv=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],cS=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],ki=[],Cf=class extends xf{constructor(){super(...arguments),sS(this,"_hash",new Un([...Zv]))}reset(){super.reset(),this._hash=new Un([...Zv])}_doProcessBlock(r,e){let n=this._hash.words,i=n[0],o=n[1],s=n[2],l=n[3],d=n[4],p=n[5],m=n[6],y=n[7];for(let S=0;S<64;S++){if(S<16)ki[S]=r[e+S]|0;else{let et=ki[S-15],Tt=(et<<25|et>>>7)^(et<<14|et>>>18)^et>>>3,ct=ki[S-2],Nt=(ct<<15|ct>>>17)^(ct<<13|ct>>>19)^ct>>>10;ki[S]=Tt+ki[S-7]+Nt+ki[S-16]}let A=d&p^~d&m,N=i&o^i&s^o&s,j=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),G=(d<<26|d>>>6)^(d<<21|d>>>11)^(d<<7|d>>>25),tt=y+G+A+cS[S]+ki[S],rt=j+N;y=m,m=p,p=d,d=l+tt|0,l=s,s=o,o=i,i=tt+rt|0}n[0]=n[0]+i|0,n[1]=n[1]+o|0,n[2]=n[2]+s|0,n[3]=n[3]+l|0,n[4]=n[4]+d|0,n[5]=n[5]+p|0,n[6]=n[6]+m|0,n[7]=n[7]+y|0}finalize(r){super.finalize(r);let e=this._nDataBytes*8,n=this._data.sigBytes*8;return this._data.words[n>>>5]|=128<<24-n%32,this._data.words[(n+64>>>9<<4)+14]=Math.floor(e/4294967296),this._data.words[(n+64>>>9<<4)+15]=e,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}};function Jv(t){return new Cf().finalize(t).toString()}function lS(t){return Promise.resolve(Jv(t))}function uS(t){return U(this,null,function*(){var r=new TextEncoder().encode(t),e=yield crypto.subtle.digest("SHA-256",r),n=Array.prototype.map.call(new Uint8Array(e),i=>("00"+i.toString(16)).slice(-2)).join("");return n})}var dS=typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof crypto.subtle.digest=="function",xo=dS?uS:lS;function ty(){return new Promise(t=>setTimeout(t,0))}function ey(t=0){return new Promise(r=>setTimeout(r,t))}var fS=Promise.resolve(!0),Wr=Promise.resolve(!1),ry=Promise.resolve(null),zn=Promise.resolve();function Co(t=1e4){return typeof requestIdleCallback=="function"?new Promise(r=>{requestIdleCallback(()=>r(),{timeout:t})}):ey(0)}var Sf=zn;function ny(t=void 0){return Sf=Sf.then(()=>Co(t)),Sf}function iy(t,r){return t.reduce((e,n)=>e.then(n),Promise.resolve(r))}var oy=/\./g;var ay="abcdefghijklmnopqrstuvwxyz";function Ii(t=10){for(var r="",e=0;e<t;e++)r+=ay.charAt(Math.floor(Math.random()*ay.length));return r}function Qc(t){t+="";var r=t.charAt(0).toUpperCase();return r+t.substr(1)}function Dr(t){for(;t.charAt(0)===".";)t=t.substr(1);for(;t.slice(-1)===".";)t=t.slice(0,-1);return t}function Ef(t){return!!(t.includes("/")||t.includes("\\"))}function Vn(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var e,n;if(Array.isArray(t)){if(e=t.length,e!==r.length)return!1;for(n=e;n--!==0;)if(!Vn(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();var i=Object.keys(t);if(e=i.length,e!==Object.keys(r).length)return!1;for(n=e;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[n]))return!1;for(n=e;n--!==0;){var o=i[n];if(!Vn(t[o],r[o]))return!1}return!0}return t!==t&&r!==r}var Of=t=>{var r=typeof t;return t!==null&&(r==="object"||r==="function")},Rf=new Set(["__proto__","prototype","constructor"]),hS=new Set("0123456789");function sy(t){var r=[],e="",n="start",i=!1;for(var o of t)switch(o){case"\\":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");i&&(e+=o),n="property",i=!i;break}case".":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="property";break}if(i){i=!1,e+=o;break}if(Rf.has(e))return[];r.push(e),e="",n="property";break}case"[":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="index";break}if(i){i=!1,e+=o;break}if(n==="property"){if(Rf.has(e))return[];r.push(e),e=""}n="index";break}case"]":{if(n==="index"){r.push(Number.parseInt(e,10)),e="",n="indexEnd";break}if(n==="indexEnd")throw new Error("Invalid character after an index")}default:{if(n==="index"&&!hS.has(o))throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");n==="start"&&(n="property"),i&&(i=!1,e+="\\"),e+=o}}switch(i&&(e+="\\"),n){case"property":{if(Rf.has(e))return[];r.push(e);break}case"index":throw new Error("Index was not closed");case"start":{r.push("");break}}return r}function cy(t,r){if(typeof r!="number"&&Array.isArray(t)){var e=Number.parseInt(r,10);return Number.isInteger(e)&&t[e]===t[r]}return!1}function pS(t,r){if(cy(t,r))throw new Error("Cannot use string index")}function Fe(t,r,e){if(Array.isArray(r)&&(r=r.join(".")),!r.includes(".")&&!r.includes("["))return t[r];if(!Of(t)||typeof r!="string")return e===void 0?t:e;var n=sy(r);if(n.length===0)return e;for(var i=0;i<n.length;i++){var o=n[i];if(cy(t,o)?t=i===n.length-1?void 0:null:t=t[o],t==null){if(i!==n.length-1)return e;break}}return t===void 0?e:t}function Df(t,r,e){if(Array.isArray(r)&&(r=r.join(".")),!Of(t)||typeof r!="string")return t;for(var n=t,i=sy(r),o=0;o<i.length;o++){var s=i[o];pS(t,s),o===i.length-1?t[s]=e:Of(t[s])||(t[s]=typeof i[o+1]=="number"?[]:{}),t=t[s]}return n}function qn(t,r){var e=t.get(r);if(typeof e>"u")throw new Error("missing value from map "+r);return e}function Ye(t,r,e,n){var i=t.get(r);return typeof i>"u"?(i=e(),t.set(r,i)):n&&n(i),i}function Ot(t){var r=t.split("-"),e="RxDB";return r.forEach(n=>{e+=Qc(n)}),e+="Plugin",new Error(`You are using a function which must be overwritten by a plugin.
        You should either prevent the usage of this function or add the plugin via:
            import { `+e+" } from 'rxdb/plugins/"+t+`';
            addRxPlugin(`+e+`);
        `)}var Af=0;function se(){var t=Date.now();t=t+.01,t<=Af&&(t=Af+.01);var r=parseFloat(t.toFixed(2));return Af=r,r}function Dt(t,r){if(!t)throw r||(r=""),new Error("ensureNotFalsy() is falsy: "+r);return t}var Yc={bufferSize:1,refCount:!0};var Ti="15.39.0";var Wn={},Xc="6da4936d1425ff3a5c44c02342c6daf791d266be3ae8479b8ec59e261df41b93";function Hn(t,r){return Hn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},Hn(t,r)}function kf(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,Hn(t,r)}function Zc(t){return Zc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zc(t)}function ly(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function If(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(If=function(){return!!t})()}function uy(t,r,e){if(If())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,r);var i=new(t.bind.apply(t,n));return e&&Hn(i,e.prototype),i}function ja(t){var r=typeof Map=="function"?new Map:void 0;return ja=function(n){if(n===null||!ly(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(n))return r.get(n);r.set(n,i)}function i(){return uy(n,arguments,Zc(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Hn(i,n)},ja(t)}var Pt={isDevMode(){return!1},deepFreezeWhenDevMode(t){return t},tunnelErrorMessage(t){return"RxDB Error-Code "+t+`.
        Error messages are not included in RxDB core to reduce build size.
        `}};function mS(t){var r="";return Object.keys(t).length===0||(r+=`Given parameters: {
`,r+=Object.keys(t).map(e=>{var n="[object Object]";try{e==="errors"?n=t[e].map(i=>JSON.stringify(i,Object.getOwnPropertyNames(i))):n=JSON.stringify(t[e],function(i,o){return o===void 0?null:o},2)}catch{}return e+":"+n}).join(`
`),r+="}"),r}function dy(t,r,e){return"RxError ("+r+`):
`+t+`
`+mS(e)}var gS=(function(t){function r(n,i,o={}){var s,l=dy(i,n,o);return s=t.call(this,l)||this,s.code=n,s.message=l,s.url=Tf(n),s.parameters=o,s.rxdb=!0,s}kf(r,t);var e=r.prototype;return e.toString=function(){return this.message},ke(r,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}])})(ja(Error)),vS=(function(t){function r(n,i,o={}){var s,l=dy(i,n,o);return s=t.call(this,l)||this,s.code=n,s.message=l,s.url=Tf(n),s.parameters=o,s.rxdb=!0,s}kf(r,t);var e=r.prototype;return e.toString=function(){return this.message},ke(r,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}])})(ja(TypeError));function Tf(t){return"https://rxdb.info/errors.html?console=errors#"+t}function fy(t){return`
 You can find out more about this error here: `+Tf(t)+" "}function L(t,r){return new gS(t,Pt.tunnelErrorMessage(t)+fy(t),r)}function pe(t,r){return new vS(t,Pt.tunnelErrorMessage(t)+fy(t),r)}function Jc(t){return t&&t.status===409?t:!1}var yS={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};function hy(t){return L("COL20",{name:yS[t.status],document:t.documentId,writeError:t})}var So={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],createRxState:[],postDestroyRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preStorageWrite:[],preMigrateDocument:[],postMigrateDocument:[],preDestroyRxDatabase:[],postRemoveRxDatabase:[],postCleanup:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function ne(t,r){So[t].length>0&&So[t].forEach(e=>e(r))}function Kn(t,r){return Promise.all(So[t].map(e=>e(r)))}function Be(t,r){var e=r;e=e.replace(oy,".properties."),e="properties."+e,e=Dr(e);var n=Fe(t,e);return n}function tl(t,r,e){if(typeof r.primaryKey=="string")return e;var n=Ua(r,e),i=e[t];if(i&&i!==n)throw L("DOC19",{args:{documentData:e,existingPrimary:i,newPrimary:n},schema:r});return e[t]=n,e}function ye(t){return typeof t=="string"?t:t.key}function Ua(t,r){if(typeof t.primaryKey=="string")return r[t.primaryKey];var e=t.primaryKey;return e.fields.map(n=>{var i=Fe(r,n);if(typeof i>"u")throw L("DOC18",{args:{field:n,documentData:r}});return i}).join(e.separator)}function py(t){var r=_o(t,!0);return r}function bS(t){return["_deleted",t]}function el(t){t=It(t);var r=ye(t.primaryKey);t.properties=It(t.properties),t.additionalProperties=!1,Object.prototype.hasOwnProperty.call(t,"keyCompression")||(t.keyCompression=!1),t.indexes=t.indexes?t.indexes.slice(0):[],t.required=t.required?t.required.slice(0):[],t.encrypted=t.encrypted?t.encrypted.slice(0):[],t.properties._rev={type:"string",minLength:1},t.properties._attachments={type:"object"},t.properties._deleted={type:"boolean"},t.properties._meta=_S,t.required=t.required?t.required.slice(0):[],t.required.push("_deleted"),t.required.push("_rev"),t.required.push("_meta"),t.required.push("_attachments");var e=Mf(t);Or(t.required,e),t.required=t.required.filter(o=>!o.includes(".")).filter((o,s,l)=>l.indexOf(o)===s),t.version=t.version||0;var n=t.indexes.map(o=>{var s=qr(o)?o.slice(0):[o];return s.includes(r)||s.push(r),s[0]!=="_deleted"&&s.unshift("_deleted"),s});n.length===0&&n.push(bS(r)),n.push(["_meta.lwt",r]),t.internalIndexes&&t.internalIndexes.map(o=>{n.push(o)});var i=new Set;return n.filter(o=>{var s=o.join(",");return i.has(s)?!1:(i.add(s),!0)}),t.indexes=n,t}var _S={type:"object",properties:{lwt:{type:"number",minimum:Gc,maximum:1e15,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function Mf(t){var r=Object.keys(t.properties).filter(n=>t.properties[n].final),e=ye(t.primaryKey);return r.push(e),typeof t.primaryKey!="string"&&t.primaryKey.fields.forEach(n=>r.push(n)),r}function my(t,r){for(var e=Object.keys(t.defaultValues),n=0;n<e.length;++n){var i=e[n];(!Object.prototype.hasOwnProperty.call(r,i)||typeof r[i]>"u")&&(r[i]=t.defaultValues[i])}return r}var Pf=(function(){function t(e,n){this.jsonSchema=e,this.hashFunction=n,this.indexes=wS(this.jsonSchema),this.primaryPath=ye(this.jsonSchema.primaryKey),this.finalFields=Mf(this.jsonSchema)}var r=t.prototype;return r.validateChange=function(n,i){this.finalFields.forEach(o=>{if(!Vn(n[o],i[o]))throw L("DOC9",{dataBefore:n,dataAfter:i,fieldName:o,schema:this.jsonSchema})})},r.getDocumentPrototype=function(){var n={},i=Be(this.jsonSchema,"");return Object.keys(i).forEach(o=>{var s=o;n.__defineGetter__(o,function(){if(!(!this.get||typeof this.get!="function")){var l=this.get(s);return l}}),Object.defineProperty(n,o+"$",{get:function(){return this.get$(s)},enumerable:!1,configurable:!1}),Object.defineProperty(n,o+"$$",{get:function(){return this.get$$(s)},enumerable:!1,configurable:!1}),Object.defineProperty(n,o+"_",{get:function(){return this.populate(s)},enumerable:!1,configurable:!1})}),Qe(this,"getDocumentPrototype",()=>n),n},r.getPrimaryOfDocumentData=function(n){return Ua(this.jsonSchema,n)},ke(t,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var e={};return Object.entries(this.jsonSchema.properties).filter(([,n])=>Object.prototype.hasOwnProperty.call(n,"default")).forEach(([n,i])=>e[n]=i.default),Qe(this,"defaultValues",e)}},{key:"hash",get:function(){return Qe(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}])})();function wS(t){return(t.indexes||[]).map(r=>qr(r)?r:[r])}function gy(t){var r=t.version?t.version:0,e=0;return new Array(r).fill(0).map(()=>e++)}function vy(t,r,e=!0){e&&ne("preCreateRxSchema",t);var n=el(t);n=py(n),Pt.deepFreezeWhenDevMode(n);var i=new Pf(n,r);return ne("createRxSchema",i),i}function yy(t){return t.documentData?t.documentData:t.previousDocumentData}function by(t){switch(t.operation){case"INSERT":return{operation:t.operation,id:t.documentId,doc:t.documentData,previous:null};case"UPDATE":return{operation:t.operation,id:t.documentId,doc:Pt.deepFreezeWhenDevMode(t.documentData),previous:t.previousDocumentData?t.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:t.operation,id:t.documentId,doc:null,previous:t.previousDocumentData}}}function rl(t){return t[t.length-1]}function xS(t){let r=typeof t;return t!==null&&(r==="object"||r==="function")}function Nf(t,r,e){if(Array.isArray(r)&&(r=r.join(".")),!xS(t)||typeof r!="string")return e===void 0?t:e;let n=r.split(".");if(n.length===0)return e;for(let i=0;i<n.length;i++){let o=n[i];if(CS(t,o)?t=i===n.length-1?void 0:null:t=t[o],t==null){if(i!==n.length-1)return e;break}}return t===void 0?e:t}function CS(t,r){if(typeof r!="number"&&Array.isArray(t)){let e=Number.parseInt(r,10);return Number.isInteger(e)&&t[e]===t[r]}return!1}var Lf=t=>!!t.queryParams.limit,_y=t=>t.queryParams.limit===1,wy=t=>!!(t.queryParams.skip&&t.queryParams.skip>0),xy=t=>t.changeEvent.operation==="DELETE",Cy=t=>t.changeEvent.operation==="INSERT",Sy=t=>t.changeEvent.operation==="UPDATE",Ey=t=>Lf(t)&&t.previousResults.length>=t.queryParams.limit,Ry=t=>{let r=t.queryParams.sortFields,e=t.changeEvent.previous,n=t.changeEvent.doc;if(!n)return!1;if(!e)return!0;for(let i=0;i<r.length;i++){let o=r[i],s=Nf(e,o),l=Nf(n,o);if(s!==l)return!0}return!1},Oy=t=>{let r=t.changeEvent.id;if(t.keyDocumentMap)return t.keyDocumentMap.has(r);{let e=t.queryParams.primaryKey,n=t.previousResults;for(let i=0;i<n.length;i++)if(n[i][e]===r)return!0;return!1}},Dy=t=>{let r=t.previousResults[0];return!!(r&&r[t.queryParams.primaryKey]===t.changeEvent.id)},Ay=t=>{let r=rl(t.previousResults);return!!(r&&r[t.queryParams.primaryKey]===t.changeEvent.id)},ky=t=>{let r=t.changeEvent.previous;if(!r)return!1;let e=t.previousResults[0];return e?e[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(r,e)<0:!1},Iy=t=>{let r=t.changeEvent.previous;if(!r)return!1;let e=rl(t.previousResults);return e?e[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(r,e)>0:!1},Ty=t=>{let r=t.changeEvent.doc;if(!r)return!1;let e=t.previousResults[0];return e?e[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(r,e)<0:!1},My=t=>{let r=t.changeEvent.doc;if(!r)return!1;let e=rl(t.previousResults);return e?e[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(r,e)>0:!1},Py=t=>{let r=t.changeEvent.previous;return r?t.queryParams.queryMatcher(r):!1},Ny=t=>{let r=t.changeEvent.doc;return r?t.queryParams.queryMatcher(r):!1},Ly=t=>t.previousResults.length===0;var Fy={0:Cy,1:Sy,2:xy,3:Lf,4:_y,5:wy,6:Ly,7:Ey,8:Dy,9:Ay,10:Ry,11:Oy,12:ky,13:Iy,14:Ty,15:My,16:Py,17:Ny};function By(t,r,e,n){var i=t.length,o=i-1,s=0;if(i===0)return t.push(r),0;for(var l;n<=o;)s=n+(o-n>>1),l=t[s],e(l,r)<=0?n=s+1:o=s-1;return e(l,r)<=0&&s++,t.splice(s,0,r),s}var $y=t=>{},nl=t=>{t.previousResults.unshift(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},il=t=>{t.previousResults.push(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},ol=t=>{let r=t.previousResults.shift();t.keyDocumentMap&&r&&t.keyDocumentMap.delete(r[t.queryParams.primaryKey])},al=t=>{let r=t.previousResults.pop();t.keyDocumentMap&&r&&t.keyDocumentMap.delete(r[t.queryParams.primaryKey])},jy=t=>{ol(t),il(t)},Uy=t=>{al(t),nl(t)},zy=t=>{ol(t),nl(t)},Vy=t=>{al(t),il(t)},Ff=t=>{t.keyDocumentMap&&t.keyDocumentMap.delete(t.changeEvent.id);let r=t.queryParams.primaryKey,e=t.previousResults;for(let n=0;n<e.length;n++)if(e[n][r]===t.changeEvent.id){e.splice(n,1);break}},qy=t=>{let r=t.changeEvent.doc,e=t.queryParams.primaryKey,n=t.previousResults;for(let i=0;i<n.length;i++)if(n[i][e]===t.changeEvent.id){n[i]=r,t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,r);break}},Wy=t=>{let r={_id:"wrongHuman"+new Date().getTime()};t.previousResults.length=0,t.previousResults.push(r),t.keyDocumentMap&&(t.keyDocumentMap.clear(),t.keyDocumentMap.set(r._id,r))},Bf=t=>{let r=t.changeEvent.id,e=t.changeEvent.doc;if(t.keyDocumentMap){if(t.keyDocumentMap.has(r))return;t.keyDocumentMap.set(r,e)}else if(t.previousResults.find(i=>i[t.queryParams.primaryKey]===r))return;By(t.previousResults,e,t.queryParams.sortComparator,0)},Hy=t=>{Ff(t),Bf(t)},Ky=t=>{throw new Error("Action runFullQueryAgain must be implemented by yourself")},Gy=t=>{throw new Error("Action unknownAction should never be called")};var Qy=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],Yy={doNothing:$y,insertFirst:nl,insertLast:il,removeFirstItem:ol,removeLastItem:al,removeFirstInsertLast:jy,removeLastInsertFirst:Uy,removeFirstInsertFirst:zy,removeLastInsertLast:Vy,removeExisting:Ff,replaceExisting:qy,alwaysWrong:Wy,insertAtSortPosition:Bf,removeExistingAndInsertAtSortPosition:Hy,runFullQueryAgain:Ky,unknownAction:Gy};function sl(t){return t.charCodeAt(0)-40}function Xy(t){return t?"1":"0"}function SS(t=6){let r="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=e.length;for(let i=0;i<t;i++)r+=e.charAt(Math.floor(Math.random()*n));return r}var gP=SS(4);function $f(t,r){let e=[];for(let n=0,i=t.length;n<i;n+=r)e.push(t.substring(n,n+r));return e}function Zy(t){let r=new Map,n=2+parseInt(t.charAt(0)+t.charAt(1),10)*2,i=t.substring(2,n),o=$f(i,2);for(let j=0;j<o.length;j++){let G=o[j],tt=G.charAt(0),rt=sl(G.charAt(1));r.set(tt,rt)}let s=t.substring(n,t.length-3),l=$f(s,4);for(let j=0;j<l.length;j++){let G=l[j],tt=G.charAt(0),rt=G.charAt(1),et=G.charAt(2),Tt=sl(G.charAt(3));if(!r.has(rt))throw new Error("missing node with id "+rt);if(!r.has(et))throw new Error("missing node with id "+et);let ct=r.get(rt),Nt=r.get(et),At={l:Tt,0:ct,1:Nt};r.set(tt,At)}let d=t.slice(-3),p=d.charAt(0),m=d.charAt(1),y=sl(d.charAt(2)),S=r.get(p),A=r.get(m);return{l:y,0:S,1:A}}function Jy(t,r,e){let n=t,i=t.l;for(;;){let o=r[i](e),s=Xy(o);if(n=n[s],typeof n=="number"||typeof n=="string")return n;i=n.l}}var ES="14a1b,c+d2e5f0g/h.i4j*k-l)m(n6oeh6pnm6qen6ril6snh6tin6ubo9vce9wmh9xns9yne9zmi9{cm9|ad9}cp9~aq9\x7Fae9\xA1bf9\xA2bq9\xA3cg9\xA4ck9\xA5cn9\xA6nd9\xA7np9\xA8nq9\xA9nf9\xAAng9\xABnm9\xACnk9\xADmr9\xAEms9\xAFmt9\xB0mj9\xB1mk9\xB2ml9\xB3mn9\xB4mc8\xB5\xB3{8\xB6\xAF}8\xB7\xB0\xA48\xB8\xB3\xA78\xB9mn8\xBA\xB3\xAB8\xBB\xB3m8\xBCm\xB44\xBDz\xB24\xBE\xB3w4\xBFz\xB54\xC0\xAF\xB64\xC1\xB0\xB74\xC2\xB3\xBA4\xC3\xB3\xB84\xC4m\xB94\xC5v\xA47\xC6yn7\xC7\xC0\xC17\xC8~\x7F7\xC9\xA5\xA47\xCA\xC3\xC47\xCB\xA8n7\xCC\xBA\xB97\xCD\xAD\xB07\xCE\xAEm7\xCF\xAF\xB07\xD0\xB1m7\xD1\xB3m7\xD2\xBCm5\xD3\xC4m5\xD4\xB9m5\xD5\xBD\xB05\xD6\xBEm5\xD7\xBF\xB05\xD8\xC7\xCF5\xD9\xC2m5\xDA\xCA\xD15\xDB\xB1m5\xDC\xBAm5\xDD\xCC\xD15\xDE\xD5\xCD2\xDF|\x7F2\xE0\xA1u2\xE1\xA3\xC52\xE2\xD6\xCE2\xE3\xA6\xC62\xE4\xA9x2\xE5\xAA\xC62\xE6\xD7\xD82\xE7|\xC82\xE8\xA1\xA22\xE9\xA3\xC92\xEA\xA4\xA52\xEB\xD9\xDA2\xEC\xA6\xCB2\xED\xA9n2\xEE\xAAn2\xEF\xDB\xD02\xF0\xDC\xDD2\xF1\xACn2\xF2\xD2\xD3/\xF3an/\xF4bn/\xF5cn/\xF6\xDE\xE2/\xF7\xDF\xE3/\xF8\xE0\xE4/\xF9\xE1\xE5/\xFA\xE6\xEB/\xFB\xE7\xEC/\xFC\xE8\xED/\xFD\xE9\xEE/\xFE\xCD\xCE/\xFF\xCF\xD1/\u0100\xF2\xD4,\u0101cn,\u0102\xF6\xEF,\u0103\xA4\xF1,\u0104\xFA\xF0,\u0105\xEA\xF1,\u0106\xFE\xD0,\u0107\xFF\xD1,\u0108ac0\u0109bc0\u010A\xF3\xF50\u010B\xF4\u01010\u010C\xDF\xE10\u010D\xE0\xA40\u010E\xE7\xE90\u010F\xE8\xEA0\u0110\xF7\xF90\u0111\xF8\u01030\u0112\xFB\xFD0\u0113\xFC\u01050\u0114m\xD2-\u0115m\u0100-\u0116\xDE\xE6-\u0117\u010C\u010E-\u0118\u010D\u010F-\u0119\u0102\u0104-\u011A\u0110\u0112-\u011B\u0111\u0113-\u011C\xB2\xBB-\u011D\xCD\xCF-\u011E\u0106\u0107-\u011F\xB2\xB3-\u0120\u0114\u01083\u0121\u0115\u010A3\u0122\u0116\u01173\u0123\u0119\u011A3\u0124\u0122\u011D(\u0125\u011C\u011F(\u0126\u0123\u011E(\u0127\u0120\u0121+\u0128\u0109\u010B+\u0129\u0124\u0126+\u012A\u0118\u011B+\u012B\u0127\u01281\u012C\u0129\u012A1\u012D\u012C\u012B*\u012E\u0125m*\u012D\u012E.",jf;function RS(){return jf||(jf=Zy(ES)),jf}var tb=t=>Jy(RS(),Fy,t);function eb(t){let r=tb(t);return Qy[r]}function rb(t,r,e,n,i){let o=Yy[t];return o({queryParams:r,changeEvent:e,previousResults:n,keyDocumentMap:i}),n}var Mi="\uFFFF",Pi=Number.MIN_SAFE_INTEGER;function nb(t,r){var e=r.selector,n=t.indexes?t.indexes.slice(0):[];r.index&&(n=[r.index]);var i=!!r.sort.find(m=>Object.values(m)[0]==="desc"),o=new Set;Object.keys(e).forEach(m=>{var y=Be(t,m);y&&y.type==="boolean"&&Object.prototype.hasOwnProperty.call(e[m],"$eq")&&o.add(m)});var s=r.sort.map(m=>Object.keys(m)[0]),l=s.filter(m=>!o.has(m)).join(","),d=-1,p;if(n.forEach(m=>{var y=!0,S=!0,A=m.map(rt=>{var et=e[rt],Tt=et?Object.keys(et):[],ct={};if(!et||!Tt.length){var Nt=S?Pi:Mi;ct={startKey:Nt,endKey:y?Mi:Pi,inclusiveStart:!0,inclusiveEnd:!0}}else Tt.forEach(At=>{if(cl.has(At)){var Vt=et[At],ve=kS(At,Vt);ct=Object.assign(ct,ve)}});return typeof ct.startKey>"u"&&(ct.startKey=Pi),typeof ct.endKey>"u"&&(ct.endKey=Mi),typeof ct.inclusiveStart>"u"&&(ct.inclusiveStart=!0),typeof ct.inclusiveEnd>"u"&&(ct.inclusiveEnd=!0),S&&!ct.inclusiveStart&&(S=!1),y&&!ct.inclusiveEnd&&(y=!1),ct}),N=A.map(rt=>rt.startKey),j=A.map(rt=>rt.endKey),G={index:m,startKeys:N,endKeys:j,inclusiveEnd:y,inclusiveStart:S,sortSatisfiedByIndex:!i&&l===m.filter(rt=>!o.has(rt)).join(","),selectorSatisfiedByIndex:AS(m,r.selector,N,j)},tt=IS(t,r,G);(tt>=d||r.index)&&(d=tt,p=G)}),!p)throw L("SNH",{query:r});return p}var cl=new Set(["$eq","$gt","$gte","$lt","$lte"]),OS=new Set(["$eq","$gt","$gte"]),DS=new Set(["$eq","$lt","$lte"]);function AS(t,r,e,n){var i=Object.entries(r),o=i.find(([At,Vt])=>{if(!t.includes(At))return!0;var ve=Object.entries(Vt).find(([je,pr])=>!cl.has(je));return ve});if(o||r.$and||r.$or)return!1;var s=[],l=new Set;for(var[d,p]of Object.entries(r)){if(!t.includes(d))return!1;var m=Object.keys(p).filter(At=>OS.has(At));if(m.length>1)return!1;var y=m[0];if(y&&l.add(d),y!=="$eq"){if(s.length>0)return!1;s.push(y)}}var S=[],A=new Set;for(var[N,j]of Object.entries(r)){if(!t.includes(N))return!1;var G=Object.keys(j).filter(At=>DS.has(At));if(G.length>1)return!1;var tt=G[0];if(tt&&A.add(N),tt!=="$eq"){if(S.length>0)return!1;S.push(tt)}}var rt=0;for(var et of t){for(var Tt of[l,A]){if(!Tt.has(et)&&Tt.size>0)return!1;Tt.delete(et)}var ct=e[rt],Nt=n[rt];if(ct!==Nt&&l.size>0&&A.size>0)return!1;rt++}return!0}function kS(t,r){switch(t){case"$eq":return{startKey:r,endKey:r,inclusiveEnd:!0,inclusiveStart:!0};case"$lte":return{endKey:r,inclusiveEnd:!0};case"$gte":return{startKey:r,inclusiveStart:!0};case"$lt":return{endKey:r,inclusiveEnd:!1};case"$gt":return{startKey:r,inclusiveStart:!1};default:throw new Error("SNH")}}function IS(t,r,e){var n=0,i=m=>{m>0&&(n=n+m)},o=10,s=Hc(e.startKeys,m=>m!==Pi&&m!==Mi);i(s*o);var l=Hc(e.startKeys,m=>m!==Mi&&m!==Pi);i(l*o);var d=Hc(e.startKeys,(m,y)=>m===e.endKeys[y]);i(d*o*1.5);var p=e.sortSatisfiedByIndex?5:0;return i(p),n}var me=class extends Error{},fl=2147483647,hl=-2147483648,Wf=Number.MAX_SAFE_INTEGER,Hf=Number.MIN_SAFE_INTEGER,un=Symbol("missing"),ab=Object.freeze(new Error("mingo: cycle detected while processing object/array")),TS="[object Object]",MS=/^\[object ([a-zA-Z0-9]+)\]$/,za=t=>{let r=BS(t),e=0,n=r.length;for(;n;)e=(e<<5)-e^r.charCodeAt(--n);return e>>>0},sb=new Set(["null","undefined","boolean","number","string","date","regexp"]),PS={null:0,undefined:0,number:1,string:2,object:3,array:4,boolean:5,date:6,regexp:7,function:8},jt=(t,r)=>{t===un&&(t=void 0),r===un&&(r=void 0);let[e,n]=[t,r].map(i=>PS[Gn(i).toLowerCase()]);return e!==n?e-n:e===1||e===2||e===6?t<r?-1:t>r?1:0:be(t,r)?0:t<r?-1:t>r?1:0};function z(t,r){if(!t)throw new me(r)}var Gn=t=>MS.exec(Object.prototype.toString.call(t))[1],Va=t=>typeof t=="boolean",St=t=>typeof t=="string";var ft=t=>!isNaN(t)&&typeof t=="number";var st=Array.isArray,dt=t=>{if(!t)return!1;let r=Object.getPrototypeOf(t);return(r===Object.prototype||r===null)&&TS===Object.prototype.toString.call(t)},qa=t=>t===Object(t),Qn=t=>t instanceof Date,Oo=t=>t instanceof RegExp,Wa=t=>typeof t=="function",X=t=>t==null,Hr=(t,r)=>t.includes(r),pl=(t,r)=>!Hr(t,r),Ie=(t,r=!0)=>!!t||r&&t==="",Xe=t=>X(t)||St(t)&&!t||t instanceof Array&&t.length===0||dt(t)&&Object.keys(t).length===0,ib=t=>t===un,Kr=t=>t instanceof Array?t:[t],Qt=(t,r)=>!!t&&Object.prototype.hasOwnProperty.call(t,r),Kf=t=>typeof ArrayBuffer<"u"&&ArrayBuffer.isView(t),NS=[Qn,Oo,Kf],zf=(t,r)=>{if(X(t))return t;if(r.has(t))throw ab;let e=t.constructor;if(NS.some(n=>n(t)))return new e(t);try{if(r.add(t),st(t))return t.map(n=>zf(n,r));if(dt(t)){let n={};for(let i in t)n[i]=zf(t[i],r);return n}}finally{r.delete(t)}return t},Do=t=>zf(t,new Set),LS=(t,r)=>dt(t)&&dt(r)||st(t)&&st(r);function ul(t,r,e){if(e=e||{flatten:!1},ib(t)||X(t))return r;if(ib(r)||X(r))return t;if(!LS(t,r)){if(e.skipValidation)return r||t;throw Error("mismatched types. must both be array or object")}if(e.skipValidation=!0,st(t)){let n=t,i=r;if(e.flatten){let o=0,s=0;for(;o<n.length&&s<i.length;)n[o]=ul(n[o++],i[s++],e);for(;s<i.length;)n.push(r[s++])}else fr(n,i)}else for(let n in r)t[n]=ul(t[n],r[n],e);return t}function Vf(t,r=za){let e=new Map;return t.forEach((n,i)=>{let o=ml(n,r);e.has(o)?e.get(o).some(s=>be(t[s],n))||e.get(o).push(i):e.set(o,[i])}),e}function dn(t,r=za){if(t.some(l=>l.length==0))return[];if(t.length===1)return Array.from(t);let e=cb(t.map((l,d)=>[d,l.length]),l=>l[1]),n=t[e[0][0]],i=Vf(n,r),o=new Map,s=new Array;return i.forEach((l,d)=>{let p=l.map(A=>n[A]),m=p.map(A=>0),y=p.map(A=>[e[0][0],0]),S=!1;for(let A=1;A<t.length;A++){let[N,j]=e[A],G=t[N];if(o.has(A)||o.set(A,Vf(G)),o.get(A).has(d)){let tt=o.get(A).get(d).map(rt=>G[rt]);S=p.map((rt,et)=>tt.some((Tt,ct)=>{let Nt=m[et];return be(rt,Tt)&&(m[et]++,N<y[et][0]&&(y[et]=[N,o.get(A).get(d)[ct]])),Nt<m[et]})).some(Boolean)}if(!S)return}S&&fr(s,m.map((A,N)=>A===t.length-1?[p[N],y[N]]:un).filter(A=>A!==un))}),s.sort((l,d)=>{let[p,[m,y]]=l,[S,[A,N]]=d,j=jt(m,A);return j!==0?j:jt(y,N)}).map(l=>l[0])}function Gf(t,r=0){let e=new Array;function n(i,o){for(let s=0,l=i.length;s<l;s++)st(i[s])&&(o>0||o<0)?n(i[s],Math.max(-1,o-1)):e.push(i[s])}return n(t,r),e}var FS=t=>{let[r,e]=[Object.getPrototypeOf(t),Object.getOwnPropertyNames(t)],n=r;for(;!e.length&&r!==Object.prototype&&r!==Array.prototype;)n=r,e=Object.getOwnPropertyNames(r),r=Object.getPrototypeOf(r);let i={};return e.forEach(o=>i[o]=t[o]),[i,n]};function be(t,r){if(t===r||Object.is(t,r))return!0;let e=!!t&&t.constructor||t;if(t===null||r===null||t===void 0||r===void 0||e!==r.constructor||e===Function)return!1;if(e===Array||e===Object){let o=Object.keys(t),s=Object.keys(r);if(o.length!==s.length||new Set([...o,...s]).size!=o.length)return!1;for(let l of o)if(!be(t[l],r[l]))return!1;return!0}let n=Object.getPrototypeOf(t);return(Kf(t)||n!==Object.prototype&&n!==Array.prototype&&Object.prototype.hasOwnProperty.call(n,"toString"))&&t.toString()===r.toString()}function Ha(t,r=za){let e=t.map(n=>un);return Vf(t,r).forEach((n,i)=>{n.forEach(o=>e[o]=t[o])}),e.filter(n=>n!==un)}var ll=(t,r)=>{if(t===null)return"null";if(t===void 0)return"undefined";let e=t.constructor;switch(e){case RegExp:case Number:case Boolean:case Function:case Symbol:return t.toString();case String:return JSON.stringify(t);case Date:return t.toISOString()}if(Kf(t))return e.name+"["+t.toString()+"]";if(r.has(t))throw ab;try{if(r.add(t),st(t))return"["+t.map(s=>ll(s,r)).join(",")+"]";if(e===Object)return"{"+Object.keys(t).sort().map(s=>s+":"+ll(t[s],r)).join(",")+"}";let n=Object.getPrototypeOf(t);if(n!==Object.prototype&&n!==Array.prototype&&Object.prototype.hasOwnProperty.call(n,"toString"))return e.name+"("+JSON.stringify(t.toString())+")";let[i,o]=FS(t);return e.name+ll(i,r)}finally{r.delete(t)}},BS=t=>ll(t,new Set);function ml(t,r){return r=r||za,X(t)?null:r(t).toString()}function cb(t,r,e=jt){if(Xe(t))return t;let n=new Array,i=new Array;for(let o=0;o<t.length;o++){let s=t[o],l=r(s,o);X(l)?i.push(s):n.push([l,s])}return n.sort((o,s)=>e(o[0],s[0])),fr(i,n.map(o=>o[1]))}function gl(t,r,e=za){if(t.length<1)return new Map;let n=new Map,i=new Map;for(let o=0;o<t.length;o++){let s=t[o],l=r(s,o),d=ml(l,e);if(d===null)i.has(null)?i.get(null).push(s):i.set(null,[s]);else{let p=n.has(d)?n.get(d).find(m=>be(m,l)):null;X(p)?(i.set(l,[s]),n.has(d)?n.get(d).push(l):n.set(d,[l])):i.get(p).push(s)}}return i}var Uf=5e4;function fr(t,...r){return t instanceof Array?r.reduce((e,n)=>{let i=Math.ceil(n.length/Uf),o=0;for(;i-- >0;)Array.prototype.push.apply(e,n.slice(o,o+Uf)),o+=Uf;return e},t):r.filter(qa).reduce((e,n)=>(Object.assign(e,n),e),t)}function qf(t,r){return qa(t)?t[r]:void 0}function $S(t,r){if(r<1)return t;for(;r--&&t.length===1;)t=t[0];return t}function Te(t,r,e){let n=0;function i(s,l){let d=s;for(let p=0;p<l.length;p++){let m=l[p];if(/^\d+$/.exec(m)===null&&d instanceof Array){if(p===0&&n>0)break;n+=1;let S=l.slice(p);d=d.reduce((A,N)=>{let j=i(N,S);return j!==void 0&&A.push(j),A},[]);break}else d=qf(d,m);if(d===void 0)break}return d}let o=sb.has(Gn(t).toLowerCase())?t:i(t,r.split("."));return o instanceof Array&&e?.unwrapArray?$S(o,n):o}function Eo(t,r,e){let n=r.split("."),i=n[0],o=n.slice(1).join("."),s=/^\d+$/.exec(i)!==null,l=n.length>1,d,p;if(t instanceof Array)if(s)d=qf(t,Number(i)),l&&(d=Eo(d,o,e)),d=[d];else{d=[];for(let m of t)p=Eo(m,r,e),e?.preserveMissing?(p===void 0&&(p=un),d.push(p)):p!==void 0&&d.push(p)}else{if(p=qf(t,i),l&&(p=Eo(p,o,e)),p===void 0)return;d=e?.preserveKeys?$({},t):{},d[i]=p}return d}function dl(t){if(t instanceof Array)for(let r=t.length-1;r>=0;r--)t[r]===un?t.splice(r,1):dl(t[r]);else if(dt(t))for(let r in t)Qt(t,r)&&dl(t[r])}var ob=/^\d+$/;function Ro(t,r,e,n){let i=r.split("."),o=i[0],s=i.slice(1).join(".");if(i.length===1)(dt(t)||st(t)&&ob.test(o))&&e(t,o);else{n?.buildGraph&&X(t[o])&&(t[o]={});let l=t[o];if(!l)return;let d=!!(i.length>1&&ob.test(i[1]));l instanceof Array&&n?.descendArray&&!d?l.forEach(p=>Ro(p,s,e,n)):Ro(l,s,e,n)}}function vl(t,r,e){Ro(t,r,(n,i)=>{n[i]=Wa(e)?e(n[i]):e},{buildGraph:!0})}function Ka(t,r,e){Ro(t,r,(n,i)=>{if(n instanceof Array){if(/^\d+$/.test(i))n.splice(parseInt(i),1);else if(e&&e.descendArray)for(let o of n)dt(o)&&delete o[i]}else dt(n)&&delete n[i]},e)}var jS=/^\$[a-zA-Z0-9_]+$/;function Ze(t){return jS.test(t)}function yl(t){if(sb.has(Gn(t).toLowerCase()))return Oo(t)?{$regex:t}:{$eq:t};if(qa(t)){if(!Object.keys(t).some(Ze))return{$eq:t};if(Qt(t,"$regex")){let e=$({},t);return e.$regex=new RegExp(t.$regex,t.$options),delete e.$options,e}}return t}var Li=(t=>(t.CLONE_ALL="CLONE_ALL",t.CLONE_INPUT="CLONE_INPUT",t.CLONE_OUTPUT="CLONE_OUTPUT",t.CLONE_OFF="CLONE_OFF",t))(Li||{}),Xt=class t{constructor(r,e,n,i=Date.now()){this._opts=r,this._root=e,this._local=n,this.timestamp=i,this.update(e,n)}static init(r,e,n){return r instanceof t?new t(r._opts,X(r.root)?e:r.root,Object.assign({},r.local,n)):new t(r,e,n)}update(r,e){return this._root=r,this._local=e&&Object.assign({},e,{variables:Object.assign({},this._local?.variables,e?.variables)}),this}getOptions(){return Object.freeze(bt($({},this._opts),{context:Ao.from(this._opts.context)}))}get root(){return this._root}get local(){return this._local}get idKey(){return this._opts.idKey}get collation(){return this._opts?.collation}get processingMode(){return this._opts?.processingMode||"CLONE_OFF"}get useStrictMode(){return this._opts?.useStrictMode}get scriptEnabled(){return this._opts?.scriptEnabled}get useGlobalContext(){return this._opts?.useGlobalContext}get hashFunction(){return this._opts?.hashFunction}get collectionResolver(){return this._opts?.collectionResolver}get jsonSchemaValidator(){return this._opts?.jsonSchemaValidator}get variables(){return this._opts?.variables}get context(){return this._opts?.context}};function fn(t){return t instanceof Xt?t.getOptions():Object.freeze(bt($({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,useGlobalContext:!0,processingMode:"CLONE_OFF"},t),{context:t?.context?Ao.from(t?.context):Ao.init({})}))}var kr=(t=>(t.ACCUMULATOR="accumulator",t.EXPRESSION="expression",t.PIPELINE="pipeline",t.PROJECTION="projection",t.QUERY="query",t.WINDOW="window",t))(kr||{}),Ao=class t{constructor(r){this.operators={accumulator:{},expression:{},pipeline:{},projection:{},query:{},window:{}};for(let[e,n]of Object.entries(r))this.addOperators(e,n)}static init(r={}){return new t(r)}static from(r){return new t(r.operators)}addOperators(r,e){for(let[n,i]of Object.entries(e))this.getOperator(r,n)||(this.operators[r][n]=i);return this}addAccumulatorOps(r){return this.addOperators("accumulator",r)}addExpressionOps(r){return this.addOperators("expression",r)}addQueryOps(r){return this.addOperators("query",r)}addPipelineOps(r){return this.addOperators("pipeline",r)}addProjectionOps(r){return this.addOperators("projection",r)}addWindowOps(r){return this.addOperators("window",r)}getOperator(r,e){return r in this.operators&&this.operators[r][e]||null}},Ni=Ao.init();function Xf(t,r){for(let[e,n]of Object.entries(r)){z(Wa(n)&&Ze(e),`'${e}' is not a valid operator`);let i=Ar(t,e,null);z(!i||n===i,`${e} already exists for '${t}' operators. Cannot change operator function once registered.`)}switch(t){case"accumulator":Ni.addAccumulatorOps(r);break;case"expression":Ni.addExpressionOps(r);break;case"pipeline":Ni.addPipelineOps(r);break;case"projection":Ni.addProjectionOps(r);break;case"query":Ni.addQueryOps(r);break;case"window":Ni.addWindowOps(r);break}}function Ar(t,r,e){let{context:n,useGlobalContext:i}=e||{},o=n?n.getOperator(t,r):null;return!o&&i?Ni.getOperator(t,r):o}var lb={$$ROOT(t,r,e){return e.root},$$CURRENT(t,r,e){return t},$$REMOVE(t,r,e){},$$NOW(t,r,e){return new Date(e.timestamp)}},Qf={$$KEEP(t,r,e){return t},$$PRUNE(t,r,e){},$$DESCEND(t,r,e){if(!Qt(r,"$cond"))return t;let n;for(let[i,o]of Object.entries(t))if(qa(o)){if(o instanceof Array){let s=[];for(let l of o)dt(l)&&(l=Yf(l,r,e.update(l))),X(l)||s.push(l);n=s}else n=Yf(o,r,e.update(o));X(n)?delete t[i]:t[i]=n}return t}};function F(t,r,e,n){let i=Xt.init(n,t);if(e=e||"",Ze(e)){let o=Ar("expression",e,n);if(o)return o(t,r,i);let s=Ar("accumulator",e,n);if(s)return t instanceof Array||(t=F(t,r,null,i),r=null),z(t instanceof Array,`'${e}' target must be an array.`),s(t,r,i.update(null,i.local));throw new me(`operator '${e}' is not registered`)}if(St(r)&&r.length>0&&r[0]==="$"){if(Qt(Qf,r))return r;let o=i.root,s=r.split(".");if(Qt(lb,s[0]))o=lb[s[0]](t,null,i),r=r.slice(s[0].length+1);else if(s[0].slice(0,2)==="$$"){o=Object.assign({},i.variables,{this:t},i.local?.variables);let l=s[0].slice(2);z(Qt(o,l),`Use of undefined variable: ${l}`),r=r.slice(2)}else r=r.slice(1);return r===""?o:Te(o,r)}if(st(r))return r.map(o=>F(t,o,null,i));if(dt(r)){let o={};for(let[s,l]of Object.entries(r))if(o[s]=F(t,l,s,i),["expression","accumulator"].some(d=>!!Ar(d,s,n)))return z(Object.keys(r).length===1,"Invalid aggregation expression '"+JSON.stringify(r)+"'"),o[s];return o}return r}function Yf(t,r,e){let n=F(t,r,null,e);return Qt(Qf,n)?Qf[n](t,r,e):n}function Je(t){return t instanceof Ga?t:new Ga(t)}function bl(...t){let r=0;return Je(()=>{for(;r<t.length;){let e=t[r].next();if(!e.done)return e;r++}return{done:!0}})}function US(t){return!!t&&typeof t=="object"&&t?.next instanceof Function}function zS(t,r){let e=t.slice(r+1);t.splice(r),Array.prototype.push.apply(t,e)}var Zf=new Error;function VS(t,r,e){let n=!1,i=-1,o=0;return function(s){try{t:for(;!n;){let l=t();i++;let d=-1,p=r.length,m=!1;for(;++d<p;){let y=r[d];switch(y.action){case 0:l=y.func(l,i);break;case 1:if(!y.func(l,i))continue t;break;case 2:--y.count,y.count||(m=!0);break;case 3:--y.count,y.count||zS(r,d);continue t;default:break t}}if(n=m,s)e[o++]=l;else return{value:l,done:!1}}}catch(l){if(l!==Zf)throw l}return n=!0,{done:n}}}var Ga=class{constructor(r){this.iteratees=[],this.yieldedValues=[],this.isDone=!1;let e;if(r instanceof Function&&(r={next:r}),US(r)){let n=r;e=()=>{let i=n.next();if(i.done)throw Zf;return i.value}}else if(r instanceof Array){let n=r,i=n.length,o=0;e=()=>{if(o<i)return n[o++];throw Zf}}else if(!(r instanceof Function))throw new me("Lazy must be initialized with an array, generator, or function.");this.getNext=VS(e,this.iteratees,this.yieldedValues)}push(r,e){return typeof e=="function"?this.iteratees.push({action:r,func:e}):typeof e=="number"&&this.iteratees.push({action:r,count:e}),this}next(){return this.getNext()}map(r){return this.push(0,r)}filter(r){return this.push(1,r)}take(r){return r>0?this.push(2,r):this}drop(r){return r>0?this.push(3,r):this}transform(r){let e=this,n;return Je(()=>(n||(n=Je(r(e.value()))),n.next()))}value(){return this.isDone||(this.isDone=this.getNext(!0).done),this.yieldedValues}each(r){for(;;){let e=this.next();if(e.done)break;if(r(e.value)===!1)return!1}return!0}reduce(r,e){let n=this.next();for(e===void 0&&!n.done&&(e=n.value,n=this.next());!n.done;)e=r(e,n.value),n=this.next();return e}size(){return this.reduce((r,e)=>++r,0)}[Symbol.iterator](){return this}};var Gr=class{constructor(r,e){this.pipeline=r,this.options=fn(e)}stream(r){let e=Je(r),n=this.options.processingMode;(n==Li.CLONE_ALL||n==Li.CLONE_INPUT)&&e.map(Do);let i=new Array;if(!Xe(this.pipeline))for(let o of this.pipeline){let s=Object.keys(o),l=s[0],d=Ar(kr.PIPELINE,l,this.options);z(s.length===1&&!!d,`invalid pipeline operator ${l}`),i.push(l),e=d(e,o[l],this.options)}return(n==Li.CLONE_OUTPUT||n==Li.CLONE_ALL&&dn([["$group","$unwind"],i]).length)&&e.map(Do),e}run(r){return this.stream(r).value()}};var _l=class{constructor(r,e,n,i){this.source=r,this.predicate=e,this.projection=n,this.options=i,this.operators=[],this.result=null,this.buffer=[]}fetch(){return this.result?this.result:(dt(this.projection)&&this.operators.push({$project:this.projection}),this.result=Je(this.source).filter(this.predicate),this.operators.length>0&&(this.result=new Gr(this.operators,this.options).stream(this.result)),this.result)}fetchAll(){let r=Je([...this.buffer]);return this.buffer=[],bl(r,this.fetch())}all(){return this.fetchAll().value()}count(){return this.all().length}skip(r){return this.operators.push({$skip:r}),this}limit(r){return this.operators.push({$limit:r}),this}sort(r){return this.operators.push({$sort:r}),this}collation(r){return this.options=bt($({},this.options),{collation:r}),this}next(){if(this.buffer.length>0)return this.buffer.pop();let r=this.fetch().next();if(!r.done)return r.value}hasNext(){if(this.buffer.length>0)return!0;let r=this.fetch().next();return r.done?!1:(this.buffer.push(r.value),!0)}map(r){return this.all().map(r)}forEach(r){this.all().forEach(r)}[Symbol.iterator](){return this.fetchAll()}};var ie=class{constructor(r,e){this.condition=r,this.options=fn(e),this.compiled=[],this.compile()}compile(){z(dt(this.condition),`query criteria must be an object: ${JSON.stringify(this.condition)}`);let r={};for(let[e,n]of Object.entries(this.condition)){if(e==="$where")Object.assign(r,{field:e,expr:n});else if(Hr(["$and","$or","$nor","$expr","$jsonSchema"],e))this.processOperator(e,e,n);else{z(!Ze(e),`unknown top level operator: ${e}`);for(let[i,o]of Object.entries(yl(n)))this.processOperator(e,i,o)}r.field&&this.processOperator(r.field,r.field,r.expr)}}processOperator(r,e,n){let i=Ar(kr.QUERY,e,this.options);if(!i)throw new me(`unknown query operator ${e}`);let o=i(r,n,this.options);this.compiled.push(o)}test(r){for(let e=0,n=this.compiled.length;e<n;e++)if(!this.compiled[e](r))return!1;return!0}find(r,e){return new _l(r,n=>this.test(n),e||{},this.options)}remove(r){return r.reduce((e,n)=>(this.test(n)||e.push(n),e),[])}};var ko=1e3*60*60*24,ub={week:ko*7,day:ko,hour:1e3*60*60,minute:1e3*60,second:1e3,millisecond:1};var TL={week:ko*7,day:ko,hour:ko/24,minute:6e4,second:1e3,millisecond:1};var xl=(t,r,e)=>{if(Xe(r)||!dt(r))return t;let n=jt,i=e.collation;return dt(i)&&St(i.locale)&&(n=JS(i)),t.transform(o=>{let s=Object.keys(r);for(let l of s.reverse()){let d=gl(o,m=>Te(m,l),e.hashFunction),p=Array.from(d.keys()).sort(n);r[l]===-1&&p.reverse(),o=[],p.reduce((m,y)=>fr(m,d.get(y)),o)}return o})},ZS={1:"base",2:"accent",3:"variant"};function JS(t){let r={sensitivity:ZS[t.strength||3],caseFirst:t.caseFirst==="off"?"false":t.caseFirst||"false",numeric:t.numericOrdering||!1,ignorePunctuation:t.alternate==="shifted"};(t.caseLevel||!1)===!0&&(r.sensitivity==="base"&&(r.sensitivity="case"),r.sensitivity==="accent"&&(r.sensitivity="variant"));let e=new Intl.Collator(t.locale,r);return(n,i)=>{if(!St(n)||!St(i))return jt(n,i);let o=e.compare(n,i);return o<0?-1:o>0?1:0}}function Et(t){let r=(e,n,i)=>{let o={unwrapArray:!0},s=Math.max(1,e.split(".").length-1);return l=>{let d=Te(l,e,o);return t(d,n,bt($({},i),{depth:s}))}};return r.op="query",r}function $e(t){return(r,e,n)=>{let i=F(r,e,null,n);return t(...i)}}function Qa(t,r,e){if(be(t,r)||X(t)&&X(r))return!0;if(t instanceof Array){let n=be.bind(null,r);return t.some(n)||Gf(t,e?.depth).some(n)}return!1}function Cl(t,r,e){return!Qa(t,r,e)}function th(t,r,e){return X(t)?r.some(n=>n===null):dn([Kr(t),r],e?.hashFunction).length>0}function Sl(t,r,e){return!th(t,r,e)}function El(t,r,e){return Al(t,r,(n,i)=>jt(n,i)<0)}function Rl(t,r,e){return Al(t,r,(n,i)=>jt(n,i)<=0)}function Ol(t,r,e){return Al(t,r,(n,i)=>jt(n,i)>0)}function Dl(t,r,e){return Al(t,r,(n,i)=>jt(n,i)>=0)}function gb(t,r,e){return Kr(t).some(n=>r.length===2&&n%r[0]===r[1])}function vb(t,r,e){let n=Kr(t),i=o=>St(o)&&Ie(r.exec(o),e?.useStrictMode);return n.some(i)||Gf(n,1).some(i)}function yb(t,r,e){return(r===!1||r===0)&&t===void 0||(r===!0||r===1)&&t!==void 0}function bb(t,r,e){if(!st(t)||!st(r)||!t.length||!r.length)return!1;let n=!0;for(let i of r){if(!n)break;dt(i)&&Hr(Object.keys(i),"$elemMatch")?n=eh(t,i.$elemMatch,e):i instanceof RegExp?n=t.some(o=>typeof o=="string"&&i.test(o)):n=t.some(o=>be(i,o))}return n}function _b(t,r,e){return Array.isArray(t)&&t.length===r}function nE(t){return Ze(t)&&["$and","$or","$nor"].indexOf(t)===-1}function eh(t,r,e){if(st(t)&&!Xe(t)){let n=s=>s,i=r;Object.keys(r).every(nE)&&(i={temp:r},n=s=>({temp:s}));let o=new ie(i,e);for(let s=0,l=t.length;s<l;s++)if(o.test(n(t[s])))return!0}return!1}var fb=t=>t===null,hb=t=>ft(t)&&t>=hl&&t<=fl&&t.toString().indexOf(".")===-1,pb=t=>ft(t)&&t>=Hf&&t<=Wf&&t.toString().indexOf(".")===-1,iE={array:st,bool:Va,boolean:Va,date:Qn,decimal:ft,double:ft,int:hb,long:pb,number:ft,null:fb,object:dt,regex:Oo,regexp:Oo,string:St,undefined:X,function:t=>{throw new me("unsupported type key `function`.")},1:ft,2:St,3:dt,4:st,6:X,8:Va,9:Qn,10:fb,11:Oo,16:hb,18:pb,19:ft};function mb(t,r,e){let n=iE[r];return n?n(t):!1}function wb(t,r,e){return Array.isArray(r)?r.findIndex(n=>mb(t,n,e))>=0:mb(t,r,e)}function Al(t,r,e){return Kr(t).some(n=>Gn(n)===Gn(r)&&e(n,r))}var V$=$e(Sl);var Io=(t,r)=>(e,n,i)=>{z(st(n),`${t}: expression must be an array.`);let o=F(e,n,null,i);return o.some(X)?null:(z(o.every(ft),`${t}: expression must evalue to array of numbers.`),r(o))};var $j=Io("$bitAnd",t=>t.reduce((r,e)=>r&e,-1));var Wj=Io("$bitOr",t=>t.reduce((r,e)=>r|e,0));var Gj=Io("$bitXor",t=>t.reduce((r,e)=>r^e,0));var rh={};Us(rh,{$and:()=>oE,$not:()=>aE,$or:()=>sE});var oE=(t,r,e)=>{let n=F(t,r,null,e);return Ie(n,e.useStrictMode)&&n.every(i=>Ie(i,e.useStrictMode))};var aE=(t,r,e)=>{let n=Kr(r);if(n.length==0)return!1;if(n.length==1)return!F(t,n[0],null,e);throw"Expression $not takes exactly 1 argument"};var sE=(t,r,e)=>{let n=F(t,r,null,e),i=e.useStrictMode;return Ie(n,i)&&n.some(o=>Ie(o,i))};var nh={};Us(nh,{$cmp:()=>cE,$eq:()=>lE,$gt:()=>uE,$gte:()=>dE,$lt:()=>fE,$lte:()=>hE,$ne:()=>pE});var cE=(t,r,e)=>{let n=F(t,r,null,e);return n[0]>n[1]?1:n[0]<n[1]?-1:0};var lE=$e(Qa);var uE=$e(Ol);var dE=$e(Dl);var fE=$e(El);var hE=$e(Rl);var pE=$e(Cl);var xb=(t,r)=>{let e={};return t.split("").forEach((n,i)=>e[n]=r*(i+1)),e},oz=bt($($({},xb("ABCDEFGHIKLM",1)),xb("NOPQRSTUVWXY",-1)),{Z:0});var Rb={undefined:null,null:null,NaN:NaN,Infinity:new Error,"-Infinity":new Error};function Ut(t,r=Rb){let e=Object.assign({},Rb,r),n=new Set(Object.keys(e));return(i,o,s)=>{let l=F(i,o,null,s);if(n.has(`${l}`)){let d=e[`${l}`];if(d instanceof Error)throw new me(`cannot apply $${t.name} to -inf, value must in (-inf,inf)`);return d}return t(l)}}var hW=Ut(Math.acos,{Infinity:1/0,0:new Error});var gW=Ut(Math.acosh,{Infinity:1/0,0:new Error});var bW=Ut(Math.asin);var xW=Ut(Math.asinh,{Infinity:1/0,"-Infinity":-1/0});var EW=Ut(Math.atan);var IW=Ut(Math.atanh,{1:1/0,"-1":-1/0});var PW=Ut(Math.cos);var FW=Ut(Math.cosh,{"-Infinity":1/0,Infinity:1/0});var yE=Math.PI/180,jW=Ut(t=>t*yE,{Infinity:1/0,"-Infinity":1/0});var bE=180/Math.PI,VW=Ut(t=>t*bE,{Infinity:1/0,"-Infinity":-1/0});var HW=Ut(Math.sin);var QW=Ut(Math.sinh,{"-Infinity":-1/0,Infinity:1/0});var ZW=Ut(Math.tan);var oh=(t,r,e)=>{if(Xe(r))return t;let n=Object.keys(r),i=!1;Db(r,e);let o=e.idKey;if(Hr(n,o)){let l=r[o];(l===0||l===!1)&&(n=n.filter(pl.bind(null,[o])),i=n.length==0)}else n.push(o);let s=Xt.init(e);return t.map(l=>ih(l,r,s.update(l),n,i))};function ih(t,r,e,n,i){let o={},s=!1,l=!1,d=[];i&&d.push(e.idKey);for(let p of n){let m,y=r[p];if(p!==e.idKey&&Hr([0,!1],y)&&(l=!0),p===e.idKey&&Xe(y))m=t[p];else if(St(y))m=F(t,y,p,e);else if(!Hr([1,!0],y))if(y instanceof Array)m=y.map(A=>{let N=F(t,A,null,e);return X(N)?null:N});else if(dt(y)){let A=y,N=Object.keys(y),j=N.length==1?N[0]:"",G=Ar(kr.PROJECTION,j,e);if(G)j==="$slice"?Kr(A[j]).every(ft)?(m=G(t,A[j],p,e),s=!0):m=F(t,A,p,e):m=G(t,A[j],p,e);else if(Ze(j))m=F(t,A[j],j,e);else if(Qt(t,p)){Db(A,e);let tt=t[p];tt instanceof Array?m=tt.map(rt=>ih(rt,A,e,N,!1)):(tt=dt(tt)?tt:t,m=ih(tt,A,e,N,!1))}else m=F(t,y,null,e)}else{d.push(p);continue}let S=Eo(t,p,{preserveMissing:!0});S!==void 0&&ul(o,S,{flatten:!0}),pl([0,1,!1,!0],y)&&(m===void 0?Ka(o,p,{descendArray:!0}):vl(o,p,m))}if(dl(o),(s||l||i)&&(o=fr({},t,o),d.length>0))for(let p of d)Ka(o,p,{descendArray:!0});return o}function Db(t,r){let e=[!1,!1];for(let[n,i]of Object.entries(t)){if(n===r?.idKey)return;i===0||i===!1?e[0]=!0:(i===1||i===!0)&&(e[1]=!0),z(!(e[0]&&e[1]),"Projection cannot have a mix of inclusion and exclusion.")}}var ah=(t,r,e)=>{z(st(r),"Invalid expression: $and expects value to be an Array.");let n=r.map(i=>new ie(i,e));return i=>n.every(o=>o.test(i))};var Ya=(t,r,e)=>{z(st(r),"Invalid expression. $or expects value to be an Array");let n=r.map(i=>new ie(i,e));return i=>n.some(o=>o.test(i))};var sh=(t,r,e)=>{z(st(r),"Invalid expression. $nor expects value to be an array.");let n=Ya("$or",r,e);return i=>!n(i)};var ch=(t,r,e)=>{let n={};n[t]=yl(r);let i=new ie(n,e);return o=>!i.test(o)};var kl=Et(Qa);var Il=Et(Ol);var Tl=Et(Dl);var Ml=Et(th);var Pl=Et(El);var Nl=Et(Rl);var Ll=Et(Cl);var Fl=Et(Sl);function xE(t,r,e){return n=>F(n,r,null,e)}function CE(t,r,e){if(!e?.jsonSchemaValidator)throw new me("Missing option 'jsonSchemaValidator'. Configure to use '$jsonSchema' operator.");let n=e?.jsonSchemaValidator(r);return i=>n(i)}var lh=Et(gb);var uh=Et(vb);function SE(t,r,e){z(e.scriptEnabled,"$where operator requires 'scriptEnabled' option to be true");let n=r;return z(Wa(n),"$where only accepts a Function object"),i=>Ie(n.call(i),e?.useStrictMode)}var EE=Et(bb);var dh=Et(eh);var fh=Et(_b);var hh=Et(yb);var ph=Et(wb);var Ab=!1;function kb(t){return Ab||(Xf(kr.PIPELINE,{$sort:xl,$project:oh}),Xf(kr.QUERY,{$and:ah,$eq:kl,$elemMatch:dh,$exists:hh,$gt:Il,$gte:Tl,$in:Ml,$lt:Pl,$lte:Nl,$ne:Ll,$nin:Fl,$mod:lh,$nor:sh,$not:ch,$or:Ya,$regex:uh,$size:fh,$type:ph}),Ab=!0),new ie(t)}function Xa(t,r){var e=ye(t.primaryKey);r=It(r);var n=dr(r);if(typeof n.skip!="number"&&(n.skip=0),n.selector?(n.selector=n.selector,Object.entries(n.selector).forEach(([p,m])=>{(typeof m!="object"||m===null)&&(n.selector[p]={$eq:m})})):n.selector={},n.index){var i=$a(n.index);i.includes(e)||i.push(e),n.index=i}if(n.sort){var d=n.sort.find(p=>Qv(p)===e);d||(n.sort=n.sort.slice(0),n.sort.push({[e]:"asc"}))}else if(n.index)n.sort=n.index.map(p=>({[p]:"asc"}));else{if(t.indexes){var o=new Set;Object.entries(n.selector).forEach(([p,m])=>{var y=!1;typeof m=="object"&&m!==null?y=!!Object.keys(m).find(S=>cl.has(S)):y=!0,y&&o.add(p)});var s=-1,l;t.indexes.forEach(p=>{var m=qr(p)?p:[p],y=m.findIndex(S=>!o.has(S));y>0&&y>s&&(s=y,l=m)}),l&&(n.sort=l.map(p=>({[p]:"asc"})))}n.sort||(n.sort=[{[e]:"asc"}])}return n}function Bl(t,r){if(!r.sort)throw L("SNH",{query:r});var e=[];r.sort.forEach(i=>{var o=Object.keys(i)[0],s=Object.values(i)[0];e.push({key:o,direction:s,getValueFn:Gv(o)})});var n=(i,o)=>{for(var s=0;s<e.length;++s){var l=e[s],d=l.getValueFn(i),p=l.getValueFn(o);if(d!==p){var m=l.direction==="asc"?jt(d,p):jt(p,d);return m}}};return n}function To(t,r){if(!r.sort)throw L("SNH",{query:r});var e=kb(r.selector),n=i=>e.test(i);return n}function Yn(t,r){return U(this,null,function*(){var e=yield t.exec();if(!e)return null;if(Array.isArray(e))return Promise.all(e.map(i=>r(i)));if(e instanceof Map)return Promise.all([...e.values()].map(i=>r(i)));var n=yield r(e);return n})}function RE(t,r){return!r.sort||r.sort.length===0?[t]:r.sort.map(e=>Object.keys(e)[0])}var OE=new WeakMap;function DE(t){return Ye(OE,t,()=>{var r=t.collection,e=Xa(r.storageInstance.schema,dr(t.mangoQuery)),n=r.schema.primaryPath,i=Bl(r.schema.jsonSchema,e),o=(p,m)=>{var y={docA:p,docB:m,rxQuery:t};return i(y.docA,y.docB)},s=To(r.schema.jsonSchema,e),l=p=>{var m={doc:p,rxQuery:t};return s(m.doc)},d={primaryKey:t.collection.schema.primaryPath,skip:e.skip,limit:e.limit,sortFields:RE(n,e),sortComparator:o,queryMatcher:l};return d})}function Ib(t,r){if(!t.collection.database.eventReduce)return{runFullQueryAgain:!0};var e=DE(t),n=Dt(t._result).docsData.slice(0),i=Dt(t._result).docsDataMap,o=!1,s=r.map(d=>by(d)).filter(Uv),l=s.find(d=>{var p={queryParams:e,changeEvent:d,previousResults:n,keyDocumentMap:i},m=eb(p);if(m==="runFullQueryAgain")return!0;if(m!=="doNothing")return o=!0,rb(m,e,d,n,i),!1});return l?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:o,newResults:n}}var AE=(function(){function t(){this._map=new Map}var r=t.prototype;return r.getByQuery=function(n){var i=n.toString();return Ye(this._map,i,()=>n)},t})();function Mb(){return new AE}function Tb(t,r){r.uncached=!0;var e=r.toString();t._map.delete(e)}function kE(t){return t.refCount$.observers.length}var IE=100,TE=30*1e3,ME=(t,r)=>(e,n)=>{if(!(n._map.size<t)){var i=se()-r,o=[],s=Array.from(n._map.values());for(var l of s)if(!(kE(l)>0)){if(l._lastEnsureEqual===0&&l._creationTime<i){Tb(n,l);continue}o.push(l)}var d=o.length-t;if(!(d<=0)){var p=o.sort((y,S)=>y._lastEnsureEqual-S._lastEnsureEqual),m=p.slice(0,d);m.forEach(y=>Tb(n,y))}}},gh=ME(IE,TE),mh=new WeakSet;function Pb(t){mh.has(t)||(mh.add(t),ty().then(()=>ny(200)).then(()=>{t.destroyed||t.cacheReplacementPolicy(t,t._queryCache),mh.delete(t)}))}var Lb=(function(){function t(e,n,i){this.cacheItemByDocId=new Map,this.tasks=new Set,this.registry=typeof FinalizationRegistry=="function"?new FinalizationRegistry(o=>{var s=o.docId,l=this.cacheItemByDocId.get(s);l&&(l[0].delete(o.revisionHeight),l[0].size===0&&this.cacheItemByDocId.delete(s))}):void 0,this.primaryPath=e,this.changes$=n,this.documentCreator=i,n.subscribe(o=>{this.tasks.add(()=>{for(var s=this.cacheItemByDocId,l=0;l<o.length;l++){var d=o[l],p=s.get(d.documentId);if(p){var m=d.documentData;m||(m=d.previousDocumentData),p[1]=m}}}),this.tasks.size<=1&&Co().then(()=>{this.processTasks()})})}var r=t.prototype;return r.processTasks=function(){if(this.tasks.size!==0){var n=Array.from(this.tasks);n.forEach(i=>i()),this.tasks.clear()}},r.getLatestDocumentData=function(n){this.processTasks();var i=qn(this.cacheItemByDocId,n);return i[1]},r.getLatestDocumentDataIfExists=function(n){this.processTasks();var i=this.cacheItemByDocId.get(n);if(i)return i[1]},ke(t,[{key:"getCachedRxDocuments",get:function(){var e=Nb(this);return Qe(this,"getCachedRxDocuments",e)}},{key:"getCachedRxDocument",get:function(){var e=Nb(this);return Qe(this,"getCachedRxDocument",n=>e([n])[0])}}])})();function Nb(t){var r=t.primaryPath,e=t.cacheItemByDocId,n=t.registry,i=Pt.deepFreezeWhenDevMode,o=t.documentCreator,s=l=>{for(var d=new Array(l.length),p=[],m=0;m<l.length;m++){var y=l[m],S=y[r],A=Ai(y._rev),N=void 0,j=void 0,G=e.get(S);G?(N=G[0],j=N.get(A)):(N=new Map,G=[N,y],e.set(S,G));var tt=j?j.deref():void 0;tt||(y=i(y),tt=o(y),N.set(A,NE(tt)),n&&p.push(tt)),d[m]=tt}return p.length>0&&n&&(t.tasks.add(()=>{for(var rt=0;rt<p.length;rt++){var et=p[rt];n.register(et,{docId:et.primary,revisionHeight:Ai(et.revision)})}}),t.tasks.size<=1&&Co().then(()=>{t.processTasks()})),d};return s}function $l(t,r){var e=t.getCachedRxDocuments;return e(r)}var PE=typeof WeakRef=="function",NE=PE?LE:FE;function LE(t){return new WeakRef(t)}function FE(t){return{deref(){return t}}}var vh=(function(){function t(e,n,i){this.time=se(),this.query=e,this.count=i,this.documents=$l(this.query.collection._docCache,n)}var r=t.prototype;return r.getValue=function(n){var i=this.query.op;if(i==="count")return this.count;if(i==="findOne"){var o=this.documents.length===0?null:this.documents[0];if(!o&&n)throw L("QU10",{collection:this.query.collection.name,query:this.query.mangoQuery,op:i});return o}else return i==="findByIds"?this.docsMap:this.documents.slice(0)},ke(t,[{key:"docsData",get:function(){return Qe(this,"docsData",this.documents.map(e=>e._data))}},{key:"docsDataMap",get:function(){var e=new Map;return this.documents.forEach(n=>{e.set(n.primary,n._data)}),Qe(this,"docsDataMap",e)}},{key:"docsMap",get:function(){for(var e=new Map,n=this.documents,i=0;i<n.length;i++){var o=n[i];e.set(o.primary,o)}return Qe(this,"docsMap",e)}}])})();var BE=0,$E=function(){return++BE},yh=(function(){function t(e,n,i,o={}){this.id=$E(),this._execOverDatabaseCount=0,this._creationTime=se(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new fe(null),this._result=null,this._latestChangeEvent=-1,this._lastExecStart=0,this._lastExecEnd=0,this._ensureEqualQueue=Wr,this.op=e,this.mangoQuery=n,this.collection=i,this.other=o,n||(this.mangoQuery=Za()),this.isFindOneByIdQuery=VE(this.collection.schema.primaryPath,n)}var r=t.prototype;return r._setResultData=function(n){if(typeof n>"u")throw L("QU18",{database:this.collection.database.name,collection:this.collection.name});if(typeof n=="number"){this._result=new vh(this,[],n);return}else n instanceof Map&&(n=Array.from(n.values()));var i=new vh(this,n,n.length);this._result=i},r._execOverDatabase=function(){return U(this,null,function*(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this._lastExecStart=se(),this.op==="count"){var n=this.getPreparedQuery(),i=yield this.collection.storageInstance.count(n);if(i.mode==="slow"&&!this.collection.database.allowSlowCount)throw L("QU14",{collection:this.collection,queryObj:this.mangoQuery});return i.count}if(this.op==="findByIds"){var o=Dt(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,s=new Map,l=[];if(o.forEach(m=>{var y=this.collection._docCache.getLatestDocumentDataIfExists(m);if(y){if(!y._deleted){var S=this.collection._docCache.getCachedRxDocument(y);s.set(m,S)}}else l.push(m)}),l.length>0){var d=yield this.collection.storageInstance.findDocumentsById(l,!1);d.forEach(m=>{var y=this.collection._docCache.getCachedRxDocument(m);s.set(y.primary,y)})}return s}var p=zE(this);return p.then(m=>(this._lastExecEnd=se(),m))})},r.exec=function(n){return U(this,null,function*(){if(n&&this.op!=="findOne")throw L("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});yield Fb(this);var i=Dt(this._result);return i.getValue(n)})},r.toString=function(){var n=_o({op:this.op,query:this.mangoQuery,other:this.other},!0),i=JSON.stringify(n);return this.toString=()=>i,i},r.getPreparedQuery=function(){var n={rxQuery:this,mangoQuery:Xa(this.collection.schema.jsonSchema,this.mangoQuery)};n.mangoQuery.selector._deleted={$eq:!1},n.mangoQuery.index&&n.mangoQuery.index.unshift("_deleted"),ne("prePrepareQuery",n);var i=Ja(this.collection.schema.jsonSchema,n.mangoQuery);return this.getPreparedQuery=()=>i,i},r.doesDocumentDataMatch=function(n){return n._deleted?!1:this.queryMatcher(n)},r.remove=function(){return this.exec().then(n=>Array.isArray(n)?Promise.all(n.map(i=>i.remove())):n.remove())},r.incrementalRemove=function(){return Yn(this.asRxQuery,n=>n.incrementalRemove())},r.update=function(n){throw Ot("update")},r.patch=function(n){return Yn(this.asRxQuery,i=>i.patch(n))},r.incrementalPatch=function(n){return Yn(this.asRxQuery,i=>i.incrementalPatch(n))},r.modify=function(n){return Yn(this.asRxQuery,i=>i.modify(n))},r.incrementalModify=function(n){return Yn(this.asRxQuery,i=>i.incrementalModify(n))},r.where=function(n){throw Ot("query-builder")},r.sort=function(n){throw Ot("query-builder")},r.skip=function(n){throw Ot("query-builder")},r.limit=function(n){throw Ot("query-builder")},ke(t,[{key:"$",get:function(){if(!this._$){var e=this.collection.$.pipe(gt(n=>!n.isLocal),Ve(null),he(()=>Fb(this)),mt(()=>this._result),sa(Yc),Dn((n,i)=>!!(n&&n.time===Dt(i).time)),gt(n=>!!n),mt(n=>Dt(n).getValue()));this._$=qs(e,this.refCount$.pipe(gt(()=>!1)))}return this._$}},{key:"$$",get:function(){var e=this.collection.database.getReactivityFactory();return e.fromObservable(this.$,void 0,this.collection.database)}},{key:"queryMatcher",get:function(){var e=this.collection.schema.jsonSchema,n=Xa(this.collection.schema.jsonSchema,this.mangoQuery);return Qe(this,"queryMatcher",To(e,n))}},{key:"asRxQuery",get:function(){return this}}])})();function Za(){return{selector:{}}}function jE(t){return t.collection._queryCache.getByQuery(t)}function Mo(t,r,e,n){ne("preCreateRxQuery",{op:t,queryObj:r,collection:e,other:n});var i=new yh(t,r,e,n);return i=jE(i),Pb(e),i}function Bb(t){var r=t.asRxQuery.collection._changeEventBuffer.getCounter();return t._latestChangeEvent>=r}function Fb(t){return U(this,null,function*(){return t.collection.awaitBeforeReads.size>0&&(yield Promise.all(Array.from(t.collection.awaitBeforeReads).map(r=>r()))),t.collection.database.destroyed||Bb(t)?!1:(t._ensureEqualQueue=t._ensureEqualQueue.then(()=>UE(t)),t._ensureEqualQueue)})}function UE(t){if(t._lastEnsureEqual=se(),t.collection.database.destroyed||Bb(t))return Wr;var r=!1,e=!1;if(t._latestChangeEvent===-1&&(e=!0),!e){var n=t.asRxQuery.collection._changeEventBuffer.getFrom(t._latestChangeEvent+1);if(n===null)e=!0;else{t._latestChangeEvent=t.asRxQuery.collection._changeEventBuffer.getCounter();var i=t.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(n);if(t.op==="count"){var o=Dt(t._result).count,s=o;i.forEach(d=>{var p=d.previousDocumentData&&t.doesDocumentDataMatch(d.previousDocumentData),m=t.doesDocumentDataMatch(d.documentData);!p&&m&&s++,p&&!m&&s--}),s!==o&&(r=!0,t._setResultData(s))}else{var l=Ib(t,i);l.runFullQueryAgain?e=!0:l.changed&&(r=!0,t._setResultData(l.newResults))}}}return e?t._execOverDatabase().then(d=>(t._latestChangeEvent=t.collection._changeEventBuffer.getCounter(),typeof d=="number"?((!t._result||d!==t._result.count)&&(r=!0,t._setResultData(d)),r):((!t._result||!Xv(t.collection.schema.primaryPath,d,t._result.docsData))&&(r=!0,t._setResultData(d)),r))):Promise.resolve(r)}function Ja(t,r){if(!r.sort)throw L("SNH",{query:r});var e=nb(t,r);return{query:r,queryPlan:e}}function zE(t){return U(this,null,function*(){var r=[],e=t.collection;if(t.isFindOneByIdQuery)if(Array.isArray(t.isFindOneByIdQuery)){var n=t.isFindOneByIdQuery;if(n=n.filter(m=>{var y=t.collection._docCache.getLatestDocumentDataIfExists(m);return y?(y._deleted||r.push(y),!1):!0}),n.length>0){var i=yield e.storageInstance.findDocumentsById(n,!1);Or(r,i)}}else{var o=t.isFindOneByIdQuery,s=t.collection._docCache.getLatestDocumentDataIfExists(o);if(!s){var l=yield e.storageInstance.findDocumentsById([o],!1);l[0]&&(s=l[0])}s&&!s._deleted&&r.push(s)}else{var d=t.getPreparedQuery(),p=yield e.storageInstance.query(d);r=p.documents}return r})}function VE(t,r){if(!r.skip&&r.selector&&Object.keys(r.selector).length===1&&r.selector[t]){var e=r.selector[t];if(typeof e=="string")return e;if(Object.keys(e).length===1&&typeof e.$eq=="string"||Object.keys(e).length===1&&Array.isArray(e.$eq)&&!e.$eq.find(n=>typeof n!="string"))return e.$eq}return!1}var $b="_rxdb_internal";function _h(t,r){return U(this,null,function*(){var e=yield t.findDocumentsById([r],!1),n=e[0];if(n)return n})}function Po(t,r,e,n){if(n)throw n.status===409?L("CONFLICT",{collection:t.name,id:r,writeError:n,data:e}):n.status===422?L("VD2",{collection:t.name,id:r,writeError:n,data:e}):n}function jb(t,r,e,n,i,o,s){for(var l=!!t.schema.attachments,d=[],p=[],m=[],y=Ii(10),S={id:y,events:[],checkpoint:null,context:i,startTime:se(),endTime:0},A=S.events,N=[],j=[],G=[],tt=e.size>0,rt,et=n.length,Tt=function(){var Nt=n[ct],At=Nt.document,Vt=Nt.previous,ve=At[r],je=At._deleted,pr=Vt&&Vt._deleted,ri=void 0;tt&&(ri=e.get(ve));var mr;if(ri){var Xr=ri._rev;if(!Vt||Vt&&Xr!==Vt._rev){var gn={isError:!0,status:409,documentId:ve,writeRow:Nt,documentInDb:ri};return m.push(gn),1}var Pe=l?bh(Nt):Nt;l&&(je?Vt&&Object.keys(Vt._attachments).forEach(ce=>{j.push({documentId:ve,attachmentId:ce,digest:Dt(Vt)._attachments[ce].digest})}):(Object.entries(At._attachments).find(([ce,le])=>{var yn=Vt?Vt._attachments[ce]:void 0;return!yn&&!le.data&&(mr={documentId:ve,documentInDb:ri,isError:!0,status:510,writeRow:Nt,attachmentId:ce}),!0}),mr||Object.entries(At._attachments).forEach(([ce,le])=>{var yn=Vt?Vt._attachments[ce]:void 0;if(!yn)N.push({documentId:ve,attachmentId:ce,attachmentData:le,digest:le.digest});else{var gu=Pe.document._attachments[ce].digest;le.data&&yn.digest!==gu&&G.push({documentId:ve,attachmentId:ce,attachmentData:le,digest:le.digest})}}))),mr?m.push(mr):(l?(p.push(bh(Pe)),s&&s(At)):(p.push(Pe),s&&s(At)),rt=Pe);var vn=null,Vo=null,gr=null;if(pr&&!je)gr="INSERT",vn=l?Qr(At):At;else if(Vt&&!pr&&!je)gr="UPDATE",vn=l?Qr(At):At,Vo=Vt;else if(je)gr="DELETE",vn=Dt(At),Vo=Vt;else throw L("SNH",{args:{writeRow:Nt}});var hs={documentId:ve,documentData:vn,previousDocumentData:Vo,operation:gr};A.push(hs)}else{var zo=!!je;if(l&&Object.entries(At._attachments).forEach(([ce,le])=>{le.data?N.push({documentId:ve,attachmentId:ce,attachmentData:le,digest:le.digest}):(mr={documentId:ve,isError:!0,status:510,writeRow:Nt,attachmentId:ce},m.push(mr))}),mr||(l?(d.push(bh(Nt)),o&&o(At)):(d.push(Nt),o&&o(At)),rt=Nt),!zo){var mu={documentId:ve,operation:"INSERT",documentData:l?Qr(At):At,previousDocumentData:l&&Vt?Qr(Vt):Vt};A.push(mu)}}},ct=0;ct<et;ct++)Tt();return{bulkInsertDocs:d,bulkUpdateDocs:p,newestRow:rt,errors:m,eventBulk:S,attachmentsAdd:N,attachmentsRemove:j,attachmentsUpdate:G}}function bh(t){return{previous:t.previous,document:Qr(t.document)}}function qE(t){return atob(t).length}function WE(t){var r=t.data;if(!r)return t;var e={length:qE(r),digest:t.digest,type:t.type};return e}function Qr(t){if(!t._attachments||Object.keys(t._attachments).length===0)return t;var r=It(t);return r._attachments={},Object.entries(t._attachments).forEach(([e,n])=>{r._attachments[e]=WE(n)}),r}function Fi(t){return Object.assign({},t,{_meta:It(t._meta)})}var Ub=new WeakMap;function jl(t,r,e){Pt.deepFreezeWhenDevMode(e);var n=ye(r.schema.primaryKey),i={originalStorageInstance:r,schema:r.schema,internals:r.internals,collectionName:r.collectionName,databaseName:r.databaseName,options:r.options,bulkWrite(o,s){for(var l=t.token,d=new Array(o.length),p=se(),m=0;m<o.length;m++){var y=o[m],S=Fi(y.document);S._meta.lwt=p;var A=y.previous;S._rev=bo(l,A),d[m]={document:S,previous:A}}return ne("preStorageWrite",{storageInstance:this.originalStorageInstance,rows:d}),t.lockedRun(()=>r.bulkWrite(d,s)).then(N=>{var j={error:[]},G=hr(n,d,N);Ub.set(j,G);var tt=N.error.length===0?[]:N.error.filter(et=>et.status===409&&!et.writeRow.previous&&!et.writeRow.document._deleted&&Dt(et.documentInDb)._deleted?!0:(j.error.push(et),!1));if(tt.length>0){var rt=tt.map(et=>({previous:et.documentInDb,document:Object.assign({},et.writeRow.document,{_rev:bo(t.token,et.documentInDb)})}));return t.lockedRun(()=>r.bulkWrite(rt,s)).then(et=>{Or(j.error,et.error);var Tt=hr(n,rt,et);return Or(G,Tt),j})}return j})},query(o){return t.lockedRun(()=>r.query(o))},count(o){return t.lockedRun(()=>r.count(o))},findDocumentsById(o,s){return t.lockedRun(()=>r.findDocumentsById(o,s))},getAttachmentData(o,s,l){return t.lockedRun(()=>r.getAttachmentData(o,s,l))},getChangedDocumentsSince:r.getChangedDocumentsSince?(o,s)=>t.lockedRun(()=>r.getChangedDocumentsSince(Dt(o),s)):void 0,cleanup(o){return t.lockedRun(()=>r.cleanup(o))},remove(){return t.storageInstances.delete(i),t.lockedRun(()=>r.remove())},close(){return t.storageInstances.delete(i),t.lockedRun(()=>r.close())},changeStream(){return r.changeStream()},conflictResultionTasks(){return r.conflictResultionTasks()},resolveConflictResultionTask(o){if(o.output.isEqual)return r.resolveConflictResultionTask(o);var s=Object.assign({},o.output.documentData,{_meta:jn(),_rev:ln(),_attachments:{}}),l=It(s);return delete l._meta,delete l._rev,delete l._attachments,r.resolveConflictResultionTask({id:o.id,output:{isEqual:!1,documentData:l}})}};return t.storageInstances.add(i),i}function zb(t){if(t.schema.keyCompression)throw L("UT5",{args:{params:t}});if(HE(t.schema))throw L("UT6",{args:{params:t}});if(t.schema.attachments&&t.schema.attachments.compression)throw L("UT7",{args:{params:t}})}function HE(t){return!!(t.encrypted&&t.encrypted.length>0||t.attachments&&t.attachments.encrypted)}function hr(t,r,e){var n=Ub.get(e);if(n)return n;var i=[];if(e.error.length>0){for(var o=new Set,s=0;s<e.error.length;s++){var l=e.error[s];o.add(l.documentId)}for(var d=0;d<r.length;d++){var p=r[d].document;o.has(p[t])||i.push(Qr(p))}}else{i.length=r.length-e.error.length;for(var m=0;m<r.length;m++){var y=r[m].document;i[m]=Qr(y)}}return i}var Vb=(function(){function t(e,n,i,o){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=e,this.primaryPath=n,this.preWrite=i,this.postWrite=o}var r=t.prototype;return r.addWrite=function(n,i){var o=n[this.primaryPath],s=Ye(this.queueByDocId,o,()=>[]),l=new Promise((d,p)=>{var m={lastKnownDocumentState:n,modifier:i,resolve:d,reject:p};Dt(s).push(m),this.triggerRun()});return l},r.triggerRun=function(){return U(this,null,function*(){if(!(this.isRunning===!0||this.queueByDocId.size===0)){this.isRunning=!0;var n=[],i=this.queueByDocId;this.queueByDocId=new Map,yield Promise.all(Array.from(i.entries()).map(d=>U(this,[d],function*([s,l]){var p=KE(l.map(S=>S.lastKnownDocumentState)),m=p;for(var y of l)try{m=yield y.modifier(dr(m))}catch(S){y.reject(S),y.reject=()=>{},y.resolve=()=>{}}try{yield this.preWrite(m,p)}catch(S){l.forEach(A=>A.reject(S));return}n.push({previous:p,document:m})})));var o=n.length>0?yield this.storageInstance.bulkWrite(n,"incremental-write"):{error:[]};return yield Promise.all(hr(this.primaryPath,n,o).map(s=>{var l=s[this.primaryPath];this.postWrite(s);var d=qn(i,l);d.forEach(p=>p.resolve(s))})),o.error.forEach(s=>{var l=s.documentId,d=qn(i,l),p=Jc(s);if(p){var m=Ye(this.queueByDocId,l,()=>[]);d.reverse().forEach(S=>{S.lastKnownDocumentState=Dt(p.documentInDb),Dt(m).unshift(S)})}else{var y=hy(s);d.forEach(S=>S.reject(y))}}),this.isRunning=!1,this.triggerRun()}})},t})();function wh(t){var r=e=>U(null,null,function*(){var n=Yv(e);n._deleted=e._deleted;var i=yield t(n),o=Object.assign({},i,{_meta:e._meta,_attachments:e._attachments,_rev:e._rev,_deleted:typeof i._deleted<"u"?i._deleted:e._deleted});return typeof o._deleted>"u"&&(o._deleted=!1),o});return r}function KE(t){var r=t[0],e=Ai(r._rev);return t.forEach(n=>{var i=Ai(n._rev);i>e&&(r=n,e=i)}),r}var Xn={get primaryPath(){var t=this;if(t.isInstanceOfRxDocument)return t.collection.schema.primaryPath},get primary(){var t=this;if(t.isInstanceOfRxDocument)return t._data[t.primaryPath]},get revision(){var t=this;if(t.isInstanceOfRxDocument)return t._data._rev},get deleted$(){var t=this;if(t.isInstanceOfRxDocument)return t.$.pipe(mt(r=>r._data._deleted))},get deleted$$(){var t=this,r=t.collection.database.getReactivityFactory();return r.fromObservable(t.deleted$,t.getLatest().deleted,t.collection.database)},get deleted(){var t=this;if(t.isInstanceOfRxDocument)return t._data._deleted},getLatest(){var t=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(t)},get $(){var t=this;return t.collection.$.pipe(gt(r=>!r.isLocal),gt(r=>r.documentId===this.primary),mt(r=>yy(r)),Ve(t.collection._docCache.getLatestDocumentData(this.primary)),Dn((r,e)=>r._rev===e._rev),mt(r=>this.collection._docCache.getCachedRxDocument(r)),sa(Yc))},get $$(){var t=this,r=t.collection.database.getReactivityFactory();return r.fromObservable(t.$,t.getLatest()._data,t.collection.database)},get$(t){if(Pt.isDevMode()){if(t.includes(".item."))throw L("DOC1",{path:t});if(t===this.primaryPath)throw L("DOC2");if(this.collection.schema.finalFields.includes(t))throw L("DOC3",{path:t});var r=Be(this.collection.schema.jsonSchema,t);if(!r)throw L("DOC4",{path:t})}return this.$.pipe(mt(e=>Fe(e,t)),Dn())},get$$(t){var r=this.get$(t),e=this.collection.database.getReactivityFactory();return e.fromObservable(r,this.getLatest().get(t),this.collection.database)},populate(t){var r=Be(this.collection.schema.jsonSchema,t),e=this.get(t);if(!e)return ry;if(!r)throw L("DOC5",{path:t});if(!r.ref)throw L("DOC6",{path:t,schemaObj:r});var n=this.collection.database.collections[r.ref];if(!n)throw L("DOC7",{ref:r.ref,path:t,schemaObj:r});return r.type==="array"?n.findByIds(e).exec().then(i=>{var o=i.values();return Array.from(o)}):n.findOne(e).exec()},get(t){return Wb(this,t)},toJSON(t=!1){if(t)return Pt.deepFreezeWhenDevMode(this._data);var r=It(this._data);return delete r._rev,delete r._attachments,delete r._deleted,delete r._meta,Pt.deepFreezeWhenDevMode(r)},toMutableJSON(t=!1){return dr(this.toJSON(t))},update(t){throw Ot("update")},incrementalUpdate(t){throw Ot("update")},updateCRDT(t){throw Ot("crdt")},putAttachment(){throw Ot("attachments")},getAttachment(){throw Ot("attachments")},allAttachments(){throw Ot("attachments")},get allAttachments$(){throw Ot("attachments")},modify(t,r){return U(this,null,function*(){var e=this._data,n=yield wh(t)(e);return this._saveData(n,e)})},incrementalModify(t,r){return this.collection.incrementalWriteQueue.addWrite(this._data,wh(t)).then(e=>this.collection._docCache.getCachedRxDocument(e))},patch(t){var r=this._data,e=dr(r);return Object.entries(t).forEach(([n,i])=>{e[n]=i}),this._saveData(e,r)},incrementalPatch(t){return this.incrementalModify(r=>(Object.entries(t).forEach(([e,n])=>{r[e]=n}),r))},_saveData(t,r){return U(this,null,function*(){if(t=It(t),this._data._deleted)throw L("DOC11",{id:this.primary,document:this});yield xh(this.collection,t,r);var e=[{previous:r,document:t}],n=yield this.collection.storageInstance.bulkWrite(e,"rx-document-save-data"),i=n.error[0];return Po(this.collection,this.primary,t,i),yield this.collection._runHooks("post","save",t,this),this.collection._docCache.getCachedRxDocument(hr(this.collection.schema.primaryPath,e,n)[0])})},remove(){var t=this.collection;if(this.deleted)return Promise.reject(L("DOC13",{document:this,id:this.primary}));var r=It(this._data),e;return t._runHooks("pre","remove",r,this).then(()=>U(this,null,function*(){r._deleted=!0;var n=[{previous:this._data,document:r}],i=yield t.storageInstance.bulkWrite(n,"rx-document-remove"),o=i.error[0];return Po(t,this.primary,r,o),hr(this.collection.schema.primaryPath,n,i)[0]})).then(n=>(e=n,this.collection._runHooks("post","remove",r,this))).then(()=>this.collection._docCache.getCachedRxDocument(e))},incrementalRemove(){return this.incrementalModify(t=>U(this,null,function*(){return yield this.collection._runHooks("pre","remove",t,this),t._deleted=!0,t})).then(t=>U(this,null,function*(){return yield this.collection._runHooks("post","remove",t._data,t),t}))},destroy(){throw L("DOC14")}};function Ul(t=Xn){var r=function(n,i){this.collection=n,this._data=i,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return r.prototype=t,r}function qb(t,r,e){var n=new t(r,e);return ne("createRxDocument",n),n}function xh(t,r,e){return r._meta=Object.assign({},e._meta,r._meta),Pt.isDevMode()&&t.schema.validateChange(e,r),t._runHooks("pre","save",r,e)}function Wb(t,r){return Ye(t._propertyCache,r,()=>{var e=Fe(t._data,r);if(typeof e!="object"||e===null||Array.isArray(e))return Pt.deepFreezeWhenDevMode(e);var n=new Proxy(It(e),{get(i,o){if(typeof o!="string")return i[o];var s=o.charAt(o.length-1);if(s==="$")if(o.endsWith("$$")){var l=o.slice(0,-2);return t.get$$(Dr(r+"."+l))}else{var d=o.slice(0,-1);return t.get$(Dr(r+"."+d))}else if(s==="_"){var p=o.slice(0,-1);return t.populate(Dr(r+"."+p))}else{var m=i[o];return typeof m=="number"||typeof m=="string"||typeof m=="boolean"?m:Wb(t,Dr(r+"."+o))}}});return n})}var No="collection",Ch="storage-token",GE="rx-migration-status",QE="RxInternalDocument",zl=el({version:0,title:QE,primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[No,Ch,GE,"OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function Vl(t,r){return Ua(zl,{key:t,context:r})}function ql(t){return U(this,null,function*(){var r=Ja(t.schema,{selector:{context:No,_deleted:{$eq:!1}},sort:[{id:"asc"}],skip:0}),e=yield t.query(r),n=e.documents;return n})}var Hb="storageToken",YE=Vl(Hb,Ch);function Kb(t){return U(this,null,function*(){var r=Ii(10),e=t.password?yield t.hashFunction(JSON.stringify(t.password)):void 0,n={id:YE,context:Ch,key:Hb,data:{rxdbVersion:t.rxdbVersion,token:r,instanceToken:t.token,passwordHash:e},_deleted:!1,_meta:jn(),_rev:ln(),_attachments:{}},i=[{document:n}],o=yield t.internalStore.bulkWrite(i,"internal-add-storage-token");if(!o.error[0])return hr("id",i,o)[0];var s=Dt(o.error[0]);if(s.isError&&Jc(s)){var l=s;if(!XE(l.documentInDb.data.rxdbVersion,t.rxdbVersion))throw L("DM5",{args:{database:t.name,databaseStateVersion:l.documentInDb.data.rxdbVersion,codeVersion:t.rxdbVersion}});if(e&&e!==l.documentInDb.data.passwordHash)throw L("DB1",{passwordHash:e,existingPasswordHash:l.documentInDb.data.passwordHash});var d=l.documentInDb;return Dt(d)}throw s})}function XE(t,r){if(!t||r.includes("beta")&&r!==t)return!1;var e=t.split(".")[0],n=r.split(".")[0];return e===n}function Sh(t,r){return t+"-"+r.version}function ts(t,r){return r=It(r),r=my(t,r),typeof t.jsonSchema.primaryKey!="string"&&(r=tl(t.primaryPath,t.jsonSchema,r)),r._meta=jn(),Object.prototype.hasOwnProperty.call(r,"_deleted")||(r._deleted=!1),Object.prototype.hasOwnProperty.call(r,"_attachments")||(r._attachments={}),Object.prototype.hasOwnProperty.call(r,"_rev")||(r._rev=ln()),r}function Gb(t,r){return U(this,null,function*(){r.multiInstance=t.multiInstance;var e=yield t.storage.createStorageInstance(r);return e})}function Wl(t,r,e,n,i,o,s){return U(this,null,function*(){var l=yield ql(r),d=l.filter(S=>S.data.name===i),p=[];d.forEach(S=>{p.push({collectionName:S.data.name,schema:S.data.schema,isCollection:!0}),S.data.connectedStorages.forEach(A=>p.push({collectionName:A.collectionName,isCollection:!1,schema:A.schema}))});var m=new Set;if(p=p.filter(S=>{var A=S.collectionName+"||"+S.schema.version;return m.has(A)?!1:(m.add(A),!0)}),yield Promise.all(p.map(S=>U(null,null,function*(){var A=yield t.createStorageInstance({collectionName:S.collectionName,databaseInstanceToken:e,databaseName:n,multiInstance:!1,options:{},schema:S.schema,password:o,devMode:Pt.isDevMode()});yield A.remove(),S.isCollection&&(yield Kn("postRemoveRxCollection",{storage:t,databaseName:n,collectionName:i}))}))),s){var y=d.map(S=>{var A=Fi(S);return A._deleted=!0,A._meta.lwt=se(),A._rev=bo(e,S),{previous:S,document:A}});yield r.bulkWrite(y,"rx-database-remove-collection-all")}})}function tr(t){if(t.destroyed)throw L("COL21",{collection:t.name,version:t.schema.version})}var ZE=(function(){function t(e){this.subs=[],this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.limit=100,this.tasks=new Set,this.collection=e,this.subs.push(this.collection.database.eventBulks$.pipe(gt(n=>n.collectionName===this.collection.name),gt(n=>{var i=n.events[0];return!i.isLocal})).subscribe(n=>{this.tasks.add(()=>this._handleChangeEvents(n.events)),this.tasks.size<=1&&Co().then(()=>{this.processTasks()})}))}var r=t.prototype;return r.processTasks=function(){if(this.tasks.size!==0){var n=Array.from(this.tasks);n.forEach(i=>i()),this.tasks.clear()}},r._handleChangeEvents=function(n){var i=this.counter;this.counter=this.counter+n.length,n.length>this.limit?this.buffer=n.slice(n.length*-1):(Or(this.buffer,n),this.buffer=this.buffer.slice(this.limit*-1));for(var o=i+1,s=this.eventCounterMap,l=0;l<n.length;l++){var d=n[l];s.set(d,o+l)}},r.getCounter=function(){return this.processTasks(),this.counter},r.getBuffer=function(){return this.processTasks(),this.buffer},r.getArrayIndexByPointer=function(n){this.processTasks();var i=this.buffer[0],o=this.eventCounterMap.get(i);if(n<o)return null;var s=n-o;return s},r.getFrom=function(n){this.processTasks();var i=[],o=this.getArrayIndexByPointer(n);if(o===null)return null;for(;;){var s=this.buffer[o];if(o++,s)i.push(s);else return i}},r.runFrom=function(n,i){this.processTasks();var o=this.getFrom(n);if(o===null)throw new Error("out of bounds");o.forEach(s=>i(s))},r.reduceByLastOfDoc=function(n){return this.processTasks(),n.slice(0);var i={};return n.forEach(o=>{i[o.documentId]=o}),Object.values(i)},r.destroy=function(){this.tasks.clear(),this.subs.forEach(n=>n.unsubscribe())},t})();function Qb(t){return new ZE(t)}var JE=new WeakMap;function tR(t){var r=t.schema.getDocumentPrototype(),e=eR(t),n=Xn,i={};return[r,e,n].forEach(o=>{var s=Object.getOwnPropertyNames(o);s.forEach(l=>{var d=Object.getOwnPropertyDescriptor(o,l),p=!0;(l.startsWith("_")||l.endsWith("_")||l.startsWith("$")||l.endsWith("$"))&&(p=!1),typeof d.value=="function"?Object.defineProperty(i,l,{get(){return d.value.bind(this)},enumerable:p,configurable:!1}):(d.enumerable=p,d.configurable=!1,d.writable&&(d.writable=!1),Object.defineProperty(i,l,d))})}),i}function Yb(t){return Ye(JE,t,()=>Ul(tR(t)))}function Xb(t,r,e){var n=qb(r,t,Pt.deepFreezeWhenDevMode(e));return t._runHooksSync("post","create",e,n),ne("postCreateRxDocument",n),n}function eR(t){var r={};return Object.entries(t.methods).forEach(([e,n])=>{r[e]=n}),r}var Eh=function(t,r){var e=Qr(t.newDocumentState),n=Qr(t.realMasterState);return Vn(e,n)?Promise.resolve({isEqual:!0}):Promise.resolve({isEqual:!1,documentData:t.realMasterState})};function Hl(t){var r=t.collection.schema.jsonSchema;if(!r.attachments)throw L("AT1",{link:"https://pubkey.github.io/rxdb/rx-attachment.html"})}function Zb(t){Object.entries(t.doc.collection.attachments).forEach(([r,e])=>{Object.defineProperty(t,r,{get:()=>e.bind(t)})})}var rR=(function(){function t({doc:e,id:n,type:i,length:o,digest:s}){this.doc=e,this.id=n,this.type=i,this.length=o,this.digest=s,Zb(this)}var r=t.prototype;return r.remove=function(){return this.doc.collection.incrementalWriteQueue.addWrite(this.doc._data,n=>(delete n._attachments[this.id],n)).then(()=>{})},r.getData=function(){return U(this,null,function*(){var n=yield this.doc.collection.storageInstance.getAttachmentData(this.doc.primary,this.id,this.digest),i=yield qv(n,this.type);return i})},r.getStringData=function(){return U(this,null,function*(){var n=yield this.getData(),i=yield Wv(n);return i})},t})();function Kl(t,r,e){return new rR({doc:e,id:t,type:r.type,length:r.length,digest:r.digest})}function nR(t){return U(this,null,function*(){Hl(this);var r=Kv(t.data),e=yield Hv(t.data),n=yield this.collection.database.hashFunction(e),i=t.id,o=t.type,s=e;return this.collection.incrementalWriteQueue.addWrite(this._data,l=>(l=It(l),l._attachments=It(l._attachments),l._attachments[i]={length:r,type:o,data:s,digest:n},l)).then(l=>{var d=this.collection._docCache.getCachedRxDocument(l),p=l._attachments[i],m=Kl(i,p,d);return m})})}function iR(t){Hl(this);var r=this._data;if(!r._attachments||!r._attachments[t])return null;var e=r._attachments[t],n=Kl(t,e,this);return n}function oR(){Hl(this);var t=this._data;return t._attachments?Object.keys(t._attachments).map(r=>Kl(r,t._attachments[r],this)):[]}function aR(t){return U(this,null,function*(){var r=t.docData._attachments;if(r){var e={};yield Promise.all(Object.keys(r).map(n=>U(null,null,function*(){var i=r[n],o=t.docData[t.oldCollection.schema.primaryPath],s=yield t.oldCollection.storageInstance.getAttachmentData(o,n,i.digest),l=yield t.oldCollection.database.hashFunction(s);e[n]={length:i.length,type:i.type,data:s,digest:l}}))),t.docData._attachments=e}})}function sR(t){return zn}var Jb={name:"attachments",rxdb:!0,prototypes:{RxDocument:t=>{t.putAttachment=nR,t.getAttachment=iR,t.allAttachments=oR,Object.defineProperty(t,"allAttachments$",{get:function(){return this.$.pipe(mt(e=>Object.entries(e.toJSON(!0)._attachments)),mt(e=>e.map(([n,i])=>Kl(n,i,this))))}})}},overwritable:{},hooks:{preMigrateDocument:{after:aR},postMigrateDocument:{after:sR}}};var e_=["pre","post"],r_=["insert","save","remove","create"],t_=!1,es=(function(){function t(e,n,i,o,s={},l={},d={},p={},m={},y=gh,S={},A=Eh){this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this.awaitBeforeReads=new Set,this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=Mb(),this.$={},this.checkpoint$={},this._changeEventBuffer={},this.onDestroy=[],this.destroyed=!1,this.onRemove=[],this.database=e,this.name=n,this.schema=i,this.internalStorageInstance=o,this.instanceCreationOptions=s,this.migrationStrategies=l,this.methods=d,this.attachments=p,this.options=m,this.cacheReplacementPolicy=y,this.statics=S,this.conflictHandler=A,cR(this.asRxCollection)}var r=t.prototype;return r.prepare=function(){return U(this,null,function*(){this.storageInstance=jl(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new Vb(this.storageInstance,this.schema.primaryPath,(d,p)=>xh(this,d,p),d=>this._runHooks("post","save",d));var n=this.database.eventBulks$.pipe(gt(d=>d.collectionName===this.name));this.$=n.pipe(he(d=>d.events)),this.checkpoint$=n.pipe(mt(d=>d.checkpoint)),this._changeEventBuffer=Qb(this.asRxCollection);var i;this._docCache=new Lb(this.schema.primaryPath,this.database.eventBulks$.pipe(gt(d=>d.collectionName===this.name&&!d.events[0].isLocal),mt(d=>d.events)),d=>(i||(i=Yb(this.asRxCollection)),Xb(this.asRxCollection,i,d)));var o=this.database.internalStore.changeStream().pipe(gt(d=>{var p=this.name+"-"+this.schema.version,m=d.events.find(y=>y.documentData.context==="collection"&&y.documentData.key===p&&y.operation==="DELETE");return!!m})).subscribe(()=>U(this,null,function*(){yield this.destroy(),yield Promise.all(this.onRemove.map(d=>d()))}));this._subs.push(o);var s=yield this.database.storageToken,l=this.storageInstance.changeStream().subscribe(d=>{for(var p=new Array(d.events.length),m=d.events,y=this.name,S=Pt.deepFreezeWhenDevMode,A=0;A<m.length;A++){var N=m[A];p[A]={documentId:N.documentId,collectionName:y,isLocal:!1,operation:N.operation,documentData:S(N.documentData),previousDocumentData:S(N.previousDocumentData)}}var j={id:d.id,internal:!1,collectionName:this.name,storageToken:s,events:p,databaseToken:this.database.token,checkpoint:d.checkpoint,context:d.context,endTime:d.endTime,startTime:d.startTime};this.database.$emit(j)});return this._subs.push(l),this._subs.push(this.storageInstance.conflictResultionTasks().subscribe(d=>{this.conflictHandler(d.input,d.context).then(p=>{this.storageInstance.resolveConflictResultionTask({id:d.id,output:p})})})),zn})},r.cleanup=function(n){throw tr(this),Ot("cleanup")},r.migrationNeeded=function(){throw Ot("migration-schema")},r.getMigrationState=function(){throw Ot("migration-schema")},r.startMigration=function(n=10){return tr(this),this.getMigrationState().startMigration(n)},r.migratePromise=function(n=10){return this.getMigrationState().migratePromise(n)},r.insert=function(n){return U(this,null,function*(){tr(this);var i=yield this.bulkInsert([n]),o=i.error[0];Po(this,n[this.schema.primaryPath],n,o);var s=Dt(i.success[0]);return s})},r.bulkInsert=function(n){return U(this,null,function*(){if(tr(this),n.length===0)return{success:[],error:[]};var i=this.schema.primaryPath,o=new Set,s;if(this.hasHooks("pre","insert"))s=yield Promise.all(n.map(G=>{var tt=ts(this.schema,G);return this._runHooks("pre","insert",tt).then(()=>(o.add(tt[i]),{document:tt}))}));else{s=new Array(n.length);for(var l=this.schema,d=0;d<n.length;d++){var p=n[d],m=ts(l,p);o.add(m[i]),s[d]={document:m}}}if(o.size!==n.length)throw L("COL22",{collection:this.name,args:{documents:n}});var y=yield this.storageInstance.bulkWrite(s,"rx-collection-bulk-insert"),S,A=this,N={get success(){if(!S){var G=hr(A.schema.primaryPath,s,y);S=$l(A._docCache,G)}return S},error:y.error};if(this.hasHooks("post","insert")){var j=new Map;s.forEach(G=>{var tt=G.document;j.set(tt[i],tt)}),yield Promise.all(N.success.map(G=>this._runHooks("post","insert",j.get(G.primary),G)))}return N})},r.bulkRemove=function(n){return U(this,null,function*(){tr(this);var i=this.schema.primaryPath;if(n.length===0)return{success:[],error:[]};var o=yield this.findByIds(n).exec(),s=[],l=new Map;Array.from(o.values()).forEach(A=>{var N=A.toMutableJSON(!0);s.push(N),l.set(A.primary,N)}),yield Promise.all(s.map(A=>{var N=A[this.schema.primaryPath];return this._runHooks("pre","remove",A,o.get(N))}));var d=s.map(A=>{var N=It(A);return N._deleted=!0,{previous:A,document:N}}),p=yield this.storageInstance.bulkWrite(d,"rx-collection-bulk-remove"),m=hr(this.schema.primaryPath,d,p),y=m.map(A=>A[i]);yield Promise.all(y.map(A=>this._runHooks("post","remove",l.get(A),o.get(A))));var S=y.map(A=>qn(o,A));return{success:S,error:p.error}})},r.bulkUpsert=function(n){return U(this,null,function*(){tr(this);var i=[],o=new Map;n.forEach(p=>{var m=ts(this.schema,p),y=m[this.schema.primaryPath];if(!y)throw L("COL3",{primaryPath:this.schema.primaryPath,data:m,schema:this.schema.jsonSchema});o.set(y,m),i.push(m)});var s=yield this.bulkInsert(i),l=s.success.slice(0),d=[];return yield Promise.all(s.error.map(p=>U(this,null,function*(){if(p.status!==409)d.push(p);else{var m=p.documentId,y=qn(o,m),S=Dt(p.documentInDb),A=this._docCache.getCachedRxDocuments([S])[0],N=yield A.incrementalModify(()=>y);l.push(N)}}))),{error:d,success:l}})},r.upsert=function(n){return U(this,null,function*(){tr(this);var i=yield this.bulkUpsert([n]);return Po(this.asRxCollection,n[this.schema.primaryPath],n,i.error[0]),i.success[0]})},r.incrementalUpsert=function(n){tr(this);var i=ts(this.schema,n),o=i[this.schema.primaryPath];if(!o)throw L("COL4",{data:n});var s=this._incrementalUpsertQueues.get(o);return s||(s=zn),s=s.then(()=>uR(this,o,i)).then(l=>l.inserted?l.doc:lR(l.doc,i)),this._incrementalUpsertQueues.set(o,s),s},r.find=function(n){if(tr(this),typeof n=="string")throw L("COL5",{queryObj:n});n||(n=Za());var i=Mo("find",n,this);return i},r.findOne=function(n){if(tr(this),typeof n=="number"||Array.isArray(n))throw pe("COL6",{queryObj:n});var i;if(typeof n=="string")i=Mo("findOne",{selector:{[this.schema.primaryPath]:n},limit:1},this);else{if(n||(n=Za()),n.limit)throw L("QU6");n=It(n),n.limit=1,i=Mo("findOne",n,this)}return i},r.count=function(n){tr(this),n||(n=Za());var i=Mo("count",n,this);return i},r.findByIds=function(n){tr(this);var i={selector:{[this.schema.primaryPath]:{$in:n.slice(0)}}},o=Mo("findByIds",i,this);return o},r.exportJSON=function(){throw Ot("json-dump")},r.importJSON=function(n){throw Ot("json-dump")},r.insertCRDT=function(n){throw Ot("crdt")},r.addPipeline=function(n){throw Ot("pipeline")},r.addHook=function(n,i,o,s=!1){if(typeof o!="function")throw pe("COL7",{key:i,when:n});if(!e_.includes(n))throw pe("COL8",{key:i,when:n});if(!r_.includes(i))throw L("COL9",{key:i});if(n==="post"&&i==="create"&&s===!0)throw L("COL10",{when:n,key:i,parallel:s});var l=o.bind(this),d=s?"parallel":"series";this.hooks[i]=this.hooks[i]||{},this.hooks[i][n]=this.hooks[i][n]||{series:[],parallel:[]},this.hooks[i][n][d].push(l)},r.getHooks=function(n,i){return!this.hooks[i]||!this.hooks[i][n]?{series:[],parallel:[]}:this.hooks[i][n]},r.hasHooks=function(n,i){if(!this.hooks[i]||!this.hooks[i][n])return!1;var o=this.getHooks(n,i);return o?o.series.length>0||o.parallel.length>0:!1},r._runHooks=function(n,i,o,s){var l=this.getHooks(n,i);if(!l)return zn;var d=l.series.map(p=>()=>p(o,s));return iy(d).then(()=>Promise.all(l.parallel.map(p=>p(o,s))))},r._runHooksSync=function(n,i,o,s){if(this.hasHooks(n,i)){var l=this.getHooks(n,i);l&&l.series.forEach(d=>d(o,s))}},r.promiseWait=function(n){var i=new Promise(o=>{var s=setTimeout(()=>{this.timeouts.delete(s),o()},n);this.timeouts.add(s)});return i},r.destroy=function(){return U(this,null,function*(){return this.destroyed?Wr:(yield Promise.all(this.onDestroy.map(n=>n())),this.destroyed=!0,Array.from(this.timeouts).forEach(n=>clearTimeout(n)),this._changeEventBuffer&&this._changeEventBuffer.destroy(),this.database.requestIdlePromise().then(()=>this.storageInstance.close()).then(()=>(this._subs.forEach(n=>n.unsubscribe()),delete this.database.collections[this.name],Kn("postDestroyRxCollection",this).then(()=>!0))))})},r.remove=function(){return U(this,null,function*(){yield this.destroy(),yield Promise.all(this.onRemove.map(n=>n())),yield Wl(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.password,this.database.hashFunction)})},ke(t,[{key:"insert$",get:function(){return this.$.pipe(gt(e=>e.operation==="INSERT"))}},{key:"update$",get:function(){return this.$.pipe(gt(e=>e.operation==="UPDATE"))}},{key:"remove$",get:function(){return this.$.pipe(gt(e=>e.operation==="DELETE"))}},{key:"asRxCollection",get:function(){return this}}])})();function cR(t){if(!t_){t_=!0;var r=Object.getPrototypeOf(t);r_.forEach(e=>{e_.map(n=>{var i=n+Qc(e);r[i]=function(o,s){return this.addHook(n,e,o,s)}})})}}function lR(t,r){return t.incrementalModify(e=>r)}function uR(t,r,e){var n=t._docCache.getLatestDocumentDataIfExists(r);return n?Promise.resolve({doc:t._docCache.getCachedRxDocuments([n])[0],inserted:!1}):t.findOne(r).exec().then(i=>i?{doc:i,inserted:!1}:t.insert(e).then(o=>({doc:o,inserted:!0})))}function n_({database:t,name:r,schema:e,instanceCreationOptions:n={},migrationStrategies:i={},autoMigrate:o=!0,statics:s={},methods:l={},attachments:d={},options:p={},localDocuments:m=!1,cacheReplacementPolicy:y=gh,conflictHandler:S=Eh}){var A={databaseInstanceToken:t.token,databaseName:t.name,collectionName:r,schema:e.jsonSchema,options:n,multiInstance:t.multiInstance,password:t.password,devMode:Pt.isDevMode()};return ne("preCreateRxStorageInstance",A),Gb(t,A).then(N=>{var j=new es(t,r,e,N,n,i,l,d,p,y,s,S);return j.prepare().then(()=>{Object.entries(s).forEach(([tt,rt])=>{Object.defineProperty(j,tt,{get:()=>rt.bind(j)})});var G=zn;return o&&j.schema.version!==0&&(G=j.migratePromise()),G}).then(()=>(ne("createRxCollection",{collection:j,creator:{name:r,schema:e,storageInstance:N,instanceCreationOptions:n,migrationStrategies:i,methods:l,attachments:d,options:p,cacheReplacementPolicy:y,localDocuments:m,statics:s}}),j)).catch(G=>N.close().then(()=>Promise.reject(G)))})}var Dh=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this._parallels=r||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};Dh.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,Oh(this)},wrapCall:function(r){var e=this;this.lock();var n;try{n=r()}catch(i){throw this.unlock(),i}return!n.then||typeof n.then!="function"?(this.unlock(),n):n.then(function(i){return e.unlock(),i}).catch(function(i){throw e.unlock(),i})},requestIdlePromise:function(r){var e=this;r=r||{};var n,i=new Promise(function(l){return n=l}),o=function(){Rh(e,i),n()};if(i._manRes=o,r.timeout){var s=setTimeout(function(){i._manRes()},r.timeout);i._timeoutObj=s}return this._iC.add(i),Oh(this),i},cancelIdlePromise:function(r){Rh(this,r)},requestIdleCallback:function(r,e){var n=this._lHN++,i=this.requestIdlePromise(e);return this._hPM.set(n,i),this._pHM.set(i,n),i.then(function(){return r()}),n},cancelIdleCallback:function(r){var e=this._hPM.get(r);this.cancelIdlePromise(e)},clear:function(){var r=this;this._iC.forEach(function(e){return Rh(r,e)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}};function dR(t){if(t._iC.size!==0){var r=t._iC.values(),e=r.next().value;e._manRes(),setTimeout(function(){return Oh(t)},0)}}function Rh(t,r){if(r){if(r._timeoutObj&&clearTimeout(r._timeoutObj),t._pHM.has(r)){var e=t._pHM.get(r);t._hPM.delete(e),t._pHM.delete(r)}t._iC.delete(r)}}function Oh(t){t._tryIR||t._iC.size===0||(t._tryIR=!0,setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}dR(t),t._tryIR=!1},0)},0))}var Zn=class{ttl;map=new Map;_to=!1;constructor(r){this.ttl=r}has(r){return this.map.has(r)}add(r){this.map.set(r,i_()),this._to||(this._to=!0,setTimeout(()=>{this._to=!1,fR(this)},0))}clear(){this.map.clear()}};function fR(t){let r=i_()-t.ttl,e=t.map[Symbol.iterator]();for(;;){let n=e.next().value;if(!n)return;let i=n[0];if(n[1]<r)t.map.delete(i);else return}}function i_(){return Date.now()}var Gl=new Set,o_=0,rs=(function(){function t(e,n,i,o,s,l,d=!1,p={},m,y,S,A,N){this.idleQueue=new Dh,this.rxdbVersion=Ti,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onDestroy=[],this.destroyed=!1,this.collections={},this.states={},this.eventBulks$=new it,this.observable$=this.eventBulks$.pipe(he(j=>j.events)),this.storageToken=Wr,this.storageTokenDocument=Wr,this.emittedEventBulkIds=new Zn(60*1e3),this.name=e,this.token=n,this.storage=i,this.instanceCreationOptions=o,this.password=s,this.multiInstance=l,this.eventReduce=d,this.options=p,this.internalStore=m,this.hashFunction=y,this.cleanupPolicy=S,this.allowSlowCount=A,this.reactivity=N,o_++,this.name!=="pseudoInstance"&&(this.internalStore=jl(this.asRxDatabase,m,zl),this.storageTokenDocument=Kb(this.asRxDatabase).catch(j=>this.startupErrors.push(j)),this.storageToken=this.storageTokenDocument.then(j=>j.data.token).catch(j=>this.startupErrors.push(j)))}var r=t.prototype;return r.getReactivityFactory=function(){if(!this.reactivity)throw L("DB14",{database:this.name});return this.reactivity},r.$emit=function(n){this.emittedEventBulkIds.has(n.id)||(this.emittedEventBulkIds.add(n.id),this.eventBulks$.next(n))},r.removeCollectionDoc=function(n,i){return U(this,null,function*(){var o=yield _h(this.internalStore,Vl(Sh(n,i),No));if(!o)throw L("SNH",{name:n,schema:i});var s=Fi(o);s._deleted=!0,yield this.internalStore.bulkWrite([{document:s,previous:o}],"rx-database-remove-collection")})},r.addCollections=function(n){return U(this,null,function*(){var i={},o={},s=[],l={};yield Promise.all(Object.entries(n).map(S=>U(this,[S],function*([m,y]){var A=m,N=y.schema;i[A]=N;var j=vy(N,this.hashFunction);if(o[A]=j,this.collections[m])throw L("DB3",{name:m});var G=Sh(m,N),tt={id:Vl(G,No),key:G,context:No,data:{name:A,schemaHash:yield j.hash,schema:j.jsonSchema,version:j.version,connectedStorages:[]},_deleted:!1,_meta:jn(),_rev:ln(),_attachments:{}};s.push({document:tt});var rt=Object.assign({},y,{name:A,schema:j,database:this}),et=It(y);et.database=this,et.name=m,ne("preCreateRxCollection",et),rt.conflictHandler=et.conflictHandler,l[A]=rt})));var d=yield this.internalStore.bulkWrite(s,"rx-database-add-collection");yield mR(this),yield Promise.all(d.error.map(m=>U(this,null,function*(){if(m.status!==409)throw L("DB12",{database:this.name,writeError:m});var y=Dt(m.documentInDb),S=y.data.name,A=o[S];if(y.data.schemaHash!==(yield A.hash))throw L("DB6",{database:this.name,collection:S,previousSchemaHash:y.data.schemaHash,schemaHash:yield A.hash,previousSchema:y.data.schema,schema:Dt(i[S])})})));var p={};return yield Promise.all(Object.keys(n).map(m=>U(this,null,function*(){var y=l[m],S=yield n_(y);p[m]=S,this.collections[m]=S,this[m]||Object.defineProperty(this,m,{get:()=>this.collections[m]})}))),p})},r.lockedRun=function(n){return this.idleQueue.wrapCall(n)},r.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},r.exportJSON=function(n){throw Ot("json-dump")},r.addState=function(n){throw Ot("state")},r.importJSON=function(n){throw Ot("json-dump")},r.backup=function(n){throw Ot("backup")},r.leaderElector=function(){throw Ot("leader-election")},r.isLeader=function(){throw Ot("leader-election")},r.waitForLeadership=function(){throw Ot("leader-election")},r.migrationStates=function(){throw Ot("migration-schema")},r.destroy=function(){return U(this,null,function*(){return this.destroyed?Wr:(this.destroyed=!0,yield Kn("preDestroyRxDatabase",this),this.eventBulks$.complete(),o_--,this._subs.map(n=>n.unsubscribe()),this.name==="pseudoInstance"?Wr:this.requestIdlePromise().then(()=>Promise.all(this.onDestroy.map(n=>n()))).then(()=>Promise.all(Object.keys(this.collections).map(n=>this.collections[n]).map(n=>n.destroy()))).then(()=>this.internalStore.close()).then(()=>Gl.delete(this.storage.name+"|"+this.name)).then(()=>!0))})},r.remove=function(){return this.destroy().then(()=>pR(this.name,this.storage,this.password))},ke(t,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}])})();function hR(t,r){var e=r.name+"|"+t;if(Gl.has(e))throw L("DB8",{name:t,storage:r.name,link:"https://rxdb.info/rx-database.html#ignoreduplicate"})}function a_(t,r,e,n,i,o){return U(this,null,function*(){var s=yield r.createStorageInstance({databaseInstanceToken:t,databaseName:e,collectionName:$b,schema:zl,options:n,multiInstance:i,password:o,devMode:Pt.isDevMode()});return s})}function s_({storage:t,instanceCreationOptions:r,name:e,password:n,multiInstance:i=!0,eventReduce:o=!0,ignoreDuplicate:s=!1,options:l={},cleanupPolicy:d,allowSlowCount:p=!1,localDocuments:m=!1,hashFunction:y=xo,reactivity:S}){ne("preCreateRxDatabase",{storage:t,instanceCreationOptions:r,name:e,password:n,multiInstance:i,eventReduce:o,ignoreDuplicate:s,options:l,localDocuments:m}),s||hR(e,t),Gl.add(t.name+"|"+e);var A=Ii(10);return a_(A,t,e,r,i,n).catch(N=>{throw Gl.delete(t.name+"|"+e),N}).then(N=>{var j=new rs(e,A,t,r,n,i,o,l,N,y,d,p,S);return Kn("createRxDatabase",{database:j,creator:{storage:t,instanceCreationOptions:r,name:e,password:n,multiInstance:i,eventReduce:o,ignoreDuplicate:s,options:l,localDocuments:m}}).then(()=>j)})}function pR(t,r,e){return U(this,null,function*(){var n=Ii(10),i=yield a_(n,r,t,{},!1,e),o=yield ql(i),s=new Set;o.forEach(d=>s.add(d.data.name));var l=Array.from(s);return yield Promise.all(l.map(d=>Wl(r,i,n,t,d,e))),yield Kn("postRemoveRxDatabase",{databaseName:t,storage:r}),yield i.remove(),l})}function mR(t){return U(this,null,function*(){if(yield t.storageToken,t.startupErrors[0])throw t.startupErrors[0]})}var gR={RxSchema:Pf.prototype,RxDocument:Xn,RxQuery:yh.prototype,RxCollection:es.prototype,RxDatabase:rs.prototype},Ah=new Set,c_=new Set;function Ql(t){if(ne("preAddRxPlugin",{plugin:t,plugins:Ah}),!Ah.has(t)){{if(c_.has(t.name))throw L("PL3",{name:t.name,plugin:t});Ah.add(t),c_.add(t.name)}if(!t.rxdb)throw pe("PL1",{plugin:t});t.init&&t.init(),t.prototypes&&Object.entries(t.prototypes).forEach(([r,e])=>e(gR[r])),t.overwritable&&Object.assign(Pt,t.overwritable),t.hooks&&Object.entries(t.hooks).forEach(([r,e])=>{e.after&&So[r].push(e.after),e.before&&So[r].unshift(e.before)})}}function l_(t){return t&&typeof t.then=="function"}var vR=Promise.resolve(!1),l9=Promise.resolve(!0),Yr=Promise.resolve();function Yl(t,r){return t||(t=0),new Promise(function(e){return setTimeout(function(){return e(r)},t)})}function u_(t,r){return Math.floor(Math.random()*(r-t+1)+t)}function ns(){return Math.random().toString(36).substring(2)}var kh=0;function hn(){var t=Date.now()*1e3;return t<=kh&&(t=kh+1),kh=t,t}var yR=hn,bR="native";function _R(t){var r={time:hn(),messagesCallback:null,bc:new BroadcastChannel(t),subFns:[]};return r.bc.onmessage=function(e){r.messagesCallback&&r.messagesCallback(e.data)},r}function wR(t){t.bc.close(),t.subFns=[]}function xR(t,r){try{return t.bc.postMessage(r,!1),Yr}catch(e){return Promise.reject(e)}}function CR(t,r){t.messagesCallback=r}function SR(){if(typeof globalThis<"u"&&globalThis.Deno&&globalThis.Deno.args)return!0;if((typeof window<"u"||typeof self<"u")&&typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function ER(){return 150}var d_={create:_R,close:wR,onMessage:CR,postMessage:xR,canBeUsed:SR,type:bR,averageResponseTime:ER,microSeconds:yR};function Lo(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=JSON.parse(JSON.stringify(t));return typeof r.webWorkerSupport>"u"&&(r.webWorkerSupport=!0),r.idb||(r.idb={}),r.idb.ttl||(r.idb.ttl=1e3*45),r.idb.fallbackInterval||(r.idb.fallbackInterval=150),t.idb&&typeof t.idb.onclose=="function"&&(r.idb.onclose=t.idb.onclose),r.localstorage||(r.localstorage={}),r.localstorage.removeTimeout||(r.localstorage.removeTimeout=1e3*60),t.methods&&(r.methods=t.methods),r.node||(r.node={}),r.node.ttl||(r.node.ttl=1e3*60*2),r.node.maxParallelWrites||(r.node.maxParallelWrites=2048),typeof r.node.useFastPath>"u"&&(r.node.useFastPath=!0),r}var RR=hn,OR="pubkey.broadcast-channel-0-",pn="messages",Xl={durability:"relaxed"},DR="idb";function f_(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function Ih(t){t.commit&&t.commit()}function AR(t){var r=f_(),e=OR+t,n=r.open(e);return n.onupgradeneeded=function(i){var o=i.target.result;o.createObjectStore(pn,{keyPath:"id",autoIncrement:!0})},new Promise(function(i,o){n.onerror=function(s){return o(s)},n.onsuccess=function(){i(n.result)}})}function kR(t,r,e){var n=Date.now(),i={uuid:r,time:n,data:e},o=t.transaction([pn],"readwrite",Xl);return new Promise(function(s,l){o.oncomplete=function(){return s()},o.onerror=function(p){return l(p)};var d=o.objectStore(pn);d.add(i),Ih(o)})}function IR(t,r){var e=t.transaction(pn,"readonly",Xl),n=e.objectStore(pn),i=[],o=IDBKeyRange.bound(r+1,1/0);if(n.getAll){var s=n.getAll(o);return new Promise(function(d,p){s.onerror=function(m){return p(m)},s.onsuccess=function(m){d(m.target.result)}})}function l(){try{return o=IDBKeyRange.bound(r+1,1/0),n.openCursor(o)}catch{return n.openCursor()}}return new Promise(function(d,p){var m=l();m.onerror=function(y){return p(y)},m.onsuccess=function(y){var S=y.target.result;S?S.value.id<r+1?S.continue(r+1):(i.push(S.value),S.continue()):(Ih(e),d(i))}})}function TR(t,r){if(t.closed)return Promise.resolve([]);var e=t.db.transaction(pn,"readwrite",Xl),n=e.objectStore(pn);return Promise.all(r.map(function(i){var o=n.delete(i);return new Promise(function(s){o.onsuccess=function(){return s()}})}))}function MR(t,r){var e=Date.now()-r,n=t.transaction(pn,"readonly",Xl),i=n.objectStore(pn),o=[];return new Promise(function(s){i.openCursor().onsuccess=function(l){var d=l.target.result;if(d){var p=d.value;p.time<e?(o.push(p),d.continue()):(Ih(n),s(o))}else s(o)}})}function PR(t){return MR(t.db,t.options.idb.ttl).then(function(r){return TR(t,r.map(function(e){return e.id}))})}function NR(t,r){return r=Lo(r),AR(t).then(function(e){var n={closed:!1,lastCursorId:0,channelName:t,options:r,uuid:ns(),eMIs:new Zn(r.idb.ttl*2),writeBlockPromise:Yr,messagesCallback:null,readQueuePromises:[],db:e};return e.onclose=function(){n.closed=!0,r.idb.onclose&&r.idb.onclose()},h_(n),n})}function h_(t){t.closed||p_(t).then(function(){return Yl(t.options.idb.fallbackInterval)}).then(function(){return h_(t)})}function LR(t,r){return!(t.uuid===r.uuid||r.eMIs.has(t.id)||t.data.time<r.messagesCallbackTime)}function p_(t){return t.closed?Yr:t.messagesCallback?IR(t.db,t.lastCursorId).then(function(r){var e=r.filter(function(n){return!!n}).map(function(n){return n.id>t.lastCursorId&&(t.lastCursorId=n.id),n}).filter(function(n){return LR(n,t)}).sort(function(n,i){return n.time-i.time});return e.forEach(function(n){t.messagesCallback&&(t.eMIs.add(n.id),t.messagesCallback(n.data))}),Yr}):Yr}function FR(t){t.closed=!0,t.db.close()}function BR(t,r){return t.writeBlockPromise=t.writeBlockPromise.then(function(){return kR(t.db,t.uuid,r)}).then(function(){u_(0,10)===0&&PR(t)}),t.writeBlockPromise}function $R(t,r,e){t.messagesCallbackTime=e,t.messagesCallback=r,p_(t)}function jR(){return!!f_()}function UR(t){return t.idb.fallbackInterval*2}var m_={create:NR,close:FR,onMessage:$R,postMessage:BR,canBeUsed:jR,type:DR,averageResponseTime:UR,microSeconds:RR};var zR=hn,VR="pubkey.broadcastChannel-",qR="localstorage";function g_(){var t;if(typeof window>"u")return null;try{t=window.localStorage,t=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return t}function v_(t){return VR+t}function WR(t,r){return new Promise(function(e){Yl().then(function(){var n=v_(t.channelName),i={token:ns(),time:Date.now(),data:r,uuid:t.uuid},o=JSON.stringify(i);g_().setItem(n,o);var s=document.createEvent("Event");s.initEvent("storage",!0,!0),s.key=n,s.newValue=o,window.dispatchEvent(s),e()})})}function HR(t,r){var e=v_(t),n=function(o){o.key===e&&r(JSON.parse(o.newValue))};return window.addEventListener("storage",n),n}function KR(t){window.removeEventListener("storage",t)}function GR(t,r){if(r=Lo(r),!y_())throw new Error("BroadcastChannel: localstorage cannot be used");var e=ns(),n=new Zn(r.localstorage.removeTimeout),i={channelName:t,uuid:e,eMIs:n};return i.listener=HR(t,function(o){i.messagesCallback&&o.uuid!==e&&(!o.token||n.has(o.token)||o.data.time&&o.data.time<i.messagesCallbackTime||(n.add(o.token),i.messagesCallback(o.data)))}),i}function QR(t){KR(t.listener)}function YR(t,r,e){t.messagesCallbackTime=e,t.messagesCallback=r}function y_(){var t=g_();if(!t)return!1;try{var r="__broadcastchannel_check";t.setItem(r,"works"),t.removeItem(r)}catch{return!1}return!0}function XR(){var t=120,r=navigator.userAgent.toLowerCase();return r.includes("safari")&&!r.includes("chrome")?t*2:t}var b_={create:GR,close:QR,onMessage:YR,postMessage:WR,canBeUsed:y_,type:qR,averageResponseTime:XR,microSeconds:zR};var __=hn,ZR="simulate",Th=new Set;function JR(t){var r={time:__(),name:t,messagesCallback:null};return Th.add(r),r}function tO(t){Th.delete(t)}var w_=5;function eO(t,r){return new Promise(function(e){return setTimeout(function(){var n=Array.from(Th);n.forEach(function(i){i.name===t.name&&i!==t&&i.messagesCallback&&i.time<r.time&&i.messagesCallback(r)}),e()},w_)})}function rO(t,r){t.messagesCallback=r}function nO(){return!0}function iO(){return w_}var x_={create:JR,close:tO,onMessage:rO,postMessage:eO,canBeUsed:nO,type:ZR,averageResponseTime:iO,microSeconds:__};var C_=[d_,m_,b_];function S_(t){var r=[].concat(t.methods,C_).filter(Boolean);if(t.type){if(t.type==="simulate")return x_;var e=r.find(function(i){return i.type===t.type});if(e)return e;throw new Error("method-type "+t.type+" not found")}t.webWorkerSupport||(r=r.filter(function(i){return i.type!=="idb"}));var n=r.find(function(i){return i.canBeUsed()});if(n)return n;throw new Error("No usable method found in "+JSON.stringify(C_.map(function(i){return i.type})))}var Mh=new Set,oO=0,is=function(r,e){this.id=oO++,Mh.add(this),this.name=r,E_&&(e=E_),this.options=Lo(e),this.method=S_(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,aO(this)};is._pubkey=!0;var E_;is.prototype={postMessage:function(r){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(r));return R_(this,"message",r)},postInternal:function(r){return R_(this,"internal",r)},set onmessage(t){var r=this.method.microSeconds(),e={time:r,fn:t};D_(this,"message",this._onML),t&&typeof t=="function"?(this._onML=e,O_(this,"message",e)):this._onML=null},addEventListener:function(r,e){var n=this.method.microSeconds(),i={time:n,fn:e};O_(this,r,i)},removeEventListener:function(r,e){var n=this._addEL[r].find(function(i){return i.fn===e});D_(this,r,n)},close:function(){var r=this;if(!this.closed){Mh.delete(this),this.closed=!0;var e=this._prepP?this._prepP:Yr;return this._onML=null,this._addEL.message=[],e.then(function(){return Promise.all(Array.from(r._uMP))}).then(function(){return Promise.all(r._befC.map(function(n){return n()}))}).then(function(){return r.method.close(r._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function R_(t,r,e){var n=t.method.microSeconds(),i={time:n,type:r,data:e},o=t._prepP?t._prepP:Yr;return o.then(function(){var s=t.method.postMessage(t._state,i);return t._uMP.add(s),s.catch().then(function(){return t._uMP.delete(s)}),s})}function aO(t){var r=t.method.create(t.name,t.options);l_(r)?(t._prepP=r,r.then(function(e){t._state=e})):t._state=r}function A_(t){return t._addEL.message.length>0||t._addEL.internal.length>0}function O_(t,r,e){t._addEL[r].push(e),sO(t)}function D_(t,r,e){t._addEL[r]=t._addEL[r].filter(function(n){return n!==e}),cO(t)}function sO(t){if(!t._iL&&A_(t)){var r=function(i){t._addEL[i.type].forEach(function(o){i.time>=o.time&&o.fn(i.data)})},e=t.method.microSeconds();t._prepP?t._prepP.then(function(){t._iL=!0,t.method.onMessage(t._state,r,e)}):(t._iL=!0,t.method.onMessage(t._state,r,e))}}function cO(t){if(t._iL&&!A_(t)){t._iL=!1;var r=t.method.microSeconds();t.method.onMessage(t._state,null,r)}}var Zl=new Map;function lO(t,r,e,n){var i=Zl.get(r);return i||(i={bc:new is(["RxDB:",t,e].join("|")),refs:new Set},Zl.set(r,i)),i.refs.add(n),i.bc}function k_(t,r){var e=Zl.get(t);if(e&&(e.refs.delete(r),e.refs.size===0))return Zl.delete(t),e.bc.close()}function I_(t,r,e,n){if(r.multiInstance){var i=n||lO(t,r.databaseInstanceToken,e.databaseName,e),o=new it,s=S=>{S.storageName===t&&S.databaseName===r.databaseName&&S.collectionName===r.collectionName&&S.version===r.schema.version&&o.next(S.eventBulk)};i.addEventListener("message",s);var l=e.changeStream(),d=!1,p=l.subscribe(S=>{d||i.postMessage({storageName:t,databaseName:r.databaseName,collectionName:r.collectionName,version:r.schema.version,eventBulk:S})});e.changeStream=function(){return o.asObservable().pipe(rm(l))};var m=e.close.bind(e);e.close=function(){return U(this,null,function*(){return d=!0,p.unsubscribe(),i.removeEventListener("message",s),n||(yield k_(r.databaseInstanceToken,e)),m()})};var y=e.remove.bind(e);e.remove=function(){return U(this,null,function*(){return d=!0,p.unsubscribe(),i.removeEventListener("message",s),n||(yield k_(r.databaseInstanceToken,e)),y()})}}}var Ph={UT1:"given name is no string or empty",UT2:`collection- and database-names must match the regex to be compatible with couchdb databases.
    See https://neighbourhood.ie/blog/2020/10/13/everything-you-need-to-know-about-couchdb-database-names/
    info: if your database-name specifies a folder, the name must contain the slash-char '/' or '\\'`,UT3:"replication-direction must either be push or pull or both. But not none",UT4:"given leveldown is no valid adapter",UT5:"keyCompression is set to true in the schema but no key-compression handler is used in the storage",UT6:"schema contains encrypted fields but no encryption handler is used in the storage",UT7:"attachments.compression is enabled but no attachment-compression plugin is used",PL1:"Given plugin is not RxDB plugin.",PL3:"A plugin with the same name was already added but it was not the exact same JavaScript object",P2:"bulkWrite() cannot be called with an empty array",QU1:"RxQuery._execOverDatabase(): op not known",QU4:"RxQuery.regex(): You cannot use .regex() on the primary field",QU5:"RxQuery.sort(): does not work because key is not defined in the schema",QU6:"RxQuery.limit(): cannot be called on .findOne()",QU9:"throwIfMissing can only be used in findOne queries",QU10:"result empty and throwIfMissing: true",QU11:"RxQuery: no valid query params given",QU12:"Given index is not in schema",QU13:"A top level field of the query is not included in the schema",QU14:"Running a count() query in slow mode is now allowed. Either run a count() query with a selector that fully matches an index or set allowSlowCount=true when calling the createRxDatabase",QU15:"For count queries it is not allowed to use skip or limit",QU16:"$regex queries must be defined by a string, not an RegExp instance. This is because RegExp objects cannot be JSON stringified and also they are mutable which would be dangerous",QU17:"Chained queries cannot be used on findByIds() RxQuery instances",QU18:"Malformated query result data. This likely happens because you create a OPFS-storage RxDatabase inside of a worker but did not set the usesRxDatabaseInWorker setting. https://rxdb.info/rx-storage-opfs.html#setting-usesrxdatabaseinworker-when-a-rxdatabase-is-also-used-inside-of-the-worker ",MQ1:"path must be a string or object",MQ2:"Invalid argument",MQ3:"Invalid sort() argument. Must be a string, object, or array",MQ4:"Invalid argument. Expected instanceof mquery or plain object",MQ5:"method must be used after where() when called with these arguments",MQ6:"Can't mix sort syntaxes. Use either array or object | .sort([['field', 1], ['test', -1]]) | .sort({ field: 1, test: -1 })",MQ7:"Invalid sort value",MQ8:"Can't mix sort syntaxes. Use either array or object",DB1:"RxDocument.prepare(): another instance on this adapter has a different password",DB2:"RxDatabase.addCollections(): collection-names cannot start with underscore _",DB3:"RxDatabase.addCollections(): collection already exists. use myDatabase[collectionName] to get it",DB4:"RxDatabase.addCollections(): schema is missing",DB5:"RxDatabase.addCollections(): collection-name not allowed",DB6:"RxDatabase.addCollections(): another instance created this collection with a different schema. Read this https://rxdb.info/questions-answers.html?console=qa#cant-change-the-schema ",DB8:`createRxDatabase(): A RxDatabase with the same name and adapter already exists.
Make sure to use this combination only once or set ignoreDuplicate to true if you do this intentional-
This often happens in react projects with hot reload that reloads the code without reloading the process.`,DB11:"createRxDatabase(): Invalid db-name, folder-paths must not have an ending slash",DB12:"RxDatabase.addCollections(): could not write to internal store",DB13:"createRxDatabase(): Invalid db-name or collection name, name contains the dollar sign",DB14:"no custom reactivity factory added on database creation",COL1:"RxDocument.insert() You cannot insert an existing document",COL2:"RxCollection.insert() fieldName ._id can only be used as primaryKey",COL3:"RxCollection.upsert() does not work without primary",COL4:"RxCollection.incrementalUpsert() does not work without primary",COL5:"RxCollection.find() if you want to search by _id, use .findOne(_id)",COL6:"RxCollection.findOne() needs a queryObject or string",COL7:"hook must be a function",COL8:"hooks-when not known",COL9:"RxCollection.addHook() hook-name not known",COL10:"RxCollection .postCreate-hooks cannot be async",COL11:"migrationStrategies must be an object",COL12:"A migrationStrategy is missing or too much",COL13:"migrationStrategy must be a function",COL14:"given static method-name is not a string",COL15:"static method-names cannot start with underscore _",COL16:"given static method is not a function",COL17:"RxCollection.ORM: statics-name not allowed",COL18:"collection-method not allowed because fieldname is in the schema",COL20:"Storage write error",COL21:"The RxCollection is destroyed or removed already, either from this JavaScript realm or from another, like a browser tab",CONFLICT:"Document update conflict. When changing a document you must work on the previous revision",COL22:".bulkInsert() and .bulkUpsert() cannot be run with multiple documents that have the same primary key",DOC1:"RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed",DOC2:"cannot observe primary path",DOC3:"final fields cannot be observed",DOC4:"RxDocument.get$ cannot observe a non-existed field",DOC5:"RxDocument.populate() cannot populate a non-existed field",DOC6:"RxDocument.populate() cannot populate because path has no ref",DOC7:"RxDocument.populate() ref-collection not in database",DOC8:"RxDocument.set(): primary-key cannot be modified",DOC9:"final fields cannot be modified",DOC10:"RxDocument.set(): cannot set childpath when rootPath not selected",DOC11:"RxDocument.save(): can't save deleted document",DOC13:"RxDocument.remove(): Document is already deleted",DOC14:"RxDocument.destroy() does not exist",DOC15:"query cannot be an array",DOC16:"Since version 8.0.0 RxDocument.set() can only be called on temporary RxDocuments",DOC17:"Since version 8.0.0 RxDocument.save() can only be called on non-temporary documents",DOC18:"Document property for composed primary key is missing",DOC19:"Value of primary key(s) cannot be changed",DOC20:"PrimaryKey missing",DOC21:"PrimaryKey must be equal to PrimaryKey.trim(). It cannot start or end with a whitespace",DOC22:"PrimaryKey must not contain a linebreak",DOC23:'PrimaryKey must not contain a double-quote ["]',DOC24:"Given document data could not be structured cloned. This happens if you pass non-plain-json data into it, like a Date() object or a Function. In vue.js this happens if you use ref() on the document data which transforms it into a Proxy object.",DM1:"migrate() Migration has already run",DM2:"migration of document failed final document does not match final schema",DM3:"migration already running",DM4:"Migration errored",DM5:"Cannot open database state with newer RxDB version. You have to migrate your database state first. See https://rxdb.info/migration-storage.html?console=storage ",AT1:"to use attachments, please define this in your schema",EN1:"password is not valid",EN2:"validatePassword: min-length of password not complied",EN3:"Schema contains encrypted properties but no password is given",EN4:"Password not valid",JD1:"You must create the collections before you can import their data",JD2:"RxCollection.importJSON(): the imported json relies on a different schema",JD3:"RxCollection.importJSON(): json.passwordHash does not match the own",LD1:"RxDocument.allAttachments$ can't use attachments on local documents",LD2:"RxDocument.get(): objPath must be a string",LD3:"RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed",LD4:"cannot observe primary path",LD5:"RxDocument.set() id cannot be modified",LD6:"LocalDocument: Function is not usable on local documents",LD7:"Local document already exists",LD8:"localDocuments not activated. Set localDocuments=true on creation, when you want to store local documents on the RxDatabase or RxCollection.",RC1:"Replication: already added",RC2:"replicateCouchDB() query must be from the same RxCollection",RC4:"RxCouchDBReplicationState.awaitInitialReplication() cannot await initial replication when live: true",RC5:"RxCouchDBReplicationState.awaitInitialReplication() cannot await initial replication if multiInstance because the replication might run on another instance",RC6:"syncFirestore() serverTimestampField MUST NOT be part of the collections schema and MUST NOT be nested.",RC7:"SimplePeer requires to have process.nextTick() polyfilled, see https://rxdb.info/replication-webrtc.html?console=webrtc ",RC_PULL:"RxReplication pull handler threw an error - see .errors for more details",RC_STREAM:"RxReplication pull stream$ threw an error - see .errors for more details",RC_PUSH:"RxReplication push handler threw an error - see .errors for more details",RC_PUSH_NO_AR:"RxReplication push handler did not return an array with the conflicts",RC_WEBRTC_PEER:"RxReplication WebRTC Peer has error",RC_COUCHDB_1:"replicateCouchDB() url must end with a slash like 'https://example.com/mydatabase/'",RC_COUCHDB_2:"replicateCouchDB() did not get valid result with rows.",RC_OUTDATED:"Outdated client, update required. Replication was canceled",RC_UNAUTHORIZED:"Unauthorized client, update the replicationState.headers to set correct auth data",RC_FORBIDDEN:"Client behaves wrong so the replication was canceled. Mostly happens if the client tries to write data that it is not allowed to",SC1:"fieldnames do not match the regex",SC2:"SchemaCheck: name 'item' reserved for array-fields",SC3:"SchemaCheck: fieldname has a ref-array but items-type is not string",SC4:"SchemaCheck: fieldname has a ref but is not type string, [string,null] or array<string>",SC6:"SchemaCheck: primary can only be defined at top-level",SC7:"SchemaCheck: default-values can only be defined at top-level",SC8:"SchemaCheck: first level-fields cannot start with underscore _",SC10:"SchemaCheck: schema defines ._rev, this will be done automatically",SC11:"SchemaCheck: schema needs a number >=0 as version",SC13:"SchemaCheck: primary is always index, do not declare it as index",SC14:"SchemaCheck: primary is always unique, do not declare it as index",SC15:"SchemaCheck: primary cannot be encrypted",SC16:"SchemaCheck: primary must have type: string",SC17:"SchemaCheck: top-level fieldname is not allowed",SC18:"SchemaCheck: indexes must be an array",SC19:"SchemaCheck: indexes must contain strings or arrays of strings",SC20:"SchemaCheck: indexes.array must contain strings",SC21:"SchemaCheck: given index is not defined in schema",SC22:"SchemaCheck: given indexKey is not type:string",SC23:"SchemaCheck: fieldname is not allowed",SC24:"SchemaCheck: required fields must be set via array. See https://spacetelescope.github.io/understanding-json-schema/reference/object.html#required",SC25:"SchemaCheck: compoundIndexes needs to be specified in the indexes field",SC26:"SchemaCheck: indexes needs to be specified at collection schema level",SC27:"SchemaCheck: encrypted fields need to be specified at collection schema level",SC28:"SchemaCheck: encrypted fields is not defined in the schema",SC29:"SchemaCheck: missing object key 'properties'",SC30:"SchemaCheck: primaryKey is required",SC32:"SchemaCheck: primary field must have the type string/number/integer",SC33:"SchemaCheck: used primary key is not a property in the schema",SC34:"Fields of type string that are used in an index, must have set the maxLength attribute in the schema",SC35:"Fields of type number/integer that are used in an index, must have set the multipleOf attribute in the schema",SC36:"A field of this type cannot be used as index",SC37:"Fields of type number that are used in an index, must have set the minimum and maximum attribute in the schema",SC38:"Fields of type boolean that are used in an index, must be required in the schema",SC39:"The primary key must have the maxLength attribute set",SC40:"$ref fields in the schema are not allowed. RxDB cannot resolve related schemas because it would have a negative performance impact.It would have to run http requests on runtime. $ref fields should be resolved during build time.",SC41:"minimum, maximum and maxLength values for indexes must be real numbers, not Infinity or -Infinity",VD1:"Sub-schema not found, does the schemaPath exists in your schema?",VD2:"object does not match schema",S1:"You cannot create collections after calling RxDatabase.server()",GQL1:"GraphQL replication: cannot find sub schema by key",GQL3:"GraphQL replication: pull returns more documents then batchSize",CRDT1:"CRDT operations cannot be used because the crdt options are not set in the schema.",CRDT2:"RxDocument.incrementalModify() cannot be used when CRDTs are activated.",CRDT3:"To use CRDTs you MUST NOT set a conflictHandler because the default CRDT conflict handler must be used",SNH:"This should never happen"};var Nh;function T_(){if(!Nh){var t=new es,r=Object.getOwnPropertyNames(t),e=Object.getOwnPropertyNames(Object.getPrototypeOf(t));Nh=[...r,...e]}return Nh}var Lh;function M_(){if(!Lh){var t=new rs("pseudoInstance","memory"),r=Object.getOwnPropertyNames(t),e=Object.getOwnPropertyNames(Object.getPrototypeOf(t));Lh=[...r,...e],t.destroy()}return Lh}var uO=Ul(Xn),dO=new uO,Fh;function Jl(){if(!Fh){var t=["deleted","synced"],r=Object.getOwnPropertyNames(dO),e=Object.getOwnPropertyNames(Xn);Fh=[...r,...e,...t]}return Fh}function fO(t){if(t!=="_deleted"){if(["properties"].includes(t))throw L("SC23",{fieldName:t});var r="^[a-zA-Z](?:[[a-zA-Z0-9_]*]?[a-zA-Z0-9])?$",e=new RegExp(r);if(t!=="_id"&&!t.match(e))throw L("SC1",{regex:r,fieldName:t})}}function hO(t){var r=ye(t.primaryKey);function e(i,o,s){if(typeof i=="string"&&typeof o=="object"&&!Array.isArray(o)&&s.split(".").pop()!=="patternProperties"&&fO(i),Object.prototype.hasOwnProperty.call(o,"item")&&o.type!=="array")throw L("SC2",{fieldName:i});if(Object.prototype.hasOwnProperty.call(o,"required")&&typeof o.required=="boolean")throw L("SC24",{fieldName:i});if(Object.prototype.hasOwnProperty.call(o,"$ref"))throw L("SC40",{fieldName:i});if(Object.prototype.hasOwnProperty.call(o,"ref"))if(Array.isArray(o.type)){if(o.type.length>2||!o.type.includes("string")||!o.type.includes("null"))throw L("SC4",{fieldName:i})}else switch(o.type){case"string":break;case"array":if(!o.items||!o.items.type||o.items.type!=="string")throw L("SC3",{fieldName:i});break;default:throw L("SC4",{fieldName:i})}var l=s.split(".").length>=2;if(l&&o.default)throw L("SC7",{path:s});if(!l){if(i==="_id"&&r!=="_id")throw L("COL2",{fieldName:i});if(i.charAt(0)==="_"){if(i==="_id"||i==="_deleted")return;throw L("SC8",{fieldName:i})}}}function n(i,o){!i||typeof i!="object"||Object.keys(i).forEach(s=>{var l=i[s];!i.properties&&l&&typeof l=="object"&&!Array.isArray(i)&&e(s,l,o);var d=o;s!=="properties"&&(d=d+"."+s),n(l,d)})}return n(t,""),!0}function pO(t){if(!t.primaryKey)throw L("SC30",{schema:t});function r(d){if(!d)throw L("SC33",{schema:t});var p=d.type;if(!p||!["string","number","integer"].includes(p))throw L("SC32",{schema:t,args:{schemaPart:d}})}if(typeof t.primaryKey=="string"){var e=t.primaryKey,n=t.properties[e];r(n)}else{var i=t.primaryKey,o=Be(t,i.key);r(o),i.fields.forEach(d=>{var p=Be(t,d);r(p)})}var s=ye(t.primaryKey),l=t.properties[s];if(l.maxLength){if(!isFinite(l.maxLength))throw L("SC41",{schema:t,args:{primaryPathSchemaPart:l}})}else throw L("SC39",{schema:t,args:{primaryPathSchemaPart:l}})}function P_(t){for(var r=t.split("."),e="",n=0;n<r.length;n+=1)r[n]!=="[]"?e=e.concat(".properties.".concat(r[n])):e=e.concat(".items");return Dr(e)}function N_(t){if(!t.primaryKey)throw L("SC30",{schema:t});if(!Object.prototype.hasOwnProperty.call(t,"properties"))throw L("SC29",{schema:t});if(t.properties._rev)throw L("SC10",{schema:t});if(!Object.prototype.hasOwnProperty.call(t,"version")||typeof t.version!="number"||t.version<0)throw L("SC11",{version:t.version});if(hO(t),pO(t),Object.keys(t.properties).forEach(r=>{var e=t.properties[r];if(r===t.primaryKey){if(t.indexes&&t.indexes.includes(r))throw L("SC13",{value:e,schema:t});if(e.unique)throw L("SC14",{value:e,schema:t});if(t.encrypted&&t.encrypted.includes(r))throw L("SC15",{value:e,schema:t});if(e.type!=="string")throw L("SC16",{value:e,schema:t})}if(Jl().includes(r))throw L("SC17",{key:r,schema:t})}),t.indexes){if(!qr(t.indexes))throw L("SC18",{indexes:t.indexes,schema:t});t.indexes.forEach(r=>{if(!(typeof r=="string"||Array.isArray(r)))throw L("SC19",{index:r,schema:t});if(Array.isArray(r)){for(var e=0;e<r.length;e+=1)if(typeof r[e]!="string")throw L("SC20",{index:r,schema:t})}var n=qr(r)?r:[r];n.forEach(i=>{var o=Be(t,i),s=o.type;switch(s){case"string":var l=o.maxLength;if(!l)throw L("SC34",{index:r,field:i,schema:t});break;case"number":case"integer":var d=o.multipleOf;if(!d)throw L("SC35",{index:r,field:i,schema:t});var p=o.maximum,m=o.minimum;if(typeof p>"u"||typeof m>"u")throw L("SC37",{index:r,field:i,schema:t});if(!isFinite(p)||!isFinite(m))throw L("SC41",{index:r,field:i,schema:t});break;case"boolean":var y="",S=i;if(i.includes(".")){var A=i.split(".");S=A.pop(),y=A.join(".")}var N=y===""?t:Be(t,y);if(!N.required||!N.required.includes(S))throw L("SC38",{index:r,field:i,schema:t});break;default:throw L("SC36",{fieldName:i,type:o.type,schema:t})}})})}Object.keys(Kc(t)).map(r=>{var e=r.split(".");return e.pop(),e.join(".")}).filter(r=>r!=="").filter((r,e,n)=>n.indexOf(r)===e).filter(r=>{var e=Fe(t,r);return e&&!!e.index}).forEach(r=>{throw r=r.replace("properties.",""),r=r.replace(/\.properties\./g,"."),L("SC26",{index:Dr(r),schema:t})}),(t.indexes||[]).reduce((r,e)=>(qr(e)?Or(r,e):r.push(e),r),[]).filter((r,e,n)=>n.indexOf(r)===e).map(r=>{var e=P_(r),n=Fe(t,e);if(!n||typeof n!="object")throw L("SC21",{index:r,schema:t});return{indexPath:r,schemaObj:n}}).filter(r=>r.schemaObj.type!=="string"&&r.schemaObj.type!=="integer"&&r.schemaObj.type!=="number"&&r.schemaObj.type!=="boolean").forEach(r=>{throw L("SC22",{key:r.indexPath,type:r.schemaObj.type,schema:t})}),Object.keys(Kc(t)).map(r=>{var e=r.split(".");return e.pop(),e.join(".")}).filter(r=>r!==""&&r!=="attachments").filter((r,e,n)=>n.indexOf(r)===e).filter(r=>{var e=Fe(t,r);return e&&!!e.encrypted}).forEach(r=>{throw r=r.replace("properties.",""),r=r.replace(/\.properties\./g,"."),L("SC27",{index:Dr(r),schema:t})}),t.encrypted&&t.encrypted.forEach(r=>{var e=P_(r),n=Fe(t,e);if(!n||typeof n!="object")throw L("SC28",{field:r,schema:t})})}function tu(t){t&&Object.entries(t).forEach(([r,e])=>{if(typeof r!="string")throw pe("COL14",{name:r});if(r.startsWith("_"))throw pe("COL15",{name:r});if(typeof e!="function")throw pe("COL16",{name:r,type:typeof r});if(T_().includes(r)||Jl().includes(r))throw L("COL17",{name:r})})}function L_(t,r){var e=Object.keys(t.properties);r&&Object.keys(r).filter(n=>e.includes(n)).forEach(n=>{throw L("COL18",{funName:n})})}function F_(t,r){if(typeof r!="object"||Array.isArray(r))throw pe("COL11",{schema:t});var e=gy(t);if(e.length!==Object.keys(r).length)throw L("COL12",{have:Object.keys(r),should:e});return e.map(n=>({v:n,s:r[n+1]})).filter(n=>typeof n.s!="function").forEach(n=>{throw pe("COL13",{version:n.v,type:typeof n,schema:t})}),!0}function B_(t){if(M_().includes(t.name))throw L("DB5",{name:t.name});U_(t.name)}function $_(t){if(U_(t.name),t.name.includes("$"))throw L("DB13",{name:t.name});if(Ef(t.name)&&(t.name.endsWith("/")||t.name.endsWith("\\")))throw L("DB11",{name:t.name})}var j_="^[a-z][_$a-z0-9\\-]*$",mO=new RegExp(j_);function U_(t){if(typeof t!="string"||t.length===0)throw pe("UT1",{name:t});if(Ef(t))return!0;if(!t.match(mO)&&t!==":memory:")throw L("UT2",{regex:j_,givenName:t});return!0}function z_(t){var r=Object.prototype.toString.call(t.queryObj)==="[object Object]";if(!r)throw pe("QU11",{op:t.op,collection:t.collection.name,queryObj:t.queryObj});var e=["selector","limit","skip","sort","index"];if(Object.keys(t.queryObj).forEach(n=>{if(!e.includes(n))throw pe("QU11",{op:t.op,collection:t.collection.name,queryObj:t.queryObj,key:n,args:{validKeys:e}})}),t.op==="count"&&(t.queryObj.limit||t.queryObj.skip))throw L("QU15",{collection:t.collection.name,query:t.queryObj});eu(t.queryObj)}function V_(t){var r=t.rxQuery.collection.schema.jsonSchema,e=t.mangoQuery.selector,n=Object.keys(r.properties);Object.keys(e).filter(l=>!l.startsWith("$")).filter(l=>!l.includes(".")).forEach(l=>{if(!n.includes(l))throw L("QU13",{schema:r,field:l,query:t.mangoQuery})});var i=r.indexes?r.indexes:[],o=t.mangoQuery.index;if(o){var s=i.find(l=>Vn(l,o));if(!s)throw L("QU12",{collection:t.rxQuery.collection.name,query:t.mangoQuery,schema:r})}if(t.rxQuery.op==="count"&&!gO(t.rxQuery.collection.schema.jsonSchema,t.mangoQuery)&&!t.rxQuery.collection.database.allowSlowCount)throw L("QU14",{collection:t.rxQuery.collection,query:t.mangoQuery});t.mangoQuery.sort&&t.mangoQuery.sort.map(l=>Object.keys(l)[0]).filter(l=>!l.includes(".")).forEach(l=>{if(!n.includes(l))throw L("QU13",{schema:r,field:l,query:t.mangoQuery})}),eu(t.mangoQuery)}function gO(t,r){var e=Ja(t,r);return e.queryPlan.selectorSatisfiedByIndex}function eu(t){if(!(typeof t!="object"||t===null)){var r=Object.keys(t);r.forEach(e=>{var n=t[e];if(n instanceof RegExp)throw L("QU16",{field:e,query:t});Array.isArray(n)?n.forEach(i=>eu(i)):eu(n)})}}function q_(t,r){if(!t)throw L("DOC20",{primaryKey:t,document:r});if(t!==t.trim())throw L("DOC21",{primaryKey:t,document:r});if(t.includes("\r")||t.includes(`
`))throw L("DOC22",{primaryKey:t,document:r});if(t.includes('"'))throw L("DOC23",{primaryKey:t,document:r})}function W_(t){if(typeof t!="object"||t===null)return!1;for(var r in t)if(t.hasOwnProperty(r)&&(t[r]instanceof Date||typeof t[r]=="object"&&W_(t[r])))return!0;return!1}function H_(t,r){var e=ye(t.schema.primaryKey),n=function(o){o.document=tl(e,t.schema,o.document),o.previous&&Object.keys(o.previous._meta).forEach(s=>{if(!Object.prototype.hasOwnProperty.call(o.document._meta,s))throw L("SNH",{dataBefore:o.previous,dataAfter:o.document,args:{metaFieldName:s}})});try{typeof structuredClone=="function"?structuredClone(o):JSON.parse(JSON.stringify(o))}catch{throw L("DOC24",{collection:t.collectionName,document:o.document})}if(W_(o.document))throw L("DOC24",{collection:t.collectionName,document:o.document})};for(var i of r)n(i)}var K_=!1;function G_(t){return U(this,null,function*(){if(!(K_||typeof window>"u"||typeof location>"u")&&!(Wn.premium&&typeof Wn.premium=="string"&&(yield xo(Wn.premium))===Xc)){K_=!0;var r=document.createElement("iframe");r.style.visibility="hidden",r.width="1px",r.height="1px",r.style.position="absolute",r.style.top="0",r.style.left="0",r.style.opacity="0.1",r.src="https://rxdb.info/html/dev-mode-iframe.html?version="+Ti,document.body.appendChild(r)}})}var vO=!0;function yO(t){return!t||typeof t=="string"||typeof t=="number"?t:_f(t)}var bO="dev-mode",Q_={name:bO,rxdb:!0,init:()=>{vO&&console.warn(["-------------- RxDB dev-mode warning -------------------------------","you are seeing this because you use the RxDB dev-mode plugin https://rxdb.info/dev-mode.html?console=dev-mode ","This is great in development mode, because it will run many checks to ensure","that you use RxDB correct. If you see this in production mode,","you did something wrong because the dev-mode plugin will decrease the performance.","","\u{1F917} Hint: To get the most out of RxDB, check out the Premium Plugins","to get access to faster storages and more professional features: https://rxdb.info/premium?console=dev-mode ","","You can disable this warning by calling disableWarnings() from the dev-mode plugin.","---------------------------------------------------------------------"].join(`
`))},overwritable:{isDevMode(){return!0},deepFreezeWhenDevMode:yO,tunnelErrorMessage(t){if(!Ph[t])throw console.error("RxDB: Error-Code not known: "+t),new Error("Error-Code "+t+" not known, contact the maintainer");return Ph[t]}},hooks:{preCreateRxSchema:{after:N_},preCreateRxDatabase:{after:function(t){$_(t)}},createRxDatabase:{after:function(t){return U(this,null,function*(){G_(t.database)})}},preCreateRxCollection:{after:function(t){if(B_(t),L_(t.schema,t.methods),t.name.charAt(0)==="_")throw L("DB2",{name:t.name});if(!t.schema)throw L("DB4",{name:t.name,args:t})}},createRxDocument:{before:function(t){q_(t.primary,t.toJSON(!0))}},preCreateRxQuery:{after:function(t){z_(t)}},prePrepareQuery:{after:t=>{V_(t)}},preStorageWrite:{before:t=>{H_(t.storageInstance,t.rows)}},createRxCollection:{after:t=>{tu(t.creator.statics),tu(t.creator.methods),tu(t.creator.attachments),t.creator.schema&&t.creator.migrationStrategies&&F_(t.creator.schema,t.creator.migrationStrategies)}}}};var ru=bx(Y_(),1),X_=Symbol.for("Dexie"),os=globalThis[X_]||(globalThis[X_]=ru.default);if(ru.default.semVer!==os.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ru.default.semVer} and ${os.semVer}`);var{liveQuery:MG,mergeRanges:PG,rangesOverlap:NG,RangeSet:LG,cmp:FG,Entity:BG,PropModSymbol:$G,PropModification:jG,replacePrefix:UG,add:zG,remove:VG}=os;var as="docs",_O="changes",Z_="attachments",iu="dexie",J_=new Map,nu=new Map;function tw(t,r,e,n){var i="rxdb-dexie-"+t+"--"+n.version+"--"+r,o=Ye(J_,i,()=>{var s=U(null,null,function*(){var l=It(e);l.autoOpen=!1;var d=new os(i,l),p={[as]:wO(n),[_O]:"++sequence, id",[Z_]:"id"};return d.version(1).stores(p),yield d.open(),{dexieDb:d,dexieTable:d[as],dexieAttachmentsTable:d[Z_],booleanIndexes:xO(n)}});return J_.set(i,o),nu.set(o,0),s});return o}function ew(t){return U(this,null,function*(){var r=yield t,e=nu.get(t),n=e-1;n===0?(r.dexieDb.close(),nu.delete(t)):nu.set(t,n)})}var jh="__";function Bi(t){var r=t.split(".");if(r.length>1)return r.map(n=>Bi(n)).join(".");if(t.startsWith("|")){var e=t.substring(1);return jh+e}else return t}function rw(t){var r=t.split(".");if(r.length>1)return r.map(n=>rw(n)).join(".");if(t.startsWith(jh)){var e=t.substring(jh.length);return"|"+e}else return t}function nw(t,r){if(!r)return r;var e=It(r);return e=Uh(e),t.forEach(n=>{var i=Fe(r,n),o=i?"1":"0",s=Bi(n);Df(e,s,o)}),e}function Vh(t,r){return r&&(r=It(r),r=zh(r),t.forEach(e=>{var n=Fe(r,e),i=n==="1";Df(r,e,i)}),r)}function Uh(t){if(!t||typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(e=>Uh(e));if(typeof t=="object"){var r={};return Object.entries(t).forEach(([e,n])=>{typeof n=="object"&&(n=Uh(n)),r[Bi(e)]=n}),r}}function zh(t){if(!t||typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(e=>zh(e));if(typeof t=="object"){var r={};return Object.entries(t).forEach(([e,n])=>{(typeof n=="object"||Array.isArray(t))&&(n=zh(n)),r[rw(e)]=n}),r}}function wO(t){var r=[],e=ye(t.primaryKey);r.push([e]),r.push(["_deleted",e]),t.indexes&&t.indexes.forEach(o=>{var s=$a(o);r.push(s)}),r.push(["_meta.lwt",e]),r.push(["_meta.lwt"]),r=r.map(o=>o.map(s=>Bi(s)));var n=r.map(o=>o.length===1?o[0]:"["+o.join("+")+"]");n=n.filter((o,s,l)=>l.indexOf(o)===s);var i=n.join(", ");return i}function qh(t,r){return U(this,null,function*(){var e=yield t,n=yield e.dexieTable.bulkGet(r);return n.map(i=>Vh(e.booleanIndexes,i))})}function ss(t,r){return t+"||"+r}function xO(t){var r=new Set,e=[];return t.indexes?(t.indexes.forEach(n=>{var i=$a(n);i.forEach(o=>{if(!r.has(o)){r.add(o);var s=Be(t,o);s.type==="boolean"&&e.push(o)}})}),e.push("_deleted"),zv(e)):e}function iw(t){return t===Pi?-1/0:t}function ow(t,r,e){if(t.includes(r)){var n=e===Mi||e===!0?"1":"0";return n}else return e}function aw(t,r,e){if(!e){if(typeof window>"u")throw new Error("IDBKeyRange missing");e=window.IDBKeyRange}var n=r.startKeys.map((s,l)=>{var d=r.index[l];return ow(t,d,s)}).map(iw),i=r.endKeys.map((s,l)=>{var d=r.index[l];return ow(t,d,s)}).map(iw),o=e.bound(n,i,!r.inclusiveStart,!r.inclusiveEnd);return o}function Wh(t,r){return U(this,null,function*(){var e=yield t.internals,n=r.query,i=n.skip?n.skip:0,o=n.limit?n.limit:1/0,s=i+o,l=r.queryPlan,d=!1;l.selectorSatisfiedByIndex||(d=To(t.schema,r.query));var p=aw(e.booleanIndexes,l,e.dexieDb._options.IDBKeyRange),m=l.index,y=[];if(yield e.dexieDb.transaction("r",e.dexieTable,A=>U(null,null,function*(){var N=A.idbtrans,j=N.objectStore(as),G,tt;tt="["+m.map(et=>Bi(et)).join("+")+"]",G=j.index(tt);var rt=G.openCursor(p);yield new Promise(et=>{rt.onsuccess=function(Tt){var ct=Tt.target.result;if(ct){var Nt=Vh(e.booleanIndexes,ct.value);(!d||d(Nt))&&y.push(Nt),l.sortSatisfiedByIndex&&y.length===s?et():ct.continue()}else et()}})})),!l.sortSatisfiedByIndex){var S=Bl(t.schema,r.query);y=y.sort(S)}return y=y.slice(i,s),{documents:y}})}function sw(t,r){return U(this,null,function*(){var e=yield t.internals,n=r.queryPlan,i=n.index,o=aw(e.booleanIndexes,n,e.dexieDb._options.IDBKeyRange),s=-1;return yield e.dexieDb.transaction("r",e.dexieTable,l=>U(null,null,function*(){var d=l.idbtrans,p=d.objectStore(as),m,y;y="["+i.map(A=>Bi(A)).join("+")+"]",m=p.index(y);var S=m.count(o);s=yield new Promise((A,N)=>{S.onsuccess=function(){A(S.result)},S.onerror=j=>N(j)})})),s})}var CO=se(),Hh=!1,SO=(function(){function t(e,n,i,o,s,l,d,p){this.changes$=new it,this.instanceId=CO++,this.storage=e,this.databaseName=n,this.collectionName=i,this.schema=o,this.internals=s,this.options=l,this.settings=d,this.devMode=p,this.primaryPath=ye(this.schema.primaryKey)}var r=t.prototype;return r.bulkWrite=function(n,i){return U(this,null,function*(){$i(this),!Hh&&(!Wn.premium||typeof Wn.premium!="string"||(yield xo(Wn.premium))!==Xc)&&console.warn(["-------------- RxDB Open Core RxStorage -------------------------------","You are using the free Dexie.js based RxStorage implementation from RxDB https://rxdb.info/rx-storage-dexie.html?console=dexie ","While this is a great option, we want to let you know that there are faster storage solutions available in our premium plugins.","For professional users and production environments, we highly recommend considering these premium options to enhance performance and reliability."," https://rxdb.info/premium?console=dexie ","If you already purchased premium access you can disable this log by calling the setPremiumFlag() function from rxdb-premium/plugins/shared.","---------------------------------------------------------------------"].join(`
`)),Hh=!0,n.forEach(m=>{if(!m.document._rev||m.previous&&!m.previous._rev)throw L("SNH",{args:{row:m}})});var o=yield this.internals,s={error:[]};this.devMode&&(n=n.map(m=>{var y=Fi(m.document);return{previous:m.previous,document:y}}));var l=n.map(m=>m.document[this.primaryPath]),d;if(yield o.dexieDb.transaction("rw",o.dexieTable,o.dexieAttachmentsTable,()=>U(this,null,function*(){var m=new Map,y=yield qh(this.internals,l);y.forEach(N=>{var j=N;return j&&m.set(j[this.primaryPath],j),j}),d=jb(this,this.primaryPath,m,n,i),s.error=d.errors;var S=[];d.bulkInsertDocs.forEach(N=>{S.push(N.document)}),d.bulkUpdateDocs.forEach(N=>{S.push(N.document)}),S=S.map(N=>nw(o.booleanIndexes,N)),S.length>0&&(yield o.dexieTable.bulkPut(S));var A=[];d.attachmentsAdd.forEach(N=>{A.push({id:ss(N.documentId,N.attachmentId),data:N.attachmentData.data})}),d.attachmentsUpdate.forEach(N=>{A.push({id:ss(N.documentId,N.attachmentId),data:N.attachmentData.data})}),yield o.dexieAttachmentsTable.bulkPut(A),yield o.dexieAttachmentsTable.bulkDelete(d.attachmentsRemove.map(N=>ss(N.documentId,N.attachmentId)))})),d=Dt(d),d.eventBulk.events.length>0){var p=Dt(d.newestRow).document;d.eventBulk.checkpoint={id:p[this.primaryPath],lwt:p._meta.lwt},d.eventBulk.endTime=se(),this.changes$.next(d.eventBulk)}return s})},r.findDocumentsById=function(n,i){return U(this,null,function*(){$i(this);var o=yield this.internals,s=[];return yield o.dexieDb.transaction("r",o.dexieTable,()=>U(this,null,function*(){var l=yield qh(this.internals,n);l.forEach(d=>{d&&(!d._deleted||i)&&s.push(d)})})),s})},r.query=function(n){return $i(this),Wh(this,n)},r.count=function(n){return U(this,null,function*(){if(n.queryPlan.selectorSatisfiedByIndex){var i=yield sw(this,n);return{count:i,mode:"fast"}}else{var o=yield Wh(this,n);return{count:o.documents.length,mode:"slow"}}})},r.changeStream=function(){return $i(this),this.changes$.asObservable()},r.cleanup=function(n){return U(this,null,function*(){$i(this);var i=yield this.internals;return yield i.dexieDb.transaction("rw",i.dexieTable,()=>U(this,null,function*(){var o=se()-n,s=yield i.dexieTable.where("_meta.lwt").below(o).toArray(),l=[];s.forEach(d=>{d._deleted==="1"&&l.push(d[this.primaryPath])}),yield i.dexieTable.bulkDelete(l)})),!0})},r.getAttachmentData=function(n,i,o){return U(this,null,function*(){$i(this);var s=yield this.internals,l=ss(n,i);return yield s.dexieDb.transaction("r",s.dexieAttachmentsTable,()=>U(this,null,function*(){var d=yield s.dexieAttachmentsTable.get(l);if(d)return d.data;throw new Error("attachment missing documentId: "+n+" attachmentId: "+i)}))})},r.remove=function(){return U(this,null,function*(){$i(this);var n=yield this.internals;return yield n.dexieTable.clear(),this.close()})},r.close=function(){return this.closed?this.closed:(this.closed=U(this,null,function*(){this.changes$.complete(),yield ew(this.internals)}),this.closed)},r.conflictResultionTasks=function(){return new it},r.resolveConflictResultionTask=function(n){return U(this,null,function*(){})},t})();function cw(t,r,e){return U(this,null,function*(){var n=tw(r.databaseName,r.collectionName,e,r.schema),i=new SO(t,r.databaseName,r.collectionName,r.schema,n,r.options,e,r.devMode);return yield I_(iu,r,i),Promise.resolve(i)})}function $i(t){if(t.closed)throw new Error("RxStorageInstanceDexie is closed "+t.databaseName+"-"+t.collectionName)}var EO=(function(){function t(e){this.name=iu,this.rxdbVersion=Ti,this.settings=e}var r=t.prototype;return r.createStorageInstance=function(n){return zb(n),cw(this,n,this.settings)},t})();function lw(t={}){var r=new EO(t);return r}var Kh={};Us(Kh,{$all:()=>EE,$and:()=>ah,$bitsAllClear:()=>uw,$bitsAllSet:()=>dw,$bitsAnyClear:()=>fw,$bitsAnySet:()=>hw,$elemMatch:()=>dh,$eq:()=>kl,$exists:()=>hh,$expr:()=>xE,$gt:()=>Il,$gte:()=>Tl,$in:()=>Ml,$jsonSchema:()=>CE,$lt:()=>Pl,$lte:()=>Nl,$mod:()=>lh,$ne:()=>Ll,$nin:()=>Fl,$nor:()=>sh,$not:()=>ch,$or:()=>Ya,$regex:()=>uh,$size:()=>fh,$type:()=>ph,$where:()=>SE});var Jn=t=>Et((r,e,n)=>{let i=0;if(e instanceof Array)for(let o of e)i=i|1<<o;else i=e;return t(r&i,i)});var uw=Jn((t,r)=>t==0);var dw=Jn((t,r)=>t==r);var fw=Jn((t,r)=>t<r);var hw=Jn((t,r)=>t>0);var ou={};Us(ou,{$addToSet:()=>OO,$bit:()=>AO,$currentDate:()=>kO,$inc:()=>IO,$max:()=>TO,$min:()=>MO,$mul:()=>PO,$pop:()=>NO,$pull:()=>Gh,$pullAll:()=>LO,$push:()=>BO,$rename:()=>$O,$set:()=>Qh,$unset:()=>jO});var Fo=(t,r)=>{switch(t){case"deep":return Do(r);case"copy":return Qn(r)?new Date(r):st(r)?[...r]:dt(r)?$({},r):r;default:return r}},RO=/^[a-z]+[a-zA-Z0-9]*$/;function pw(t){if(!t.includes(".$"))return[{parent:t,selector:t},[]];let r=t.indexOf(".$"),e=t.indexOf("]"),n=t.substring(0,r),i=t.substring(r+3,e);z(i===""||RO.test(i),"The filter <identifier> must begin with a lowercase letter and contain only alphanumeric characters.");let o=t.substring(e+2),[s,l]=o?pw(o):[];return[{selector:t,parent:n,child:i||"$",next:s},[i,...l||[]].filter(Boolean)]}var Ft=(t,r,e,n,i)=>{let{parent:o,child:s,next:l}=r;if(!s){let p=!1;return Ro(t,o,(y,S)=>p=!!n(y,S)||p,i),p}let d=Te(t,o);return st(d)?d.map((p,m)=>e[s]&&!e[s].test({[s]:p})?!1:l?Ft(p,l,e,n,i):n(d,m)).some(Boolean):!1};function zt(t,r,e,n){let i=[];for(let[o,s]of Object.entries(t)){let[l,d]=pw(o);if(!d.length)n(s,l,{})&&i.push(l.parent);else{let p={};r.forEach(y=>{Object.keys(y).forEach(S=>{d.forEach(A=>{(S===A||S.startsWith(A+"."))&&(p[A]=p[A]||{},Object.assign(p[A],{[S]:y[S]}))})})});let m={};for(let[y,S]of Object.entries(p))m[y]=new ie(S,e.queryOptions);n(s,l,m)&&i.push(l.parent)}}return i}var OO=(t,r,e=[],n={})=>zt(r,e,n,(i,o,s)=>{let l={$each:[i]};return dt(i)&&Qt(i,"$each")&&Object.assign(l,i),Ft(t,o,s,(d,p)=>{let m=d[p]||=[];return dn([m,l.$each]).length===l.$each.length?!1:(d[p]=Fo(n.cloneMode,Ha(m.concat(l.$each))),!0)},{buildGraph:!0})});var DO=new Set(["and","or","xor"]),AO=(t,r,e=[],n={})=>zt(r,e,n,(i,o,s)=>{let l=Object.keys(i);return z(l.length===1&&DO.has(l[0]),`Invalid bit operator '${l[0]}'. Must be one of 'and', 'or', or 'xor'.`),Ft(t,o,s,(d,p)=>{let m=d[p],y=i[l[0]];if(m!==void 0&&!(ft(m)&&ft(y)))return!1;switch(m=m||0,l[0]){case"and":d[p]=m&y;break;case"or":d[p]=m|y;break;case"xor":d[p]=m^y;break}return d[p]!==m},{buildGraph:!0})});var kO=(t,r,e=[],n={})=>{let i=Date.now();return zt(r,e,n,(o,s,l)=>Ft(t,s,l,(d,p)=>(d[p]=i,!0),{buildGraph:!0}))};var IO=(t,r,e=[],n={})=>zt(r,e,n,(i,o,s)=>{if(!o.child){let l=Te(t,o.parent);z(l===void 0||ft(l),"cannot apply $inc to a value of non-numeric type")}return Ft(t,o,s,(l,d)=>(l[d]=(l[d]||=0)+i,!0),{buildGraph:!0})});var TO=(t,r,e=[],n={})=>zt(r,e,n,(i,o,s)=>Ft(t,o,s,(l,d)=>l[d]!==void 0&&jt(l[d],i)>-1?!1:(l[d]=i,!0),{buildGraph:!0}));var MO=(t,r,e=[],n={})=>zt(r,e,n,(i,o,s)=>Ft(t,o,s,(l,d)=>l[d]!==void 0&&jt(l[d],i)<1?!1:(l[d]=i,!0),{buildGraph:!0}));var PO=(t,r,e=[],n={})=>zt(r,e,n,(i,o,s)=>Ft(t,o,s,(l,d)=>{let p=l[d];return l[d]=l[d]===void 0?0:l[d]*i,l[d]!==p},{buildGraph:!0}));var NO=(t,r,e=[],n={})=>zt(r,e,n,(i,o,s)=>Ft(t,o,s,(l,d)=>{let p=l[d];return z(st(p),`path '${o.selector}' contains an element of non-array type.`),p.length?(i===-1?p.splice(0,1):p.pop(),!0):!1}));var Gh=(t,r,e=[],n={})=>zt(r,e,n,(i,o,s)=>{let l=!dt(i)||Object.keys(i).some(Ze),d=new ie(l?{k:i}:i,n.queryOptions),p=l?m=>d.test({k:m}):m=>d.test(m);return Ft(t,o,s,(m,y)=>{let S=m[y],A=new Array;return S.map(j=>{let G=p(j);return G||A.push(j),G}).some(Boolean)?(m[y]=A,!0):!1})});var LO=(t,r,e=[],n={})=>{let i={};return Object.entries(r).forEach(([o,s])=>{i[o]={$in:s}}),Gh(t,i,e,n)};var FO=Object.freeze(["$each","$slice","$sort","$position"]),BO=(t,r,e=[],n={})=>zt(r,e,n,(i,o,s)=>{let l={$each:[i]};return dt(i)&&FO.some(d=>Qt(i,d))&&Object.assign(l,i),Ft(t,o,s,(d,p)=>{let m=d[p]||=[],y=m.slice(0,l.$slice||m.length),S=m.length,A=ft(l.$position)?l.$position:m.length;if(m.splice(A,0,...Fo(n.cloneMode,l.$each)),l.$sort){let N=dt(l.$sort)?Object.keys(l.$sort||{}).pop():"",j=N?l.$sort[N]:l.$sort,G=N?tt=>Te(tt,N):tt=>tt;m.sort((tt,rt)=>j*jt(G(tt),G(rt)))}return ft(l.$slice)&&(l.$slice<0?m.splice(0,m.length+l.$slice):m.splice(l.$slice)),S!=m.length||!be(y,m)},{descendArray:!0,buildGraph:!0})});var Qh=(t,r,e=[],n={})=>zt(r,e,n,(i,o,s)=>Ft(t,o,s,(l,d)=>be(l[d],i)?!1:(l[d]=Fo(n.cloneMode,i),!0),{buildGraph:!0}));var $O=(t,r,e=[],n={})=>{let i=[],o=zt(r,e,n,(s,l,d)=>Ft(t,l,d,(p,m)=>Qt(p,m)?(i.push(...Qh(t,{[s]:p[m]},e,n)),delete p[m],!0):!1));return Array.from(new Set(o.concat(i)))};var jO=(t,r,e=[],n={})=>zt(r,e,n,(i,o,s)=>Ft(t,o,s,(l,d)=>Qt(l,d)?(st(l)?l[d]=null:delete l[d],!0):!1));function Yh(t){return t=bt($({},t),{queryOptions:fn(t.queryOptions)}),t.queryOptions.context.addQueryOps(Kh).addExpressionOps(rh).addExpressionOps(nh),(r,e,n=[],i={},o={})=>{let s=Object.assign({cloneMode:"copy"},t,o);Object.assign(s,{queryOptions:fn(Object.assign({useStrictMode:!1},s?.queryOptions))}),n=n||[],i=i||{};let l=Object.entries(e);z(l.length===1,"Update expression must contain only one operator.");let[d,p]=l[0];z(Qt(ou,d),`Update operator '${d}' is not supported.`);let m=ou[d];return Object.keys(i).length&&!(i instanceof ie?i:new ie(i,s.queryOptions)).test(r)?[]:m(r,p,n,s)}}var WY=Yh({});var Xh;function Zh(t,r){if(!Xh){var e=Yh({cloneMode:"none"});Xh=(n,i)=>{var o=dr(n);return e(o,i),o}}return Xh(t,r)}function UO(t){return this.incrementalModify(r=>{var e=Zh(r,t);return e})}function zO(t){var r=this._data,e=Zh(r,t);return this._saveData(e,r)}function VO(t){return U(this,null,function*(){return Yn(this.asRxQuery,r=>r.update(t))})}var mw={name:"update",rxdb:!0,prototypes:{RxDocument:t=>{t.update=zO,t.incrementalUpdate=UO},RxQuery:t=>{t.update=VO}}};var qO={title:"posts schema",version:0,type:"object",primaryKey:"id",properties:{id:{type:"string",primary:!0,maxLength:100},title:{type:"string"},body:{type:"string"}}};function WO(){return U(this,null,function*(){Ql(Jb),Ql(mw),Dm()&&Ql(Q_)})}WO();var lX=(()=>{class t{constructor(){this.dataBaseReadySubj=new fe(!1),this.dataBaseReady$=this.dataBaseReadySubj.asObservable()}getDatabaseCollection(e){if(!this.rxDatabase)throw new Error("Database is not initialized. Please make sure the database is initialized before getting the collection");return this.rxDatabase[e]}initDB(e){return U(this,null,function*(){return this.rxDatabase&&this.rxDatabase.name===e&&!this.rxDatabase.destroyed?this.rxDatabase:(this.rxDatabase=yield s_({name:e,storage:lw(),password:"myLongAndStupidPassword"}),yield this.rxDatabase.addCollections({posts:{schema:qO}}),this.dataBaseReadySubj.next(!0),this.rxDatabase)})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function hX(t){return t&&typeof t.connect=="function"&&!(t instanceof zs)}var HO=(function(t){return t[t.REPLACED=0]="REPLACED",t[t.INSERTED=1]="INSERTED",t[t.MOVED=2]="MOVED",t[t.REMOVED=3]="REMOVED",t})(HO||{}),gX=new ot("_ViewRepeater");var KO=20,cs=(()=>{class t{_ngZone=w(Ct);_platform=w($t);_renderer=w(wr).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new it;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let n=this.scrollContainers.get(e);n&&(n.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=KO){return this._platform.isBrowser?new Rn(n=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let i=e>0?this._scrolled.pipe(td(e)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):lt()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((e,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(e,n){let i=this.getAncestorScrollContainers(e);return this.scrolled(n).pipe(gt(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(e){let n=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,e)&&n.push(o)}),n}_scrollableContainsElement(e,n){let i=$r(n),o=e.getElementRef().nativeElement;do if(i==o)return!0;while(i=i.parentElement);return!1}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),tp=(()=>{class t{elementRef=w(Bt);scrollDispatcher=w(cs);ngZone=w(Ct);dir=w(In,{optional:!0});_scrollElement=this.elementRef.nativeElement;_destroyed=new it;_renderer=w(Nr);_cleanupScroll;_elementScrolled=new it;constructor(){}ngOnInit(){this._cleanupScroll=this.ngZone.runOutsideAngular(()=>this._renderer.listen(this._scrollElement,"scroll",e=>this._elementScrolled.next(e))),this.scrollDispatcher.register(this)}ngOnDestroy(){this._cleanupScroll?.(),this._elementScrolled.complete(),this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){let n=this.elementRef.nativeElement,i=this.dir&&this.dir.value=="rtl";e.left==null&&(e.left=i?e.end:e.start),e.right==null&&(e.right=i?e.start:e.end),e.bottom!=null&&(e.top=n.scrollHeight-n.clientHeight-e.bottom),i&&io()!=Sr.NORMAL?(e.left!=null&&(e.right=n.scrollWidth-n.clientWidth-e.left),io()==Sr.INVERTED?e.left=e.right:io()==Sr.NEGATED&&(e.left=e.right?-e.right:e.right)):e.right!=null&&(e.left=n.scrollWidth-n.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){let n=this.elementRef.nativeElement;fc()?n.scrollTo(e):(e.top!=null&&(n.scrollTop=e.top),e.left!=null&&(n.scrollLeft=e.left))}measureScrollOffset(e){let n="left",i="right",o=this.elementRef.nativeElement;if(e=="top")return o.scrollTop;if(e=="bottom")return o.scrollHeight-o.clientHeight-o.scrollTop;let s=this.dir&&this.dir.value=="rtl";return e=="start"?e=s?i:n:e=="end"&&(e=s?n:i),s&&io()==Sr.INVERTED?e==n?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:s&&io()==Sr.NEGATED?e==n?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:e==n?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}static \u0275fac=function(n){return new(n||t)};static \u0275dir=kt({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return t})(),GO=20,Bo=(()=>{class t{_platform=w($t);_listeners;_viewportSize;_change=new it;_document=w(Lt);constructor(){let e=w(Ct),n=w(wr).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let i=o=>this._change.next(o);this._listeners=[n.listen("window","resize",i),n.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:n,height:i}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+i,right:e.left+n,height:i,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,n=this._getWindow(),i=e.documentElement,o=i.getBoundingClientRect(),s=-o.top||e.body.scrollTop||n.scrollY||i.scrollTop||0,l=-o.left||e.body.scrollLeft||n.scrollX||i.scrollLeft||0;return{top:s,left:l}}change(e=GO){return e>0?this._change.pipe(td(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Jh=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Ht({type:t});static \u0275inj=Wt({})}return t})(),ep=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Ht({type:t});static \u0275inj=Wt({imports:[He,Jh,He,Jh]})}return t})();var gw=fc();function jo(t){return new au(t.get(Bo),t.get(Lt))}var au=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(r,e){this._viewportRuler=r,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let r=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=r.style.left||"",this._previousHTMLStyles.top=r.style.top||"",r.style.left=te(-this._previousScrollPosition.left),r.style.top=te(-this._previousScrollPosition.top),r.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let r=this._document.documentElement,e=this._document.body,n=r.style,i=e.style,o=n.scrollBehavior||"",s=i.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,r.classList.remove("cdk-global-scrollblock"),gw&&(n.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),gw&&(n.scrollBehavior=o,i.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.documentElement,n=this._viewportRuler.getViewportSize();return e.scrollHeight>n.height||e.scrollWidth>n.width}};function Cw(t,r){return new su(t.get(cs),t.get(Ct),t.get(Bo),r)}var su=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(r,e,n,i){this._scrollDispatcher=r,this._ngZone=e,this._viewportRuler=n,this._config=i}attach(r){this._overlayRef,this._overlayRef=r}enable(){if(this._scrollSubscription)return;let r=this._scrollDispatcher.scrolled(0).pipe(gt(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=r.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=r.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var ls=class{enable(){}disable(){}attach(){}};function rp(t,r){return r.some(e=>{let n=t.bottom<e.top,i=t.top>e.bottom,o=t.right<e.left,s=t.left>e.right;return n||i||o||s})}function vw(t,r){return r.some(e=>{let n=t.top<e.top,i=t.bottom>e.bottom,o=t.left<e.left,s=t.right>e.right;return n||i||o||s})}function ap(t,r){return new cu(t.get(cs),t.get(Bo),t.get(Ct),r)}var cu=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(r,e,n,i){this._scrollDispatcher=r,this._viewportRuler=e,this._ngZone=n,this._config=i}attach(r){this._overlayRef,this._overlayRef=r}enable(){if(!this._scrollSubscription){let r=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(r).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:i}=this._viewportRuler.getViewportSize();rp(e,[{width:n,height:i,bottom:i,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Sw=(()=>{class t{_injector=w(wt);constructor(){}noop=()=>new ls;close=e=>Cw(this._injector,e);block=()=>jo(this._injector);reposition=e=>ap(this._injector,e);static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),mn=class{positionStrategy;scrollStrategy=new ls;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;usePopover;constructor(r){if(r){let e=Object.keys(r);for(let n of e)r[n]!==void 0&&(this[n]=r[n])}}};var lu=class{connectionPair;scrollableViewProperties;constructor(r,e){this.connectionPair=r,this.scrollableViewProperties=e}};var Ew=(()=>{class t{_attachedOverlays=[];_document=w(Lt);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let n=this._attachedOverlays.indexOf(e);n>-1&&this._attachedOverlays.splice(n,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Rw=(()=>{class t extends Ew{_ngZone=w(Ct);_renderer=w(wr).createRenderer(null,null);_cleanupKeydown;add(e){super.add(e),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=e=>{let n=this._attachedOverlays;for(let i=n.length-1;i>-1;i--)if(n[i]._keydownEvents.observers.length>0){this._ngZone.run(()=>n[i]._keydownEvents.next(e));break}};static \u0275fac=(()=>{let e;return function(i){return(e||(e=qe(t)))(i||t)}})();static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ow=(()=>{class t extends Ew{_platform=w($t);_ngZone=w(Ct);_renderer=w(wr).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(e){if(super.add(e),!this._isAttached){let n=this._document.body,i={capture:!0},o=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[o.listen(n,"pointerdown",this._pointerDownListener,i),o.listen(n,"click",this._clickListener,i),o.listen(n,"auxclick",this._clickListener,i),o.listen(n,"contextmenu",this._clickListener,i)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(e=>e()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=e=>{this._pointerDownEventTarget=De(e)};_clickListener=e=>{let n=De(e),i=e.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:n;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let s=o.length-1;s>-1;s--){let l=o[s];if(l._outsidePointerEvents.observers.length<1||!l.hasAttached())continue;if(yw(l.overlayElement,n)||yw(l.overlayElement,i))break;let d=l._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(e)):d.next(e)}};static \u0275fac=(()=>{let e;return function(i){return(e||(e=qe(t)))(i||t)}})();static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function yw(t,r){let e=typeof ShadowRoot<"u"&&ShadowRoot,n=r;for(;n;){if(n===t)return!0;n=e&&n instanceof ShadowRoot?n.host:n.parentNode}return!1}var Dw=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=re({type:t,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(n,i){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}.cdk-overlay-popover{background:none;border:none;padding:0;outline:0;overflow:visible;position:fixed;pointer-events:none;white-space:normal;color:inherit;text-decoration:none;width:100%;height:100%;inset:auto;top:0;left:0}.cdk-overlay-popover::backdrop{display:none}.cdk-overlay-popover .cdk-overlay-backdrop{position:fixed;z-index:auto}
`],encapsulation:2,changeDetection:0})}return t})(),fu=(()=>{class t{_platform=w($t);_containerElement;_document=w(Lt);_styleLoader=w(Cr);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||Md()){let i=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<i.length;o++)i[o].remove()}let n=this._document.createElement("div");n.classList.add(e),Md()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}_loadStyles(){this._styleLoader.load(Dw)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),np=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(r,e,n,i){this._renderer=e,this._ngZone=n,this.element=r.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=e.listen(this.element,"click",i)}detach(){this._ngZone.runOutsideAngular(()=>{let r=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(r,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),r.style.pointerEvents="none",r.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}};function sp(t){return t&&t.nodeType===1}var $o=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new it;_attachments=new it;_detachments=new it;_positionStrategy;_scrollStrategy;_locationChanges=rr.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new it;_outsidePointerEvents=new it;_afterNextRenderRef;constructor(r,e,n,i,o,s,l,d,p,m=!1,y,S){this._portalOutlet=r,this._host=e,this._pane=n,this._config=i,this._ngZone=o,this._keyboardDispatcher=s,this._document=l,this._location=d,this._outsideClickDispatcher=p,this._animationsDisabled=m,this._injector=y,this._renderer=S,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(r){this._attachHost();let e=this._portalOutlet.attach(r);return this._positionStrategy?.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=We(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let r=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),r}dispose(){let r=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,r&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(r){r!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=r,this.hasAttached()&&(r.attach(this),this.updatePosition()))}updateSize(r){this._config=$($({},this._config),r),this._updateElementSize()}setDirection(r){this._config=bt($({},this._config),{direction:r}),this._updateElementDirection()}addPanelClass(r){this._pane&&this._toggleClasses(this._pane,r,!0)}removePanelClass(r){this._pane&&this._toggleClasses(this._pane,r,!1)}getDirection(){let r=this._config.direction;return r?typeof r=="string"?r:r.value:"ltr"}updateScrollStrategy(r){r!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=r,this.hasAttached()&&(r.attach(this),r.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let r=this._pane.style;r.width=te(this._config.width),r.height=te(this._config.height),r.minWidth=te(this._config.minWidth),r.minHeight=te(this._config.minHeight),r.maxWidth=te(this._config.maxWidth),r.maxHeight=te(this._config.maxHeight)}_togglePointerEvents(r){this._pane.style.pointerEvents=r?"":"none"}_attachHost(){if(!this._host.parentElement){let r=this._config.usePopover?this._positionStrategy?.getPopoverInsertionPoint?.():null;sp(r)?r.after(this._host):r?.type==="parent"?r.element.appendChild(this._host):this._previousHostParent?.appendChild(this._host)}if(this._config.usePopover)try{this._host.showPopover()}catch{}}_attachBackdrop(){let r="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new np(this._document,this._renderer,this._ngZone,e=>{this._backdropClick.next(e)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._config.usePopover?this._host.prepend(this._backdropRef.element):this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(r))}):this._backdropRef.element.classList.add(r)}_updateStackingOrder(){!this._config.usePopover&&this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(r,e,n){let i=ro(e||[]).filter(o=>!!o);i.length&&(n?r.classList.add(...i):r.classList.remove(...i))}_detachContentWhenEmpty(){let r=!1;try{this._detachContentAfterRenderRef=We(()=>{r=!0,this._detachContent()},{injector:this._injector})}catch(e){if(r)throw e;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let r=this._scrollStrategy;r?.disable(),r?.detach?.()}},bw="cdk-overlay-connected-position-bounding-box",YO=/([A-Za-z%]+)$/;function cp(t,r){return new uu(r,t.get(Bo),t.get(Lt),t.get($t),t.get(fu))}var uu=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new it;_resizeSubscription=rr.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;_popoverLocation="global";positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(r,e,n,i,o){this._viewportRuler=e,this._document=n,this._platform=i,this._overlayContainer=o,this.setOrigin(r)}attach(r){this._overlayRef&&this._overlayRef,this._validatePositions(),r.hostElement.classList.add(bw),this._overlayRef=r,this._boundingBox=r.hostElement,this._pane=r.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let r=this._originRect,e=this._overlayRect,n=this._viewportRect,i=this._containerRect,o=[],s;for(let l of this._preferredPositions){let d=this._getOriginPoint(r,i,l),p=this._getOverlayPoint(d,e,l),m=this._getOverlayFit(p,e,n,l);if(m.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(l,d);return}if(this._canFitWithFlexibleDimensions(m,p,n)){o.push({position:l,origin:d,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(d,l)});continue}(!s||s.overlayFit.visibleArea<m.visibleArea)&&(s={overlayFit:m,overlayPoint:p,originPoint:d,position:l,overlayRect:e})}if(o.length){let l=null,d=-1;for(let p of o){let m=p.boundingBoxRect.width*p.boundingBoxRect.height*(p.position.weight||1);m>d&&(d=m,l=p)}this._isPushed=!1,this._applyPosition(l.position,l.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ji(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(bw),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let r=this._lastPosition;if(r){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,r);this._applyPosition(r,e)}else this.apply()}withScrollableContainers(r){return this._scrollables=r,this}withPositions(r){return this._preferredPositions=r,r.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(r){return this._viewportMargin=r,this}withFlexibleDimensions(r=!0){return this._hasFlexibleDimensions=r,this}withGrowAfterOpen(r=!0){return this._growAfterOpen=r,this}withPush(r=!0){return this._canPush=r,this}withLockedPosition(r=!0){return this._positionLocked=r,this}setOrigin(r){return this._origin=r,this}withDefaultOffsetX(r){return this._offsetX=r,this}withDefaultOffsetY(r){return this._offsetY=r,this}withTransformOriginOn(r){return this._transformOriginSelector=r,this}withPopoverLocation(r){return this._popoverLocation=r,this}getPopoverInsertionPoint(){return this._popoverLocation==="global"?null:this._popoverLocation!=="inline"?this._popoverLocation:this._origin instanceof Bt?this._origin.nativeElement:sp(this._origin)?this._origin:null}_getOriginPoint(r,e,n){let i;if(n.originX=="center")i=r.left+r.width/2;else{let s=this._isRtl()?r.right:r.left,l=this._isRtl()?r.left:r.right;i=n.originX=="start"?s:l}e.left<0&&(i-=e.left);let o;return n.originY=="center"?o=r.top+r.height/2:o=n.originY=="top"?r.top:r.bottom,e.top<0&&(o-=e.top),{x:i,y:o}}_getOverlayPoint(r,e,n){let i;n.overlayX=="center"?i=-e.width/2:n.overlayX==="start"?i=this._isRtl()?-e.width:0:i=this._isRtl()?0:-e.width;let o;return n.overlayY=="center"?o=-e.height/2:o=n.overlayY=="top"?0:-e.height,{x:r.x+i,y:r.y+o}}_getOverlayFit(r,e,n,i){let o=ww(e),{x:s,y:l}=r,d=this._getOffset(i,"x"),p=this._getOffset(i,"y");d&&(s+=d),p&&(l+=p);let m=0-s,y=s+o.width-n.width,S=0-l,A=l+o.height-n.height,N=this._subtractOverflows(o.width,m,y),j=this._subtractOverflows(o.height,S,A),G=N*j;return{visibleArea:G,isCompletelyWithinViewport:o.width*o.height===G,fitsInViewportVertically:j===o.height,fitsInViewportHorizontally:N==o.width}}_canFitWithFlexibleDimensions(r,e,n){if(this._hasFlexibleDimensions){let i=n.bottom-e.y,o=n.right-e.x,s=_w(this._overlayRef.getConfig().minHeight),l=_w(this._overlayRef.getConfig().minWidth),d=r.fitsInViewportVertically||s!=null&&s<=i,p=r.fitsInViewportHorizontally||l!=null&&l<=o;return d&&p}return!1}_pushOverlayOnScreen(r,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:r.x+this._previousPushAmount.x,y:r.y+this._previousPushAmount.y};let i=ww(e),o=this._viewportRect,s=Math.max(r.x+i.width-o.width,0),l=Math.max(r.y+i.height-o.height,0),d=Math.max(o.top-n.top-r.y,0),p=Math.max(o.left-n.left-r.x,0),m=0,y=0;return i.width<=o.width?m=p||-s:m=r.x<this._getViewportMarginStart()?o.left-n.left-r.x:0,i.height<=o.height?y=d||-l:y=r.y<this._getViewportMarginTop()?o.top-n.top-r.y:0,this._previousPushAmount={x:m,y},{x:r.x+m,y:r.y+y}}_applyPosition(r,e){if(this._setTransformOrigin(r),this._setOverlayElementStyles(e,r),this._setBoundingBoxStyles(e,r),r.panelClass&&this._addPanelClasses(r.panelClass),this._positionChanges.observers.length){let n=this._getScrollVisibility();if(r!==this._lastPosition||!this._lastScrollVisibility||!XO(this._lastScrollVisibility,n)){let i=new lu(r,n);this._positionChanges.next(i)}this._lastScrollVisibility=n}this._lastPosition=r,this._isInitialRender=!1}_setTransformOrigin(r){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),n,i=r.overlayY;r.overlayX==="center"?n="center":this._isRtl()?n=r.overlayX==="start"?"right":"left":n=r.overlayX==="start"?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${n} ${i}`}_calculateBoundingBoxRect(r,e){let n=this._viewportRect,i=this._isRtl(),o,s,l;if(e.overlayY==="top")s=r.y,o=n.height-s+this._getViewportMarginBottom();else if(e.overlayY==="bottom")l=n.height-r.y+this._getViewportMarginTop()+this._getViewportMarginBottom(),o=n.height-l+this._getViewportMarginTop();else{let A=Math.min(n.bottom-r.y+n.top,r.y),N=this._lastBoundingBoxSize.height;o=A*2,s=r.y-A,o>N&&!this._isInitialRender&&!this._growAfterOpen&&(s=r.y-N/2)}let d=e.overlayX==="start"&&!i||e.overlayX==="end"&&i,p=e.overlayX==="end"&&!i||e.overlayX==="start"&&i,m,y,S;if(p)S=n.width-r.x+this._getViewportMarginStart()+this._getViewportMarginEnd(),m=r.x-this._getViewportMarginStart();else if(d)y=r.x,m=n.right-r.x-this._getViewportMarginEnd();else{let A=Math.min(n.right-r.x+n.left,r.x),N=this._lastBoundingBoxSize.width;m=A*2,y=r.x-A,m>N&&!this._isInitialRender&&!this._growAfterOpen&&(y=r.x-N/2)}return{top:s,left:y,bottom:l,right:S,width:m,height:o}}_setBoundingBoxStyles(r,e){let n=this._calculateBoundingBoxRect(r,e);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));let i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right="auto",i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;i.width=te(n.width),i.height=te(n.height),i.top=te(n.top)||"auto",i.bottom=te(n.bottom)||"auto",i.left=te(n.left)||"auto",i.right=te(n.right)||"auto",e.overlayX==="center"?i.alignItems="center":i.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?i.justifyContent="center":i.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",o&&(i.maxHeight=te(o)),s&&(i.maxWidth=te(s))}this._lastBoundingBoxSize=n,ji(this._boundingBox.style,i)}_resetBoundingBoxStyles(){ji(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ji(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(r,e){let n={},i=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(i){let m=this._viewportRuler.getViewportScrollPosition();ji(n,this._getExactOverlayY(e,r,m)),ji(n,this._getExactOverlayX(e,r,m))}else n.position="static";let l="",d=this._getOffset(e,"x"),p=this._getOffset(e,"y");d&&(l+=`translateX(${d}px) `),p&&(l+=`translateY(${p}px)`),n.transform=l.trim(),s.maxHeight&&(i?n.maxHeight=te(s.maxHeight):o&&(n.maxHeight="")),s.maxWidth&&(i?n.maxWidth=te(s.maxWidth):o&&(n.maxWidth="")),ji(this._pane.style,n)}_getExactOverlayY(r,e,n){let i={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,r);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),r.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;i.bottom=`${s-(o.y+this._overlayRect.height)}px`}else i.top=te(o.y);return i}_getExactOverlayX(r,e,n){let i={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,r);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n));let s;if(this._isRtl()?s=r.overlayX==="end"?"left":"right":s=r.overlayX==="end"?"right":"left",s==="right"){let l=this._document.documentElement.clientWidth;i.right=`${l-(o.x+this._overlayRect.width)}px`}else i.left=te(o.x);return i}_getScrollVisibility(){let r=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:vw(r,n),isOriginOutsideView:rp(r,n),isOverlayClipped:vw(e,n),isOverlayOutsideView:rp(e,n)}}_subtractOverflows(r,...e){return e.reduce((n,i)=>n-Math.max(i,0),r)}_getNarrowedViewportRect(){let r=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._getViewportMarginTop(),left:n.left+this._getViewportMarginStart(),right:n.left+r-this._getViewportMarginEnd(),bottom:n.top+e-this._getViewportMarginBottom(),width:r-this._getViewportMarginStart()-this._getViewportMarginEnd(),height:e-this._getViewportMarginTop()-this._getViewportMarginBottom()}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(r,e){return e==="x"?r.offsetX==null?this._offsetX:r.offsetX:r.offsetY==null?this._offsetY:r.offsetY}_validatePositions(){}_addPanelClasses(r){this._pane&&ro(r).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(r=>{this._pane.classList.remove(r)}),this._appliedPanelClasses=[])}_getViewportMarginStart(){return typeof this._viewportMargin=="number"?this._viewportMargin:this._viewportMargin?.start??0}_getViewportMarginEnd(){return typeof this._viewportMargin=="number"?this._viewportMargin:this._viewportMargin?.end??0}_getViewportMarginTop(){return typeof this._viewportMargin=="number"?this._viewportMargin:this._viewportMargin?.top??0}_getViewportMarginBottom(){return typeof this._viewportMargin=="number"?this._viewportMargin:this._viewportMargin?.bottom??0}_getOriginRect(){let r=this._origin;if(r instanceof Bt)return r.nativeElement.getBoundingClientRect();if(r instanceof Element)return r.getBoundingClientRect();let e=r.width||0,n=r.height||0;return{top:r.y,bottom:r.y+n,left:r.x,right:r.x+e,height:n,width:e}}};function ji(t,r){for(let e in r)r.hasOwnProperty(e)&&(t[e]=r[e]);return t}function _w(t){if(typeof t!="number"&&t!=null){let[r,e]=t.split(YO);return!e||e==="px"?parseFloat(r):null}return t||null}function ww(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function XO(t,r){return t===r?!0:t.isOriginClipped===r.isOriginClipped&&t.isOriginOutsideView===r.isOriginOutsideView&&t.isOverlayClipped===r.isOverlayClipped&&t.isOverlayOutsideView===r.isOverlayOutsideView}var xw="cdk-global-overlay-wrapper";function ti(t){return new du}var du=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(r){let e=r.getConfig();this._overlayRef=r,this._width&&!e.width&&r.updateSize({width:this._width}),this._height&&!e.height&&r.updateSize({height:this._height}),r.hostElement.classList.add(xw),this._isDisposed=!1}top(r=""){return this._bottomOffset="",this._topOffset=r,this._alignItems="flex-start",this}left(r=""){return this._xOffset=r,this._xPosition="left",this}bottom(r=""){return this._topOffset="",this._bottomOffset=r,this._alignItems="flex-end",this}right(r=""){return this._xOffset=r,this._xPosition="right",this}start(r=""){return this._xOffset=r,this._xPosition="start",this}end(r=""){return this._xOffset=r,this._xPosition="end",this}width(r=""){return this._overlayRef?this._overlayRef.updateSize({width:r}):this._width=r,this}height(r=""){return this._overlayRef?this._overlayRef.updateSize({height:r}):this._height=r,this}centerHorizontally(r=""){return this.left(r),this._xPosition="center",this}centerVertically(r=""){return this.top(r),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let r=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:i,height:o,maxWidth:s,maxHeight:l}=n,d=(i==="100%"||i==="100vw")&&(!s||s==="100%"||s==="100vw"),p=(o==="100%"||o==="100vh")&&(!l||l==="100%"||l==="100vh"),m=this._xPosition,y=this._xOffset,S=this._overlayRef.getConfig().direction==="rtl",A="",N="",j="";d?j="flex-start":m==="center"?(j="center",S?N=y:A=y):S?m==="left"||m==="end"?(j="flex-end",A=y):(m==="right"||m==="start")&&(j="flex-start",N=y):m==="left"||m==="start"?(j="flex-start",A=y):(m==="right"||m==="end")&&(j="flex-end",N=y),r.position=this._cssPosition,r.marginLeft=d?"0":A,r.marginTop=p?"0":this._topOffset,r.marginBottom=this._bottomOffset,r.marginRight=d?"0":N,e.justifyContent=j,e.alignItems=p?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let r=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(xw),n.justifyContent=n.alignItems=r.marginTop=r.marginBottom=r.marginLeft=r.marginRight=r.position="",this._overlayRef=null,this._isDisposed=!0}},Aw=(()=>{class t{_injector=w(wt);constructor(){}global(){return ti()}flexibleConnectedTo(e){return cp(this._injector,e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),lp=new ot("OVERLAY_DEFAULT_CONFIG");function Ui(t,r){t.get(Cr).load(Dw);let e=t.get(fu),n=t.get(Lt),i=t.get(or),o=t.get(ca),s=t.get(In),l=t.get(Nr,null,{optional:!0})||t.get(wr).createRenderer(null,null),d=new mn(r),p=t.get(lp,null,{optional:!0})?.usePopover??!0;d.direction=d.direction||s.value,"showPopover"in n.body?d.usePopover=r?.usePopover??p:d.usePopover=!1;let m=n.createElement("div"),y=n.createElement("div");m.id=i.getId("cdk-overlay-"),m.classList.add("cdk-overlay-pane"),y.appendChild(m),d.usePopover&&(y.setAttribute("popover","manual"),y.classList.add("cdk-overlay-popover"));let S=d.usePopover?d.positionStrategy?.getPopoverInsertionPoint?.():null;return e.getContainerElement().appendChild(y),sp(S)?S.after(y):S?.type==="parent"&&S.element.appendChild(y),new $o(new oc(m,o,t),y,m,d,t.get(Ct),t.get(Rw),n,t.get(Fr),t.get(Ow),r?.disableAnimations??t.get(Zs,null,{optional:!0})==="NoopAnimations",t.get(br),l)}var kw=(()=>{class t{scrollStrategies=w(Sw);_positionBuilder=w(Aw);_injector=w(wt);constructor(){}create(e){return Ui(this._injector,e)}position(){return this._positionBuilder}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ZO=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],JO=new ot("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=w(wt);return()=>ap(t)}}),ip=(()=>{class t{elementRef=w(Bt);constructor(){}static \u0275fac=function(n){return new(n||t)};static \u0275dir=kt({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]})}return t})(),Iw=new ot("cdk-connected-overlay-default-config"),tD=(()=>{class t{_dir=w(In,{optional:!0});_injector=w(wt);_overlayRef;_templatePortal;_backdropSubscription=rr.EMPTY;_attachSubscription=rr.EMPTY;_detachSubscription=rr.EMPTY;_positionSubscription=rr.EMPTY;_offsetX;_offsetY;_position;_scrollStrategyFactory=w(JO);_ngZone=w(Ct);origin;positions;positionStrategy;get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}width;height;minWidth;minHeight;backdropClass;panelClass;viewportMargin=0;scrollStrategy;open=!1;disableClose=!1;transformOriginSelector;hasBackdrop=!1;lockPosition=!1;flexibleDimensions=!1;growAfterOpen=!1;push=!1;disposeOnNavigation=!1;usePopover;matchWidth=!1;set _config(e){typeof e!="string"&&this._assignConfig(e)}backdropClick=new ee;positionChange=new ee;attach=new ee;detach=new ee;overlayKeydown=new ee;overlayOutsideClick=new ee;constructor(){let e=w(nn),n=w(kn),i=w(Iw,{optional:!0}),o=w(lp,{optional:!0});this.usePopover=o?.usePopover===!1?null:"global",this._templatePortal=new Br(e,n),this.scrollStrategy=this._scrollStrategyFactory(),i&&this._assignConfig(i)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef?.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef?.updateSize({width:this._getWidth(),minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this.attachOverlay():this.detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=ZO);let e=this._overlayRef=Ui(this._injector,this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),n.keyCode===27&&!this.disableClose&&!Nn(n)&&(n.preventDefault(),this.detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{let i=this._getOriginElement(),o=De(n);(!i||i!==o&&!i.contains(o))&&this.overlayOutsideClick.next(n)})}_buildConfig(){let e=this._position=this.positionStrategy||this._createPositionStrategy(),n=new mn({direction:this._dir||"ltr",positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation,usePopover:!!this.usePopover});return(this.height||this.height===0)&&(n.height=this.height),(this.minWidth||this.minWidth===0)&&(n.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(e){let n=this.positions.map(i=>({originX:i.originX,originY:i.originY,overlayX:i.overlayX,overlayY:i.overlayY,offsetX:i.offsetX||this.offsetX,offsetY:i.offsetY||this.offsetY,panelClass:i.panelClass||void 0}));return e.setOrigin(this._getOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector).withPopoverLocation(this.usePopover===null?"global":this.usePopover)}_createPositionStrategy(){let e=cp(this._injector,this._getOrigin());return this._updatePositionStrategy(e),e}_getOrigin(){return this.origin instanceof ip?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof ip?this.origin.elementRef.nativeElement:this.origin instanceof Bt?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}_getWidth(){return this.width?this.width:this.matchWidth?this._getOriginElement()?.getBoundingClientRect?.().width:void 0}attachOverlay(){this._overlayRef||this._createOverlay();let e=this._overlayRef;e.getConfig().hasBackdrop=this.hasBackdrop,e.updateSize({width:this._getWidth()}),e.hasAttached()||e.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=e.backdropClick().subscribe(n=>this.backdropClick.emit(n)):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(nm(()=>this.positionChange.observers.length>0)).subscribe(n=>{this._ngZone.run(()=>this.positionChange.emit(n)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()})),this.open=!0}detachOverlay(){this._overlayRef?.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.open=!1}_assignConfig(e){this.origin=e.origin??this.origin,this.positions=e.positions??this.positions,this.positionStrategy=e.positionStrategy??this.positionStrategy,this.offsetX=e.offsetX??this.offsetX,this.offsetY=e.offsetY??this.offsetY,this.width=e.width??this.width,this.height=e.height??this.height,this.minWidth=e.minWidth??this.minWidth,this.minHeight=e.minHeight??this.minHeight,this.backdropClass=e.backdropClass??this.backdropClass,this.panelClass=e.panelClass??this.panelClass,this.viewportMargin=e.viewportMargin??this.viewportMargin,this.scrollStrategy=e.scrollStrategy??this.scrollStrategy,this.disableClose=e.disableClose??this.disableClose,this.transformOriginSelector=e.transformOriginSelector??this.transformOriginSelector,this.hasBackdrop=e.hasBackdrop??this.hasBackdrop,this.lockPosition=e.lockPosition??this.lockPosition,this.flexibleDimensions=e.flexibleDimensions??this.flexibleDimensions,this.growAfterOpen=e.growAfterOpen??this.growAfterOpen,this.push=e.push??this.push,this.disposeOnNavigation=e.disposeOnNavigation??this.disposeOnNavigation,this.usePopover=e.usePopover??this.usePopover,this.matchWidth=e.matchWidth??this.matchWidth}static \u0275fac=function(n){return new(n||t)};static \u0275dir=kt({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",oe],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",oe],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",oe],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",oe],push:[2,"cdkConnectedOverlayPush","push",oe],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",oe],usePopover:[0,"cdkConnectedOverlayUsePopover","usePopover"],matchWidth:[2,"cdkConnectedOverlayMatchWidth","matchWidth",oe],_config:[0,"cdkConnectedOverlay","_config"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Pr]})}return t})(),zi=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Ht({type:t});static \u0275inj=Wt({providers:[kw],imports:[He,sn,ep,ep]})}return t})();function eD(t,r){if(t&1){let e=Sm();Ji(0,"div",1)(1,"button",2),mi("click",function(){am(e);let i=pd();return sm(i.action())}),md(2),hi()()}if(t&2){let e=pd();Xi(2),gd(" ",e.data.action," ")}}var rD=["label"];function nD(t,r){}var iD=Math.pow(2,31)-1,us=class{_overlayRef;instance;containerInstance;_afterDismissed=new it;_afterOpened=new it;_onAction=new it;_durationTimeoutId;_dismissedByAction=!1;constructor(r,e){this._overlayRef=e,this.containerInstance=r,r._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(r){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(r,iD))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},Tw=new ot("MatSnackBarData"),Uo=class{politeness="polite";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"},oD=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=kt({type:t,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return t})(),aD=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=kt({type:t,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return t})(),sD=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=kt({type:t,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return t})(),Mw=(()=>{class t{snackBarRef=w(us);data=w(Tw);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=re({type:t,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["matButton","","matSnackBarAction","",3,"click"]],template:function(n,i){n&1&&(Ji(0,"div",0),md(1),hi(),xm(2,eD,3,1,"div",1)),n&2&&(Xi(),gd(" ",i.data.message,`
`),Xi(),Cm(i.hasAction?2:-1))},dependencies:[wg,oD,aD,sD],styles:[`.mat-mdc-simple-snack-bar{display:flex}.mat-mdc-simple-snack-bar .mat-mdc-snack-bar-label{max-height:50vh;overflow:auto}
`],encapsulation:2,changeDetection:0})}return t})(),up="_mat-snack-bar-enter",dp="_mat-snack-bar-exit",cD=(()=>{class t extends Tn{_ngZone=w(Ct);_elementRef=w(Bt);_changeDetectorRef=w(Lr);_platform=w($t);_animationsDisabled=ar();snackBarConfig=w(Uo);_document=w(Lt);_trackedModals=new Set;_enterFallback;_exitFallback;_injector=w(wt);_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new it;_onExit=new it;_onEnter=new it;_animationState="void";_live;_label;_role;_liveElementId=w(or).getId("mat-snack-bar-container-live-");constructor(){super();let e=this.snackBarConfig;e.politeness==="assertive"&&!e.announcementMessage?this._live="assertive":e.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();let n=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),n}attachTemplatePortal(e){this._assertNotAttached();let n=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),n}attachDomPortal=e=>{this._assertNotAttached();let n=this._portalOutlet.attachDomPortal(e);return this._afterPortalAttached(),n};onAnimationEnd(e){e===dp?this._completeExit():e===up&&(clearTimeout(this._enterFallback),this._ngZone.run(()=>{this._onEnter.next(),this._onEnter.complete()}))}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce(),this._animationsDisabled?We(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(up)))},{injector:this._injector}):(clearTimeout(this._enterFallback),this._enterFallback=setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-snack-bar-fallback-visible"),this.onAnimationEnd(up)},200)))}exit(){return this._destroyed?lt(void 0):(this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._animationsDisabled?We(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(dp)))},{injector:this._injector}):(clearTimeout(this._exitFallback),this._exitFallback=setTimeout(()=>this.onAnimationEnd(dp),200))}),this._onExit)}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){clearTimeout(this._exitFallback),queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let e=this._elementRef.nativeElement,n=this.snackBarConfig.panelClass;n&&(Array.isArray(n)?n.forEach(s=>e.classList.add(s)):e.classList.add(n)),this._exposeToModals();let i=this._label.nativeElement,o="mdc-snackbar__label";i.classList.toggle(o,!i.querySelector(`.${o}`))}_exposeToModals(){let e=this._liveElementId,n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let i=0;i<n.length;i++){let o=n[i],s=o.getAttribute("aria-owns");this._trackedModals.add(o),s?s.indexOf(e)===-1&&o.setAttribute("aria-owns",s+" "+e):o.setAttribute("aria-owns",e)}}_clearFromModals(){this._trackedModals.forEach(e=>{let n=e.getAttribute("aria-owns");if(n){let i=n.replace(this._liveElementId,"").trim();i.length>0?e.setAttribute("aria-owns",i):e.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{if(this._destroyed)return;let e=this._elementRef.nativeElement,n=e.querySelector("[aria-hidden]"),i=e.querySelector("[aria-live]");if(n&&i){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&n.contains(document.activeElement)&&(o=document.activeElement),n.removeAttribute("aria-hidden"),i.appendChild(n),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=re({type:t,selectors:[["mat-snack-bar-container"]],viewQuery:function(n,i){if(n&1&&(to(Mn,7),to(rD,7)),n&2){let o;vi(o=yi())&&(i._portalOutlet=o.first),vi(o=yi())&&(i._label=o.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:6,hostBindings:function(n,i){n&1&&mi("animationend",function(s){return i.onAnimationEnd(s.animationName)})("animationcancel",function(s){return i.onAnimationEnd(s.animationName)}),n&2&&ir("mat-snack-bar-container-enter",i._animationState==="visible")("mat-snack-bar-container-exit",i._animationState==="hidden")("mat-snack-bar-container-animations-enabled",!i._animationsDisabled)},features:[Re],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(n,i){n&1&&(Ji(0,"div",1)(1,"div",2,0)(3,"div",3),Zi(4,nD,0,0,"ng-template",4),hi(),ec(5,"div"),hi()()),n&2&&(Xi(5),xr("aria-live",i._live)("role",i._role)("id",i._liveElementId))},dependencies:[Mn],styles:[`@keyframes _mat-snack-bar-enter{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _mat-snack-bar-exit{from{opacity:1}to{opacity:0}}.mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-snack-bar-container-animations-enabled{opacity:0}.mat-snack-bar-container-animations-enabled.mat-snack-bar-fallback-visible{opacity:1}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-enter{animation:_mat-snack-bar-enter 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-exit{animation:_mat-snack-bar-exit 75ms cubic-bezier(0.4, 0, 1, 1) forwards}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mat-snack-bar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mat-snack-bar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-snack-bar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mat-snack-bar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-snack-bar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-snack-bar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mat-snack-bar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-button-text-state-layer-color: currentColor;--mat-button-text-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}
`],encapsulation:2})}return t})(),lD=new ot("mat-snack-bar-default-options",{providedIn:"root",factory:()=>new Uo}),uD=(()=>{class t{_live=w(Rd);_injector=w(wt);_breakpointObserver=w(ba);_parentSnackBar=w(t,{optional:!0,skipSelf:!0});_defaultConfig=w(lD);_animationsDisabled=ar();_snackBarRefAtThisLevel=null;simpleSnackBarComponent=Mw;snackBarContainerComponent=cD;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){let e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}constructor(){}openFromComponent(e,n){return this._attach(e,n)}openFromTemplate(e,n){return this._attach(e,n)}open(e,n="",i){let o=$($({},this._defaultConfig),i);return o.data={message:e,action:n},o.announcementMessage===e&&(o.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,o)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,n){let i=n&&n.viewContainerRef&&n.viewContainerRef.injector,o=wt.create({parent:i||this._injector,providers:[{provide:Uo,useValue:n}]}),s=new an(this.snackBarContainerComponent,n.viewContainerRef,o),l=e.attach(s);return l.instance.snackBarConfig=n,l.instance}_attach(e,n){let i=$($($({},new Uo),this._defaultConfig),n),o=this._createOverlay(i),s=this._attachSnackBarContainer(o,i),l=new us(s,o);if(e instanceof nn){let d=new Br(e,null,{$implicit:i.data,snackBarRef:l});l.instance=s.attachTemplatePortal(d)}else{let d=this._createInjector(i,l),p=new an(e,void 0,d),m=s.attachComponentPortal(p);l.instance=m.instance}return this._breakpointObserver.observe(lg.HandsetPortrait).pipe(yr(o.detachments())).subscribe(d=>{o.overlayElement.classList.toggle(this.handsetCssClass,d.matches)}),i.announcementMessage&&s._onAnnounce.subscribe(()=>{this._live.announce(i.announcementMessage,i.politeness)}),this._animateSnackBar(l,i),this._openedSnackBarRef=l,this._openedSnackBarRef}_animateSnackBar(e,n){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),n.announcementMessage&&this._live.clear()}),n.duration&&n.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(n.duration)),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter()}_createOverlay(e){let n=new mn;n.direction=e.direction;let i=ti(this._injector),o=e.direction==="rtl",s=e.horizontalPosition==="left"||e.horizontalPosition==="start"&&!o||e.horizontalPosition==="end"&&o,l=!s&&e.horizontalPosition!=="center";return s?i.left("0"):l?i.right("0"):i.centerHorizontally(),e.verticalPosition==="top"?i.top("0"):i.bottom("0"),n.positionStrategy=i,n.disableAnimations=this._animationsDisabled,Ui(this._injector,n)}_createInjector(e,n){let i=e&&e.viewContainerRef&&e.viewContainerRef.injector;return wt.create({parent:i||this._injector,providers:[{provide:us,useValue:n},{provide:Tw,useValue:e.data}]})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var K7=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Ht({type:t});static \u0275inj=Wt({providers:[uD],imports:[zi,sn,xg,Mw,He]})}return t})();var Y7={APP:{POSTS:"app.posts",NOT_FOUND:"app.not-found"},POSTS:{DETAIL:"posts.detail",CREATE:"posts.create",EDIT:"posts.edit"}};function dD(t,r){}var ei=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;disableAnimations=!1;providers;container;templateContext};var hp=(()=>{class t extends Tn{_elementRef=w(Bt);_focusTrapFactory=w(Ed);_config;_interactivityChecker=w(Sd);_ngZone=w(Ct);_focusMonitor=w(ya);_renderer=w(Nr);_changeDetectorRef=w(Lr);_injector=w(wt);_platform=w($t);_document=w(Lt);_portalOutlet;_focusTrapped=new it;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_isDestroyed=!1;constructor(){super(),this._config=w(ei,{optional:!0})||new ei,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(e){this._ariaLabelledByQueue.push(e),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(e){let n=this._ariaLabelledByQueue.indexOf(e);n>-1&&(this._ariaLabelledByQueue.splice(n,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._focusTrapped.complete(),this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();let n=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),n}attachTemplatePortal(e){this._portalOutlet.hasAttached();let n=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),n}attachDomPortal=e=>{this._portalOutlet.hasAttached();let n=this._portalOutlet.attachDomPortal(e);return this._contentAttached(),n};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,n){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let i=()=>{o(),s(),e.removeAttribute("tabindex")},o=this._renderer.listen(e,"blur",i),s=this._renderer.listen(e,"mousedown",i)})),e.focus(n)}_focusByCssSelector(e,n){let i=this._elementRef.nativeElement.querySelector(e);i&&this._forceFocus(i,n)}_trapFocus(e){this._isDestroyed||We(()=>{let n=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||n.focus(e);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(e)||this._focusDialogContainer(e);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',e);break;default:this._focusByCssSelector(this._config.autoFocus,e);break}this._focusTrapped.next()},{injector:this._injector})}_restoreFocus(){let e=this._config.restoreFocus,n=null;if(typeof e=="string"?n=this._document.querySelector(e):typeof e=="boolean"?n=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(n=e),this._config.restoreFocus&&n&&typeof n.focus=="function"){let i=pa(),o=this._elementRef.nativeElement;(!i||i===this._document.body||i===o||o.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(n,this._closeInteractionType),this._closeInteractionType=null):n.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(e){this._elementRef.nativeElement.focus?.(e)}_containsFocus(){let e=this._elementRef.nativeElement,n=pa();return e===n||e.contains(n)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=pa()))}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=re({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(n,i){if(n&1&&to(Mn,7),n&2){let o;vi(o=yi())&&(i._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(n,i){n&2&&xr("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[Re],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(n,i){n&1&&Zi(0,dD,0,0,"ng-template",0)},dependencies:[Mn],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return t})(),ds=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new it;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(r,e){this.overlayRef=r,this.config=e,this.disableClose=e.disableClose,this.backdropClick=r.backdropClick(),this.keydownEvents=r.keydownEvents(),this.outsidePointerEvents=r.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(n=>{n.keyCode===27&&!this.disableClose&&!Nn(n)&&(n.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{!this.disableClose&&this._canClose()?this.close(void 0,{focusOrigin:"mouse"}):this.containerInstance._recaptureFocus?.()}),this._detachSubscription=r.detachments().subscribe(()=>{e.closeOnOverlayDetachments!==!1&&this.close()})}close(r,e){if(this._canClose(r)){let n=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),n.next(r),n.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(r="",e=""){return this.overlayRef.updateSize({width:r,height:e}),this}addPanelClass(r){return this.overlayRef.addPanelClass(r),this}removePanelClass(r){return this.overlayRef.removePanelClass(r),this}_canClose(r){let e=this.config;return!!this.containerInstance&&(!e.closePredicate||e.closePredicate(r,e,this.componentInstance))}},fD=new ot("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=w(wt);return()=>jo(t)}}),hD=new ot("DialogData"),pD=new ot("DefaultDialogConfig");function mD(t){let r=_r(t),e=new ee;return{valueSignal:r,get value(){return r()},change:e,ngOnDestroy(){e.complete()}}}var pp=(()=>{class t{_injector=w(wt);_defaultOptions=w(pD,{optional:!0});_parentDialog=w(t,{optional:!0,skipSelf:!0});_overlayContainer=w(fu);_idGenerator=w(or);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new it;_afterOpenedAtThisLevel=new it;_ariaHiddenElements=new Map;_scrollStrategy=w(fD);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=On(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ve(void 0)));constructor(){}open(e,n){let i=this._defaultOptions||new ei;n=$($({},i),n),n.id=n.id||this._idGenerator.getId("cdk-dialog-"),n.id&&this.getDialogById(n.id);let o=this._getOverlayConfig(n),s=Ui(this._injector,o),l=new ds(s,n),d=this._attachContainer(s,l,n);if(l.containerInstance=d,!this.openDialogs.length){let p=this._overlayContainer.getContainerElement();d._focusTrapped?d._focusTrapped.pipe(Ne(1)).subscribe(()=>{this._hideNonDialogContentFromAssistiveTechnology(p)}):this._hideNonDialogContentFromAssistiveTechnology(p)}return this._attachDialogContent(e,l,d,n),this.openDialogs.push(l),l.closed.subscribe(()=>this._removeOpenDialog(l,!0)),this.afterOpened.next(l),l}closeAll(){fp(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){fp(this._openDialogsAtThisLevel,e=>{e.config.closeOnDestroy===!1&&this._removeOpenDialog(e,!1)}),fp(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){let n=new mn({positionStrategy:e.positionStrategy||ti().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation,disableAnimations:e.disableAnimations});return e.backdropClass&&(n.backdropClass=e.backdropClass),n}_attachContainer(e,n,i){let o=i.injector||i.viewContainerRef?.injector,s=[{provide:ei,useValue:i},{provide:ds,useValue:n},{provide:$o,useValue:e}],l;i.container?typeof i.container=="function"?l=i.container:(l=i.container.type,s.push(...i.container.providers(i))):l=hp;let d=new an(l,i.viewContainerRef,wt.create({parent:o||this._injector,providers:s}));return e.attach(d).instance}_attachDialogContent(e,n,i,o){if(e instanceof nn){let s=this._createInjector(o,n,i,void 0),l={$implicit:o.data,dialogRef:n};o.templateContext&&(l=$($({},l),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),i.attachTemplatePortal(new Br(e,null,l,s))}else{let s=this._createInjector(o,n,i,this._injector),l=i.attachComponentPortal(new an(e,o.viewContainerRef,s));n.componentRef=l,n.componentInstance=l.instance}}_createInjector(e,n,i,o){let s=e.injector||e.viewContainerRef?.injector,l=[{provide:hD,useValue:e.data},{provide:ds,useValue:n}];return e.providers&&(typeof e.providers=="function"?l.push(...e.providers(n,e,i)):l.push(...e.providers)),e.direction&&(!s||!s.get(In,null,{optional:!0}))&&l.push({provide:In,useValue:mD(e.direction)}),wt.create({parent:s||o,providers:l})}_removeOpenDialog(e,n){let i=this.openDialogs.indexOf(e);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,s)=>{o?s.setAttribute("aria-hidden",o):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),n&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(e){if(e.parentElement){let n=e.parentElement.children;for(let i=n.length-1;i>-1;i--){let o=n[i];o!==e&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&!o.hasAttribute("popover")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function fp(t,r){let e=t.length;for(;e--;)r(t[e])}var Pw=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Ht({type:t});static \u0275inj=Wt({providers:[pp],imports:[zi,sn,Od,sn]})}return t})();function gD(t,r){}var pu=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;enterAnimationDuration;exitAnimationDuration},mp="mdc-dialog--open",Nw="mdc-dialog--opening",Lw="mdc-dialog--closing",vD=150,yD=75,bD=(()=>{class t extends hp{_animationStateChanged=new ee;_animationsEnabled=!ar();_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?Bw(this._config.enterAnimationDuration)??vD:0;_exitAnimationDuration=this._animationsEnabled?Bw(this._config.exitAnimationDuration)??yD:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(Fw,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Nw,mp)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(mp),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(mp),this._animationsEnabled?(this._hostElement.style.setProperty(Fw,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Lw)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(e){this._actionSectionCount+=e,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(Nw,Lw)}_waitForAnimationToComplete(e,n){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(n,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(e):e()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(e){let n=super.attachComponentPortal(e);return n.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),n}static \u0275fac=(()=>{let e;return function(i){return(e||(e=qe(t)))(i||t)}})();static \u0275cmp=re({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(n,i){n&2&&(hd("id",i._config.id),xr("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),ir("_mat-animation-noopable",!i._animationsEnabled)("mat-mdc-dialog-container-with-actions",i._actionSectionCount>0))},features:[Re],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(n,i){n&1&&(Ji(0,"div",0)(1,"div",1),Zi(2,gD,0,0,"ng-template",2),hi()())},dependencies:[Mn],styles:[`.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mat-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mat-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mat-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mat-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mat-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mat-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mat-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mat-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mat-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mat-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mat-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mat-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mat-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;box-sizing:border-box;min-height:52px;margin:0;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}
`],encapsulation:2})}return t})(),Fw="--mat-dialog-transition-duration";function Bw(t){return t==null?null:typeof t=="number"?t:t.endsWith("ms")?ga(t.substring(0,t.length-2)):t.endsWith("s")?ga(t.substring(0,t.length-1))*1e3:t==="0"?0:null}var hu=(function(t){return t[t.OPEN=0]="OPEN",t[t.CLOSING=1]="CLOSING",t[t.CLOSED=2]="CLOSED",t})(hu||{}),fs=class{_ref;_config;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new ia(1);_beforeClosed=new ia(1);_result;_closeFallbackTimeout;_state=hu.OPEN;_closeInteractionType;constructor(r,e,n){this._ref=r,this._config=e,this._containerInstance=n,this.disableClose=e.disableClose,this.id=r.id,r.addPanelClass("mat-mdc-dialog-panel"),n._animationStateChanged.pipe(gt(i=>i.state==="opened"),Ne(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),n._animationStateChanged.pipe(gt(i=>i.state==="closed"),Ne(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),r.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),qs(this.backdropClick(),this.keydownEvents().pipe(gt(i=>i.keyCode===27&&!this.disableClose&&!Nn(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),$w(this,i.type==="keydown"?"keyboard":"mouse"))})}close(r){let e=this._config.closePredicate;e&&!e(r,this._config,this.componentInstance)||(this._result=r,this._containerInstance._animationStateChanged.pipe(gt(n=>n.state==="closing"),Ne(1)).subscribe(n=>{this._beforeClosed.next(r),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=hu.CLOSING,this._containerInstance._startExitAnimation())}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(r){let e=this._ref.config.positionStrategy;return r&&(r.left||r.right)?r.left?e.left(r.left):e.right(r.right):e.centerHorizontally(),r&&(r.top||r.bottom)?r.top?e.top(r.top):e.bottom(r.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(r="",e=""){return this._ref.updateSize(r,e),this}addPanelClass(r){return this._ref.addPanelClass(r),this}removePanelClass(r){return this._ref.removePanelClass(r),this}getState(){return this._state}_finishDialogClose(){this._state=hu.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function $w(t,r,e){return t._closeInteractionType=r,t.close(e)}var _D=new ot("MatMdcDialogData"),wD=new ot("mat-mdc-dialog-default-options"),xD=new ot("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let t=w(wt);return()=>jo(t)}}),gp=(()=>{class t{_defaultOptions=w(wD,{optional:!0});_scrollStrategy=w(xD);_parentDialog=w(t,{optional:!0,skipSelf:!0});_idGenerator=w(or);_injector=w(wt);_dialog=w(pp);_animationsDisabled=ar();_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new it;_afterOpenedAtThisLevel=new it;dialogConfigClass=pu;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=On(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ve(void 0)));constructor(){this._dialogRefConstructor=fs,this._dialogContainerType=bD,this._dialogDataToken=_D}open(e,n){let i;n=$($({},this._defaultOptions||new pu),n),n.id=n.id||this._idGenerator.getId("mat-mdc-dialog-"),n.scrollStrategy=n.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(e,bt($({},n),{positionStrategy:ti(this._injector).centerHorizontally().centerVertically(),disableClose:!0,closePredicate:void 0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,disableAnimations:this._animationsDisabled||n.enterAnimationDuration?.toLocaleString()==="0"||n.exitAnimationDuration?.toString()==="0",container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:n},{provide:ei,useValue:n}]},templateContext:()=>({dialogRef:i}),providers:(s,l,d)=>(i=new this._dialogRefConstructor(s,n,d),i.updatePosition(n?.position),[{provide:this._dialogContainerType,useValue:d},{provide:this._dialogDataToken,useValue:l.data},{provide:this._dialogRefConstructor,useValue:i}])}));return i.componentRef=o.componentRef,i.componentInstance=o.componentInstance,this.openDialogs.push(i),this.afterOpened.next(i),i.afterClosed().subscribe(()=>{let s=this.openDialogs.indexOf(i);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||this._getAfterAllClosed().next())}),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let n=e.length;for(;n--;)e[n].close()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),LZ=(()=>{class t{dialogRef=w(fs,{optional:!0});_elementRef=w(Bt);_dialog=w(gp);ariaLabel;type="button";dialogResult;_matDialogClose;constructor(){}ngOnInit(){this.dialogRef||(this.dialogRef=Uw(this._elementRef,this._dialog.openDialogs))}ngOnChanges(e){let n=e._matDialogClose||e._matDialogCloseResult;n&&(this.dialogResult=n.currentValue)}_onButtonClick(e){$w(this.dialogRef,e.screenX===0&&e.screenY===0?"keyboard":"mouse",this.dialogResult)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=kt({type:t,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(n,i){n&1&&mi("click",function(s){return i._onButtonClick(s)}),n&2&&xr("aria-label",i.ariaLabel||null)("type",i.type)},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],type:"type",dialogResult:[0,"mat-dialog-close","dialogResult"],_matDialogClose:[0,"matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[Pr]})}return t})(),jw=(()=>{class t{_dialogRef=w(fs,{optional:!0});_elementRef=w(Bt);_dialog=w(gp);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=Uw(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(n){return new(n||t)};static \u0275dir=kt({type:t})}return t})(),FZ=(()=>{class t extends jw{id=w(or).getId("mat-mdc-dialog-title-");_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static \u0275fac=(()=>{let e;return function(i){return(e||(e=qe(t)))(i||t)}})();static \u0275dir=kt({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(n,i){n&2&&hd("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],features:[Re]})}return t})(),BZ=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=kt({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],features:[ym([tp])]})}return t})(),$Z=(()=>{class t extends jw{align;_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}static \u0275fac=(()=>{let e;return function(i){return(e||(e=qe(t)))(i||t)}})();static \u0275dir=kt({type:t,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(n,i){n&2&&ir("mat-mdc-dialog-actions-align-start",i.align==="start")("mat-mdc-dialog-actions-align-center",i.align==="center")("mat-mdc-dialog-actions-align-end",i.align==="end")},inputs:{align:"align"},features:[Re]})}return t})();function Uw(t,r){let e=t.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-mdc-dialog-container");)e=e.parentElement;return e?r.find(n=>n.id===e.id):null}var jZ=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Ht({type:t});static \u0275inj=Wt({providers:[gp],imports:[Pw,zi,sn,He]})}return t})();export{an as a,Br as b,DD as c,Mn as d,sn as e,fa as f,ha as g,De as h,$t as i,eo as j,ga as k,$r as l,ya as m,Xm as n,Rd as o,Od as p,or as q,Nn as r,Ad as s,kd as t,Nx as u,Lx as v,ck as w,yk as x,ar as y,Ak as z,Vk as A,vg as B,Kx as C,bg as D,wg as E,xg as F,lr as G,ur as H,nf as I,sf as J,Le as K,gv as L,IC as M,Ov as N,Wc as O,Ba as P,yf as Q,MT as R,XC as S,FT as T,lX as U,hX as V,HO as W,gX as X,cs as Y,Bo as Z,Jh as _,ep as $,ap as aa,mn as ba,cp as ca,Ui as da,ip as ea,tD as fa,zi as ga,fs as ha,_D as ia,gp as ja,LZ as ka,FZ as la,BZ as ma,$Z as na,jZ as oa,lD as pa,uD as qa,K7 as ra,Y7 as sa};
