import{a as bt,b as St,c as gt}from"./chunk-LBJJARFQ.js";import{a as nt,b as rt,e as lt,f as dt,g as M,i as ct,j as st,n as pt,o as mt,p as ut,q as ft,s as _t,w as xt,x as Ct}from"./chunk-BVO7CFHV.js";import{a as Ot,b as Vt,c as Rt,d as Ft,e as Nt}from"./chunk-J66TZTIA.js";import{a as Pt}from"./chunk-53WD4D7W.js";import{a as G}from"./chunk-5ZCOCXYS.js";import{a as yt,b as It,c as Mt}from"./chunk-XU3DLW2J.js";import{A as at,C as ot,_ as ht,aa as vt,c as w,e as U,k as Q,m as q,n as H,p as K,s as X,t as Y,y as et,z as it}from"./chunk-6SXHMJ4C.js";import{a as wt,b as Et,c as Tt,d as Dt,e as Bt,f as kt}from"./chunk-FODG6TDP.js";import{Ab as j,Bb as z,Ga as i,Gb as E,Ib as s,Jb as _,Ka as p,Kb as I,L as D,Nb as T,O as B,Ob as L,Pb as n,Qb as r,Ra as R,W as k,Xa as F,bc as A,fa as O,fb as h,gb as x,hb as C,id as W,jd as J,ka as b,la as S,lb as m,ld as Z,mb as l,md as $,nb as d,nd as tt,ob as v,qa as V,sb as g,ub as y,vb as u,zb as N}from"./chunk-NTB3RZ4U.js";var jt=t=>[t],qt=(t,c)=>[t,c];function Ht(t,c){if(t&1){let e=g();l(0,"div",2)(1,"button",12),y("deleted",function(){b(e);let o=u(2);return S(o.onDeleted())}),s(2),n(3,"translate"),d()()}if(t&2){let e=u(2);i(),m("appPostDelete",e.dataSource.data().id),i(),I(" ",r(3,2,"uni.delete")," ")}}function Wt(t,c){if(t&1){let e=g();l(0,"button",13),n(1,"translate"),n(2,"translate"),y("click",function(){b(e);let o=u(2);return o.form.controls.title.setValue(""),S(o.form.controls.body.markAsDirty())}),l(3,"mat-icon"),s(4,"close"),d()()}t&2&&(m("matTooltip",r(1,2,"uni.clear")),h("aria-label",r(2,4,"uni.clear")))}function Jt(t,c){if(t&1){let e=g();l(0,"button",13),n(1,"translate"),n(2,"translate"),y("click",function(){b(e);let o=u(2);return o.form.controls.body.setValue(""),S(o.form.controls.body.markAsDirty())}),l(3,"mat-icon"),s(4,"close"),d()()}t&2&&(m("matTooltip",r(1,2,"uni.clear")),h("aria-label",r(2,4,"uni.clear")))}function Kt(t,c){if(t&1){let e=g();x(0,Ht,4,4,"div",2),l(1,"mat-card")(2,"mat-card-header")(3,"mat-card-subtitle"),s(4),d(),l(5,"mat-card-title"),s(6),d()(),l(7,"mat-card-content",3)(8,"form",4),y("ngSubmit",function(){b(e);let o=u();return S(o.onSubmit())})("reset",function(o){b(e);let f=u();return S(f.onReset(o))}),l(9,"mat-form-field",5)(10,"mat-label"),s(11),n(12,"translate"),d(),v(13,"input",6),x(14,Wt,5,6,"button",7),d(),l(15,"mat-form-field",5)(16,"mat-label"),s(17),n(18,"translate"),d(),v(19,"textarea",8,0),n(21,"translate"),x(22,Jt,5,6,"button",7),d(),l(23,"div",9)(24,"button",10),s(25),n(26,"translate"),d(),l(27,"button",11),s(28),n(29,"translate"),d()()()()()}if(t&2){let e=u();C(e.dataSource.state()==="data"?0:-1),i(3),E("blur-sm",e.dataSource.state()!=="data"),i(),_("#"+e.dataSource.data().id),i(),E("blur-sm",e.dataSource.state()!=="data"),i(),_(e.dataSource.data().title),i(2),m("formGroup",e.form),i(3),_(r(12,17,"form.post.title.label")),i(3),C(e.form.controls.title.value?14:-1),i(3),_(r(18,19,"form.post.body.label")),i(2),m("placeholder",r(21,21,"form.post.body.placeholder")),i(3),C(e.form.controls.body.value?22:-1),i(2),m("disabled",e.form.pristine),i(),I(" ",r(26,23,"uni.reset")," "),i(2),m("disabled",e.form.pristine||e.form.invalid),i(),I(" ",r(29,25,"uni.submit")," ")}}function Xt(t,c){if(t&1&&(l(0,"mat-card")(1,"mat-card-content",14),v(2,"mat-icon",15),n(3,"translate"),l(4,"div"),s(5),d()()()),t&2){let e=u();i(2),h("aria-label",r(3,2,"uni.aria-label.error-icon")),i(3),_(e.dataSource.error())}}function Yt(t,c){t&1&&(l(0,"mat-card")(1,"mat-card-content",14),v(2,"mat-icon",16),n(3,"translate"),l(4,"div"),s(5),n(6,"translate"),d()()()),t&2&&(i(2),h("aria-label",r(3,2,"uni.aria-label.warning-icon")),i(3),_(r(6,4,"error.post-was-not-found")))}function Zt(t,c){if(t&1&&(v(0,"mat-icon",19),n(1,"translate"),l(2,"a",18),n(3,"localize"),s(4),d(),v(5,"mat-icon",19),n(6,"translate"),l(7,"a",18),n(8,"localize"),s(9),n(10,"translate"),d()),t&2){let e=u(2);h("aria-label",r(1,6,"uni.aria-label.arrow-icon")),i(2),m("routerLink",L(16,qt,r(3,8,"/"),e.dataSource.data().id)),i(2),_(e.dataSource.data().id),i(),h("aria-label",r(6,10,"uni.aria-label.arrow-icon")),i(2),m("routerLink",T(19,jt,r(8,12,"/"+e.dataSource.data().id+"/"+e.ROUTE_DEFINITION.POSTS.EDIT))),i(2),I(" ",r(10,14,"breadcrumbs.posts.edit"))}}function $t(t,c){if(t&1&&(l(0,"div",17)(1,"a",18),n(2,"localize"),s(3),n(4,"translate"),d(),x(5,Zt,11,21),d()),t&2){let e=u();i(),m("routerLink",T(7,jt,r(2,3,"/"))),i(2),_(r(4,5,"breadcrumbs.app.posts")),i(2),C(e.dataSource.state()==="data"?5:-1)}}var Ae=(()=>{let c=class c{constructor(a,o,f,P,zt,Lt,At,Ut,Gt,Qt){this.breadcrumbsPortalService=a,this.route=o,this.translate=f,this.lr=P,this.cdr=zt,this.fb=Lt,this.apiService=At,this.confirm=Ut,this.router=Gt,this.snackBar=Qt,this.destroyRef=O(V),this.dataSource=new Ot(Vt),this.ROUTE_DEFINITION=vt,this.form=this.fb.nonNullable.group({title:["",[M.required,M.min(3)]],body:["",[M.required,M.min(3)]]})}canDeactivate(){return this.form.pristine||this.confirm.openCustomConfirmDialog(yt.UnsavedWork)}ngOnInit(){this.breadcrumbsPortalService.setPortal(this.portalContent),setTimeout(()=>this.cdr.markForCheck()),this.route.paramMap.pipe(D(500),Ft(),Nt(this.dataSource),Rt(),k(a=>this.apiService.detail(a)),G(this.destroyRef)).subscribe({next:a=>{this.dataSource.setData(a),this.form.patchValue(a)},error:()=>{let a=this.translate.instant("error.unexpected-exception");this.dataSource.setError(a)}})}ngOnDestroy(){this.portalContent?.detach()}onSubmit(){this.apiService.patch(this.dataSource.data().id,this.form.value).pipe(B()).subscribe({next:a=>{this.dataSource.setData(a),this.form.reset(a),this.snackBar.open(this.translate.instant("response.update.success"),this.translate.instant("uni.close"))},error:a=>{console.log(a),this.snackBar.open(this.translate.instant("response.update.failed"),this.translate.instant("uni.close"))}})}onReset(a){a.preventDefault(),this.form.reset(this.dataSource.data())}onDeleted(){let a=this.lr.translateRoute("/");this.router.navigate([a])}};c.\u0275fac=function(o){return new(o||c)(p(ot),p(K),p(Z),p(et),p(A),p(ft),p(Mt),p(It),p(X),p(ht))},c.\u0275cmp=R({type:c,selectors:[["app-post-edit"]],viewQuery:function(o,f){if(o&1&&N(w,7),o&2){let P;j(P=z())&&(f.portalContent=P.first)}},decls:4,vars:3,consts:[["autosize","cdkTextareaAutosize"],["class","container flex items-center gap-1 py-4",4,"cdkPortal"],[1,"flex","items-end","justify-end","gap-2"],[1,"flex","flex-col","gap-2","mt-2","text-center"],[3,"ngSubmit","reset","formGroup"],[1,"w-full"],["matInput","","type","text","formControlName","title"],["matSuffix","","mat-icon-button","",3,"matTooltip"],["matInput","","cdkTextareaAutosize","","formControlName","body",3,"placeholder"],[1,"flex","justify-center","gap-2"],["mat-button","","color","primary","type","reset",3,"disabled"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["mat-button","","color","accent",3,"deleted","appPostDelete"],["matSuffix","","mat-icon-button","",3,"click","matTooltip"],[1,"flex","flex-col","gap-2","text-center"],["aria-hidden","false","fontIcon","error"],["aria-hidden","false","fontIcon","warning"],[1,"container","flex","items-center","gap-1","py-4"],["mat-button","","color","primary",3,"routerLink"],["aria-hidden","false","fontIcon","chevron_right"]],template:function(o,f){o&1&&(x(0,Kt,30,27),x(1,Xt,6,4,"mat-card"),x(2,Yt,7,6,"mat-card"),F(3,$t,6,9,"div",1)),o&2&&(C(f.dataSource.state()==="loading"||f.dataSource.state()==="data"?0:-1),i(),C(f.dataSource.state()==="error"?1:-1),i(),C(f.dataSource.state()==="empty"?2:-1))},dependencies:[Y,at,it,_t,pt,dt,ct,st,mt,ut,J,W,H,q,Q,kt,wt,Tt,Bt,Dt,Et,Ct,xt,gt,St,lt,nt,rt,bt,tt,$,U,w,Pt],styles:["[_nghost-%COMP%]{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}@media (min-width: 640px){[_nghost-%COMP%]{max-width:640px}}@media (min-width: 768px){[_nghost-%COMP%]{max-width:768px}}@media (min-width: 1024px){[_nghost-%COMP%]{max-width:1024px}}@media (min-width: 1280px){[_nghost-%COMP%]{max-width:1280px}}@media (min-width: 1536px){[_nghost-%COMP%]{max-width:1536px}}[_nghost-%COMP%]{display:block}[_nghost-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}[_nghost-%COMP%]{padding-top:1rem;padding-bottom:1rem}"],changeDetection:0});let t=c;return t})();export{Ae as PostEditComponent};
