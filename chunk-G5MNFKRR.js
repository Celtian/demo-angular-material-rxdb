import{a as gt,b as _t}from"./chunk-OLQABDSE.js";import{a as nt,b as at,e as lt,g as st,h,j as mt,k as pt,m as R,o as ct,p as dt,q as ut,r as ft,t as ht,u as Ct,v as vt}from"./chunk-IA4BRLIW.js";import{a as St,b as xt,c as yt}from"./chunk-4663KPW5.js";import{H as bt,c as _,e as z,f as Q,g as U,h as $,i as q,k as ot}from"./chunk-DVMCS4B5.js";import{a as It,b as Pt,c as Tt,e as wt,f as Bt}from"./chunk-MROKHBPC.js";import{a as Mt}from"./chunk-LHZMLVWU.js";import{$a as N,$c as it,Ca as v,D as O,Da as P,Gb as G,Ha as a,Ia as m,Ja as b,Lc as H,Mc as W,Na as T,Qc as J,R as k,Ra as g,Rc as K,S as D,Ta as w,Uc as X,Vc as Y,W as y,Wc as Z,X as M,Xa as p,Ya as f,Za as B,Zc as tt,_c as et,ab as E,cb as r,cd as rt,db as o,dd as C,gb as V,hb as L,jb as A,la as t,ma as s,oa as j,pa as F,va as I,wa as d}from"./chunk-WBQ336DL.js";function Nt(i,c){if(i&1){let S=T();a(0,"button",10),g("click",function(){y(S);let e=w();return M(e.form.controls.title.setValue(""))}),r(1,"translate"),r(2,"translate"),a(3,"mat-icon"),p(4,"close"),m()()}i&2&&(d("matTooltip",o(2,4,"uni.clear")),I("aria-label",o(1,2,"uni.clear")))}function Vt(i,c){if(i&1){let S=T();a(0,"button",10),g("click",function(){y(S);let e=w();return M(e.form.controls.body.setValue(""))}),r(1,"translate"),r(2,"translate"),a(3,"mat-icon"),p(4,"close"),m()()}i&2&&(d("matTooltip",o(2,4,"uni.clear")),I("aria-label",o(1,2,"uni.clear")))}var Et=i=>[i];function Lt(i,c){i&1&&(a(0,"div",11)(1,"a",12),r(2,"localize"),p(3),r(4,"translate"),m(),b(5,"mat-icon",13),a(6,"a",12),r(7,"localize"),p(8),r(9,"translate"),m()()),i&2&&(t(1),d("routerLink",E(12,Et,o(2,4,"/"))),t(2),f(o(4,6,"breadcrumbs.app.posts")),t(3),d("routerLink",E(14,Et,o(7,8,"/create"))),t(2),f(o(9,10,"breadcrumbs.posts.create")))}var Me=(()=>{let c=class c{constructor(l,e,n,u,x,Rt,Ot,kt,Dt,jt,Ft){this.fb=l,this.apiService=e,this.breadcrumbsPortalService=n,this.cdr=u,this.language=x,this.seoService=Rt,this.translate=Ot,this.lr=kt,this.snackBar=Dt,this.router=jt,this.confirm=Ft,this.destroyRef=k(F),this.ROUTE_DEFINITION=C,this.form=this.fb.group({title:new R("",{nonNullable:!0,validators:[h.required,h.min(3)]}),body:new R("",{nonNullable:!0,validators:[h.required,h.min(3)]})})}canDeactivate(){return this.form.pristine||this.confirm.openCustomConfirmDialog(St.UnsavedWork)}ngOnInit(){this.breadcrumbsPortalService.setPortal(this.portalContent),setTimeout(()=>this.cdr.detectChanges()),this.language.language$.pipe(G(this.destroyRef)).subscribe(()=>{let l=this.lr.translateRoute(`/${C.POSTS.CREATE}`);this.seoService.setSeo({title:this.translate.instant(`seo.${C.POSTS.CREATE}.title`),description:this.translate.instant(`seo.${C.POSTS.CREATE}.description`)},l)})}ngOnDestroy(){this.portalContent?.detach()}onSubmit(){this.apiService.create(this.form.value).pipe(O()).subscribe({next:l=>{this.form.reset(l),this.snackBar.open(this.translate.instant("response.create.success"),this.translate.instant("uni.close"));let e=this.lr.translateRoute("/");this.router.navigate([e])},error:()=>{this.snackBar.open(this.translate.instant("response.create.failed"),this.translate.instant("uni.close"))}})}onReset(l){l.preventDefault(),this.form.reset()}};c.\u0275fac=function(e){return new(e||c)(s(ft),s(yt),s(ot),s(j),s(rt),s(Mt),s(X),s(tt),s(bt),s(J),s(xt))},c.\u0275cmp=D({type:c,selectors:[["app-post-create"]],viewQuery:function(e,n){if(e&1&&L(_,7),e&2){let u;V(u=A())&&(n.portalContent=u.first)}},standalone:!0,features:[N],decls:27,vars:21,consts:[[1,"flex","flex-col","gap-2","mt-2","text-center"],[3,"formGroup","ngSubmit","reset"],[1,"w-full"],["matInput","","type","text","formControlName","title"],["matSuffix","","mat-icon-button","",3,"matTooltip"],["matInput","","formControlName","body",3,"placeholder"],[1,"flex","justify-center","gap-2"],["mat-button","","color","primary","type","reset",3,"disabled"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["class","container flex items-center gap-1 py-4",4,"cdkPortal"],["matSuffix","","mat-icon-button","",3,"matTooltip","click"],[1,"container","flex","items-center","gap-1","py-4"],["mat-button","","color","primary",3,"routerLink"],["aria-hidden","false","aria-label","Arrow icon","fontIcon","chevron_right"]],template:function(e,n){e&1&&(a(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),p(3),m()(),a(4,"mat-card-content",0)(5,"form",1),g("ngSubmit",function(){return n.onSubmit()})("reset",function(x){return n.onReset(x)}),a(6,"mat-form-field",2)(7,"mat-label"),p(8),r(9,"translate"),m(),b(10,"input",3),v(11,Nt,5,6,"button",4),m(),a(12,"mat-form-field",2)(13,"mat-label"),p(14),r(15,"translate"),m(),b(16,"textarea",5),r(17,"translate"),v(18,Vt,5,6,"button",4),m(),a(19,"div",6)(20,"button",7),p(21),r(22,"translate"),m(),a(23,"button",8),p(24),r(25,"translate"),m()()()()(),v(26,Lt,10,16,"div",9)),e&2&&(t(3),f(n.form.controls.title.value),t(2),d("formGroup",n.form),t(3),f(o(9,11,"form.post.title.label")),t(3),P(11,n.form.controls.title.value?11:-1),t(3),f(o(15,13,"form.post.body.label")),t(2),d("placeholder",o(17,15,"form.post.body.placeholder")),t(2),P(18,n.form.controls.body.value?18:-1),t(2),d("disabled",n.form.pristine),t(1),B(" ",o(22,17,"uni.reset")," "),t(2),d("disabled",n.form.pristine||n.form.invalid),t(1),B(" ",o(25,19,"uni.submit")," "))},dependencies:[ht,ct,st,mt,pt,dt,ut,Bt,It,Tt,wt,Pt,W,H,_t,gt,lt,nt,at,q,U,Q,$,vt,Ct,z,_,Z,Y,K,it,et],styles:["[_nghost-%COMP%]{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}@media (min-width: 640px){[_nghost-%COMP%]{max-width:640px}}@media (min-width: 768px){[_nghost-%COMP%]{max-width:768px}}@media (min-width: 1024px){[_nghost-%COMP%]{max-width:1024px}}@media (min-width: 1280px){[_nghost-%COMP%]{max-width:1280px}}@media (min-width: 1536px){[_nghost-%COMP%]{max-width:1536px}}[_nghost-%COMP%]{display:block}[_nghost-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}[_nghost-%COMP%]{padding-top:1rem;padding-bottom:1rem}"],changeDetection:0});let i=c;return i})();export{Me as PostCreateComponent};
