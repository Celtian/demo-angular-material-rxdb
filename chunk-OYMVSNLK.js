import{$ as Yh,$a as Ut,$b as gm,$c as Im,A as ru,Ac as Em,B as qh,Ba as em,Bb as hm,C as to,Ca as Ce,Cb as fu,Da as Zt,Db as mm,Dd as Fm,E as nu,Eb as Fo,F as Io,Fb as pm,G as _t,Ga as rm,Gb as hu,H as ou,Ha as Jt,Hb as qi,Hd as Bm,I as Po,Ib as zr,Ic as Dm,J as Mo,Ja as nm,Jc as Be,Jd as jm,Ka as Lo,Kb as Bo,L as iu,La as om,Lb as oo,M as yr,Ma as $o,Mb as io,Mc as Uo,N as Wh,Na as jr,Nc as Cs,Oa as im,Oc as zo,P as To,Pa as Ur,Pc as Ss,Q as No,Qb as mu,Qc as Rs,R as hn,Ra as am,Rc as gu,S as au,Sa as gn,Sb as pu,Sc as Hi,T as Hh,Tc as Vo,U as Kh,V as su,Vc as Os,W as Qh,Wa as lu,Wc as vu,X as Ui,Xa as _s,Xc as Kt,Y as ar,Ya as uu,Yc as km,Z as Ye,Za as Se,_ as mn,_a as te,_b as jo,_c as Am,a as j,aa as we,ab as sm,ac as wr,b as pt,ba as Oe,bb as fe,cb as cm,cc as he,d as I_,da as ct,db as vn,dc as vm,e as vs,ea as Gt,eb as ro,f as P_,fa as Gh,fb as lm,fc as ym,fd as Pm,g as U,ga as mt,gb as no,gd as Mm,h as vr,ha as cu,hb as um,hc as bm,i as jh,ia as Bt,ib as dm,ic as _m,j as Fi,ja as I,jb as Vi,jd as Tm,k as Bi,ka as zi,kb as du,kc as me,kd as Es,l as Jn,la as bs,lb as xs,ld as Nm,m as at,ma as Xh,mb as Fe,mc as xm,md as qr,n as _e,nc as Wi,nd as yn,o as Uh,oa as eo,ob as _r,od as Ki,pa as br,pb as ws,pc as wm,q as fn,qc as Cm,r as xe,ra as pn,rb as fm,rc as Vr,rd as Wr,s as rt,sa as Zh,t as ji,ta as Jh,u as Ao,ud as Lm,v as zh,vb as xr,w as Vh,wa as de,wb as sr,wd as $m,x as dt,xa as tm,xb as Ge,xc as Sm,y as ys,ya as Xt,yc as Rm,z as Ht,zc as Om}from"./chunk-OUEIIIP4.js";var cb=I_((Df,kf)=>{"use strict";(function(t,e){typeof Df=="object"&&typeof kf<"u"?kf.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self).Dexie=e()})(Df,function(){"use strict";var t=function(a,c){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(a,c)},e=function(){return(e=Object.assign||function(a){for(var c,u=1,f=arguments.length;u<f;u++)for(var h in c=arguments[u])Object.prototype.hasOwnProperty.call(c,h)&&(a[h]=c[h]);return a}).apply(this,arguments)};function r(a,c,u){if(u||arguments.length===2)for(var f,h=0,g=c.length;h<g;h++)!f&&h in c||((f=f||Array.prototype.slice.call(c,0,h))[h]=c[h]);return a.concat(f||Array.prototype.slice.call(c))}var n=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,o=Object.keys,i=Array.isArray;function s(a,c){return typeof c!="object"||o(c).forEach(function(u){a[u]=c[u]}),a}typeof Promise>"u"||n.Promise||(n.Promise=Promise);var l=Object.getPrototypeOf,d={}.hasOwnProperty;function m(a,c){return d.call(a,c)}function p(a,c){typeof c=="function"&&(c=c(l(a))),(typeof Reflect>"u"?o:Reflect.ownKeys)(c).forEach(function(u){C(a,u,c[u])})}var y=Object.defineProperty;function C(a,c,u,f){y(a,c,s(u&&m(u,"get")&&typeof u.get=="function"?{get:u.get,set:u.set,configurable:!0}:{value:u,configurable:!0,writable:!0},f))}function k(a){return{from:function(c){return a.prototype=Object.create(c.prototype),C(a.prototype,"constructor",a),{extend:p.bind(null,a.prototype)}}}}var N=Object.getOwnPropertyDescriptor,B=[].slice;function Y(a,c,u){return B.call(a,c,u)}function et(a,c){return c(a)}function nt(a){if(!a)throw new Error("Assertion Failed")}function J(a){n.setImmediate?setImmediate(a):setTimeout(a,0)}function kt(a,c){if(typeof c=="string"&&m(a,c))return a[c];if(!c)return a;if(typeof c!="string"){for(var u=[],f=0,h=c.length;f<h;++f){var g=kt(a,c[f]);u.push(g)}return u}var v=c.indexOf(".");if(v!==-1){var b=a[c.substr(0,v)];return b==null?void 0:kt(b,c.substr(v+1))}}function st(a,c,u){if(a&&c!==void 0&&!("isFrozen"in Object&&Object.isFrozen(a)))if(typeof c!="string"&&"length"in c){nt(typeof u!="string"&&"length"in u);for(var f=0,h=c.length;f<h;++f)st(a,c[f],u[f])}else{var g,v,b=c.indexOf(".");b!==-1?(g=c.substr(0,b),(v=c.substr(b+1))===""?u===void 0?i(a)&&!isNaN(parseInt(g))?a.splice(g,1):delete a[g]:a[g]=u:st(b=!(b=a[g])||!m(a,g)?a[g]={}:b,v,u)):u===void 0?i(a)&&!isNaN(parseInt(c))?a.splice(c,1):delete a[c]:a[c]=u}}function Pt(a){var c,u={};for(c in a)m(a,c)&&(u[c]=a[c]);return u}var Ot=[].concat;function $t(a){return Ot.apply([],a)}var Fr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat($t([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(c){return c+a+"Array"})}))).filter(function(a){return n[a]}),ue=new Set(Fr.map(function(a){return n[a]})),Le=null;function rr(a){return Le=new WeakMap,a=function c(u){if(!u||typeof u!="object")return u;var f=Le.get(u);if(f)return f;if(i(u)){f=[],Le.set(u,f);for(var h=0,g=u.length;h<g;++h)f.push(c(u[h]))}else if(ue.has(u.constructor))f=u;else{var v,b=l(u);for(v in f=b===Object.prototype?{}:Object.create(b),Le.set(u,f),u)m(u,v)&&(f[v]=c(u[v]))}return f}(a),Le=null,a}var zn={}.toString;function nr(a){return zn.call(a).slice(8,-1)}var wi=typeof Symbol<"u"?Symbol.iterator:"@@iterator",yl=typeof wi=="symbol"?function(a){var c;return a!=null&&(c=a[wi])&&c.apply(a)}:function(){return null};function Lr(a,c){return c=a.indexOf(c),0<=c&&a.splice(c,1),0<=c}var en={};function Ie(a){var c,u,f,h;if(arguments.length===1){if(i(a))return a.slice();if(this===en&&typeof a=="string")return[a];if(h=yl(a)){for(u=[];!(f=h.next()).done;)u.push(f.value);return u}if(a==null)return[a];if(typeof(c=a.length)!="number")return[a];for(u=new Array(c);c--;)u[c]=a[c];return u}for(c=arguments.length,u=new Array(c);c--;)u[c]=arguments[c];return u}var rn=typeof Symbol<"u"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Oi=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Qe=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Oi),Ci={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function or(a,c){this.name=a,this.message=c}function Va(a,c){return a+". Errors: "+Object.keys(c).map(function(u){return c[u].toString()}).filter(function(u,f,h){return h.indexOf(u)===f}).join(`
`)}function re(a,c,u,f){this.failures=c,this.failedKeys=f,this.successCount=u,this.message=Va(a,c)}function ne(a,c){this.name="BulkError",this.failures=Object.keys(c).map(function(u){return c[u]}),this.failuresByPos=c,this.message=Va(a,this.failures)}k(or).from(Error).extend({toString:function(){return this.name+": "+this.message}}),k(re).from(or),k(ne).from(or);var nn=Qe.reduce(function(a,c){return a[c]=c+"Error",a},{}),bl=or,ot=Qe.reduce(function(a,c){var u=c+"Error";function f(h,g){this.name=u,h?typeof h=="string"?(this.message="".concat(h).concat(g?`
 `+g:""),this.inner=g||null):typeof h=="object"&&(this.message="".concat(h.name," ").concat(h.message),this.inner=h):(this.message=Ci[c]||u,this.inner=null)}return k(f).from(bl),a[c]=f,a},{});ot.Syntax=SyntaxError,ot.Type=TypeError,ot.Range=RangeError;var ah=Oi.reduce(function(a,c){return a[c+"Error"]=ot[c],a},{}),qa=Qe.reduce(function(a,c){return["Syntax","Type","Range"].indexOf(c)===-1&&(a[c+"Error"]=ot[c]),a},{});function At(){}function Si(a){return a}function e_(a,c){return a==null||a===Si?c:function(u){return c(a(u))}}function Vn(a,c){return function(){a.apply(this,arguments),c.apply(this,arguments)}}function r_(a,c){return a===At?c:function(){var u=a.apply(this,arguments);u!==void 0&&(arguments[0]=u);var f=this.onsuccess,h=this.onerror;this.onsuccess=null,this.onerror=null;var g=c.apply(this,arguments);return f&&(this.onsuccess=this.onsuccess?Vn(f,this.onsuccess):f),h&&(this.onerror=this.onerror?Vn(h,this.onerror):h),g!==void 0?g:u}}function n_(a,c){return a===At?c:function(){a.apply(this,arguments);var u=this.onsuccess,f=this.onerror;this.onsuccess=this.onerror=null,c.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?Vn(u,this.onsuccess):u),f&&(this.onerror=this.onerror?Vn(f,this.onerror):f)}}function o_(a,c){return a===At?c:function(u){var f=a.apply(this,arguments);s(u,f);var h=this.onsuccess,g=this.onerror;return this.onsuccess=null,this.onerror=null,u=c.apply(this,arguments),h&&(this.onsuccess=this.onsuccess?Vn(h,this.onsuccess):h),g&&(this.onerror=this.onerror?Vn(g,this.onerror):g),f===void 0?u===void 0?void 0:u:s(f,u)}}function i_(a,c){return a===At?c:function(){return c.apply(this,arguments)!==!1&&a.apply(this,arguments)}}function _l(a,c){return a===At?c:function(){var u=a.apply(this,arguments);if(u&&typeof u.then=="function"){for(var f=this,h=arguments.length,g=new Array(h);h--;)g[h]=arguments[h];return u.then(function(){return c.apply(f,g)})}return c.apply(this,arguments)}}qa.ModifyError=re,qa.DexieError=or,qa.BulkError=ne;var mr=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function sh(a){mr=a}var Ri={},ch=100,Fr=typeof Promise>"u"?[]:function(){var a=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[a,l(a),a];var c=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[c,l(c),a]}(),Oi=Fr[0],Qe=Fr[1],Fr=Fr[2],Qe=Qe&&Qe.then,qn=Oi&&Oi.constructor,xl=!!Fr,Ei=function(a,c){Di.push([a,c]),Wa&&(queueMicrotask(s_),Wa=!1)},wl=!0,Wa=!0,Wn=[],Ha=[],Cl=Si,on={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:At,pgp:!1,env:{},finalize:At},tt=on,Di=[],Hn=0,Ka=[];function G(a){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var c=this._PSD=tt;if(typeof a!="function"){if(a!==Ri)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Rl(this,this._value))}this._state=null,this._value=null,++c.ref,function u(f,h){try{h(function(g){if(f._state===null){if(g===f)throw new TypeError("A promise cannot be resolved with itself.");var v=f._lib&&Co();g&&typeof g.then=="function"?u(f,function(b,x){g instanceof G?g._then(b,x):g.then(b,x)}):(f._state=!0,f._value=g,uh(f)),v&&So()}},Rl.bind(null,f))}catch(g){Rl(f,g)}}(this,a)}var Sl={get:function(){var a=tt,c=Xa;function u(f,h){var g=this,v=!a.global&&(a!==tt||c!==Xa),b=v&&!sn(),x=new G(function(S,E){Ol(g,new lh(fh(f,a,v,b),fh(h,a,v,b),S,E,a))});return this._consoleTask&&(x._consoleTask=this._consoleTask),x}return u.prototype=Ri,u},set:function(a){C(this,"then",a&&a.prototype===Ri?Sl:{get:function(){return a},set:Sl.set})}};function lh(a,c,u,f,h){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof c=="function"?c:null,this.resolve=u,this.reject=f,this.psd=h}function Rl(a,c){var u,f;Ha.push(c),a._state===null&&(u=a._lib&&Co(),c=Cl(c),a._state=!1,a._value=c,f=a,Wn.some(function(h){return h._value===f._value})||Wn.push(f),uh(a),u&&So())}function uh(a){var c=a._listeners;a._listeners=[];for(var u=0,f=c.length;u<f;++u)Ol(a,c[u]);var h=a._PSD;--h.ref||h.finalize(),Hn===0&&(++Hn,Ei(function(){--Hn==0&&El()},[]))}function Ol(a,c){if(a._state!==null){var u=a._state?c.onFulfilled:c.onRejected;if(u===null)return(a._state?c.resolve:c.reject)(a._value);++c.psd.ref,++Hn,Ei(a_,[u,a,c])}else a._listeners.push(c)}function a_(a,c,u){try{var f,h=c._value;!c._state&&Ha.length&&(Ha=[]),f=mr&&c._consoleTask?c._consoleTask.run(function(){return a(h)}):a(h),c._state||Ha.indexOf(h)!==-1||function(g){for(var v=Wn.length;v;)if(Wn[--v]._value===g._value)return Wn.splice(v,1)}(c),u.resolve(f)}catch(g){u.reject(g)}finally{--Hn==0&&El(),--u.psd.ref||u.psd.finalize()}}function s_(){Kn(on,function(){Co()&&So()})}function Co(){var a=wl;return Wa=wl=!1,a}function So(){var a,c,u;do for(;0<Di.length;)for(a=Di,Di=[],u=a.length,c=0;c<u;++c){var f=a[c];f[0].apply(null,f[1])}while(0<Di.length);Wa=wl=!0}function El(){var a=Wn;Wn=[],a.forEach(function(f){f._PSD.onunhandled.call(null,f._value,f)});for(var c=Ka.slice(0),u=c.length;u;)c[--u]()}function Qa(a){return new G(Ri,!1,a)}function jt(a,c){var u=tt;return function(){var f=Co(),h=tt;try{return cn(u,!0),a.apply(this,arguments)}catch(g){c&&c(g)}finally{cn(h,!1),f&&So()}}}p(G.prototype,{then:Sl,_then:function(a,c){Ol(this,new lh(null,null,a,c,tt))},catch:function(a){if(arguments.length===1)return this.then(null,a);var c=a,u=arguments[1];return typeof c=="function"?this.then(null,function(f){return(f instanceof c?u:Qa)(f)}):this.then(null,function(f){return(f&&f.name===c?u:Qa)(f)})},finally:function(a){return this.then(function(c){return G.resolve(a()).then(function(){return c})},function(c){return G.resolve(a()).then(function(){return Qa(c)})})},timeout:function(a,c){var u=this;return a<1/0?new G(function(f,h){var g=setTimeout(function(){return h(new ot.Timeout(c))},a);u.then(f,h).finally(clearTimeout.bind(null,g))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&C(G.prototype,Symbol.toStringTag,"Dexie.Promise"),on.env=dh(),p(G,{all:function(){var a=Ie.apply(null,arguments).map(Za);return new G(function(c,u){a.length===0&&c([]);var f=a.length;a.forEach(function(h,g){return G.resolve(h).then(function(v){a[g]=v,--f||c(a)},u)})})},resolve:function(a){return a instanceof G?a:a&&typeof a.then=="function"?new G(function(c,u){a.then(c,u)}):new G(Ri,!0,a)},reject:Qa,race:function(){var a=Ie.apply(null,arguments).map(Za);return new G(function(c,u){a.map(function(f){return G.resolve(f).then(c,u)})})},PSD:{get:function(){return tt},set:function(a){return tt=a}},totalEchoes:{get:function(){return Xa}},newPSD:an,usePSD:Kn,scheduler:{get:function(){return Ei},set:function(a){Ei=a}},rejectionMapper:{get:function(){return Cl},set:function(a){Cl=a}},follow:function(a,c){return new G(function(u,f){return an(function(h,g){var v=tt;v.unhandleds=[],v.onunhandled=g,v.finalize=Vn(function(){var b,x=this;b=function(){x.unhandleds.length===0?h():g(x.unhandleds[0])},Ka.push(function S(){b(),Ka.splice(Ka.indexOf(S),1)}),++Hn,Ei(function(){--Hn==0&&El()},[])},v.finalize),a()},c,u,f)})}}),qn&&(qn.allSettled&&C(G,"allSettled",function(){var a=Ie.apply(null,arguments).map(Za);return new G(function(c){a.length===0&&c([]);var u=a.length,f=new Array(u);a.forEach(function(h,g){return G.resolve(h).then(function(v){return f[g]={status:"fulfilled",value:v}},function(v){return f[g]={status:"rejected",reason:v}}).then(function(){return--u||c(f)})})})}),qn.any&&typeof AggregateError<"u"&&C(G,"any",function(){var a=Ie.apply(null,arguments).map(Za);return new G(function(c,u){a.length===0&&u(new AggregateError([]));var f=a.length,h=new Array(f);a.forEach(function(g,v){return G.resolve(g).then(function(b){return c(b)},function(b){h[v]=b,--f||u(new AggregateError(h))})})})}),qn.withResolvers&&(G.withResolvers=qn.withResolvers));var oe={awaits:0,echoes:0,id:0},c_=0,Ya=[],Ga=0,Xa=0,l_=0;function an(a,c,u,f){var h=tt,g=Object.create(h);return g.parent=h,g.ref=0,g.global=!1,g.id=++l_,on.env,g.env=xl?{Promise:G,PromiseProp:{value:G,configurable:!0,writable:!0},all:G.all,race:G.race,allSettled:G.allSettled,any:G.any,resolve:G.resolve,reject:G.reject}:{},c&&s(g,c),++h.ref,g.finalize=function(){--this.parent.ref||this.parent.finalize()},f=Kn(g,a,u,f),g.ref===0&&g.finalize(),f}function Ro(){return oe.id||(oe.id=++c_),++oe.awaits,oe.echoes+=ch,oe.id}function sn(){return!!oe.awaits&&(--oe.awaits==0&&(oe.id=0),oe.echoes=oe.awaits*ch,!0)}function Za(a){return oe.echoes&&a&&a.constructor===qn?(Ro(),a.then(function(c){return sn(),c},function(c){return sn(),qt(c)})):a}function u_(){var a=Ya[Ya.length-1];Ya.pop(),cn(a,!1)}function cn(a,c){var u,f=tt;(c?!oe.echoes||Ga++&&a===tt:!Ga||--Ga&&a===tt)||queueMicrotask(c?function(h){++Xa,oe.echoes&&--oe.echoes!=0||(oe.echoes=oe.awaits=oe.id=0),Ya.push(tt),cn(h,!0)}.bind(null,a):u_),a!==tt&&(tt=a,f===on&&(on.env=dh()),xl&&(u=on.env.Promise,c=a.env,(f.global||a.global)&&(Object.defineProperty(n,"Promise",c.PromiseProp),u.all=c.all,u.race=c.race,u.resolve=c.resolve,u.reject=c.reject,c.allSettled&&(u.allSettled=c.allSettled),c.any&&(u.any=c.any))))}function dh(){var a=n.Promise;return xl?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(n,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject}:{}}function Kn(a,c,u,f,h){var g=tt;try{return cn(a,!0),c(u,f,h)}finally{cn(g,!1)}}function fh(a,c,u,f){return typeof a!="function"?a:function(){var h=tt;u&&Ro(),cn(c,!0);try{return a.apply(this,arguments)}finally{cn(h,!1),f&&queueMicrotask(sn)}}}function Dl(a){Promise===qn&&oe.echoes===0?Ga===0?a():enqueueNativeMicroTask(a):setTimeout(a,0)}(""+Qe).indexOf("[native code]")===-1&&(Ro=sn=At);var qt=G.reject,Qn="\uFFFF",$r="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",hh="String expected.",Oo=[],Ja="__dbnames",kl="readonly",Al="readwrite";function Yn(a,c){return a?c?function(){return a.apply(this,arguments)&&c.apply(this,arguments)}:a:c}var mh={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ts(a){return typeof a!="string"||/\./.test(a)?function(c){return c}:function(c){return c[a]===void 0&&a in c&&delete(c=rr(c))[a],c}}function ph(){throw ot.Type()}function bt(a,c){try{var u=gh(a),f=gh(c);if(u!==f)return u==="Array"?1:f==="Array"?-1:u==="binary"?1:f==="binary"?-1:u==="string"?1:f==="string"?-1:u==="Date"?1:f!=="Date"?NaN:-1;switch(u){case"number":case"Date":case"string":return c<a?1:a<c?-1:0;case"binary":return function(h,g){for(var v=h.length,b=g.length,x=v<b?v:b,S=0;S<x;++S)if(h[S]!==g[S])return h[S]<g[S]?-1:1;return v===b?0:v<b?-1:1}(vh(a),vh(c));case"Array":return function(h,g){for(var v=h.length,b=g.length,x=v<b?v:b,S=0;S<x;++S){var E=bt(h[S],g[S]);if(E!==0)return E}return v===b?0:v<b?-1:1}(a,c)}}catch{}return NaN}function gh(a){var c=typeof a;return c!="object"?c:ArrayBuffer.isView(a)?"binary":(a=nr(a),a==="ArrayBuffer"?"binary":a)}function vh(a){return a instanceof Uint8Array?a:ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var yh=(Ft.prototype._trans=function(a,c,u){var f=this._tx||tt.trans,h=this.name,g=mr&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(a==="readonly"?"read":"write"," ").concat(this.name));function v(S,E,_){if(!_.schema[h])throw new ot.NotFound("Table "+h+" not part of transaction");return c(_.idbtrans,_)}var b=Co();try{var x=f&&f.db._novip===this.db._novip?f===tt.trans?f._promise(a,v,u):an(function(){return f._promise(a,v,u)},{trans:f,transless:tt.transless||tt}):function S(E,_,A,w){if(E.idbdb&&(E._state.openComplete||tt.letThrough||E._vip)){var O=E._createTransaction(_,A,E._dbSchema);try{O.create(),E._state.PR1398_maxLoop=3}catch(D){return D.name===nn.InvalidState&&E.isOpen()&&0<--E._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),E.close({disableAutoOpen:!1}),E.open().then(function(){return S(E,_,A,w)})):qt(D)}return O._promise(_,function(D,R){return an(function(){return tt.trans=O,w(D,R,O)})}).then(function(D){if(_==="readwrite")try{O.idbtrans.commit()}catch{}return _==="readonly"?D:O._completion.then(function(){return D})})}if(E._state.openComplete)return qt(new ot.DatabaseClosed(E._state.dbOpenError));if(!E._state.isBeingOpened){if(!E._state.autoOpen)return qt(new ot.DatabaseClosed);E.open().catch(At)}return E._state.dbReadyPromise.then(function(){return S(E,_,A,w)})}(this.db,a,[this.name],v);return g&&(x._consoleTask=g,x=x.catch(function(S){return console.trace(S),qt(S)})),x}finally{b&&So()}},Ft.prototype.get=function(a,c){var u=this;return a&&a.constructor===Object?this.where(a).first(c):a==null?qt(new ot.Type("Invalid argument to Table.get()")):this._trans("readonly",function(f){return u.core.get({trans:f,key:a}).then(function(h){return u.hook.reading.fire(h)})}).then(c)},Ft.prototype.where=function(a){if(typeof a=="string")return new this.db.WhereClause(this,a);if(i(a))return new this.db.WhereClause(this,"[".concat(a.join("+"),"]"));var c=o(a);if(c.length===1)return this.where(c[0]).equals(a[c[0]]);var u=this.schema.indexes.concat(this.schema.primKey).filter(function(b){if(b.compound&&c.every(function(S){return 0<=b.keyPath.indexOf(S)})){for(var x=0;x<c.length;++x)if(c.indexOf(b.keyPath[x])===-1)return!1;return!0}return!1}).sort(function(b,x){return b.keyPath.length-x.keyPath.length})[0];if(u&&this.db._maxKey!==Qn){var g=u.keyPath.slice(0,c.length);return this.where(g).equals(g.map(function(x){return a[x]}))}!u&&mr&&console.warn("The query ".concat(JSON.stringify(a)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(c.join("+"),"]"));var f=this.schema.idxByName;function h(b,x){return bt(b,x)===0}var v=c.reduce(function(_,x){var S=_[0],E=_[1],_=f[x],A=a[x];return[S||_,S||!_?Yn(E,_&&_.multi?function(w){return w=kt(w,x),i(w)&&w.some(function(O){return h(A,O)})}:function(w){return h(A,kt(w,x))}):E]},[null,null]),g=v[0],v=v[1];return g?this.where(g.name).equals(a[g.keyPath]).filter(v):u?this.filter(v):this.where(c).equals("")},Ft.prototype.filter=function(a){return this.toCollection().and(a)},Ft.prototype.count=function(a){return this.toCollection().count(a)},Ft.prototype.offset=function(a){return this.toCollection().offset(a)},Ft.prototype.limit=function(a){return this.toCollection().limit(a)},Ft.prototype.each=function(a){return this.toCollection().each(a)},Ft.prototype.toArray=function(a){return this.toCollection().toArray(a)},Ft.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ft.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,i(a)?"[".concat(a.join("+"),"]"):a))},Ft.prototype.reverse=function(){return this.toCollection().reverse()},Ft.prototype.mapToClass=function(a){var c,u=this.db,f=this.name;function h(){return c!==null&&c.apply(this,arguments)||this}(this.schema.mappedClass=a).prototype instanceof ph&&(function(x,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function E(){this.constructor=x}t(x,S),x.prototype=S===null?Object.create(S):(E.prototype=S.prototype,new E)}(h,c=a),Object.defineProperty(h.prototype,"db",{get:function(){return u},enumerable:!1,configurable:!0}),h.prototype.table=function(){return f},a=h);for(var g=new Set,v=a.prototype;v;v=l(v))Object.getOwnPropertyNames(v).forEach(function(x){return g.add(x)});function b(x){if(!x)return x;var S,E=Object.create(a.prototype);for(S in x)if(!g.has(S))try{E[S]=x[S]}catch{}return E}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=b,this.hook("reading",b),a},Ft.prototype.defineClass=function(){return this.mapToClass(function(a){s(this,a)})},Ft.prototype.add=function(a,c){var u=this,f=this.schema.primKey,h=f.auto,g=f.keyPath,v=a;return g&&h&&(v=ts(g)(a)),this._trans("readwrite",function(b){return u.core.mutate({trans:b,type:"add",keys:c!=null?[c]:null,values:[v]})}).then(function(b){return b.numFailures?G.reject(b.failures[0]):b.lastResult}).then(function(b){if(g)try{st(a,g,b)}catch{}return b})},Ft.prototype.update=function(a,c){return typeof a!="object"||i(a)?this.where(":id").equals(a).modify(c):(a=kt(a,this.schema.primKey.keyPath),a===void 0?qt(new ot.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(a).modify(c))},Ft.prototype.put=function(a,c){var u=this,f=this.schema.primKey,h=f.auto,g=f.keyPath,v=a;return g&&h&&(v=ts(g)(a)),this._trans("readwrite",function(b){return u.core.mutate({trans:b,type:"put",values:[v],keys:c!=null?[c]:null})}).then(function(b){return b.numFailures?G.reject(b.failures[0]):b.lastResult}).then(function(b){if(g)try{st(a,g,b)}catch{}return b})},Ft.prototype.delete=function(a){var c=this;return this._trans("readwrite",function(u){return c.core.mutate({trans:u,type:"delete",keys:[a]})}).then(function(u){return u.numFailures?G.reject(u.failures[0]):void 0})},Ft.prototype.clear=function(){var a=this;return this._trans("readwrite",function(c){return a.core.mutate({trans:c,type:"deleteRange",range:mh})}).then(function(c){return c.numFailures?G.reject(c.failures[0]):void 0})},Ft.prototype.bulkGet=function(a){var c=this;return this._trans("readonly",function(u){return c.core.getMany({keys:a,trans:u}).then(function(f){return f.map(function(h){return c.hook.reading.fire(h)})})})},Ft.prototype.bulkAdd=function(a,c,u){var f=this,h=Array.isArray(c)?c:void 0,g=(u=u||(h?void 0:c))?u.allKeys:void 0;return this._trans("readwrite",function(v){var S=f.schema.primKey,b=S.auto,S=S.keyPath;if(S&&h)throw new ot.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(h&&h.length!==a.length)throw new ot.InvalidArgument("Arguments objects and keys must have the same length");var x=a.length,S=S&&b?a.map(ts(S)):a;return f.core.mutate({trans:v,type:"add",keys:h,values:S,wantResults:g}).then(function(O){var _=O.numFailures,A=O.results,w=O.lastResult,O=O.failures;if(_===0)return g?A:w;throw new ne("".concat(f.name,".bulkAdd(): ").concat(_," of ").concat(x," operations failed"),O)})})},Ft.prototype.bulkPut=function(a,c,u){var f=this,h=Array.isArray(c)?c:void 0,g=(u=u||(h?void 0:c))?u.allKeys:void 0;return this._trans("readwrite",function(v){var S=f.schema.primKey,b=S.auto,S=S.keyPath;if(S&&h)throw new ot.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(h&&h.length!==a.length)throw new ot.InvalidArgument("Arguments objects and keys must have the same length");var x=a.length,S=S&&b?a.map(ts(S)):a;return f.core.mutate({trans:v,type:"put",keys:h,values:S,wantResults:g}).then(function(O){var _=O.numFailures,A=O.results,w=O.lastResult,O=O.failures;if(_===0)return g?A:w;throw new ne("".concat(f.name,".bulkPut(): ").concat(_," of ").concat(x," operations failed"),O)})})},Ft.prototype.bulkUpdate=function(a){var c=this,u=this.core,f=a.map(function(v){return v.key}),h=a.map(function(v){return v.changes}),g=[];return this._trans("readwrite",function(v){return u.getMany({trans:v,keys:f,cache:"clone"}).then(function(b){var x=[],S=[];a.forEach(function(_,A){var w=_.key,O=_.changes,D=b[A];if(D){for(var R=0,P=Object.keys(O);R<P.length;R++){var M=P[R],T=O[M];if(M===c.schema.primKey.keyPath){if(bt(T,w)!==0)throw new ot.Constraint("Cannot update primary key in bulkUpdate()")}else st(D,M,T)}g.push(A),x.push(w),S.push(D)}});var E=x.length;return u.mutate({trans:v,type:"put",keys:x,values:S,updates:{keys:f,changeSpecs:h}}).then(function(_){var A=_.numFailures,w=_.failures;if(A===0)return E;for(var O=0,D=Object.keys(w);O<D.length;O++){var R,P=D[O],M=g[Number(P)];M!=null&&(R=w[P],delete w[P],w[M]=R)}throw new ne("".concat(c.name,".bulkUpdate(): ").concat(A," of ").concat(E," operations failed"),w)})})})},Ft.prototype.bulkDelete=function(a){var c=this,u=a.length;return this._trans("readwrite",function(f){return c.core.mutate({trans:f,type:"delete",keys:a})}).then(function(v){var h=v.numFailures,g=v.lastResult,v=v.failures;if(h===0)return g;throw new ne("".concat(c.name,".bulkDelete(): ").concat(h," of ").concat(u," operations failed"),v)})},Ft);function Ft(){}function ki(a){function c(v,b){if(b){for(var x=arguments.length,S=new Array(x-1);--x;)S[x-1]=arguments[x];return u[v].subscribe.apply(null,S),a}if(typeof v=="string")return u[v]}var u={};c.addEventType=g;for(var f=1,h=arguments.length;f<h;++f)g(arguments[f]);return c;function g(v,b,x){if(typeof v!="object"){var S;b=b||i_;var E={subscribers:[],fire:x=x||At,subscribe:function(_){E.subscribers.indexOf(_)===-1&&(E.subscribers.push(_),E.fire=b(E.fire,_))},unsubscribe:function(_){E.subscribers=E.subscribers.filter(function(A){return A!==_}),E.fire=E.subscribers.reduce(b,x)}};return u[v]=c[v]=E}o(S=v).forEach(function(_){var A=S[_];if(i(A))g(_,S[_][0],S[_][1]);else{if(A!=="asap")throw new ot.InvalidArgument("Invalid event config");var w=g(_,Si,function(){for(var O=arguments.length,D=new Array(O);O--;)D[O]=arguments[O];w.subscribers.forEach(function(R){J(function(){R.apply(null,D)})})})}})}}function Ai(a,c){return k(c).from({prototype:a}),c}function Eo(a,c){return!(a.filter||a.algorithm||a.or)&&(c?a.justLimit:!a.replayFilter)}function Il(a,c){a.filter=Yn(a.filter,c)}function Pl(a,c,u){var f=a.replayFilter;a.replayFilter=f?function(){return Yn(f(),c())}:c,a.justLimit=u&&!f}function es(a,c){if(a.isPrimKey)return c.primaryKey;var u=c.getIndexByKeyPath(a.index);if(!u)throw new ot.Schema("KeyPath "+a.index+" on object store "+c.name+" is not indexed");return u}function bh(a,c,u){var f=es(a,c.schema);return c.openCursor({trans:u,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:f,range:a.range}})}function rs(a,c,u,f){var h=a.replayFilter?Yn(a.filter,a.replayFilter()):a.filter;if(a.or){var g={},v=function(b,x,S){var E,_;h&&!h(x,S,function(A){return x.stop(A)},function(A){return x.fail(A)})||((_=""+(E=x.primaryKey))=="[object ArrayBuffer]"&&(_=""+new Uint8Array(E)),m(g,_)||(g[_]=!0,c(b,x,S)))};return Promise.all([a.or._iterate(v,u),_h(bh(a,f,u),a.algorithm,v,!a.keysOnly&&a.valueMapper)])}return _h(bh(a,f,u),Yn(a.algorithm,h),c,!a.keysOnly&&a.valueMapper)}function _h(a,c,u,f){var h=jt(f?function(g,v,b){return u(f(g),v,b)}:u);return a.then(function(g){if(g)return g.start(function(){var v=function(){return g.continue()};c&&!c(g,function(b){return v=b},function(b){g.stop(b),v=At},function(b){g.fail(b),v=At})||h(g.value,g,function(b){return v=b}),v()})})}var Fr=Symbol(),Ii=(xh.prototype.execute=function(a){if(this.add!==void 0){var c=this.add;if(i(c))return r(r([],i(a)?a:[],!0),c,!0).sort();if(typeof c=="number")return(Number(a)||0)+c;if(typeof c=="bigint")try{return BigInt(a)+c}catch{return BigInt(0)+c}throw new TypeError("Invalid term ".concat(c))}if(this.remove!==void 0){var u=this.remove;if(i(u))return i(a)?a.filter(function(f){return!u.includes(f)}).sort():[];if(typeof u=="number")return Number(a)-u;if(typeof u=="bigint")try{return BigInt(a)-u}catch{return BigInt(0)-u}throw new TypeError("Invalid subtrahend ".concat(u))}return c=(c=this.replacePrefix)===null||c===void 0?void 0:c[0],c&&typeof a=="string"&&a.startsWith(c)?this.replacePrefix[1]+a.substring(c.length):a},xh);function xh(a){Object.assign(this,a)}var d_=(xt.prototype._read=function(a,c){var u=this._ctx;return u.error?u.table._trans(null,qt.bind(null,u.error)):u.table._trans("readonly",a).then(c)},xt.prototype._write=function(a){var c=this._ctx;return c.error?c.table._trans(null,qt.bind(null,c.error)):c.table._trans("readwrite",a,"locked")},xt.prototype._addAlgorithm=function(a){var c=this._ctx;c.algorithm=Yn(c.algorithm,a)},xt.prototype._iterate=function(a,c){return rs(this._ctx,a,c,this._ctx.table.core)},xt.prototype.clone=function(a){var c=Object.create(this.constructor.prototype),u=Object.create(this._ctx);return a&&s(u,a),c._ctx=u,c},xt.prototype.raw=function(){return this._ctx.valueMapper=null,this},xt.prototype.each=function(a){var c=this._ctx;return this._read(function(u){return rs(c,a,u,c.table.core)})},xt.prototype.count=function(a){var c=this;return this._read(function(u){var f=c._ctx,h=f.table.core;if(Eo(f,!0))return h.count({trans:u,query:{index:es(f,h.schema),range:f.range}}).then(function(v){return Math.min(v,f.limit)});var g=0;return rs(f,function(){return++g,!1},u,h).then(function(){return g})}).then(a)},xt.prototype.sortBy=function(a,c){var u=a.split(".").reverse(),f=u[0],h=u.length-1;function g(x,S){return S?g(x[u[S]],S-1):x[f]}var v=this._ctx.dir==="next"?1:-1;function b(x,S){return bt(g(x,h),g(S,h))*v}return this.toArray(function(x){return x.sort(b)}).then(c)},xt.prototype.toArray=function(a){var c=this;return this._read(function(u){var f=c._ctx;if(f.dir==="next"&&Eo(f,!0)&&0<f.limit){var h=f.valueMapper,g=es(f,f.table.core.schema);return f.table.core.query({trans:u,limit:f.limit,values:!0,query:{index:g,range:f.range}}).then(function(b){return b=b.result,h?b.map(h):b})}var v=[];return rs(f,function(b){return v.push(b)},u,f.table.core).then(function(){return v})},a)},xt.prototype.offset=function(a){var c=this._ctx;return a<=0||(c.offset+=a,Eo(c)?Pl(c,function(){var u=a;return function(f,h){return u===0||(u===1?--u:h(function(){f.advance(u),u=0}),!1)}}):Pl(c,function(){var u=a;return function(){return--u<0}})),this},xt.prototype.limit=function(a){return this._ctx.limit=Math.min(this._ctx.limit,a),Pl(this._ctx,function(){var c=a;return function(u,f,h){return--c<=0&&f(h),0<=c}},!0),this},xt.prototype.until=function(a,c){return Il(this._ctx,function(u,f,h){return!a(u.value)||(f(h),c)}),this},xt.prototype.first=function(a){return this.limit(1).toArray(function(c){return c[0]}).then(a)},xt.prototype.last=function(a){return this.reverse().first(a)},xt.prototype.filter=function(a){var c;return Il(this._ctx,function(u){return a(u.value)}),(c=this._ctx).isMatch=Yn(c.isMatch,a),this},xt.prototype.and=function(a){return this.filter(a)},xt.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)},xt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},xt.prototype.desc=function(){return this.reverse()},xt.prototype.eachKey=function(a){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(u,f){a(f.key,f)})},xt.prototype.eachUniqueKey=function(a){return this._ctx.unique="unique",this.eachKey(a)},xt.prototype.eachPrimaryKey=function(a){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(u,f){a(f.primaryKey,f)})},xt.prototype.keys=function(a){var c=this._ctx;c.keysOnly=!c.isMatch;var u=[];return this.each(function(f,h){u.push(h.key)}).then(function(){return u}).then(a)},xt.prototype.primaryKeys=function(a){var c=this._ctx;if(c.dir==="next"&&Eo(c,!0)&&0<c.limit)return this._read(function(f){var h=es(c,c.table.core.schema);return c.table.core.query({trans:f,values:!1,limit:c.limit,query:{index:h,range:c.range}})}).then(function(f){return f.result}).then(a);c.keysOnly=!c.isMatch;var u=[];return this.each(function(f,h){u.push(h.primaryKey)}).then(function(){return u}).then(a)},xt.prototype.uniqueKeys=function(a){return this._ctx.unique="unique",this.keys(a)},xt.prototype.firstKey=function(a){return this.limit(1).keys(function(c){return c[0]}).then(a)},xt.prototype.lastKey=function(a){return this.reverse().firstKey(a)},xt.prototype.distinct=function(){var a=this._ctx,a=a.index&&a.table.schema.idxByName[a.index];if(!a||!a.multi)return this;var c={};return Il(this._ctx,function(h){var f=h.primaryKey.toString(),h=m(c,f);return c[f]=!0,!h}),this},xt.prototype.modify=function(a){var c=this,u=this._ctx;return this._write(function(f){var h,g,v;v=typeof a=="function"?a:(h=o(a),g=h.length,function(R){for(var P=!1,M=0;M<g;++M){var T=h[M],F=a[T],V=kt(R,T);F instanceof Ii?(st(R,T,F.execute(V)),P=!0):V!==F&&(st(R,T,F),P=!0)}return P});function b(R,T){var M=T.failures,T=T.numFailures;O+=R-T;for(var F=0,V=o(M);F<V.length;F++){var H=V[F];w.push(M[H])}}var x=u.table.core,S=x.schema.primaryKey,E=S.outbound,_=S.extractKey,A=c.db._options.modifyChunkSize||200,w=[],O=0,D=[];return c.clone().primaryKeys().then(function(R){function P(T){var F=Math.min(A,R.length-T);return x.getMany({trans:f,keys:R.slice(T,T+F),cache:"immutable"}).then(function(V){for(var H=[],q=[],W=E?[]:null,Q=[],K=0;K<F;++K){var Z=V[K],ht={value:rr(Z),primKey:R[T+K]};v.call(ht,ht.value,ht)!==!1&&(ht.value==null?Q.push(R[T+K]):E||bt(_(Z),_(ht.value))===0?(q.push(ht.value),E&&W.push(R[T+K])):(Q.push(R[T+K]),H.push(ht.value)))}return Promise.resolve(0<H.length&&x.mutate({trans:f,type:"add",values:H}).then(function(yt){for(var gt in yt.failures)Q.splice(parseInt(gt),1);b(H.length,yt)})).then(function(){return(0<q.length||M&&typeof a=="object")&&x.mutate({trans:f,type:"put",keys:W,values:q,criteria:M,changeSpec:typeof a!="function"&&a,isAdditionalChunk:0<T}).then(function(yt){return b(q.length,yt)})}).then(function(){return(0<Q.length||M&&a===Ml)&&x.mutate({trans:f,type:"delete",keys:Q,criteria:M,isAdditionalChunk:0<T}).then(function(yt){return b(Q.length,yt)})}).then(function(){return R.length>T+F&&P(T+A)})})}var M=Eo(u)&&u.limit===1/0&&(typeof a!="function"||a===Ml)&&{index:u.index,range:u.range};return P(0).then(function(){if(0<w.length)throw new re("Error modifying one or more objects",w,O,D);return R.length})})})},xt.prototype.delete=function(){var a=this._ctx,c=a.range;return Eo(a)&&(a.isPrimKey||c.type===3)?this._write(function(u){var f=a.table.core.schema.primaryKey,h=c;return a.table.core.count({trans:u,query:{index:f,range:h}}).then(function(g){return a.table.core.mutate({trans:u,type:"deleteRange",range:h}).then(function(v){var b=v.failures;if(v.lastResult,v.results,v=v.numFailures,v)throw new re("Could not delete some values",Object.keys(b).map(function(x){return b[x]}),g-v);return g-v})})}):this.modify(Ml)},xt);function xt(){}var Ml=function(a,c){return c.value=null};function f_(a,c){return a<c?-1:a===c?0:1}function h_(a,c){return c<a?-1:a===c?0:1}function $e(a,c,u){return a=a instanceof Ch?new a.Collection(a):a,a._ctx.error=new(u||TypeError)(c),a}function Do(a){return new a.Collection(a,function(){return wh("")}).limit(0)}function ns(a,c,u,f){var h,g,v,b,x,S,E,_=u.length;if(!u.every(function(O){return typeof O=="string"}))return $e(a,hh);function A(O){h=O==="next"?function(R){return R.toUpperCase()}:function(R){return R.toLowerCase()},g=O==="next"?function(R){return R.toLowerCase()}:function(R){return R.toUpperCase()},v=O==="next"?f_:h_;var D=u.map(function(R){return{lower:g(R),upper:h(R)}}).sort(function(R,P){return v(R.lower,P.lower)});b=D.map(function(R){return R.upper}),x=D.map(function(R){return R.lower}),E=(S=O)==="next"?"":f}A("next"),a=new a.Collection(a,function(){return ln(b[0],x[_-1]+f)}),a._ondirectionchange=function(O){A(O)};var w=0;return a._addAlgorithm(function(O,D,R){var P=O.key;if(typeof P!="string")return!1;var M=g(P);if(c(M,x,w))return!0;for(var T=null,F=w;F<_;++F){var V=function(H,q,W,Q,K,Z){for(var ht=Math.min(H.length,Q.length),yt=-1,gt=0;gt<ht;++gt){var ir=q[gt];if(ir!==Q[gt])return K(H[gt],W[gt])<0?H.substr(0,gt)+W[gt]+W.substr(gt+1):K(H[gt],Q[gt])<0?H.substr(0,gt)+Q[gt]+W.substr(gt+1):0<=yt?H.substr(0,yt)+q[yt]+W.substr(yt+1):null;K(H[gt],ir)<0&&(yt=gt)}return ht<Q.length&&Z==="next"?H+W.substr(H.length):ht<H.length&&Z==="prev"?H.substr(0,W.length):yt<0?null:H.substr(0,yt)+Q[yt]+W.substr(yt+1)}(P,M,b[F],x[F],v,S);V===null&&T===null?w=F+1:(T===null||0<v(T,V))&&(T=V)}return D(T!==null?function(){O.continue(T+E)}:R),!1}),a}function ln(a,c,u,f){return{type:2,lower:a,upper:c,lowerOpen:u,upperOpen:f}}function wh(a){return{type:1,lower:a,upper:a}}var Ch=(Object.defineProperty(ie.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),ie.prototype.between=function(a,c,u,f){u=u!==!1,f=f===!0;try{return 0<this._cmp(a,c)||this._cmp(a,c)===0&&(u||f)&&(!u||!f)?Do(this):new this.Collection(this,function(){return ln(a,c,!u,!f)})}catch{return $e(this,$r)}},ie.prototype.equals=function(a){return a==null?$e(this,$r):new this.Collection(this,function(){return wh(a)})},ie.prototype.above=function(a){return a==null?$e(this,$r):new this.Collection(this,function(){return ln(a,void 0,!0)})},ie.prototype.aboveOrEqual=function(a){return a==null?$e(this,$r):new this.Collection(this,function(){return ln(a,void 0,!1)})},ie.prototype.below=function(a){return a==null?$e(this,$r):new this.Collection(this,function(){return ln(void 0,a,!1,!0)})},ie.prototype.belowOrEqual=function(a){return a==null?$e(this,$r):new this.Collection(this,function(){return ln(void 0,a)})},ie.prototype.startsWith=function(a){return typeof a!="string"?$e(this,hh):this.between(a,a+Qn,!0,!0)},ie.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):ns(this,function(c,u){return c.indexOf(u[0])===0},[a],Qn)},ie.prototype.equalsIgnoreCase=function(a){return ns(this,function(c,u){return c===u[0]},[a],"")},ie.prototype.anyOfIgnoreCase=function(){var a=Ie.apply(en,arguments);return a.length===0?Do(this):ns(this,function(c,u){return u.indexOf(c)!==-1},a,"")},ie.prototype.startsWithAnyOfIgnoreCase=function(){var a=Ie.apply(en,arguments);return a.length===0?Do(this):ns(this,function(c,u){return u.some(function(f){return c.indexOf(f)===0})},a,Qn)},ie.prototype.anyOf=function(){var a=this,c=Ie.apply(en,arguments),u=this._cmp;try{c.sort(u)}catch{return $e(this,$r)}if(c.length===0)return Do(this);var f=new this.Collection(this,function(){return ln(c[0],c[c.length-1])});f._ondirectionchange=function(g){u=g==="next"?a._ascending:a._descending,c.sort(u)};var h=0;return f._addAlgorithm(function(g,v,b){for(var x=g.key;0<u(x,c[h]);)if(++h===c.length)return v(b),!1;return u(x,c[h])===0||(v(function(){g.continue(c[h])}),!1)}),f},ie.prototype.notEqual=function(a){return this.inAnyRange([[-1/0,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},ie.prototype.noneOf=function(){var a=Ie.apply(en,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch{return $e(this,$r)}var c=a.reduce(function(u,f){return u?u.concat([[u[u.length-1][1],f]]):[[-1/0,f]]},null);return c.push([a[a.length-1],this.db._maxKey]),this.inAnyRange(c,{includeLowers:!1,includeUppers:!1})},ie.prototype.inAnyRange=function(P,c){var u=this,f=this._cmp,h=this._ascending,g=this._descending,v=this._min,b=this._max;if(P.length===0)return Do(this);if(!P.every(function(M){return M[0]!==void 0&&M[1]!==void 0&&h(M[0],M[1])<=0}))return $e(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ot.InvalidArgument);var x=!c||c.includeLowers!==!1,S=c&&c.includeUppers===!0,E,_=h;function A(M,T){return _(M[0],T[0])}try{(E=P.reduce(function(M,T){for(var F=0,V=M.length;F<V;++F){var H=M[F];if(f(T[0],H[1])<0&&0<f(T[1],H[0])){H[0]=v(H[0],T[0]),H[1]=b(H[1],T[1]);break}}return F===V&&M.push(T),M},[])).sort(A)}catch{return $e(this,$r)}var w=0,O=S?function(M){return 0<h(M,E[w][1])}:function(M){return 0<=h(M,E[w][1])},D=x?function(M){return 0<g(M,E[w][0])}:function(M){return 0<=g(M,E[w][0])},R=O,P=new this.Collection(this,function(){return ln(E[0][0],E[E.length-1][1],!x,!S)});return P._ondirectionchange=function(M){_=M==="next"?(R=O,h):(R=D,g),E.sort(A)},P._addAlgorithm(function(M,T,F){for(var V,H=M.key;R(H);)if(++w===E.length)return T(F),!1;return!O(V=H)&&!D(V)||(u._cmp(H,E[w][1])===0||u._cmp(H,E[w][0])===0||T(function(){_===h?M.continue(E[w][0]):M.continue(E[w][1])}),!1)}),P},ie.prototype.startsWithAnyOf=function(){var a=Ie.apply(en,arguments);return a.every(function(c){return typeof c=="string"})?a.length===0?Do(this):this.inAnyRange(a.map(function(c){return[c,c+Qn]})):$e(this,"startsWithAnyOf() only works with strings")},ie);function ie(){}function pr(a){return jt(function(c){return Pi(c),a(c.target.error),!1})}function Pi(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var Mi="storagemutated",Tl="x-storagemutated-1",un=ki(null,Mi),m_=(gr.prototype._lock=function(){return nt(!tt.global),++this._reculock,this._reculock!==1||tt.global||(tt.lockOwnerFor=this),this},gr.prototype._unlock=function(){if(nt(!tt.global),--this._reculock==0)for(tt.global||(tt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var a=this._blockedFuncs.shift();try{Kn(a[1],a[0])}catch{}}return this},gr.prototype._locked=function(){return this._reculock&&tt.lockOwnerFor!==this},gr.prototype.create=function(a){var c=this;if(!this.mode)return this;var u=this.db.idbdb,f=this.db._state.dbOpenError;if(nt(!this.idbtrans),!a&&!u)switch(f&&f.name){case"DatabaseClosedError":throw new ot.DatabaseClosed(f);case"MissingAPIError":throw new ot.MissingAPI(f.message,f);default:throw new ot.OpenFailed(f)}if(!this.active)throw new ot.TransactionInactive;return nt(this._completion._state===null),(a=this.idbtrans=a||(this.db.core||u).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=jt(function(h){Pi(h),c._reject(a.error)}),a.onabort=jt(function(h){Pi(h),c.active&&c._reject(new ot.Abort(a.error)),c.active=!1,c.on("abort").fire(h)}),a.oncomplete=jt(function(){c.active=!1,c._resolve(),"mutatedParts"in a&&un.storagemutated.fire(a.mutatedParts)}),this},gr.prototype._promise=function(a,c,u){var f=this;if(a==="readwrite"&&this.mode!=="readwrite")return qt(new ot.ReadOnly("Transaction is readonly"));if(!this.active)return qt(new ot.TransactionInactive);if(this._locked())return new G(function(g,v){f._blockedFuncs.push([function(){f._promise(a,c,u).then(g,v)},tt])});if(u)return an(function(){var g=new G(function(v,b){f._lock();var x=c(v,b,f);x&&x.then&&x.then(v,b)});return g.finally(function(){return f._unlock()}),g._lib=!0,g});var h=new G(function(g,v){var b=c(g,v,f);b&&b.then&&b.then(g,v)});return h._lib=!0,h},gr.prototype._root=function(){return this.parent?this.parent._root():this},gr.prototype.waitFor=function(a){var c,u=this._root(),f=G.resolve(a);u._waitingFor?u._waitingFor=u._waitingFor.then(function(){return f}):(u._waitingFor=f,u._waitingQueue=[],c=u.idbtrans.objectStore(u.storeNames[0]),function g(){for(++u._spinCount;u._waitingQueue.length;)u._waitingQueue.shift()();u._waitingFor&&(c.get(-1/0).onsuccess=g)}());var h=u._waitingFor;return new G(function(g,v){f.then(function(b){return u._waitingQueue.push(jt(g.bind(null,b)))},function(b){return u._waitingQueue.push(jt(v.bind(null,b)))}).finally(function(){u._waitingFor===h&&(u._waitingFor=null)})})},gr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ot.Abort))},gr.prototype.table=function(a){var c=this._memoizedTables||(this._memoizedTables={});if(m(c,a))return c[a];var u=this.schema[a];if(!u)throw new ot.NotFound("Table "+a+" not part of transaction");return u=new this.db.Table(a,u,this),u.core=this.db.core.table(a),c[a]=u},gr);function gr(){}function Nl(a,c,u,f,h,g,v){return{name:a,keyPath:c,unique:u,multi:f,auto:h,compound:g,src:(u&&!v?"&":"")+(f?"*":"")+(h?"++":"")+Sh(c)}}function Sh(a){return typeof a=="string"?a:a?"["+[].join.call(a,"+")+"]":""}function Ll(a,c,u){return{name:a,primKey:c,indexes:u,mappedClass:null,idxByName:(f=function(h){return[h.name,h]},u.reduce(function(h,g,v){return v=f(g,v),v&&(h[v[0]]=v[1]),h},{}))};var f}var Ti=function(a){try{return a.only([[]]),Ti=function(){return[[]]},[[]]}catch{return Ti=function(){return Qn},Qn}};function $l(a){return a==null?function(){}:typeof a=="string"?(c=a).split(".").length===1?function(u){return u[c]}:function(u){return kt(u,c)}:function(u){return kt(u,a)};var c}function Rh(a){return[].slice.call(a)}var p_=0;function Ni(a){return a==null?":id":typeof a=="string"?a:"[".concat(a.join("+"),"]")}function g_(a,c,x){function f(R){if(R.type===3)return null;if(R.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var w=R.lower,O=R.upper,D=R.lowerOpen,R=R.upperOpen;return w===void 0?O===void 0?null:c.upperBound(O,!!R):O===void 0?c.lowerBound(w,!!D):c.bound(w,O,!!D,!!R)}function h(A){var w,O=A.name;return{name:O,schema:A,mutate:function(D){var R=D.trans,P=D.type,M=D.keys,T=D.values,F=D.range;return new Promise(function(V,H){V=jt(V);var q=R.objectStore(O),W=q.keyPath==null,Q=P==="put"||P==="add";if(!Q&&P!=="delete"&&P!=="deleteRange")throw new Error("Invalid operation type: "+P);var K,Z=(M||T||{length:1}).length;if(M&&T&&M.length!==T.length)throw new Error("Given keys array must have same length as given values array.");if(Z===0)return V({numFailures:0,failures:{},results:[],lastResult:void 0});function ht(Re){++ir,Pi(Re)}var yt=[],gt=[],ir=0;if(P==="deleteRange"){if(F.type===4)return V({numFailures:ir,failures:gt,results:[],lastResult:void 0});F.type===3?yt.push(K=q.clear()):yt.push(K=q.delete(f(F)))}else{var W=Q?W?[T,M]:[T,null]:[M,null],vt=W[0],ye=W[1];if(Q)for(var be=0;be<Z;++be)yt.push(K=ye&&ye[be]!==void 0?q[P](vt[be],ye[be]):q[P](vt[be])),K.onerror=ht;else for(be=0;be<Z;++be)yt.push(K=q[P](vt[be])),K.onerror=ht}function gs(Re){Re=Re.target.result,yt.forEach(function(Zn,eu){return Zn.error!=null&&(gt[eu]=Zn.error)}),V({numFailures:ir,failures:gt,results:P==="delete"?M:yt.map(function(Zn){return Zn.result}),lastResult:Re})}K.onerror=function(Re){ht(Re),gs(Re)},K.onsuccess=gs})},getMany:function(D){var R=D.trans,P=D.keys;return new Promise(function(M,T){M=jt(M);for(var F,V=R.objectStore(O),H=P.length,q=new Array(H),W=0,Q=0,K=function(yt){yt=yt.target,q[yt._pos]=yt.result,++Q===W&&M(q)},Z=pr(T),ht=0;ht<H;++ht)P[ht]!=null&&((F=V.get(P[ht]))._pos=ht,F.onsuccess=K,F.onerror=Z,++W);W===0&&M(q)})},get:function(D){var R=D.trans,P=D.key;return new Promise(function(M,T){M=jt(M);var F=R.objectStore(O).get(P);F.onsuccess=function(V){return M(V.target.result)},F.onerror=pr(T)})},query:(w=S,function(D){return new Promise(function(R,P){R=jt(R);var M,T,F,W=D.trans,V=D.values,H=D.limit,K=D.query,q=H===1/0?void 0:H,Q=K.index,K=K.range,W=W.objectStore(O),Q=Q.isPrimaryKey?W:W.index(Q.name),K=f(K);if(H===0)return R({result:[]});w?((q=V?Q.getAll(K,q):Q.getAllKeys(K,q)).onsuccess=function(Z){return R({result:Z.target.result})},q.onerror=pr(P)):(M=0,T=!V&&"openKeyCursor"in Q?Q.openKeyCursor(K):Q.openCursor(K),F=[],T.onsuccess=function(Z){var ht=T.result;return ht?(F.push(V?ht.value:ht.primaryKey),++M===H?R({result:F}):void ht.continue()):R({result:F})},T.onerror=pr(P))})}),openCursor:function(D){var R=D.trans,P=D.values,M=D.query,T=D.reverse,F=D.unique;return new Promise(function(V,H){V=jt(V);var Q=M.index,q=M.range,W=R.objectStore(O),W=Q.isPrimaryKey?W:W.index(Q.name),Q=T?F?"prevunique":"prev":F?"nextunique":"next",K=!P&&"openKeyCursor"in W?W.openKeyCursor(f(q),Q):W.openCursor(f(q),Q);K.onerror=pr(H),K.onsuccess=jt(function(Z){var ht,yt,gt,ir,vt=K.result;vt?(vt.___id=++p_,vt.done=!1,ht=vt.continue.bind(vt),yt=(yt=vt.continuePrimaryKey)&&yt.bind(vt),gt=vt.advance.bind(vt),ir=function(){throw new Error("Cursor not stopped")},vt.trans=R,vt.stop=vt.continue=vt.continuePrimaryKey=vt.advance=function(){throw new Error("Cursor not started")},vt.fail=jt(H),vt.next=function(){var ye=this,be=1;return this.start(function(){return be--?ye.continue():ye.stop()}).then(function(){return ye})},vt.start=function(ye){function be(){if(K.result)try{ye()}catch(Re){vt.fail(Re)}else vt.done=!0,vt.start=function(){throw new Error("Cursor behind last entry")},vt.stop()}var gs=new Promise(function(Re,Zn){Re=jt(Re),K.onerror=pr(Zn),vt.fail=Zn,vt.stop=function(eu){vt.stop=vt.continue=vt.continuePrimaryKey=vt.advance=ir,Re(eu)}});return K.onsuccess=jt(function(Re){K.onsuccess=be,be()}),vt.continue=ht,vt.continuePrimaryKey=yt,vt.advance=gt,be(),gs},V(vt)):V(null)},H)})},count:function(D){var R=D.query,P=D.trans,M=R.index,T=R.range;return new Promise(function(F,V){var H=P.objectStore(O),q=M.isPrimaryKey?H:H.index(M.name),H=f(T),q=H?q.count(H):q.count();q.onsuccess=jt(function(W){return F(W.target.result)}),q.onerror=pr(V)})}}}var g,v,b,E=(v=x,b=Rh((g=a).objectStoreNames),{schema:{name:g.name,tables:b.map(function(A){return v.objectStore(A)}).map(function(A){var w=A.keyPath,R=A.autoIncrement,O=i(w),D={},R={name:A.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:w==null,compound:O,keyPath:w,autoIncrement:R,unique:!0,extractKey:$l(w)},indexes:Rh(A.indexNames).map(function(P){return A.index(P)}).map(function(F){var M=F.name,T=F.unique,V=F.multiEntry,F=F.keyPath,V={name:M,compound:i(F),keyPath:F,unique:T,multiEntry:V,extractKey:$l(F)};return D[Ni(F)]=V}),getIndexByKeyPath:function(P){return D[Ni(P)]}};return D[":id"]=R.primaryKey,w!=null&&(D[Ni(w)]=R.primaryKey),R})},hasGetAll:0<b.length&&"getAll"in v.objectStore(b[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),x=E.schema,S=E.hasGetAll,E=x.tables.map(h),_={};return E.forEach(function(A){return _[A.name]=A}),{stack:"dbcore",transaction:a.transaction.bind(a),table:function(A){if(!_[A])throw new Error("Table '".concat(A,"' not found"));return _[A]},MIN_KEY:-1/0,MAX_KEY:Ti(c),schema:x}}function v_(a,c,u,f){var h=u.IDBKeyRange;return u.indexedDB,{dbcore:(f=g_(c,h,f),a.dbcore.reduce(function(g,v){return v=v.create,e(e({},g),v(g))},f))}}function os(a,f){var u=f.db,f=v_(a._middlewares,u,a._deps,f);a.core=f.dbcore,a.tables.forEach(function(h){var g=h.name;a.core.schema.tables.some(function(v){return v.name===g})&&(h.core=a.core.table(g),a[g]instanceof a.Table&&(a[g].core=h.core))})}function is(a,c,u,f){u.forEach(function(h){var g=f[h];c.forEach(function(v){var b=function x(S,E){return N(S,E)||(S=l(S))&&x(S,E)}(v,h);(!b||"value"in b&&b.value===void 0)&&(v===a.Transaction.prototype||v instanceof a.Transaction?C(v,h,{get:function(){return this.table(h)},set:function(x){y(this,h,{value:x,writable:!0,configurable:!0,enumerable:!0})}}):v[h]=new a.Table(h,g))})})}function Fl(a,c){c.forEach(function(u){for(var f in u)u[f]instanceof a.Table&&delete u[f]})}function y_(a,c){return a._cfg.version-c._cfg.version}function b_(a,c,u,f){var h=a._dbSchema;u.objectStoreNames.contains("$meta")&&!h.$meta&&(h.$meta=Ll("$meta",Eh("")[0],[]),a._storeNames.push("$meta"));var g=a._createTransaction("readwrite",a._storeNames,h);g.create(u),g._completion.catch(f);var v=g._reject.bind(g),b=tt.transless||tt;an(function(){return tt.trans=g,tt.transless=b,c!==0?(os(a,u),S=c,((x=g).storeNames.includes("$meta")?x.table("$meta").get("version").then(function(E){return E??S}):G.resolve(S)).then(function(E){return A=E,w=g,O=u,D=[],E=(_=a)._versions,R=_._dbSchema=ss(0,_.idbdb,O),(E=E.filter(function(P){return P._cfg.version>=A})).length!==0?(E.forEach(function(P){D.push(function(){var M=R,T=P._cfg.dbschema;cs(_,M,O),cs(_,T,O),R=_._dbSchema=T;var F=Bl(M,T);F.add.forEach(function(Q){jl(O,Q[0],Q[1].primKey,Q[1].indexes)}),F.change.forEach(function(Q){if(Q.recreate)throw new ot.Upgrade("Not yet support for changing primary key");var K=O.objectStore(Q.name);Q.add.forEach(function(Z){return as(K,Z)}),Q.change.forEach(function(Z){K.deleteIndex(Z.name),as(K,Z)}),Q.del.forEach(function(Z){return K.deleteIndex(Z)})});var V=P._cfg.contentUpgrade;if(V&&P._cfg.version>A){os(_,O),w._memoizedTables={};var H=Pt(T);F.del.forEach(function(Q){H[Q]=M[Q]}),Fl(_,[_.Transaction.prototype]),is(_,[_.Transaction.prototype],o(H),H),w.schema=H;var q,W=rn(V);return W&&Ro(),F=G.follow(function(){var Q;(q=V(w))&&W&&(Q=sn.bind(null,null),q.then(Q,Q))}),q&&typeof q.then=="function"?G.resolve(q):F.then(function(){return q})}}),D.push(function(M){var T,F,V=P._cfg.dbschema;T=V,F=M,[].slice.call(F.db.objectStoreNames).forEach(function(H){return T[H]==null&&F.db.deleteObjectStore(H)}),Fl(_,[_.Transaction.prototype]),is(_,[_.Transaction.prototype],_._storeNames,_._dbSchema),w.schema=_._dbSchema}),D.push(function(M){_.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(_.idbdb.version/10)===P._cfg.version?(_.idbdb.deleteObjectStore("$meta"),delete _._dbSchema.$meta,_._storeNames=_._storeNames.filter(function(T){return T!=="$meta"})):M.objectStore("$meta").put(P._cfg.version,"version"))})}),function P(){return D.length?G.resolve(D.shift()(w.idbtrans)).then(P):G.resolve()}().then(function(){Oh(R,O)})):G.resolve();var _,A,w,O,D,R}).catch(v)):(o(h).forEach(function(E){jl(u,E,h[E].primKey,h[E].indexes)}),os(a,u),void G.follow(function(){return a.on.populate.fire(g)}).catch(v));var x,S})}function __(a,c){Oh(a._dbSchema,c),c.db.version%10!=0||c.objectStoreNames.contains("$meta")||c.db.createObjectStore("$meta").add(Math.ceil(c.db.version/10-1),"version");var u=ss(0,a.idbdb,c);cs(a,a._dbSchema,c);for(var f=0,h=Bl(u,a._dbSchema).change;f<h.length;f++){var g=function(v){if(v.change.length||v.recreate)return console.warn("Unable to patch indexes of table ".concat(v.name," because it has changes on the type of index or primary key.")),{value:void 0};var b=c.objectStore(v.name);v.add.forEach(function(x){mr&&console.debug("Dexie upgrade patch: Creating missing index ".concat(v.name,".").concat(x.src)),as(b,x)})}(h[f]);if(typeof g=="object")return g.value}}function Bl(a,c){var u,f={del:[],add:[],change:[]};for(u in a)c[u]||f.del.push(u);for(u in c){var h=a[u],g=c[u];if(h){var v={name:u,def:g,recreate:!1,del:[],add:[],change:[]};if(""+(h.primKey.keyPath||"")!=""+(g.primKey.keyPath||"")||h.primKey.auto!==g.primKey.auto)v.recreate=!0,f.change.push(v);else{var b=h.idxByName,x=g.idxByName,S=void 0;for(S in b)x[S]||v.del.push(S);for(S in x){var E=b[S],_=x[S];E?E.src!==_.src&&v.change.push(_):v.add.push(_)}(0<v.del.length||0<v.add.length||0<v.change.length)&&f.change.push(v)}}else f.add.push([u,g])}return f}function jl(a,c,u,f){var h=a.db.createObjectStore(c,u.keyPath?{keyPath:u.keyPath,autoIncrement:u.auto}:{autoIncrement:u.auto});return f.forEach(function(g){return as(h,g)}),h}function Oh(a,c){o(a).forEach(function(u){c.db.objectStoreNames.contains(u)||(mr&&console.debug("Dexie: Creating missing table",u),jl(c,u,a[u].primKey,a[u].indexes))})}function as(a,c){a.createIndex(c.name,c.keyPath,{unique:c.unique,multiEntry:c.multi})}function ss(a,c,u){var f={};return Y(c.objectStoreNames,0).forEach(function(h){for(var g=u.objectStore(h),v=Nl(Sh(S=g.keyPath),S||"",!0,!1,!!g.autoIncrement,S&&typeof S!="string",!0),b=[],x=0;x<g.indexNames.length;++x){var E=g.index(g.indexNames[x]),S=E.keyPath,E=Nl(E.name,S,!!E.unique,!!E.multiEntry,!1,S&&typeof S!="string",!1);b.push(E)}f[h]=Ll(h,v,b)}),f}function cs(a,c,u){for(var f=u.db.objectStoreNames,h=0;h<f.length;++h){var g=f[h],v=u.objectStore(g);a._hasGetAll="getAll"in v;for(var b=0;b<v.indexNames.length;++b){var x=v.indexNames[b],S=v.index(x).keyPath,E=typeof S=="string"?S:"["+Y(S).join("+")+"]";!c[g]||(S=c[g].idxByName[E])&&(S.name=x,delete c[g].idxByName[E],c[g].idxByName[x]=S)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&n.WorkerGlobalScope&&n instanceof n.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function Eh(a){return a.split(",").map(function(c,u){var f=(c=c.trim()).replace(/([&*]|\+\+)/g,""),h=/^\[/.test(f)?f.match(/^\[(.*)\]$/)[1].split("+"):f;return Nl(f,h||null,/\&/.test(c),/\*/.test(c),/\+\+/.test(c),i(h),u===0)})}var x_=(ls.prototype._parseStoresSpec=function(a,c){o(a).forEach(function(u){if(a[u]!==null){var f=Eh(a[u]),h=f.shift();if(h.unique=!0,h.multi)throw new ot.Schema("Primary key cannot be multi-valued");f.forEach(function(g){if(g.auto)throw new ot.Schema("Only primary key can be marked as autoIncrement (++)");if(!g.keyPath)throw new ot.Schema("Index must have a name and cannot be an empty string")}),c[u]=Ll(u,h,f)}})},ls.prototype.stores=function(u){var c=this.db;this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,u):u;var u=c._versions,f={},h={};return u.forEach(function(g){s(f,g._cfg.storesSource),h=g._cfg.dbschema={},g._parseStoresSpec(f,h)}),c._dbSchema=h,Fl(c,[c._allTables,c,c.Transaction.prototype]),is(c,[c._allTables,c,c.Transaction.prototype,this._cfg.tables],o(h),h),c._storeNames=o(h),this},ls.prototype.upgrade=function(a){return this._cfg.contentUpgrade=_l(this._cfg.contentUpgrade||At,a),this},ls);function ls(){}function Ul(a,c){var u=a._dbNamesDB;return u||(u=a._dbNamesDB=new Br(Ja,{addons:[],indexedDB:a,IDBKeyRange:c})).version(1).stores({dbnames:"name"}),u.table("dbnames")}function zl(a){return a&&typeof a.databases=="function"}function Vl(a){return an(function(){return tt.letThrough=!0,a()})}function ql(a){return!("from"in a)}var ve=function(a,c){if(!this){var u=new ve;return a&&"d"in a&&s(u,a),u}s(this,arguments.length?{d:1,from:a,to:1<arguments.length?c:a}:{d:0})};function Li(a,c,u){var f=bt(c,u);if(!isNaN(f)){if(0<f)throw RangeError();if(ql(a))return s(a,{from:c,to:u,d:1});var h=a.l,f=a.r;if(bt(u,a.from)<0)return h?Li(h,c,u):a.l={from:c,to:u,d:1,l:null,r:null},kh(a);if(0<bt(c,a.to))return f?Li(f,c,u):a.r={from:c,to:u,d:1,l:null,r:null},kh(a);bt(c,a.from)<0&&(a.from=c,a.l=null,a.d=f?f.d+1:1),0<bt(u,a.to)&&(a.to=u,a.r=null,a.d=a.l?a.l.d+1:1),u=!a.r,h&&!a.l&&$i(a,h),f&&u&&$i(a,f)}}function $i(a,c){ql(c)||function u(f,x){var g=x.from,v=x.to,b=x.l,x=x.r;Li(f,g,v),b&&u(f,b),x&&u(f,x)}(a,c)}function Dh(a,c){var u=us(c),f=u.next();if(f.done)return!1;for(var h=f.value,g=us(a),v=g.next(h.from),b=v.value;!f.done&&!v.done;){if(bt(b.from,h.to)<=0&&0<=bt(b.to,h.from))return!0;bt(h.from,b.from)<0?h=(f=u.next(b.from)).value:b=(v=g.next(h.from)).value}return!1}function us(a){var c=ql(a)?null:{s:0,n:a};return{next:function(u){for(var f=0<arguments.length;c;)switch(c.s){case 0:if(c.s=1,f)for(;c.n.l&&bt(u,c.n.from)<0;)c={up:c,n:c.n.l,s:1};else for(;c.n.l;)c={up:c,n:c.n.l,s:1};case 1:if(c.s=2,!f||bt(u,c.n.to)<=0)return{value:c.n,done:!1};case 2:if(c.n.r){c.s=3,c={up:c,n:c.n.r,s:0};continue}case 3:c=c.up}return{done:!0}}}}function kh(a){var c,u,f=(((c=a.r)===null||c===void 0?void 0:c.d)||0)-(((u=a.l)===null||u===void 0?void 0:u.d)||0),h=1<f?"r":f<-1?"l":"";h&&(c=h=="r"?"l":"r",u=e({},a),f=a[h],a.from=f.from,a.to=f.to,a[h]=f[h],u[h]=f[c],(a[c]=u).d=Ah(u)),a.d=Ah(a)}function Ah(u){var c=u.r,u=u.l;return(c?u?Math.max(c.d,u.d):c.d:u?u.d:0)+1}function ds(a,c){return o(c).forEach(function(u){a[u]?$i(a[u],c[u]):a[u]=function f(h){var g,v,b={};for(g in h)m(h,g)&&(v=h[g],b[g]=!v||typeof v!="object"||ue.has(v.constructor)?v:f(v));return b}(c[u])}),a}function Wl(a,c){return a.all||c.all||Object.keys(a).some(function(u){return c[u]&&Dh(c[u],a[u])})}p(ve.prototype,((Qe={add:function(a){return $i(this,a),this},addKey:function(a){return Li(this,a,a),this},addKeys:function(a){var c=this;return a.forEach(function(u){return Li(c,u,u)}),this},hasKey:function(a){var c=us(this).next(a).value;return c&&bt(c.from,a)<=0&&0<=bt(c.to,a)}})[wi]=function(){return us(this)},Qe));var Gn={},Hl={},Kl=!1;function fs(a){ds(Hl,a),Kl||(Kl=!0,setTimeout(function(){Kl=!1,Ql(Hl,!(Hl={}))},0))}function Ql(a,c){c===void 0&&(c=!1);var u=new Set;if(a.all)for(var f=0,h=Object.values(Gn);f<h.length;f++)Ih(v=h[f],a,u,c);else for(var g in a){var v,b=/^idb\:\/\/(.*)\/(.*)\//.exec(g);b&&(g=b[1],b=b[2],(v=Gn["idb://".concat(g,"/").concat(b)])&&Ih(v,a,u,c))}u.forEach(function(x){return x()})}function Ih(a,c,u,f){for(var h=[],g=0,v=Object.entries(a.queries.query);g<v.length;g++){for(var b=v[g],x=b[0],S=[],E=0,_=b[1];E<_.length;E++){var A=_[E];Wl(c,A.obsSet)?A.subscribers.forEach(function(R){return u.add(R)}):f&&S.push(A)}f&&h.push([x,S])}if(f)for(var w=0,O=h;w<O.length;w++){var D=O[w],x=D[0],S=D[1];a.queries.query[x]=S}}function w_(a){var c=a._state,u=a._deps.indexedDB;if(c.isBeingOpened||a.idbdb)return c.dbReadyPromise.then(function(){return c.dbOpenError?qt(c.dbOpenError):a});c.isBeingOpened=!0,c.dbOpenError=null,c.openComplete=!1;var f=c.openCanceller,h=Math.round(10*a.verno),g=!1;function v(){if(c.openCanceller!==f)throw new ot.DatabaseClosed("db.open() was cancelled")}function b(){return new G(function(A,w){if(v(),!u)throw new ot.MissingAPI;var O=a.name,D=c.autoSchema||!h?u.open(O):u.open(O,h);if(!D)throw new ot.MissingAPI;D.onerror=pr(w),D.onblocked=jt(a._fireOnBlocked),D.onupgradeneeded=jt(function(R){var P;E=D.transaction,c.autoSchema&&!a._options.allowEmptyDB?(D.onerror=Pi,E.abort(),D.result.close(),(P=u.deleteDatabase(O)).onsuccess=P.onerror=jt(function(){w(new ot.NoSuchDatabase("Database ".concat(O," doesnt exist")))})):(E.onerror=pr(w),R=R.oldVersion>Math.pow(2,62)?0:R.oldVersion,_=R<1,a.idbdb=D.result,g&&__(a,E),b_(a,R/10,E,w))},w),D.onsuccess=jt(function(){E=null;var R,P,M,T,F,V=a.idbdb=D.result,H=Y(V.objectStoreNames);if(0<H.length)try{var q=V.transaction((T=H).length===1?T[0]:T,"readonly");if(c.autoSchema)P=V,M=q,(R=a).verno=P.version/10,M=R._dbSchema=ss(0,P,M),R._storeNames=Y(P.objectStoreNames,0),is(R,[R._allTables],o(M),M);else if(cs(a,a._dbSchema,q),((F=Bl(ss(0,(F=a).idbdb,q),F._dbSchema)).add.length||F.change.some(function(W){return W.add.length||W.change.length}))&&!g)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),V.close(),h=V.version+1,g=!0,A(b());os(a,q)}catch{}Oo.push(a),V.onversionchange=jt(function(W){c.vcFired=!0,a.on("versionchange").fire(W)}),V.onclose=jt(function(W){a.on("close").fire(W)}),_&&(F=a._deps,q=O,V=F.indexedDB,F=F.IDBKeyRange,zl(V)||q===Ja||Ul(V,F).put({name:q}).catch(At)),A()},w)}).catch(function(A){switch(A?.name){case"UnknownError":if(0<c.PR1398_maxLoop)return c.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),b();break;case"VersionError":if(0<h)return h=0,b()}return G.reject(A)})}var x,S=c.dbReadyResolve,E=null,_=!1;return G.race([f,(typeof navigator>"u"?G.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(A){function w(){return indexedDB.databases().finally(A)}x=setInterval(w,100),w()}).finally(function(){return clearInterval(x)}):Promise.resolve()).then(b)]).then(function(){return v(),c.onReadyBeingFired=[],G.resolve(Vl(function(){return a.on.ready.fire(a.vip)})).then(function A(){if(0<c.onReadyBeingFired.length){var w=c.onReadyBeingFired.reduce(_l,At);return c.onReadyBeingFired=[],G.resolve(Vl(function(){return w(a.vip)})).then(A)}})}).finally(function(){c.openCanceller===f&&(c.onReadyBeingFired=null,c.isBeingOpened=!1)}).catch(function(A){c.dbOpenError=A;try{E&&E.abort()}catch{}return f===c.openCanceller&&a._close(),qt(A)}).finally(function(){c.openComplete=!0,S()}).then(function(){var A;return _&&(A={},a.tables.forEach(function(w){w.schema.indexes.forEach(function(O){O.name&&(A["idb://".concat(a.name,"/").concat(w.name,"/").concat(O.name)]=new ve(-1/0,[[[]]]))}),A["idb://".concat(a.name,"/").concat(w.name,"/")]=A["idb://".concat(a.name,"/").concat(w.name,"/:dels")]=new ve(-1/0,[[[]]])}),un(Mi).fire(A),Ql(A,!0)),a})}function Yl(a){function c(g){return a.next(g)}var u=h(c),f=h(function(g){return a.throw(g)});function h(g){return function(x){var b=g(x),x=b.value;return b.done?x:x&&typeof x.then=="function"?x.then(u,f):i(x)?Promise.all(x).then(u,f):u(x)}}return h(c)()}function hs(a,c,u){for(var f=i(a)?a.slice():[a],h=0;h<u;++h)f.push(c);return f}var C_={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(a){return e(e({},a),{table:function(c){var u=a.table(c),f=u.schema,h={},g=[];function v(_,A,w){var O=Ni(_),D=h[O]=h[O]||[],R=_==null?0:typeof _=="string"?1:_.length,P=0<A,P=e(e({},w),{name:P?"".concat(O,"(virtual-from:").concat(w.name,")"):w.name,lowLevelIndex:w,isVirtual:P,keyTail:A,keyLength:R,extractKey:$l(_),unique:!P&&w.unique});return D.push(P),P.isPrimaryKey||g.push(P),1<R&&v(R===2?_[0]:_.slice(0,R-1),A+1,w),D.sort(function(M,T){return M.keyTail-T.keyTail}),P}c=v(f.primaryKey.keyPath,0,f.primaryKey),h[":id"]=[c];for(var b=0,x=f.indexes;b<x.length;b++){var S=x[b];v(S.keyPath,0,S)}function E(_){var A,w=_.query.index;return w.isVirtual?e(e({},_),{query:{index:w.lowLevelIndex,range:(A=_.query.range,w=w.keyTail,{type:A.type===1?2:A.type,lower:hs(A.lower,A.lowerOpen?a.MAX_KEY:a.MIN_KEY,w),lowerOpen:!0,upper:hs(A.upper,A.upperOpen?a.MIN_KEY:a.MAX_KEY,w),upperOpen:!0})}}):_}return e(e({},u),{schema:e(e({},f),{primaryKey:c,indexes:g,getIndexByKeyPath:function(_){return(_=h[Ni(_)])&&_[0]}}),count:function(_){return u.count(E(_))},query:function(_){return u.query(E(_))},openCursor:function(_){var A=_.query.index,w=A.keyTail,O=A.isVirtual,D=A.keyLength;return O?u.openCursor(E(_)).then(function(P){return P&&R(P)}):u.openCursor(_);function R(P){return Object.create(P,{continue:{value:function(M){M!=null?P.continue(hs(M,_.reverse?a.MAX_KEY:a.MIN_KEY,w)):_.unique?P.continue(P.key.slice(0,D).concat(_.reverse?a.MIN_KEY:a.MAX_KEY,w)):P.continue()}},continuePrimaryKey:{value:function(M,T){P.continuePrimaryKey(hs(M,a.MAX_KEY,w),T)}},primaryKey:{get:function(){return P.primaryKey}},key:{get:function(){var M=P.key;return D===1?M[0]:M.slice(0,D)}},value:{get:function(){return P.value}}})}}})}})}};function Gl(a,c,u,f){return u=u||{},f=f||"",o(a).forEach(function(h){var g,v,b;m(c,h)?(g=a[h],v=c[h],typeof g=="object"&&typeof v=="object"&&g&&v?(b=nr(g))!==nr(v)?u[f+h]=c[h]:b==="Object"?Gl(g,v,u,f+h+"."):g!==v&&(u[f+h]=c[h]):g!==v&&(u[f+h]=c[h])):u[f+h]=void 0}),o(c).forEach(function(h){m(a,h)||(u[f+h]=c[h])}),u}function Xl(a,c){return c.type==="delete"?c.keys:c.keys||c.values.map(a.extractKey)}var S_={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return e(e({},a),{table:function(c){var u=a.table(c),f=u.schema.primaryKey;return e(e({},u),{mutate:function(h){var g=tt.trans,v=g.table(c).hook,b=v.deleting,x=v.creating,S=v.updating;switch(h.type){case"add":if(x.fire===At)break;return g._promise("readwrite",function(){return E(h)},!0);case"put":if(x.fire===At&&S.fire===At)break;return g._promise("readwrite",function(){return E(h)},!0);case"delete":if(b.fire===At)break;return g._promise("readwrite",function(){return E(h)},!0);case"deleteRange":if(b.fire===At)break;return g._promise("readwrite",function(){return function _(A,w,O){return u.query({trans:A,values:!1,query:{index:f,range:w},limit:O}).then(function(D){var R=D.result;return E({type:"delete",keys:R,trans:A}).then(function(P){return 0<P.numFailures?Promise.reject(P.failures[0]):R.length<O?{failures:[],numFailures:0,lastResult:void 0}:_(A,e(e({},w),{lower:R[R.length-1],lowerOpen:!0}),O)})})}(h.trans,h.range,1e4)},!0)}return u.mutate(h);function E(_){var A,w,O,D=tt.trans,R=_.keys||Xl(f,_);if(!R)throw new Error("Keys missing");return(_=_.type==="add"||_.type==="put"?e(e({},_),{keys:R}):e({},_)).type!=="delete"&&(_.values=r([],_.values,!0)),_.keys&&(_.keys=r([],_.keys,!0)),A=u,O=R,((w=_).type==="add"?Promise.resolve([]):A.getMany({trans:w.trans,keys:O,cache:"immutable"})).then(function(P){var M=R.map(function(T,F){var V,H,q,W=P[F],Q={onerror:null,onsuccess:null};return _.type==="delete"?b.fire.call(Q,T,W,D):_.type==="add"||W===void 0?(V=x.fire.call(Q,T,_.values[F],D),T==null&&V!=null&&(_.keys[F]=T=V,f.outbound||st(_.values[F],f.keyPath,T))):(V=Gl(W,_.values[F]),(H=S.fire.call(Q,V,T,W,D))&&(q=_.values[F],Object.keys(H).forEach(function(K){m(q,K)?q[K]=H[K]:st(q,K,H[K])}))),Q});return u.mutate(_).then(function(T){for(var F=T.failures,V=T.results,H=T.numFailures,T=T.lastResult,q=0;q<R.length;++q){var W=(V||R)[q],Q=M[q];W==null?Q.onerror&&Q.onerror(F[q]):Q.onsuccess&&Q.onsuccess(_.type==="put"&&P[q]?_.values[q]:W)}return{failures:F,results:V,numFailures:H,lastResult:T}}).catch(function(T){return M.forEach(function(F){return F.onerror&&F.onerror(T)}),Promise.reject(T)})})}}})}})}};function Ph(a,c,u){try{if(!c||c.keys.length<a.length)return null;for(var f=[],h=0,g=0;h<c.keys.length&&g<a.length;++h)bt(c.keys[h],a[g])===0&&(f.push(u?rr(c.values[h]):c.values[h]),++g);return f.length===a.length?f:null}catch{return null}}var R_={stack:"dbcore",level:-1,create:function(a){return{table:function(c){var u=a.table(c);return e(e({},u),{getMany:function(f){if(!f.cache)return u.getMany(f);var h=Ph(f.keys,f.trans._cache,f.cache==="clone");return h?G.resolve(h):u.getMany(f).then(function(g){return f.trans._cache={keys:f.keys,values:f.cache==="clone"?rr(g):g},g})},mutate:function(f){return f.type!=="add"&&(f.trans._cache=null),u.mutate(f)}})}}}};function Mh(a,c){return a.trans.mode==="readonly"&&!!a.subscr&&!a.trans.explicit&&a.trans.db._options.cache!=="disabled"&&!c.schema.primaryKey.outbound}function Th(a,c){switch(a){case"query":return c.values&&!c.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var O_={stack:"dbcore",level:0,name:"Observability",create:function(a){var c=a.schema.name,u=new ve(a.MIN_KEY,a.MAX_KEY);return e(e({},a),{transaction:function(f,h,g){if(tt.subscr&&h!=="readonly")throw new ot.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(tt.querier));return a.transaction(f,h,g)},table:function(f){var h=a.table(f),g=h.schema,v=g.primaryKey,_=g.indexes,b=v.extractKey,x=v.outbound,S=v.autoIncrement&&_.filter(function(w){return w.compound&&w.keyPath.includes(v.keyPath)}),E=e(e({},h),{mutate:function(w){function O(K){return K="idb://".concat(c,"/").concat(f,"/").concat(K),T[K]||(T[K]=new ve)}var D,R,P,M=w.trans,T=w.mutatedParts||(w.mutatedParts={}),F=O(""),V=O(":dels"),H=w.type,Q=w.type==="deleteRange"?[w.range]:w.type==="delete"?[w.keys]:w.values.length<50?[Xl(v,w).filter(function(K){return K}),w.values]:[],q=Q[0],W=Q[1],Q=w.trans._cache;return i(q)?(F.addKeys(q),(Q=H==="delete"||q.length===W.length?Ph(q,Q):null)||V.addKeys(q),(Q||W)&&(D=O,R=Q,P=W,g.indexes.forEach(function(K){var Z=D(K.name||"");function ht(gt){return gt!=null?K.extractKey(gt):null}function yt(gt){return K.multiEntry&&i(gt)?gt.forEach(function(ir){return Z.addKey(ir)}):Z.addKey(gt)}(R||P).forEach(function(gt,ye){var vt=R&&ht(R[ye]),ye=P&&ht(P[ye]);bt(vt,ye)!==0&&(vt!=null&&yt(vt),ye!=null&&yt(ye))})}))):q?(W={from:(W=q.lower)!==null&&W!==void 0?W:a.MIN_KEY,to:(W=q.upper)!==null&&W!==void 0?W:a.MAX_KEY},V.add(W),F.add(W)):(F.add(u),V.add(u),g.indexes.forEach(function(K){return O(K.name).add(u)})),h.mutate(w).then(function(K){return!q||w.type!=="add"&&w.type!=="put"||(F.addKeys(K.results),S&&S.forEach(function(Z){var ht=w.values.map(function(gt){return Z.extractKey(gt)}),yt=Z.keyPath.findIndex(function(gt){return gt===v.keyPath});K.results.forEach(function(gt){return ht[yt]=gt}),O(Z.name).addKeys(ht)})),M.mutatedParts=ds(M.mutatedParts||{},T),K})}}),_=function(O){var D=O.query,O=D.index,D=D.range;return[O,new ve((O=D.lower)!==null&&O!==void 0?O:a.MIN_KEY,(D=D.upper)!==null&&D!==void 0?D:a.MAX_KEY)]},A={get:function(w){return[v,new ve(w.key)]},getMany:function(w){return[v,new ve().addKeys(w.keys)]},count:_,query:_,openCursor:_};return o(A).forEach(function(w){E[w]=function(O){var D=tt.subscr,R=!!D,P=Mh(tt,h)&&Th(w,O)?O.obsSet={}:D;if(R){var M=function(W){return W="idb://".concat(c,"/").concat(f,"/").concat(W),P[W]||(P[W]=new ve)},T=M(""),F=M(":dels"),D=A[w](O),R=D[0],D=D[1];if((w==="query"&&R.isPrimaryKey&&!O.values?F:M(R.name||"")).add(D),!R.isPrimaryKey){if(w!=="count"){var V=w==="query"&&x&&O.values&&h.query(e(e({},O),{values:!1}));return h[w].apply(this,arguments).then(function(W){if(w==="query"){if(x&&O.values)return V.then(function(ht){return ht=ht.result,T.addKeys(ht),W});var Q=O.values?W.result.map(b):W.result;(O.values?T:F).addKeys(Q)}else if(w==="openCursor"){var K=W,Z=O.values;return K&&Object.create(K,{key:{get:function(){return F.addKey(K.primaryKey),K.key}},primaryKey:{get:function(){var ht=K.primaryKey;return F.addKey(ht),ht}},value:{get:function(){return Z&&T.addKey(K.primaryKey),K.value}}})}return W})}F.add(u)}}return h[w].apply(this,arguments)}}),E}})}};function Nh(a,c,u){if(u.numFailures===0)return c;if(c.type==="deleteRange")return null;var f=c.keys?c.keys.length:"values"in c&&c.values?c.values.length:1;return u.numFailures===f?null:(c=e({},c),i(c.keys)&&(c.keys=c.keys.filter(function(h,g){return!(g in u.failures)})),"values"in c&&i(c.values)&&(c.values=c.values.filter(function(h,g){return!(g in u.failures)})),c)}function Zl(a,c){return u=a,((f=c).lower===void 0||(f.lowerOpen?0<bt(u,f.lower):0<=bt(u,f.lower)))&&(a=a,(c=c).upper===void 0||(c.upperOpen?bt(a,c.upper)<0:bt(a,c.upper)<=0));var u,f}function Lh(a,c,A,f,h,g){if(!A||A.length===0)return a;var v=c.query.index,b=v.multiEntry,x=c.query.range,S=f.schema.primaryKey.extractKey,E=v.extractKey,_=(v.lowLevelIndex||v).extractKey,A=A.reduce(function(w,O){var D=w,R=[];if(O.type==="add"||O.type==="put")for(var P=new ve,M=O.values.length-1;0<=M;--M){var T,F=O.values[M],V=S(F);P.hasKey(V)||(T=E(F),(b&&i(T)?T.some(function(K){return Zl(K,x)}):Zl(T,x))&&(P.addKey(V),R.push(F)))}switch(O.type){case"add":var H=new ve().addKeys(c.values?w.map(function(Z){return S(Z)}):w),D=w.concat(c.values?R.filter(function(Z){return Z=S(Z),!H.hasKey(Z)&&(H.addKey(Z),!0)}):R.map(function(Z){return S(Z)}).filter(function(Z){return!H.hasKey(Z)&&(H.addKey(Z),!0)}));break;case"put":var q=new ve().addKeys(O.values.map(function(Z){return S(Z)}));D=w.filter(function(Z){return!q.hasKey(c.values?S(Z):Z)}).concat(c.values?R:R.map(function(Z){return S(Z)}));break;case"delete":var W=new ve().addKeys(O.keys);D=w.filter(function(Z){return!W.hasKey(c.values?S(Z):Z)});break;case"deleteRange":var Q=O.range;D=w.filter(function(Z){return!Zl(S(Z),Q)})}return D},a);return A===a?a:(A.sort(function(w,O){return bt(_(w),_(O))||bt(S(w),S(O))}),c.limit&&c.limit<1/0&&(A.length>c.limit?A.length=c.limit:a.length===c.limit&&A.length<c.limit&&(h.dirty=!0)),g?Object.freeze(A):A)}function $h(a,c){return bt(a.lower,c.lower)===0&&bt(a.upper,c.upper)===0&&!!a.lowerOpen==!!c.lowerOpen&&!!a.upperOpen==!!c.upperOpen}function E_(a,c){return function(u,f,h,g){if(u===void 0)return f!==void 0?-1:0;if(f===void 0)return 1;if((f=bt(u,f))===0){if(h&&g)return 0;if(h)return 1;if(g)return-1}return f}(a.lower,c.lower,a.lowerOpen,c.lowerOpen)<=0&&0<=function(u,f,h,g){if(u===void 0)return f!==void 0?1:0;if(f===void 0)return-1;if((f=bt(u,f))===0){if(h&&g)return 0;if(h)return-1;if(g)return 1}return f}(a.upper,c.upper,a.upperOpen,c.upperOpen)}function D_(a,c,u,f){a.subscribers.add(u),f.addEventListener("abort",function(){var h,g;a.subscribers.delete(u),a.subscribers.size===0&&(h=a,g=c,setTimeout(function(){h.subscribers.size===0&&Lr(g,h)},3e3))})}var k_={stack:"dbcore",level:0,name:"Cache",create:function(a){var c=a.schema.name;return e(e({},a),{transaction:function(u,f,h){var g,v,b=a.transaction(u,f,h);return f==="readwrite"&&(v=(g=new AbortController).signal,h=function(x){return function(){if(g.abort(),f==="readwrite"){for(var S=new Set,E=0,_=u;E<_.length;E++){var A=_[E],w=Gn["idb://".concat(c,"/").concat(A)];if(w){var O=a.table(A),D=w.optimisticOps.filter(function(Z){return Z.trans===b});if(b._explicit&&x&&b.mutatedParts)for(var R=0,P=Object.values(w.queries.query);R<P.length;R++)for(var M=0,T=(H=P[R]).slice();M<T.length;M++)Wl((q=T[M]).obsSet,b.mutatedParts)&&(Lr(H,q),q.subscribers.forEach(function(Z){return S.add(Z)}));else if(0<D.length){w.optimisticOps=w.optimisticOps.filter(function(Z){return Z.trans!==b});for(var F=0,V=Object.values(w.queries.query);F<V.length;F++)for(var H,q,W,Q=0,K=(H=V[F]).slice();Q<K.length;Q++)(q=K[Q]).res!=null&&b.mutatedParts&&(x&&!q.dirty?(W=Object.isFrozen(q.res),W=Lh(q.res,q.req,D,O,q,W),q.dirty?(Lr(H,q),q.subscribers.forEach(function(Z){return S.add(Z)})):W!==q.res&&(q.res=W,q.promise=G.resolve({result:W}))):(q.dirty&&Lr(H,q),q.subscribers.forEach(function(Z){return S.add(Z)})))}}}S.forEach(function(Z){return Z()})}}},b.addEventListener("abort",h(!1),{signal:v}),b.addEventListener("error",h(!1),{signal:v}),b.addEventListener("complete",h(!0),{signal:v})),b},table:function(u){var f=a.table(u),h=f.schema.primaryKey;return e(e({},f),{mutate:function(g){var v=tt.trans;if(h.outbound||v.db._options.cache==="disabled"||v.explicit||v.idbtrans.mode!=="readwrite")return f.mutate(g);var b=Gn["idb://".concat(c,"/").concat(u)];return b?(v=f.mutate(g),g.type!=="add"&&g.type!=="put"||!(50<=g.values.length||Xl(h,g).some(function(x){return x==null}))?(b.optimisticOps.push(g),g.mutatedParts&&fs(g.mutatedParts),v.then(function(x){0<x.numFailures&&(Lr(b.optimisticOps,g),(x=Nh(0,g,x))&&b.optimisticOps.push(x),g.mutatedParts&&fs(g.mutatedParts))}),v.catch(function(){Lr(b.optimisticOps,g),g.mutatedParts&&fs(g.mutatedParts)})):v.then(function(x){var S=Nh(0,e(e({},g),{values:g.values.map(function(E,_){var A;return x.failures[_]?E:(E=(A=h.keyPath)!==null&&A!==void 0&&A.includes(".")?rr(E):e({},E),st(E,h.keyPath,x.results[_]),E)})}),x);b.optimisticOps.push(S),queueMicrotask(function(){return g.mutatedParts&&fs(g.mutatedParts)})}),v):f.mutate(g)},query:function(g){if(!Mh(tt,f)||!Th("query",g))return f.query(g);var v=((S=tt.trans)===null||S===void 0?void 0:S.db._options.cache)==="immutable",_=tt,b=_.requery,x=_.signal,S=function(O,D,R,P){var M=Gn["idb://".concat(O,"/").concat(D)];if(!M)return[];if(!(D=M.queries[R]))return[null,!1,M,null];var T=D[(P.query?P.query.index.name:null)||""];if(!T)return[null,!1,M,null];switch(R){case"query":var F=T.find(function(V){return V.req.limit===P.limit&&V.req.values===P.values&&$h(V.req.query.range,P.query.range)});return F?[F,!0,M,T]:[T.find(function(V){return("limit"in V.req?V.req.limit:1/0)>=P.limit&&(!P.values||V.req.values)&&E_(V.req.query.range,P.query.range)}),!1,M,T];case"count":return F=T.find(function(V){return $h(V.req.query.range,P.query.range)}),[F,!!F,M,T]}}(c,u,"query",g),E=S[0],_=S[1],A=S[2],w=S[3];return E&&_?E.obsSet=g.obsSet:(_=f.query(g).then(function(O){var D=O.result;if(E&&(E.res=D),v){for(var R=0,P=D.length;R<P;++R)Object.freeze(D[R]);Object.freeze(D)}else O.result=rr(D);return O}).catch(function(O){return w&&E&&Lr(w,E),Promise.reject(O)}),E={obsSet:g.obsSet,promise:_,subscribers:new Set,type:"query",req:g,dirty:!1},w?w.push(E):(w=[E],(A=A||(Gn["idb://".concat(c,"/").concat(u)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[g.query.index.name||""]=w)),D_(E,w,b,x),E.promise.then(function(O){return{result:Lh(O.result,g,A?.optimisticOps,f,E,v)}})}})}})}};function ms(a,c){return new Proxy(a,{get:function(u,f,h){return f==="db"?c:Reflect.get(u,f,h)}})}var Br=(Wt.prototype.version=function(a){if(isNaN(a)||a<.1)throw new ot.Type("Given version is not a positive number");if(a=Math.round(10*a)/10,this.idbdb||this._state.isBeingOpened)throw new ot.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var c=this._versions,u=c.filter(function(f){return f._cfg.version===a})[0];return u||(u=new this.Version(a),c.push(u),c.sort(y_),u.stores({}),this._state.autoSchema=!1,u)},Wt.prototype._whenReady=function(a){var c=this;return this.idbdb&&(this._state.openComplete||tt.letThrough||this._vip)?a():new G(function(u,f){if(c._state.openComplete)return f(new ot.DatabaseClosed(c._state.dbOpenError));if(!c._state.isBeingOpened){if(!c._state.autoOpen)return void f(new ot.DatabaseClosed);c.open().catch(At)}c._state.dbReadyPromise.then(u,f)}).then(a)},Wt.prototype.use=function(a){var c=a.stack,u=a.create,f=a.level,h=a.name;return h&&this.unuse({stack:c,name:h}),a=this._middlewares[c]||(this._middlewares[c]=[]),a.push({stack:c,create:u,level:f??10,name:h}),a.sort(function(g,v){return g.level-v.level}),this},Wt.prototype.unuse=function(a){var c=a.stack,u=a.name,f=a.create;return c&&this._middlewares[c]&&(this._middlewares[c]=this._middlewares[c].filter(function(h){return f?h.create!==f:!!u&&h.name!==u})),this},Wt.prototype.open=function(){var a=this;return Kn(on,function(){return w_(a)})},Wt.prototype._close=function(){var a=this._state,c=Oo.indexOf(this);if(0<=c&&Oo.splice(c,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}a.isBeingOpened||(a.dbReadyPromise=new G(function(u){a.dbReadyResolve=u}),a.openCanceller=new G(function(u,f){a.cancelOpen=f}))},Wt.prototype.close=function(u){var c=(u===void 0?{disableAutoOpen:!0}:u).disableAutoOpen,u=this._state;c?(u.isBeingOpened&&u.cancelOpen(new ot.DatabaseClosed),this._close(),u.autoOpen=!1,u.dbOpenError=new ot.DatabaseClosed):(this._close(),u.autoOpen=this._options.autoOpen||u.isBeingOpened,u.openComplete=!1,u.dbOpenError=null)},Wt.prototype.delete=function(a){var c=this;a===void 0&&(a={disableAutoOpen:!0});var u=0<arguments.length&&typeof arguments[0]!="object",f=this._state;return new G(function(h,g){function v(){c.close(a);var b=c._deps.indexedDB.deleteDatabase(c.name);b.onsuccess=jt(function(){var x,S,E;x=c._deps,S=c.name,E=x.indexedDB,x=x.IDBKeyRange,zl(E)||S===Ja||Ul(E,x).delete(S).catch(At),h()}),b.onerror=pr(g),b.onblocked=c._fireOnBlocked}if(u)throw new ot.InvalidArgument("Invalid closeOptions argument to db.delete()");f.isBeingOpened?f.dbReadyPromise.then(v):v()})},Wt.prototype.backendDB=function(){return this.idbdb},Wt.prototype.isOpen=function(){return this.idbdb!==null},Wt.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"},Wt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Wt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Wt.prototype,"tables",{get:function(){var a=this;return o(this._allTables).map(function(c){return a._allTables[c]})},enumerable:!1,configurable:!0}),Wt.prototype.transaction=function(){var a=function(c,u,f){var h=arguments.length;if(h<2)throw new ot.InvalidArgument("Too few arguments");for(var g=new Array(h-1);--h;)g[h-1]=arguments[h];return f=g.pop(),[c,$t(g),f]}.apply(this,arguments);return this._transaction.apply(this,a)},Wt.prototype._transaction=function(a,c,u){var f=this,h=tt.trans;h&&h.db===this&&a.indexOf("!")===-1||(h=null);var g,v,b=a.indexOf("?")!==-1;a=a.replace("!","").replace("?","");try{if(v=c.map(function(S){if(S=S instanceof f.Table?S.name:S,typeof S!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return S}),a=="r"||a===kl)g=kl;else{if(a!="rw"&&a!=Al)throw new ot.InvalidArgument("Invalid transaction mode: "+a);g=Al}if(h){if(h.mode===kl&&g===Al){if(!b)throw new ot.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");h=null}h&&v.forEach(function(S){if(h&&h.storeNames.indexOf(S)===-1){if(!b)throw new ot.SubTransaction("Table "+S+" not included in parent transaction.");h=null}}),b&&h&&!h.active&&(h=null)}}catch(S){return h?h._promise(null,function(E,_){_(S)}):qt(S)}var x=function S(E,_,A,w,O){return G.resolve().then(function(){var D=tt.transless||tt,R=E._createTransaction(_,A,E._dbSchema,w);if(R.explicit=!0,D={trans:R,transless:D},w)R.idbtrans=w.idbtrans;else try{R.create(),R.idbtrans._explicit=!0,E._state.PR1398_maxLoop=3}catch(T){return T.name===nn.InvalidState&&E.isOpen()&&0<--E._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),E.close({disableAutoOpen:!1}),E.open().then(function(){return S(E,_,A,null,O)})):qt(T)}var P,M=rn(O);return M&&Ro(),D=G.follow(function(){var T;(P=O.call(R,R))&&(M?(T=sn.bind(null,null),P.then(T,T)):typeof P.next=="function"&&typeof P.throw=="function"&&(P=Yl(P)))},D),(P&&typeof P.then=="function"?G.resolve(P).then(function(T){return R.active?T:qt(new ot.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):D.then(function(){return P})).then(function(T){return w&&R._resolve(),R._completion.then(function(){return T})}).catch(function(T){return R._reject(T),qt(T)})})}.bind(null,this,g,v,h,u);return h?h._promise(g,x,"lock"):tt.trans?Kn(tt.transless,function(){return f._whenReady(x)}):this._whenReady(x)},Wt.prototype.table=function(a){if(!m(this._allTables,a))throw new ot.InvalidTable("Table ".concat(a," does not exist"));return this._allTables[a]},Wt);function Wt(a,c){var u=this;this._middlewares={},this.verno=0;var f=Wt.dependencies;this._options=c=e({addons:Wt.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange,cache:"cloned"},c),this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange},f=c.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var h,g,v,b,x,S={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:At,dbReadyPromise:null,cancelOpen:At,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:c.autoOpen};S.dbReadyPromise=new G(function(_){S.dbReadyResolve=_}),S.openCanceller=new G(function(_,A){S.cancelOpen=A}),this._state=S,this.name=a,this.on=ki(this,"populate","blocked","versionchange","close",{ready:[_l,At]}),this.on.ready.subscribe=et(this.on.ready.subscribe,function(_){return function(A,w){Wt.vip(function(){var O,D=u._state;D.openComplete?(D.dbOpenError||G.resolve().then(A),w&&_(A)):D.onReadyBeingFired?(D.onReadyBeingFired.push(A),w&&_(A)):(_(A),O=u,w||_(function R(){O.on.ready.unsubscribe(A),O.on.ready.unsubscribe(R)}))})}}),this.Collection=(h=this,Ai(d_.prototype,function(P,R){this.db=h;var w=mh,O=null;if(R)try{w=R()}catch(M){O=M}var D=P._ctx,R=D.table,P=R.hook.reading.fire;this._ctx={table:R,index:D.index,isPrimKey:!D.index||R.schema.primKey.keyPath&&D.index===R.schema.primKey.name,range:w,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:O,or:D.or,valueMapper:P!==Si?P:null}})),this.Table=(g=this,Ai(yh.prototype,function(_,A,w){this.db=g,this._tx=w,this.name=_,this.schema=A,this.hook=g._allTables[_]?g._allTables[_].hook:ki(null,{creating:[r_,At],reading:[e_,Si],updating:[o_,At],deleting:[n_,At]})})),this.Transaction=(v=this,Ai(m_.prototype,function(_,A,w,O,D){var R=this;this.db=v,this.mode=_,this.storeNames=A,this.schema=w,this.chromeTransactionDurability=O,this.idbtrans=null,this.on=ki(this,"complete","error","abort"),this.parent=D||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new G(function(P,M){R._resolve=P,R._reject=M}),this._completion.then(function(){R.active=!1,R.on.complete.fire()},function(P){var M=R.active;return R.active=!1,R.on.error.fire(P),R.parent?R.parent._reject(P):M&&R.idbtrans&&R.idbtrans.abort(),qt(P)})})),this.Version=(b=this,Ai(x_.prototype,function(_){this.db=b,this._cfg={version:_,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(x=this,Ai(Ch.prototype,function(_,A,w){if(this.db=x,this._ctx={table:_,index:A===":id"?null:A,or:w},this._cmp=this._ascending=bt,this._descending=function(O,D){return bt(D,O)},this._max=function(O,D){return 0<bt(O,D)?O:D},this._min=function(O,D){return bt(O,D)<0?O:D},this._IDBKeyRange=x._deps.IDBKeyRange,!this._IDBKeyRange)throw new ot.MissingAPI})),this.on("versionchange",function(_){0<_.newVersion?console.warn("Another connection wants to upgrade database '".concat(u.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(u.name,"'. Closing db now to resume the delete request.")),u.close({disableAutoOpen:!1})}),this.on("blocked",function(_){!_.newVersion||_.newVersion<_.oldVersion?console.warn("Dexie.delete('".concat(u.name,"') was blocked")):console.warn("Upgrade '".concat(u.name,"' blocked by other connection holding version ").concat(_.oldVersion/10))}),this._maxKey=Ti(c.IDBKeyRange),this._createTransaction=function(_,A,w,O){return new u.Transaction(_,A,w,u._options.chromeTransactionDurability,O)},this._fireOnBlocked=function(_){u.on("blocked").fire(_),Oo.filter(function(A){return A.name===u.name&&A!==u&&!A._state.vcFired}).map(function(A){return A.on("versionchange").fire(_)})},this.use(R_),this.use(k_),this.use(O_),this.use(C_),this.use(S_);var E=new Proxy(this,{get:function(_,A,w){if(A==="_vip")return!0;if(A==="table")return function(D){return ms(u.table(D),E)};var O=Reflect.get(_,A,w);return O instanceof yh?ms(O,E):A==="tables"?O.map(function(D){return ms(D,E)}):A==="_createTransaction"?function(){return ms(O.apply(this,arguments),E)}:O}});this.vip=E,f.forEach(function(_){return _(u)})}var ps,Qe=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",A_=(Jl.prototype.subscribe=function(a,c,u){return this._subscribe(a&&typeof a!="function"?a:{next:a,error:c,complete:u})},Jl.prototype[Qe]=function(){return this},Jl);function Jl(a){this._subscribe=a}try{ps={indexedDB:n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB,IDBKeyRange:n.IDBKeyRange||n.webkitIDBKeyRange}}catch{ps={indexedDB:null,IDBKeyRange:null}}function Fh(a){var c,u=!1,f=new A_(function(h){var g=rn(a),v,b=!1,x={},S={},E={get closed(){return b},unsubscribe:function(){b||(b=!0,v&&v.abort(),_&&un.storagemutated.unsubscribe(w))}};h.start&&h.start(E);var _=!1,A=function(){return Dl(O)},w=function(D){ds(x,D),Wl(S,x)&&A()},O=function(){var D,R,P;!b&&ps.indexedDB&&(x={},D={},v&&v.abort(),v=new AbortController,P=function(M){var T=Co();try{g&&Ro();var F=an(a,M);return F=g?F.finally(sn):F}finally{T&&So()}}(R={subscr:D,signal:v.signal,requery:A,querier:a,trans:null}),Promise.resolve(P).then(function(M){u=!0,c=M,b||R.signal.aborted||(x={},function(T){for(var F in T)if(m(T,F))return;return 1}(S=D)||_||(un(Mi,w),_=!0),Dl(function(){return!b&&h.next&&h.next(M)}))},function(M){u=!1,["DatabaseClosedError","AbortError"].includes(M?.name)||b||Dl(function(){b||h.error&&h.error(M)})}))};return setTimeout(A,0),E});return f.hasValue=function(){return u},f.getValue=function(){return c},f}var Xn=Br;function tu(a){var c=dn;try{dn=!0,un.storagemutated.fire(a),Ql(a,!0)}finally{dn=c}}p(Xn,e(e({},qa),{delete:function(a){return new Xn(a,{addons:[]}).delete()},exists:function(a){return new Xn(a,{addons:[]}).open().then(function(c){return c.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return c=Xn.dependencies,u=c.indexedDB,c=c.IDBKeyRange,(zl(u)?Promise.resolve(u.databases()).then(function(f){return f.map(function(h){return h.name}).filter(function(h){return h!==Ja})}):Ul(u,c).toCollection().primaryKeys()).then(a)}catch{return qt(new ot.MissingAPI)}var c,u},defineClass:function(){return function(a){s(this,a)}},ignoreTransaction:function(a){return tt.trans?Kn(tt.transless,a):a()},vip:Vl,async:function(a){return function(){try{var c=Yl(a.apply(this,arguments));return c&&typeof c.then=="function"?c:G.resolve(c)}catch(u){return qt(u)}}},spawn:function(a,c,u){try{var f=Yl(a.apply(u,c||[]));return f&&typeof f.then=="function"?f:G.resolve(f)}catch(h){return qt(h)}},currentTransaction:{get:function(){return tt.trans||null}},waitFor:function(a,c){return c=G.resolve(typeof a=="function"?Xn.ignoreTransaction(a):a).timeout(c||6e4),tt.trans?tt.trans.waitFor(c):c},Promise:G,debug:{get:function(){return mr},set:function(a){sh(a)}},derive:k,extend:s,props:p,override:et,Events:ki,on:un,liveQuery:Fh,extendObservabilitySet:ds,getByKeyPath:kt,setByKeyPath:st,delByKeyPath:function(a,c){typeof c=="string"?st(a,c,void 0):"length"in c&&[].map.call(c,function(u){st(a,u,void 0)})},shallowClone:Pt,deepClone:rr,getObjectDiff:Gl,cmp:bt,asap:J,minKey:-1/0,addons:[],connections:Oo,errnames:nn,dependencies:ps,cache:Gn,semVer:"4.0.9",version:"4.0.9".split(".").map(function(a){return parseInt(a)}).reduce(function(a,c,u){return a+c/Math.pow(10,2*u)})})),Xn.maxKey=Ti(Xn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(un(Mi,function(a){dn||(a=new CustomEvent(Tl,{detail:a}),dn=!0,dispatchEvent(a),dn=!1)}),addEventListener(Tl,function(a){a=a.detail,dn||tu(a)}));var ko,dn=!1,Bh=function(){};return typeof BroadcastChannel<"u"&&((Bh=function(){(ko=new BroadcastChannel(Tl)).onmessage=function(a){return a.data&&tu(a.data)}})(),typeof ko.unref=="function"&&ko.unref(),un(Mi,function(a){dn||ko.postMessage(a)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(a){if(!Br.disableBfCache&&a.persisted){mr&&console.debug("Dexie: handling persisted pagehide"),ko?.close();for(var c=0,u=Oo;c<u.length;c++)u[c].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(a){!Br.disableBfCache&&a.persisted&&(mr&&console.debug("Dexie: handling persisted pageshow"),Bh(),tu({all:new ve(-1/0,[[]])}))})),G.rejectionMapper=function(a,c){return!a||a instanceof or||a instanceof TypeError||a instanceof SyntaxError||!a.name||!ah[a.name]?a:(c=new ah[a.name](c||a.message,a),"stack"in a&&C(c,"stack",{get:function(){return this.inner.stack}}),c)},sh(mr),e(Br,Object.freeze({__proto__:null,Dexie:Br,liveQuery:Fh,Entity:ph,cmp:bt,PropModSymbol:Fr,PropModification:Ii,replacePrefix:function(a,c){return new Ii({replacePrefix:[a,c]})},add:function(a){return new Ii({add:a})},remove:function(a){return new Ii({remove:a})},default:Br,RangeSet:ve,mergeRanges:$i,rangesOverlap:Dh}),{default:Br}),Br})});var Qi=class{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Hr=class extends Qi{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(e,r,n,o,i){super(),this.component=e,this.viewContainerRef=r,this.injector=n,this.projectableNodes=i}},Cr=class extends Qi{templateRef;viewContainerRef;context;injector;constructor(e,r,n,o){super(),this.templateRef=e,this.viewContainerRef=r,this.context=n,this.injector=o}get origin(){return this.templateRef.elementRef}attach(e,r=this.context){return this.context=r,super.attach(e)}detach(){return this.context=void 0,super.detach()}},yu=class extends Qi{element;constructor(e){super(),this.element=e instanceof Jt?e.nativeElement:e}},bn=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof Hr)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof Cr)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof yu)return this._attachedPortal=e,this.attachDomPortal(e)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Ds=class extends bn{outletElement;_appRef;_defaultInjector;_document;constructor(e,r,n,o,i){super(),this.outletElement=e,this._appRef=n,this._defaultInjector=o,this._document=i}attachComponentPortal(e){let r;if(e.viewContainerRef){let n=e.injector||e.viewContainerRef.injector,o=n.get(lu,null,{optional:!0})||void 0;r=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:n,ngModuleRef:o,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>r.destroy())}else r=bm(e.component,{elementInjector:e.injector||this._defaultInjector||Xt.NULL,environmentInjector:this._appRef.injector,projectableNodes:e.projectableNodes||void 0}),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()});return this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let r=e.viewContainerRef,n=r.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return n.rootNodes.forEach(o=>this.outletElement.appendChild(o)),n.detectChanges(),this.setDisposeFn(()=>{let o=r.indexOf(n);o!==-1&&r.remove(o)}),this._attachedPortal=e,n}attachDomPortal=e=>{let r=e.element;r.parentNode;let n=this._document.createComment("dom-portal");r.parentNode.insertBefore(n,r),this.outletElement.appendChild(r),this._attachedPortal=e,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(r,n)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var AO=(()=>{class t extends Cr{constructor(){let r=I(Ur),n=I(gn);super(r,n)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Ut({type:t,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[fe]})}return t})();var _n=(()=>{class t extends bn{_moduleRef=I(lu,{optional:!0});_document=I(me);_viewContainerRef=I(gn);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(r){this.hasAttached()&&!r&&!this._isInitialized||(this.hasAttached()&&super.detach(),r&&super.attach(r),this._attachedPortal=r||null)}attached=new Ce;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(r){r.setAttachedHost(this);let n=r.viewContainerRef!=null?r.viewContainerRef:this._viewContainerRef,o=n.createComponent(r.component,{index:n.length,injector:r.injector||n.injector,projectableNodes:r.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return n!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=r,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(r){r.setAttachedHost(this);let n=this._viewContainerRef.createEmbeddedView(r.templateRef,r.context,{injector:r.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=r,this._attachedRef=n,this.attached.emit(n),n}attachDomPortal=r=>{let n=r.element;n.parentNode;let o=this._document.createComment("dom-portal");r.setAttachedHost(this),n.parentNode.insertBefore(o,n),this._getRootNode().appendChild(n),this._attachedPortal=r,super.setDisposeFn(()=>{o.parentNode&&o.parentNode.replaceChild(n,o)})};_getRootNode(){let r=this._viewContainerRef.element.nativeElement;return r.nodeType===r.ELEMENT_NODE?r:r.parentNode}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Ut({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[fe]})}return t})();var Kr=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=te({type:t});static \u0275inj=Gt({})}return t})();var Um=["mat-button",""],zm=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Vm=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],T_='.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 12px);height:var(--mdc-text-button-container-height, 40px);font-family:var(--mdc-text-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display, block)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-filled-button-container-height, 40px);font-family:var(--mdc-filled-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-filled-button-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display, block)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-sys-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-filled-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-sys-level1));height:var(--mdc-protected-button-container-height, 40px);font-family:var(--mdc-protected-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-protected-button-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display, block)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-sys-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-sys-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-protected-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-outlined-button-container-height, 40px);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-sys-corner-full));border-width:var(--mdc-outlined-button-outline-width, 1px);padding:0 var(--mat-outlined-button-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display, block)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-sys-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mdc-outlined-button-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width, 1px);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-focus-indicator::before,.mat-mdc-raised-button:focus .mat-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}',qm="@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button{outline:solid 1px}}";var N_=["mat-icon-button",""],L_=["*"];var $_=new mt("MAT_BUTTON_CONFIG");var F_=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],bu=(()=>{class t{_elementRef=I(Jt);_platform=I(Be);_ngZone=I(Zt);_animationMode=I(Lo,{optional:!0});_focusMonitor=I(Es);_rippleLoader=I(Fm);_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(r){this._disableRipple=r,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(r){this._disabled=r,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;constructor(){I(Hi).load(Lm);let r=I($_,{optional:!0}),n=this._elementRef.nativeElement,o=n.classList;this.disabledInteractive=r?.disabledInteractive??!1,this.color=r?.color??null,this._rippleLoader?.configureRipple(n,{className:"mat-mdc-button-ripple"});for(let{attribute:i,mdcClasses:s}of F_)n.hasAttribute(i)&&o.add(...s)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(r="program",n){r?this._focusMonitor.focusVia(this._elementRef.nativeElement,r,n):this._elementRef.nativeElement.focus(n)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Ut({type:t,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",he],disabled:[2,"disabled","disabled",he],ariaDisabled:[2,"aria-disabled","ariaDisabled",he],disabledInteractive:[2,"disabledInteractive","disabledInteractive",he]},features:[vn]})}return t})();var B_=(()=>{class t extends bu{tabIndex;ngOnInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)})}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}_haltDisabledEvents=r=>{this.disabled&&(r.preventDefault(),r.stopImmediatePropagation())};_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled||null}static \u0275fac=(()=>{let r;return function(o){return(r||(r=de(t)))(o||t)}})();static \u0275dir=Ut({type:t,inputs:{tabIndex:[2,"tabIndex","tabIndex",r=>r==null?void 0:vm(r)]},features:[vn,fe]})}return t})(),Wm=(()=>{class t extends bu{static \u0275fac=(()=>{let r;return function(o){return(r||(r=de(t)))(o||t)}})();static \u0275cmp=Se({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(n,o){n&2&&(Fe("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled()),ws(o.color?"mat-"+o.color:""),_r("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[fe],attrs:Um,ngContentSelectors:Vm,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,o){n&1&&(qi(zm),Ge(0,"span",0),zr(1),xr(2,"span",1),zr(3,1),sr(),zr(4,2),Ge(5,"span",2)(6,"span",3)),n&2&&_r("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:['.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 12px);height:var(--mdc-text-button-container-height, 40px);font-family:var(--mdc-text-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display, block)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-filled-button-container-height, 40px);font-family:var(--mdc-filled-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-filled-button-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display, block)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-sys-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-filled-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-sys-level1));height:var(--mdc-protected-button-container-height, 40px);font-family:var(--mdc-protected-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-protected-button-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display, block)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-sys-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-sys-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-protected-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-outlined-button-container-height, 40px);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-sys-corner-full));border-width:var(--mdc-outlined-button-outline-width, 1px);padding:0 var(--mat-outlined-button-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display, block)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-sys-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mdc-outlined-button-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width, 1px);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-focus-indicator::before,.mat-mdc-raised-button:focus .mat-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}',"@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button{outline:solid 1px}}"],encapsulation:2,changeDetection:0})}return t})(),VO=(()=>{class t extends B_{static \u0275fac=(()=>{let r;return function(o){return(r||(r=de(t)))(o||t)}})();static \u0275cmp=Se({type:t,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostVars:15,hostBindings:function(n,o){n&2&&(Fe("disabled",o._getDisabledAttribute())("tabindex",o.disabled&&!o.disabledInteractive?-1:o.tabIndex)("aria-disabled",o._getAriaDisabled()),ws(o.color?"mat-"+o.color:""),_r("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton","matAnchor"],features:[fe],attrs:Um,ngContentSelectors:Vm,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,o){n&1&&(qi(zm),Ge(0,"span",0),zr(1),xr(2,"span",1),zr(3,1),sr(),zr(4,2),Ge(5,"span",2)(6,"span",3)),n&2&&_r("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:[T_,qm],encapsulation:2,changeDetection:0})}return t})();var qO=(()=>{class t extends bu{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(n,o){n&2&&(Fe("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled()),ws(o.color?"mat-"+o.color:""),_r("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[fe],attrs:N_,ngContentSelectors:L_,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,o){n&1&&(qi(),Ge(0,"span",0),zr(1),Ge(2,"span",1)(3,"span",2))},styles:['.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 40px);height:var(--mdc-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 40px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size, 24px);color:var(--mdc-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display, block)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',qm],encapsulation:2,changeDetection:0})}return t})();var Hm=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=te({type:t});static \u0275inj=Gt({imports:[Wr,$m,Wr]})}return t})();var ft="primary",ca=Symbol("RouteTitle"),Su=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let r=this.params[e];return Array.isArray(r)?r[0]:r}return null}getAll(e){if(this.has(e)){let r=this.params[e];return Array.isArray(r)?r:[r]}return[]}get keys(){return Object.keys(this.params)}};function Yo(t){return new Su(t)}function j_(t,e,r){let n=r.path.split("/");if(n.length>t.length||r.pathMatch==="full"&&(e.hasChildren()||n.length<t.length))return null;let o={};for(let i=0;i<n.length;i++){let s=n[i],l=t[i];if(s[0]===":")o[s.substring(1)]=l;else if(s!==l.path)return null}return{consumed:t.slice(0,n.length),posParams:o}}function U_(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!Rr(t[r],e[r]))return!1;return!0}function Rr(t,e){let r=t?Ru(t):void 0,n=e?Ru(e):void 0;if(!r||!n||r.length!=n.length)return!1;let o;for(let i=0;i<r.length;i++)if(o=r[i],!np(t[o],e[o]))return!1;return!0}function Ru(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function np(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let r=[...t].sort(),n=[...e].sort();return r.every((o,i)=>n[i]===o)}else return t===e}function op(t){return t.length>0?t[t.length-1]:null}function Sn(t){return Ao(t)?t:dm(t)?xe(Promise.resolve(t)):rt(t)}var z_={exact:ap,subset:sp},ip={exact:V_,subset:q_,ignored:()=>!0};function Km(t,e,r){return z_[r.paths](t.root,e.root,r.matrixParams)&&ip[r.queryParams](t.queryParams,e.queryParams)&&!(r.fragment==="exact"&&t.fragment!==e.fragment)}function V_(t,e){return Rr(t,e)}function ap(t,e,r){if(!so(t.segments,e.segments)||!Is(t.segments,e.segments,r)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let n in e.children)if(!t.children[n]||!ap(t.children[n],e.children[n],r))return!1;return!0}function q_(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(r=>np(t[r],e[r]))}function sp(t,e,r){return cp(t,e,e.segments,r)}function cp(t,e,r,n){if(t.segments.length>r.length){let o=t.segments.slice(0,r.length);return!(!so(o,r)||e.hasChildren()||!Is(o,r,n))}else if(t.segments.length===r.length){if(!so(t.segments,r)||!Is(t.segments,r,n))return!1;for(let o in e.children)if(!t.children[o]||!sp(t.children[o],e.children[o],n))return!1;return!0}else{let o=r.slice(0,t.segments.length),i=r.slice(t.segments.length);return!so(t.segments,o)||!Is(t.segments,o,n)||!t.children[ft]?!1:cp(t.children[ft],e,i,n)}}function Is(t,e,r){return e.every((n,o)=>ip[r](t[o].parameters,n.parameters))}var Qr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Et([],{}),r={},n=null){this.root=e,this.queryParams=r,this.fragment=n}get queryParamMap(){return this._queryParamMap??=Yo(this.queryParams),this._queryParamMap}toString(){return K_.serialize(this)}},Et=class{segments;children;parent=null;constructor(e,r){this.segments=e,this.children=r,Object.values(r).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ps(this)}},ao=class{path;parameters;_parameterMap;constructor(e,r){this.path=e,this.parameters=r}get parameterMap(){return this._parameterMap??=Yo(this.parameters),this._parameterMap}toString(){return up(this)}};function W_(t,e){return so(t,e)&&t.every((r,n)=>Rr(r.parameters,e[n].parameters))}function so(t,e){return t.length!==e.length?!1:t.every((r,n)=>r.path===e[n].path)}function H_(t,e){let r=[];return Object.entries(t.children).forEach(([n,o])=>{n===ft&&(r=r.concat(e(o,n)))}),Object.entries(t.children).forEach(([n,o])=>{n!==ft&&(r=r.concat(e(o,n)))}),r}var la=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:()=>new Go,providedIn:"root"})}return t})(),Go=class{parse(e){let r=new Eu(e);return new Qr(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}serialize(e){let r=`/${Yi(e.root,!0)}`,n=G_(e.queryParams),o=typeof e.fragment=="string"?`#${Q_(e.fragment)}`:"";return`${r}${n}${o}`}},K_=new Go;function Ps(t){return t.segments.map(e=>up(e)).join("/")}function Yi(t,e){if(!t.hasChildren())return Ps(t);if(e){let r=t.children[ft]?Yi(t.children[ft],!1):"",n=[];return Object.entries(t.children).forEach(([o,i])=>{o!==ft&&n.push(`${o}:${Yi(i,!1)}`)}),n.length>0?`${r}(${n.join("//")})`:r}else{let r=H_(t,(n,o)=>o===ft?[Yi(t.children[ft],!1)]:[`${o}:${Yi(n,!1)}`]);return Object.keys(t.children).length===1&&t.children[ft]!=null?`${Ps(t)}/${r[0]}`:`${Ps(t)}/(${r.join("//")})`}}function lp(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ks(t){return lp(t).replace(/%3B/gi,";")}function Q_(t){return encodeURI(t)}function Ou(t){return lp(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ms(t){return decodeURIComponent(t)}function Qm(t){return Ms(t.replace(/\+/g,"%20"))}function up(t){return`${Ou(t.path)}${Y_(t.parameters)}`}function Y_(t){return Object.entries(t).map(([e,r])=>`;${Ou(e)}=${Ou(r)}`).join("")}function G_(t){let e=Object.entries(t).map(([r,n])=>Array.isArray(n)?n.map(o=>`${ks(r)}=${ks(o)}`).join("&"):`${ks(r)}=${ks(n)}`).filter(r=>r);return e.length?`?${e.join("&")}`:""}var X_=/^[^\/()?;#]+/;function _u(t){let e=t.match(X_);return e?e[0]:""}var Z_=/^[^\/()?;=#]+/;function J_(t){let e=t.match(Z_);return e?e[0]:""}var tx=/^[^=?&#]+/;function ex(t){let e=t.match(tx);return e?e[0]:""}var rx=/^[^&#]+/;function nx(t){let e=t.match(rx);return e?e[0]:""}var Eu=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Et([],{}):new Et([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(r).length>0)&&(n[ft]=new Et(e,r)),n}parseSegment(){let e=_u(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Oe(4009,!1);return this.capture(e),new ao(Ms(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let r=J_(this.remaining);if(!r)return;this.capture(r);let n="";if(this.consumeOptional("=")){let o=_u(this.remaining);o&&(n=o,this.capture(n))}e[Ms(r)]=Ms(n)}parseQueryParam(e){let r=ex(this.remaining);if(!r)return;this.capture(r);let n="";if(this.consumeOptional("=")){let s=nx(this.remaining);s&&(n=s,this.capture(n))}let o=Qm(r),i=Qm(n);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){let r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=_u(this.remaining),o=this.remaining[n.length];if(o!=="/"&&o!==")"&&o!==";")throw new Oe(4010,!1);let i;n.indexOf(":")>-1?(i=n.slice(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=ft);let s=this.parseChildren();r[i]=Object.keys(s).length===1?s[ft]:new Et([],s),this.consumeOptional("//")}return r}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Oe(4011,!1)}};function dp(t){return t.segments.length>0?new Et([],{[ft]:t}):t}function fp(t){let e={};for(let[n,o]of Object.entries(t.children)){let i=fp(o);if(n===ft&&i.segments.length===0&&i.hasChildren())for(let[s,l]of Object.entries(i.children))e[s]=l;else(i.segments.length>0||i.hasChildren())&&(e[n]=i)}let r=new Et(t.segments,e);return ox(r)}function ox(t){if(t.numberOfChildren===1&&t.children[ft]){let e=t.children[ft];return new Et(t.segments.concat(e.segments),e.children)}return t}function co(t){return t instanceof Qr}function ix(t,e,r=null,n=null){let o=hp(t);return mp(o,e,r,n)}function hp(t){let e;function r(i){let s={};for(let d of i.children){let m=r(d);s[d.outlet]=m}let l=new Et(i.url,s);return i===t&&(e=l),l}let n=r(t.root),o=dp(n);return e??o}function mp(t,e,r,n){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return xu(o,o,o,r,n);let i=ax(e);if(i.toRoot())return xu(o,o,new Et([],{}),r,n);let s=sx(i,o,t),l=s.processChildren?Zi(s.segmentGroup,s.index,i.commands):gp(s.segmentGroup,s.index,i.commands);return xu(o,s.segmentGroup,l,r,n)}function Ts(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ea(t){return typeof t=="object"&&t!=null&&t.outlets}function xu(t,e,r,n,o){let i={};n&&Object.entries(n).forEach(([d,m])=>{i[d]=Array.isArray(m)?m.map(p=>`${p}`):`${m}`});let s;t===e?s=r:s=pp(t,e,r);let l=dp(fp(s));return new Qr(l,i,o)}function pp(t,e,r){let n={};return Object.entries(t.children).forEach(([o,i])=>{i===e?n[o]=r:n[o]=pp(i,e,r)}),new Et(t.segments,n)}var Ns=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,r,n){if(this.isAbsolute=e,this.numberOfDoubleDots=r,this.commands=n,e&&n.length>0&&Ts(n[0]))throw new Oe(4003,!1);let o=n.find(ea);if(o&&o!==op(n))throw new Oe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function ax(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Ns(!0,0,t);let e=0,r=!1,n=t.reduce((o,i,s)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let l={};return Object.entries(i.outlets).forEach(([d,m])=>{l[d]=typeof m=="string"?m.split("/"):m}),[...o,{outlets:l}]}if(i.segmentPath)return[...o,i.segmentPath]}return typeof i!="string"?[...o,i]:s===0?(i.split("/").forEach((l,d)=>{d==0&&l==="."||(d==0&&l===""?r=!0:l===".."?e++:l!=""&&o.push(l))}),o):[...o,i]},[]);return new Ns(r,e,n)}var Ho=class{segmentGroup;processChildren;index;constructor(e,r,n){this.segmentGroup=e,this.processChildren=r,this.index=n}};function sx(t,e,r){if(t.isAbsolute)return new Ho(e,!0,0);if(!r)return new Ho(e,!1,NaN);if(r.parent===null)return new Ho(r,!0,0);let n=Ts(t.commands[0])?0:1,o=r.segments.length-1+n;return cx(r,o,t.numberOfDoubleDots)}function cx(t,e,r){let n=t,o=e,i=r;for(;i>o;){if(i-=o,n=n.parent,!n)throw new Oe(4005,!1);o=n.segments.length}return new Ho(n,!1,o-i)}function lx(t){return ea(t[0])?t[0].outlets:{[ft]:t}}function gp(t,e,r){if(t??=new Et([],{}),t.segments.length===0&&t.hasChildren())return Zi(t,e,r);let n=ux(t,e,r),o=r.slice(n.commandIndex);if(n.match&&n.pathIndex<t.segments.length){let i=new Et(t.segments.slice(0,n.pathIndex),{});return i.children[ft]=new Et(t.segments.slice(n.pathIndex),t.children),Zi(i,0,o)}else return n.match&&o.length===0?new Et(t.segments,{}):n.match&&!t.hasChildren()?Du(t,e,r):n.match?Zi(t,0,o):Du(t,e,r)}function Zi(t,e,r){if(r.length===0)return new Et(t.segments,{});{let n=lx(r),o={};if(Object.keys(n).some(i=>i!==ft)&&t.children[ft]&&t.numberOfChildren===1&&t.children[ft].segments.length===0){let i=Zi(t.children[ft],e,r);return new Et(t.segments,i.children)}return Object.entries(n).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[i]=gp(t.children[i],e,s))}),Object.entries(t.children).forEach(([i,s])=>{n[i]===void 0&&(o[i]=s)}),new Et(t.segments,o)}}function ux(t,e,r){let n=0,o=e,i={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(n>=r.length)return i;let s=t.segments[o],l=r[n];if(ea(l))break;let d=`${l}`,m=n<r.length-1?r[n+1]:null;if(o>0&&d===void 0)break;if(d&&m&&typeof m=="object"&&m.outlets===void 0){if(!Gm(d,m,s))return i;n+=2}else{if(!Gm(d,{},s))return i;n++}o++}return{match:!0,pathIndex:o,commandIndex:n}}function Du(t,e,r){let n=t.segments.slice(0,e),o=0;for(;o<r.length;){let i=r[o];if(ea(i)){let d=dx(i.outlets);return new Et(n,d)}if(o===0&&Ts(r[0])){let d=t.segments[e];n.push(new ao(d.path,Ym(r[0]))),o++;continue}let s=ea(i)?i.outlets[ft]:`${i}`,l=o<r.length-1?r[o+1]:null;s&&l&&Ts(l)?(n.push(new ao(s,Ym(l))),o+=2):(n.push(new ao(s,{})),o++)}return new Et(n,{})}function dx(t){let e={};return Object.entries(t).forEach(([r,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(e[r]=Du(new Et([],{}),0,n))}),e}function Ym(t){let e={};return Object.entries(t).forEach(([r,n])=>e[r]=`${n}`),e}function Gm(t,e,r){return t==r.path&&Rr(e,r.parameters)}var Ji="imperative",ae=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ae||{}),Xe=class{id;url;constructor(e,r){this.id=e,this.url=r}},xn=class extends Xe{type=ae.NavigationStart;navigationTrigger;restoredState;constructor(e,r,n="imperative",o=null){super(e,r),this.navigationTrigger=n,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Or=class extends Xe{urlAfterRedirects;type=ae.NavigationEnd;constructor(e,r,n){super(e,r),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ue=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ue||{}),Ls=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Ls||{}),lr=class extends Xe{reason;code;type=ae.NavigationCancel;constructor(e,r,n,o){super(e,r),this.reason=n,this.code=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},wn=class extends Xe{reason;code;type=ae.NavigationSkipped;constructor(e,r,n,o){super(e,r),this.reason=n,this.code=o}},ra=class extends Xe{error;target;type=ae.NavigationError;constructor(e,r,n,o){super(e,r),this.error=n,this.target=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},$s=class extends Xe{urlAfterRedirects;state;type=ae.RoutesRecognized;constructor(e,r,n,o){super(e,r),this.urlAfterRedirects=n,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ku=class extends Xe{urlAfterRedirects;state;type=ae.GuardsCheckStart;constructor(e,r,n,o){super(e,r),this.urlAfterRedirects=n,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Au=class extends Xe{urlAfterRedirects;state;shouldActivate;type=ae.GuardsCheckEnd;constructor(e,r,n,o,i){super(e,r),this.urlAfterRedirects=n,this.state=o,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Iu=class extends Xe{urlAfterRedirects;state;type=ae.ResolveStart;constructor(e,r,n,o){super(e,r),this.urlAfterRedirects=n,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pu=class extends Xe{urlAfterRedirects;state;type=ae.ResolveEnd;constructor(e,r,n,o){super(e,r),this.urlAfterRedirects=n,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mu=class{route;type=ae.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Tu=class{route;type=ae.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Nu=class{snapshot;type=ae.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Lu=class{snapshot;type=ae.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$u=class{snapshot;type=ae.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fu=class{snapshot;type=ae.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fs=class{routerEvent;position;anchor;type=ae.Scroll;constructor(e,r,n){this.routerEvent=e,this.position=r,this.anchor=n}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},na=class{},Xo=class{url;navigationBehaviorOptions;constructor(e,r){this.url=e,this.navigationBehaviorOptions=r}};function fx(t,e){return t.providers&&!t._injector&&(t._injector=uu(t.providers,e,`Route: ${t.path}`)),t._injector??e}function cr(t){return t.outlet||ft}function hx(t,e){let r=t.filter(n=>cr(n)===e);return r.push(...t.filter(n=>cr(n)!==e)),r}function ua(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let r=e.routeConfig;if(r?._loadedInjector)return r._loadedInjector;if(r?._injector)return r._injector}return null}var Bu=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ua(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new da(this.rootInjector)}},da=(()=>{class t{rootInjector;contexts=new Map;constructor(r){this.rootInjector=r}onChildOutletCreated(r,n){let o=this.getOrCreateContext(r);o.outlet=n,this.contexts.set(r,o)}onChildOutletDestroyed(r){let n=this.getContext(r);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let n=this.getContext(r);return n||(n=new Bu(this.rootInjector),this.contexts.set(r,n)),n}getContext(r){return this.contexts.get(r)||null}static \u0275fac=function(n){return new(n||t)(Bt(eo))};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Bs=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let r=this.pathFromRoot(e);return r.length>1?r[r.length-2]:null}children(e){let r=ju(e,this._root);return r?r.children.map(n=>n.value):[]}firstChild(e){let r=ju(e,this._root);return r&&r.children.length>0?r.children[0].value:null}siblings(e){let r=Uu(e,this._root);return r.length<2?[]:r[r.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Uu(e,this._root).map(r=>r.value)}};function ju(t,e){if(t===e.value)return e;for(let r of e.children){let n=ju(t,r);if(n)return n}return null}function Uu(t,e){if(t===e.value)return[e];for(let r of e.children){let n=Uu(t,r);if(n.length)return n.unshift(e),n}return[]}var je=class{value;children;constructor(e,r){this.value=e,this.children=r}toString(){return`TreeNode(${this.value})`}};function Wo(t){let e={};return t&&t.children.forEach(r=>e[r.value.outlet]=r),e}var js=class extends Bs{snapshot;constructor(e,r){super(e),this.snapshot=r,Gu(this,e)}toString(){return this.snapshot.toString()}};function vp(t){let e=mx(t),r=new _e([new ao("",{})]),n=new _e({}),o=new _e({}),i=new _e({}),s=new _e(""),l=new Er(r,n,i,s,o,ft,t,e.root);return l.snapshot=e.root,new js(new je(l,[]),e)}function mx(t){let e={},r={},n={},o="",i=new Ko([],e,n,o,r,ft,t,null,{});return new zs("",new je(i,[]))}var Er=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,r,n,o,i,s,l,d){this.urlSubject=e,this.paramsSubject=r,this.queryParamsSubject=n,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=l,this._futureSnapshot=d,this.title=this.dataSubject?.pipe(dt(m=>m[ca]))??rt(void 0),this.url=e,this.params=r,this.queryParams=n,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(dt(e=>Yo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(dt(e=>Yo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Us(t,e,r="emptyOnly"){let n,{routeConfig:o}=t;return e!==null&&(r==="always"||o?.path===""||!e.component&&!e.routeConfig?.loadComponent)?n={params:j(j({},e.params),t.params),data:j(j({},e.data),t.data),resolve:j(j(j(j({},t.data),e.data),o?.data),t._resolvedData)}:n={params:j({},t.params),data:j({},t.data),resolve:j(j({},t.data),t._resolvedData??{})},o&&bp(o)&&(n.resolve[ca]=o.title),n}var Ko=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[ca]}constructor(e,r,n,o,i,s,l,d,m){this.url=e,this.params=r,this.queryParams=n,this.fragment=o,this.data=i,this.outlet=s,this.component=l,this.routeConfig=d,this._resolve=m}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Yo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Yo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(n=>n.toString()).join("/"),r=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${r}')`}},zs=class extends Bs{url;constructor(e,r){super(r),this.url=e,Gu(this,r)}toString(){return yp(this._root)}};function Gu(t,e){e.value._routerState=t,e.children.forEach(r=>Gu(t,r))}function yp(t){let e=t.children.length>0?` { ${t.children.map(yp).join(", ")} } `:"";return`${t.value}${e}`}function wu(t){if(t.snapshot){let e=t.snapshot,r=t._futureSnapshot;t.snapshot=r,Rr(e.queryParams,r.queryParams)||t.queryParamsSubject.next(r.queryParams),e.fragment!==r.fragment&&t.fragmentSubject.next(r.fragment),Rr(e.params,r.params)||t.paramsSubject.next(r.params),U_(e.url,r.url)||t.urlSubject.next(r.url),Rr(e.data,r.data)||t.dataSubject.next(r.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function zu(t,e){let r=Rr(t.params,e.params)&&W_(t.url,e.url),n=!t.parent!=!e.parent;return r&&!n&&(!t.parent||zu(t.parent,e.parent))}function bp(t){return typeof t.title=="string"||t.title===null}var px=new mt(""),gx=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ft;activateEvents=new Ce;deactivateEvents=new Ce;attachEvents=new Ce;detachEvents=new Ce;routerOutletData=rm(void 0);parentContexts=I(da);location=I(gn);changeDetector=I(wr);inputBinder=I(Hs,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(r){if(r.name){let{firstChange:n,previousValue:o}=r.name;if(n)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Oe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Oe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Oe(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,n){this.activated=r,this._activatedRoute=n,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,n){if(this.isActivated)throw new Oe(4013,!1);this._activatedRoute=r;let o=this.location,s=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,d=new Vu(r,l,o.injector,this.routerOutletData);this.activated=o.createComponent(s,{index:o.length,injector:d,environmentInjector:n}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Ut({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[pn]})}return t})(),Vu=class t{route;childContexts;parent;outletData;__ngOutletInjector(e){return new t(this.route,this.childContexts,e,this.outletData)}constructor(e,r,n,o){this.route=e,this.childContexts=r,this.parent=n,this.outletData=o}get(e,r){return e===Er?this.route:e===da?this.childContexts:e===px?this.outletData:this.parent.get(e,r)}},Hs=new mt(""),Xm=(()=>{class t{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:n}=r,o=ys([n.queryParams,n.params,n.data]).pipe(Ye(([i,s,l],d)=>(l=j(j(j({},i),s),l),d===0?rt(l):Promise.resolve(l)))).subscribe(i=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==n||n.component===null){this.unsubscribeFromRouteData(r);return}let s=_m(n.component);if(!s){this.unsubscribeFromRouteData(r);return}for(let{templateName:l}of s.inputs)r.activatedComponentRef.setInput(l,i[l])});this.outletDataSubscriptions.set(r,o)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac})}return t})();function vx(t,e,r){let n=oa(t,e._root,r?r._root:void 0);return new js(n,e)}function oa(t,e,r){if(r&&t.shouldReuseRoute(e.value,r.value.snapshot)){let n=r.value;n._futureSnapshot=e.value;let o=yx(t,e,r);return new je(n,o)}else{if(t.shouldAttach(e.value)){let i=t.retrieve(e.value);if(i!==null){let s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(l=>oa(t,l)),s}}let n=bx(e.value),o=e.children.map(i=>oa(t,i));return new je(n,o)}}function yx(t,e,r){return e.children.map(n=>{for(let o of r.children)if(t.shouldReuseRoute(n.value,o.value.snapshot))return oa(t,n,o);return oa(t,n)})}function bx(t){return new Er(new _e(t.url),new _e(t.params),new _e(t.queryParams),new _e(t.fragment),new _e(t.data),t.outlet,t.component,t)}var ia=class{redirectTo;navigationBehaviorOptions;constructor(e,r){this.redirectTo=e,this.navigationBehaviorOptions=r}},_p="ngNavigationCancelingError";function Vs(t,e){let{redirectTo:r,navigationBehaviorOptions:n}=co(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=xp(!1,Ue.Redirect);return o.url=r,o.navigationBehaviorOptions=n,o}function xp(t,e){let r=new Error(`NavigationCancelingError: ${t||""}`);return r[_p]=!0,r.cancellationCode=e,r}function _x(t){return wp(t)&&co(t.url)}function wp(t){return!!t&&t[_p]}var xx=(t,e,r,n)=>dt(o=>(new qu(e,o.targetRouterState,o.currentRouterState,r,n).activate(t),o)),qu=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,r,n,o,i){this.routeReuseStrategy=e,this.futureState=r,this.currState=n,this.forwardEvent=o,this.inputBindingEnabled=i}activate(e){let r=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,n,e),wu(this.futureState.root),this.activateChildRoutes(r,n,e)}deactivateChildRoutes(e,r,n){let o=Wo(r);e.children.forEach(i=>{let s=i.value.outlet;this.deactivateRoutes(i,o[s],n),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,n)})}deactivateRoutes(e,r,n){let o=e.value,i=r?r.value:null;if(o===i)if(o.component){let s=n.getContext(o.outlet);s&&this.deactivateChildRoutes(e,r,s.children)}else this.deactivateChildRoutes(e,r,n);else i&&this.deactivateRouteAndItsChildren(r,n)}deactivateRouteAndItsChildren(e,r){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,r):this.deactivateRouteAndOutlet(e,r)}detachAndStoreRouteSubtree(e,r){let n=r.getContext(e.value.outlet),o=n&&e.value.component?n.children:r,i=Wo(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(n&&n.outlet){let s=n.outlet.detach(),l=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:l})}}deactivateRouteAndOutlet(e,r){let n=r.getContext(e.value.outlet),o=n&&e.value.component?n.children:r,i=Wo(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(e,r,n){let o=Wo(r);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],n),this.forwardEvent(new Fu(i.value.snapshot))}),e.children.length&&this.forwardEvent(new Lu(e.value.snapshot))}activateRoutes(e,r,n){let o=e.value,i=r?r.value:null;if(wu(o),o===i)if(o.component){let s=n.getOrCreateContext(o.outlet);this.activateChildRoutes(e,r,s.children)}else this.activateChildRoutes(e,r,n);else if(o.component){let s=n.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let l=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(l.contexts),s.attachRef=l.componentRef,s.route=l.route.value,s.outlet&&s.outlet.attach(l.componentRef,l.route.value),wu(l.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,n)}},qs=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Qo=class{component;route;constructor(e,r){this.component=e,this.route=r}};function wx(t,e,r){let n=t._root,o=e?e._root:null;return Gi(n,o,r,[n.value])}function Cx(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Jo(t,e){let r=Symbol(),n=e.get(t,r);return n===r?typeof t=="function"&&!Gh(t)?t:e.get(t):n}function Gi(t,e,r,n,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=Wo(e);return t.children.forEach(s=>{Sx(s,i[s.value.outlet],r,n.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,l])=>ta(l,r.getContext(s),o)),o}function Sx(t,e,r,n,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=t.value,s=e?e.value:null,l=r?r.getContext(t.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){let d=Rx(s,i,i.routeConfig.runGuardsAndResolvers);d?o.canActivateChecks.push(new qs(n)):(i.data=s.data,i._resolvedData=s._resolvedData),i.component?Gi(t,e,l?l.children:null,n,o):Gi(t,e,r,n,o),d&&l&&l.outlet&&l.outlet.isActivated&&o.canDeactivateChecks.push(new Qo(l.outlet.component,s))}else s&&ta(e,l,o),o.canActivateChecks.push(new qs(n)),i.component?Gi(t,null,l?l.children:null,n,o):Gi(t,null,r,n,o);return o}function Rx(t,e,r){if(typeof r=="function")return r(t,e);switch(r){case"pathParamsChange":return!so(t.url,e.url);case"pathParamsOrQueryParamsChange":return!so(t.url,e.url)||!Rr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zu(t,e)||!Rr(t.queryParams,e.queryParams);case"paramsChange":default:return!zu(t,e)}}function ta(t,e,r){let n=Wo(t),o=t.value;Object.entries(n).forEach(([i,s])=>{o.component?e?ta(s,e.children.getContext(i),r):ta(s,null,r):ta(s,e,r)}),o.component?e&&e.outlet&&e.outlet.isActivated?r.canDeactivateChecks.push(new Qo(e.outlet.component,o)):r.canDeactivateChecks.push(new Qo(null,o)):r.canDeactivateChecks.push(new Qo(null,o))}function fa(t){return typeof t=="function"}function Ox(t){return typeof t=="boolean"}function Ex(t){return t&&fa(t.canLoad)}function Dx(t){return t&&fa(t.canActivate)}function kx(t){return t&&fa(t.canActivateChild)}function Ax(t){return t&&fa(t.canDeactivate)}function Ix(t){return t&&fa(t.canMatch)}function Cp(t){return t instanceof zh||t?.name==="EmptyError"}var As=Symbol("INITIAL_VALUE");function Zo(){return Ye(t=>ys(t.map(e=>e.pipe(yr(1),ar(As)))).pipe(dt(e=>{for(let r of e)if(r!==!0){if(r===As)return As;if(r===!1||Px(r))return r}return!0}),_t(e=>e!==As),yr(1)))}function Px(t){return co(t)||t instanceof ia}function Mx(t,e){return Ht(r=>{let{targetSnapshot:n,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=r;return s.length===0&&i.length===0?rt(pt(j({},r),{guardsResult:!0})):Tx(s,n,o,t).pipe(Ht(l=>l&&Ox(l)?Nx(n,i,t,e):rt(l)),dt(l=>pt(j({},r),{guardsResult:l})))})}function Tx(t,e,r,n){return xe(t).pipe(Ht(o=>jx(o.component,o.route,r,e,n)),hn(o=>o!==!0,!0))}function Nx(t,e,r,n){return xe(e).pipe(Mo(o=>qh($x(o.route.parent,n),Lx(o.route,n),Bx(t,o.path,r),Fx(t,o.route,r))),hn(o=>o!==!0,!0))}function Lx(t,e){return t!==null&&e&&e(new $u(t)),rt(!0)}function $x(t,e){return t!==null&&e&&e(new Nu(t)),rt(!0)}function Fx(t,e,r){let n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||n.length===0)return rt(!0);let o=n.map(i=>to(()=>{let s=ua(e)??r,l=Jo(i,s),d=Dx(l)?l.canActivate(e,t):br(s,()=>l(e,t));return Sn(d).pipe(hn())}));return rt(o).pipe(Zo())}function Bx(t,e,r){let n=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>Cx(s)).filter(s=>s!==null).map(s=>to(()=>{let l=s.guards.map(d=>{let m=ua(s.node)??r,p=Jo(d,m),y=kx(p)?p.canActivateChild(n,t):br(m,()=>p(n,t));return Sn(y).pipe(hn())});return rt(l).pipe(Zo())}));return rt(i).pipe(Zo())}function jx(t,e,r,n,o){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return rt(!0);let s=i.map(l=>{let d=ua(e)??o,m=Jo(l,d),p=Ax(m)?m.canDeactivate(t,e,r,n):br(d,()=>m(t,e,r,n));return Sn(p).pipe(hn())});return rt(s).pipe(Zo())}function Ux(t,e,r,n){let o=e.canLoad;if(o===void 0||o.length===0)return rt(!0);let i=o.map(s=>{let l=Jo(s,t),d=Ex(l)?l.canLoad(e,r):br(t,()=>l(e,r));return Sn(d)});return rt(i).pipe(Zo(),Sp(n))}function Sp(t){return jh(we(e=>{if(typeof e!="boolean")throw Vs(t,e)}),dt(e=>e===!0))}function zx(t,e,r,n){let o=e.canMatch;if(!o||o.length===0)return rt(!0);let i=o.map(s=>{let l=Jo(s,t),d=Ix(l)?l.canMatch(e,r):br(t,()=>l(e,r));return Sn(d)});return rt(i).pipe(Zo(),Sp(n))}var aa=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},sa=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function qo(t){return ji(new aa(t))}function Vx(t){return ji(new Oe(4e3,!1))}function qx(t){return ji(xp(!1,Ue.GuardRejected))}var Wu=class{urlSerializer;urlTree;constructor(e,r){this.urlSerializer=e,this.urlTree=r}lineralizeSegments(e,r){let n=[],o=r.root;for(;;){if(n=n.concat(o.segments),o.numberOfChildren===0)return rt(n);if(o.numberOfChildren>1||!o.children[ft])return Vx(`${e.redirectTo}`);o=o.children[ft]}}applyRedirectCommands(e,r,n,o,i){if(typeof r!="string"){let l=r,{queryParams:d,fragment:m,routeConfig:p,url:y,outlet:C,params:k,data:N,title:B}=o,Y=br(i,()=>l({params:k,data:N,queryParams:d,fragment:m,routeConfig:p,url:y,outlet:C,title:B}));if(Y instanceof Qr)throw new sa(Y);r=Y}let s=this.applyRedirectCreateUrlTree(r,this.urlSerializer.parse(r),e,n);if(r[0]==="/")throw new sa(s);return s}applyRedirectCreateUrlTree(e,r,n,o){let i=this.createSegmentGroup(e,r.root,n,o);return new Qr(i,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}createQueryParams(e,r){let n={};return Object.entries(e).forEach(([o,i])=>{if(typeof i=="string"&&i[0]===":"){let l=i.substring(1);n[o]=r[l]}else n[o]=i}),n}createSegmentGroup(e,r,n,o){let i=this.createSegments(e,r.segments,n,o),s={};return Object.entries(r.children).forEach(([l,d])=>{s[l]=this.createSegmentGroup(e,d,n,o)}),new Et(i,s)}createSegments(e,r,n,o){return r.map(i=>i.path[0]===":"?this.findPosParam(e,i,o):this.findOrReturn(i,n))}findPosParam(e,r,n){let o=n[r.path.substring(1)];if(!o)throw new Oe(4001,!1);return o}findOrReturn(e,r){let n=0;for(let o of r){if(o.path===e.path)return r.splice(n),o;n++}return e}},Hu={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Wx(t,e,r,n,o){let i=Rp(t,e,r);return i.matched?(n=fx(e,n),zx(n,e,r,o).pipe(dt(s=>s===!0?i:j({},Hu)))):rt(i)}function Rp(t,e,r){if(e.path==="**")return Hx(r);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||r.length>0)?j({},Hu):{matched:!0,consumedSegments:[],remainingSegments:r,parameters:{},positionalParamSegments:{}};let o=(e.matcher||j_)(r,t,e);if(!o)return j({},Hu);let i={};Object.entries(o.posParams??{}).forEach(([l,d])=>{i[l]=d.path});let s=o.consumed.length>0?j(j({},i),o.consumed[o.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:r.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function Hx(t){return{matched:!0,parameters:t.length>0?op(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Zm(t,e,r,n){return r.length>0&&Yx(t,r,n)?{segmentGroup:new Et(e,Qx(n,new Et(r,t.children))),slicedSegments:[]}:r.length===0&&Gx(t,r,n)?{segmentGroup:new Et(t.segments,Kx(t,r,n,t.children)),slicedSegments:r}:{segmentGroup:new Et(t.segments,t.children),slicedSegments:r}}function Kx(t,e,r,n){let o={};for(let i of r)if(Ks(t,e,i)&&!n[cr(i)]){let s=new Et([],{});o[cr(i)]=s}return j(j({},n),o)}function Qx(t,e){let r={};r[ft]=e;for(let n of t)if(n.path===""&&cr(n)!==ft){let o=new Et([],{});r[cr(n)]=o}return r}function Yx(t,e,r){return r.some(n=>Ks(t,e,n)&&cr(n)!==ft)}function Gx(t,e,r){return r.some(n=>Ks(t,e,n))}function Ks(t,e,r){return(t.hasChildren()||e.length>0)&&r.pathMatch==="full"?!1:r.path===""}function Xx(t,e,r){return e.length===0&&!t.children[r]}var Ku=class{};function Zx(t,e,r,n,o,i,s="emptyOnly"){return new Qu(t,e,r,n,o,s,i).recognize()}var Jx=31,Qu=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,r,n,o,i,s,l){this.injector=e,this.configLoader=r,this.rootComponentType=n,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=l,this.applyRedirects=new Wu(this.urlSerializer,this.urlTree)}noMatchError(e){return new Oe(4002,`'${e.segmentGroup}'`)}recognize(){let e=Zm(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(dt(({children:r,rootSnapshot:n})=>{let o=new je(n,r),i=new zs("",o),s=ix(n,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),{state:i,tree:s}}))}match(e){let r=new Ko([],Object.freeze({}),Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ft,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ft,r).pipe(dt(n=>({children:n,rootSnapshot:r})),Po(n=>{if(n instanceof sa)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof aa?this.noMatchError(n):n}))}processSegmentGroup(e,r,n,o,i){return n.segments.length===0&&n.hasChildren()?this.processChildren(e,r,n,i):this.processSegment(e,r,n,n.segments,o,!0,i).pipe(dt(s=>s instanceof je?[s]:[]))}processChildren(e,r,n,o){let i=[];for(let s of Object.keys(n.children))s==="primary"?i.unshift(s):i.push(s);return xe(i).pipe(Mo(s=>{let l=n.children[s],d=hx(r,s);return this.processSegmentGroup(e,d,l,s,o)}),Qh((s,l)=>(s.push(...l),s)),iu(null),Hh(),Ht(s=>{if(s===null)return qo(n);let l=Op(s);return tw(l),rt(l)}))}processSegment(e,r,n,o,i,s,l){return xe(r).pipe(Mo(d=>this.processSegmentAgainstRoute(d._injector??e,r,d,n,o,i,s,l).pipe(Po(m=>{if(m instanceof aa)return rt(null);throw m}))),hn(d=>!!d),Po(d=>{if(Cp(d))return Xx(n,o,i)?rt(new Ku):qo(n);throw d}))}processSegmentAgainstRoute(e,r,n,o,i,s,l,d){return cr(n)!==s&&(s===ft||!Ks(o,i,n))?qo(o):n.redirectTo===void 0?this.matchSegmentAgainstRoute(e,o,n,i,s,d):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(e,o,r,n,i,s,d):qo(o)}expandSegmentAgainstRouteUsingRedirect(e,r,n,o,i,s,l){let{matched:d,parameters:m,consumedSegments:p,positionalParamSegments:y,remainingSegments:C}=Rp(r,o,i);if(!d)return qo(r);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Jx&&(this.allowRedirects=!1));let k=new Ko(i,m,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Jm(o),cr(o),o.component??o._loadedComponent??null,o,tp(o)),N=Us(k,l,this.paramsInheritanceStrategy);k.params=Object.freeze(N.params),k.data=Object.freeze(N.data);let B=this.applyRedirects.applyRedirectCommands(p,o.redirectTo,y,k,e);return this.applyRedirects.lineralizeSegments(o,B).pipe(Ht(Y=>this.processSegment(e,n,r,Y.concat(C),s,!1,l)))}matchSegmentAgainstRoute(e,r,n,o,i,s){let l=Wx(r,n,o,e,this.urlSerializer);return n.path==="**"&&(r.children={}),l.pipe(Ye(d=>d.matched?(e=n._injector??e,this.getChildConfig(e,n,o).pipe(Ye(({routes:m})=>{let p=n._loadedInjector??e,{parameters:y,consumedSegments:C,remainingSegments:k}=d,N=new Ko(C,y,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Jm(n),cr(n),n.component??n._loadedComponent??null,n,tp(n)),B=Us(N,s,this.paramsInheritanceStrategy);N.params=Object.freeze(B.params),N.data=Object.freeze(B.data);let{segmentGroup:Y,slicedSegments:et}=Zm(r,C,k,m);if(et.length===0&&Y.hasChildren())return this.processChildren(p,m,Y,N).pipe(dt(J=>new je(N,J)));if(m.length===0&&et.length===0)return rt(new je(N,[]));let nt=cr(n)===i;return this.processSegment(p,m,Y,et,nt?ft:i,!0,N).pipe(dt(J=>new je(N,J instanceof je?[J]:[])))}))):qo(r)))}getChildConfig(e,r,n){return r.children?rt({routes:r.children,injector:e}):r.loadChildren?r._loadedRoutes!==void 0?rt({routes:r._loadedRoutes,injector:r._loadedInjector}):Ux(e,r,n,this.urlSerializer).pipe(Ht(o=>o?this.configLoader.loadChildren(e,r).pipe(we(i=>{r._loadedRoutes=i.routes,r._loadedInjector=i.injector})):qx(r))):rt({routes:[],injector:e})}};function tw(t){t.sort((e,r)=>e.value.outlet===ft?-1:r.value.outlet===ft?1:e.value.outlet.localeCompare(r.value.outlet))}function ew(t){let e=t.value.routeConfig;return e&&e.path===""}function Op(t){let e=[],r=new Set;for(let n of t){if(!ew(n)){e.push(n);continue}let o=e.find(i=>n.value.routeConfig===i.value.routeConfig);o!==void 0?(o.children.push(...n.children),r.add(o)):e.push(n)}for(let n of r){let o=Op(n.children);e.push(new je(n.value,o))}return e.filter(n=>!r.has(n))}function Jm(t){return t.data||{}}function tp(t){return t.resolve||{}}function rw(t,e,r,n,o,i){return Ht(s=>Zx(t,e,r,n,s.extractedUrl,o,i).pipe(dt(({state:l,tree:d})=>pt(j({},s),{targetSnapshot:l,urlAfterRedirects:d}))))}function nw(t,e){return Ht(r=>{let{targetSnapshot:n,guards:{canActivateChecks:o}}=r;if(!o.length)return rt(r);let i=new Set(o.map(d=>d.route)),s=new Set;for(let d of i)if(!s.has(d))for(let m of Ep(d))s.add(m);let l=0;return xe(s).pipe(Mo(d=>i.has(d)?ow(d,n,t,e):(d.data=Us(d,d.parent,t).resolve,rt(void 0))),we(()=>l++),au(1),Ht(d=>l===s.size?rt(r):fn))})}function Ep(t){let e=t.children.map(r=>Ep(r)).flat();return[t,...e]}function ow(t,e,r,n){let o=t.routeConfig,i=t._resolve;return o?.title!==void 0&&!bp(o)&&(i[ca]=o.title),iw(i,t,e,n).pipe(dt(s=>(t._resolvedData=s,t.data=Us(t,t.parent,r).resolve,null)))}function iw(t,e,r,n){let o=Ru(t);if(o.length===0)return rt({});let i={};return xe(o).pipe(Ht(s=>aw(t[s],e,r,n).pipe(hn(),we(l=>{if(l instanceof ia)throw Vs(new Go,l);i[s]=l}))),au(1),Wh(i),Po(s=>Cp(s)?fn:ji(s)))}function aw(t,e,r,n){let o=ua(e)??n,i=Jo(t,o),s=i.resolve?i.resolve(e,r):br(o,()=>i(e,r));return Sn(s)}function Cu(t){return Ye(e=>{let r=t(e);return r?xe(r).pipe(dt(()=>e)):rt(e)})}var Dp=(()=>{class t{buildTitle(r){let n,o=r.root;for(;o!==void 0;)n=this.getResolvedTitleForRoute(o)??n,o=o.children.find(i=>i.outlet===ft);return n}getResolvedTitleForRoute(r){return r.data[ca]}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:()=>I(sw),providedIn:"root"})}return t})(),sw=(()=>{class t extends Dp{title;constructor(r){super(),this.title=r}updateTitle(r){let n=this.buildTitle(r);n!==void 0&&this.title.setTitle(n)}static \u0275fac=function(n){return new(n||t)(Bt(Dm))};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ha=new mt("",{providedIn:"root",factory:()=>({})}),Xu=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,o){n&1&&Ge(0,"router-outlet")},dependencies:[gx],encapsulation:2})}return t})();function Zu(t){let e=t.children&&t.children.map(Zu),r=e?pt(j({},t),{children:e}):j({},t);return!r.component&&!r.loadComponent&&(e||r.loadChildren)&&r.outlet&&r.outlet!==ft&&(r.component=Xu),r}var Cn=new mt(""),Ju=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=I(jo);loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return rt(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let n=Sn(r.loadComponent()).pipe(dt(kp),we(i=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=i}),No(()=>{this.componentLoaders.delete(r)})),o=new Jn(n,()=>new at).pipe(Bi());return this.componentLoaders.set(r,o),o}loadChildren(r,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return rt({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let i=cw(n,this.compiler,r,this.onLoadEndListener).pipe(No(()=>{this.childrenLoaders.delete(n)})),s=new Jn(i,()=>new at).pipe(Bi());return this.childrenLoaders.set(n,s),s}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function cw(t,e,r,n){return Sn(t.loadChildren()).pipe(dt(kp),Ht(o=>o instanceof _s||Array.isArray(o)?rt(o):xe(e.compileModuleAsync(o))),dt(o=>{n&&n(t);let i,s,l=!1;return Array.isArray(o)?(s=o,l=!0):(i=o.create(r).injector,s=i.get(Cn,[],{optional:!0,self:!0}).flat()),{routes:s.map(Zu),injector:i}}))}function lw(t){return t&&typeof t=="object"&&"default"in t}function kp(t){return lw(t)?t.default:t}var td=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:()=>I(uw),providedIn:"root"})}return t})(),uw=(()=>{class t{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,n){return r}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ap=new mt(""),Ip=new mt("");function dw(t,e,r){let n=t.get(Ip),o=t.get(me);return t.get(Zt).runOutsideAngular(()=>{if(!o.startViewTransition||n.skipNextTransition)return n.skipNextTransition=!1,new Promise(m=>setTimeout(m));let i,s=new Promise(m=>{i=m}),l=o.startViewTransition(()=>(i(),fw(t))),{onViewTransitionCreated:d}=n;return d&&br(t,()=>d({transition:l,from:e,to:r})),s})}function fw(t){return new Promise(e=>{no({read:()=>setTimeout(e)},{injector:t})})}var Pp=new mt(""),ed=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new at;transitionAbortSubject=new at;configLoader=I(Ju);environmentInjector=I(eo);urlSerializer=I(la);rootContexts=I(da);location=I(Vr);inputBindingEnabled=I(Hs,{optional:!0})!==null;titleStrategy=I(Dp);options=I(ha,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=I(td);createViewTransition=I(Ap,{optional:!0});navigationErrorHandler=I(Pp,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>rt(void 0);rootComponentType=null;constructor(){let r=o=>this.events.next(new Mu(o)),n=o=>this.events.next(new Tu(o));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let n=++this.navigationId;this.transitions?.next(pt(j(j({},this.transitions.value),r),{id:n}))}setupNavigations(r,n,o){return this.transitions=new _e({id:0,currentUrlTree:n,currentRawUrl:n,extractedUrl:this.urlHandlingStrategy.extract(n),urlAfterRedirects:this.urlHandlingStrategy.extract(n),rawUrl:n,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ji,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(_t(i=>i.id!==0),dt(i=>pt(j({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Ye(i=>{let s=!1,l=!1;return rt(i).pipe(Ye(d=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Ue.SupersededByNewNavigation),fn;this.currentTransition=i,this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,targetBrowserUrl:typeof d.extras.browserUrl=="string"?this.urlSerializer.parse(d.extras.browserUrl):d.extras.browserUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?pt(j({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let m=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=d.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!m&&p!=="reload"){let y="";return this.events.next(new wn(d.id,this.urlSerializer.serialize(d.rawUrl),y,Ls.IgnoredSameUrlNavigation)),d.resolve(!1),fn}if(this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return rt(d).pipe(Ye(y=>{let C=this.transitions?.getValue();return this.events.next(new xn(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),C!==this.transitions?.getValue()?fn:Promise.resolve(y)}),rw(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),we(y=>{i.targetSnapshot=y.targetSnapshot,i.urlAfterRedirects=y.urlAfterRedirects,this.currentNavigation=pt(j({},this.currentNavigation),{finalUrl:y.urlAfterRedirects});let C=new $s(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(C)}));if(m&&this.urlHandlingStrategy.shouldProcessUrl(d.currentRawUrl)){let{id:y,extractedUrl:C,source:k,restoredState:N,extras:B}=d,Y=new xn(y,this.urlSerializer.serialize(C),k,N);this.events.next(Y);let et=vp(this.rootComponentType).snapshot;return this.currentTransition=i=pt(j({},d),{targetSnapshot:et,urlAfterRedirects:C,extras:pt(j({},B),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=C,rt(i)}else{let y="";return this.events.next(new wn(d.id,this.urlSerializer.serialize(d.extractedUrl),y,Ls.IgnoredByUrlHandlingStrategy)),d.resolve(!1),fn}}),we(d=>{let m=new ku(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(m)}),dt(d=>(this.currentTransition=i=pt(j({},d),{guards:wx(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),i)),Mx(this.environmentInjector,d=>this.events.next(d)),we(d=>{if(i.guardsResult=d.guardsResult,d.guardsResult&&typeof d.guardsResult!="boolean")throw Vs(this.urlSerializer,d.guardsResult);let m=new Au(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(m)}),_t(d=>d.guardsResult?!0:(this.cancelNavigationTransition(d,"",Ue.GuardRejected),!1)),Cu(d=>{if(d.guards.canActivateChecks.length)return rt(d).pipe(we(m=>{let p=new Iu(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(p)}),Ye(m=>{let p=!1;return rt(m).pipe(nw(this.paramsInheritanceStrategy,this.environmentInjector),we({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(m,"",Ue.NoDataFromResolver)}}))}),we(m=>{let p=new Pu(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(p)}))}),Cu(d=>{let m=p=>{let y=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(p.routeConfig).pipe(we(C=>{p.component=C}),dt(()=>{})));for(let C of p.children)y.push(...m(C));return y};return ys(m(d.targetSnapshot.root)).pipe(iu(null),yr(1))}),Cu(()=>this.afterPreactivation()),Ye(()=>{let{currentSnapshot:d,targetSnapshot:m}=i,p=this.createViewTransition?.(this.environmentInjector,d.root,m.root);return p?xe(p).pipe(dt(()=>i)):rt(i)}),dt(d=>{let m=vx(r.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return this.currentTransition=i=pt(j({},d),{targetRouterState:m}),this.currentNavigation.targetRouterState=m,i}),we(()=>{this.events.next(new na)}),xx(this.rootContexts,r.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),yr(1),we({next:d=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Or(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects))),this.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{s=!0}}),mn(this.transitionAbortSubject.pipe(we(d=>{throw d}))),No(()=>{!s&&!l&&this.cancelNavigationTransition(i,"",Ue.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),Po(d=>{if(l=!0,wp(d))this.events.next(new lr(i.id,this.urlSerializer.serialize(i.extractedUrl),d.message,d.cancellationCode)),_x(d)?this.events.next(new Xo(d.url,d.navigationBehaviorOptions)):i.resolve(!1);else{let m=new ra(i.id,this.urlSerializer.serialize(i.extractedUrl),d,i.targetSnapshot??void 0);try{let p=br(this.environmentInjector,()=>this.navigationErrorHandler?.(m));if(p instanceof ia){let{message:y,cancellationCode:C}=Vs(this.urlSerializer,p);this.events.next(new lr(i.id,this.urlSerializer.serialize(i.extractedUrl),y,C)),this.events.next(new Xo(p.redirectTo,p.navigationBehaviorOptions))}else throw this.events.next(m),d}catch(p){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(p)}}return fn}))}))}cancelNavigationTransition(r,n,o){let i=new lr(r.id,this.urlSerializer.serialize(r.extractedUrl),n,o);this.events.next(i),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),n=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==n?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function hw(t){return t!==Ji}var rd=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:()=>I(mw),providedIn:"root"})}return t})(),Yu=class{shouldDetach(e){return!1}store(e,r){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,r){return e.routeConfig===r.routeConfig}},mw=(()=>{class t extends Yu{static \u0275fac=(()=>{let r;return function(o){return(r||(r=de(t)))(o||t)}})();static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Mp=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:()=>I(pw),providedIn:"root"})}return t})(),pw=(()=>{class t extends Mp{location=I(Vr);urlSerializer=I(la);options=I(ha,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=I(td);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Qr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=vp(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(n=>{n.type==="popstate"&&r(n.url,n.state)})}handleRouterEvent(r,n){if(r instanceof xn)this.stateMemento=this.createStateMemento();else if(r instanceof wn)this.rawUrlTree=n.initialUrl;else if(r instanceof $s){if(this.urlUpdateStrategy==="eager"&&!n.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl);this.setBrowserUrl(n.targetBrowserUrl??o,n)}}else r instanceof na?(this.currentUrlTree=n.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl),this.routerState=n.targetRouterState,this.urlUpdateStrategy==="deferred"&&!n.extras.skipLocationChange&&this.setBrowserUrl(n.targetBrowserUrl??this.rawUrlTree,n)):r instanceof lr&&(r.code===Ue.GuardRejected||r.code===Ue.NoDataFromResolver)?this.restoreHistory(n):r instanceof ra?this.restoreHistory(n,!0):r instanceof Or&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,n){let o=r instanceof Qr?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(o)||n.extras.replaceUrl){let i=this.browserPageId,s=j(j({},n.extras.state),this.generateNgRouterState(n.id,i));this.location.replaceState(o,"",s)}else{let i=j(j({},n.extras.state),this.generateNgRouterState(n.id,this.browserPageId+1));this.location.go(o,"",i)}}restoreHistory(r,n=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,i=this.currentPageId-o;i!==0?this.location.historyGo(i):this.currentUrlTree===r.finalUrl&&i===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,n){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:n}:{navigationId:r}}static \u0275fac=(()=>{let r;return function(o){return(r||(r=de(t)))(o||t)}})();static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Xi=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Xi||{});function Tp(t,e){t.events.pipe(_t(r=>r instanceof Or||r instanceof lr||r instanceof ra||r instanceof wn),dt(r=>r instanceof Or||r instanceof wn?Xi.COMPLETE:(r instanceof lr?r.code===Ue.Redirect||r.code===Ue.SupersededByNewNavigation:!1)?Xi.REDIRECTING:Xi.FAILED),_t(r=>r!==Xi.REDIRECTING),yr(1)).subscribe(()=>{e()})}var gw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},vw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Pe=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=I(um);stateManager=I(Mp);options=I(ha,{optional:!0})||{};pendingTasks=I(em);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=I(ed);urlSerializer=I(la);location=I(Vr);urlHandlingStrategy=I(td);_events=new at;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=I(rd);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=I(Cn,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!I(Hs,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}eventsSubscription=new vr;subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(n=>{try{let o=this.navigationTransitions.currentTransition,i=this.navigationTransitions.currentNavigation;if(o!==null&&i!==null){if(this.stateManager.handleRouterEvent(n,i),n instanceof lr&&n.code!==Ue.Redirect&&n.code!==Ue.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof Or)this.navigated=!0;else if(n instanceof Xo){let s=n.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(n.url,o.currentRawUrl),d=j({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||hw(o.source)},s);this.scheduleNavigation(l,Ji,null,d,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}bw(n)&&this._events.next(n)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ji,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,n)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",n)},0)})}navigateToSyncWithBrowser(r,n,o){let i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let d=j({},o);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(i.state=d)}let l=this.parseUrl(r);this.scheduleNavigation(l,n,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Zu),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,n={}){let{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:l,preserveFragment:d}=n,m=d?this.currentUrlTree.fragment:s,p=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":p=j(j({},this.currentUrlTree.queryParams),i);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=i||null}p!==null&&(p=this.removeEmptyProps(p));let y;try{let C=o?o.snapshot:this.routerState.snapshot.root;y=hp(C)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),y=this.currentUrlTree.root}return mp(y,r,p,m??null)}navigateByUrl(r,n={skipLocationChange:!1}){let o=co(r)?r:this.parseUrl(r),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,Ji,null,n)}navigate(r,n={skipLocationChange:!1}){return yw(r),this.navigateByUrl(this.createUrlTree(r,n),n)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,n){let o;if(n===!0?o=j({},gw):n===!1?o=j({},vw):o=n,co(r))return Km(this.currentUrlTree,r,o);let i=this.parseUrl(r);return Km(this.currentUrlTree,i,o)}removeEmptyProps(r){return Object.entries(r).reduce((n,[o,i])=>(i!=null&&(n[o]=i),n),{})}scheduleNavigation(r,n,o,i,s){if(this.disposed)return Promise.resolve(!1);let l,d,m;s?(l=s.resolve,d=s.reject,m=s.promise):m=new Promise((y,C)=>{l=y,d=C});let p=this.pendingTasks.add();return Tp(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:i,resolve:l,reject:d,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(y=>Promise.reject(y))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function yw(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Oe(4008,!1)}function bw(t){return!(t instanceof na)&&!(t instanceof Xo)}var pE=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new at;constructor(r,n,o,i,s,l){this.router=r,this.route=n,this.tabIndexAttribute=o,this.renderer=i,this.el=s,this.locationStrategy=l;let d=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=d==="a"||d==="area",this.isAnchorElement?this.subscription=r.events.subscribe(m=>{m instanceof Or&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(r){r==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(co(r)?this.routerLinkInput=r:this.routerLinkInput=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0"))}onClick(r,n,o,i,s){let l=this.urlTree;if(l===null||this.isAnchorElement&&(r!==0||n||o||i||s||typeof this.target=="string"&&this.target!="_self"))return!0;let d={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,d),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let n=this.href===null?null:om(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(r,n){let o=this.renderer,i=this.el.nativeElement;n!==null?o.setAttribute(i,r,n):o.removeAttribute(i,r)}get urlTree(){return this.routerLinkInput===null?null:co(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(n){return new(n||t)(jr(Pe),jr(Er),tm("tabindex"),jr(am),jr(Jt),jr(Wi))};static \u0275dir=Ut({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(n,o){n&1&&Fo("click",function(s){return o.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),n&2&&Fe("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",he],skipLocationChange:[2,"skipLocationChange","skipLocationChange",he],replaceUrl:[2,"replaceUrl","replaceUrl",he],routerLink:"routerLink"},features:[vn,pn]})}return t})();var Ws=class{};var _w=(()=>{class t{router;injector;preloadingStrategy;loader;subscription;constructor(r,n,o,i,s){this.router=r,this.injector=o,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(_t(r=>r instanceof Or),Mo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,n){let o=[];for(let i of n){i.providers&&!i._injector&&(i._injector=uu(i.providers,r,`Route: ${i.path}`));let s=i._injector??r,l=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&i.canLoad===void 0||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(l,i.children??i._loadedRoutes))}return xe(o).pipe(ru())}preloadConfig(r,n){return this.preloadingStrategy.preload(n,()=>{let o;n.loadChildren&&n.canLoad===void 0?o=this.loader.loadChildren(r,n):o=rt(null);let i=o.pipe(Ht(s=>s===null?rt(void 0):(n._loadedRoutes=s.routes,n._loadedInjector=s.injector,this.processRoutes(s.injector??r,s.routes))));if(n.loadComponent&&!n._loadedComponent){let s=this.loader.loadComponent(n);return xe([i,s]).pipe(ru())}else return i})}static \u0275fac=function(n){return new(n||t)(Bt(Pe),Bt(jo),Bt(eo),Bt(Ws),Bt(Ju))};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Np=new mt(""),xw=(()=>{class t{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(r,n,o,i,s={}){this.urlSerializer=r,this.transitions=n,this.viewportScroller=o,this.zone=i,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof xn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Or?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof wn&&r.code===Ls.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Fs&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,n){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Fs(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,n))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(n){im()};static \u0275prov=ct({token:t,factory:t.\u0275fac})}return t})();function gE(t,...e){return Xh([{provide:Cn,multi:!0,useValue:t},[],{provide:Er,useFactory:Lp,deps:[Pe]},{provide:du,multi:!0,useFactory:$p},e.map(r=>r.\u0275providers)])}function Lp(t){return t.routerState.root}function ma(t,e){return{\u0275kind:t,\u0275providers:e}}function $p(){let t=I(Xt);return e=>{let r=t.get(xs);if(e!==r.components[0])return;let n=t.get(Pe),o=t.get(Fp);t.get(nd)===1&&n.initialNavigation(),t.get(Bp,null,cu.Optional)?.setUpPreloading(),t.get(Np,null,cu.Optional)?.init(),n.resetRootComponentType(r.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var Fp=new mt("",{factory:()=>new at}),nd=new mt("",{providedIn:"root",factory:()=>1});function ww(){return ma(2,[{provide:nd,useValue:0},{provide:Vi,multi:!0,deps:[Xt],useFactory:e=>{let r=e.get(xm,Promise.resolve());return()=>r.then(()=>new Promise(n=>{let o=e.get(Pe),i=e.get(Fp);Tp(o,()=>{n(!0)}),e.get(ed).afterPreactivation=()=>(n(!0),i.closed?rt(void 0):i),o.initialNavigation()}))}}])}function Cw(){return ma(3,[{provide:Vi,multi:!0,useFactory:()=>{let e=I(Pe);return()=>{e.setUpLocationChangeListener()}}},{provide:nd,useValue:2}])}var Bp=new mt("");function Sw(t){return ma(0,[{provide:Bp,useExisting:_w},{provide:Ws,useExisting:t}])}function Rw(){return ma(8,[Xm,{provide:Hs,useExisting:Xm}])}function Ow(t){let e=[{provide:Ap,useValue:dw},{provide:Ip,useValue:j({skipNextTransition:!!t?.skipInitialTransition},t)}];return ma(9,e)}var ep=new mt("ROUTER_FORROOT_GUARD"),Ew=[Vr,{provide:la,useClass:Go},Pe,da,{provide:Er,useFactory:Lp,deps:[Pe]},Ju,[]],jp=(()=>{class t{constructor(r){}static forRoot(r,n){return{ngModule:t,providers:[Ew,[],{provide:Cn,multi:!0,useValue:r},{provide:ep,useFactory:Iw,deps:[[Pe,new zi,new bs]]},n?.errorHandler?{provide:Pp,useValue:n.errorHandler}:[],{provide:ha,useValue:n||{}},n?.useHash?kw():Aw(),Dw(),n?.preloadingStrategy?Sw(n.preloadingStrategy).\u0275providers:[],n?.initialNavigation?Pw(n):[],n?.bindToComponentInputs?Rw().\u0275providers:[],n?.enableViewTransitions?Ow().\u0275providers:[],Mw()]}}static forChild(r){return{ngModule:t,providers:[{provide:Cn,multi:!0,useValue:r}]}}static \u0275fac=function(n){return new(n||t)(Bt(ep,8))};static \u0275mod=te({type:t});static \u0275inj=Gt({})}return t})();function Dw(){return{provide:Np,useFactory:()=>{let t=I(Om),e=I(Zt),r=I(ha),n=I(ed),o=I(la);return r.scrollOffset&&t.setOffset(r.scrollOffset),new xw(o,n,t,e,r)}}}function kw(){return{provide:Wi,useClass:Cm}}function Aw(){return{provide:Wi,useClass:wm}}function Iw(t){return"guarded"}function Pw(t){return[t.initialNavigation==="disabled"?Cw().\u0275providers:[],t.initialNavigation==="enabledBlocking"?ww().\u0275providers:[]]}var rp=new mt("");function Mw(){return[{provide:rp,useFactory:$p},{provide:du,multi:!0,useExisting:rp}]}var Tw=new mt("LOCALIZE_ROUTER_FORROOT_GUARD"),od=new mt("RAW_ROUTES"),Rn=function(t){return t.LocalStorage="LocalStorage",t.SessionStorage="SessionStorage",t.Cookie="Cookie",t}(Rn||{}),zp=new mt("USE_CACHED_LANG"),Vp=new mt("CACHE_MECHANISM"),qp=new mt("CACHE_NAME"),Wp=new mt("COOKIE_FORMAT"),Hp=new mt("INITIAL_NAVIGATION"),Kp=new mt("DEFAULT_LANG_FUNCTION"),Qp=new mt("ALWAYS_SET_PREFIX"),Nw="LOCALIZE_DEFAULT_LANGUAGE",Lw="{{value}};{{expires}}",$w=!1,Ys=(()=>{class t{constructor(r=!0,n=!0,o=Rn.LocalStorage,i=Nw,s=void 0,l=Lw,d=$w){this.useCachedLang=r,this.alwaysSetPrefix=n,this.cacheName=i,this.cookieFormat=l,this.initialNavigation=d,this.cacheMechanism=o,this.defaultLangFunction=s}static{this.\u0275fac=function(n){return new(n||t)(Bt(zp),Bt(Qp),Bt(Vp),Bt(qp),Bt(Kp),Bt(Wp),Bt(Hp))}}static{this.\u0275prov=ct({token:t,factory:t.\u0275fac})}}return t})(),Fw=30,pa=(()=>{class t{constructor(r,n,o){this.translate=r,this.location=n,this.settings=o}init(r){let n;if(this.routes=r,!this.locales||!this.locales.length)return Promise.resolve();let o=this.getLocationLang(),i=this._getBrowserLang();this.settings.defaultLangFunction?this.defaultLang=this.settings.defaultLangFunction(this.locales,this._cachedLang,i):this.defaultLang=this._cachedLang||i||this.locales[0],n=o||this.defaultLang,this.translate.setDefaultLang(this.defaultLang);let s=[];if(this.settings.alwaysSetPrefix){let l={path:"",redirectTo:this.defaultLang,pathMatch:"full"},d=r.findIndex(m=>m.path==="**");d!==-1&&(this._wildcardRoute=r.splice(d,1)[0]),s=this.routes.splice(0,this.routes.length,l)}else s=[...this.routes];for(let l=s.length-1;l>=0;l--)s[l].data&&s[l].data.skipRouteLocalization&&(this.settings.alwaysSetPrefix&&this.routes.push(s[l]),(s[l].redirectTo===void 0||!s[l].data.skipRouteLocalization.localizeRedirectTo||typeof s[l].redirectTo=="function")&&s.splice(l,1));return s&&s.length&&(this.locales.length>1||this.settings.alwaysSetPrefix)&&(this._languageRoute={children:s},this.routes.unshift(this._languageRoute)),this._wildcardRoute&&this.settings.alwaysSetPrefix&&this.routes.push(this._wildcardRoute),Vh(this.translateRoutes(n))}initChildRoutes(r){return this._translateRouteTree(r),r}translateRoutes(r){return new Fi(n=>{this._cachedLang=r,this._languageRoute&&(this._languageRoute.path=r),this.translate.use(r).subscribe(o=>{this._translationObject=o,this.currentLang=r,this._languageRoute?(this._translateRouteTree(this._languageRoute.children,!0),this._wildcardRoute&&this._wildcardRoute.redirectTo&&this._translateProperty(this._wildcardRoute,"redirectTo",!0)):this._translateRouteTree(this.routes,!0),n.next(void 0),n.complete()})})}_translateRouteTree(r,n){r.forEach(o=>{let i=o.data&&o.data.skipRouteLocalization,s=!i||i.localizeRedirectTo;if(o.redirectTo&&s&&typeof o.redirectTo!="function"){let l=o.redirectTo.indexOf("/")===0||n;this._translateProperty(o,"redirectTo",l)}i||(o.path!==null&&o.path!==void 0&&this._translateProperty(o,"path"),o.children&&this._translateRouteTree(o.children),o.loadChildren&&o._loadedRoutes?.length&&this._translateRouteTree(o._loadedRoutes))})}_translateProperty(r,n,o){let i=r.data=r.data||{};i.localizeRouter||(i.localizeRouter={}),i.localizeRouter[n]||(i.localizeRouter=pt(j({},i.localizeRouter),{[n]:r[n]}));let s=this.translateRoute(i.localizeRouter[n]);r[n]=o?this.addPrefixToUrl(s):s}get urlPrefix(){return this.settings.alwaysSetPrefix||this.currentLang!==this.defaultLang?this.currentLang?this.currentLang:this.defaultLang:""}addPrefixToUrl(r){let n=r.split("?"),o=n[0].length===1&&n[0]==="/";n[0]=n[0].replace(/\/$/,"");let i=n.join("?");return this.urlPrefix===""?i:!i.startsWith("/")&&!o?`${this.urlPrefix}/${i}`:`/${this.urlPrefix}${i}`}translateRoute(r){let n=r.split("?");if(n.length>2)throw Error("There should be only one query parameter block in the URL");return n[0].split("/").map(i=>i.length?this.translateText(i):i).join("/")+(n.length>1?`?${n[1]}`:"")}getLocationLang(r){let n=(r||this.location.path()).split(/[\?;]/),o=[];return n.length>0&&(o=n[0].split("/")),o.length>1&&this.locales.indexOf(o[1])!==-1?o[1]:o.length&&this.locales.indexOf(o[0])!==-1?o[0]:null}_getBrowserLang(){return this._returnIfInLocales(this.translate.getBrowserLang())}get _cachedLang(){if(this.settings.useCachedLang){if(this.settings.cacheMechanism===Rn.LocalStorage)return this._cacheWithLocalStorage();if(this.settings.cacheMechanism===Rn.SessionStorage)return this._cacheWithSessionStorage();if(this.settings.cacheMechanism===Rn.Cookie)return this._cacheWithCookies()}}set _cachedLang(r){this.settings.useCachedLang&&(this.settings.cacheMechanism===Rn.LocalStorage&&this._cacheWithLocalStorage(r),this.settings.cacheMechanism===Rn.SessionStorage&&this._cacheWithSessionStorage(r),this.settings.cacheMechanism===Rn.Cookie&&this._cacheWithCookies(r))}_cacheWithLocalStorage(r){try{if(typeof window>"u"||typeof window.localStorage>"u")return;if(r){window.localStorage.setItem(this.settings.cacheName,r);return}return this._returnIfInLocales(window.localStorage.getItem(this.settings.cacheName))}catch{return}}_cacheWithSessionStorage(r){try{if(typeof window>"u"||typeof window.sessionStorage>"u")return;if(r){window.sessionStorage.setItem(this.settings.cacheName,r);return}return this._returnIfInLocales(window.sessionStorage.getItem(this.settings.cacheName))}catch{return}}_cacheWithCookies(r){try{if(typeof document>"u"||typeof document.cookie>"u")return;let n=encodeURIComponent(this.settings.cacheName);if(r){let s=`${this.settings.cookieFormat}`;s=s.replace("{{value}}",`${n}=${encodeURIComponent(r)}`).replace(/{{expires:?(\d+)?}}/g,(l,d)=>{let m=d===void 0?Fw:parseInt(d,10),p=new Date;return p.setTime(p.getTime()+m*864e5),`expires=${p.toUTCString()}`}),document.cookie=s;return}let i=new RegExp("(?:^"+n+"|;\\s*"+n+")=(.*?)(?:;|$)","g").exec(document.cookie);return decodeURIComponent(i[1])}catch{return}}_returnIfInLocales(r){return r&&this.locales.indexOf(r)!==-1?r:null}translateText(r){if(this.escapePrefix&&r.startsWith(this.escapePrefix))return r.replace(this.escapePrefix,"");{if(!this._translationObject)return r;let n=this.prefix+r,o=this.translate.getParsedResult(this._translationObject,n);return o!==n?o:r}}chooseQueryParams(r,n){let o;return r&&r.queryParams?o=r.queryParams:n&&(o=n),o}formatQueryParams(r){return new Em({fromObject:r}).toString()}getPrefix(){return this.prefix}getEscapePrefix(){return this.escapePrefix}static{this.\u0275fac=function(n){return new(n||t)(Bt(Bm),Bt(Vr),Bt(Ys))}}static{this.\u0275prov=ct({token:t,factory:t.\u0275fac})}}return t})();var Bw=(()=>{class t extends pa{load(r){return new Promise(n=>{this.init(r).then(n)})}static{this.\u0275fac=(()=>{let r;return function(o){return(r||(r=de(t)))(o||t)}})()}static{this.\u0275prov=ct({token:t,factory:t.\u0275fac})}}return t})();function Qs(t,e){if(t===e)return!0;if(t===null||e===null)return!1;if(t!==t&&e!==e)return!0;let r=typeof t,n=typeof e,o,i,s;if(r===n&&r==="object")if(Array.isArray(t)){if(!Array.isArray(e))return!1;if((o=t.length)===e.length){for(i=0;i<o;i++)if(!Qs(t[i],e[i]))return!1;return!0}}else{if(Array.isArray(e))return!1;s=Object.create(null);for(i in t)if(t.hasOwnProperty(i)){if(!Qs(t[i],e[i]))return!1;s[i]=!0}for(i in e)if(e.hasOwnProperty(i)&&!(i in s)&&typeof e[i]<"u")return!1;return!0}return!1}function jw(t){return!!t&&typeof t.then=="function"}function ad(t){let e=Array.isArray(t)?[]:{};for(let r in t)if(r){let n=t[r];e[r]=typeof n=="object"?ad(n):n}return e}var sd=(()=>{class t{constructor(r,n,o,i){this.parser=r,this.settings=n,this.router=o,this.route=i,this.routerEvents=new at;let s=new Uh(1);this.hooks={_initializedSubject:s,initialized:s.asObservable()}}init(){this.applyConfigToRouter(this.parser.routes),this.router.events.pipe(_t(r=>r instanceof xn),su()).subscribe(this._routeChanged()),this.settings.initialNavigation&&this.router.initialNavigation()}changeLanguage(r,n,o){if(r!==this.parser.currentLang){let i=this.router.routerState.snapshot.root;this.parser.translateRoutes(r).subscribe(()=>{let s=this.traverseRouteSnapshot(i);if(s=this.translateRoute(s),!this.settings.alwaysSetPrefix){let m=s.split("/"),p=m.indexOf(this.parser.currentLang);if(this.parser.currentLang===this.parser.defaultLang)(p===0||p===1&&m[0]==="")&&(m=m.slice(0,p).concat(m.slice(p+1)));else if(p===-1){let y=m[0]===""?1:0;m=m.slice(0,y).concat(this.parser.currentLang,m.slice(y))}s=m.join("/")}s=s.replace(/\/+/g,"/");let l=s.lastIndexOf("/");l>0&&l===s.length-1&&(s=s.slice(0,-1));let d=this.parser.chooseQueryParams(n,this.route.snapshot.queryParams);if(this.applyConfigToRouter(this.parser.routes),this.lastExtras=n,o){let m=n?j({},n):{};d&&(m.queryParams=d),this.router.navigate([s],m)}else{let m=this.parser.formatQueryParams(d);m=m?`?${m}`:"",this.router.navigateByUrl(`${s}${m}`,n)}})}}traverseRouteSnapshot(r){return r.firstChild&&r.routeConfig?`${this.parseSegmentValue(r)}/${this.traverseRouteSnapshot(r.firstChild)}`:r.firstChild?this.traverseRouteSnapshot(r.firstChild):this.parseSegmentValue(r)}buildUrlFromSegments(r,n){return n.map((o,i)=>o.indexOf(":")===0?r.url[i].path:o).join("/")}parseSegmentValue(r){if(r.routeConfig&&r.routeConfig.matcher){let n=this.parseSegmentValueMatcher(r);return this.buildUrlFromSegments(r,n)}else if(r.data.localizeRouter){let o=r.data.localizeRouter.path.split("/");return this.buildUrlFromSegments(r,o)}else if(r.parent&&r.parent.parent){let o=r.routeConfig.path.split("/");return this.buildUrlFromSegments(r,o)}else return""}parseSegmentValueMatcher(r){let n=r.data&&r.data.localizeMatcher&&r.data.localizeMatcher.params||{};return r.url.map(i=>{let s=i.path,l=i.localizedParamName;return(l&&n[l]?n[l](s):null)||`${this.parser.getEscapePrefix()}${s}`})}translateRoute(r){if(typeof r=="string"){let o=this.parser.translateRoute(r);return r.indexOf("/")?o:this.parser.addPrefixToUrl(o)}let n=[];return r.forEach((o,i)=>{if(typeof o=="string"){let s=this.parser.translateRoute(o);!i&&!o.indexOf("/")?n.push(this.parser.addPrefixToUrl(s)):n.push(s)}else n.push(o)}),n}_routeChanged(){return([r,n])=>{let o=this.parser.getLocationLang(r.url)||this.parser.defaultLang,i=this.parser.getLocationLang(n.url)||this.parser.defaultLang,s=this.lastExtras;i!==o&&this.latestUrl!==n.url&&(this.latestUrl=n.url,this.cancelCurrentNavigation(),this.parser.translateRoutes(i).subscribe(()=>{this.applyConfigToRouter(this.parser.routes),this.lastExtras=void 0,this.router.navigateByUrl(n.url,s),this.routerEvents.next(i)})),this.latestUrl=n.url}}cancelCurrentNavigation(){let r=this.router.getCurrentNavigation(),n=this.router.serializeUrl(r.extractedUrl);this.router.events.next(new lr(r.id,n,"")),this.router.navigationTransitions.transitions.next(pt(j({},this.router.navigationTransitions.transitions.getValue()),{id:0}))}applyConfigToRouter(r){this.router.resetConfig(ad(r))}static{this.\u0275fac=function(n){return new(n||t)(Bt(pa),Bt(Ys),Bt(Pe),Bt(Er))}}static{this.\u0275prov=ct({token:t,factory:t.\u0275fac})}}return t})(),Uw=128,AE=(()=>{class t{constructor(r,n){this.localize=r,this._ref=n,this.value="",this.subscription=this.localize.routerEvents.subscribe(()=>{this.transform(this.lastKey)})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}transform(r){if(!r||r.length===0||!this.localize.parser.currentLang)return r;if(Qs(r,this.lastKey)&&Qs(this.lastLanguage,this.localize.parser.currentLang))return this.value;this.lastKey=r,this.lastLanguage=this.localize.parser.currentLang,this.value=this.localize.translateRoute(r),this.lastKey=r;let n=this._ref._view;return n&&n.state&Uw?this.value:(setTimeout(()=>{this._ref.detectChanges()},0),this.value)}static{this.\u0275fac=function(n){return new(n||t)(jr(sd,16),jr(wr,16))}}static{this.\u0275pipe=sm({name:"localize",type:t,pure:!1})}}return t})(),id=class{constructor(){}shouldDetach(e){return!1}store(e,r){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,r){return e&&r?this.getKey(e)===this.getKey(r):!1}getKey(e){if(e.firstChild&&e.firstChild.routeConfig&&e.firstChild.routeConfig.path&&e.firstChild.routeConfig.path.indexOf("**")!==-1)return"WILDCARD";if(!e.data.localizeRouter&&(!e.parent||!e.parent.parent)&&!e.data.skipRouteLocalization)return"LANG";if(e.routeConfig.matcher){let r=`${this.getKey(e.parent)}/${e.routeConfig.matcher.name}`;return e.data.discriminantPathKey&&(r=`${r}-${e.data.discriminantPathKey}`),r}else if(e.data.localizeRouter){let r=`${this.getKey(e.parent)}/${e.data.localizeRouter.path}`;return e.data.discriminantPathKey&&(r=`${r}-${e.data.discriminantPathKey}`),r}else{let r=e.routeConfig.path;return e.parent&&(r=`${this.getKey(e.parent)}/${e.routeConfig.path}`),e.data.discriminantPathKey&&(r=`${r}-${e.data.discriminantPathKey}`),r}}},zw=(()=>{class t extends Pe{constructor(){super(),this.platformId=I(nm),this.compiler=I(jo),this.localize=I(pa),this.childrenLoaders=new WeakMap,this.loadModuleFactoryOrRoutes=(o,i)=>Ww(i.loadChildren()).pipe(dt(qw),Ht(s=>s instanceof _s||Array.isArray(s)?rt(s):xe(this.compiler.compileModuleAsync(s))),dt(s=>{this.onLoadEndListener&&this.onLoadEndListener(i);let l,d;if(Array.isArray(s))d=this.localize.initChildRoutes([].concat(...s));else{l=s.create(o).injector;let p=l.get.bind(l);l.get=(y,C,k)=>{let N=p(y,C,k);return y===Cn?this.localize.initChildRoutes([].concat(...N)):N},d=l.get(Cn,[],{optional:!0,self:!0}).reduce((y,C)=>y.concat(C),[])}return{routes:d.map(Yp),injector:l}}));let n=Rm(this.platformId)?this.navigationTransitions.configLoader.__proto__:this.navigationTransitions.configLoader;n.loadChildren=(o,i)=>{if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return rt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let l=this.loadModuleFactoryOrRoutes(o,i).pipe(No(()=>{this.childrenLoaders.delete(i)})),d=new Jn(l,()=>new at).pipe(Bi());return this.childrenLoaders.set(i,d),d}}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Yp(t){let e=t.children&&t.children.map(Yp),r=e?pt(j({},t),{children:e}):j({},t);return!r.component&&!r.loadComponent&&(e||r.loadChildren)&&r.outlet&&r.outlet!==ft&&(r.component=Xu),r}function Vw(t){return t&&typeof t=="object"&&"default"in t}function qw(t){return Vw(t)?t.default:t}function Ww(t){return Ao(t)?t:jw(t)?xe(Promise.resolve(t)):rt(t)}var Up=(()=>{class t{constructor(r){this.injector=r}appInitializer(){return this.parser.load(this.routes).then(()=>{let n=this.injector.get(sd),o=this.injector.get(Pe),i=this.injector.get(Ys);if(n.init(),i.initialNavigation)return new Promise(s=>{let l=o.navigationTransitions.afterPreactivation,d=!0;o.navigationTransitions.afterPreactivation=()=>(d&&(s(),d=!1,n.hooks._initializedSubject.next(!0),n.hooks._initializedSubject.complete()),l())});n.hooks._initializedSubject.next(!0),n.hooks._initializedSubject.complete()})}generateInitializer(r,n){return this.parser=r,this.routes=n.reduce((o,i)=>o.concat(i)),this.appInitializer}static{this.\u0275fac=function(n){return new(n||t)(Bt(Xt))}}static{this.\u0275prov=ct({token:t,factory:t.\u0275fac})}}return t})();function Hw(t,e,r){let n=ad(r);return t.generateInitializer(e,n).bind(t)}function Kw(t,e){return[{provide:Pe,useClass:zw},{provide:Tw,useFactory:Yw,deps:[[Qw,new zi,new bs]]},{provide:zp,useValue:e.useCachedLang},{provide:Qp,useValue:e.alwaysSetPrefix},{provide:qp,useValue:e.cacheName},{provide:Vp,useValue:e.cacheMechanism},{provide:Kp,useValue:e.defaultLangFunction},{provide:Wp,useValue:e.cookieFormat},{provide:Hp,useValue:e.initialNavigation},Ys,e.parser||{provide:pa,useClass:Bw},{provide:od,multi:!0,useValue:t},sd,Up,{provide:Vi,multi:!0,useFactory:Hw,deps:[Up,pa,od]},{provide:rd,useClass:id}]}var Qw=(()=>{class t{static forRoot(r,n={}){return{ngModule:t,providers:Kw(r,n)}}static forChild(r){return{ngModule:t,providers:[{provide:od,multi:!0,useValue:r}]}}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=te({type:t})}static{this.\u0275inj=Gt({imports:[Sm,jp,jm]})}}return t})();function Yw(t){if(t)throw new Error("LocalizeRouterModule.forRoot() called twice. Lazy loaded modules should use LocalizeRouterModule.forChild() instead.");return"guarded"}function lo(t){"@babel/helpers - typeof";return lo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lo(t)}function Gp(t,e){if(lo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(lo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xp(t){var e=Gp(t,"string");return lo(e)=="symbol"?e:e+""}function Zp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xp(n.key),n)}}function Ee(t,e,r){return e&&Zp(t.prototype,e),r&&Zp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ga(t){return Array.isArray(t)?t.slice(0):[t]}function Dr(t){return Array.isArray(t)}function Jp(t){return t!=null}function Gs(t,e){var r=0,n=-1;for(var o of t){n=n+1;var i=e(o,n);if(i)r=r+1;else break}return r}function ur(t,e){var r=e.length;if(r!==0){var n=t.length;t.length=n+e.length;for(var o=0;o<r;++o)t[n+o]=e[o]}}function tg(t){return t.filter(function(e,r,n){return n.indexOf(e)===r})}function eg(t){for(var e="",r=new Uint8Array(t),n=r.byteLength,o=0;o<n;o++)e+=String.fromCharCode(r[o]);return btoa(e)}function rg(t,e){return U(this,null,function*(){var r=yield fetch("data:"+e+";base64,"+t),n=yield r.blob();return n})}function ng(t){var e=Object.prototype.toString.call(t);return e==="[object Uint8Array]"&&(t=new Blob([t])),typeof t=="string"?Promise.resolve(t):t.text()}function og(t){return U(this,null,function*(){if(typeof t=="string")return t;var e=Object.prototype.toString.call(t);e==="[object Uint8Array]"&&(t=new Blob([t]));var r=yield t.arrayBuffer();return eg(r)})}function ig(t){return t.size}function uo(t){for(var e="",r=0;r<t.length;r++){var n=t[r];if(n==="-")return parseInt(e,10);e+=n}throw new Error("malformatted revision: "+t)}function ti(t,e){var r=e?uo(e._rev)+1:1;return r+"-"+t}function ld(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&t[e]!==null&&(typeof t[e]=="object"||typeof t[e]=="function")&&!Object.isFrozen(t[e])&&ld(t[e])}),t}function ag(t){var e=t.split("."),r=e.length;return r===1?n=>n[t]:n=>{for(var o=n,i=0;i<r;++i){var s=e[i];if(o=o[s],typeof o>"u")return o}return o}}function Xs(t){var e={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))if(typeof t[r]=="object"){var n=Xs(t[r]);for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[r+"."+o]=n[o])}else e[r]=t[r];return e}function Dt(t){return Object.assign({},t)}function sg(t){return Object.keys(t)[0]}function ei(t,e=!1){if(!t)return t;if(!e&&Array.isArray(t))return t.sort((n,o)=>typeof n=="string"&&typeof o=="string"?n.localeCompare(o):typeof n=="object"?1:-1).map(n=>ei(n,e));if(typeof t=="object"&&!Array.isArray(t)){var r={};return Object.keys(t).sort((n,o)=>n.localeCompare(o)).forEach(n=>{r[n]=ei(t[n],e)}),r}return t}function cd(t){if(!t||t===null||typeof t!="object")return t;if(Array.isArray(t)){for(var e=new Array(t.length),r=e.length;r--;)e[r]=cd(t[r]);return e}var n={};for(var o in t)n[o]=cd(t[o]);return n}var Ze=cd;function ze(t,e,r){return Object.defineProperty(t,e,{get:function(){return r}}),r}var Zs=1;function On(){return{lwt:Zs}}function Yr(){return""}function cg(t){return Object.assign({},t,{_meta:void 0,_deleted:void 0,_rev:void 0})}function lg(t,e,r){if(e.length!==r.length)return!1;for(var n=0,o=e.length;n<o;){var i=e[n],s=r[n];if(n++,i._rev!==s._rev||i[t]!==s[t])return!1}return!0}var GE=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});var XE=Object.freeze(["prototype","__proto__","constructor"]);var Gw="[native code] }",ZE=Gw.length;var Xw=Object.defineProperty,Zw=(t,e,r)=>e in t?Xw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ri=(t,e,r)=>(Zw(t,typeof e!="symbol"?e+"":e,r),r),En=class t{constructor(e,r){ri(this,"words"),ri(this,"sigBytes"),e=this.words=e||[],this.sigBytes=r===void 0?e.length*4:r}toString(e){return(e||Jw).stringify(this)}concat(e){if(this.clamp(),this.sigBytes%4)for(let r=0;r<e.sigBytes;r++){let n=e.words[r>>>2]>>>24-r%4*8&255;this.words[this.sigBytes+r>>>2]|=n<<24-(this.sigBytes+r)%4*8}else for(let r=0;r<e.sigBytes;r+=4)this.words[this.sigBytes+r>>>2]=e.words[r>>>2];return this.sigBytes+=e.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new t([...this.words])}},Jw={stringify(t){let e=[];for(let r=0;r<t.sigBytes;r++){let n=t.words[r>>>2]>>>24-r%4*8&255;e.push((n>>>4).toString(16),(n&15).toString(16))}return e.join("")}};var t0={parse(t){let e=t.length,r=[];for(let n=0;n<e;n++)r[n>>>2]|=(t.charCodeAt(n)&255)<<24-n%4*8;return new En(r,e)}},e0={parse(t){return t0.parse(unescape(encodeURIComponent(t)))}},ud=class{constructor(){ri(this,"_data",new En),ri(this,"_nDataBytes",0),ri(this,"_minBufferSize",0),ri(this,"blockSize",512/32)}reset(){this._data=new En,this._nDataBytes=0}_append(e){typeof e=="string"&&(e=e0.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_doProcessBlock(e,r){}_process(e){let r,n=this._data.sigBytes/(this.blockSize*4);e?n=Math.ceil(n):n=Math.max((n|0)-this._minBufferSize,0);let o=n*this.blockSize,i=Math.min(o*4,this._data.sigBytes);if(o){for(let s=0;s<o;s+=this.blockSize)this._doProcessBlock(this._data.words,s);r=this._data.words.splice(0,o),this._data.sigBytes-=i}return new En(r,i)}},dd=class extends ud{update(e){return this._append(e),this._process(),this}finalize(e){e&&this._append(e)}},r0=Object.defineProperty,n0=(t,e,r)=>e in t?r0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,o0=(t,e,r)=>(n0(t,typeof e!="symbol"?e+"":e,r),r),ug=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],i0=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],fo=[],fd=class extends dd{constructor(){super(...arguments),o0(this,"_hash",new En([...ug]))}reset(){super.reset(),this._hash=new En([...ug])}_doProcessBlock(e,r){let n=this._hash.words,o=n[0],i=n[1],s=n[2],l=n[3],d=n[4],m=n[5],p=n[6],y=n[7];for(let C=0;C<64;C++){if(C<16)fo[C]=e[r+C]|0;else{let J=fo[C-15],kt=(J<<25|J>>>7)^(J<<14|J>>>18)^J>>>3,st=fo[C-2],Pt=(st<<15|st>>>17)^(st<<13|st>>>19)^st>>>10;fo[C]=kt+fo[C-7]+Pt+fo[C-16]}let k=d&m^~d&p,N=o&i^o&s^i&s,B=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),Y=(d<<26|d>>>6)^(d<<21|d>>>11)^(d<<7|d>>>25),et=y+Y+k+i0[C]+fo[C],nt=B+N;y=p,p=m,m=d,d=l+et|0,l=s,s=i,i=o,o=et+nt|0}n[0]=n[0]+o|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+l|0,n[4]=n[4]+d|0,n[5]=n[5]+m|0,n[6]=n[6]+p|0,n[7]=n[7]+y|0}finalize(e){super.finalize(e);let r=this._nDataBytes*8,n=this._data.sigBytes*8;return this._data.words[n>>>5]|=128<<24-n%32,this._data.words[(n+64>>>9<<4)+14]=Math.floor(r/4294967296),this._data.words[(n+64>>>9<<4)+15]=r,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}};function dg(t){return new fd().finalize(t).toString()}function a0(t){return Promise.resolve(dg(t))}function s0(t){return U(this,null,function*(){var e=new TextEncoder().encode(t),r=yield crypto.subtle.digest("SHA-256",e),n=Array.prototype.map.call(new Uint8Array(r),o=>("00"+o.toString(16)).slice(-2)).join("");return n})}var c0=typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof crypto.subtle.digest=="function",ni=c0?s0:a0;function fg(){return new Promise(t=>setTimeout(t,0))}function hg(t=0){return new Promise(e=>setTimeout(e,t))}var l0=Promise.resolve(!0),kr=Promise.resolve(!1),mg=Promise.resolve(null),Dn=Promise.resolve();function oi(t=1e4){return typeof requestIdleCallback=="function"?new Promise(e=>{requestIdleCallback(()=>e(),{timeout:t})}):hg(0)}var hd=Dn;function pg(t=void 0){return hd=hd.then(()=>oi(t)),hd}function gg(t,e){return t.reduce((r,n)=>r.then(n),Promise.resolve(e))}var vg=/\./g;var yg="abcdefghijklmnopqrstuvwxyz";function ho(t=10){for(var e="",r=0;r<t;r++)e+=yg.charAt(Math.floor(Math.random()*yg.length));return e}function Js(t){t+="";var e=t.charAt(0).toUpperCase();return e+t.substr(1)}function dr(t){for(;t.charAt(0)===".";)t=t.substr(1);for(;t.slice(-1)===".";)t=t.slice(0,-1);return t}function md(t){return!!(t.includes("/")||t.includes("\\"))}function kn(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var r,n;if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!kn(t[n],e[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();var o=Object.keys(t);if(r=o.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,o[n]))return!1;for(n=r;n--!==0;){var i=o[n];if(!kn(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}var gd=t=>{var e=typeof t;return t!==null&&(e==="object"||e==="function")},pd=new Set(["__proto__","prototype","constructor"]),u0=new Set("0123456789");function bg(t){var e=[],r="",n="start",o=!1;for(var i of t)switch(i){case"\\":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");o&&(r+=i),n="property",o=!o;break}case".":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="property";break}if(o){o=!1,r+=i;break}if(pd.has(r))return[];e.push(r),r="",n="property";break}case"[":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="index";break}if(o){o=!1,r+=i;break}if(n==="property"){if(pd.has(r))return[];e.push(r),r=""}n="index";break}case"]":{if(n==="index"){e.push(Number.parseInt(r,10)),r="",n="indexEnd";break}if(n==="indexEnd")throw new Error("Invalid character after an index")}default:{if(n==="index"&&!u0.has(i))throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");n==="start"&&(n="property"),o&&(o=!1,r+="\\"),r+=i}}switch(o&&(r+="\\"),n){case"property":{if(pd.has(r))return[];e.push(r);break}case"index":throw new Error("Index was not closed");case"start":{e.push("");break}}return e}function _g(t,e){if(typeof e!="number"&&Array.isArray(t)){var r=Number.parseInt(e,10);return Number.isInteger(r)&&t[r]===t[e]}return!1}function d0(t,e){if(_g(t,e))throw new Error("Cannot use string index")}function Me(t,e,r){if(Array.isArray(e)&&(e=e.join(".")),!e.includes(".")&&!e.includes("["))return t[e];if(!gd(t)||typeof e!="string")return r===void 0?t:r;var n=bg(e);if(n.length===0)return r;for(var o=0;o<n.length;o++){var i=n[o];if(_g(t,i)?t=o===n.length-1?void 0:null:t=t[i],t==null){if(o!==n.length-1)return r;break}}return t===void 0?r:t}function vd(t,e,r){if(Array.isArray(e)&&(e=e.join(".")),!gd(t)||typeof e!="string")return t;for(var n=t,o=bg(e),i=0;i<o.length;i++){var s=o[i];d0(t,s),i===o.length-1?t[s]=r:gd(t[s])||(t[s]=typeof o[i+1]=="number"?[]:{}),t=t[s]}return n}function An(t,e){var r=t.get(e);if(typeof r>"u")throw new Error("missing value from map "+e);return r}function Ve(t,e,r,n){var o=t.get(e);return typeof o>"u"?(o=r(),t.set(e,o)):n&&n(o),o}function St(t){var e=t.split("-"),r="RxDB";return e.forEach(n=>{r+=Js(n)}),r+="Plugin",new Error(`You are using a function which must be overwritten by a plugin.
        You should either prevent the usage of this function or add the plugin via:
            import { `+r+" } from 'rxdb/plugins/"+t+`';
            addRxPlugin(`+r+`);
        `)}var yd=0;function ee(){var t=Date.now();t=t+.01,t<=yd&&(t=yd+.01);var e=parseFloat(t.toFixed(2));return yd=e,e}function Rt(t,e){if(!t)throw e||(e=""),new Error("ensureNotFalsy() is falsy: "+e);return t}var tc={bufferSize:1,refCount:!0};var mo="15.38.1";var In={},ec="6da4936d1425ff3a5c44c02342c6daf791d266be3ae8479b8ec59e261df41b93";function Pn(t,e){return Pn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Pn(t,e)}function bd(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Pn(t,e)}function rc(t){return rc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rc(t)}function xg(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function _d(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_d=function(){return!!t})()}function wg(t,e,r){if(_d())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var o=new(t.bind.apply(t,n));return r&&Pn(o,r.prototype),o}function va(t){var e=typeof Map=="function"?new Map:void 0;return va=function(n){if(n===null||!xg(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,o)}function o(){return wg(n,arguments,rc(this).constructor)}return o.prototype=Object.create(n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Pn(o,n)},va(t)}var It={isDevMode(){return!1},deepFreezeWhenDevMode(t){return t},tunnelErrorMessage(t){return"RxDB Error-Code "+t+`.
        Error messages are not included in RxDB core to reduce build size.
        `}};function f0(t){var e="";return Object.keys(t).length===0||(e+=`Given parameters: {
`,e+=Object.keys(t).map(r=>{var n="[object Object]";try{r==="errors"?n=t[r].map(o=>JSON.stringify(o,Object.getOwnPropertyNames(o))):n=JSON.stringify(t[r],function(o,i){return i===void 0?null:i},2)}catch{}return r+":"+n}).join(`
`),e+="}"),e}function Cg(t,e,r){return"RxError ("+e+`):
`+t+`
`+f0(r)}var h0=function(t){function e(n,o,i={}){var s,l=Cg(o,n,i);return s=t.call(this,l)||this,s.code=n,s.message=l,s.url=xd(n),s.parameters=i,s.rxdb=!0,s}bd(e,t);var r=e.prototype;return r.toString=function(){return this.message},Ee(e,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}])}(va(Error)),m0=function(t){function e(n,o,i={}){var s,l=Cg(o,n,i);return s=t.call(this,l)||this,s.code=n,s.message=l,s.url=xd(n),s.parameters=i,s.rxdb=!0,s}bd(e,t);var r=e.prototype;return r.toString=function(){return this.message},Ee(e,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}])}(va(TypeError));function xd(t){return"https://rxdb.info/errors.html?console=errors#"+t}function Sg(t){return`
 You can find out more about this error here: `+xd(t)+" "}function L(t,e){return new h0(t,It.tunnelErrorMessage(t)+Sg(t),e)}function se(t,e){return new m0(t,It.tunnelErrorMessage(t)+Sg(t),e)}function nc(t){return t&&t.status===409?t:!1}var p0={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};function Rg(t){return L("COL20",{name:p0[t.status],document:t.documentId,writeError:t})}var ii={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],createRxState:[],postDestroyRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preStorageWrite:[],preMigrateDocument:[],postMigrateDocument:[],preDestroyRxDatabase:[],postRemoveRxDatabase:[],postCleanup:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function Qt(t,e){ii[t].length>0&&ii[t].forEach(r=>r(e))}function Mn(t,e){return Promise.all(ii[t].map(r=>r(e)))}function Te(t,e){var r=e;r=r.replace(vg,".properties."),r="properties."+r,r=dr(r);var n=Me(t,r);return n}function oc(t,e,r){if(typeof e.primaryKey=="string")return r;var n=ya(e,r),o=r[t];if(o&&o!==n)throw L("DOC19",{args:{documentData:r,existingPrimary:o,newPrimary:n},schema:e});return r[t]=n,r}function pe(t){return typeof t=="string"?t:t.key}function ya(t,e){if(typeof t.primaryKey=="string")return e[t.primaryKey];var r=t.primaryKey;return r.fields.map(n=>{var o=Me(e,n);if(typeof o>"u")throw L("DOC18",{args:{field:n,documentData:e}});return o}).join(r.separator)}function Og(t){var e=ei(t,!0);return e}function g0(t){return["_deleted",t]}function ic(t){t=Dt(t);var e=pe(t.primaryKey);t.properties=Dt(t.properties),t.additionalProperties=!1,Object.prototype.hasOwnProperty.call(t,"keyCompression")||(t.keyCompression=!1),t.indexes=t.indexes?t.indexes.slice(0):[],t.required=t.required?t.required.slice(0):[],t.encrypted=t.encrypted?t.encrypted.slice(0):[],t.properties._rev={type:"string",minLength:1},t.properties._attachments={type:"object"},t.properties._deleted={type:"boolean"},t.properties._meta=v0,t.required=t.required?t.required.slice(0):[],t.required.push("_deleted"),t.required.push("_rev"),t.required.push("_meta"),t.required.push("_attachments");var r=wd(t);ur(t.required,r),t.required=t.required.filter(i=>!i.includes(".")).filter((i,s,l)=>l.indexOf(i)===s),t.version=t.version||0;var n=t.indexes.map(i=>{var s=Dr(i)?i.slice(0):[i];return s.includes(e)||s.push(e),s[0]!=="_deleted"&&s.unshift("_deleted"),s});n.length===0&&n.push(g0(e)),n.push(["_meta.lwt",e]),t.internalIndexes&&t.internalIndexes.map(i=>{n.push(i)});var o=new Set;return n.filter(i=>{var s=i.join(",");return o.has(s)?!1:(o.add(s),!0)}),t.indexes=n,t}var v0={type:"object",properties:{lwt:{type:"number",minimum:Zs,maximum:1e15,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function wd(t){var e=Object.keys(t.properties).filter(n=>t.properties[n].final),r=pe(t.primaryKey);return e.push(r),typeof t.primaryKey!="string"&&t.primaryKey.fields.forEach(n=>e.push(n)),e}function Eg(t,e){for(var r=Object.keys(t.defaultValues),n=0;n<r.length;++n){var o=r[n];(!Object.prototype.hasOwnProperty.call(e,o)||typeof e[o]>"u")&&(e[o]=t.defaultValues[o])}return e}var Cd=function(){function t(r,n){this.jsonSchema=r,this.hashFunction=n,this.indexes=y0(this.jsonSchema),this.primaryPath=pe(this.jsonSchema.primaryKey),this.finalFields=wd(this.jsonSchema)}var e=t.prototype;return e.validateChange=function(n,o){this.finalFields.forEach(i=>{if(!kn(n[i],o[i]))throw L("DOC9",{dataBefore:n,dataAfter:o,fieldName:i,schema:this.jsonSchema})})},e.getDocumentPrototype=function(){var n={},o=Te(this.jsonSchema,"");return Object.keys(o).forEach(i=>{var s=i;n.__defineGetter__(i,function(){if(!(!this.get||typeof this.get!="function")){var l=this.get(s);return l}}),Object.defineProperty(n,i+"$",{get:function(){return this.get$(s)},enumerable:!1,configurable:!1}),Object.defineProperty(n,i+"$$",{get:function(){return this.get$$(s)},enumerable:!1,configurable:!1}),Object.defineProperty(n,i+"_",{get:function(){return this.populate(s)},enumerable:!1,configurable:!1})}),ze(this,"getDocumentPrototype",()=>n),n},e.getPrimaryOfDocumentData=function(n){return ya(this.jsonSchema,n)},Ee(t,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var r={};return Object.entries(this.jsonSchema.properties).filter(([,n])=>Object.prototype.hasOwnProperty.call(n,"default")).forEach(([n,o])=>r[n]=o.default),ze(this,"defaultValues",r)}},{key:"hash",get:function(){return ze(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}])}();function y0(t){return(t.indexes||[]).map(e=>Dr(e)?e:[e])}function Dg(t){var e=t.version?t.version:0,r=0;return new Array(e).fill(0).map(()=>r++)}function kg(t,e,r=!0){r&&Qt("preCreateRxSchema",t);var n=ic(t);n=Og(n),It.deepFreezeWhenDevMode(n);var o=new Cd(n,e);return Qt("createRxSchema",o),o}function Ag(t){return t.documentData?t.documentData:t.previousDocumentData}function Ig(t){switch(t.operation){case"INSERT":return{operation:t.operation,id:t.documentId,doc:t.documentData,previous:null};case"UPDATE":return{operation:t.operation,id:t.documentId,doc:It.deepFreezeWhenDevMode(t.documentData),previous:t.previousDocumentData?t.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:t.operation,id:t.documentId,doc:null,previous:t.previousDocumentData}}}function ac(t){return t[t.length-1]}function b0(t){let e=typeof t;return t!==null&&(e==="object"||e==="function")}function Sd(t,e,r){if(Array.isArray(e)&&(e=e.join(".")),!b0(t)||typeof e!="string")return r===void 0?t:r;let n=e.split(".");if(n.length===0)return r;for(let o=0;o<n.length;o++){let i=n[o];if(_0(t,i)?t=o===n.length-1?void 0:null:t=t[i],t==null){if(o!==n.length-1)return r;break}}return t===void 0?r:t}function _0(t,e){if(typeof e!="number"&&Array.isArray(t)){let r=Number.parseInt(e,10);return Number.isInteger(r)&&t[r]===t[e]}return!1}var Rd=t=>!!t.queryParams.limit,Pg=t=>t.queryParams.limit===1,Mg=t=>!!(t.queryParams.skip&&t.queryParams.skip>0),Tg=t=>t.changeEvent.operation==="DELETE",Ng=t=>t.changeEvent.operation==="INSERT",Lg=t=>t.changeEvent.operation==="UPDATE",$g=t=>Rd(t)&&t.previousResults.length>=t.queryParams.limit,Fg=t=>{let e=t.queryParams.sortFields,r=t.changeEvent.previous,n=t.changeEvent.doc;if(!n)return!1;if(!r)return!0;for(let o=0;o<e.length;o++){let i=e[o],s=Sd(r,i),l=Sd(n,i);if(s!==l)return!0}return!1},Bg=t=>{let e=t.changeEvent.id;if(t.keyDocumentMap)return t.keyDocumentMap.has(e);{let r=t.queryParams.primaryKey,n=t.previousResults;for(let o=0;o<n.length;o++)if(n[o][r]===e)return!0;return!1}},jg=t=>{let e=t.previousResults[0];return!!(e&&e[t.queryParams.primaryKey]===t.changeEvent.id)},Ug=t=>{let e=ac(t.previousResults);return!!(e&&e[t.queryParams.primaryKey]===t.changeEvent.id)},zg=t=>{let e=t.changeEvent.previous;if(!e)return!1;let r=t.previousResults[0];return r?r[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,r)<0:!1},Vg=t=>{let e=t.changeEvent.previous;if(!e)return!1;let r=ac(t.previousResults);return r?r[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,r)>0:!1},qg=t=>{let e=t.changeEvent.doc;if(!e)return!1;let r=t.previousResults[0];return r?r[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,r)<0:!1},Wg=t=>{let e=t.changeEvent.doc;if(!e)return!1;let r=ac(t.previousResults);return r?r[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,r)>0:!1},Hg=t=>{let e=t.changeEvent.previous;return e?t.queryParams.queryMatcher(e):!1},Kg=t=>{let e=t.changeEvent.doc;return e?t.queryParams.queryMatcher(e):!1},Qg=t=>t.previousResults.length===0;var Yg={0:Ng,1:Lg,2:Tg,3:Rd,4:Pg,5:Mg,6:Qg,7:$g,8:jg,9:Ug,10:Fg,11:Bg,12:zg,13:Vg,14:qg,15:Wg,16:Hg,17:Kg};function Gg(t,e,r,n){var o=t.length,i=o-1,s=0;if(o===0)return t.push(e),0;for(var l;n<=i;)s=n+(i-n>>1),l=t[s],r(l,e)<=0?n=s+1:i=s-1;return r(l,e)<=0&&s++,t.splice(s,0,e),s}var Xg=t=>{},sc=t=>{t.previousResults.unshift(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},cc=t=>{t.previousResults.push(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},lc=t=>{let e=t.previousResults.shift();t.keyDocumentMap&&e&&t.keyDocumentMap.delete(e[t.queryParams.primaryKey])},uc=t=>{let e=t.previousResults.pop();t.keyDocumentMap&&e&&t.keyDocumentMap.delete(e[t.queryParams.primaryKey])},Zg=t=>{lc(t),cc(t)},Jg=t=>{uc(t),sc(t)},tv=t=>{lc(t),sc(t)},ev=t=>{uc(t),cc(t)},Od=t=>{t.keyDocumentMap&&t.keyDocumentMap.delete(t.changeEvent.id);let e=t.queryParams.primaryKey,r=t.previousResults;for(let n=0;n<r.length;n++)if(r[n][e]===t.changeEvent.id){r.splice(n,1);break}},rv=t=>{let e=t.changeEvent.doc,r=t.queryParams.primaryKey,n=t.previousResults;for(let o=0;o<n.length;o++)if(n[o][r]===t.changeEvent.id){n[o]=e,t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,e);break}},nv=t=>{let e={_id:"wrongHuman"+new Date().getTime()};t.previousResults.length=0,t.previousResults.push(e),t.keyDocumentMap&&(t.keyDocumentMap.clear(),t.keyDocumentMap.set(e._id,e))},Ed=t=>{let e=t.changeEvent.id,r=t.changeEvent.doc;if(t.keyDocumentMap){if(t.keyDocumentMap.has(e))return;t.keyDocumentMap.set(e,r)}else if(t.previousResults.find(o=>o[t.queryParams.primaryKey]===e))return;Gg(t.previousResults,r,t.queryParams.sortComparator,0)},ov=t=>{Od(t),Ed(t)},iv=t=>{throw new Error("Action runFullQueryAgain must be implemented by yourself")},av=t=>{throw new Error("Action unknownAction should never be called")};var sv=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],cv={doNothing:Xg,insertFirst:sc,insertLast:cc,removeFirstItem:lc,removeLastItem:uc,removeFirstInsertLast:Zg,removeLastInsertFirst:Jg,removeFirstInsertFirst:tv,removeLastInsertLast:ev,removeExisting:Od,replaceExisting:rv,alwaysWrong:nv,insertAtSortPosition:Ed,removeExistingAndInsertAtSortPosition:ov,runFullQueryAgain:iv,unknownAction:av};function dc(t){return t.charCodeAt(0)-40}function lv(t){return t?"1":"0"}function x0(t=6){let e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length;for(let o=0;o<t;o++)e+=r.charAt(Math.floor(Math.random()*n));return e}var uk=x0(4);function Dd(t,e){let r=[];for(let n=0,o=t.length;n<o;n+=e)r.push(t.substring(n,n+e));return r}function uv(t){let e=new Map,n=2+parseInt(t.charAt(0)+t.charAt(1),10)*2,o=t.substring(2,n),i=Dd(o,2);for(let B=0;B<i.length;B++){let Y=i[B],et=Y.charAt(0),nt=dc(Y.charAt(1));e.set(et,nt)}let s=t.substring(n,t.length-3),l=Dd(s,4);for(let B=0;B<l.length;B++){let Y=l[B],et=Y.charAt(0),nt=Y.charAt(1),J=Y.charAt(2),kt=dc(Y.charAt(3));if(!e.has(nt))throw new Error("missing node with id "+nt);if(!e.has(J))throw new Error("missing node with id "+J);let st=e.get(nt),Pt=e.get(J),Ot={l:kt,0:st,1:Pt};e.set(et,Ot)}let d=t.slice(-3),m=d.charAt(0),p=d.charAt(1),y=dc(d.charAt(2)),C=e.get(m),k=e.get(p);return{l:y,0:C,1:k}}function dv(t,e,r){let n=t,o=t.l;for(;;){let i=e[o](r),s=lv(i);if(n=n[s],typeof n=="number"||typeof n=="string")return n;o=n.l}}var w0="14a1b,c+d2e5f0g/h.i4j*k-l)m(n6oeh6pnm6qen6ril6snh6tin6ubo9vce9wmh9xns9yne9zmi9{cm9|ad9}cp9~aq9\x7Fae9\xA1bf9\xA2bq9\xA3cg9\xA4ck9\xA5cn9\xA6nd9\xA7np9\xA8nq9\xA9nf9\xAAng9\xABnm9\xACnk9\xADmr9\xAEms9\xAFmt9\xB0mj9\xB1mk9\xB2ml9\xB3mn9\xB4mc8\xB5\xB3{8\xB6\xAF}8\xB7\xB0\xA48\xB8\xB3\xA78\xB9mn8\xBA\xB3\xAB8\xBB\xB3m8\xBCm\xB44\xBDz\xB24\xBE\xB3w4\xBFz\xB54\xC0\xAF\xB64\xC1\xB0\xB74\xC2\xB3\xBA4\xC3\xB3\xB84\xC4m\xB94\xC5v\xA47\xC6yn7\xC7\xC0\xC17\xC8~\x7F7\xC9\xA5\xA47\xCA\xC3\xC47\xCB\xA8n7\xCC\xBA\xB97\xCD\xAD\xB07\xCE\xAEm7\xCF\xAF\xB07\xD0\xB1m7\xD1\xB3m7\xD2\xBCm5\xD3\xC4m5\xD4\xB9m5\xD5\xBD\xB05\xD6\xBEm5\xD7\xBF\xB05\xD8\xC7\xCF5\xD9\xC2m5\xDA\xCA\xD15\xDB\xB1m5\xDC\xBAm5\xDD\xCC\xD15\xDE\xD5\xCD2\xDF|\x7F2\xE0\xA1u2\xE1\xA3\xC52\xE2\xD6\xCE2\xE3\xA6\xC62\xE4\xA9x2\xE5\xAA\xC62\xE6\xD7\xD82\xE7|\xC82\xE8\xA1\xA22\xE9\xA3\xC92\xEA\xA4\xA52\xEB\xD9\xDA2\xEC\xA6\xCB2\xED\xA9n2\xEE\xAAn2\xEF\xDB\xD02\xF0\xDC\xDD2\xF1\xACn2\xF2\xD2\xD3/\xF3an/\xF4bn/\xF5cn/\xF6\xDE\xE2/\xF7\xDF\xE3/\xF8\xE0\xE4/\xF9\xE1\xE5/\xFA\xE6\xEB/\xFB\xE7\xEC/\xFC\xE8\xED/\xFD\xE9\xEE/\xFE\xCD\xCE/\xFF\xCF\xD1/\u0100\xF2\xD4,\u0101cn,\u0102\xF6\xEF,\u0103\xA4\xF1,\u0104\xFA\xF0,\u0105\xEA\xF1,\u0106\xFE\xD0,\u0107\xFF\xD1,\u0108ac0\u0109bc0\u010A\xF3\xF50\u010B\xF4\u01010\u010C\xDF\xE10\u010D\xE0\xA40\u010E\xE7\xE90\u010F\xE8\xEA0\u0110\xF7\xF90\u0111\xF8\u01030\u0112\xFB\xFD0\u0113\xFC\u01050\u0114m\xD2-\u0115m\u0100-\u0116\xDE\xE6-\u0117\u010C\u010E-\u0118\u010D\u010F-\u0119\u0102\u0104-\u011A\u0110\u0112-\u011B\u0111\u0113-\u011C\xB2\xBB-\u011D\xCD\xCF-\u011E\u0106\u0107-\u011F\xB2\xB3-\u0120\u0114\u01083\u0121\u0115\u010A3\u0122\u0116\u01173\u0123\u0119\u011A3\u0124\u0122\u011D(\u0125\u011C\u011F(\u0126\u0123\u011E(\u0127\u0120\u0121+\u0128\u0109\u010B+\u0129\u0124\u0126+\u012A\u0118\u011B+\u012B\u0127\u01281\u012C\u0129\u012A1\u012D\u012C\u012B*\u012E\u0125m*\u012D\u012E.",kd;function C0(){return kd||(kd=uv(w0)),kd}var fv=t=>dv(C0(),Yg,t);function hv(t){let e=fv(t);return sv[e]}function mv(t,e,r,n,o){let i=cv[t];return i({queryParams:e,changeEvent:r,previousResults:n,keyDocumentMap:o}),n}var po="\uFFFF",go=Number.MIN_SAFE_INTEGER;function pv(t,e){var r=e.selector,n=t.indexes?t.indexes.slice(0):[];e.index&&(n=[e.index]);var o=!!e.sort.find(p=>Object.values(p)[0]==="desc"),i=new Set;Object.keys(r).forEach(p=>{var y=Te(t,p);y&&y.type==="boolean"&&Object.prototype.hasOwnProperty.call(r[p],"$eq")&&i.add(p)});var s=e.sort.map(p=>Object.keys(p)[0]),l=s.filter(p=>!i.has(p)).join(","),d=-1,m;if(n.forEach(p=>{var y=!0,C=!0,k=p.map(nt=>{var J=r[nt],kt=J?Object.keys(J):[],st={};if(!J||!kt.length){var Pt=C?go:po;st={startKey:Pt,endKey:y?po:go,inclusiveStart:!0,inclusiveEnd:!0}}else kt.forEach(Ot=>{if(fc.has(Ot)){var $t=J[Ot],ue=E0(Ot,$t);st=Object.assign(st,ue)}});return typeof st.startKey>"u"&&(st.startKey=go),typeof st.endKey>"u"&&(st.endKey=po),typeof st.inclusiveStart>"u"&&(st.inclusiveStart=!0),typeof st.inclusiveEnd>"u"&&(st.inclusiveEnd=!0),C&&!st.inclusiveStart&&(C=!1),y&&!st.inclusiveEnd&&(y=!1),st}),N=k.map(nt=>nt.startKey),B=k.map(nt=>nt.endKey),Y={index:p,startKeys:N,endKeys:B,inclusiveEnd:y,inclusiveStart:C,sortSatisfiedByIndex:!o&&l===p.filter(nt=>!i.has(nt)).join(","),selectorSatisfiedByIndex:O0(p,e.selector,N,B)},et=D0(t,e,Y);(et>=d||e.index)&&(d=et,m=Y)}),!m)throw L("SNH",{query:e});return m}var fc=new Set(["$eq","$gt","$gte","$lt","$lte"]),S0=new Set(["$eq","$gt","$gte"]),R0=new Set(["$eq","$lt","$lte"]);function O0(t,e,r,n){var o=Object.entries(e),i=o.find(([Ot,$t])=>{if(!t.includes(Ot))return!0;var ue=Object.entries($t).find(([Le,rr])=>!fc.has(Le));return ue});if(i||e.$and||e.$or)return!1;var s=[],l=new Set;for(var[d,m]of Object.entries(e)){if(!t.includes(d))return!1;var p=Object.keys(m).filter(Ot=>S0.has(Ot));if(p.length>1)return!1;var y=p[0];if(y&&l.add(d),y!=="$eq"){if(s.length>0)return!1;s.push(y)}}var C=[],k=new Set;for(var[N,B]of Object.entries(e)){if(!t.includes(N))return!1;var Y=Object.keys(B).filter(Ot=>R0.has(Ot));if(Y.length>1)return!1;var et=Y[0];if(et&&k.add(N),et!=="$eq"){if(C.length>0)return!1;C.push(et)}}var nt=0;for(var J of t){for(var kt of[l,k]){if(!kt.has(J)&&kt.size>0)return!1;kt.delete(J)}var st=r[nt],Pt=n[nt];if(st!==Pt&&l.size>0&&k.size>0)return!1;nt++}return!0}function E0(t,e){switch(t){case"$eq":return{startKey:e,endKey:e,inclusiveEnd:!0,inclusiveStart:!0};case"$lte":return{endKey:e,inclusiveEnd:!0};case"$gte":return{startKey:e,inclusiveStart:!0};case"$lt":return{endKey:e,inclusiveEnd:!1};case"$gt":return{startKey:e,inclusiveStart:!1};default:throw new Error("SNH")}}function D0(t,e,r){var n=0,o=p=>{p>0&&(n=n+p)},i=10,s=Gs(r.startKeys,p=>p!==go&&p!==po);o(s*i);var l=Gs(r.startKeys,p=>p!==po&&p!==go);o(l*i);var d=Gs(r.startKeys,(p,y)=>p===r.endKeys[y]);o(d*i*1.5);var m=r.sortSatisfiedByIndex?5:0;return o(m),n}var ce=class extends Error{},gc=2147483647,vc=-2147483648,Td=Number.MAX_SAFE_INTEGER,Nd=Number.MIN_SAFE_INTEGER,Gr=Symbol("missing"),yv=Object.freeze(new Error("mingo: cycle detected while processing object/array")),k0="[object Object]",A0=/^\[object ([a-zA-Z0-9]+)\]$/,ba=t=>{let e=N0(t),r=0,n=e.length;for(;n;)r=(r<<5)-r^e.charCodeAt(--n);return r>>>0},bv=new Set(["null","undefined","boolean","number","string","date","regexp"]),I0={null:0,undefined:0,number:1,string:2,object:3,array:4,boolean:5,date:6,regexp:7,function:8},Tt=(t,e)=>{t===Gr&&(t=void 0),e===Gr&&(e=void 0);let[r,n]=[t,e].map(o=>I0[Tn(o).toLowerCase()]);return r!==n?r-n:r===1||r===2||r===6?t<e?-1:t>e?1:0:ge(t,e)?0:t<e?-1:t>e?1:0};function z(t,e){if(!t)throw new ce(e)}var Tn=t=>A0.exec(Object.prototype.toString.call(t))[1],_a=t=>typeof t=="boolean",wt=t=>typeof t=="string";var ut=t=>!isNaN(t)&&typeof t=="number";var it=Array.isArray,lt=t=>{if(!t)return!1;let e=Object.getPrototypeOf(t);return(e===Object.prototype||e===null)&&k0===Object.prototype.toString.call(t)},xa=t=>t===Object(t),Nn=t=>t instanceof Date,ci=t=>t instanceof RegExp,wa=t=>typeof t=="function",X=t=>t==null,Ar=(t,e)=>t.includes(e),yc=(t,e)=>!Ar(t,e),De=(t,e=!0)=>!!t||e&&t==="",qe=t=>X(t)||wt(t)&&!t||t instanceof Array&&t.length===0||lt(t)&&Object.keys(t).length===0,gv=t=>t===Gr,Ir=t=>t instanceof Array?t:[t],zt=(t,e)=>!!t&&Object.prototype.hasOwnProperty.call(t,e),Ld=t=>typeof ArrayBuffer<"u"&&ArrayBuffer.isView(t),P0=[Nn,ci,Ld],Id=(t,e)=>{if(X(t))return t;if(e.has(t))throw yv;let r=t.constructor;if(P0.some(n=>n(t)))return new r(t);try{if(e.add(t),it(t))return t.map(n=>Id(n,e));if(lt(t)){let n={};for(let o in t)n[o]=Id(t[o],e);return n}}finally{e.delete(t)}return t},li=t=>Id(t,new Set),M0=(t,e)=>lt(t)&&lt(e)||it(t)&&it(e);function mc(t,e,r){if(r=r||{flatten:!1},gv(t)||X(t))return e;if(gv(e)||X(e))return t;if(!M0(t,e)){if(r.skipValidation)return e||t;throw Error("mismatched types. must both be array or object")}if(r.skipValidation=!0,it(t)){let n=t,o=e;if(r.flatten){let i=0,s=0;for(;i<n.length&&s<o.length;)n[i]=mc(n[i++],o[s++],r);for(;s<o.length;)n.push(e[s++])}else Je(n,o)}else for(let n in e)t[n]=mc(t[n],e[n],r);return t}function Pd(t,e=ba){let r=new Map;return t.forEach((n,o)=>{let i=bc(n,e);r.has(i)?r.get(i).some(s=>ge(t[s],n))||r.get(i).push(o):r.set(i,[o])}),r}function Xr(t,e=ba){if(t.some(l=>l.length==0))return[];if(t.length===1)return Array.from(t);let r=_v(t.map((l,d)=>[d,l.length]),l=>l[1]),n=t[r[0][0]],o=Pd(n,e),i=new Map,s=new Array;return o.forEach((l,d)=>{let m=l.map(k=>n[k]),p=m.map(k=>0),y=m.map(k=>[r[0][0],0]),C=!1;for(let k=1;k<t.length;k++){let[N,B]=r[k],Y=t[N];if(i.has(k)||i.set(k,Pd(Y)),i.get(k).has(d)){let et=i.get(k).get(d).map(nt=>Y[nt]);C=m.map((nt,J)=>et.some((kt,st)=>{let Pt=p[J];return ge(nt,kt)&&(p[J]++,N<y[J][0]&&(y[J]=[N,i.get(k).get(d)[st]])),Pt<p[J]})).some(Boolean)}if(!C)return}C&&Je(s,p.map((k,N)=>k===t.length-1?[m[N],y[N]]:Gr).filter(k=>k!==Gr))}),s.sort((l,d)=>{let[m,[p,y]]=l,[C,[k,N]]=d,B=Tt(p,k);return B!==0?B:Tt(y,N)}).map(l=>l[0])}function $d(t,e=0){let r=new Array;function n(o,i){for(let s=0,l=o.length;s<l;s++)it(o[s])&&(i>0||i<0)?n(o[s],Math.max(-1,i-1)):r.push(o[s])}return n(t,e),r}var T0=t=>{let[e,r]=[Object.getPrototypeOf(t),Object.getOwnPropertyNames(t)],n=e;for(;!r.length&&e!==Object.prototype&&e!==Array.prototype;)n=e,r=Object.getOwnPropertyNames(e),e=Object.getPrototypeOf(e);let o={};return r.forEach(i=>o[i]=t[i]),[o,n]};function ge(t,e){if(t===e||Object.is(t,e))return!0;let r=!!t&&t.constructor||t;if(t===null||e===null||t===void 0||e===void 0||r!==e.constructor||r===Function)return!1;if(r===Array||r===Object){let i=Object.keys(t),s=Object.keys(e);if(i.length!==s.length||new Set([...i,...s]).size!=i.length)return!1;for(let l of i)if(!ge(t[l],e[l]))return!1;return!0}let n=Object.getPrototypeOf(t);return(Ld(t)||n!==Object.prototype&&n!==Array.prototype&&Object.prototype.hasOwnProperty.call(n,"toString"))&&t.toString()===e.toString()}function Ca(t,e=ba){let r=t.map(n=>Gr);return Pd(t,e).forEach((n,o)=>{n.forEach(i=>r[i]=t[i])}),r.filter(n=>n!==Gr)}var hc=(t,e)=>{if(t===null)return"null";if(t===void 0)return"undefined";let r=t.constructor;switch(r){case RegExp:case Number:case Boolean:case Function:case Symbol:return t.toString();case String:return JSON.stringify(t);case Date:return t.toISOString()}if(Ld(t))return r.name+"["+t.toString()+"]";if(e.has(t))throw yv;try{if(e.add(t),it(t))return"["+t.map(s=>hc(s,e)).join(",")+"]";if(r===Object)return"{"+Object.keys(t).sort().map(s=>s+":"+hc(t[s],e)).join(",")+"}";let n=Object.getPrototypeOf(t);if(n!==Object.prototype&&n!==Array.prototype&&Object.prototype.hasOwnProperty.call(n,"toString"))return r.name+"("+JSON.stringify(t.toString())+")";let[o,i]=T0(t);return r.name+hc(o,e)}finally{e.delete(t)}},N0=t=>hc(t,new Set);function bc(t,e){return e=e||ba,X(t)?null:e(t).toString()}function _v(t,e,r=Tt){if(qe(t))return t;let n=new Array,o=new Array;for(let i=0;i<t.length;i++){let s=t[i],l=e(s,i);X(l)?o.push(s):n.push([l,s])}return n.sort((i,s)=>r(i[0],s[0])),Je(o,n.map(i=>i[1]))}function _c(t,e,r=ba){if(t.length<1)return new Map;let n=new Map,o=new Map;for(let i=0;i<t.length;i++){let s=t[i],l=e(s,i),d=bc(l,r);if(d===null)o.has(null)?o.get(null).push(s):o.set(null,[s]);else{let m=n.has(d)?n.get(d).find(p=>ge(p,l)):null;X(m)?(o.set(l,[s]),n.has(d)?n.get(d).push(l):n.set(d,[l])):o.get(m).push(s)}}return o}var Ad=5e4;function Je(t,...e){return t instanceof Array?e.reduce((r,n)=>{let o=Math.ceil(n.length/Ad),i=0;for(;o-- >0;)Array.prototype.push.apply(r,n.slice(i,i+Ad)),i+=Ad;return r},t):e.filter(xa).reduce((r,n)=>(Object.assign(r,n),r),t)}function Md(t,e){return xa(t)?t[e]:void 0}function L0(t,e){if(e<1)return t;for(;e--&&t.length===1;)t=t[0];return t}function ke(t,e,r){let n=0;function o(s,l){let d=s;for(let m=0;m<l.length;m++){let p=l[m];if(/^\d+$/.exec(p)===null&&d instanceof Array){if(m===0&&n>0)break;n+=1;let C=l.slice(m);d=d.reduce((k,N)=>{let B=o(N,C);return B!==void 0&&k.push(B),k},[]);break}else d=Md(d,p);if(d===void 0)break}return d}let i=bv.has(Tn(t).toLowerCase())?t:o(t,e.split("."));return i instanceof Array&&r?.unwrapArray?L0(i,n):i}function ai(t,e,r){let n=e.split("."),o=n[0],i=n.slice(1).join("."),s=/^\d+$/.exec(o)!==null,l=n.length>1,d,m;if(t instanceof Array)if(s)d=Md(t,Number(o)),l&&(d=ai(d,i,r)),d=[d];else{d=[];for(let p of t)m=ai(p,e,r),r?.preserveMissing?(m===void 0&&(m=Gr),d.push(m)):m!==void 0&&d.push(m)}else{if(m=Md(t,o),l&&(m=ai(m,i,r)),m===void 0)return;d=r?.preserveKeys?j({},t):{},d[o]=m}return d}function pc(t){if(t instanceof Array)for(let e=t.length-1;e>=0;e--)t[e]===Gr?t.splice(e,1):pc(t[e]);else if(lt(t))for(let e in t)zt(t,e)&&pc(t[e])}var vv=/^\d+$/;function si(t,e,r,n){let o=e.split("."),i=o[0],s=o.slice(1).join(".");if(o.length===1)(lt(t)||it(t)&&vv.test(i))&&r(t,i);else{n?.buildGraph&&X(t[i])&&(t[i]={});let l=t[i];if(!l)return;let d=!!(o.length>1&&vv.test(o[1]));l instanceof Array&&n?.descendArray&&!d?l.forEach(m=>si(m,s,r,n)):si(l,s,r,n)}}function xc(t,e,r){si(t,e,(n,o)=>{n[o]=wa(r)?r(n[o]):r},{buildGraph:!0})}function Sa(t,e,r){si(t,e,(n,o)=>{if(n instanceof Array){if(/^\d+$/.test(o))n.splice(parseInt(o),1);else if(r&&r.descendArray)for(let i of n)lt(i)&&delete i[o]}else lt(n)&&delete n[o]},r)}var $0=/^\$[a-zA-Z0-9_]+$/;function We(t){return $0.test(t)}function wc(t){if(bv.has(Tn(t).toLowerCase()))return ci(t)?{$regex:t}:{$eq:t};if(xa(t)){if(!Object.keys(t).some(We))return{$eq:t};if(zt(t,"$regex")){let r=j({},t);return r.$regex=new RegExp(t.$regex,t.$options),delete r.$options,r}}return t}var yo=(t=>(t.CLONE_ALL="CLONE_ALL",t.CLONE_INPUT="CLONE_INPUT",t.CLONE_OUTPUT="CLONE_OUTPUT",t.CLONE_OFF="CLONE_OFF",t))(yo||{}),Vt=class t{constructor(e,r,n,o=Date.now()){this._opts=e,this._root=r,this._local=n,this.timestamp=o,this.update(r,n)}static init(e,r,n){return e instanceof t?new t(e._opts,X(e.root)?r:e.root,Object.assign({},e.local,n)):new t(e,r,n)}update(e,r){return this._root=e,this._local=r&&Object.assign({},r,{variables:Object.assign({},this._local?.variables,r?.variables)}),this}getOptions(){return Object.freeze(pt(j({},this._opts),{context:ui.from(this._opts.context)}))}get root(){return this._root}get local(){return this._local}get idKey(){return this._opts.idKey}get collation(){return this._opts?.collation}get processingMode(){return this._opts?.processingMode||"CLONE_OFF"}get useStrictMode(){return this._opts?.useStrictMode}get scriptEnabled(){return this._opts?.scriptEnabled}get useGlobalContext(){return this._opts?.useGlobalContext}get hashFunction(){return this._opts?.hashFunction}get collectionResolver(){return this._opts?.collectionResolver}get jsonSchemaValidator(){return this._opts?.jsonSchemaValidator}get variables(){return this._opts?.variables}get context(){return this._opts?.context}};function Zr(t){return t instanceof Vt?t.getOptions():Object.freeze(pt(j({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,useGlobalContext:!0,processingMode:"CLONE_OFF"},t),{context:t?.context?ui.from(t?.context):ui.init({})}))}var hr=(t=>(t.ACCUMULATOR="accumulator",t.EXPRESSION="expression",t.PIPELINE="pipeline",t.PROJECTION="projection",t.QUERY="query",t.WINDOW="window",t))(hr||{}),ui=class t{constructor(e){this.operators={accumulator:{},expression:{},pipeline:{},projection:{},query:{},window:{}};for(let[r,n]of Object.entries(e))this.addOperators(r,n)}static init(e={}){return new t(e)}static from(e){return new t(e.operators)}addOperators(e,r){for(let[n,o]of Object.entries(r))this.getOperator(e,n)||(this.operators[e][n]=o);return this}addAccumulatorOps(e){return this.addOperators("accumulator",e)}addExpressionOps(e){return this.addOperators("expression",e)}addQueryOps(e){return this.addOperators("query",e)}addPipelineOps(e){return this.addOperators("pipeline",e)}addProjectionOps(e){return this.addOperators("projection",e)}addWindowOps(e){return this.addOperators("window",e)}getOperator(e,r){return e in this.operators&&this.operators[e][r]||null}},vo=ui.init();function jd(t,e){for(let[r,n]of Object.entries(e)){z(wa(n)&&We(r),`'${r}' is not a valid operator`);let o=fr(t,r,null);z(!o||n===o,`${r} already exists for '${t}' operators. Cannot change operator function once registered.`)}switch(t){case"accumulator":vo.addAccumulatorOps(e);break;case"expression":vo.addExpressionOps(e);break;case"pipeline":vo.addPipelineOps(e);break;case"projection":vo.addProjectionOps(e);break;case"query":vo.addQueryOps(e);break;case"window":vo.addWindowOps(e);break}}function fr(t,e,r){let{context:n,useGlobalContext:o}=r||{},i=n?n.getOperator(t,e):null;return!i&&o?vo.getOperator(t,e):i}var xv={$$ROOT(t,e,r){return r.root},$$CURRENT(t,e,r){return t},$$REMOVE(t,e,r){},$$NOW(t,e,r){return new Date(r.timestamp)}},Fd={$$KEEP(t,e,r){return t},$$PRUNE(t,e,r){},$$DESCEND(t,e,r){if(!zt(e,"$cond"))return t;let n;for(let[o,i]of Object.entries(t))if(xa(i)){if(i instanceof Array){let s=[];for(let l of i)lt(l)&&(l=Bd(l,e,r.update(l))),X(l)||s.push(l);n=s}else n=Bd(i,e,r.update(i));X(n)?delete t[o]:t[o]=n}return t}};function $(t,e,r,n){let o=Vt.init(n,t);if(r=r||"",We(r)){let i=fr("expression",r,n);if(i)return i(t,e,o);let s=fr("accumulator",r,n);if(s)return t instanceof Array||(t=$(t,e,null,o),e=null),z(t instanceof Array,`'${r}' target must be an array.`),s(t,e,o.update(null,o.local));throw new ce(`operator '${r}' is not registered`)}if(wt(e)&&e.length>0&&e[0]==="$"){if(zt(Fd,e))return e;let i=o.root,s=e.split(".");if(zt(xv,s[0]))i=xv[s[0]](t,null,o),e=e.slice(s[0].length+1);else if(s[0].slice(0,2)==="$$"){i=Object.assign({},o.variables,{this:t},o.local?.variables);let l=s[0].slice(2);z(zt(i,l),`Use of undefined variable: ${l}`),e=e.slice(2)}else e=e.slice(1);return e===""?i:ke(i,e)}if(it(e))return e.map(i=>$(t,i,null,o));if(lt(e)){let i={};for(let[s,l]of Object.entries(e))if(i[s]=$(t,l,s,o),["expression","accumulator"].some(d=>!!fr(d,s,n)))return z(Object.keys(e).length===1,"Invalid aggregation expression '"+JSON.stringify(e)+"'"),i[s];return i}return e}function Bd(t,e,r){let n=$(t,e,null,r);return zt(Fd,n)?Fd[n](t,e,r):n}function He(t){return t instanceof Ra?t:new Ra(t)}function Cc(...t){let e=0;return He(()=>{for(;e<t.length;){let r=t[e].next();if(!r.done)return r;e++}return{done:!0}})}function F0(t){return!!t&&typeof t=="object"&&t?.next instanceof Function}function B0(t,e){let r=t.slice(e+1);t.splice(e),Array.prototype.push.apply(t,r)}var Ud=new Error;function j0(t,e,r){let n=!1,o=-1,i=0;return function(s){try{t:for(;!n;){let l=t();o++;let d=-1,m=e.length,p=!1;for(;++d<m;){let y=e[d];switch(y.action){case 0:l=y.func(l,o);break;case 1:if(!y.func(l,o))continue t;break;case 2:--y.count,y.count||(p=!0);break;case 3:--y.count,y.count||B0(e,d);continue t;default:break t}}if(n=p,s)r[i++]=l;else return{value:l,done:!1}}}catch(l){if(l!==Ud)throw l}return n=!0,{done:n}}}var Ra=class{constructor(e){this.iteratees=[],this.yieldedValues=[],this.isDone=!1;let r;if(e instanceof Function&&(e={next:e}),F0(e)){let n=e;r=()=>{let o=n.next();if(o.done)throw Ud;return o.value}}else if(e instanceof Array){let n=e,o=n.length,i=0;r=()=>{if(i<o)return n[i++];throw Ud}}else if(!(e instanceof Function))throw new ce("Lazy must be initialized with an array, generator, or function.");this.getNext=j0(r,this.iteratees,this.yieldedValues)}push(e,r){return typeof r=="function"?this.iteratees.push({action:e,func:r}):typeof r=="number"&&this.iteratees.push({action:e,count:r}),this}next(){return this.getNext()}map(e){return this.push(0,e)}filter(e){return this.push(1,e)}take(e){return e>0?this.push(2,e):this}drop(e){return e>0?this.push(3,e):this}transform(e){let r=this,n;return He(()=>(n||(n=He(e(r.value()))),n.next()))}value(){return this.isDone||(this.isDone=this.getNext(!0).done),this.yieldedValues}each(e){for(;;){let r=this.next();if(r.done)break;if(e(r.value)===!1)return!1}return!0}reduce(e,r){let n=this.next();for(r===void 0&&!n.done&&(r=n.value,n=this.next());!n.done;)r=e(r,n.value),n=this.next();return r}size(){return this.reduce((e,r)=>++e,0)}[Symbol.iterator](){return this}};var Pr=class{constructor(e,r){this.pipeline=e,this.options=Zr(r)}stream(e){let r=He(e),n=this.options.processingMode;(n==yo.CLONE_ALL||n==yo.CLONE_INPUT)&&r.map(li);let o=new Array;if(!qe(this.pipeline))for(let i of this.pipeline){let s=Object.keys(i),l=s[0],d=fr(hr.PIPELINE,l,this.options);z(s.length===1&&!!d,`invalid pipeline operator ${l}`),o.push(l),r=d(r,i[l],this.options)}return(n==yo.CLONE_OUTPUT||n==yo.CLONE_ALL&&Xr([["$group","$unwind"],o]).length)&&r.map(li),r}run(e){return this.stream(e).value()}};var Sc=class{constructor(e,r,n,o){this.source=e,this.predicate=r,this.projection=n,this.options=o,this.operators=[],this.result=null,this.buffer=[]}fetch(){return this.result?this.result:(lt(this.projection)&&this.operators.push({$project:this.projection}),this.result=He(this.source).filter(this.predicate),this.operators.length>0&&(this.result=new Pr(this.operators,this.options).stream(this.result)),this.result)}fetchAll(){let e=He([...this.buffer]);return this.buffer=[],Cc(e,this.fetch())}all(){return this.fetchAll().value()}count(){return this.all().length}skip(e){return this.operators.push({$skip:e}),this}limit(e){return this.operators.push({$limit:e}),this}sort(e){return this.operators.push({$sort:e}),this}collation(e){return this.options=pt(j({},this.options),{collation:e}),this}next(){if(this.buffer.length>0)return this.buffer.pop();let e=this.fetch().next();if(!e.done)return e.value}hasNext(){if(this.buffer.length>0)return!0;let e=this.fetch().next();return e.done?!1:(this.buffer.push(e.value),!0)}map(e){return this.all().map(e)}forEach(e){this.all().forEach(e)}[Symbol.iterator](){return this.fetchAll()}};var Yt=class{constructor(e,r){this.condition=e,this.options=Zr(r),this.compiled=[],this.compile()}compile(){z(lt(this.condition),`query criteria must be an object: ${JSON.stringify(this.condition)}`);let e={};for(let[r,n]of Object.entries(this.condition)){if(r==="$where")Object.assign(e,{field:r,expr:n});else if(Ar(["$and","$or","$nor","$expr","$jsonSchema"],r))this.processOperator(r,r,n);else{z(!We(r),`unknown top level operator: ${r}`);for(let[o,i]of Object.entries(wc(n)))this.processOperator(r,o,i)}e.field&&this.processOperator(e.field,e.field,e.expr)}}processOperator(e,r,n){let o=fr(hr.QUERY,r,this.options);if(!o)throw new ce(`unknown query operator ${r}`);let i=o(e,n,this.options);this.compiled.push(i)}test(e){for(let r=0,n=this.compiled.length;r<n;r++)if(!this.compiled[r](e))return!1;return!0}find(e,r){return new Sc(e,n=>this.test(n),r||{},this.options)}remove(e){return e.reduce((r,n)=>(this.test(n)||r.push(n),r),[])}};var di=1e3*60*60*24,wv={week:di*7,day:di,hour:1e3*60*60,minute:1e3*60,second:1e3,millisecond:1};var O1={week:di*7,day:di,hour:di/24,minute:6e4,second:1e3,millisecond:1};var Oc=(t,e,r)=>{if(qe(e)||!lt(e))return t;let n=Tt,o=r.collation;return lt(o)&&wt(o.locale)&&(n=G0(o)),t.transform(i=>{let s=Object.keys(e);for(let l of s.reverse()){let d=_c(i,p=>ke(p,l),r.hashFunction),m=Array.from(d.keys()).sort(n);e[l]===-1&&m.reverse(),i=[],m.reduce((p,y)=>Je(p,d.get(y)),i)}return i})},Y0={1:"base",2:"accent",3:"variant"};function G0(t){let e={sensitivity:Y0[t.strength||3],caseFirst:t.caseFirst==="off"?"false":t.caseFirst||"false",numeric:t.numericOrdering||!1,ignorePunctuation:t.alternate==="shifted"};(t.caseLevel||!1)===!0&&(e.sensitivity==="base"&&(e.sensitivity="case"),e.sensitivity==="accent"&&(e.sensitivity="variant"));let r=new Intl.Collator(t.locale,e);return(n,o)=>{if(!wt(n)||!wt(o))return Tt(n,o);let i=r.compare(n,o);return i<0?-1:i>0?1:0}}function Ct(t){let e=(r,n,o)=>{let i={unwrapArray:!0},s=Math.max(1,r.split(".").length-1);return l=>{let d=ke(l,r,i);return t(d,n,pt(j({},o),{depth:s}))}};return e.op="query",e}function Ne(t){return(e,r,n)=>{let o=$(e,r,null,n);return t(...o)}}function Oa(t,e,r){if(ge(t,e)||X(t)&&X(e))return!0;if(t instanceof Array){let n=ge.bind(null,e);return t.some(n)||$d(t,r?.depth).some(n)}return!1}function Ec(t,e,r){return!Oa(t,e,r)}function Vd(t,e,r){return X(t)?e.some(n=>n===null):Xr([Ir(t),e],r?.hashFunction).length>0}function Dc(t,e,r){return!Vd(t,e,r)}function kc(t,e,r){return Mc(t,e,(n,o)=>Tt(n,o)<0)}function Ac(t,e,r){return Mc(t,e,(n,o)=>Tt(n,o)<=0)}function Ic(t,e,r){return Mc(t,e,(n,o)=>Tt(n,o)>0)}function Pc(t,e,r){return Mc(t,e,(n,o)=>Tt(n,o)>=0)}function Dv(t,e,r){return Ir(t).some(n=>e.length===2&&n%e[0]===e[1])}function kv(t,e,r){let n=Ir(t),o=i=>wt(i)&&De(e.exec(i),r?.useStrictMode);return n.some(o)||$d(n,1).some(o)}function Av(t,e,r){return(e===!1||e===0)&&t===void 0||(e===!0||e===1)&&t!==void 0}function Iv(t,e,r){if(!it(t)||!it(e)||!t.length||!e.length)return!1;let n=!0;for(let o of e){if(!n)break;lt(o)&&Ar(Object.keys(o),"$elemMatch")?n=qd(t,o.$elemMatch,r):o instanceof RegExp?n=t.some(i=>typeof i=="string"&&o.test(i)):n=t.some(i=>ge(o,i))}return n}function Pv(t,e,r){return Array.isArray(t)&&t.length===e}function tC(t){return We(t)&&["$and","$or","$nor"].indexOf(t)===-1}function qd(t,e,r){if(it(t)&&!qe(t)){let n=s=>s,o=e;Object.keys(e).every(tC)&&(o={temp:e},n=s=>({temp:s}));let i=new Yt(o,r);for(let s=0,l=t.length;s<l;s++)if(i.test(n(t[s])))return!0}return!1}var Sv=t=>t===null,Rv=t=>ut(t)&&t>=vc&&t<=gc&&t.toString().indexOf(".")===-1,Ov=t=>ut(t)&&t>=Nd&&t<=Td&&t.toString().indexOf(".")===-1,eC={array:it,bool:_a,boolean:_a,date:Nn,decimal:ut,double:ut,int:Rv,long:Ov,number:ut,null:Sv,object:lt,regex:ci,regexp:ci,string:wt,undefined:X,function:t=>{throw new ce("unsupported type key `function`.")},1:ut,2:wt,3:lt,4:it,6:X,8:_a,9:Nn,10:Sv,11:ci,16:Rv,18:Ov,19:ut};function Ev(t,e,r){let n=eC[e];return n?n(t):!1}function Mv(t,e,r){return Array.isArray(e)?e.findIndex(n=>Ev(t,n,r))>=0:Ev(t,e,r)}function Mc(t,e,r){return Ir(t).some(n=>Tn(n)===Tn(e)&&r(n,e))}var $T=Ne(Dc);var fi=(t,e)=>(r,n,o)=>{z(it(n),`${t}: expression must be an array.`);let i=$(r,n,null,o);return i.some(X)?null:(z(i.every(ut),`${t}: expression must evalue to array of numbers.`),e(i))};var MN=fi("$bitAnd",t=>t.reduce((e,r)=>e&r,-1));var BN=fi("$bitOr",t=>t.reduce((e,r)=>e|r,0));var zN=fi("$bitXor",t=>t.reduce((e,r)=>e^r,0));var Wd={};vs(Wd,{$and:()=>rC,$not:()=>nC,$or:()=>oC});var rC=(t,e,r)=>{let n=$(t,e,null,r);return De(n,r.useStrictMode)&&n.every(o=>De(o,r.useStrictMode))};var nC=(t,e,r)=>{let n=Ir(e);if(n.length==0)return!1;if(n.length==1)return!$(t,n[0],null,r);throw"Expression $not takes exactly 1 argument"};var oC=(t,e,r)=>{let n=$(t,e,null,r),o=r.useStrictMode;return De(n,o)&&n.some(i=>De(i,o))};var Hd={};vs(Hd,{$cmp:()=>iC,$eq:()=>aC,$gt:()=>sC,$gte:()=>cC,$lt:()=>lC,$lte:()=>uC,$ne:()=>dC});var iC=(t,e,r)=>{let n=$(t,e,null,r);return n[0]>n[1]?1:n[0]<n[1]?-1:0};var aC=Ne(Oa);var sC=Ne(Ic);var cC=Ne(Pc);var lC=Ne(kc);var uC=Ne(Ac);var dC=Ne(Ec);var Tv=(t,e)=>{let r={};return t.split("").forEach((n,o)=>r[n]=e*(o+1)),r},JL=pt(j(j({},Tv("ABCDEFGHIKLM",1)),Tv("NOPQRSTUVWXY",-1)),{Z:0});var Fv={undefined:null,null:null,NaN:NaN,Infinity:new Error,"-Infinity":new Error};function Nt(t,e=Fv){let r=Object.assign({},Fv,e),n=new Set(Object.keys(r));return(o,i,s)=>{let l=$(o,i,null,s);if(n.has(`${l}`)){let d=r[`${l}`];if(d instanceof Error)throw new ce(`cannot apply $${t.name} to -inf, value must in (-inf,inf)`);return d}return t(l)}}var sU=Nt(Math.acos,{Infinity:1/0,0:new Error});var uU=Nt(Math.acosh,{Infinity:1/0,0:new Error});var hU=Nt(Math.asin);var gU=Nt(Math.asinh,{Infinity:1/0,"-Infinity":-1/0});var bU=Nt(Math.atan);var RU=Nt(Math.atanh,{1:1/0,"-1":-1/0});var DU=Nt(Math.cos);var IU=Nt(Math.cosh,{"-Infinity":1/0,Infinity:1/0});var pC=Math.PI/180,TU=Nt(t=>t*pC,{Infinity:1/0,"-Infinity":1/0});var gC=180/Math.PI,$U=Nt(t=>t*gC,{Infinity:1/0,"-Infinity":-1/0});var jU=Nt(Math.sin);var VU=Nt(Math.sinh,{"-Infinity":-1/0,Infinity:1/0});var HU=Nt(Math.tan);var Qd=(t,e,r)=>{if(qe(e))return t;let n=Object.keys(e),o=!1;jv(e,r);let i=r.idKey;if(Ar(n,i)){let l=e[i];(l===0||l===!1)&&(n=n.filter(yc.bind(null,[i])),o=n.length==0)}else n.push(i);let s=Vt.init(r);return t.map(l=>Kd(l,e,s.update(l),n,o))};function Kd(t,e,r,n,o){let i={},s=!1,l=!1,d=[];o&&d.push(r.idKey);for(let m of n){let p,y=e[m];if(m!==r.idKey&&Ar([0,!1],y)&&(l=!0),m===r.idKey&&qe(y))p=t[m];else if(wt(y))p=$(t,y,m,r);else if(!Ar([1,!0],y))if(y instanceof Array)p=y.map(k=>{let N=$(t,k,null,r);return X(N)?null:N});else if(lt(y)){let k=y,N=Object.keys(y),B=N.length==1?N[0]:"",Y=fr(hr.PROJECTION,B,r);if(Y)B==="$slice"?Ir(k[B]).every(ut)?(p=Y(t,k[B],m,r),s=!0):p=$(t,k,m,r):p=Y(t,k[B],m,r);else if(We(B))p=$(t,k[B],B,r);else if(zt(t,m)){jv(k,r);let et=t[m];et instanceof Array?p=et.map(nt=>Kd(nt,k,r,N,!1)):(et=lt(et)?et:t,p=Kd(et,k,r,N,!1))}else p=$(t,y,null,r)}else{d.push(m);continue}let C=ai(t,m,{preserveMissing:!0});C!==void 0&&mc(i,C,{flatten:!0}),yc([0,1,!1,!0],y)&&(p===void 0?Sa(i,m,{descendArray:!0}):xc(i,m,p))}if(pc(i),(s||l||o)&&(i=Je({},t,i),d.length>0))for(let m of d)Sa(i,m,{descendArray:!0});return i}function jv(t,e){let r=[!1,!1];for(let[n,o]of Object.entries(t)){if(n===e?.idKey)return;o===0||o===!1?r[0]=!0:(o===1||o===!0)&&(r[1]=!0),z(!(r[0]&&r[1]),"Projection cannot have a mix of inclusion and exclusion.")}}var Yd=(t,e,r)=>{z(it(e),"Invalid expression: $and expects value to be an Array.");let n=e.map(o=>new Yt(o,r));return o=>n.every(i=>i.test(o))};var Ea=(t,e,r)=>{z(it(e),"Invalid expression. $or expects value to be an Array");let n=e.map(o=>new Yt(o,r));return o=>n.some(i=>i.test(o))};var Gd=(t,e,r)=>{z(it(e),"Invalid expression. $nor expects value to be an array.");let n=Ea("$or",e,r);return o=>!n(o)};var Xd=(t,e,r)=>{let n={};n[t]=wc(e);let o=new Yt(n,r);return i=>!o.test(i)};var Tc=Ct(Oa);var Nc=Ct(Ic);var Lc=Ct(Pc);var $c=Ct(Vd);var Fc=Ct(kc);var Bc=Ct(Ac);var jc=Ct(Ec);var Uc=Ct(Dc);function bC(t,e,r){return n=>$(n,e,null,r)}function _C(t,e,r){if(!r?.jsonSchemaValidator)throw new ce("Missing option 'jsonSchemaValidator'. Configure to use '$jsonSchema' operator.");let n=r?.jsonSchemaValidator(e);return o=>n(o)}var Zd=Ct(Dv);var Jd=Ct(kv);function xC(t,e,r){z(r.scriptEnabled,"$where operator requires 'scriptEnabled' option to be true");let n=e;return z(wa(n),"$where only accepts a Function object"),o=>De(n.call(o),r?.useStrictMode)}var wC=Ct(Iv);var tf=Ct(qd);var ef=Ct(Pv);var rf=Ct(Av);var nf=Ct(Mv);var Uv=!1;function zv(t){return Uv||(jd(hr.PIPELINE,{$sort:Oc,$project:Qd}),jd(hr.QUERY,{$and:Yd,$eq:Tc,$elemMatch:tf,$exists:rf,$gt:Nc,$gte:Lc,$in:$c,$lt:Fc,$lte:Bc,$ne:jc,$nin:Uc,$mod:Zd,$nor:Gd,$not:Xd,$or:Ea,$regex:Jd,$size:ef,$type:nf}),Uv=!0),new Yt(t)}function Da(t,e){var r=pe(t.primaryKey);e=Dt(e);var n=Ze(e);if(typeof n.skip!="number"&&(n.skip=0),n.selector?(n.selector=n.selector,Object.entries(n.selector).forEach(([m,p])=>{(typeof p!="object"||p===null)&&(n.selector[m]={$eq:p})})):n.selector={},n.index){var o=ga(n.index);o.includes(r)||o.push(r),n.index=o}if(n.sort){var d=n.sort.find(m=>sg(m)===r);d||(n.sort=n.sort.slice(0),n.sort.push({[r]:"asc"}))}else if(n.index)n.sort=n.index.map(m=>({[m]:"asc"}));else{if(t.indexes){var i=new Set;Object.entries(n.selector).forEach(([m,p])=>{var y=!1;typeof p=="object"&&p!==null?y=!!Object.keys(p).find(C=>fc.has(C)):y=!0,y&&i.add(m)});var s=-1,l;t.indexes.forEach(m=>{var p=Dr(m)?m:[m],y=p.findIndex(C=>!i.has(C));y>0&&y>s&&(s=y,l=p)}),l&&(n.sort=l.map(m=>({[m]:"asc"})))}n.sort||(n.sort=[{[r]:"asc"}])}return n}function zc(t,e){if(!e.sort)throw L("SNH",{query:e});var r=[];e.sort.forEach(o=>{var i=Object.keys(o)[0],s=Object.values(o)[0];r.push({key:i,direction:s,getValueFn:ag(i)})});var n=(o,i)=>{for(var s=0;s<r.length;++s){var l=r[s],d=l.getValueFn(o),m=l.getValueFn(i);if(d!==m){var p=l.direction==="asc"?Tt(d,m):Tt(m,d);return p}}};return n}function hi(t,e){if(!e.sort)throw L("SNH",{query:e});var r=zv(e.selector),n=o=>r.test(o);return n}function Ln(t,e){return U(this,null,function*(){var r=yield t.exec();if(!r)return null;if(Array.isArray(r))return Promise.all(r.map(o=>e(o)));var n=yield e(r);return n})}function CC(t,e){return!e.sort||e.sort.length===0?[t]:e.sort.map(r=>Object.keys(r)[0])}var SC=new WeakMap;function RC(t){return Ve(SC,t,()=>{var e=t.collection,r=Da(e.storageInstance.schema,Ze(t.mangoQuery)),n=e.schema.primaryPath,o=zc(e.schema.jsonSchema,r),i=(m,p)=>{var y={docA:m,docB:p,rxQuery:t};return o(y.docA,y.docB)},s=hi(e.schema.jsonSchema,r),l=m=>{var p={doc:m,rxQuery:t};return s(p.doc)},d={primaryKey:t.collection.schema.primaryPath,skip:r.skip,limit:r.limit,sortFields:CC(n,r),sortComparator:i,queryMatcher:l};return d})}function Vv(t,e){if(!t.collection.database.eventReduce)return{runFullQueryAgain:!0};var r=RC(t),n=Rt(t._result).docsData.slice(0),o=Rt(t._result).docsDataMap,i=!1,s=e.map(d=>Ig(d)).filter(Jp),l=s.find(d=>{var m={queryParams:r,changeEvent:d,previousResults:n,keyDocumentMap:o},p=hv(m);if(p==="runFullQueryAgain")return!0;if(p!=="doNothing")return i=!0,mv(p,r,d,n,o),!1});return l?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:i,newResults:n}}var OC=function(){function t(){this._map=new Map}var e=t.prototype;return e.getByQuery=function(n){var o=n.toString();return Ve(this._map,o,()=>n)},t}();function Wv(){return new OC}function qv(t,e){e.uncached=!0;var r=e.toString();t._map.delete(r)}function EC(t){return t.refCount$.observers.length}var DC=100,kC=30*1e3,AC=(t,e)=>(r,n)=>{if(!(n._map.size<t)){var o=ee()-e,i=[],s=Array.from(n._map.values());for(var l of s)if(!(EC(l)>0)){if(l._lastEnsureEqual===0&&l._creationTime<o){qv(n,l);continue}i.push(l)}var d=i.length-t;if(!(d<=0)){var m=i.sort((y,C)=>y._lastEnsureEqual-C._lastEnsureEqual),p=m.slice(0,d);p.forEach(y=>qv(n,y))}}},af=AC(DC,kC),of=new WeakSet;function Hv(t){of.has(t)||(of.add(t),fg().then(()=>pg(200)).then(()=>{t.destroyed||t.cacheReplacementPolicy(t,t._queryCache),of.delete(t)}))}var Qv=function(){function t(r,n,o){this.cacheItemByDocId=new Map,this.tasks=new Set,this.registry=typeof FinalizationRegistry=="function"?new FinalizationRegistry(i=>{var s=i.docId,l=this.cacheItemByDocId.get(s);l&&(l[0].delete(i.revisionHeight),l[0].size===0&&this.cacheItemByDocId.delete(s))}):void 0,this.primaryPath=r,this.changes$=n,this.documentCreator=o,n.subscribe(i=>{this.tasks.add(()=>{for(var s=this.cacheItemByDocId,l=0;l<i.length;l++){var d=i[l],m=s.get(d.documentId);if(m){var p=d.documentData;p||(p=d.previousDocumentData),m[1]=p}}}),this.tasks.size<=1&&oi().then(()=>{this.processTasks()})})}var e=t.prototype;return e.processTasks=function(){if(this.tasks.size!==0){var n=Array.from(this.tasks);n.forEach(o=>o()),this.tasks.clear()}},e.getLatestDocumentData=function(n){this.processTasks();var o=An(this.cacheItemByDocId,n);return o[1]},e.getLatestDocumentDataIfExists=function(n){this.processTasks();var o=this.cacheItemByDocId.get(n);if(o)return o[1]},Ee(t,[{key:"getCachedRxDocuments",get:function(){var r=Kv(this);return ze(this,"getCachedRxDocuments",r)}},{key:"getCachedRxDocument",get:function(){var r=Kv(this);return ze(this,"getCachedRxDocument",n=>r([n])[0])}}])}();function Kv(t){var e=t.primaryPath,r=t.cacheItemByDocId,n=t.registry,o=It.deepFreezeWhenDevMode,i=t.documentCreator,s=l=>{for(var d=new Array(l.length),m=[],p=0;p<l.length;p++){var y=l[p],C=y[e],k=uo(y._rev),N=void 0,B=void 0,Y=r.get(C);Y?(N=Y[0],B=N.get(k)):(N=new Map,Y=[N,y],r.set(C,Y));var et=B?B.deref():void 0;et||(y=o(y),et=i(y),N.set(k,PC(et)),n&&m.push(et)),d[p]=et}return m.length>0&&n&&(t.tasks.add(()=>{for(var nt=0;nt<m.length;nt++){var J=m[nt];n.register(J,{docId:J.primary,revisionHeight:uo(J.revision)})}}),t.tasks.size<=1&&oi().then(()=>{t.processTasks()})),d};return s}function Vc(t,e){var r=t.getCachedRxDocuments;return r(e)}var IC=typeof WeakRef=="function",PC=IC?MC:TC;function MC(t){return new WeakRef(t)}function TC(t){return{deref(){return t}}}var sf=function(){function t(r,n,o){this.time=ee(),this.query=r,this.count=o,this.documents=Vc(this.query.collection._docCache,n)}var e=t.prototype;return e.getValue=function(n){var o=this.query.op;if(o==="count")return this.count;if(o==="findOne"){var i=this.documents.length===0?null:this.documents[0];if(!i&&n)throw L("QU10",{collection:this.query.collection.name,query:this.query.mangoQuery,op:o});return i}else return o==="findByIds"?this.docsMap:this.documents.slice(0)},Ee(t,[{key:"docsData",get:function(){return ze(this,"docsData",this.documents.map(r=>r._data))}},{key:"docsDataMap",get:function(){var r=new Map;return this.documents.forEach(n=>{r.set(n.primary,n._data)}),ze(this,"docsDataMap",r)}},{key:"docsMap",get:function(){for(var r=new Map,n=this.documents,o=0;o<n.length;o++){var i=n[o];r.set(i.primary,i)}return ze(this,"docsMap",r)}}])}();var NC=0,LC=function(){return++NC},cf=function(){function t(r,n,o,i={}){this.id=LC(),this._execOverDatabaseCount=0,this._creationTime=ee(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new _e(null),this._result=null,this._latestChangeEvent=-1,this._lastExecStart=0,this._lastExecEnd=0,this._ensureEqualQueue=kr,this.op=r,this.mangoQuery=n,this.collection=o,this.other=i,n||(this.mangoQuery=ka()),this.isFindOneByIdQuery=jC(this.collection.schema.primaryPath,n)}var e=t.prototype;return e._setResultData=function(n){if(typeof n>"u")throw L("QU18",{database:this.collection.database.name,collection:this.collection.name});if(typeof n=="number"){this._result=new sf(this,[],n);return}else n instanceof Map&&(n=Array.from(n.values()));var o=new sf(this,n,n.length);this._result=o},e._execOverDatabase=function(){return U(this,null,function*(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this._lastExecStart=ee(),this.op==="count"){var n=this.getPreparedQuery(),o=yield this.collection.storageInstance.count(n);if(o.mode==="slow"&&!this.collection.database.allowSlowCount)throw L("QU14",{collection:this.collection,queryObj:this.mangoQuery});return o.count}if(this.op==="findByIds"){var i=Rt(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,s=new Map,l=[];if(i.forEach(p=>{var y=this.collection._docCache.getLatestDocumentDataIfExists(p);if(y){if(!y._deleted){var C=this.collection._docCache.getCachedRxDocument(y);s.set(p,C)}}else l.push(p)}),l.length>0){var d=yield this.collection.storageInstance.findDocumentsById(l,!1);d.forEach(p=>{var y=this.collection._docCache.getCachedRxDocument(p);s.set(y.primary,y)})}return s}var m=BC(this);return m.then(p=>(this._lastExecEnd=ee(),p))})},e.exec=function(n){return U(this,null,function*(){if(n&&this.op!=="findOne")throw L("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});yield Yv(this);var o=Rt(this._result);return o.getValue(n)})},e.toString=function(){var n=ei({op:this.op,query:this.mangoQuery,other:this.other},!0),o=JSON.stringify(n);return this.toString=()=>o,o},e.getPreparedQuery=function(){var n={rxQuery:this,mangoQuery:Da(this.collection.schema.jsonSchema,this.mangoQuery)};n.mangoQuery.selector._deleted={$eq:!1},n.mangoQuery.index&&n.mangoQuery.index.unshift("_deleted"),Qt("prePrepareQuery",n);var o=Aa(this.collection.schema.jsonSchema,n.mangoQuery);return this.getPreparedQuery=()=>o,o},e.doesDocumentDataMatch=function(n){return n._deleted?!1:this.queryMatcher(n)},e.remove=function(){return this.exec().then(n=>Array.isArray(n)?Promise.all(n.map(o=>o.remove())):n.remove())},e.incrementalRemove=function(){return Ln(this.asRxQuery,n=>n.incrementalRemove())},e.update=function(n){throw St("update")},e.patch=function(n){return Ln(this.asRxQuery,o=>o.patch(n))},e.incrementalPatch=function(n){return Ln(this.asRxQuery,o=>o.incrementalPatch(n))},e.modify=function(n){return Ln(this.asRxQuery,o=>o.modify(n))},e.incrementalModify=function(n){return Ln(this.asRxQuery,o=>o.incrementalModify(n))},e.where=function(n){throw St("query-builder")},e.sort=function(n){throw St("query-builder")},e.skip=function(n){throw St("query-builder")},e.limit=function(n){throw St("query-builder")},Ee(t,[{key:"$",get:function(){if(!this._$){var r=this.collection.$.pipe(_t(n=>!n.isLocal),ar(null),Ht(()=>Yv(this)),dt(()=>this._result),Ui(tc),To((n,o)=>!!(n&&n.time===Rt(o).time)),_t(n=>!!n),dt(n=>Rt(n).getValue()));this._$=Io(r,this.refCount$.pipe(_t(()=>!1)))}return this._$}},{key:"$$",get:function(){var r=this.collection.database.getReactivityFactory();return r.fromObservable(this.$,void 0,this.collection.database)}},{key:"queryMatcher",get:function(){var r=this.collection.schema.jsonSchema,n=Da(this.collection.schema.jsonSchema,this.mangoQuery);return ze(this,"queryMatcher",hi(r,n))}},{key:"asRxQuery",get:function(){return this}}])}();function ka(){return{selector:{}}}function $C(t){return t.collection._queryCache.getByQuery(t)}function mi(t,e,r,n){Qt("preCreateRxQuery",{op:t,queryObj:e,collection:r,other:n});var o=new cf(t,e,r,n);return o=$C(o),Hv(r),o}function Gv(t){var e=t.asRxQuery.collection._changeEventBuffer.getCounter();return t._latestChangeEvent>=e}function Yv(t){return U(this,null,function*(){return t.collection.awaitBeforeReads.size>0&&(yield Promise.all(Array.from(t.collection.awaitBeforeReads).map(e=>e()))),t.collection.database.destroyed||Gv(t)?!1:(t._ensureEqualQueue=t._ensureEqualQueue.then(()=>FC(t)),t._ensureEqualQueue)})}function FC(t){if(t._lastEnsureEqual=ee(),t.collection.database.destroyed||Gv(t))return kr;var e=!1,r=!1;if(t._latestChangeEvent===-1&&(r=!0),!r){var n=t.asRxQuery.collection._changeEventBuffer.getFrom(t._latestChangeEvent+1);if(n===null)r=!0;else{t._latestChangeEvent=t.asRxQuery.collection._changeEventBuffer.getCounter();var o=t.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(n);if(t.op==="count"){var i=Rt(t._result).count,s=i;o.forEach(d=>{var m=d.previousDocumentData&&t.doesDocumentDataMatch(d.previousDocumentData),p=t.doesDocumentDataMatch(d.documentData);!m&&p&&s++,m&&!p&&s--}),s!==i&&(e=!0,t._setResultData(s))}else{var l=Vv(t,o);l.runFullQueryAgain?r=!0:l.changed&&(e=!0,t._setResultData(l.newResults))}}}return r?t._execOverDatabase().then(d=>(t._latestChangeEvent=t.collection._changeEventBuffer.getCounter(),typeof d=="number"?((!t._result||d!==t._result.count)&&(e=!0,t._setResultData(d)),e):((!t._result||!lg(t.collection.schema.primaryPath,d,t._result.docsData))&&(e=!0,t._setResultData(d)),e))):Promise.resolve(e)}function Aa(t,e){if(!e.sort)throw L("SNH",{query:e});var r=pv(t,e);return{query:e,queryPlan:r}}function BC(t){return U(this,null,function*(){var e=[],r=t.collection;if(t.isFindOneByIdQuery)if(Array.isArray(t.isFindOneByIdQuery)){var n=t.isFindOneByIdQuery;if(n=n.filter(p=>{var y=t.collection._docCache.getLatestDocumentDataIfExists(p);return y?(y._deleted||e.push(y),!1):!0}),n.length>0){var o=yield r.storageInstance.findDocumentsById(n,!1);ur(e,o)}}else{var i=t.isFindOneByIdQuery,s=t.collection._docCache.getLatestDocumentDataIfExists(i);if(!s){var l=yield r.storageInstance.findDocumentsById([i],!1);l[0]&&(s=l[0])}s&&!s._deleted&&e.push(s)}else{var d=t.getPreparedQuery(),m=yield r.storageInstance.query(d);e=m.documents}return e})}function jC(t,e){if(!e.skip&&e.selector&&Object.keys(e.selector).length===1&&e.selector[t]){var r=e.selector[t];if(typeof r=="string")return r;if(Object.keys(r).length===1&&typeof r.$eq=="string"||Object.keys(r).length===1&&Array.isArray(r.$eq)&&!r.$eq.find(n=>typeof n!="string"))return r.$eq}return!1}var Xv="_rxdb_internal";function uf(t,e){return U(this,null,function*(){var r=yield t.findDocumentsById([e],!1),n=r[0];if(n)return n})}function pi(t,e,r,n){if(n)throw n.status===409?L("CONFLICT",{collection:t.name,id:e,writeError:n,data:r}):n.status===422?L("VD2",{collection:t.name,id:e,writeError:n,data:r}):n}function Zv(t,e,r,n,o,i,s){for(var l=!!t.schema.attachments,d=[],m=[],p=[],y=ho(10),C={id:y,events:[],checkpoint:null,context:o,startTime:ee(),endTime:0},k=C.events,N=[],B=[],Y=[],et=r.size>0,nt,J=n.length,kt=function(){var Pt=n[st],Ot=Pt.document,$t=Pt.previous,ue=Ot[e],Le=Ot._deleted,rr=$t&&$t._deleted,zn=void 0;et&&(zn=r.get(ue));var nr;if(zn){var Lr=zn._rev;if(!$t||$t&&Lr!==$t._rev){var en={isError:!0,status:409,documentId:ue,writeRow:Pt,documentInDb:zn};return p.push(en),1}var Ie=l?lf(Pt):Pt;l&&(Le?$t&&Object.keys($t._attachments).forEach(re=>{B.push({documentId:ue,attachmentId:re,digest:Rt($t)._attachments[re].digest})}):(Object.entries(Ot._attachments).find(([re,ne])=>{var nn=$t?$t._attachments[re]:void 0;return!nn&&!ne.data&&(nr={documentId:ue,documentInDb:zn,isError:!0,status:510,writeRow:Pt,attachmentId:re}),!0}),nr||Object.entries(Ot._attachments).forEach(([re,ne])=>{var nn=$t?$t._attachments[re]:void 0;if(!nn)N.push({documentId:ue,attachmentId:re,attachmentData:ne,digest:ne.digest});else{var bl=Ie.document._attachments[re].digest;ne.data&&nn.digest!==bl&&Y.push({documentId:ue,attachmentId:re,attachmentData:ne,digest:ne.digest})}}))),nr?p.push(nr):(l?(m.push(lf(Ie)),s&&s(Ot)):(m.push(Ie),s&&s(Ot)),nt=Ie);var rn=null,Ci=null,or=null;if(rr&&!Le)or="INSERT",rn=l?Mr(Ot):Ot;else if($t&&!rr&&!Le)or="UPDATE",rn=l?Mr(Ot):Ot,Ci=$t;else if(Le)or="DELETE",rn=Rt(Ot),Ci=$t;else throw L("SNH",{args:{writeRow:Pt}});var Va={documentId:ue,documentData:rn,previousDocumentData:Ci,operation:or};k.push(Va)}else{var wi=!!Le;if(l&&Object.entries(Ot._attachments).forEach(([re,ne])=>{ne.data?N.push({documentId:ue,attachmentId:re,attachmentData:ne,digest:ne.digest}):(nr={documentId:ue,isError:!0,status:510,writeRow:Pt,attachmentId:re},p.push(nr))}),nr||(l?(d.push(lf(Pt)),i&&i(Ot)):(d.push(Pt),i&&i(Ot)),nt=Pt),!wi){var yl={documentId:ue,operation:"INSERT",documentData:l?Mr(Ot):Ot,previousDocumentData:l&&$t?Mr($t):$t};k.push(yl)}}},st=0;st<J;st++)kt();return{bulkInsertDocs:d,bulkUpdateDocs:m,newestRow:nt,errors:p,eventBulk:C,attachmentsAdd:N,attachmentsRemove:B,attachmentsUpdate:Y}}function lf(t){return{previous:t.previous,document:Mr(t.document)}}function UC(t){return atob(t).length}function zC(t){var e=t.data;if(!e)return t;var r={length:UC(e),digest:t.digest,type:t.type};return r}function Mr(t){if(!t._attachments||Object.keys(t._attachments).length===0)return t;var e=Dt(t);return e._attachments={},Object.entries(t._attachments).forEach(([r,n])=>{e._attachments[r]=zC(n)}),e}function bo(t){return Object.assign({},t,{_meta:Dt(t._meta)})}var Jv=new WeakMap;function qc(t,e,r){It.deepFreezeWhenDevMode(r);var n=pe(e.schema.primaryKey),o={originalStorageInstance:e,schema:e.schema,internals:e.internals,collectionName:e.collectionName,databaseName:e.databaseName,options:e.options,bulkWrite(i,s){for(var l=t.token,d=new Array(i.length),m=ee(),p=0;p<i.length;p++){var y=i[p],C=bo(y.document);C._meta.lwt=m;var k=y.previous;C._rev=ti(l,k),d[p]={document:C,previous:k}}return Qt("preStorageWrite",{storageInstance:this.originalStorageInstance,rows:d}),t.lockedRun(()=>e.bulkWrite(d,s)).then(N=>{var B={error:[]},Y=tr(n,d,N);Jv.set(B,Y);var et=N.error.length===0?[]:N.error.filter(J=>J.status===409&&!J.writeRow.previous&&!J.writeRow.document._deleted&&Rt(J.documentInDb)._deleted?!0:(B.error.push(J),!1));if(et.length>0){var nt=et.map(J=>({previous:J.documentInDb,document:Object.assign({},J.writeRow.document,{_rev:ti(t.token,J.documentInDb)})}));return t.lockedRun(()=>e.bulkWrite(nt,s)).then(J=>{ur(B.error,J.error);var kt=tr(n,nt,J);return ur(Y,kt),B})}return B})},query(i){return t.lockedRun(()=>e.query(i))},count(i){return t.lockedRun(()=>e.count(i))},findDocumentsById(i,s){return t.lockedRun(()=>e.findDocumentsById(i,s))},getAttachmentData(i,s,l){return t.lockedRun(()=>e.getAttachmentData(i,s,l))},getChangedDocumentsSince:e.getChangedDocumentsSince?(i,s)=>t.lockedRun(()=>e.getChangedDocumentsSince(Rt(i),s)):void 0,cleanup(i){return t.lockedRun(()=>e.cleanup(i))},remove(){return t.storageInstances.delete(o),t.lockedRun(()=>e.remove())},close(){return t.storageInstances.delete(o),t.lockedRun(()=>e.close())},changeStream(){return e.changeStream()},conflictResultionTasks(){return e.conflictResultionTasks()},resolveConflictResultionTask(i){if(i.output.isEqual)return e.resolveConflictResultionTask(i);var s=Object.assign({},i.output.documentData,{_meta:On(),_rev:Yr(),_attachments:{}}),l=Dt(s);return delete l._meta,delete l._rev,delete l._attachments,e.resolveConflictResultionTask({id:i.id,output:{isEqual:!1,documentData:l}})}};return t.storageInstances.add(o),o}function ty(t){if(t.schema.keyCompression)throw L("UT5",{args:{params:t}});if(VC(t.schema))throw L("UT6",{args:{params:t}});if(t.schema.attachments&&t.schema.attachments.compression)throw L("UT7",{args:{params:t}})}function VC(t){return!!(t.encrypted&&t.encrypted.length>0||t.attachments&&t.attachments.encrypted)}function tr(t,e,r){var n=Jv.get(r);if(n)return n;var o=[];if(r.error.length>0){for(var i=new Set,s=0;s<r.error.length;s++){var l=r.error[s];i.add(l.documentId)}for(var d=0;d<e.length;d++){var m=e[d].document;i.has(m[t])||o.push(Mr(m))}}else{o.length=e.length-r.error.length;for(var p=0;p<e.length;p++){var y=e[p].document;o[p]=Mr(y)}}return o}var ey=function(){function t(r,n,o,i){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=r,this.primaryPath=n,this.preWrite=o,this.postWrite=i}var e=t.prototype;return e.addWrite=function(n,o){var i=n[this.primaryPath],s=Ve(this.queueByDocId,i,()=>[]),l=new Promise((d,m)=>{var p={lastKnownDocumentState:n,modifier:o,resolve:d,reject:m};Rt(s).push(p),this.triggerRun()});return l},e.triggerRun=function(){return U(this,null,function*(){if(!(this.isRunning===!0||this.queueByDocId.size===0)){this.isRunning=!0;var n=[],o=this.queueByDocId;this.queueByDocId=new Map,yield Promise.all(Array.from(o.entries()).map(d=>U(this,[d],function*([s,l]){var m=qC(l.map(C=>C.lastKnownDocumentState)),p=m;for(var y of l)try{p=yield y.modifier(Ze(p))}catch(C){y.reject(C),y.reject=()=>{},y.resolve=()=>{}}try{yield this.preWrite(p,m)}catch(C){l.forEach(k=>k.reject(C));return}n.push({previous:m,document:p})})));var i=n.length>0?yield this.storageInstance.bulkWrite(n,"incremental-write"):{error:[]};return yield Promise.all(tr(this.primaryPath,n,i).map(s=>{var l=s[this.primaryPath];this.postWrite(s);var d=An(o,l);d.forEach(m=>m.resolve(s))})),i.error.forEach(s=>{var l=s.documentId,d=An(o,l),m=nc(s);if(m){var p=Ve(this.queueByDocId,l,()=>[]);d.reverse().forEach(C=>{C.lastKnownDocumentState=Rt(m.documentInDb),Rt(p).unshift(C)})}else{var y=Rg(s);d.forEach(C=>C.reject(y))}}),this.isRunning=!1,this.triggerRun()}})},t}();function df(t){var e=r=>U(this,null,function*(){var n=cg(r);n._deleted=r._deleted;var o=yield t(n),i=Object.assign({},o,{_meta:r._meta,_attachments:r._attachments,_rev:r._rev,_deleted:typeof o._deleted<"u"?o._deleted:r._deleted});return typeof i._deleted>"u"&&(i._deleted=!1),i});return e}function qC(t){var e=t[0],r=uo(e._rev);return t.forEach(n=>{var o=uo(n._rev);o>r&&(e=n,r=o)}),e}var $n={get primaryPath(){var t=this;if(t.isInstanceOfRxDocument)return t.collection.schema.primaryPath},get primary(){var t=this;if(t.isInstanceOfRxDocument)return t._data[t.primaryPath]},get revision(){var t=this;if(t.isInstanceOfRxDocument)return t._data._rev},get deleted$(){var t=this;if(t.isInstanceOfRxDocument)return t.$.pipe(dt(e=>e._data._deleted))},get deleted$$(){var t=this,e=t.collection.database.getReactivityFactory();return e.fromObservable(t.deleted$,t.getLatest().deleted,t.collection.database)},get deleted(){var t=this;if(t.isInstanceOfRxDocument)return t._data._deleted},getLatest(){var t=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(t)},get $(){var t=this;return t.collection.$.pipe(_t(e=>!e.isLocal),_t(e=>e.documentId===this.primary),dt(e=>Ag(e)),ar(t.collection._docCache.getLatestDocumentData(this.primary)),To((e,r)=>e._rev===r._rev),dt(e=>this.collection._docCache.getCachedRxDocument(e)),Ui(tc))},get $$(){var t=this,e=t.collection.database.getReactivityFactory();return e.fromObservable(t.$,t.getLatest()._data,t.collection.database)},get$(t){if(It.isDevMode()){if(t.includes(".item."))throw L("DOC1",{path:t});if(t===this.primaryPath)throw L("DOC2");if(this.collection.schema.finalFields.includes(t))throw L("DOC3",{path:t});var e=Te(this.collection.schema.jsonSchema,t);if(!e)throw L("DOC4",{path:t})}return this.$.pipe(dt(r=>Me(r,t)),To())},get$$(t){var e=this.get$(t),r=this.collection.database.getReactivityFactory();return r.fromObservable(e,this.getLatest().get(t),this.collection.database)},populate(t){var e=Te(this.collection.schema.jsonSchema,t),r=this.get(t);if(!r)return mg;if(!e)throw L("DOC5",{path:t});if(!e.ref)throw L("DOC6",{path:t,schemaObj:e});var n=this.collection.database.collections[e.ref];if(!n)throw L("DOC7",{ref:e.ref,path:t,schemaObj:e});return e.type==="array"?n.findByIds(r).exec().then(o=>{var i=o.values();return Array.from(i)}):n.findOne(r).exec()},get(t){return ny(this,t)},toJSON(t=!1){if(t)return It.deepFreezeWhenDevMode(this._data);var e=Dt(this._data);return delete e._rev,delete e._attachments,delete e._deleted,delete e._meta,It.deepFreezeWhenDevMode(e)},toMutableJSON(t=!1){return Ze(this.toJSON(t))},update(t){throw St("update")},incrementalUpdate(t){throw St("update")},updateCRDT(t){throw St("crdt")},putAttachment(){throw St("attachments")},getAttachment(){throw St("attachments")},allAttachments(){throw St("attachments")},get allAttachments$(){throw St("attachments")},modify(t,e){return U(this,null,function*(){var r=this._data,n=yield df(t)(r);return this._saveData(n,r)})},incrementalModify(t,e){return this.collection.incrementalWriteQueue.addWrite(this._data,df(t)).then(r=>this.collection._docCache.getCachedRxDocument(r))},patch(t){var e=this._data,r=Ze(e);return Object.entries(t).forEach(([n,o])=>{r[n]=o}),this._saveData(r,e)},incrementalPatch(t){return this.incrementalModify(e=>(Object.entries(t).forEach(([r,n])=>{e[r]=n}),e))},_saveData(t,e){return U(this,null,function*(){if(t=Dt(t),this._data._deleted)throw L("DOC11",{id:this.primary,document:this});yield ff(this.collection,t,e);var r=[{previous:e,document:t}],n=yield this.collection.storageInstance.bulkWrite(r,"rx-document-save-data"),o=n.error[0];return pi(this.collection,this.primary,t,o),yield this.collection._runHooks("post","save",t,this),this.collection._docCache.getCachedRxDocument(tr(this.collection.schema.primaryPath,r,n)[0])})},remove(){var t=this.collection;if(this.deleted)return Promise.reject(L("DOC13",{document:this,id:this.primary}));var e=Dt(this._data),r;return t._runHooks("pre","remove",e,this).then(()=>U(this,null,function*(){e._deleted=!0;var n=[{previous:this._data,document:e}],o=yield t.storageInstance.bulkWrite(n,"rx-document-remove"),i=o.error[0];return pi(t,this.primary,e,i),tr(this.collection.schema.primaryPath,n,o)[0]})).then(n=>(r=n,this.collection._runHooks("post","remove",e,this))).then(()=>this.collection._docCache.getCachedRxDocument(r))},incrementalRemove(){return this.incrementalModify(t=>U(this,null,function*(){return yield this.collection._runHooks("pre","remove",t,this),t._deleted=!0,t})).then(t=>U(this,null,function*(){return yield this.collection._runHooks("post","remove",t._data,t),t}))},destroy(){throw L("DOC14")}};function Wc(t=$n){var e=function(n,o){this.collection=n,this._data=o,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return e.prototype=t,e}function ry(t,e,r){var n=new t(e,r);return Qt("createRxDocument",n),n}function ff(t,e,r){return e._meta=Object.assign({},r._meta,e._meta),It.isDevMode()&&t.schema.validateChange(r,e),t._runHooks("pre","save",e,r)}function ny(t,e){return Ve(t._propertyCache,e,()=>{var r=Me(t._data,e);if(typeof r!="object"||r===null||Array.isArray(r))return It.deepFreezeWhenDevMode(r);var n=new Proxy(Dt(r),{get(o,i){if(typeof i!="string")return o[i];var s=i.charAt(i.length-1);if(s==="$")if(i.endsWith("$$")){var l=i.slice(0,-2);return t.get$$(dr(e+"."+l))}else{var d=i.slice(0,-1);return t.get$(dr(e+"."+d))}else if(s==="_"){var m=i.slice(0,-1);return t.populate(dr(e+"."+m))}else{var p=o[i];return typeof p=="number"||typeof p=="string"||typeof p=="boolean"?p:ny(t,dr(e+"."+i))}}});return n})}var gi="collection",hf="storage-token",WC="rx-migration-status",HC="RxInternalDocument",Hc=ic({version:0,title:HC,primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[gi,hf,WC,"OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function Kc(t,e){return ya(Hc,{key:t,context:e})}function Qc(t){return U(this,null,function*(){var e=Aa(t.schema,{selector:{context:gi,_deleted:{$eq:!1}},sort:[{id:"asc"}],skip:0}),r=yield t.query(e),n=r.documents;return n})}var oy="storageToken",KC=Kc(oy,hf);function iy(t){return U(this,null,function*(){var e=ho(10),r=t.password?yield t.hashFunction(JSON.stringify(t.password)):void 0,n={id:KC,context:hf,key:oy,data:{rxdbVersion:t.rxdbVersion,token:e,instanceToken:t.token,passwordHash:r},_deleted:!1,_meta:On(),_rev:Yr(),_attachments:{}},o=[{document:n}],i=yield t.internalStore.bulkWrite(o,"internal-add-storage-token");if(!i.error[0])return tr("id",o,i)[0];var s=Rt(i.error[0]);if(s.isError&&nc(s)){var l=s;if(!QC(l.documentInDb.data.rxdbVersion,t.rxdbVersion))throw L("DM5",{args:{database:t.name,databaseStateVersion:l.documentInDb.data.rxdbVersion,codeVersion:t.rxdbVersion}});if(r&&r!==l.documentInDb.data.passwordHash)throw L("DB1",{passwordHash:r,existingPasswordHash:l.documentInDb.data.passwordHash});var d=l.documentInDb;return Rt(d)}throw s})}function QC(t,e){if(!t||e.includes("beta")&&e!==t)return!1;var r=t.split(".")[0],n=e.split(".")[0];return r===n}function mf(t,e){return t+"-"+e.version}function Ia(t,e){return e=Dt(e),e=Eg(t,e),typeof t.jsonSchema.primaryKey!="string"&&(e=oc(t.primaryPath,t.jsonSchema,e)),e._meta=On(),Object.prototype.hasOwnProperty.call(e,"_deleted")||(e._deleted=!1),Object.prototype.hasOwnProperty.call(e,"_attachments")||(e._attachments={}),Object.prototype.hasOwnProperty.call(e,"_rev")||(e._rev=Yr()),e}function ay(t,e){return U(this,null,function*(){e.multiInstance=t.multiInstance;var r=yield t.storage.createStorageInstance(e);return r})}function Yc(t,e,r,n,o,i,s){return U(this,null,function*(){var l=yield Qc(e),d=l.filter(C=>C.data.name===o),m=[];d.forEach(C=>{m.push({collectionName:C.data.name,schema:C.data.schema,isCollection:!0}),C.data.connectedStorages.forEach(k=>m.push({collectionName:k.collectionName,isCollection:!1,schema:k.schema}))});var p=new Set;if(m=m.filter(C=>{var k=C.collectionName+"||"+C.schema.version;return p.has(k)?!1:(p.add(k),!0)}),yield Promise.all(m.map(C=>U(this,null,function*(){var k=yield t.createStorageInstance({collectionName:C.collectionName,databaseInstanceToken:r,databaseName:n,multiInstance:!1,options:{},schema:C.schema,password:i,devMode:It.isDevMode()});yield k.remove(),C.isCollection&&(yield Mn("postRemoveRxCollection",{storage:t,databaseName:n,collectionName:o}))}))),s){var y=d.map(C=>{var k=bo(C);return k._deleted=!0,k._meta.lwt=ee(),k._rev=ti(r,C),{previous:C,document:k}});yield e.bulkWrite(y,"rx-database-remove-collection-all")}})}function Ke(t){if(t.destroyed)throw L("COL21",{collection:t.name,version:t.schema.version})}var YC=function(){function t(r){this.subs=[],this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.limit=100,this.tasks=new Set,this.collection=r,this.subs.push(this.collection.database.eventBulks$.pipe(_t(n=>n.collectionName===this.collection.name),_t(n=>{var o=n.events[0];return!o.isLocal})).subscribe(n=>{this.tasks.add(()=>this._handleChangeEvents(n.events)),this.tasks.size<=1&&oi().then(()=>{this.processTasks()})}))}var e=t.prototype;return e.processTasks=function(){if(this.tasks.size!==0){var n=Array.from(this.tasks);n.forEach(o=>o()),this.tasks.clear()}},e._handleChangeEvents=function(n){var o=this.counter;this.counter=this.counter+n.length,n.length>this.limit?this.buffer=n.slice(n.length*-1):(ur(this.buffer,n),this.buffer=this.buffer.slice(this.limit*-1));for(var i=o+1,s=this.eventCounterMap,l=0;l<n.length;l++){var d=n[l];s.set(d,i+l)}},e.getCounter=function(){return this.processTasks(),this.counter},e.getBuffer=function(){return this.processTasks(),this.buffer},e.getArrayIndexByPointer=function(n){this.processTasks();var o=this.buffer[0],i=this.eventCounterMap.get(o);if(n<i)return null;var s=n-i;return s},e.getFrom=function(n){this.processTasks();var o=[],i=this.getArrayIndexByPointer(n);if(i===null)return null;for(;;){var s=this.buffer[i];if(i++,s)o.push(s);else return o}},e.runFrom=function(n,o){this.processTasks();var i=this.getFrom(n);if(i===null)throw new Error("out of bounds");i.forEach(s=>o(s))},e.reduceByLastOfDoc=function(n){return this.processTasks(),n.slice(0);var o={};return n.forEach(i=>{o[i.documentId]=i}),Object.values(o)},e.destroy=function(){this.tasks.clear(),this.subs.forEach(n=>n.unsubscribe())},t}();function sy(t){return new YC(t)}var GC=new WeakMap;function XC(t){var e=t.schema.getDocumentPrototype(),r=ZC(t),n=$n,o={};return[e,r,n].forEach(i=>{var s=Object.getOwnPropertyNames(i);s.forEach(l=>{var d=Object.getOwnPropertyDescriptor(i,l),m=!0;(l.startsWith("_")||l.endsWith("_")||l.startsWith("$")||l.endsWith("$"))&&(m=!1),typeof d.value=="function"?Object.defineProperty(o,l,{get(){return d.value.bind(this)},enumerable:m,configurable:!1}):(d.enumerable=m,d.configurable=!1,d.writable&&(d.writable=!1),Object.defineProperty(o,l,d))})}),o}function cy(t){return Ve(GC,t,()=>Wc(XC(t)))}function ly(t,e,r){var n=ry(e,t,It.deepFreezeWhenDevMode(r));return t._runHooksSync("post","create",r,n),Qt("postCreateRxDocument",n),n}function ZC(t){var e={};return Object.entries(t.methods).forEach(([r,n])=>{e[r]=n}),e}var pf=function(t,e){var r=Mr(t.newDocumentState),n=Mr(t.realMasterState);return kn(r,n)?Promise.resolve({isEqual:!0}):Promise.resolve({isEqual:!1,documentData:t.realMasterState})};function Gc(t){var e=t.collection.schema.jsonSchema;if(!e.attachments)throw L("AT1",{link:"https://pubkey.github.io/rxdb/rx-attachment.html"})}function uy(t){Object.entries(t.doc.collection.attachments).forEach(([e,r])=>{Object.defineProperty(t,e,{get:()=>r.bind(t)})})}var JC=function(){function t({doc:r,id:n,type:o,length:i,digest:s}){this.doc=r,this.id=n,this.type=o,this.length=i,this.digest=s,uy(this)}var e=t.prototype;return e.remove=function(){return this.doc.collection.incrementalWriteQueue.addWrite(this.doc._data,n=>(delete n._attachments[this.id],n)).then(()=>{})},e.getData=function(){return U(this,null,function*(){var n=yield this.doc.collection.storageInstance.getAttachmentData(this.doc.primary,this.id,this.digest),o=yield rg(n,this.type);return o})},e.getStringData=function(){return U(this,null,function*(){var n=yield this.getData(),o=yield ng(n);return o})},t}();function Xc(t,e,r){return new JC({doc:r,id:t,type:e.type,length:e.length,digest:e.digest})}function tS(t){return U(this,null,function*(){Gc(this);var e=ig(t.data),r=yield og(t.data),n=yield this.collection.database.hashFunction(r),o=t.id,i=t.type,s=r;return this.collection.incrementalWriteQueue.addWrite(this._data,l=>(l=Dt(l),l._attachments=Dt(l._attachments),l._attachments[o]={length:e,type:i,data:s,digest:n},l)).then(l=>{var d=this.collection._docCache.getCachedRxDocument(l),m=l._attachments[o],p=Xc(o,m,d);return p})})}function eS(t){Gc(this);var e=this._data;if(!e._attachments||!e._attachments[t])return null;var r=e._attachments[t],n=Xc(t,r,this);return n}function rS(){Gc(this);var t=this._data;return t._attachments?Object.keys(t._attachments).map(e=>Xc(e,t._attachments[e],this)):[]}function nS(t){return U(this,null,function*(){var e=t.docData._attachments;if(e){var r={};yield Promise.all(Object.keys(e).map(n=>U(this,null,function*(){var o=e[n],i=t.docData[t.oldCollection.schema.primaryPath],s=yield t.oldCollection.storageInstance.getAttachmentData(i,n,o.digest),l=yield t.oldCollection.database.hashFunction(s);r[n]={length:o.length,type:o.type,data:s,digest:l}}))),t.docData._attachments=r}})}function oS(t){return Dn}var dy={name:"attachments",rxdb:!0,prototypes:{RxDocument:t=>{t.putAttachment=tS,t.getAttachment=eS,t.allAttachments=rS,Object.defineProperty(t,"allAttachments$",{get:function(){return this.$.pipe(dt(r=>Object.entries(r.toJSON(!0)._attachments)),dt(r=>r.map(([n,o])=>Xc(n,o,this))))}})}},overwritable:{},hooks:{preMigrateDocument:{after:nS},postMigrateDocument:{after:oS}}};var hy=["pre","post"],my=["insert","save","remove","create"],fy=!1,Pa=function(){function t(r,n,o,i,s={},l={},d={},m={},p={},y=af,C={},k=pf){this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this.awaitBeforeReads=new Set,this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=Wv(),this.$={},this.checkpoint$={},this._changeEventBuffer={},this.onDestroy=[],this.destroyed=!1,this.onRemove=[],this.database=r,this.name=n,this.schema=o,this.internalStorageInstance=i,this.instanceCreationOptions=s,this.migrationStrategies=l,this.methods=d,this.attachments=m,this.options=p,this.cacheReplacementPolicy=y,this.statics=C,this.conflictHandler=k,iS(this.asRxCollection)}var e=t.prototype;return e.prepare=function(){return U(this,null,function*(){this.storageInstance=qc(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new ey(this.storageInstance,this.schema.primaryPath,(d,m)=>ff(this,d,m),d=>this._runHooks("post","save",d));var n=this.database.eventBulks$.pipe(_t(d=>d.collectionName===this.name));this.$=n.pipe(Ht(d=>d.events)),this.checkpoint$=n.pipe(dt(d=>d.checkpoint)),this._changeEventBuffer=sy(this.asRxCollection);var o;this._docCache=new Qv(this.schema.primaryPath,this.database.eventBulks$.pipe(_t(d=>d.collectionName===this.name&&!d.events[0].isLocal),dt(d=>d.events)),d=>(o||(o=cy(this.asRxCollection)),ly(this.asRxCollection,o,d)));var i=this.database.internalStore.changeStream().pipe(_t(d=>{var m=this.name+"-"+this.schema.version,p=d.events.find(y=>y.documentData.context==="collection"&&y.documentData.key===m&&y.operation==="DELETE");return!!p})).subscribe(()=>U(this,null,function*(){yield this.destroy(),yield Promise.all(this.onRemove.map(d=>d()))}));this._subs.push(i);var s=yield this.database.storageToken,l=this.storageInstance.changeStream().subscribe(d=>{for(var m=new Array(d.events.length),p=d.events,y=this.name,C=It.deepFreezeWhenDevMode,k=0;k<p.length;k++){var N=p[k];m[k]={documentId:N.documentId,collectionName:y,isLocal:!1,operation:N.operation,documentData:C(N.documentData),previousDocumentData:C(N.previousDocumentData)}}var B={id:d.id,internal:!1,collectionName:this.name,storageToken:s,events:m,databaseToken:this.database.token,checkpoint:d.checkpoint,context:d.context,endTime:d.endTime,startTime:d.startTime};this.database.$emit(B)});return this._subs.push(l),this._subs.push(this.storageInstance.conflictResultionTasks().subscribe(d=>{this.conflictHandler(d.input,d.context).then(m=>{this.storageInstance.resolveConflictResultionTask({id:d.id,output:m})})})),Dn})},e.cleanup=function(n){throw Ke(this),St("cleanup")},e.migrationNeeded=function(){throw St("migration-schema")},e.getMigrationState=function(){throw St("migration-schema")},e.startMigration=function(n=10){return Ke(this),this.getMigrationState().startMigration(n)},e.migratePromise=function(n=10){return this.getMigrationState().migratePromise(n)},e.insert=function(n){return U(this,null,function*(){Ke(this);var o=yield this.bulkInsert([n]),i=o.error[0];pi(this,n[this.schema.primaryPath],n,i);var s=Rt(o.success[0]);return s})},e.bulkInsert=function(n){return U(this,null,function*(){if(Ke(this),n.length===0)return{success:[],error:[]};var o=this.schema.primaryPath,i;if(this.hasHooks("pre","insert"))i=yield Promise.all(n.map(B=>{var Y=Ia(this.schema,B);return this._runHooks("pre","insert",Y).then(()=>({document:Y}))}));else{i=new Array(n.length);for(var s=this.schema,l=0;l<n.length;l++){var d=n[l],m=Ia(s,d);i[l]={document:m}}}var p=yield this.storageInstance.bulkWrite(i,"rx-collection-bulk-insert"),y,C=this,k={get success(){if(!y){var B=tr(C.schema.primaryPath,i,p);y=Vc(C._docCache,B)}return y},error:p.error};if(this.hasHooks("post","insert")){var N=new Map;i.forEach(B=>{var Y=B.document;N.set(Y[o],Y)}),yield Promise.all(k.success.map(B=>this._runHooks("post","insert",N.get(B.primary),B)))}return k})},e.bulkRemove=function(n){return U(this,null,function*(){Ke(this);var o=this.schema.primaryPath;if(n.length===0)return{success:[],error:[]};var i=yield this.findByIds(n).exec(),s=[],l=new Map;Array.from(i.values()).forEach(k=>{var N=k.toMutableJSON(!0);s.push(N),l.set(k.primary,N)}),yield Promise.all(s.map(k=>{var N=k[this.schema.primaryPath];return this._runHooks("pre","remove",k,i.get(N))}));var d=s.map(k=>{var N=Dt(k);return N._deleted=!0,{previous:k,document:N}}),m=yield this.storageInstance.bulkWrite(d,"rx-collection-bulk-remove"),p=tr(this.schema.primaryPath,d,m),y=p.map(k=>k[o]);yield Promise.all(y.map(k=>this._runHooks("post","remove",l.get(k),i.get(k))));var C=y.map(k=>An(i,k));return{success:C,error:m.error}})},e.bulkUpsert=function(n){return U(this,null,function*(){Ke(this);var o=[],i=new Map;n.forEach(m=>{var p=Ia(this.schema,m),y=p[this.schema.primaryPath];if(!y)throw L("COL3",{primaryPath:this.schema.primaryPath,data:p,schema:this.schema.jsonSchema});i.set(y,p),o.push(p)});var s=yield this.bulkInsert(o),l=s.success.slice(0),d=[];return yield Promise.all(s.error.map(m=>U(this,null,function*(){if(m.status!==409)d.push(m);else{var p=m.documentId,y=An(i,p),C=Rt(m.documentInDb),k=this._docCache.getCachedRxDocuments([C])[0],N=yield k.incrementalModify(()=>y);l.push(N)}}))),{error:d,success:l}})},e.upsert=function(n){return U(this,null,function*(){Ke(this);var o=yield this.bulkUpsert([n]);return pi(this.asRxCollection,n[this.schema.primaryPath],n,o.error[0]),o.success[0]})},e.incrementalUpsert=function(n){Ke(this);var o=Ia(this.schema,n),i=o[this.schema.primaryPath];if(!i)throw L("COL4",{data:n});var s=this._incrementalUpsertQueues.get(i);return s||(s=Dn),s=s.then(()=>sS(this,i,o)).then(l=>l.inserted?l.doc:aS(l.doc,o)),this._incrementalUpsertQueues.set(i,s),s},e.find=function(n){if(Ke(this),typeof n=="string")throw L("COL5",{queryObj:n});n||(n=ka());var o=mi("find",n,this);return o},e.findOne=function(n){if(Ke(this),typeof n=="number"||Array.isArray(n))throw se("COL6",{queryObj:n});var o;if(typeof n=="string")o=mi("findOne",{selector:{[this.schema.primaryPath]:n},limit:1},this);else{if(n||(n=ka()),n.limit)throw L("QU6");n=Dt(n),n.limit=1,o=mi("findOne",n,this)}return o},e.count=function(n){Ke(this),n||(n=ka());var o=mi("count",n,this);return o},e.findByIds=function(n){Ke(this);var o={selector:{[this.schema.primaryPath]:{$in:n.slice(0)}}},i=mi("findByIds",o,this);return i},e.exportJSON=function(){throw St("json-dump")},e.importJSON=function(n){throw St("json-dump")},e.insertCRDT=function(n){throw St("crdt")},e.addPipeline=function(n){throw St("pipeline")},e.addHook=function(n,o,i,s=!1){if(typeof i!="function")throw se("COL7",{key:o,when:n});if(!hy.includes(n))throw se("COL8",{key:o,when:n});if(!my.includes(o))throw L("COL9",{key:o});if(n==="post"&&o==="create"&&s===!0)throw L("COL10",{when:n,key:o,parallel:s});var l=i.bind(this),d=s?"parallel":"series";this.hooks[o]=this.hooks[o]||{},this.hooks[o][n]=this.hooks[o][n]||{series:[],parallel:[]},this.hooks[o][n][d].push(l)},e.getHooks=function(n,o){return!this.hooks[o]||!this.hooks[o][n]?{series:[],parallel:[]}:this.hooks[o][n]},e.hasHooks=function(n,o){if(!this.hooks[o]||!this.hooks[o][n])return!1;var i=this.getHooks(n,o);return i?i.series.length>0||i.parallel.length>0:!1},e._runHooks=function(n,o,i,s){var l=this.getHooks(n,o);if(!l)return Dn;var d=l.series.map(m=>()=>m(i,s));return gg(d).then(()=>Promise.all(l.parallel.map(m=>m(i,s))))},e._runHooksSync=function(n,o,i,s){if(this.hasHooks(n,o)){var l=this.getHooks(n,o);l&&l.series.forEach(d=>d(i,s))}},e.promiseWait=function(n){var o=new Promise(i=>{var s=setTimeout(()=>{this.timeouts.delete(s),i()},n);this.timeouts.add(s)});return o},e.destroy=function(){return U(this,null,function*(){return this.destroyed?kr:(yield Promise.all(this.onDestroy.map(n=>n())),this.destroyed=!0,Array.from(this.timeouts).forEach(n=>clearTimeout(n)),this._changeEventBuffer&&this._changeEventBuffer.destroy(),this.database.requestIdlePromise().then(()=>this.storageInstance.close()).then(()=>(this._subs.forEach(n=>n.unsubscribe()),delete this.database.collections[this.name],Mn("postDestroyRxCollection",this).then(()=>!0))))})},e.remove=function(){return U(this,null,function*(){yield this.destroy(),yield Promise.all(this.onRemove.map(n=>n())),yield Yc(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.password,this.database.hashFunction)})},Ee(t,[{key:"insert$",get:function(){return this.$.pipe(_t(r=>r.operation==="INSERT"))}},{key:"update$",get:function(){return this.$.pipe(_t(r=>r.operation==="UPDATE"))}},{key:"remove$",get:function(){return this.$.pipe(_t(r=>r.operation==="DELETE"))}},{key:"asRxCollection",get:function(){return this}}])}();function iS(t){if(!fy){fy=!0;var e=Object.getPrototypeOf(t);my.forEach(r=>{hy.map(n=>{var o=n+Js(r);e[o]=function(i,s){return this.addHook(n,r,i,s)}})})}}function aS(t,e){return t.incrementalModify(r=>e)}function sS(t,e,r){var n=t._docCache.getLatestDocumentDataIfExists(e);return n?Promise.resolve({doc:t._docCache.getCachedRxDocuments([n])[0],inserted:!1}):t.findOne(e).exec().then(o=>o?{doc:o,inserted:!1}:t.insert(r).then(i=>({doc:i,inserted:!0})))}function py({database:t,name:e,schema:r,instanceCreationOptions:n={},migrationStrategies:o={},autoMigrate:i=!0,statics:s={},methods:l={},attachments:d={},options:m={},localDocuments:p=!1,cacheReplacementPolicy:y=af,conflictHandler:C=pf}){var k={databaseInstanceToken:t.token,databaseName:t.name,collectionName:e,schema:r.jsonSchema,options:n,multiInstance:t.multiInstance,password:t.password,devMode:It.isDevMode()};return Qt("preCreateRxStorageInstance",k),ay(t,k).then(N=>{var B=new Pa(t,e,r,N,n,o,l,d,m,y,s,C);return B.prepare().then(()=>{Object.entries(s).forEach(([et,nt])=>{Object.defineProperty(B,et,{get:()=>nt.bind(B)})});var Y=Dn;return i&&B.schema.version!==0&&(Y=B.migratePromise()),Y}).then(()=>(Qt("createRxCollection",{collection:B,creator:{name:e,schema:r,storageInstance:N,instanceCreationOptions:n,migrationStrategies:o,methods:l,attachments:d,options:m,cacheReplacementPolicy:y,localDocuments:p,statics:s}}),B)).catch(Y=>N.close().then(()=>Promise.reject(Y)))})}var yf=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this._parallels=e||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};yf.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,vf(this)},wrapCall:function(e){var r=this;this.lock();var n;try{n=e()}catch(o){throw this.unlock(),o}return!n.then||typeof n.then!="function"?(this.unlock(),n):n.then(function(o){return r.unlock(),o}).catch(function(o){throw r.unlock(),o})},requestIdlePromise:function(e){var r=this;e=e||{};var n,o=new Promise(function(l){return n=l}),i=function(){gf(r,o),n()};if(o._manRes=i,e.timeout){var s=setTimeout(function(){o._manRes()},e.timeout);o._timeoutObj=s}return this._iC.add(o),vf(this),o},cancelIdlePromise:function(e){gf(this,e)},requestIdleCallback:function(e,r){var n=this._lHN++,o=this.requestIdlePromise(r);return this._hPM.set(n,o),this._pHM.set(o,n),o.then(function(){return e()}),n},cancelIdleCallback:function(e){var r=this._hPM.get(e);this.cancelIdlePromise(r)},clear:function(){var e=this;this._iC.forEach(function(r){return gf(e,r)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}};function cS(t){if(t._iC.size!==0){var e=t._iC.values(),r=e.next().value;r._manRes(),setTimeout(function(){return vf(t)},0)}}function gf(t,e){if(e){if(e._timeoutObj&&clearTimeout(e._timeoutObj),t._pHM.has(e)){var r=t._pHM.get(e);t._hPM.delete(r),t._pHM.delete(e)}t._iC.delete(e)}}function vf(t){t._tryIR||t._iC.size===0||(t._tryIR=!0,setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}cS(t),t._tryIR=!1},0)},0))}var Fn=class{ttl;map=new Map;_to=!1;constructor(e){this.ttl=e}has(e){return this.map.has(e)}add(e){this.map.set(e,gy()),this._to||(this._to=!0,setTimeout(()=>{this._to=!1,lS(this)},0))}clear(){this.map.clear()}};function lS(t){let e=gy()-t.ttl,r=t.map[Symbol.iterator]();for(;;){let n=r.next().value;if(!n)return;let o=n[0];if(n[1]<e)t.map.delete(o);else return}}function gy(){return Date.now()}var Zc=new Set,vy=0,Ma=function(){function t(r,n,o,i,s,l,d=!1,m={},p,y,C,k,N){this.idleQueue=new yf,this.rxdbVersion=mo,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onDestroy=[],this.destroyed=!1,this.collections={},this.states={},this.eventBulks$=new at,this.observable$=this.eventBulks$.pipe(Ht(B=>B.events)),this.storageToken=kr,this.storageTokenDocument=kr,this.emittedEventBulkIds=new Fn(60*1e3),this.name=r,this.token=n,this.storage=o,this.instanceCreationOptions=i,this.password=s,this.multiInstance=l,this.eventReduce=d,this.options=m,this.internalStore=p,this.hashFunction=y,this.cleanupPolicy=C,this.allowSlowCount=k,this.reactivity=N,vy++,this.name!=="pseudoInstance"&&(this.internalStore=qc(this.asRxDatabase,p,Hc),this.storageTokenDocument=iy(this.asRxDatabase).catch(B=>this.startupErrors.push(B)),this.storageToken=this.storageTokenDocument.then(B=>B.data.token).catch(B=>this.startupErrors.push(B)))}var e=t.prototype;return e.getReactivityFactory=function(){if(!this.reactivity)throw L("DB14",{database:this.name});return this.reactivity},e.$emit=function(n){this.emittedEventBulkIds.has(n.id)||(this.emittedEventBulkIds.add(n.id),this.eventBulks$.next(n))},e.removeCollectionDoc=function(n,o){return U(this,null,function*(){var i=yield uf(this.internalStore,Kc(mf(n,o),gi));if(!i)throw L("SNH",{name:n,schema:o});var s=bo(i);s._deleted=!0,yield this.internalStore.bulkWrite([{document:s,previous:i}],"rx-database-remove-collection")})},e.addCollections=function(n){return U(this,null,function*(){var o={},i={},s=[],l={};yield Promise.all(Object.entries(n).map(C=>U(this,[C],function*([p,y]){var k=p,N=y.schema;o[k]=N;var B=kg(N,this.hashFunction);if(i[k]=B,this.collections[p])throw L("DB3",{name:p});var Y=mf(p,N),et={id:Kc(Y,gi),key:Y,context:gi,data:{name:k,schemaHash:yield B.hash,schema:B.jsonSchema,version:B.version,connectedStorages:[]},_deleted:!1,_meta:On(),_rev:Yr(),_attachments:{}};s.push({document:et});var nt=Object.assign({},y,{name:k,schema:B,database:this}),J=Dt(y);J.database=this,J.name=p,Qt("preCreateRxCollection",J),nt.conflictHandler=J.conflictHandler,l[k]=nt})));var d=yield this.internalStore.bulkWrite(s,"rx-database-add-collection");yield fS(this),yield Promise.all(d.error.map(p=>U(this,null,function*(){if(p.status!==409)throw L("DB12",{database:this.name,writeError:p});var y=Rt(p.documentInDb),C=y.data.name,k=i[C];if(y.data.schemaHash!==(yield k.hash))throw L("DB6",{database:this.name,collection:C,previousSchemaHash:y.data.schemaHash,schemaHash:yield k.hash,previousSchema:y.data.schema,schema:Rt(o[C])})})));var m={};return yield Promise.all(Object.keys(n).map(p=>U(this,null,function*(){var y=l[p],C=yield py(y);m[p]=C,this.collections[p]=C,this[p]||Object.defineProperty(this,p,{get:()=>this.collections[p]})}))),m})},e.lockedRun=function(n){return this.idleQueue.wrapCall(n)},e.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},e.exportJSON=function(n){throw St("json-dump")},e.addState=function(n){throw St("state")},e.importJSON=function(n){throw St("json-dump")},e.backup=function(n){throw St("backup")},e.leaderElector=function(){throw St("leader-election")},e.isLeader=function(){throw St("leader-election")},e.waitForLeadership=function(){throw St("leader-election")},e.migrationStates=function(){throw St("migration-schema")},e.destroy=function(){return U(this,null,function*(){return this.destroyed?kr:(this.destroyed=!0,yield Mn("preDestroyRxDatabase",this),this.eventBulks$.complete(),vy--,this._subs.map(n=>n.unsubscribe()),this.name==="pseudoInstance"?kr:this.requestIdlePromise().then(()=>Promise.all(this.onDestroy.map(n=>n()))).then(()=>Promise.all(Object.keys(this.collections).map(n=>this.collections[n]).map(n=>n.destroy()))).then(()=>this.internalStore.close()).then(()=>Zc.delete(this.storage.name+"|"+this.name)).then(()=>!0))})},e.remove=function(){return this.destroy().then(()=>dS(this.name,this.storage,this.password))},Ee(t,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}])}();function uS(t,e){var r=e.name+"|"+t;if(Zc.has(r))throw L("DB8",{name:t,storage:e.name,link:"https://rxdb.info/rx-database.html#ignoreduplicate"})}function yy(t,e,r,n,o,i){return U(this,null,function*(){var s=yield e.createStorageInstance({databaseInstanceToken:t,databaseName:r,collectionName:Xv,schema:Hc,options:n,multiInstance:o,password:i,devMode:It.isDevMode()});return s})}function by({storage:t,instanceCreationOptions:e,name:r,password:n,multiInstance:o=!0,eventReduce:i=!0,ignoreDuplicate:s=!1,options:l={},cleanupPolicy:d,allowSlowCount:m=!1,localDocuments:p=!1,hashFunction:y=ni,reactivity:C}){Qt("preCreateRxDatabase",{storage:t,instanceCreationOptions:e,name:r,password:n,multiInstance:o,eventReduce:i,ignoreDuplicate:s,options:l,localDocuments:p}),s||uS(r,t),Zc.add(t.name+"|"+r);var k=ho(10);return yy(k,t,r,e,o,n).catch(N=>{throw Zc.delete(t.name+"|"+r),N}).then(N=>{var B=new Ma(r,k,t,e,n,o,i,l,N,y,d,m,C);return Mn("createRxDatabase",{database:B,creator:{storage:t,instanceCreationOptions:e,name:r,password:n,multiInstance:o,eventReduce:i,ignoreDuplicate:s,options:l,localDocuments:p}}).then(()=>B)})}function dS(t,e,r){return U(this,null,function*(){var n=ho(10),o=yield yy(n,e,t,{},!1,r),i=yield Qc(o),s=new Set;i.forEach(d=>s.add(d.data.name));var l=Array.from(s);return yield Promise.all(l.map(d=>Yc(e,o,n,t,d,r))),yield Mn("postRemoveRxDatabase",{databaseName:t,storage:e}),yield o.remove(),l})}function fS(t){return U(this,null,function*(){if(yield t.storageToken,t.startupErrors[0])throw t.startupErrors[0]})}var hS={RxSchema:Cd.prototype,RxDocument:$n,RxQuery:cf.prototype,RxCollection:Pa.prototype,RxDatabase:Ma.prototype},bf=new Set,_y=new Set;function Jc(t){if(Qt("preAddRxPlugin",{plugin:t,plugins:bf}),!bf.has(t)){{if(_y.has(t.name))throw L("PL3",{name:t.name,plugin:t});bf.add(t),_y.add(t.name)}if(!t.rxdb)throw se("PL1",{plugin:t});t.init&&t.init(),t.prototypes&&Object.entries(t.prototypes).forEach(([e,r])=>r(hS[e])),t.overwritable&&Object.assign(It,t.overwritable),t.hooks&&Object.entries(t.hooks).forEach(([e,r])=>{r.after&&ii[e].push(r.after),r.before&&ii[e].unshift(r.before)})}}function xy(t){return t&&typeof t.then=="function"}var mS=Promise.resolve(!1),nK=Promise.resolve(!0),Tr=Promise.resolve();function tl(t,e){return t||(t=0),new Promise(function(r){return setTimeout(function(){return r(e)},t)})}function wy(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function Ta(){return Math.random().toString(36).substring(2)}var _f=0;function Jr(){var t=Date.now()*1e3;return t<=_f&&(t=_f+1),_f=t,t}var pS=Jr,gS="native";function vS(t){var e={time:Jr(),messagesCallback:null,bc:new BroadcastChannel(t),subFns:[]};return e.bc.onmessage=function(r){e.messagesCallback&&e.messagesCallback(r.data)},e}function yS(t){t.bc.close(),t.subFns=[]}function bS(t,e){try{return t.bc.postMessage(e,!1),Tr}catch(r){return Promise.reject(r)}}function _S(t,e){t.messagesCallback=e}function xS(){if(typeof globalThis<"u"&&globalThis.Deno&&globalThis.Deno.args)return!0;if((typeof window<"u"||typeof self<"u")&&typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function wS(){return 150}var Cy={create:vS,close:yS,onMessage:_S,postMessage:bS,canBeUsed:xS,type:gS,averageResponseTime:wS,microSeconds:pS};function vi(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=JSON.parse(JSON.stringify(t));return typeof e.webWorkerSupport>"u"&&(e.webWorkerSupport=!0),e.idb||(e.idb={}),e.idb.ttl||(e.idb.ttl=1e3*45),e.idb.fallbackInterval||(e.idb.fallbackInterval=150),t.idb&&typeof t.idb.onclose=="function"&&(e.idb.onclose=t.idb.onclose),e.localstorage||(e.localstorage={}),e.localstorage.removeTimeout||(e.localstorage.removeTimeout=1e3*60),t.methods&&(e.methods=t.methods),e.node||(e.node={}),e.node.ttl||(e.node.ttl=1e3*60*2),e.node.maxParallelWrites||(e.node.maxParallelWrites=2048),typeof e.node.useFastPath>"u"&&(e.node.useFastPath=!0),e}var CS=Jr,SS="pubkey.broadcast-channel-0-",tn="messages",el={durability:"relaxed"},RS="idb";function Sy(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function xf(t){t.commit&&t.commit()}function OS(t){var e=Sy(),r=SS+t,n=e.open(r);return n.onupgradeneeded=function(o){var i=o.target.result;i.createObjectStore(tn,{keyPath:"id",autoIncrement:!0})},new Promise(function(o,i){n.onerror=function(s){return i(s)},n.onsuccess=function(){o(n.result)}})}function ES(t,e,r){var n=Date.now(),o={uuid:e,time:n,data:r},i=t.transaction([tn],"readwrite",el);return new Promise(function(s,l){i.oncomplete=function(){return s()},i.onerror=function(m){return l(m)};var d=i.objectStore(tn);d.add(o),xf(i)})}function DS(t,e){var r=t.transaction(tn,"readonly",el),n=r.objectStore(tn),o=[],i=IDBKeyRange.bound(e+1,1/0);if(n.getAll){var s=n.getAll(i);return new Promise(function(d,m){s.onerror=function(p){return m(p)},s.onsuccess=function(p){d(p.target.result)}})}function l(){try{return i=IDBKeyRange.bound(e+1,1/0),n.openCursor(i)}catch{return n.openCursor()}}return new Promise(function(d,m){var p=l();p.onerror=function(y){return m(y)},p.onsuccess=function(y){var C=y.target.result;C?C.value.id<e+1?C.continue(e+1):(o.push(C.value),C.continue()):(xf(r),d(o))}})}function kS(t,e){if(t.closed)return Promise.resolve([]);var r=t.db.transaction(tn,"readwrite",el),n=r.objectStore(tn);return Promise.all(e.map(function(o){var i=n.delete(o);return new Promise(function(s){i.onsuccess=function(){return s()}})}))}function AS(t,e){var r=Date.now()-e,n=t.transaction(tn,"readonly",el),o=n.objectStore(tn),i=[];return new Promise(function(s){o.openCursor().onsuccess=function(l){var d=l.target.result;if(d){var m=d.value;m.time<r?(i.push(m),d.continue()):(xf(n),s(i))}else s(i)}})}function IS(t){return AS(t.db,t.options.idb.ttl).then(function(e){return kS(t,e.map(function(r){return r.id}))})}function PS(t,e){return e=vi(e),OS(t).then(function(r){var n={closed:!1,lastCursorId:0,channelName:t,options:e,uuid:Ta(),eMIs:new Fn(e.idb.ttl*2),writeBlockPromise:Tr,messagesCallback:null,readQueuePromises:[],db:r};return r.onclose=function(){n.closed=!0,e.idb.onclose&&e.idb.onclose()},Ry(n),n})}function Ry(t){t.closed||Oy(t).then(function(){return tl(t.options.idb.fallbackInterval)}).then(function(){return Ry(t)})}function MS(t,e){return!(t.uuid===e.uuid||e.eMIs.has(t.id)||t.data.time<e.messagesCallbackTime)}function Oy(t){return t.closed?Tr:t.messagesCallback?DS(t.db,t.lastCursorId).then(function(e){var r=e.filter(function(n){return!!n}).map(function(n){return n.id>t.lastCursorId&&(t.lastCursorId=n.id),n}).filter(function(n){return MS(n,t)}).sort(function(n,o){return n.time-o.time});return r.forEach(function(n){t.messagesCallback&&(t.eMIs.add(n.id),t.messagesCallback(n.data))}),Tr}):Tr}function TS(t){t.closed=!0,t.db.close()}function NS(t,e){return t.writeBlockPromise=t.writeBlockPromise.then(function(){return ES(t.db,t.uuid,e)}).then(function(){wy(0,10)===0&&IS(t)}),t.writeBlockPromise}function LS(t,e,r){t.messagesCallbackTime=r,t.messagesCallback=e,Oy(t)}function $S(){return!!Sy()}function FS(t){return t.idb.fallbackInterval*2}var Ey={create:PS,close:TS,onMessage:LS,postMessage:NS,canBeUsed:$S,type:RS,averageResponseTime:FS,microSeconds:CS};var BS=Jr,jS="pubkey.broadcastChannel-",US="localstorage";function Dy(){var t;if(typeof window>"u")return null;try{t=window.localStorage,t=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return t}function ky(t){return jS+t}function zS(t,e){return new Promise(function(r){tl().then(function(){var n=ky(t.channelName),o={token:Ta(),time:Date.now(),data:e,uuid:t.uuid},i=JSON.stringify(o);Dy().setItem(n,i);var s=document.createEvent("Event");s.initEvent("storage",!0,!0),s.key=n,s.newValue=i,window.dispatchEvent(s),r()})})}function VS(t,e){var r=ky(t),n=function(i){i.key===r&&e(JSON.parse(i.newValue))};return window.addEventListener("storage",n),n}function qS(t){window.removeEventListener("storage",t)}function WS(t,e){if(e=vi(e),!Ay())throw new Error("BroadcastChannel: localstorage cannot be used");var r=Ta(),n=new Fn(e.localstorage.removeTimeout),o={channelName:t,uuid:r,eMIs:n};return o.listener=VS(t,function(i){o.messagesCallback&&i.uuid!==r&&(!i.token||n.has(i.token)||i.data.time&&i.data.time<o.messagesCallbackTime||(n.add(i.token),o.messagesCallback(i.data)))}),o}function HS(t){qS(t.listener)}function KS(t,e,r){t.messagesCallbackTime=r,t.messagesCallback=e}function Ay(){var t=Dy();if(!t)return!1;try{var e="__broadcastchannel_check";t.setItem(e,"works"),t.removeItem(e)}catch{return!1}return!0}function QS(){var t=120,e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?t*2:t}var Iy={create:WS,close:HS,onMessage:KS,postMessage:zS,canBeUsed:Ay,type:US,averageResponseTime:QS,microSeconds:BS};var Py=Jr,YS="simulate",wf=new Set;function GS(t){var e={time:Py(),name:t,messagesCallback:null};return wf.add(e),e}function XS(t){wf.delete(t)}var My=5;function ZS(t,e){return new Promise(function(r){return setTimeout(function(){var n=Array.from(wf);n.forEach(function(o){o.name===t.name&&o!==t&&o.messagesCallback&&o.time<e.time&&o.messagesCallback(e)}),r()},My)})}function JS(t,e){t.messagesCallback=e}function tR(){return!0}function eR(){return My}var Ty={create:GS,close:XS,onMessage:JS,postMessage:ZS,canBeUsed:tR,type:YS,averageResponseTime:eR,microSeconds:Py};var Ny=[Cy,Ey,Iy];function Ly(t){var e=[].concat(t.methods,Ny).filter(Boolean);if(t.type){if(t.type==="simulate")return Ty;var r=e.find(function(o){return o.type===t.type});if(r)return r;throw new Error("method-type "+t.type+" not found")}t.webWorkerSupport||(e=e.filter(function(o){return o.type!=="idb"}));var n=e.find(function(o){return o.canBeUsed()});if(n)return n;throw new Error("No usable method found in "+JSON.stringify(Ny.map(function(o){return o.type})))}var Cf=new Set,rR=0,Na=function(e,r){this.id=rR++,Cf.add(this),this.name=e,$y&&(r=$y),this.options=vi(r),this.method=Ly(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,nR(this)};Na._pubkey=!0;var $y;Na.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(e));return Fy(this,"message",e)},postInternal:function(e){return Fy(this,"internal",e)},set onmessage(t){var e=this.method.microSeconds(),r={time:e,fn:t};jy(this,"message",this._onML),t&&typeof t=="function"?(this._onML=r,By(this,"message",r)):this._onML=null},addEventListener:function(e,r){var n=this.method.microSeconds(),o={time:n,fn:r};By(this,e,o)},removeEventListener:function(e,r){var n=this._addEL[e].find(function(o){return o.fn===r});jy(this,e,n)},close:function(){var e=this;if(!this.closed){Cf.delete(this),this.closed=!0;var r=this._prepP?this._prepP:Tr;return this._onML=null,this._addEL.message=[],r.then(function(){return Promise.all(Array.from(e._uMP))}).then(function(){return Promise.all(e._befC.map(function(n){return n()}))}).then(function(){return e.method.close(e._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function Fy(t,e,r){var n=t.method.microSeconds(),o={time:n,type:e,data:r},i=t._prepP?t._prepP:Tr;return i.then(function(){var s=t.method.postMessage(t._state,o);return t._uMP.add(s),s.catch().then(function(){return t._uMP.delete(s)}),s})}function nR(t){var e=t.method.create(t.name,t.options);xy(e)?(t._prepP=e,e.then(function(r){t._state=r})):t._state=e}function Uy(t){return t._addEL.message.length>0||t._addEL.internal.length>0}function By(t,e,r){t._addEL[e].push(r),oR(t)}function jy(t,e,r){t._addEL[e]=t._addEL[e].filter(function(n){return n!==r}),iR(t)}function oR(t){if(!t._iL&&Uy(t)){var e=function(o){t._addEL[o.type].forEach(function(i){o.time>=i.time&&i.fn(o.data)})},r=t.method.microSeconds();t._prepP?t._prepP.then(function(){t._iL=!0,t.method.onMessage(t._state,e,r)}):(t._iL=!0,t.method.onMessage(t._state,e,r))}}function iR(t){if(t._iL&&!Uy(t)){t._iL=!1;var e=t.method.microSeconds();t.method.onMessage(t._state,null,e)}}var rl=new Map;function aR(t,e,r,n){var o=rl.get(e);return o||(o={bc:new Na(["RxDB:",t,r].join("|")),refs:new Set},rl.set(e,o)),o.refs.add(n),o.bc}function zy(t,e){var r=rl.get(t);if(r&&(r.refs.delete(e),r.refs.size===0))return rl.delete(t),r.bc.close()}function Vy(t,e,r,n){if(e.multiInstance){var o=n||aR(t,e.databaseInstanceToken,r.databaseName,r),i=new at,s=C=>{C.storageName===t&&C.databaseName===e.databaseName&&C.collectionName===e.collectionName&&C.version===e.schema.version&&i.next(C.eventBulk)};o.addEventListener("message",s);var l=r.changeStream(),d=!1,m=l.subscribe(C=>{d||o.postMessage({storageName:t,databaseName:e.databaseName,collectionName:e.collectionName,version:e.schema.version,eventBulk:C})});r.changeStream=function(){return i.asObservable().pipe(Kh(l))};var p=r.close.bind(r);r.close=function(){return U(this,null,function*(){return d=!0,m.unsubscribe(),o.removeEventListener("message",s),n||(yield zy(e.databaseInstanceToken,r)),p()})};var y=r.remove.bind(r);r.remove=function(){return U(this,null,function*(){return d=!0,m.unsubscribe(),o.removeEventListener("message",s),n||(yield zy(e.databaseInstanceToken,r)),y()})}}}var Sf={UT1:"given name is no string or empty",UT2:`collection- and database-names must match the regex to be compatible with couchdb databases.
    See https://neighbourhood.ie/blog/2020/10/13/everything-you-need-to-know-about-couchdb-database-names/
    info: if your database-name specifies a folder, the name must contain the slash-char '/' or '\\'`,UT3:"replication-direction must either be push or pull or both. But not none",UT4:"given leveldown is no valid adapter",UT5:"keyCompression is set to true in the schema but no key-compression handler is used in the storage",UT6:"schema contains encrypted fields but no encryption handler is used in the storage",UT7:"attachments.compression is enabled but no attachment-compression plugin is used",PL1:"Given plugin is not RxDB plugin.",PL3:"A plugin with the same name was already added but it was not the exact same JavaScript object",P2:"bulkWrite() cannot be called with an empty array",QU1:"RxQuery._execOverDatabase(): op not known",QU4:"RxQuery.regex(): You cannot use .regex() on the primary field",QU5:"RxQuery.sort(): does not work because key is not defined in the schema",QU6:"RxQuery.limit(): cannot be called on .findOne()",QU9:"throwIfMissing can only be used in findOne queries",QU10:"result empty and throwIfMissing: true",QU11:"RxQuery: no valid query params given",QU12:"Given index is not in schema",QU13:"A top level field of the query is not included in the schema",QU14:"Running a count() query in slow mode is now allowed. Either run a count() query with a selector that fully matches an index or set allowSlowCount=true when calling the createRxDatabase",QU15:"For count queries it is not allowed to use skip or limit",QU16:"$regex queries must be defined by a string, not an RegExp instance. This is because RegExp objects cannot be JSON stringified and also they are mutable which would be dangerous",QU17:"Chained queries cannot be used on findByIds() RxQuery instances",QU18:"Malformated query result data. This likely happens because you create a OPFS-storage RxDatabase inside of a worker but did not set the usesRxDatabaseInWorker setting. https://rxdb.info/rx-storage-opfs.html#setting-usesrxdatabaseinworker-when-a-rxdatabase-is-also-used-inside-of-the-worker ",MQ1:"path must be a string or object",MQ2:"Invalid argument",MQ3:"Invalid sort() argument. Must be a string, object, or array",MQ4:"Invalid argument. Expected instanceof mquery or plain object",MQ5:"method must be used after where() when called with these arguments",MQ6:"Can't mix sort syntaxes. Use either array or object | .sort([['field', 1], ['test', -1]]) | .sort({ field: 1, test: -1 })",MQ7:"Invalid sort value",MQ8:"Can't mix sort syntaxes. Use either array or object",DB1:"RxDocument.prepare(): another instance on this adapter has a different password",DB2:"RxDatabase.addCollections(): collection-names cannot start with underscore _",DB3:"RxDatabase.addCollections(): collection already exists. use myDatabase[collectionName] to get it",DB4:"RxDatabase.addCollections(): schema is missing",DB5:"RxDatabase.addCollections(): collection-name not allowed",DB6:"RxDatabase.addCollections(): another instance created this collection with a different schema. Read this https://rxdb.info/questions-answers.html?console=qa#cant-change-the-schema ",DB8:`createRxDatabase(): A RxDatabase with the same name and adapter already exists.
Make sure to use this combination only once or set ignoreDuplicate to true if you do this intentional-
This often happens in react projects with hot reload that reloads the code without reloading the process.`,DB11:"createRxDatabase(): Invalid db-name, folder-paths must not have an ending slash",DB12:"RxDatabase.addCollections(): could not write to internal store",DB13:"createRxDatabase(): Invalid db-name or collection name, name contains the dollar sign",DB14:"no custom reactivity factory added on database creation",COL1:"RxDocument.insert() You cannot insert an existing document",COL2:"RxCollection.insert() fieldName ._id can only be used as primaryKey",COL3:"RxCollection.upsert() does not work without primary",COL4:"RxCollection.incrementalUpsert() does not work without primary",COL5:"RxCollection.find() if you want to search by _id, use .findOne(_id)",COL6:"RxCollection.findOne() needs a queryObject or string",COL7:"hook must be a function",COL8:"hooks-when not known",COL9:"RxCollection.addHook() hook-name not known",COL10:"RxCollection .postCreate-hooks cannot be async",COL11:"migrationStrategies must be an object",COL12:"A migrationStrategy is missing or too much",COL13:"migrationStrategy must be a function",COL14:"given static method-name is not a string",COL15:"static method-names cannot start with underscore _",COL16:"given static method is not a function",COL17:"RxCollection.ORM: statics-name not allowed",COL18:"collection-method not allowed because fieldname is in the schema",COL20:"Storage write error",COL21:"The RxCollection is destroyed or removed already, either from this JavaScript realm or from another, like a browser tab",CONFLICT:"Document update conflict. When changing a document you must work on the previous revision",DOC1:"RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed",DOC2:"cannot observe primary path",DOC3:"final fields cannot be observed",DOC4:"RxDocument.get$ cannot observe a non-existed field",DOC5:"RxDocument.populate() cannot populate a non-existed field",DOC6:"RxDocument.populate() cannot populate because path has no ref",DOC7:"RxDocument.populate() ref-collection not in database",DOC8:"RxDocument.set(): primary-key cannot be modified",DOC9:"final fields cannot be modified",DOC10:"RxDocument.set(): cannot set childpath when rootPath not selected",DOC11:"RxDocument.save(): can't save deleted document",DOC13:"RxDocument.remove(): Document is already deleted",DOC14:"RxDocument.destroy() does not exist",DOC15:"query cannot be an array",DOC16:"Since version 8.0.0 RxDocument.set() can only be called on temporary RxDocuments",DOC17:"Since version 8.0.0 RxDocument.save() can only be called on non-temporary documents",DOC18:"Document property for composed primary key is missing",DOC19:"Value of primary key(s) cannot be changed",DOC20:"PrimaryKey missing",DOC21:"PrimaryKey must be equal to PrimaryKey.trim(). It cannot start or end with a whitespace",DOC22:"PrimaryKey must not contain a linebreak",DOC23:'PrimaryKey must not contain a double-quote ["]',DOC24:"Given document data could not be structured cloned. This happens if you pass non-plain-json data into it, like a Date() object or a Function. In vue.js this happens if you use ref() on the document data which transforms it into a Proxy object.",DM1:"migrate() Migration has already run",DM2:"migration of document failed final document does not match final schema",DM3:"migration already running",DM4:"Migration errored",DM5:"Cannot open database state with newer RxDB version. You have to migrate your database state first. See https://rxdb.info/migration-storage.html?console=storage ",AT1:"to use attachments, please define this in your schema",EN1:"password is not valid",EN2:"validatePassword: min-length of password not complied",EN3:"Schema contains encrypted properties but no password is given",EN4:"Password not valid",JD1:"You must create the collections before you can import their data",JD2:"RxCollection.importJSON(): the imported json relies on a different schema",JD3:"RxCollection.importJSON(): json.passwordHash does not match the own",LD1:"RxDocument.allAttachments$ can't use attachments on local documents",LD2:"RxDocument.get(): objPath must be a string",LD3:"RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed",LD4:"cannot observe primary path",LD5:"RxDocument.set() id cannot be modified",LD6:"LocalDocument: Function is not usable on local documents",LD7:"Local document already exists",LD8:"localDocuments not activated. Set localDocuments=true on creation, when you want to store local documents on the RxDatabase or RxCollection.",RC1:"Replication: already added",RC2:"replicateCouchDB() query must be from the same RxCollection",RC4:"RxCouchDBReplicationState.awaitInitialReplication() cannot await initial replication when live: true",RC5:"RxCouchDBReplicationState.awaitInitialReplication() cannot await initial replication if multiInstance because the replication might run on another instance",RC6:"syncFirestore() serverTimestampField MUST NOT be part of the collections schema and MUST NOT be nested.",RC7:"SimplePeer requires to have process.nextTick() polyfilled, see https://rxdb.info/replication-webrtc.html?console=webrtc ",RC_PULL:"RxReplication pull handler threw an error - see .errors for more details",RC_STREAM:"RxReplication pull stream$ threw an error - see .errors for more details",RC_PUSH:"RxReplication push handler threw an error - see .errors for more details",RC_PUSH_NO_AR:"RxReplication push handler did not return an array with the conflicts",RC_WEBRTC_PEER:"RxReplication WebRTC Peer has error",RC_COUCHDB_1:"replicateCouchDB() url must end with a slash like 'https://example.com/mydatabase/'",RC_COUCHDB_2:"replicateCouchDB() did not get valid result with rows.",RC_OUTDATED:"Outdated client, update required. Replication was canceled",RC_UNAUTHORIZED:"Unauthorized client, update the replicationState.headers to set correct auth data",RC_FORBIDDEN:"Client behaves wrong so the replication was canceled. Mostly happens if the client tries to write data that it is not allowed to",SC1:"fieldnames do not match the regex",SC2:"SchemaCheck: name 'item' reserved for array-fields",SC3:"SchemaCheck: fieldname has a ref-array but items-type is not string",SC4:"SchemaCheck: fieldname has a ref but is not type string, [string,null] or array<string>",SC6:"SchemaCheck: primary can only be defined at top-level",SC7:"SchemaCheck: default-values can only be defined at top-level",SC8:"SchemaCheck: first level-fields cannot start with underscore _",SC10:"SchemaCheck: schema defines ._rev, this will be done automatically",SC11:"SchemaCheck: schema needs a number >=0 as version",SC13:"SchemaCheck: primary is always index, do not declare it as index",SC14:"SchemaCheck: primary is always unique, do not declare it as index",SC15:"SchemaCheck: primary cannot be encrypted",SC16:"SchemaCheck: primary must have type: string",SC17:"SchemaCheck: top-level fieldname is not allowed",SC18:"SchemaCheck: indexes must be an array",SC19:"SchemaCheck: indexes must contain strings or arrays of strings",SC20:"SchemaCheck: indexes.array must contain strings",SC21:"SchemaCheck: given index is not defined in schema",SC22:"SchemaCheck: given indexKey is not type:string",SC23:"SchemaCheck: fieldname is not allowed",SC24:"SchemaCheck: required fields must be set via array. See https://spacetelescope.github.io/understanding-json-schema/reference/object.html#required",SC25:"SchemaCheck: compoundIndexes needs to be specified in the indexes field",SC26:"SchemaCheck: indexes needs to be specified at collection schema level",SC27:"SchemaCheck: encrypted fields need to be specified at collection schema level",SC28:"SchemaCheck: encrypted fields is not defined in the schema",SC29:"SchemaCheck: missing object key 'properties'",SC30:"SchemaCheck: primaryKey is required",SC32:"SchemaCheck: primary field must have the type string/number/integer",SC33:"SchemaCheck: used primary key is not a property in the schema",SC34:"Fields of type string that are used in an index, must have set the maxLength attribute in the schema",SC35:"Fields of type number/integer that are used in an index, must have set the multipleOf attribute in the schema",SC36:"A field of this type cannot be used as index",SC37:"Fields of type number that are used in an index, must have set the minimum and maximum attribute in the schema",SC38:"Fields of type boolean that are used in an index, must be required in the schema",SC39:"The primary key must have the maxLength attribute set",SC40:"$ref fields in the schema are not allowed. RxDB cannot resolve related schemas because it would have a negative performance impact.It would have to run http requests on runtime. $ref fields should be resolved during build time.",SC41:"minimum, maximum and maxLength values for indexes must be real numbers, not Infinity or -Infinity",VD1:"Sub-schema not found, does the schemaPath exists in your schema?",VD2:"object does not match schema",S1:"You cannot create collections after calling RxDatabase.server()",GQL1:"GraphQL replication: cannot find sub schema by key",GQL3:"GraphQL replication: pull returns more documents then batchSize",CRDT1:"CRDT operations cannot be used because the crdt options are not set in the schema.",CRDT2:"RxDocument.incrementalModify() cannot be used when CRDTs are activated.",CRDT3:"To use CRDTs you MUST NOT set a conflictHandler because the default CRDT conflict handler must be used",SNH:"This should never happen"};var Rf;function qy(){if(!Rf){var t=new Pa,e=Object.getOwnPropertyNames(t),r=Object.getOwnPropertyNames(Object.getPrototypeOf(t));Rf=[...e,...r]}return Rf}var Of;function Wy(){if(!Of){var t=new Ma("pseudoInstance","memory"),e=Object.getOwnPropertyNames(t),r=Object.getOwnPropertyNames(Object.getPrototypeOf(t));Of=[...e,...r],t.destroy()}return Of}var sR=Wc($n),cR=new sR,Ef;function nl(){if(!Ef){var t=["deleted","synced"],e=Object.getOwnPropertyNames(cR),r=Object.getOwnPropertyNames($n);Ef=[...e,...r,...t]}return Ef}function lR(t){if(t!=="_deleted"){if(["properties"].includes(t))throw L("SC23",{fieldName:t});var e="^[a-zA-Z](?:[[a-zA-Z0-9_]*]?[a-zA-Z0-9])?$",r=new RegExp(e);if(t!=="_id"&&!t.match(r))throw L("SC1",{regex:e,fieldName:t})}}function uR(t){var e=pe(t.primaryKey);function r(o,i,s){if(typeof o=="string"&&typeof i=="object"&&!Array.isArray(i)&&s.split(".").pop()!=="patternProperties"&&lR(o),Object.prototype.hasOwnProperty.call(i,"item")&&i.type!=="array")throw L("SC2",{fieldName:o});if(Object.prototype.hasOwnProperty.call(i,"required")&&typeof i.required=="boolean")throw L("SC24",{fieldName:o});if(Object.prototype.hasOwnProperty.call(i,"$ref"))throw L("SC40",{fieldName:o});if(Object.prototype.hasOwnProperty.call(i,"ref"))if(Array.isArray(i.type)){if(i.type.length>2||!i.type.includes("string")||!i.type.includes("null"))throw L("SC4",{fieldName:o})}else switch(i.type){case"string":break;case"array":if(!i.items||!i.items.type||i.items.type!=="string")throw L("SC3",{fieldName:o});break;default:throw L("SC4",{fieldName:o})}var l=s.split(".").length>=2;if(l&&i.default)throw L("SC7",{path:s});if(!l){if(o==="_id"&&e!=="_id")throw L("COL2",{fieldName:o});if(o.charAt(0)==="_"){if(o==="_id"||o==="_deleted")return;throw L("SC8",{fieldName:o})}}}function n(o,i){!o||typeof o!="object"||Object.keys(o).forEach(s=>{var l=o[s];!o.properties&&l&&typeof l=="object"&&!Array.isArray(o)&&r(s,l,i);var d=i;s!=="properties"&&(d=d+"."+s),n(l,d)})}return n(t,""),!0}function dR(t){if(!t.primaryKey)throw L("SC30",{schema:t});function e(d){if(!d)throw L("SC33",{schema:t});var m=d.type;if(!m||!["string","number","integer"].includes(m))throw L("SC32",{schema:t,args:{schemaPart:d}})}if(typeof t.primaryKey=="string"){var r=t.primaryKey,n=t.properties[r];e(n)}else{var o=t.primaryKey,i=Te(t,o.key);e(i),o.fields.forEach(d=>{var m=Te(t,d);e(m)})}var s=pe(t.primaryKey),l=t.properties[s];if(l.maxLength){if(!isFinite(l.maxLength))throw L("SC41",{schema:t,args:{primaryPathSchemaPart:l}})}else throw L("SC39",{schema:t,args:{primaryPathSchemaPart:l}})}function Hy(t){for(var e=t.split("."),r="",n=0;n<e.length;n+=1)e[n]!=="[]"?r=r.concat(".properties.".concat(e[n])):r=r.concat(".items");return dr(r)}function Ky(t){if(!t.primaryKey)throw L("SC30",{schema:t});if(!Object.prototype.hasOwnProperty.call(t,"properties"))throw L("SC29",{schema:t});if(t.properties._rev)throw L("SC10",{schema:t});if(!Object.prototype.hasOwnProperty.call(t,"version")||typeof t.version!="number"||t.version<0)throw L("SC11",{version:t.version});if(uR(t),dR(t),Object.keys(t.properties).forEach(e=>{var r=t.properties[e];if(e===t.primaryKey){if(t.indexes&&t.indexes.includes(e))throw L("SC13",{value:r,schema:t});if(r.unique)throw L("SC14",{value:r,schema:t});if(t.encrypted&&t.encrypted.includes(e))throw L("SC15",{value:r,schema:t});if(r.type!=="string")throw L("SC16",{value:r,schema:t})}if(nl().includes(e))throw L("SC17",{key:e,schema:t})}),t.indexes){if(!Dr(t.indexes))throw L("SC18",{indexes:t.indexes,schema:t});t.indexes.forEach(e=>{if(!(typeof e=="string"||Array.isArray(e)))throw L("SC19",{index:e,schema:t});if(Array.isArray(e)){for(var r=0;r<e.length;r+=1)if(typeof e[r]!="string")throw L("SC20",{index:e,schema:t})}var n=Dr(e)?e:[e];n.forEach(o=>{var i=Te(t,o),s=i.type;switch(s){case"string":var l=i.maxLength;if(!l)throw L("SC34",{index:e,field:o,schema:t});break;case"number":case"integer":var d=i.multipleOf;if(!d)throw L("SC35",{index:e,field:o,schema:t});var m=i.maximum,p=i.minimum;if(typeof m>"u"||typeof p>"u")throw L("SC37",{index:e,field:o,schema:t});if(!isFinite(m)||!isFinite(p))throw L("SC41",{index:e,field:o,schema:t});break;case"boolean":var y="",C=o;if(o.includes(".")){var k=o.split(".");C=k.pop(),y=k.join(".")}var N=y===""?t:Te(t,y);if(!N.required||!N.required.includes(C))throw L("SC38",{index:e,field:o,schema:t});break;default:throw L("SC36",{fieldName:o,type:i.type,schema:t})}})})}Object.keys(Xs(t)).map(e=>{var r=e.split(".");return r.pop(),r.join(".")}).filter(e=>e!=="").filter((e,r,n)=>n.indexOf(e)===r).filter(e=>{var r=Me(t,e);return r&&!!r.index}).forEach(e=>{throw e=e.replace("properties.",""),e=e.replace(/\.properties\./g,"."),L("SC26",{index:dr(e),schema:t})}),(t.indexes||[]).reduce((e,r)=>(Dr(r)?ur(e,r):e.push(r),e),[]).filter((e,r,n)=>n.indexOf(e)===r).map(e=>{var r=Hy(e),n=Me(t,r);if(!n||typeof n!="object")throw L("SC21",{index:e,schema:t});return{indexPath:e,schemaObj:n}}).filter(e=>e.schemaObj.type!=="string"&&e.schemaObj.type!=="integer"&&e.schemaObj.type!=="number"&&e.schemaObj.type!=="boolean").forEach(e=>{throw L("SC22",{key:e.indexPath,type:e.schemaObj.type,schema:t})}),Object.keys(Xs(t)).map(e=>{var r=e.split(".");return r.pop(),r.join(".")}).filter(e=>e!==""&&e!=="attachments").filter((e,r,n)=>n.indexOf(e)===r).filter(e=>{var r=Me(t,e);return r&&!!r.encrypted}).forEach(e=>{throw e=e.replace("properties.",""),e=e.replace(/\.properties\./g,"."),L("SC27",{index:dr(e),schema:t})}),t.encrypted&&t.encrypted.forEach(e=>{var r=Hy(e),n=Me(t,r);if(!n||typeof n!="object")throw L("SC28",{field:e,schema:t})})}function ol(t){t&&Object.entries(t).forEach(([e,r])=>{if(typeof e!="string")throw se("COL14",{name:e});if(e.startsWith("_"))throw se("COL15",{name:e});if(typeof r!="function")throw se("COL16",{name:e,type:typeof e});if(qy().includes(e)||nl().includes(e))throw L("COL17",{name:e})})}function Qy(t,e){var r=Object.keys(t.properties);e&&Object.keys(e).filter(n=>r.includes(n)).forEach(n=>{throw L("COL18",{funName:n})})}function Yy(t,e){if(typeof e!="object"||Array.isArray(e))throw se("COL11",{schema:t});var r=Dg(t);if(r.length!==Object.keys(e).length)throw L("COL12",{have:Object.keys(e),should:r});return r.map(n=>({v:n,s:e[n+1]})).filter(n=>typeof n.s!="function").forEach(n=>{throw se("COL13",{version:n.v,type:typeof n,schema:t})}),!0}function Gy(t){if(Wy().includes(t.name))throw L("DB5",{name:t.name});Jy(t.name)}function Xy(t){if(Jy(t.name),t.name.includes("$"))throw L("DB13",{name:t.name});if(md(t.name)&&(t.name.endsWith("/")||t.name.endsWith("\\")))throw L("DB11",{name:t.name})}var Zy="^[a-z][_$a-z0-9\\-]*$",fR=new RegExp(Zy);function Jy(t){if(typeof t!="string"||t.length===0)throw se("UT1",{name:t});if(md(t))return!0;if(!t.match(fR)&&t!==":memory:")throw L("UT2",{regex:Zy,givenName:t});return!0}function tb(t){var e=Object.prototype.toString.call(t.queryObj)==="[object Object]";if(!e)throw se("QU11",{op:t.op,collection:t.collection.name,queryObj:t.queryObj});var r=["selector","limit","skip","sort","index"];if(Object.keys(t.queryObj).forEach(n=>{if(!r.includes(n))throw se("QU11",{op:t.op,collection:t.collection.name,queryObj:t.queryObj,key:n,args:{validKeys:r}})}),t.op==="count"&&(t.queryObj.limit||t.queryObj.skip))throw L("QU15",{collection:t.collection.name,query:t.queryObj});il(t.queryObj)}function eb(t){var e=t.rxQuery.collection.schema.jsonSchema,r=t.mangoQuery.selector,n=Object.keys(e.properties);Object.keys(r).filter(l=>!l.startsWith("$")).filter(l=>!l.includes(".")).forEach(l=>{if(!n.includes(l))throw L("QU13",{schema:e,field:l,query:t.mangoQuery})});var o=e.indexes?e.indexes:[],i=t.mangoQuery.index;if(i){var s=o.find(l=>kn(l,i));if(!s)throw L("QU12",{collection:t.rxQuery.collection.name,query:t.mangoQuery,schema:e})}if(t.rxQuery.op==="count"&&!hR(t.rxQuery.collection.schema.jsonSchema,t.mangoQuery)&&!t.rxQuery.collection.database.allowSlowCount)throw L("QU14",{collection:t.rxQuery.collection,query:t.mangoQuery});t.mangoQuery.sort&&t.mangoQuery.sort.map(l=>Object.keys(l)[0]).filter(l=>!l.includes(".")).forEach(l=>{if(!n.includes(l))throw L("QU13",{schema:e,field:l,query:t.mangoQuery})}),il(t.mangoQuery)}function hR(t,e){var r=Aa(t,e);return r.queryPlan.selectorSatisfiedByIndex}function il(t){if(!(typeof t!="object"||t===null)){var e=Object.keys(t);e.forEach(r=>{var n=t[r];if(n instanceof RegExp)throw L("QU16",{field:r,query:t});Array.isArray(n)?n.forEach(o=>il(o)):il(n)})}}function rb(t,e){if(!t)throw L("DOC20",{primaryKey:t,document:e});if(t!==t.trim())throw L("DOC21",{primaryKey:t,document:e});if(t.includes("\r")||t.includes(`
`))throw L("DOC22",{primaryKey:t,document:e});if(t.includes('"'))throw L("DOC23",{primaryKey:t,document:e})}function nb(t){if(typeof t!="object"||t===null)return!1;for(var e in t)if(t.hasOwnProperty(e)&&(t[e]instanceof Date||typeof t[e]=="object"&&nb(t[e])))return!0;return!1}function ob(t,e){var r=pe(t.schema.primaryKey),n=function(i){i.document=oc(r,t.schema,i.document),i.previous&&Object.keys(i.previous._meta).forEach(s=>{if(!Object.prototype.hasOwnProperty.call(i.document._meta,s))throw L("SNH",{dataBefore:i.previous,dataAfter:i.document,args:{metaFieldName:s}})});try{typeof structuredClone=="function"?structuredClone(i):JSON.parse(JSON.stringify(i))}catch{throw L("DOC24",{collection:t.collectionName,document:i.document})}if(nb(i.document))throw L("DOC24",{collection:t.collectionName,document:i.document})};for(var o of e)n(o)}var ib=!1;function ab(t){return U(this,null,function*(){if(!(ib||typeof window>"u"||typeof location>"u")&&!(In.premium&&typeof In.premium=="string"&&(yield ni(In.premium))===ec)){ib=!0;var e=document.createElement("iframe");e.style.visibility="hidden",e.width="1px",e.height="1px",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.opacity="0.1",e.src="https://rxdb.info/html/dev-mode-iframe.html?version="+mo,document.body.appendChild(e)}})}var mR=!0;function pR(t){return!t||typeof t=="string"||typeof t=="number"?t:ld(t)}var gR="dev-mode",sb={name:gR,rxdb:!0,init:()=>{mR&&console.warn(["-------------- RxDB dev-mode warning -------------------------------","you are seeing this because you use the RxDB dev-mode plugin https://rxdb.info/dev-mode.html?console=dev-mode ","This is great in development mode, because it will run many checks to ensure","that you use RxDB correct. If you see this in production mode,","you did something wrong because the dev-mode plugin will decrease the performance.","","\u{1F917} Hint: To get the most out of RxDB, check out the Premium Plugins","to get access to faster storages and more professional features: https://rxdb.info/premium?console=dev-mode ","","You can disable this warning by calling disableWarnings() from the dev-mode plugin.","---------------------------------------------------------------------"].join(`
`))},overwritable:{isDevMode(){return!0},deepFreezeWhenDevMode:pR,tunnelErrorMessage(t){if(!Sf[t])throw console.error("RxDB: Error-Code not known: "+t),new Error("Error-Code "+t+" not known, contact the maintainer");return Sf[t]}},hooks:{preCreateRxSchema:{after:Ky},preCreateRxDatabase:{after:function(t){Xy(t)}},createRxDatabase:{after:function(t){return U(this,null,function*(){ab(t.database)})}},preCreateRxCollection:{after:function(t){if(Gy(t),Qy(t.schema,t.methods),t.name.charAt(0)==="_")throw L("DB2",{name:t.name});if(!t.schema)throw L("DB4",{name:t.name,args:t})}},createRxDocument:{before:function(t){rb(t.primary,t.toJSON(!0))}},preCreateRxQuery:{after:function(t){tb(t)}},prePrepareQuery:{after:t=>{eb(t)}},preStorageWrite:{before:t=>{ob(t.storageInstance,t.rows)}},createRxCollection:{after:t=>{ol(t.creator.statics),ol(t.creator.methods),ol(t.creator.attachments),t.creator.schema&&t.creator.migrationStrategies&&Yy(t.creator.schema,t.creator.migrationStrategies)}}}};var al=P_(cb(),1),lb=Symbol.for("Dexie"),La=globalThis[lb]||(globalThis[lb]=al.default);if(al.default.semVer!==La.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${al.default.semVer} and ${La.semVer}`);var{liveQuery:E3,mergeRanges:D3,rangesOverlap:k3,RangeSet:A3,cmp:I3,Entity:P3,PropModSymbol:M3,PropModification:T3,replacePrefix:N3,add:L3,remove:$3}=La;var $a="docs",vR="changes",ub="attachments",cl="dexie",db=new Map,sl=new Map;function fb(t,e,r,n){var o="rxdb-dexie-"+t+"--"+n.version+"--"+e,i=Ve(db,o,()=>{var s=U(this,null,function*(){var l=Dt(r);l.autoOpen=!1;var d=new La(o,l),m={[$a]:yR(n),[vR]:"++sequence, id",[ub]:"id"};return d.version(1).stores(m),yield d.open(),{dexieDb:d,dexieTable:d[$a],dexieAttachmentsTable:d[ub],booleanIndexes:bR(n)}});return db.set(o,i),sl.set(i,0),s});return i}function hb(t){return U(this,null,function*(){var e=yield t,r=sl.get(t),n=r-1;n===0?(e.dexieDb.close(),sl.delete(t)):sl.set(t,n)})}var Af="__";function _o(t){var e=t.split(".");if(e.length>1)return e.map(n=>_o(n)).join(".");if(t.startsWith("|")){var r=t.substring(1);return Af+r}else return t}function mb(t){var e=t.split(".");if(e.length>1)return e.map(n=>mb(n)).join(".");if(t.startsWith(Af)){var r=t.substring(Af.length);return"|"+r}else return t}function pb(t,e){if(!e)return e;var r=Dt(e);return r=If(r),t.forEach(n=>{var o=Me(e,n),i=o?"1":"0",s=_o(n);vd(r,s,i)}),r}function Mf(t,e){return e&&(e=Dt(e),e=Pf(e),t.forEach(r=>{var n=Me(e,r),o=n==="1";vd(e,r,o)}),e)}function If(t){if(!t||typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(r=>If(r));if(typeof t=="object"){var e={};return Object.entries(t).forEach(([r,n])=>{typeof n=="object"&&(n=If(n)),e[_o(r)]=n}),e}}function Pf(t){if(!t||typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(r=>Pf(r));if(typeof t=="object"){var e={};return Object.entries(t).forEach(([r,n])=>{(typeof n=="object"||Array.isArray(t))&&(n=Pf(n)),e[mb(r)]=n}),e}}function yR(t){var e=[],r=pe(t.primaryKey);e.push([r]),e.push(["_deleted",r]),t.indexes&&t.indexes.forEach(i=>{var s=ga(i);e.push(s)}),e.push(["_meta.lwt",r]),e.push(["_meta.lwt"]),e=e.map(i=>i.map(s=>_o(s)));var n=e.map(i=>i.length===1?i[0]:"["+i.join("+")+"]");n=n.filter((i,s,l)=>l.indexOf(i)===s);var o=n.join(", ");return o}function Tf(t,e){return U(this,null,function*(){var r=yield t,n=yield r.dexieTable.bulkGet(e);return n.map(o=>Mf(r.booleanIndexes,o))})}function Fa(t,e){return t+"||"+e}function bR(t){var e=new Set,r=[];return t.indexes?(t.indexes.forEach(n=>{var o=ga(n);o.forEach(i=>{if(!e.has(i)){e.add(i);var s=Te(t,i);s.type==="boolean"&&r.push(i)}})}),r.push("_deleted"),tg(r)):r}function gb(t){return t===go?-1/0:t}function vb(t,e,r){if(t.includes(e)){var n=r===po||r===!0?"1":"0";return n}else return r}function yb(t,e,r){if(!r){if(typeof window>"u")throw new Error("IDBKeyRange missing");r=window.IDBKeyRange}var n=e.startKeys.map((s,l)=>{var d=e.index[l];return vb(t,d,s)}).map(gb),o=e.endKeys.map((s,l)=>{var d=e.index[l];return vb(t,d,s)}).map(gb),i=r.bound(n,o,!e.inclusiveStart,!e.inclusiveEnd);return i}function Nf(t,e){return U(this,null,function*(){var r=yield t.internals,n=e.query,o=n.skip?n.skip:0,i=n.limit?n.limit:1/0,s=o+i,l=e.queryPlan,d=!1;l.selectorSatisfiedByIndex||(d=hi(t.schema,e.query));var m=yb(r.booleanIndexes,l,r.dexieDb._options.IDBKeyRange),p=l.index,y=[];if(yield r.dexieDb.transaction("r",r.dexieTable,k=>U(this,null,function*(){var N=k.idbtrans,B=N.objectStore($a),Y,et;et="["+p.map(J=>_o(J)).join("+")+"]",Y=B.index(et);var nt=Y.openCursor(m);yield new Promise(J=>{nt.onsuccess=function(kt){var st=kt.target.result;if(st){var Pt=Mf(r.booleanIndexes,st.value);(!d||d(Pt))&&y.push(Pt),l.sortSatisfiedByIndex&&y.length===s?J():st.continue()}else J()}})})),!l.sortSatisfiedByIndex){var C=zc(t.schema,e.query);y=y.sort(C)}return y=y.slice(o,s),{documents:y}})}function bb(t,e){return U(this,null,function*(){var r=yield t.internals,n=e.queryPlan,o=n.index,i=yb(r.booleanIndexes,n,r.dexieDb._options.IDBKeyRange),s=-1;return yield r.dexieDb.transaction("r",r.dexieTable,l=>U(this,null,function*(){var d=l.idbtrans,m=d.objectStore($a),p,y;y="["+o.map(k=>_o(k)).join("+")+"]",p=m.index(y);var C=p.count(i);s=yield new Promise((k,N)=>{C.onsuccess=function(){k(C.result)},C.onerror=B=>N(B)})})),s})}var _R=ee(),Lf=!1,xR=function(){function t(r,n,o,i,s,l,d,m){this.changes$=new at,this.instanceId=_R++,this.storage=r,this.databaseName=n,this.collectionName=o,this.schema=i,this.internals=s,this.options=l,this.settings=d,this.devMode=m,this.primaryPath=pe(this.schema.primaryKey)}var e=t.prototype;return e.bulkWrite=function(n,o){return U(this,null,function*(){xo(this),!Lf&&(!In.premium||typeof In.premium!="string"||(yield ni(In.premium))!==ec)&&console.warn(["-------------- RxDB Open Core RxStorage -------------------------------","You are using the free Dexie.js based RxStorage implementation from RxDB https://rxdb.info/rx-storage-dexie.html?console=dexie ","While this is a great option, we want to let you know that there are faster storage solutions available in our premium plugins.","For professional users and production environments, we highly recommend considering these premium options to enhance performance and reliability."," https://rxdb.info/premium?console=dexie ","If you already purchased premium access you can disable this log by calling the setPremiumFlag() function from rxdb-premium/plugins/shared.","---------------------------------------------------------------------"].join(`
`)),Lf=!0,n.forEach(p=>{if(!p.document._rev||p.previous&&!p.previous._rev)throw L("SNH",{args:{row:p}})});var i=yield this.internals,s={error:[]};this.devMode&&(n=n.map(p=>{var y=bo(p.document);return{previous:p.previous,document:y}}));var l=n.map(p=>p.document[this.primaryPath]),d;if(yield i.dexieDb.transaction("rw",i.dexieTable,i.dexieAttachmentsTable,()=>U(this,null,function*(){var p=new Map,y=yield Tf(this.internals,l);y.forEach(N=>{var B=N;return B&&p.set(B[this.primaryPath],B),B}),d=Zv(this,this.primaryPath,p,n,o),s.error=d.errors;var C=[];d.bulkInsertDocs.forEach(N=>{C.push(N.document)}),d.bulkUpdateDocs.forEach(N=>{C.push(N.document)}),C=C.map(N=>pb(i.booleanIndexes,N)),C.length>0&&(yield i.dexieTable.bulkPut(C));var k=[];d.attachmentsAdd.forEach(N=>{k.push({id:Fa(N.documentId,N.attachmentId),data:N.attachmentData.data})}),d.attachmentsUpdate.forEach(N=>{k.push({id:Fa(N.documentId,N.attachmentId),data:N.attachmentData.data})}),yield i.dexieAttachmentsTable.bulkPut(k),yield i.dexieAttachmentsTable.bulkDelete(d.attachmentsRemove.map(N=>Fa(N.documentId,N.attachmentId)))})),d=Rt(d),d.eventBulk.events.length>0){var m=Rt(d.newestRow).document;d.eventBulk.checkpoint={id:m[this.primaryPath],lwt:m._meta.lwt},d.eventBulk.endTime=ee(),this.changes$.next(d.eventBulk)}return s})},e.findDocumentsById=function(n,o){return U(this,null,function*(){xo(this);var i=yield this.internals,s=[];return yield i.dexieDb.transaction("r",i.dexieTable,()=>U(this,null,function*(){var l=yield Tf(this.internals,n);l.forEach(d=>{d&&(!d._deleted||o)&&s.push(d)})})),s})},e.query=function(n){return xo(this),Nf(this,n)},e.count=function(n){return U(this,null,function*(){if(n.queryPlan.selectorSatisfiedByIndex){var o=yield bb(this,n);return{count:o,mode:"fast"}}else{var i=yield Nf(this,n);return{count:i.documents.length,mode:"slow"}}})},e.changeStream=function(){return xo(this),this.changes$.asObservable()},e.cleanup=function(n){return U(this,null,function*(){xo(this);var o=yield this.internals;return yield o.dexieDb.transaction("rw",o.dexieTable,()=>U(this,null,function*(){var i=ee()-n,s=yield o.dexieTable.where("_meta.lwt").below(i).toArray(),l=[];s.forEach(d=>{d._deleted==="1"&&l.push(d[this.primaryPath])}),yield o.dexieTable.bulkDelete(l)})),!0})},e.getAttachmentData=function(n,o,i){return U(this,null,function*(){xo(this);var s=yield this.internals,l=Fa(n,o);return yield s.dexieDb.transaction("r",s.dexieAttachmentsTable,()=>U(this,null,function*(){var d=yield s.dexieAttachmentsTable.get(l);if(d)return d.data;throw new Error("attachment missing documentId: "+n+" attachmentId: "+o)}))})},e.remove=function(){return U(this,null,function*(){xo(this);var n=yield this.internals;return yield n.dexieTable.clear(),this.close()})},e.close=function(){return this.closed?this.closed:(this.closed=U(this,null,function*(){this.changes$.complete(),yield hb(this.internals)}),this.closed)},e.conflictResultionTasks=function(){return new at},e.resolveConflictResultionTask=function(n){return U(this,null,function*(){})},t}();function _b(t,e,r){return U(this,null,function*(){var n=fb(e.databaseName,e.collectionName,r,e.schema),o=new xR(t,e.databaseName,e.collectionName,e.schema,n,e.options,r,e.devMode);return yield Vy(cl,e,o),Promise.resolve(o)})}function xo(t){if(t.closed)throw new Error("RxStorageInstanceDexie is closed "+t.databaseName+"-"+t.collectionName)}var wR=function(){function t(r){this.name=cl,this.rxdbVersion=mo,this.settings=r}var e=t.prototype;return e.createStorageInstance=function(n){return ty(n),_b(this,n,this.settings)},t}();function xb(t={}){var e=new wR(t);return e}var $f={};vs($f,{$all:()=>wC,$and:()=>Yd,$bitsAllClear:()=>wb,$bitsAllSet:()=>Cb,$bitsAnyClear:()=>Sb,$bitsAnySet:()=>Rb,$elemMatch:()=>tf,$eq:()=>Tc,$exists:()=>rf,$expr:()=>bC,$gt:()=>Nc,$gte:()=>Lc,$in:()=>$c,$jsonSchema:()=>_C,$lt:()=>Fc,$lte:()=>Bc,$mod:()=>Zd,$ne:()=>jc,$nin:()=>Uc,$nor:()=>Gd,$not:()=>Xd,$or:()=>Ea,$regex:()=>Jd,$size:()=>ef,$type:()=>nf,$where:()=>xC});var Bn=t=>Ct((e,r,n)=>{let o=0;if(r instanceof Array)for(let i of r)o=o|1<<i;else o=r;return t(e&o,o)});var wb=Bn((t,e)=>t==0);var Cb=Bn((t,e)=>t==e);var Sb=Bn((t,e)=>t<e);var Rb=Bn((t,e)=>t>0);var ll={};vs(ll,{$addToSet:()=>SR,$bit:()=>OR,$currentDate:()=>ER,$inc:()=>DR,$max:()=>kR,$min:()=>AR,$mul:()=>IR,$pop:()=>PR,$pull:()=>Ff,$pullAll:()=>MR,$push:()=>NR,$rename:()=>LR,$set:()=>Bf,$unset:()=>$R});var yi=(t,e)=>{switch(t){case"deep":return li(e);case"copy":return Nn(e)?new Date(e):it(e)?[...e]:lt(e)?j({},e):e;default:return e}},CR=/^[a-z]+[a-zA-Z0-9]*$/;function Ob(t){if(!t.includes(".$"))return[{parent:t,selector:t},[]];let e=t.indexOf(".$"),r=t.indexOf("]"),n=t.substring(0,e),o=t.substring(e+3,r);z(o===""||CR.test(o),"The filter <identifier> must begin with a lowercase letter and contain only alphanumeric characters.");let i=t.substring(r+2),[s,l]=i?Ob(i):[];return[{selector:t,parent:n,child:o||"$",next:s},[o,...l||[]].filter(Boolean)]}var Mt=(t,e,r,n,o)=>{let{parent:i,child:s,next:l}=e;if(!s){let m=!1;return si(t,i,(y,C)=>m=!!n(y,C)||m,o),m}let d=ke(t,i);return it(d)?d.map((m,p)=>r[s]&&!r[s].test({[s]:m})?!1:l?Mt(m,l,r,n,o):n(d,p)).some(Boolean):!1};function Lt(t,e,r,n){let o=[];for(let[i,s]of Object.entries(t)){let[l,d]=Ob(i);if(!d.length)n(s,l,{})&&o.push(l.parent);else{let m={};e.forEach(y=>{Object.keys(y).forEach(C=>{d.forEach(k=>{(C===k||C.startsWith(k+"."))&&(m[k]=m[k]||{},Object.assign(m[k],{[C]:y[C]}))})})});let p={};for(let[y,C]of Object.entries(m))p[y]=new Yt(C,r.queryOptions);n(s,l,p)&&o.push(l.parent)}}return o}var SR=(t,e,r=[],n={})=>Lt(e,r,n,(o,i,s)=>{let l={$each:[o]};return lt(o)&&zt(o,"$each")&&Object.assign(l,o),Mt(t,i,s,(d,m)=>{let p=d[m]||=[];return Xr([p,l.$each]).length===l.$each.length?!1:(d[m]=yi(n.cloneMode,Ca(p.concat(l.$each))),!0)},{buildGraph:!0})});var RR=new Set(["and","or","xor"]),OR=(t,e,r=[],n={})=>Lt(e,r,n,(o,i,s)=>{let l=Object.keys(o);return z(l.length===1&&RR.has(l[0]),`Invalid bit operator '${l[0]}'. Must be one of 'and', 'or', or 'xor'.`),Mt(t,i,s,(d,m)=>{let p=d[m],y=o[l[0]];if(p!==void 0&&!(ut(p)&&ut(y)))return!1;switch(p=p||0,l[0]){case"and":d[m]=p&y;break;case"or":d[m]=p|y;break;case"xor":d[m]=p^y;break}return d[m]!==p},{buildGraph:!0})});var ER=(t,e,r=[],n={})=>{let o=Date.now();return Lt(e,r,n,(i,s,l)=>Mt(t,s,l,(d,m)=>(d[m]=o,!0),{buildGraph:!0}))};var DR=(t,e,r=[],n={})=>Lt(e,r,n,(o,i,s)=>{if(!i.child){let l=ke(t,i.parent);z(l===void 0||ut(l),"cannot apply $inc to a value of non-numeric type")}return Mt(t,i,s,(l,d)=>(l[d]=(l[d]||=0)+o,!0),{buildGraph:!0})});var kR=(t,e,r=[],n={})=>Lt(e,r,n,(o,i,s)=>Mt(t,i,s,(l,d)=>l[d]!==void 0&&Tt(l[d],o)>-1?!1:(l[d]=o,!0),{buildGraph:!0}));var AR=(t,e,r=[],n={})=>Lt(e,r,n,(o,i,s)=>Mt(t,i,s,(l,d)=>l[d]!==void 0&&Tt(l[d],o)<1?!1:(l[d]=o,!0),{buildGraph:!0}));var IR=(t,e,r=[],n={})=>Lt(e,r,n,(o,i,s)=>Mt(t,i,s,(l,d)=>{let m=l[d];return l[d]=l[d]===void 0?0:l[d]*o,l[d]!==m},{buildGraph:!0}));var PR=(t,e,r=[],n={})=>Lt(e,r,n,(o,i,s)=>Mt(t,i,s,(l,d)=>{let m=l[d];return z(it(m),`path '${i.selector}' contains an element of non-array type.`),m.length?(o===-1?m.splice(0,1):m.pop(),!0):!1}));var Ff=(t,e,r=[],n={})=>Lt(e,r,n,(o,i,s)=>{let l=!lt(o)||Object.keys(o).some(We),d=new Yt(l?{k:o}:o,n.queryOptions),m=l?p=>d.test({k:p}):p=>d.test(p);return Mt(t,i,s,(p,y)=>{let C=p[y],k=new Array;return C.map(B=>{let Y=m(B);return Y||k.push(B),Y}).some(Boolean)?(p[y]=k,!0):!1})});var MR=(t,e,r=[],n={})=>{let o={};return Object.entries(e).forEach(([i,s])=>{o[i]={$in:s}}),Ff(t,o,r,n)};var TR=Object.freeze(["$each","$slice","$sort","$position"]),NR=(t,e,r=[],n={})=>Lt(e,r,n,(o,i,s)=>{let l={$each:[o]};return lt(o)&&TR.some(d=>zt(o,d))&&Object.assign(l,o),Mt(t,i,s,(d,m)=>{let p=d[m]||=[],y=p.slice(0,l.$slice||p.length),C=p.length,k=ut(l.$position)?l.$position:p.length;if(p.splice(k,0,...yi(n.cloneMode,l.$each)),l.$sort){let N=lt(l.$sort)?Object.keys(l.$sort||{}).pop():"",B=N?l.$sort[N]:l.$sort,Y=N?et=>ke(et,N):et=>et;p.sort((et,nt)=>B*Tt(Y(et),Y(nt)))}return ut(l.$slice)&&(l.$slice<0?p.splice(0,p.length+l.$slice):p.splice(l.$slice)),C!=p.length||!ge(y,p)},{descendArray:!0,buildGraph:!0})});var Bf=(t,e,r=[],n={})=>Lt(e,r,n,(o,i,s)=>Mt(t,i,s,(l,d)=>ge(l[d],o)?!1:(l[d]=yi(n.cloneMode,o),!0),{buildGraph:!0}));var LR=(t,e,r=[],n={})=>{let o=[],i=Lt(e,r,n,(s,l,d)=>Mt(t,l,d,(m,p)=>zt(m,p)?(o.push(...Bf(t,{[s]:m[p]},r,n)),delete m[p],!0):!1));return Array.from(new Set(i.concat(o)))};var $R=(t,e,r=[],n={})=>Lt(e,r,n,(o,i,s)=>Mt(t,i,s,(l,d)=>zt(l,d)?(it(l)?l[d]=null:delete l[d],!0):!1));function jf(t){return t=pt(j({},t),{queryOptions:Zr(t.queryOptions)}),t.queryOptions.context.addQueryOps($f).addExpressionOps(Wd).addExpressionOps(Hd),(e,r,n=[],o={},i={})=>{let s=Object.assign({cloneMode:"copy"},t,i);Object.assign(s,{queryOptions:Zr(Object.assign({useStrictMode:!1},s?.queryOptions))}),n=n||[],o=o||{};let l=Object.entries(r);z(l.length===1,"Update expression must contain only one operator.");let[d,m]=l[0];z(zt(ll,d),`Update operator '${d}' is not supported.`);let p=ll[d];return Object.keys(o).length&&!(o instanceof Yt?o:new Yt(o,s.queryOptions)).test(e)?[]:p(e,m,n,s)}}var B8=jf({});var Uf;function zf(t,e){if(!Uf){var r=jf({cloneMode:"none"});Uf=(n,o)=>{var i=Ze(n);return r(i,o),i}}return Uf(t,e)}function FR(t){return this.incrementalModify(e=>{var r=zf(e,t);return r})}function BR(t){var e=this._data,r=zf(e,t);return this._saveData(r,e)}function jR(t){return U(this,null,function*(){return Ln(this.asRxQuery,e=>e.update(t))})}var Eb={name:"update",rxdb:!0,prototypes:{RxDocument:t=>{t.update=BR,t.incrementalUpdate=FR},RxQuery:t=>{t.update=jR}}};var UR={title:"posts schema",version:0,type:"object",primaryKey:"id",properties:{id:{type:"string",primary:!0,maxLength:100},title:{type:"string"},body:{type:"string"}}};function zR(){return U(this,null,function*(){Jc(dy),Jc(Eb),gm()&&Jc(sb)})}zR();var n6=(()=>{class t{constructor(){this.dataBaseReadySubj=new _e(!1),this.dataBaseReady$=this.dataBaseReadySubj.asObservable()}getDatabaseCollection(r){if(!this.rxDatabase)throw new Error("Database is not initialized. Please make sure the database is initialized before getting the collection");return this.rxDatabase[r]}initDB(r){return U(this,null,function*(){return this.rxDatabase&&this.rxDatabase.name===r&&!this.rxDatabase.destroyed?this.rxDatabase:(this.rxDatabase=yield by({name:r,storage:xb(),password:"myLongAndStupidPassword"}),yield this.rxDatabase.addCollections({posts:{schema:UR}}),this.dataBaseReadySubj.next(!0),this.rxDatabase)})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var s6=(()=>{class t{constructor(){this.activePortal=new at,this.portal$=this.activePortal.asObservable()}setPortal(r){this.activePortal.next(r)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Nr=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(Nr||{}),l6="*";function Ab(t,e){return{type:Nr.Trigger,name:t,definitions:e,options:{}}}function Vf(t,e=null){return{type:Nr.Animate,styles:e,timings:t}}function u6(t,e=null){return{type:Nr.Sequence,steps:t,options:e}}function ul(t){return{type:Nr.Style,styles:t,offset:null}}function qf(t,e,r){return{type:Nr.State,name:t,styles:e,options:r}}function d6(t){return{type:Nr.Keyframes,steps:t}}function Wf(t,e,r=null){return{type:Nr.Transition,expr:t,animation:e,options:r}}function f6(t=null){return{type:Nr.AnimateChild,options:t}}function h6(t,e,r=null){return{type:Nr.Query,selector:t,animation:e,options:r}}var Db=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,r=0){this.totalTime=e+r}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let r=e=="start"?this._onStartFns:this._onDoneFns;r.forEach(n=>n()),r.length=0}},kb=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let r=0,n=0,o=0,i=this.players.length;i==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++r==i&&this._onFinish()}),s.onDestroy(()=>{++n==i&&this._onDestroy()}),s.onStart(()=>{++o==i&&this._onStart()})}),this.totalTime=this.players.reduce((s,l)=>Math.max(s,l.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let r=e*this.totalTime;this.players.forEach(n=>{let o=n.totalTime?Math.min(1,r/n.totalTime):1;n.setPosition(o)})}getPosition(){let e=this.players.reduce((r,n)=>r===null||n.totalTime>r.totalTime?n:r,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let r=e=="start"?this._onStartFns:this._onDoneFns;r.forEach(n=>n()),r.length=0}},m6="!";function b6(t){return t&&typeof t.connect=="function"&&!(t instanceof Jn)}var dl=function(t){return t[t.REPLACED=0]="REPLACED",t[t.INSERTED=1]="INSERTED",t[t.MOVED=2]="MOVED",t[t.REMOVED=3]="REMOVED",t}(dl||{}),_6=new mt("_ViewRepeater"),Ib=class{applyChanges(e,r,n,o,i){e.forEachOperation((s,l,d)=>{let m,p;if(s.previousIndex==null){let y=n(s,l,d);m=r.createEmbeddedView(y.templateRef,y.context,y.index),p=dl.INSERTED}else d==null?(r.remove(l),p=dl.REMOVED):(m=r.get(l),r.move(m,d),p=dl.MOVED);i&&i({context:m?.context,operation:p,record:s})})}detach(){}};var Pb=class{_multiple;_emitChanges;compareWith;_selection=new Set;_deselectedToEmit=[];_selectedToEmit=[];_selected;get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}changed=new at;constructor(e=!1,r,n=!0,o){this._multiple=e,this._emitChanges=n,this.compareWith=o,r&&r.length&&(e?r.forEach(i=>this._markSelected(i)):this._markSelected(r[0]),this._selectedToEmit.length=0)}select(...e){this._verifyValueAssignment(e),e.forEach(n=>this._markSelected(n));let r=this._hasQueuedChanges();return this._emitChangeEvent(),r}deselect(...e){this._verifyValueAssignment(e),e.forEach(n=>this._unmarkSelected(n));let r=this._hasQueuedChanges();return this._emitChangeEvent(),r}setSelection(...e){this._verifyValueAssignment(e);let r=this.selected,n=new Set(e);e.forEach(i=>this._markSelected(i)),r.filter(i=>!n.has(this._getConcreteValue(i,n))).forEach(i=>this._unmarkSelected(i));let o=this._hasQueuedChanges();return this._emitChangeEvent(),o}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();let r=this._hasQueuedChanges();return e&&this._emitChangeEvent(),r}isSelected(e){return this._selection.has(this._getConcreteValue(e))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){e=this._getConcreteValue(e),this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){e=this._getConcreteValue(e),this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){e.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(e,r){if(this.compareWith){r=r??this._selection;for(let n of r)if(this.compareWith(e,n))return n;return e}else return e}};var VR=20,fl=(()=>{class t{_ngZone=I(Zt);_platform=I(Be);_document=I(me,{optional:!0});constructor(){}_scrolled=new at;_globalSubscription=null;_scrolledCount=0;scrollContainers=new Map;register(r){this.scrollContainers.has(r)||this.scrollContainers.set(r,r.elementScrolled().subscribe(()=>this._scrolled.next(r)))}deregister(r){let n=this.scrollContainers.get(r);n&&(n.unsubscribe(),this.scrollContainers.delete(r))}scrolled(r=VR){return this._platform.isBrowser?new Fi(n=>{this._globalSubscription||this._addGlobalListener();let o=r>0?this._scrolled.pipe(ou(r)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):rt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((r,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(r,n){let o=this.getAncestorScrollContainers(r);return this.scrolled(n).pipe(_t(i=>!i||o.indexOf(i)>-1))}getAncestorScrollContainers(r){let n=[];return this.scrollContainers.forEach((o,i)=>{this._scrollableContainsElement(i,r)&&n.push(i)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(r,n){let o=km(n),i=r.getElementRef().nativeElement;do if(o==i)return!0;while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let r=this._getWindow();return nu(r.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Hf=(()=>{class t{elementRef=I(Jt);scrollDispatcher=I(fl);ngZone=I(Zt);dir=I(yn,{optional:!0});_destroyed=new at;_elementScrolled=new Fi(r=>this.ngZone.runOutsideAngular(()=>nu(this.elementRef.nativeElement,"scroll").pipe(mn(this._destroyed)).subscribe(r)));constructor(){}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(r){let n=this.elementRef.nativeElement,o=this.dir&&this.dir.value=="rtl";r.left==null&&(r.left=o?r.end:r.start),r.right==null&&(r.right=o?r.start:r.end),r.bottom!=null&&(r.top=n.scrollHeight-n.clientHeight-r.bottom),o&&zo()!=Uo.NORMAL?(r.left!=null&&(r.right=n.scrollWidth-n.clientWidth-r.left),zo()==Uo.INVERTED?r.left=r.right:zo()==Uo.NEGATED&&(r.left=r.right?-r.right:r.right)):r.right!=null&&(r.left=n.scrollWidth-n.clientWidth-r.right),this._applyScrollToOptions(r)}_applyScrollToOptions(r){let n=this.elementRef.nativeElement;Cs()?n.scrollTo(r):(r.top!=null&&(n.scrollTop=r.top),r.left!=null&&(n.scrollLeft=r.left))}measureScrollOffset(r){let n="left",o="right",i=this.elementRef.nativeElement;if(r=="top")return i.scrollTop;if(r=="bottom")return i.scrollHeight-i.clientHeight-i.scrollTop;let s=this.dir&&this.dir.value=="rtl";return r=="start"?r=s?o:n:r=="end"&&(r=s?n:o),s&&zo()==Uo.INVERTED?r==n?i.scrollWidth-i.clientWidth-i.scrollLeft:i.scrollLeft:s&&zo()==Uo.NEGATED?r==n?i.scrollLeft+i.scrollWidth-i.clientWidth:-i.scrollLeft:r==n?i.scrollLeft:i.scrollWidth-i.clientWidth-i.scrollLeft}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Ut({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return t})(),qR=20,hl=(()=>{class t{_platform=I(Be);_viewportSize;_change=new at;_changeListener=r=>{this._change.next(r)};_document=I(me,{optional:!0});constructor(){I(Zt).runOutsideAngular(()=>{if(this._platform.isBrowser){let n=this._getWindow();n.addEventListener("resize",this._changeListener),n.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let r=this._getWindow();r.removeEventListener("resize",this._changeListener),r.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let r={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),r}getViewportRect(){let r=this.getViewportScrollPosition(),{width:n,height:o}=this.getViewportSize();return{top:r.top,left:r.left,bottom:r.top+o,right:r.left+n,height:o,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let r=this._document,n=this._getWindow(),o=r.documentElement,i=o.getBoundingClientRect(),s=-i.top||r.body.scrollTop||n.scrollY||o.scrollTop||0,l=-i.left||r.body.scrollLeft||n.scrollX||o.scrollLeft||0;return{top:s,left:l}}change(r=qR){return r>0?this._change.pipe(ou(r)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let r=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:r.innerWidth,height:r.innerHeight}:{width:0,height:0}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Mb=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=te({type:t});static \u0275inj=Gt({})}return t})(),Kf=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=te({type:t});static \u0275inj=Gt({imports:[Ki,Mb,Ki,Mb]})}return t})();var Tb=Cs(),Qf=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,r){this._viewportRuler=e,this._document=r}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Kt(-this._previousScrollPosition.left),e.style.top=Kt(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,r=this._document.body,n=e.style,o=r.style,i=n.scrollBehavior||"",s=o.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),Tb&&(n.scrollBehavior=o.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Tb&&(n.scrollBehavior=i,o.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let r=this._document.body,n=this._viewportRuler.getViewportSize();return r.scrollHeight>n.height||r.scrollWidth>n.width}};var Yf=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,r,n,o){this._scrollDispatcher=e,this._ngZone=r,this._viewportRuler=n,this._config=o}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(_t(r=>!r||!this._overlayRef.overlayElement.contains(r.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let r=this._viewportRuler.getViewportScrollPosition().top;Math.abs(r-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}},ml=class{enable(){}disable(){}attach(){}};function Gf(t,e){return e.some(r=>{let n=t.bottom<r.top,o=t.top>r.bottom,i=t.right<r.left,s=t.left>r.right;return n||o||i||s})}function Nb(t,e){return e.some(r=>{let n=t.top<r.top,o=t.bottom>r.bottom,i=t.left<r.left,s=t.right>r.right;return n||o||i||s})}var Xf=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,r,n,o){this._scrollDispatcher=e,this._viewportRuler=r,this._ngZone=n,this._config=o}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let r=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:o}=this._viewportRuler.getViewportSize();Gf(r,[{width:n,height:o,bottom:o,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},HR=(()=>{class t{_scrollDispatcher=I(fl);_viewportRuler=I(hl);_ngZone=I(Zt);_document=I(me);constructor(){}noop=()=>new ml;close=r=>new Yf(this._scrollDispatcher,this._ngZone,this._viewportRuler,r);block=()=>new Qf(this._viewportRuler,this._document);reposition=r=>new Xf(this._scrollDispatcher,this._viewportRuler,this._ngZone,r);static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),jn=class{positionStrategy;scrollStrategy=new ml;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(e){if(e){let r=Object.keys(e);for(let n of r)e[n]!==void 0&&(this[n]=e[n])}}};var Zf=class{connectionPair;scrollableViewProperties;constructor(e,r){this.connectionPair=e,this.scrollableViewProperties=r}};var zb=(()=>{class t{_attachedOverlays=[];_document=I(me);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(r){this.remove(r),this._attachedOverlays.push(r)}remove(r){let n=this._attachedOverlays.indexOf(r);n>-1&&this._attachedOverlays.splice(n,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),KR=(()=>{class t extends zb{_ngZone=I(Zt,{optional:!0});add(r){super.add(r),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}_keydownListener=r=>{let n=this._attachedOverlays;for(let o=n.length-1;o>-1;o--)if(n[o]._keydownEvents.observers.length>0){let i=n[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>i.next(r)):i.next(r);break}};static \u0275fac=(()=>{let r;return function(o){return(r||(r=de(t)))(o||t)}})();static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),QR=(()=>{class t extends zb{_platform=I(Be);_ngZone=I(Zt,{optional:!0});_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;add(r){if(super.add(r),!this._isAttached){let n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let r=this._document.body;r.removeEventListener("pointerdown",this._pointerDownListener,!0),r.removeEventListener("click",this._clickListener,!0),r.removeEventListener("auxclick",this._clickListener,!0),r.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(r.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(r){r.addEventListener("pointerdown",this._pointerDownListener,!0),r.addEventListener("click",this._clickListener,!0),r.addEventListener("auxclick",this._clickListener,!0),r.addEventListener("contextmenu",this._clickListener,!0)}_pointerDownListener=r=>{this._pointerDownEventTarget=Rs(r)};_clickListener=r=>{let n=Rs(r),o=r.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:n;this._pointerDownEventTarget=null;let i=this._attachedOverlays.slice();for(let s=i.length-1;s>-1;s--){let l=i[s];if(l._outsidePointerEvents.observers.length<1||!l.hasAttached())continue;if(Lb(l.overlayElement,n)||Lb(l.overlayElement,o))break;let d=l._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(r)):d.next(r)}};static \u0275fac=(()=>{let r;return function(o){return(r||(r=de(t)))(o||t)}})();static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Lb(t,e){let r=typeof ShadowRoot<"u"&&ShadowRoot,n=e;for(;n;){if(n===t)return!0;n=r&&n instanceof ShadowRoot?n.host:n.parentNode}return!1}var Vb=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(n,o){},styles:[".cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}"],encapsulation:2,changeDetection:0})}return t})(),pl=(()=>{class t{_platform=I(Be);_containerElement;_document=I(me);_styleLoader=I(Hi);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let r="cdk-overlay-container";if(this._platform.isBrowser||gu()){let o=this._document.querySelectorAll(`.${r}[platform="server"], .${r}[platform="test"]`);for(let i=0;i<o.length;i++)o[i].remove()}let n=this._document.createElement("div");n.classList.add(r),gu()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}_loadStyles(){this._styleLoader.load(Vb)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),bi=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_backdropElement=null;_backdropTimeout;_backdropClick=new at;_attachments=new at;_detachments=new at;_positionStrategy;_scrollStrategy;_locationChanges=vr.EMPTY;_backdropClickHandler=e=>this._backdropClick.next(e);_backdropTransitionendHandler=e=>{this._disposeBackdrop(e.target)};_previousHostParent;_keydownEvents=new at;_outsidePointerEvents=new at;_renders=new at;_afterRenderRef;_afterNextRenderRef;constructor(e,r,n,o,i,s,l,d,m,p=!1,y){this._portalOutlet=e,this._host=r,this._pane=n,this._config=o,this._ngZone=i,this._keyboardDispatcher=s,this._document=l,this._location=d,this._outsideClickDispatcher=m,this._animationsDisabled=p,this._injector=y,o.scrollStrategy&&(this._scrollStrategy=o.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=o.positionStrategy,this._afterRenderRef=ym(()=>lm(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let r=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=no(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof r?.onDestroy=="function"&&r.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),r}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=j(j({},this._config),e),this._updateElementSize()}setDirection(e){this._config=pt(j({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Kt(this._config.width),e.height=Kt(this._config.height),e.minWidth=Kt(this._config.minWidth),e.minHeight=Kt(this._config.minHeight),e.maxWidth=Kt(this._config.maxWidth),e.maxHeight=Kt(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,r,n){let o=vu(r||[]).filter(i=>!!i);o.length&&(n?e.classList.add(...o):e.classList.remove(...o))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let e=this._renders.pipe(mn(Io(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},$b="cdk-overlay-connected-position-bounding-box",YR=/([A-Za-z%]+)$/,Jf=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new at;_resizeSubscription=vr.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,r,n,o,i){this._viewportRuler=r,this._document=n,this._platform=o,this._overlayContainer=i,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add($b),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,r=this._overlayRect,n=this._viewportRect,o=this._containerRect,i=[],s;for(let l of this._preferredPositions){let d=this._getOriginPoint(e,o,l),m=this._getOverlayPoint(d,r,l),p=this._getOverlayFit(m,r,n,l);if(p.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(l,d);return}if(this._canFitWithFlexibleDimensions(p,m,n)){i.push({position:l,origin:d,overlayRect:r,boundingBoxRect:this._calculateBoundingBoxRect(d,l)});continue}(!s||s.overlayFit.visibleArea<p.visibleArea)&&(s={overlayFit:p,overlayPoint:m,originPoint:d,position:l,overlayRect:r})}if(i.length){let l=null,d=-1;for(let m of i){let p=m.boundingBoxRect.width*m.boundingBoxRect.height*(m.position.weight||1);p>d&&(d=p,l=m)}this._isPushed=!1,this._applyPosition(l.position,l.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&wo(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove($b),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let r=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,r)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,r,n){let o;if(n.originX=="center")o=e.left+e.width/2;else{let s=this._isRtl()?e.right:e.left,l=this._isRtl()?e.left:e.right;o=n.originX=="start"?s:l}r.left<0&&(o-=r.left);let i;return n.originY=="center"?i=e.top+e.height/2:i=n.originY=="top"?e.top:e.bottom,r.top<0&&(i-=r.top),{x:o,y:i}}_getOverlayPoint(e,r,n){let o;n.overlayX=="center"?o=-r.width/2:n.overlayX==="start"?o=this._isRtl()?-r.width:0:o=this._isRtl()?0:-r.width;let i;return n.overlayY=="center"?i=-r.height/2:i=n.overlayY=="top"?0:-r.height,{x:e.x+o,y:e.y+i}}_getOverlayFit(e,r,n,o){let i=Bb(r),{x:s,y:l}=e,d=this._getOffset(o,"x"),m=this._getOffset(o,"y");d&&(s+=d),m&&(l+=m);let p=0-s,y=s+i.width-n.width,C=0-l,k=l+i.height-n.height,N=this._subtractOverflows(i.width,p,y),B=this._subtractOverflows(i.height,C,k),Y=N*B;return{visibleArea:Y,isCompletelyWithinViewport:i.width*i.height===Y,fitsInViewportVertically:B===i.height,fitsInViewportHorizontally:N==i.width}}_canFitWithFlexibleDimensions(e,r,n){if(this._hasFlexibleDimensions){let o=n.bottom-r.y,i=n.right-r.x,s=Fb(this._overlayRef.getConfig().minHeight),l=Fb(this._overlayRef.getConfig().minWidth),d=e.fitsInViewportVertically||s!=null&&s<=o,m=e.fitsInViewportHorizontally||l!=null&&l<=i;return d&&m}return!1}_pushOverlayOnScreen(e,r,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let o=Bb(r),i=this._viewportRect,s=Math.max(e.x+o.width-i.width,0),l=Math.max(e.y+o.height-i.height,0),d=Math.max(i.top-n.top-e.y,0),m=Math.max(i.left-n.left-e.x,0),p=0,y=0;return o.width<=i.width?p=m||-s:p=e.x<this._viewportMargin?i.left-n.left-e.x:0,o.height<=i.height?y=d||-l:y=e.y<this._viewportMargin?i.top-n.top-e.y:0,this._previousPushAmount={x:p,y},{x:e.x+p,y:e.y+y}}_applyPosition(e,r){if(this._setTransformOrigin(e),this._setOverlayElementStyles(r,e),this._setBoundingBoxStyles(r,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let n=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!GR(this._lastScrollVisibility,n)){let o=new Zf(e,n);this._positionChanges.next(o)}this._lastScrollVisibility=n}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let r=this._boundingBox.querySelectorAll(this._transformOriginSelector),n,o=e.overlayY;e.overlayX==="center"?n="center":this._isRtl()?n=e.overlayX==="start"?"right":"left":n=e.overlayX==="start"?"left":"right";for(let i=0;i<r.length;i++)r[i].style.transformOrigin=`${n} ${o}`}_calculateBoundingBoxRect(e,r){let n=this._viewportRect,o=this._isRtl(),i,s,l;if(r.overlayY==="top")s=e.y,i=n.height-s+this._viewportMargin;else if(r.overlayY==="bottom")l=n.height-e.y+this._viewportMargin*2,i=n.height-l+this._viewportMargin;else{let k=Math.min(n.bottom-e.y+n.top,e.y),N=this._lastBoundingBoxSize.height;i=k*2,s=e.y-k,i>N&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-N/2)}let d=r.overlayX==="start"&&!o||r.overlayX==="end"&&o,m=r.overlayX==="end"&&!o||r.overlayX==="start"&&o,p,y,C;if(m)C=n.width-e.x+this._viewportMargin*2,p=e.x-this._viewportMargin;else if(d)y=e.x,p=n.right-e.x;else{let k=Math.min(n.right-e.x+n.left,e.x),N=this._lastBoundingBoxSize.width;p=k*2,y=e.x-k,p>N&&!this._isInitialRender&&!this._growAfterOpen&&(y=e.x-N/2)}return{top:s,left:y,bottom:l,right:C,width:p,height:i}}_setBoundingBoxStyles(e,r){let n=this._calculateBoundingBoxRect(e,r);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));let o={};if(this._hasExactPosition())o.top=o.left="0",o.bottom=o.right=o.maxHeight=o.maxWidth="",o.width=o.height="100%";else{let i=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;o.height=Kt(n.height),o.top=Kt(n.top),o.bottom=Kt(n.bottom),o.width=Kt(n.width),o.left=Kt(n.left),o.right=Kt(n.right),r.overlayX==="center"?o.alignItems="center":o.alignItems=r.overlayX==="end"?"flex-end":"flex-start",r.overlayY==="center"?o.justifyContent="center":o.justifyContent=r.overlayY==="bottom"?"flex-end":"flex-start",i&&(o.maxHeight=Kt(i)),s&&(o.maxWidth=Kt(s))}this._lastBoundingBoxSize=n,wo(this._boundingBox.style,o)}_resetBoundingBoxStyles(){wo(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){wo(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,r){let n={},o=this._hasExactPosition(),i=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(o){let p=this._viewportRuler.getViewportScrollPosition();wo(n,this._getExactOverlayY(r,e,p)),wo(n,this._getExactOverlayX(r,e,p))}else n.position="static";let l="",d=this._getOffset(r,"x"),m=this._getOffset(r,"y");d&&(l+=`translateX(${d}px) `),m&&(l+=`translateY(${m}px)`),n.transform=l.trim(),s.maxHeight&&(o?n.maxHeight=Kt(s.maxHeight):i&&(n.maxHeight="")),s.maxWidth&&(o?n.maxWidth=Kt(s.maxWidth):i&&(n.maxWidth="")),wo(this._pane.style,n)}_getExactOverlayY(e,r,n){let o={top:"",bottom:""},i=this._getOverlayPoint(r,this._overlayRect,e);if(this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n)),e.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;o.bottom=`${s-(i.y+this._overlayRect.height)}px`}else o.top=Kt(i.y);return o}_getExactOverlayX(e,r,n){let o={left:"",right:""},i=this._getOverlayPoint(r,this._overlayRect,e);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n));let s;if(this._isRtl()?s=e.overlayX==="end"?"left":"right":s=e.overlayX==="end"?"right":"left",s==="right"){let l=this._document.documentElement.clientWidth;o.right=`${l-(i.x+this._overlayRect.width)}px`}else o.left=Kt(i.x);return o}_getScrollVisibility(){let e=this._getOriginRect(),r=this._pane.getBoundingClientRect(),n=this._scrollables.map(o=>o.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Nb(e,n),isOriginOutsideView:Gf(e,n),isOverlayClipped:Nb(r,n),isOverlayOutsideView:Gf(r,n)}}_subtractOverflows(e,...r){return r.reduce((n,o)=>n-Math.max(o,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,r=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+r-this._viewportMargin,width:e-2*this._viewportMargin,height:r-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,r){return r==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&vu(e).forEach(r=>{r!==""&&this._appliedPanelClasses.indexOf(r)===-1&&(this._appliedPanelClasses.push(r),this._pane.classList.add(r))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof Jt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let r=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+r,height:n,width:r}}};function wo(t,e){for(let r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function Fb(t){if(typeof t!="number"&&t!=null){let[e,r]=t.split(YR);return!r||r==="px"?parseFloat(e):null}return t||null}function Bb(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function GR(t,e){return t===e?!0:t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}var jb="cdk-global-overlay-wrapper",th=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){let r=e.getConfig();this._overlayRef=e,this._width&&!r.width&&e.updateSize({width:this._width}),this._height&&!r.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(jb),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,r=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:o,height:i,maxWidth:s,maxHeight:l}=n,d=(o==="100%"||o==="100vw")&&(!s||s==="100%"||s==="100vw"),m=(i==="100%"||i==="100vh")&&(!l||l==="100%"||l==="100vh"),p=this._xPosition,y=this._xOffset,C=this._overlayRef.getConfig().direction==="rtl",k="",N="",B="";d?B="flex-start":p==="center"?(B="center",C?N=y:k=y):C?p==="left"||p==="end"?(B="flex-end",k=y):(p==="right"||p==="start")&&(B="flex-start",N=y):p==="left"||p==="start"?(B="flex-start",k=y):(p==="right"||p==="end")&&(B="flex-end",N=y),e.position=this._cssPosition,e.marginLeft=d?"0":k,e.marginTop=m?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=d?"0":N,r.justifyContent=B,r.alignItems=m?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,r=this._overlayRef.hostElement,n=r.style;r.classList.remove(jb),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},XR=(()=>{class t{_viewportRuler=I(hl);_document=I(me);_platform=I(Be);_overlayContainer=I(pl);constructor(){}global(){return new th}flexibleConnectedTo(r){return new Jf(r,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),er=(()=>{class t{scrollStrategies=I(HR);_overlayContainer=I(pl);_positionBuilder=I(XR);_keyboardDispatcher=I(KR);_injector=I(Xt);_ngZone=I(Zt);_document=I(me);_directionality=I(yn);_location=I(Vr);_outsideClickDispatcher=I(QR);_animationsModuleType=I(Lo,{optional:!0});_idGenerator=I(qr);_appRef;_styleLoader=I(Hi);constructor(){}create(r){this._styleLoader.load(Vb);let n=this._createHostElement(),o=this._createPaneElement(n),i=this._createPortalOutlet(o),s=new jn(r);return s.direction=s.direction||this._directionality.value,new bi(i,n,o,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(eo))}position(){return this._positionBuilder}_createPaneElement(r){let n=this._document.createElement("div");return n.id=this._idGenerator.getId("cdk-overlay-"),n.classList.add("cdk-overlay-pane"),r.appendChild(n),n}_createHostElement(){let r=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(r),r}_createPortalOutlet(r){return this._appRef||(this._appRef=this._injector.get(xs)),new Ds(r,null,this._appRef,this._injector,this._document)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ZR=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],qb=new mt("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=I(er);return()=>t.scrollStrategies.reposition()}}),Ub=(()=>{class t{elementRef=I(Jt);constructor(){}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Ut({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]})}return t})(),u9=(()=>{class t{_overlay=I(er);_dir=I(yn,{optional:!0});_overlayRef;_templatePortal;_backdropSubscription=vr.EMPTY;_attachSubscription=vr.EMPTY;_detachSubscription=vr.EMPTY;_positionSubscription=vr.EMPTY;_offsetX;_offsetY;_position;_scrollStrategyFactory=I(qb);_disposeOnNavigation=!1;_ngZone=I(Zt);origin;positions;positionStrategy;get offsetX(){return this._offsetX}set offsetX(r){this._offsetX=r,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(r){this._offsetY=r,this._position&&this._updatePositionStrategy(this._position)}width;height;minWidth;minHeight;backdropClass;panelClass;viewportMargin=0;scrollStrategy;open=!1;disableClose=!1;transformOriginSelector;hasBackdrop=!1;lockPosition=!1;flexibleDimensions=!1;growAfterOpen=!1;push=!1;get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(r){this._disposeOnNavigation=r}backdropClick=new Ce;positionChange=new Ce;attach=new Ce;detach=new Ce;overlayKeydown=new Ce;overlayOutsideClick=new Ce;constructor(){let r=I(Ur),n=I(gn);this._templatePortal=new Cr(r,n),this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(r){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),r.origin&&this.open&&this._position.apply()),r.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=ZR);let r=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=r.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=r.detachments().subscribe(()=>this.detach.emit()),r.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),n.keyCode===27&&!this.disableClose&&!Vo(n)&&(n.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{let o=this._getOriginElement(),i=Rs(n);(!o||o!==i&&!o.contains(i))&&this.overlayOutsideClick.next(n)})}_buildConfig(){let r=this._position=this.positionStrategy||this._createPositionStrategy(),n=new jn({direction:this._dir||"ltr",positionStrategy:r,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(n.width=this.width),(this.height||this.height===0)&&(n.height=this.height),(this.minWidth||this.minWidth===0)&&(n.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(r){let n=this.positions.map(o=>({originX:o.originX,originY:o.originY,overlayX:o.overlayX,overlayY:o.overlayY,offsetX:o.offsetX||this.offsetX,offsetY:o.offsetY||this.offsetY,panelClass:o.panelClass||void 0}));return r.setOrigin(this._getOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let r=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(r),r}_getOrigin(){return this.origin instanceof Ub?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof Ub?this.origin.elementRef.nativeElement:this.origin instanceof Jt?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(r=>{this.backdropClick.emit(r)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(Yh(()=>this.positionChange.observers.length>0)).subscribe(r=>{this._ngZone.run(()=>this.positionChange.emit(r)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Ut({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",he],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",he],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",he],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",he],push:[2,"cdkConnectedOverlayPush","push",he],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",he]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[vn,pn]})}return t})();function JR(t){return()=>t.scrollStrategies.reposition()}var tO={provide:qb,deps:[er],useFactory:JR},_i=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=te({type:t});static \u0275inj=Gt({providers:[er,tO],imports:[Ki,Kr,Kf,Kf]})}return t})();function eO(t,e){if(t&1){let r=hm();xr(0,"div",1)(1,"button",2),Fo("click",function(){Zh(r);let o=hu();return Jh(o.action())}),mu(2),sr()()}if(t&2){let r=hu();$o(2),pu(" ",r.data.action," ")}}var rO=["label"];function nO(t,e){}var oO=Math.pow(2,31)-1,ja=class{_overlayRef;instance;containerInstance;_afterDismissed=new at;_afterOpened=new at;_onAction=new at;_durationTimeoutId;_dismissedByAction=!1;constructor(e,r){this._overlayRef=r,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,oO))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},Wb=new mt("MatSnackBarData"),xi=class{politeness="assertive";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"},iO=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Ut({type:t,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return t})(),aO=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Ut({type:t,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return t})(),sO=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Ut({type:t,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return t})(),Hb=(()=>{class t{snackBarRef=I(ja);data=I(Wb);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(n,o){n&1&&(xr(0,"div",0),mu(1),sr(),ro(2,eO,3,1,"div",1)),n&2&&($o(),pu(" ",o.data.message,`
`),$o(),fm(o.hasAction?2:-1))},dependencies:[Wm,iO,aO,sO],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0})}return t})(),cO={snackBarState:Ab("state",[qf("void, hidden",ul({transform:"scale(0.8)",opacity:0})),qf("visible",ul({transform:"scale(1)",opacity:1})),Wf("* => visible",Vf("150ms cubic-bezier(0, 0, 0.2, 1)")),Wf("* => void, * => hidden",Vf("75ms cubic-bezier(0.4, 0.0, 1, 1)",ul({opacity:0})))])},lO=(()=>{class t extends bn{_ngZone=I(Zt);_elementRef=I(Jt);_changeDetectorRef=I(wr);_platform=I(Be);snackBarConfig=I(xi);_document=I(me);_trackedModals=new Set;_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new at;_onExit=new at;_onEnter=new at;_animationState="void";_live;_label;_role;_liveElementId=I(qr).getId("mat-snack-bar-container-live-");constructor(){super();let r=this.snackBarConfig;r.politeness==="assertive"&&!r.announcementMessage?this._live="assertive":r.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(r){this._assertNotAttached();let n=this._portalOutlet.attachComponentPortal(r);return this._afterPortalAttached(),n}attachTemplatePortal(r){this._assertNotAttached();let n=this._portalOutlet.attachTemplatePortal(r);return this._afterPortalAttached(),n}attachDomPortal=r=>{this._assertNotAttached();let n=this._portalOutlet.attachDomPortal(r);return this._afterPortalAttached(),n};onAnimationEnd(r){let{fromState:n,toState:o}=r;if((o==="void"&&n!=="void"||o==="hidden")&&this._completeExit(),o==="visible"){let i=this._onEnter;this._ngZone.run(()=>{i.next(),i.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let r=this._elementRef.nativeElement,n=this.snackBarConfig.panelClass;n&&(Array.isArray(n)?n.forEach(s=>r.classList.add(s)):r.classList.add(n)),this._exposeToModals();let o=this._label.nativeElement,i="mdc-snackbar__label";o.classList.toggle(i,!o.querySelector(`.${i}`))}_exposeToModals(){let r=this._liveElementId,n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<n.length;o++){let i=n[o],s=i.getAttribute("aria-owns");this._trackedModals.add(i),s?s.indexOf(r)===-1&&i.setAttribute("aria-owns",s+" "+r):i.setAttribute("aria-owns",r)}}_clearFromModals(){this._trackedModals.forEach(r=>{let n=r.getAttribute("aria-owns");if(n){let o=n.replace(this._liveElementId,"").trim();o.length>0?r.setAttribute("aria-owns",o):r.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{let r=this._elementRef.nativeElement.querySelector("[aria-hidden]"),n=this._elementRef.nativeElement.querySelector("[aria-live]");if(r&&n){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&r.contains(document.activeElement)&&(o=document.activeElement),r.removeAttribute("aria-hidden"),n.appendChild(r),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["mat-snack-bar-container"]],viewQuery:function(n,o){if(n&1&&(Bo(_n,7),Bo(rO,7)),n&2){let i;oo(i=io())&&(o._portalOutlet=i.first),oo(i=io())&&(o._label=i.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:1,hostBindings:function(n,o){n&1&&pm("@state.done",function(s){return o.onAnimationEnd(s)}),n&2&&mm("@state",o._animationState)},features:[fe],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(n,o){n&1&&(xr(0,"div",1)(1,"div",2,0)(3,"div",3),ro(4,nO,0,0,"ng-template",4),sr(),Ge(5,"div"),sr()()),n&2&&($o(5),Fe("aria-live",o._live)("role",o._role)("id",o._liveElementId))},dependencies:[_n],styles:[".mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mdc-snackbar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mdc-snackbar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mdc-snackbar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mdc-snackbar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mdc-snackbar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mdc-snackbar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mdc-snackbar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}"],encapsulation:2,data:{animation:[cO.snackBarState]}})}return t})();function uO(){return new xi}var dO=new mt("mat-snack-bar-default-options",{providedIn:"root",factory:uO}),fO=(()=>{class t{_overlay=I(er);_live=I(Tm);_injector=I(Xt);_breakpointObserver=I(Am);_parentSnackBar=I(t,{optional:!0,skipSelf:!0});_defaultConfig=I(dO);_snackBarRefAtThisLevel=null;simpleSnackBarComponent=Hb;snackBarContainerComponent=lO;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){let r=this._parentSnackBar;return r?r._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(r){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=r:this._snackBarRefAtThisLevel=r}constructor(){}openFromComponent(r,n){return this._attach(r,n)}openFromTemplate(r,n){return this._attach(r,n)}open(r,n="",o){let i=j(j({},this._defaultConfig),o);return i.data={message:r,action:n},i.announcementMessage===r&&(i.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,i)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(r,n){let o=n&&n.viewContainerRef&&n.viewContainerRef.injector,i=Xt.create({parent:o||this._injector,providers:[{provide:xi,useValue:n}]}),s=new Hr(this.snackBarContainerComponent,n.viewContainerRef,i),l=r.attach(s);return l.instance.snackBarConfig=n,l.instance}_attach(r,n){let o=j(j(j({},new xi),this._defaultConfig),n),i=this._createOverlay(o),s=this._attachSnackBarContainer(i,o),l=new ja(s,i);if(r instanceof Ur){let d=new Cr(r,null,{$implicit:o.data,snackBarRef:l});l.instance=s.attachTemplatePortal(d)}else{let d=this._createInjector(o,l),m=new Hr(r,void 0,d),p=s.attachComponentPortal(m);l.instance=p.instance}return this._breakpointObserver.observe(Im.HandsetPortrait).pipe(mn(i.detachments())).subscribe(d=>{i.overlayElement.classList.toggle(this.handsetCssClass,d.matches)}),o.announcementMessage&&s._onAnnounce.subscribe(()=>{this._live.announce(o.announcementMessage,o.politeness)}),this._animateSnackBar(l,o),this._openedSnackBarRef=l,this._openedSnackBarRef}_animateSnackBar(r,n){r.afterDismissed().subscribe(()=>{this._openedSnackBarRef==r&&(this._openedSnackBarRef=null),n.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{r.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):r.containerInstance.enter(),n.duration&&n.duration>0&&r.afterOpened().subscribe(()=>r._dismissAfter(n.duration))}_createOverlay(r){let n=new jn;n.direction=r.direction;let o=this._overlay.position().global(),i=r.direction==="rtl",s=r.horizontalPosition==="left"||r.horizontalPosition==="start"&&!i||r.horizontalPosition==="end"&&i,l=!s&&r.horizontalPosition!=="center";return s?o.left("0"):l?o.right("0"):o.centerHorizontally(),r.verticalPosition==="top"?o.top("0"):o.bottom("0"),n.positionStrategy=o,this._overlay.create(n)}_createInjector(r,n){let o=r&&r.viewContainerRef&&r.viewContainerRef.injector;return Xt.create({parent:o||this._injector,providers:[{provide:ja,useValue:n},{provide:Wb,useValue:r.data}]})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var M9=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=te({type:t});static \u0275inj=Gt({providers:[fO],imports:[_i,Kr,Hm,Wr,Hb,Wr]})}return t})();var L9={APP:{POSTS:"app.posts",NOT_FOUND:"app.not-found"},POSTS:{DETAIL:"posts.detail",CREATE:"posts.create",EDIT:"posts.edit"}};function hO(t,e){}var Un=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!0;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;componentFactoryResolver;providers;container;templateContext};var rh=(()=>{class t extends bn{_elementRef=I(Jt);_focusTrapFactory=I(Mm);_config;_interactivityChecker=I(Pm);_ngZone=I(Zt);_overlayRef=I(bi);_focusMonitor=I(Es);_platform=I(Be);_document=I(me,{optional:!0});_portalOutlet;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_changeDetectorRef=I(wr);_injector=I(Xt);_isDestroyed=!1;constructor(){super(),this._config=I(Un,{optional:!0})||new Un,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(r){this._ariaLabelledByQueue.push(r),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(r){let n=this._ariaLabelledByQueue.indexOf(r);n>-1&&(this._ariaLabelledByQueue.splice(n,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(r){this._portalOutlet.hasAttached();let n=this._portalOutlet.attachComponentPortal(r);return this._contentAttached(),n}attachTemplatePortal(r){this._portalOutlet.hasAttached();let n=this._portalOutlet.attachTemplatePortal(r);return this._contentAttached(),n}attachDomPortal=r=>{this._portalOutlet.hasAttached();let n=this._portalOutlet.attachDomPortal(r);return this._contentAttached(),n};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(r,n){this._interactivityChecker.isFocusable(r)||(r.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let o=()=>{r.removeEventListener("blur",o),r.removeEventListener("mousedown",o),r.removeAttribute("tabindex")};r.addEventListener("blur",o),r.addEventListener("mousedown",o)})),r.focus(n)}_focusByCssSelector(r,n){let o=this._elementRef.nativeElement.querySelector(r);o&&this._forceFocus(o,n)}_trapFocus(){this._isDestroyed||no(()=>{let r=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||r.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}},{injector:this._injector})}_restoreFocus(){let r=this._config.restoreFocus,n=null;if(typeof r=="string"?n=this._document.querySelector(r):typeof r=="boolean"?n=r?this._elementFocusedBeforeDialogWasOpened:null:r&&(n=r),this._config.restoreFocus&&n&&typeof n.focus=="function"){let o=Ss(),i=this._elementRef.nativeElement;(!o||o===this._document.body||o===i||i.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(n,this._closeInteractionType),this._closeInteractionType=null):n.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let r=this._elementRef.nativeElement,n=Ss();return r===n||r.contains(n)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Ss()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(n,o){if(n&1&&Bo(_n,7),n&2){let i;oo(i=io())&&(o._portalOutlet=i.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(n,o){n&2&&Fe("id",o._config.id||null)("role",o._config.role)("aria-modal",o._config.ariaModal)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null)},features:[fe],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(n,o){n&1&&ro(0,hO,0,0,"ng-template",0)},dependencies:[_n],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return t})(),Ua=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new at;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(e,r){this.overlayRef=e,this.config=r,this.disableClose=r.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=r.id,this.keydownEvents.subscribe(n=>{n.keyCode===27&&!this.disableClose&&!Vo(n)&&(n.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{r.closeOnOverlayDetachments!==!1&&this.close()})}close(e,r){if(this.containerInstance){let n=this.closed;this.containerInstance._closeInteractionType=r?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),n.next(e),n.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",r=""){return this.overlayRef.updateSize({width:e,height:r}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}},mO=new mt("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=I(er);return()=>t.scrollStrategies.block()}}),pO=new mt("DialogData"),gO=new mt("DefaultDialogConfig");var nh=(()=>{class t{_overlay=I(er);_injector=I(Xt);_defaultOptions=I(gO,{optional:!0});_parentDialog=I(t,{optional:!0,skipSelf:!0});_overlayContainer=I(pl);_idGenerator=I(qr);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new at;_afterOpenedAtThisLevel=new at;_ariaHiddenElements=new Map;_scrollStrategy=I(mO);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=to(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ar(void 0)));constructor(){}open(r,n){let o=this._defaultOptions||new Un;n=j(j({},o),n),n.id=n.id||this._idGenerator.getId("cdk-dialog-"),n.id&&this.getDialogById(n.id);let i=this._getOverlayConfig(n),s=this._overlay.create(i),l=new Ua(s,n),d=this._attachContainer(s,l,n);return l.containerInstance=d,this._attachDialogContent(r,l,d,n),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(l),l.closed.subscribe(()=>this._removeOpenDialog(l,!0)),this.afterOpened.next(l),l}closeAll(){eh(this.openDialogs,r=>r.close())}getDialogById(r){return this.openDialogs.find(n=>n.id===r)}ngOnDestroy(){eh(this._openDialogsAtThisLevel,r=>{r.config.closeOnDestroy===!1&&this._removeOpenDialog(r,!1)}),eh(this._openDialogsAtThisLevel,r=>r.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(r){let n=new jn({positionStrategy:r.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:r.scrollStrategy||this._scrollStrategy(),panelClass:r.panelClass,hasBackdrop:r.hasBackdrop,direction:r.direction,minWidth:r.minWidth,minHeight:r.minHeight,maxWidth:r.maxWidth,maxHeight:r.maxHeight,width:r.width,height:r.height,disposeOnNavigation:r.closeOnNavigation});return r.backdropClass&&(n.backdropClass=r.backdropClass),n}_attachContainer(r,n,o){let i=o.injector||o.viewContainerRef?.injector,s=[{provide:Un,useValue:o},{provide:Ua,useValue:n},{provide:bi,useValue:r}],l;o.container?typeof o.container=="function"?l=o.container:(l=o.container.type,s.push(...o.container.providers(o))):l=rh;let d=new Hr(l,o.viewContainerRef,Xt.create({parent:i||this._injector,providers:s}));return r.attach(d).instance}_attachDialogContent(r,n,o,i){if(r instanceof Ur){let s=this._createInjector(i,n,o,void 0),l={$implicit:i.data,dialogRef:n};i.templateContext&&(l=j(j({},l),typeof i.templateContext=="function"?i.templateContext():i.templateContext)),o.attachTemplatePortal(new Cr(r,null,l,s))}else{let s=this._createInjector(i,n,o,this._injector),l=o.attachComponentPortal(new Hr(r,i.viewContainerRef,s));n.componentRef=l,n.componentInstance=l.instance}}_createInjector(r,n,o,i){let s=r.injector||r.viewContainerRef?.injector,l=[{provide:pO,useValue:r.data},{provide:Ua,useValue:n}];return r.providers&&(typeof r.providers=="function"?l.push(...r.providers(n,r,o)):l.push(...r.providers)),r.direction&&(!s||!s.get(yn,null,{optional:!0}))&&l.push({provide:yn,useValue:{value:r.direction,change:rt()}}),Xt.create({parent:s||i,providers:l})}_removeOpenDialog(r,n){let o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((i,s)=>{i?s.setAttribute("aria-hidden",i):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),n&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let r=this._overlayContainer.getContainerElement();if(r.parentElement){let n=r.parentElement.children;for(let o=n.length-1;o>-1;o--){let i=n[o];i!==r&&i.nodeName!=="SCRIPT"&&i.nodeName!=="STYLE"&&!i.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let r=this._parentDialog;return r?r._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function eh(t,e){let r=t.length;for(;r--;)e(t[r])}var Kb=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=te({type:t});static \u0275inj=Gt({providers:[nh],imports:[_i,Kr,Nm,Kr]})}return t})();function vO(t,e){}var vl=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!0;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;componentFactoryResolver;enterAnimationDuration;exitAnimationDuration},oh="mdc-dialog--open",Qb="mdc-dialog--opening",Yb="mdc-dialog--closing",yO=150,bO=75,_O=(()=>{class t extends rh{_animationMode=I(Lo,{optional:!0});_animationStateChanged=new Ce;_animationsEnabled=this._animationMode!=="NoopAnimations";_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?Xb(this._config.enterAnimationDuration)??yO:0;_exitAnimationDuration=this._animationsEnabled?Xb(this._config.exitAnimationDuration)??bO:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(Gb,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Qb,oh)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(oh),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(oh),this._animationsEnabled?(this._hostElement.style.setProperty(Gb,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Yb)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(r){this._actionSectionCount+=r,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(Qb,Yb)}_waitForAnimationToComplete(r,n){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(n,r)}_requestAnimationFrame(r){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(r):r()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(r){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:r})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(r){let n=super.attachComponentPortal(r);return n.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),n}static \u0275fac=(()=>{let r;return function(o){return(r||(r=de(t)))(o||t)}})();static \u0275cmp=Se({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(n,o){n&2&&(fu("id",o._config.id),Fe("aria-modal",o._config.ariaModal)("role",o._config.role)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null),_r("_mat-animation-noopable",!o._animationsEnabled)("mat-mdc-dialog-container-with-actions",o._actionSectionCount>0))},features:[fe],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(n,o){n&1&&(xr(0,"div",0)(1,"div",1),ro(2,vO,0,0,"ng-template",2),sr()())},dependencies:[_n],styles:['.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mdc-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}'],encapsulation:2})}return t})(),Gb="--mat-dialog-transition-duration";function Xb(t){return t==null?null:typeof t=="number"?t:t.endsWith("ms")?Os(t.substring(0,t.length-2)):t.endsWith("s")?Os(t.substring(0,t.length-1))*1e3:t==="0"?0:null}var gl=function(t){return t[t.OPEN=0]="OPEN",t[t.CLOSING=1]="CLOSING",t[t.CLOSED=2]="CLOSED",t}(gl||{}),za=class{_ref;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new at;_beforeClosed=new at;_result;_closeFallbackTimeout;_state=gl.OPEN;_closeInteractionType;constructor(e,r,n){this._ref=e,this._containerInstance=n,this.disableClose=r.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),n._animationStateChanged.pipe(_t(o=>o.state==="opened"),yr(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),n._animationStateChanged.pipe(_t(o=>o.state==="closed"),yr(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Io(this.backdropClick(),this.keydownEvents().pipe(_t(o=>o.keyCode===27&&!this.disableClose&&!Vo(o)))).subscribe(o=>{this.disableClose||(o.preventDefault(),Zb(this,o.type==="keydown"?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(_t(r=>r.state==="closing"),yr(1)).subscribe(r=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),r.totalTime+100)}),this._state=gl.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let r=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?r.left(e.left):r.right(e.right):r.centerHorizontally(),e&&(e.top||e.bottom)?e.top?r.top(e.top):r.bottom(e.bottom):r.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",r=""){return this._ref.updateSize(e,r),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=gl.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function Zb(t,e,r){return t._closeInteractionType=e,t.close(r)}var xO=new mt("MatMdcDialogData"),wO=new mt("mat-mdc-dialog-default-options"),CO=new mt("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let t=I(er);return()=>t.scrollStrategies.block()}});var ih=(()=>{class t{_overlay=I(er);_defaultOptions=I(wO,{optional:!0});_scrollStrategy=I(CO);_parentDialog=I(t,{optional:!0,skipSelf:!0});_idGenerator=I(qr);_dialog=I(nh);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new at;_afterOpenedAtThisLevel=new at;dialogConfigClass=vl;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let r=this._parentDialog;return r?r._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=to(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ar(void 0)));constructor(){this._dialogRefConstructor=za,this._dialogContainerType=_O,this._dialogDataToken=xO}open(r,n){let o;n=j(j({},this._defaultOptions||new vl),n),n.id=n.id||this._idGenerator.getId("mat-mdc-dialog-"),n.scrollStrategy=n.scrollStrategy||this._scrollStrategy();let i=this._dialog.open(r,pt(j({},n),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:n},{provide:Un,useValue:n}]},templateContext:()=>({dialogRef:o}),providers:(s,l,d)=>(o=new this._dialogRefConstructor(s,n,d),o.updatePosition(n?.position),[{provide:this._dialogContainerType,useValue:d},{provide:this._dialogDataToken,useValue:l.data},{provide:this._dialogRefConstructor,useValue:o}])}));return o.componentRef=i.componentRef,o.componentInstance=i.componentInstance,this.openDialogs.push(o),this.afterOpened.next(o),o.afterClosed().subscribe(()=>{let s=this.openDialogs.indexOf(o);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||this._getAfterAllClosed().next())}),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(r){return this.openDialogs.find(n=>n.id===r)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(r){let n=r.length;for(;n--;)r[n].close()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),bQ=(()=>{class t{dialogRef=I(za,{optional:!0});_elementRef=I(Jt);_dialog=I(ih);ariaLabel;type="button";dialogResult;_matDialogClose;constructor(){}ngOnInit(){this.dialogRef||(this.dialogRef=t_(this._elementRef,this._dialog.openDialogs))}ngOnChanges(r){let n=r._matDialogClose||r._matDialogCloseResult;n&&(this.dialogResult=n.currentValue)}_onButtonClick(r){Zb(this.dialogRef,r.screenX===0&&r.screenY===0?"keyboard":"mouse",this.dialogResult)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Ut({type:t,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(n,o){n&1&&Fo("click",function(s){return o._onButtonClick(s)}),n&2&&Fe("aria-label",o.ariaLabel||null)("type",o.type)},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],type:"type",dialogResult:[0,"mat-dialog-close","dialogResult"],_matDialogClose:[0,"matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[pn]})}return t})(),Jb=(()=>{class t{_dialogRef=I(za,{optional:!0});_elementRef=I(Jt);_dialog=I(ih);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=t_(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Ut({type:t})}return t})(),_Q=(()=>{class t extends Jb{id=I(qr).getId("mat-mdc-dialog-title-");_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static \u0275fac=(()=>{let r;return function(o){return(r||(r=de(t)))(o||t)}})();static \u0275dir=Ut({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(n,o){n&2&&fu("id",o.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],features:[fe]})}return t})(),xQ=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Ut({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],features:[cm([Hf])]})}return t})(),wQ=(()=>{class t extends Jb{align;_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}static \u0275fac=(()=>{let r;return function(o){return(r||(r=de(t)))(o||t)}})();static \u0275dir=Ut({type:t,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(n,o){n&2&&_r("mat-mdc-dialog-actions-align-start",o.align==="start")("mat-mdc-dialog-actions-align-center",o.align==="center")("mat-mdc-dialog-actions-align-end",o.align==="end")},inputs:{align:"align"},features:[fe]})}return t})();function t_(t,e){let r=t.nativeElement.parentElement;for(;r&&!r.classList.contains("mat-mdc-dialog-container");)r=r.parentElement;return r?e.find(n=>n.id===r.id):null}var CQ=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=te({type:t});static \u0275inj=Gt({providers:[ih],imports:[Kb,_i,Kr,Wr,Wr]})}return t})();export{Hr as a,Cr as b,AO as c,_n as d,Kr as e,Wm as f,VO as g,qO as h,Hm as i,Or as j,Er as k,gx as l,Dp as m,Pe as n,pE as o,gE as p,Ow as q,Ys as r,pa as s,sd as t,AE as u,Qw as v,n6 as w,s6 as x,b6 as y,dl as z,_6 as A,Ib as B,Pb as C,fl as D,hl as E,Mb as F,Kf as G,jn as H,er as I,Ub as J,u9 as K,_i as L,Nr as M,l6 as N,Ab as O,Vf as P,u6 as Q,ul as R,qf as S,d6 as T,Wf as U,f6 as V,h6 as W,Db as X,kb as Y,m6 as Z,za as _,xO as $,ih as aa,bQ as ba,_Q as ca,xQ as da,wQ as ea,CQ as fa,dO as ga,fO as ha,M9 as ia,L9 as ja};
