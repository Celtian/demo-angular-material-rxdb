import{$a as mr,A as xp,Aa as Mp,Ab as Gu,Ac as nm,B as xn,Ba as Yt,Bb as aa,Cb as fo,Cc as om,D as Bs,Da as Pp,Dc as im,E as bt,Ea as js,Eb as Xo,F as $u,Fa as Np,Fb as ho,G as ao,Ga as Go,Gb as po,H as so,Ha as Qr,Hc as am,Ia as Yr,J as Bu,Ja as Er,K as Ze,Ka as Xr,La as Lp,Lb as tr,M as Ho,Ma as Cn,Mb as Wp,Mc as sm,N as Wo,Na as $p,Nb as Qu,Nc as cm,O as wn,Oa as zu,Oc as lm,P as Fu,Pa as Us,Pb as Yu,Pc as ca,Q as wp,Qa as zs,Qc as Zr,R as Cp,Ra as Jt,Rc as Re,S as ju,Sa as Xt,Sc as Ws,T as Sp,Ta as Nt,Tc as la,U as oa,Ua as Bp,Uc as Zo,V as hr,Va as Se,Vc as Ks,W as Ue,Wa as Fp,Wc as mo,X as Ko,Xa as Qo,Y as Rp,Yb as Hs,Yc as Xu,Z as me,Za as re,Zc as Zu,_ as Ce,_a as qt,_b as Kp,_c as Ju,a as F,aa as ct,ab as jp,ad as um,b as gt,ba as Qt,bb as Up,bc as Gp,bd as dm,ca as Op,cb as zp,cd as fm,d as xx,da as lt,db as Vu,dc as Qp,dd as hm,e as Ls,ea as zt,eb as qu,ed as Jr,f as wx,fa as k,fb as Vs,fd as Jo,g as U,ga as Ep,gb as gr,gc as Yp,h as Or,hb as Vp,hc as Dr,i as vp,ia as pr,ib as qp,j as qo,ja as Je,jc as ge,k as ea,ka as Dp,kc as Xp,l as io,la as kp,ld as Sn,m as at,mc as Zp,md as ua,n as we,nb as Yo,nc as Jp,nd as er,o as yp,oa as xt,ob as co,p as Kr,pa as le,pb as qs,q as pe,qa as Ap,qb as Hu,qc as tm,r as nt,rb as Wu,rc as sa,rd as pm,s as ra,sa as Fs,sb as lo,t as na,tc as em,td as mm,u as bp,ua as ia,uc as kr,v as _p,va as Ip,vc as rm,w as ut,wa as Uu,wb as Hp,x as $s,xa as Tp,xb as Ku,y as Wt,ya as Gr,yb as uo,z as Lu,za as ze}from"./chunk-DJY4MPCK.js";var Yb=xx((sh,ch)=>{"use strict";(function(t,e){typeof sh=="object"&&typeof ch<"u"?ch.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self).Dexie=e()})(sh,function(){"use strict";var t=function(a,c){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(a,c)},e=function(){return(e=Object.assign||function(a){for(var c,u=1,f=arguments.length;u<f;u++)for(var h in c=arguments[u])Object.prototype.hasOwnProperty.call(c,h)&&(a[h]=c[h]);return a}).apply(this,arguments)};function r(a,c,u){if(u||arguments.length===2)for(var f,h=0,g=c.length;h<g;h++)!f&&h in c||((f=f||Array.prototype.slice.call(c,0,h))[h]=c[h]);return a.concat(f||Array.prototype.slice.call(c))}var n=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,o=Object.keys,i=Array.isArray;function s(a,c){return typeof c!="object"||o(c).forEach(function(u){a[u]=c[u]}),a}typeof Promise>"u"||n.Promise||(n.Promise=Promise);var l=Object.getPrototypeOf,d={}.hasOwnProperty;function p(a,c){return d.call(a,c)}function m(a,c){typeof c=="function"&&(c=c(l(a))),(typeof Reflect>"u"?o:Reflect.ownKeys)(c).forEach(function(u){S(a,u,c[u])})}var y=Object.defineProperty;function S(a,c,u,f){y(a,c,s(u&&p(u,"get")&&typeof u.get=="function"?{get:u.get,set:u.set,configurable:!0}:{value:u,configurable:!0,writable:!0},f))}function D(a){return{from:function(c){return a.prototype=Object.create(c.prototype),S(a.prototype,"constructor",a),{extend:m.bind(null,a.prototype)}}}}var P=Object.getOwnPropertyDescriptor,j=[].slice;function G(a,c,u){return j.call(a,c,u)}function J(a,c){return c(a)}function rt(a){if(!a)throw new Error("Assertion Failed")}function tt(a){n.setImmediate?setImmediate(a):setTimeout(a,0)}function At(a,c){if(typeof c=="string"&&p(a,c))return a[c];if(!c)return a;if(typeof c!="string"){for(var u=[],f=0,h=c.length;f<h;++f){var g=At(a,c[f]);u.push(g)}return u}var v=c.indexOf(".");if(v!==-1){var b=a[c.substr(0,v)];return b==null?void 0:At(b,c.substr(v+1))}}function st(a,c,u){if(a&&c!==void 0&&!("isFrozen"in Object&&Object.isFrozen(a)))if(typeof c!="string"&&"length"in c){rt(typeof u!="string"&&"length"in u);for(var f=0,h=c.length;f<h;++f)st(a,c[f],u[f])}else{var g,v,b=c.indexOf(".");b!==-1?(g=c.substr(0,b),(v=c.substr(b+1))===""?u===void 0?i(a)&&!isNaN(parseInt(g))?a.splice(g,1):delete a[g]:a[g]=u:st(b=!(b=a[g])||!p(a,g)?a[g]={}:b,v,u)):u===void 0?i(a)&&!isNaN(parseInt(c))?a.splice(c,1):delete a[c]:a[c]=u}}function Mt(a){var c,u={};for(c in a)p(a,c)&&(u[c]=a[c]);return u}var Dt=[].concat;function Ft(a){return Dt.apply([],a)}var Hr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ft([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(c){return c+a+"Array"})}))).filter(function(a){return n[a]}),he=new Set(Hr.map(function(a){return n[a]})),Be=null;function ur(a){return Be=new WeakMap,a=function c(u){if(!u||typeof u!="object")return u;var f=Be.get(u);if(f)return f;if(i(u)){f=[],Be.set(u,f);for(var h=0,g=u.length;h<g;++h)f.push(c(u[h]))}else if(he.has(u.constructor))f=u;else{var v,b=l(u);for(v in f=b===Object.prototype?{}:Object.create(b),Be.set(u,f),u)p(u,v)&&(f[v]=c(u[v]))}return f}(a),Be=null,a}var Gn={}.toString;function dr(a){return Gn.call(a).slice(8,-1)}var Fi=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Zl=typeof Fi=="symbol"?function(a){var c;return a!=null&&(c=a[Fi])&&c.apply(a)}:function(){return null};function Vr(a,c){return c=a.indexOf(c),0<=c&&a.splice(c,1),0<=c}var dn={};function Pe(a){var c,u,f,h;if(arguments.length===1){if(i(a))return a.slice();if(this===dn&&typeof a=="string")return[a];if(h=Zl(a)){for(u=[];!(f=h.next()).done;)u.push(f.value);return u}if(a==null)return[a];if(typeof(c=a.length)!="number")return[a];for(u=new Array(c);c--;)u[c]=a[c];return u}for(c=arguments.length,u=new Array(c);c--;)u[c]=arguments[c];return u}var fn=typeof Symbol<"u"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Vi=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Xe=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Vi),ji={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function fr(a,c){this.name=a,this.message=c}function cs(a,c){return a+". Errors: "+Object.keys(c).map(function(u){return c[u].toString()}).filter(function(u,f,h){return h.indexOf(u)===f}).join(`
`)}function ie(a,c,u,f){this.failures=c,this.failedKeys=f,this.successCount=u,this.message=cs(a,c)}function ae(a,c){this.name="BulkError",this.failures=Object.keys(c).map(function(u){return c[u]}),this.failuresByPos=c,this.message=cs(a,this.failures)}D(fr).from(Error).extend({toString:function(){return this.name+": "+this.message}}),D(ie).from(fr),D(ae).from(fr);var hn=Xe.reduce(function(a,c){return a[c]=c+"Error",a},{}),Jl=fr,ot=Xe.reduce(function(a,c){var u=c+"Error";function f(h,g){this.name=u,h?typeof h=="string"?(this.message="".concat(h).concat(g?`
 `+g:""),this.inner=g||null):typeof h=="object"&&(this.message="".concat(h.name," ").concat(h.message),this.inner=h):(this.message=ji[c]||u,this.inner=null)}return D(f).from(Jl),a[c]=f,a},{});ot.Syntax=SyntaxError,ot.Type=TypeError,ot.Range=RangeError;var $h=Vi.reduce(function(a,c){return a[c+"Error"]=ot[c],a},{}),ls=Xe.reduce(function(a,c){return["Syntax","Type","Range"].indexOf(c)===-1&&(a[c+"Error"]=ot[c]),a},{});function It(){}function Ui(a){return a}function H_(a,c){return a==null||a===Ui?c:function(u){return c(a(u))}}function Qn(a,c){return function(){a.apply(this,arguments),c.apply(this,arguments)}}function W_(a,c){return a===It?c:function(){var u=a.apply(this,arguments);u!==void 0&&(arguments[0]=u);var f=this.onsuccess,h=this.onerror;this.onsuccess=null,this.onerror=null;var g=c.apply(this,arguments);return f&&(this.onsuccess=this.onsuccess?Qn(f,this.onsuccess):f),h&&(this.onerror=this.onerror?Qn(h,this.onerror):h),g!==void 0?g:u}}function K_(a,c){return a===It?c:function(){a.apply(this,arguments);var u=this.onsuccess,f=this.onerror;this.onsuccess=this.onerror=null,c.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?Qn(u,this.onsuccess):u),f&&(this.onerror=this.onerror?Qn(f,this.onerror):f)}}function G_(a,c){return a===It?c:function(u){var f=a.apply(this,arguments);s(u,f);var h=this.onsuccess,g=this.onerror;return this.onsuccess=null,this.onerror=null,u=c.apply(this,arguments),h&&(this.onsuccess=this.onsuccess?Qn(h,this.onsuccess):h),g&&(this.onerror=this.onerror?Qn(g,this.onerror):g),f===void 0?u===void 0?void 0:u:s(f,u)}}function Q_(a,c){return a===It?c:function(){return c.apply(this,arguments)!==!1&&a.apply(this,arguments)}}function tu(a,c){return a===It?c:function(){var u=a.apply(this,arguments);if(u&&typeof u.then=="function"){for(var f=this,h=arguments.length,g=new Array(h);h--;)g[h]=arguments[h];return u.then(function(){return c.apply(f,g)})}return c.apply(this,arguments)}}ls.ModifyError=ie,ls.DexieError=fr,ls.BulkError=ae;var Cr=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Bh(a){Cr=a}var zi={},Fh=100,Hr=typeof Promise>"u"?[]:function(){var a=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[a,l(a),a];var c=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[c,l(c),a]}(),Vi=Hr[0],Xe=Hr[1],Hr=Hr[2],Xe=Xe&&Xe.then,Yn=Vi&&Vi.constructor,eu=!!Hr,qi=function(a,c){Hi.push([a,c]),us&&(queueMicrotask(X_),us=!1)},ru=!0,us=!0,Xn=[],ds=[],nu=Ui,pn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:It,pgp:!1,env:{},finalize:It},et=pn,Hi=[],Zn=0,fs=[];function Y(a){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var c=this._PSD=et;if(typeof a!="function"){if(a!==zi)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&iu(this,this._value))}this._state=null,this._value=null,++c.ref,function u(f,h){try{h(function(g){if(f._state===null){if(g===f)throw new TypeError("A promise cannot be resolved with itself.");var v=f._lib&&$o();g&&typeof g.then=="function"?u(f,function(b,x){g instanceof Y?g._then(b,x):g.then(b,x)}):(f._state=!0,f._value=g,Uh(f)),v&&Bo()}},iu.bind(null,f))}catch(g){iu(f,g)}}(this,a)}var ou={get:function(){var a=et,c=gs;function u(f,h){var g=this,v=!a.global&&(a!==et||c!==gs),b=v&&!gn(),x=new Y(function(C,E){au(g,new jh(Vh(f,a,v,b),Vh(h,a,v,b),C,E,a))});return this._consoleTask&&(x._consoleTask=this._consoleTask),x}return u.prototype=zi,u},set:function(a){S(this,"then",a&&a.prototype===zi?ou:{get:function(){return a},set:ou.set})}};function jh(a,c,u,f,h){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof c=="function"?c:null,this.resolve=u,this.reject=f,this.psd=h}function iu(a,c){var u,f;ds.push(c),a._state===null&&(u=a._lib&&$o(),c=nu(c),a._state=!1,a._value=c,f=a,Xn.some(function(h){return h._value===f._value})||Xn.push(f),Uh(a),u&&Bo())}function Uh(a){var c=a._listeners;a._listeners=[];for(var u=0,f=c.length;u<f;++u)au(a,c[u]);var h=a._PSD;--h.ref||h.finalize(),Zn===0&&(++Zn,qi(function(){--Zn==0&&su()},[]))}function au(a,c){if(a._state!==null){var u=a._state?c.onFulfilled:c.onRejected;if(u===null)return(a._state?c.resolve:c.reject)(a._value);++c.psd.ref,++Zn,qi(Y_,[u,a,c])}else a._listeners.push(c)}function Y_(a,c,u){try{var f,h=c._value;!c._state&&ds.length&&(ds=[]),f=Cr&&c._consoleTask?c._consoleTask.run(function(){return a(h)}):a(h),c._state||ds.indexOf(h)!==-1||function(g){for(var v=Xn.length;v;)if(Xn[--v]._value===g._value)return Xn.splice(v,1)}(c),u.resolve(f)}catch(g){u.reject(g)}finally{--Zn==0&&su(),--u.psd.ref||u.psd.finalize()}}function X_(){Jn(pn,function(){$o()&&Bo()})}function $o(){var a=ru;return us=ru=!1,a}function Bo(){var a,c,u;do for(;0<Hi.length;)for(a=Hi,Hi=[],u=a.length,c=0;c<u;++c){var f=a[c];f[0].apply(null,f[1])}while(0<Hi.length);us=ru=!0}function su(){var a=Xn;Xn=[],a.forEach(function(f){f._PSD.onunhandled.call(null,f._value,f)});for(var c=fs.slice(0),u=c.length;u;)c[--u]()}function hs(a){return new Y(zi,!1,a)}function Ut(a,c){var u=et;return function(){var f=$o(),h=et;try{return vn(u,!0),a.apply(this,arguments)}catch(g){c&&c(g)}finally{vn(h,!1),f&&Bo()}}}m(Y.prototype,{then:ou,_then:function(a,c){au(this,new jh(null,null,a,c,et))},catch:function(a){if(arguments.length===1)return this.then(null,a);var c=a,u=arguments[1];return typeof c=="function"?this.then(null,function(f){return(f instanceof c?u:hs)(f)}):this.then(null,function(f){return(f&&f.name===c?u:hs)(f)})},finally:function(a){return this.then(function(c){return Y.resolve(a()).then(function(){return c})},function(c){return Y.resolve(a()).then(function(){return hs(c)})})},timeout:function(a,c){var u=this;return a<1/0?new Y(function(f,h){var g=setTimeout(function(){return h(new ot.Timeout(c))},a);u.then(f,h).finally(clearTimeout.bind(null,g))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&S(Y.prototype,Symbol.toStringTag,"Dexie.Promise"),pn.env=zh(),m(Y,{all:function(){var a=Pe.apply(null,arguments).map(vs);return new Y(function(c,u){a.length===0&&c([]);var f=a.length;a.forEach(function(h,g){return Y.resolve(h).then(function(v){a[g]=v,--f||c(a)},u)})})},resolve:function(a){return a instanceof Y?a:a&&typeof a.then=="function"?new Y(function(c,u){a.then(c,u)}):new Y(zi,!0,a)},reject:hs,race:function(){var a=Pe.apply(null,arguments).map(vs);return new Y(function(c,u){a.map(function(f){return Y.resolve(f).then(c,u)})})},PSD:{get:function(){return et},set:function(a){return et=a}},totalEchoes:{get:function(){return gs}},newPSD:mn,usePSD:Jn,scheduler:{get:function(){return qi},set:function(a){qi=a}},rejectionMapper:{get:function(){return nu},set:function(a){nu=a}},follow:function(a,c){return new Y(function(u,f){return mn(function(h,g){var v=et;v.unhandleds=[],v.onunhandled=g,v.finalize=Qn(function(){var b,x=this;b=function(){x.unhandleds.length===0?h():g(x.unhandleds[0])},fs.push(function C(){b(),fs.splice(fs.indexOf(C),1)}),++Zn,qi(function(){--Zn==0&&su()},[])},v.finalize),a()},c,u,f)})}}),Yn&&(Yn.allSettled&&S(Y,"allSettled",function(){var a=Pe.apply(null,arguments).map(vs);return new Y(function(c){a.length===0&&c([]);var u=a.length,f=new Array(u);a.forEach(function(h,g){return Y.resolve(h).then(function(v){return f[g]={status:"fulfilled",value:v}},function(v){return f[g]={status:"rejected",reason:v}}).then(function(){return--u||c(f)})})})}),Yn.any&&typeof AggregateError<"u"&&S(Y,"any",function(){var a=Pe.apply(null,arguments).map(vs);return new Y(function(c,u){a.length===0&&u(new AggregateError([]));var f=a.length,h=new Array(f);a.forEach(function(g,v){return Y.resolve(g).then(function(b){return c(b)},function(b){h[v]=b,--f||u(new AggregateError(h))})})})}),Yn.withResolvers&&(Y.withResolvers=Yn.withResolvers));var se={awaits:0,echoes:0,id:0},Z_=0,ps=[],ms=0,gs=0,J_=0;function mn(a,c,u,f){var h=et,g=Object.create(h);return g.parent=h,g.ref=0,g.global=!1,g.id=++J_,pn.env,g.env=eu?{Promise:Y,PromiseProp:{value:Y,configurable:!0,writable:!0},all:Y.all,race:Y.race,allSettled:Y.allSettled,any:Y.any,resolve:Y.resolve,reject:Y.reject}:{},c&&s(g,c),++h.ref,g.finalize=function(){--this.parent.ref||this.parent.finalize()},f=Jn(g,a,u,f),g.ref===0&&g.finalize(),f}function Fo(){return se.id||(se.id=++Z_),++se.awaits,se.echoes+=Fh,se.id}function gn(){return!!se.awaits&&(--se.awaits==0&&(se.id=0),se.echoes=se.awaits*Fh,!0)}function vs(a){return se.echoes&&a&&a.constructor===Yn?(Fo(),a.then(function(c){return gn(),c},function(c){return gn(),Kt(c)})):a}function tx(){var a=ps[ps.length-1];ps.pop(),vn(a,!1)}function vn(a,c){var u,f=et;(c?!se.echoes||ms++&&a===et:!ms||--ms&&a===et)||queueMicrotask(c?(function(h){++gs,se.echoes&&--se.echoes!=0||(se.echoes=se.awaits=se.id=0),ps.push(et),vn(h,!0)}).bind(null,a):tx),a!==et&&(et=a,f===pn&&(pn.env=zh()),eu&&(u=pn.env.Promise,c=a.env,(f.global||a.global)&&(Object.defineProperty(n,"Promise",c.PromiseProp),u.all=c.all,u.race=c.race,u.resolve=c.resolve,u.reject=c.reject,c.allSettled&&(u.allSettled=c.allSettled),c.any&&(u.any=c.any))))}function zh(){var a=n.Promise;return eu?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(n,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject}:{}}function Jn(a,c,u,f,h){var g=et;try{return vn(a,!0),c(u,f,h)}finally{vn(g,!1)}}function Vh(a,c,u,f){return typeof a!="function"?a:function(){var h=et;u&&Fo(),vn(c,!0);try{return a.apply(this,arguments)}finally{vn(h,!1),f&&queueMicrotask(gn)}}}function cu(a){Promise===Yn&&se.echoes===0?ms===0?a():enqueueNativeMicroTask(a):setTimeout(a,0)}(""+Xe).indexOf("[native code]")===-1&&(Fo=gn=It);var Kt=Y.reject,to="\uFFFF",qr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",qh="String expected.",jo=[],ys="__dbnames",lu="readonly",uu="readwrite";function eo(a,c){return a?c?function(){return a.apply(this,arguments)&&c.apply(this,arguments)}:a:c}var Hh={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function bs(a){return typeof a!="string"||/\./.test(a)?function(c){return c}:function(c){return c[a]===void 0&&a in c&&delete(c=ur(c))[a],c}}function Wh(){throw ot.Type()}function _t(a,c){try{var u=Kh(a),f=Kh(c);if(u!==f)return u==="Array"?1:f==="Array"?-1:u==="binary"?1:f==="binary"?-1:u==="string"?1:f==="string"?-1:u==="Date"?1:f!=="Date"?NaN:-1;switch(u){case"number":case"Date":case"string":return c<a?1:a<c?-1:0;case"binary":return function(h,g){for(var v=h.length,b=g.length,x=v<b?v:b,C=0;C<x;++C)if(h[C]!==g[C])return h[C]<g[C]?-1:1;return v===b?0:v<b?-1:1}(Gh(a),Gh(c));case"Array":return function(h,g){for(var v=h.length,b=g.length,x=v<b?v:b,C=0;C<x;++C){var E=_t(h[C],g[C]);if(E!==0)return E}return v===b?0:v<b?-1:1}(a,c)}}catch{}return NaN}function Kh(a){var c=typeof a;return c!="object"?c:ArrayBuffer.isView(a)?"binary":(a=dr(a),a==="ArrayBuffer"?"binary":a)}function Gh(a){return a instanceof Uint8Array?a:ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var Qh=(jt.prototype._trans=function(a,c,u){var f=this._tx||et.trans,h=this.name,g=Cr&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(a==="readonly"?"read":"write"," ").concat(this.name));function v(C,E,_){if(!_.schema[h])throw new ot.NotFound("Table "+h+" not part of transaction");return c(_.idbtrans,_)}var b=$o();try{var x=f&&f.db._novip===this.db._novip?f===et.trans?f._promise(a,v,u):mn(function(){return f._promise(a,v,u)},{trans:f,transless:et.transless||et}):function C(E,_,I,w){if(E.idbdb&&(E._state.openComplete||et.letThrough||E._vip)){var O=E._createTransaction(_,I,E._dbSchema);try{O.create(),E._state.PR1398_maxLoop=3}catch(A){return A.name===hn.InvalidState&&E.isOpen()&&0<--E._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),E.close({disableAutoOpen:!1}),E.open().then(function(){return C(E,_,I,w)})):Kt(A)}return O._promise(_,function(A,R){return mn(function(){return et.trans=O,w(A,R,O)})}).then(function(A){if(_==="readwrite")try{O.idbtrans.commit()}catch{}return _==="readonly"?A:O._completion.then(function(){return A})})}if(E._state.openComplete)return Kt(new ot.DatabaseClosed(E._state.dbOpenError));if(!E._state.isBeingOpened){if(!E._state.autoOpen)return Kt(new ot.DatabaseClosed);E.open().catch(It)}return E._state.dbReadyPromise.then(function(){return C(E,_,I,w)})}(this.db,a,[this.name],v);return g&&(x._consoleTask=g,x=x.catch(function(C){return console.trace(C),Kt(C)})),x}finally{b&&Bo()}},jt.prototype.get=function(a,c){var u=this;return a&&a.constructor===Object?this.where(a).first(c):a==null?Kt(new ot.Type("Invalid argument to Table.get()")):this._trans("readonly",function(f){return u.core.get({trans:f,key:a}).then(function(h){return u.hook.reading.fire(h)})}).then(c)},jt.prototype.where=function(a){if(typeof a=="string")return new this.db.WhereClause(this,a);if(i(a))return new this.db.WhereClause(this,"[".concat(a.join("+"),"]"));var c=o(a);if(c.length===1)return this.where(c[0]).equals(a[c[0]]);var u=this.schema.indexes.concat(this.schema.primKey).filter(function(b){if(b.compound&&c.every(function(C){return 0<=b.keyPath.indexOf(C)})){for(var x=0;x<c.length;++x)if(c.indexOf(b.keyPath[x])===-1)return!1;return!0}return!1}).sort(function(b,x){return b.keyPath.length-x.keyPath.length})[0];if(u&&this.db._maxKey!==to){var g=u.keyPath.slice(0,c.length);return this.where(g).equals(g.map(function(x){return a[x]}))}!u&&Cr&&console.warn("The query ".concat(JSON.stringify(a)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(c.join("+"),"]"));var f=this.schema.idxByName;function h(b,x){return _t(b,x)===0}var v=c.reduce(function(_,x){var C=_[0],E=_[1],_=f[x],I=a[x];return[C||_,C||!_?eo(E,_&&_.multi?function(w){return w=At(w,x),i(w)&&w.some(function(O){return h(I,O)})}:function(w){return h(I,At(w,x))}):E]},[null,null]),g=v[0],v=v[1];return g?this.where(g.name).equals(a[g.keyPath]).filter(v):u?this.filter(v):this.where(c).equals("")},jt.prototype.filter=function(a){return this.toCollection().and(a)},jt.prototype.count=function(a){return this.toCollection().count(a)},jt.prototype.offset=function(a){return this.toCollection().offset(a)},jt.prototype.limit=function(a){return this.toCollection().limit(a)},jt.prototype.each=function(a){return this.toCollection().each(a)},jt.prototype.toArray=function(a){return this.toCollection().toArray(a)},jt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},jt.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,i(a)?"[".concat(a.join("+"),"]"):a))},jt.prototype.reverse=function(){return this.toCollection().reverse()},jt.prototype.mapToClass=function(a){var c,u=this.db,f=this.name;function h(){return c!==null&&c.apply(this,arguments)||this}(this.schema.mappedClass=a).prototype instanceof Wh&&(function(x,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function E(){this.constructor=x}t(x,C),x.prototype=C===null?Object.create(C):(E.prototype=C.prototype,new E)}(h,c=a),Object.defineProperty(h.prototype,"db",{get:function(){return u},enumerable:!1,configurable:!0}),h.prototype.table=function(){return f},a=h);for(var g=new Set,v=a.prototype;v;v=l(v))Object.getOwnPropertyNames(v).forEach(function(x){return g.add(x)});function b(x){if(!x)return x;var C,E=Object.create(a.prototype);for(C in x)if(!g.has(C))try{E[C]=x[C]}catch{}return E}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=b,this.hook("reading",b),a},jt.prototype.defineClass=function(){return this.mapToClass(function(a){s(this,a)})},jt.prototype.add=function(a,c){var u=this,f=this.schema.primKey,h=f.auto,g=f.keyPath,v=a;return g&&h&&(v=bs(g)(a)),this._trans("readwrite",function(b){return u.core.mutate({trans:b,type:"add",keys:c!=null?[c]:null,values:[v]})}).then(function(b){return b.numFailures?Y.reject(b.failures[0]):b.lastResult}).then(function(b){if(g)try{st(a,g,b)}catch{}return b})},jt.prototype.update=function(a,c){return typeof a!="object"||i(a)?this.where(":id").equals(a).modify(c):(a=At(a,this.schema.primKey.keyPath),a===void 0?Kt(new ot.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(a).modify(c))},jt.prototype.put=function(a,c){var u=this,f=this.schema.primKey,h=f.auto,g=f.keyPath,v=a;return g&&h&&(v=bs(g)(a)),this._trans("readwrite",function(b){return u.core.mutate({trans:b,type:"put",values:[v],keys:c!=null?[c]:null})}).then(function(b){return b.numFailures?Y.reject(b.failures[0]):b.lastResult}).then(function(b){if(g)try{st(a,g,b)}catch{}return b})},jt.prototype.delete=function(a){var c=this;return this._trans("readwrite",function(u){return c.core.mutate({trans:u,type:"delete",keys:[a]})}).then(function(u){return u.numFailures?Y.reject(u.failures[0]):void 0})},jt.prototype.clear=function(){var a=this;return this._trans("readwrite",function(c){return a.core.mutate({trans:c,type:"deleteRange",range:Hh})}).then(function(c){return c.numFailures?Y.reject(c.failures[0]):void 0})},jt.prototype.bulkGet=function(a){var c=this;return this._trans("readonly",function(u){return c.core.getMany({keys:a,trans:u}).then(function(f){return f.map(function(h){return c.hook.reading.fire(h)})})})},jt.prototype.bulkAdd=function(a,c,u){var f=this,h=Array.isArray(c)?c:void 0,g=(u=u||(h?void 0:c))?u.allKeys:void 0;return this._trans("readwrite",function(v){var C=f.schema.primKey,b=C.auto,C=C.keyPath;if(C&&h)throw new ot.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(h&&h.length!==a.length)throw new ot.InvalidArgument("Arguments objects and keys must have the same length");var x=a.length,C=C&&b?a.map(bs(C)):a;return f.core.mutate({trans:v,type:"add",keys:h,values:C,wantResults:g}).then(function(O){var _=O.numFailures,I=O.results,w=O.lastResult,O=O.failures;if(_===0)return g?I:w;throw new ae("".concat(f.name,".bulkAdd(): ").concat(_," of ").concat(x," operations failed"),O)})})},jt.prototype.bulkPut=function(a,c,u){var f=this,h=Array.isArray(c)?c:void 0,g=(u=u||(h?void 0:c))?u.allKeys:void 0;return this._trans("readwrite",function(v){var C=f.schema.primKey,b=C.auto,C=C.keyPath;if(C&&h)throw new ot.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(h&&h.length!==a.length)throw new ot.InvalidArgument("Arguments objects and keys must have the same length");var x=a.length,C=C&&b?a.map(bs(C)):a;return f.core.mutate({trans:v,type:"put",keys:h,values:C,wantResults:g}).then(function(O){var _=O.numFailures,I=O.results,w=O.lastResult,O=O.failures;if(_===0)return g?I:w;throw new ae("".concat(f.name,".bulkPut(): ").concat(_," of ").concat(x," operations failed"),O)})})},jt.prototype.bulkUpdate=function(a){var c=this,u=this.core,f=a.map(function(v){return v.key}),h=a.map(function(v){return v.changes}),g=[];return this._trans("readwrite",function(v){return u.getMany({trans:v,keys:f,cache:"clone"}).then(function(b){var x=[],C=[];a.forEach(function(_,I){var w=_.key,O=_.changes,A=b[I];if(A){for(var R=0,T=Object.keys(O);R<T.length;R++){var M=T[R],N=O[M];if(M===c.schema.primKey.keyPath){if(_t(N,w)!==0)throw new ot.Constraint("Cannot update primary key in bulkUpdate()")}else st(A,M,N)}g.push(I),x.push(w),C.push(A)}});var E=x.length;return u.mutate({trans:v,type:"put",keys:x,values:C,updates:{keys:f,changeSpecs:h}}).then(function(_){var I=_.numFailures,w=_.failures;if(I===0)return E;for(var O=0,A=Object.keys(w);O<A.length;O++){var R,T=A[O],M=g[Number(T)];M!=null&&(R=w[T],delete w[T],w[M]=R)}throw new ae("".concat(c.name,".bulkUpdate(): ").concat(I," of ").concat(E," operations failed"),w)})})})},jt.prototype.bulkDelete=function(a){var c=this,u=a.length;return this._trans("readwrite",function(f){return c.core.mutate({trans:f,type:"delete",keys:a})}).then(function(v){var h=v.numFailures,g=v.lastResult,v=v.failures;if(h===0)return g;throw new ae("".concat(c.name,".bulkDelete(): ").concat(h," of ").concat(u," operations failed"),v)})},jt);function jt(){}function Wi(a){function c(v,b){if(b){for(var x=arguments.length,C=new Array(x-1);--x;)C[x-1]=arguments[x];return u[v].subscribe.apply(null,C),a}if(typeof v=="string")return u[v]}var u={};c.addEventType=g;for(var f=1,h=arguments.length;f<h;++f)g(arguments[f]);return c;function g(v,b,x){if(typeof v!="object"){var C;b=b||Q_;var E={subscribers:[],fire:x=x||It,subscribe:function(_){E.subscribers.indexOf(_)===-1&&(E.subscribers.push(_),E.fire=b(E.fire,_))},unsubscribe:function(_){E.subscribers=E.subscribers.filter(function(I){return I!==_}),E.fire=E.subscribers.reduce(b,x)}};return u[v]=c[v]=E}o(C=v).forEach(function(_){var I=C[_];if(i(I))g(_,C[_][0],C[_][1]);else{if(I!=="asap")throw new ot.InvalidArgument("Invalid event config");var w=g(_,Ui,function(){for(var O=arguments.length,A=new Array(O);O--;)A[O]=arguments[O];w.subscribers.forEach(function(R){tt(function(){R.apply(null,A)})})})}})}}function Ki(a,c){return D(c).from({prototype:a}),c}function Uo(a,c){return!(a.filter||a.algorithm||a.or)&&(c?a.justLimit:!a.replayFilter)}function du(a,c){a.filter=eo(a.filter,c)}function fu(a,c,u){var f=a.replayFilter;a.replayFilter=f?function(){return eo(f(),c())}:c,a.justLimit=u&&!f}function _s(a,c){if(a.isPrimKey)return c.primaryKey;var u=c.getIndexByKeyPath(a.index);if(!u)throw new ot.Schema("KeyPath "+a.index+" on object store "+c.name+" is not indexed");return u}function Yh(a,c,u){var f=_s(a,c.schema);return c.openCursor({trans:u,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:f,range:a.range}})}function xs(a,c,u,f){var h=a.replayFilter?eo(a.filter,a.replayFilter()):a.filter;if(a.or){var g={},v=function(b,x,C){var E,_;h&&!h(x,C,function(I){return x.stop(I)},function(I){return x.fail(I)})||((_=""+(E=x.primaryKey))=="[object ArrayBuffer]"&&(_=""+new Uint8Array(E)),p(g,_)||(g[_]=!0,c(b,x,C)))};return Promise.all([a.or._iterate(v,u),Xh(Yh(a,f,u),a.algorithm,v,!a.keysOnly&&a.valueMapper)])}return Xh(Yh(a,f,u),eo(a.algorithm,h),c,!a.keysOnly&&a.valueMapper)}function Xh(a,c,u,f){var h=Ut(f?function(g,v,b){return u(f(g),v,b)}:u);return a.then(function(g){if(g)return g.start(function(){var v=function(){return g.continue()};c&&!c(g,function(b){return v=b},function(b){g.stop(b),v=It},function(b){g.fail(b),v=It})||h(g.value,g,function(b){return v=b}),v()})})}var Hr=Symbol(),Gi=(Zh.prototype.execute=function(a){if(this.add!==void 0){var c=this.add;if(i(c))return r(r([],i(a)?a:[],!0),c,!0).sort();if(typeof c=="number")return(Number(a)||0)+c;if(typeof c=="bigint")try{return BigInt(a)+c}catch{return BigInt(0)+c}throw new TypeError("Invalid term ".concat(c))}if(this.remove!==void 0){var u=this.remove;if(i(u))return i(a)?a.filter(function(f){return!u.includes(f)}).sort():[];if(typeof u=="number")return Number(a)-u;if(typeof u=="bigint")try{return BigInt(a)-u}catch{return BigInt(0)-u}throw new TypeError("Invalid subtrahend ".concat(u))}return c=(c=this.replacePrefix)===null||c===void 0?void 0:c[0],c&&typeof a=="string"&&a.startsWith(c)?this.replacePrefix[1]+a.substring(c.length):a},Zh);function Zh(a){Object.assign(this,a)}var ex=(wt.prototype._read=function(a,c){var u=this._ctx;return u.error?u.table._trans(null,Kt.bind(null,u.error)):u.table._trans("readonly",a).then(c)},wt.prototype._write=function(a){var c=this._ctx;return c.error?c.table._trans(null,Kt.bind(null,c.error)):c.table._trans("readwrite",a,"locked")},wt.prototype._addAlgorithm=function(a){var c=this._ctx;c.algorithm=eo(c.algorithm,a)},wt.prototype._iterate=function(a,c){return xs(this._ctx,a,c,this._ctx.table.core)},wt.prototype.clone=function(a){var c=Object.create(this.constructor.prototype),u=Object.create(this._ctx);return a&&s(u,a),c._ctx=u,c},wt.prototype.raw=function(){return this._ctx.valueMapper=null,this},wt.prototype.each=function(a){var c=this._ctx;return this._read(function(u){return xs(c,a,u,c.table.core)})},wt.prototype.count=function(a){var c=this;return this._read(function(u){var f=c._ctx,h=f.table.core;if(Uo(f,!0))return h.count({trans:u,query:{index:_s(f,h.schema),range:f.range}}).then(function(v){return Math.min(v,f.limit)});var g=0;return xs(f,function(){return++g,!1},u,h).then(function(){return g})}).then(a)},wt.prototype.sortBy=function(a,c){var u=a.split(".").reverse(),f=u[0],h=u.length-1;function g(x,C){return C?g(x[u[C]],C-1):x[f]}var v=this._ctx.dir==="next"?1:-1;function b(x,C){return _t(g(x,h),g(C,h))*v}return this.toArray(function(x){return x.sort(b)}).then(c)},wt.prototype.toArray=function(a){var c=this;return this._read(function(u){var f=c._ctx;if(f.dir==="next"&&Uo(f,!0)&&0<f.limit){var h=f.valueMapper,g=_s(f,f.table.core.schema);return f.table.core.query({trans:u,limit:f.limit,values:!0,query:{index:g,range:f.range}}).then(function(b){return b=b.result,h?b.map(h):b})}var v=[];return xs(f,function(b){return v.push(b)},u,f.table.core).then(function(){return v})},a)},wt.prototype.offset=function(a){var c=this._ctx;return a<=0||(c.offset+=a,Uo(c)?fu(c,function(){var u=a;return function(f,h){return u===0||(u===1?--u:h(function(){f.advance(u),u=0}),!1)}}):fu(c,function(){var u=a;return function(){return--u<0}})),this},wt.prototype.limit=function(a){return this._ctx.limit=Math.min(this._ctx.limit,a),fu(this._ctx,function(){var c=a;return function(u,f,h){return--c<=0&&f(h),0<=c}},!0),this},wt.prototype.until=function(a,c){return du(this._ctx,function(u,f,h){return!a(u.value)||(f(h),c)}),this},wt.prototype.first=function(a){return this.limit(1).toArray(function(c){return c[0]}).then(a)},wt.prototype.last=function(a){return this.reverse().first(a)},wt.prototype.filter=function(a){var c;return du(this._ctx,function(u){return a(u.value)}),(c=this._ctx).isMatch=eo(c.isMatch,a),this},wt.prototype.and=function(a){return this.filter(a)},wt.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)},wt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},wt.prototype.desc=function(){return this.reverse()},wt.prototype.eachKey=function(a){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(u,f){a(f.key,f)})},wt.prototype.eachUniqueKey=function(a){return this._ctx.unique="unique",this.eachKey(a)},wt.prototype.eachPrimaryKey=function(a){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(u,f){a(f.primaryKey,f)})},wt.prototype.keys=function(a){var c=this._ctx;c.keysOnly=!c.isMatch;var u=[];return this.each(function(f,h){u.push(h.key)}).then(function(){return u}).then(a)},wt.prototype.primaryKeys=function(a){var c=this._ctx;if(c.dir==="next"&&Uo(c,!0)&&0<c.limit)return this._read(function(f){var h=_s(c,c.table.core.schema);return c.table.core.query({trans:f,values:!1,limit:c.limit,query:{index:h,range:c.range}})}).then(function(f){return f.result}).then(a);c.keysOnly=!c.isMatch;var u=[];return this.each(function(f,h){u.push(h.primaryKey)}).then(function(){return u}).then(a)},wt.prototype.uniqueKeys=function(a){return this._ctx.unique="unique",this.keys(a)},wt.prototype.firstKey=function(a){return this.limit(1).keys(function(c){return c[0]}).then(a)},wt.prototype.lastKey=function(a){return this.reverse().firstKey(a)},wt.prototype.distinct=function(){var a=this._ctx,a=a.index&&a.table.schema.idxByName[a.index];if(!a||!a.multi)return this;var c={};return du(this._ctx,function(h){var f=h.primaryKey.toString(),h=p(c,f);return c[f]=!0,!h}),this},wt.prototype.modify=function(a){var c=this,u=this._ctx;return this._write(function(f){var h,g,v;v=typeof a=="function"?a:(h=o(a),g=h.length,function(R){for(var T=!1,M=0;M<g;++M){var N=h[M],B=a[N],V=At(R,N);B instanceof Gi?(st(R,N,B.execute(V)),T=!0):V!==B&&(st(R,N,B),T=!0)}return T});var b=u.table.core,_=b.schema.primaryKey,x=_.outbound,C=_.extractKey,E=200,_=c.db._options.modifyChunkSize;_&&(E=typeof _=="object"?_[b.name]||_["*"]||200:_);function I(R,N){var M=N.failures,N=N.numFailures;O+=R-N;for(var B=0,V=o(M);B<V.length;B++){var K=V[B];w.push(M[K])}}var w=[],O=0,A=[];return c.clone().primaryKeys().then(function(R){function T(N){var B=Math.min(E,R.length-N);return b.getMany({trans:f,keys:R.slice(N,N+B),cache:"immutable"}).then(function(V){for(var K=[],q=[],H=x?[]:null,Q=[],W=0;W<B;++W){var Z=V[W],mt={value:ur(Z),primKey:R[N+W]};v.call(mt,mt.value,mt)!==!1&&(mt.value==null?Q.push(R[N+W]):x||_t(C(Z),C(mt.value))===0?(q.push(mt.value),x&&H.push(R[N+W])):(Q.push(R[N+W]),K.push(mt.value)))}return Promise.resolve(0<K.length&&b.mutate({trans:f,type:"add",values:K}).then(function(vt){for(var yt in vt.failures)Q.splice(parseInt(yt),1);I(K.length,vt)})).then(function(){return(0<q.length||M&&typeof a=="object")&&b.mutate({trans:f,type:"put",keys:H,values:q,criteria:M,changeSpec:typeof a!="function"&&a,isAdditionalChunk:0<N}).then(function(vt){return I(q.length,vt)})}).then(function(){return(0<Q.length||M&&a===hu)&&b.mutate({trans:f,type:"delete",keys:Q,criteria:M,isAdditionalChunk:0<N}).then(function(vt){return I(Q.length,vt)})}).then(function(){return R.length>N+B&&T(N+E)})})}var M=Uo(u)&&u.limit===1/0&&(typeof a!="function"||a===hu)&&{index:u.index,range:u.range};return T(0).then(function(){if(0<w.length)throw new ie("Error modifying one or more objects",w,O,A);return R.length})})})},wt.prototype.delete=function(){var a=this._ctx,c=a.range;return Uo(a)&&(a.isPrimKey||c.type===3)?this._write(function(u){var f=a.table.core.schema.primaryKey,h=c;return a.table.core.count({trans:u,query:{index:f,range:h}}).then(function(g){return a.table.core.mutate({trans:u,type:"deleteRange",range:h}).then(function(v){var b=v.failures;if(v.lastResult,v.results,v=v.numFailures,v)throw new ie("Could not delete some values",Object.keys(b).map(function(x){return b[x]}),g-v);return g-v})})}):this.modify(hu)},wt);function wt(){}var hu=function(a,c){return c.value=null};function rx(a,c){return a<c?-1:a===c?0:1}function nx(a,c){return c<a?-1:a===c?0:1}function Fe(a,c,u){return a=a instanceof tp?new a.Collection(a):a,a._ctx.error=new(u||TypeError)(c),a}function zo(a){return new a.Collection(a,function(){return Jh("")}).limit(0)}function ws(a,c,u,f){var h,g,v,b,x,C,E,_=u.length;if(!u.every(function(O){return typeof O=="string"}))return Fe(a,qh);function I(O){h=O==="next"?function(R){return R.toUpperCase()}:function(R){return R.toLowerCase()},g=O==="next"?function(R){return R.toLowerCase()}:function(R){return R.toUpperCase()},v=O==="next"?rx:nx;var A=u.map(function(R){return{lower:g(R),upper:h(R)}}).sort(function(R,T){return v(R.lower,T.lower)});b=A.map(function(R){return R.upper}),x=A.map(function(R){return R.lower}),E=(C=O)==="next"?"":f}I("next"),a=new a.Collection(a,function(){return yn(b[0],x[_-1]+f)}),a._ondirectionchange=function(O){I(O)};var w=0;return a._addAlgorithm(function(O,A,R){var T=O.key;if(typeof T!="string")return!1;var M=g(T);if(c(M,x,w))return!0;for(var N=null,B=w;B<_;++B){var V=function(K,q,H,Q,W,Z){for(var mt=Math.min(K.length,Q.length),vt=-1,yt=0;yt<mt;++yt){var je=q[yt];if(je!==Q[yt])return W(K[yt],H[yt])<0?K.substr(0,yt)+H[yt]+H.substr(yt+1):W(K[yt],Q[yt])<0?K.substr(0,yt)+Q[yt]+H.substr(yt+1):0<=vt?K.substr(0,vt)+q[vt]+H.substr(vt+1):null;W(K[yt],je)<0&&(vt=yt)}return mt<Q.length&&Z==="next"?K+H.substr(K.length):mt<K.length&&Z==="prev"?K.substr(0,H.length):vt<0?null:K.substr(0,vt)+Q[vt]+H.substr(vt+1)}(T,M,b[B],x[B],v,C);V===null&&N===null?w=B+1:(N===null||0<v(N,V))&&(N=V)}return A(N!==null?function(){O.continue(N+E)}:R),!1}),a}function yn(a,c,u,f){return{type:2,lower:a,upper:c,lowerOpen:u,upperOpen:f}}function Jh(a){return{type:1,lower:a,upper:a}}var tp=(Object.defineProperty(ce.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),ce.prototype.between=function(a,c,u,f){u=u!==!1,f=f===!0;try{return 0<this._cmp(a,c)||this._cmp(a,c)===0&&(u||f)&&(!u||!f)?zo(this):new this.Collection(this,function(){return yn(a,c,!u,!f)})}catch{return Fe(this,qr)}},ce.prototype.equals=function(a){return a==null?Fe(this,qr):new this.Collection(this,function(){return Jh(a)})},ce.prototype.above=function(a){return a==null?Fe(this,qr):new this.Collection(this,function(){return yn(a,void 0,!0)})},ce.prototype.aboveOrEqual=function(a){return a==null?Fe(this,qr):new this.Collection(this,function(){return yn(a,void 0,!1)})},ce.prototype.below=function(a){return a==null?Fe(this,qr):new this.Collection(this,function(){return yn(void 0,a,!1,!0)})},ce.prototype.belowOrEqual=function(a){return a==null?Fe(this,qr):new this.Collection(this,function(){return yn(void 0,a)})},ce.prototype.startsWith=function(a){return typeof a!="string"?Fe(this,qh):this.between(a,a+to,!0,!0)},ce.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):ws(this,function(c,u){return c.indexOf(u[0])===0},[a],to)},ce.prototype.equalsIgnoreCase=function(a){return ws(this,function(c,u){return c===u[0]},[a],"")},ce.prototype.anyOfIgnoreCase=function(){var a=Pe.apply(dn,arguments);return a.length===0?zo(this):ws(this,function(c,u){return u.indexOf(c)!==-1},a,"")},ce.prototype.startsWithAnyOfIgnoreCase=function(){var a=Pe.apply(dn,arguments);return a.length===0?zo(this):ws(this,function(c,u){return u.some(function(f){return c.indexOf(f)===0})},a,to)},ce.prototype.anyOf=function(){var a=this,c=Pe.apply(dn,arguments),u=this._cmp;try{c.sort(u)}catch{return Fe(this,qr)}if(c.length===0)return zo(this);var f=new this.Collection(this,function(){return yn(c[0],c[c.length-1])});f._ondirectionchange=function(g){u=g==="next"?a._ascending:a._descending,c.sort(u)};var h=0;return f._addAlgorithm(function(g,v,b){for(var x=g.key;0<u(x,c[h]);)if(++h===c.length)return v(b),!1;return u(x,c[h])===0||(v(function(){g.continue(c[h])}),!1)}),f},ce.prototype.notEqual=function(a){return this.inAnyRange([[-1/0,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},ce.prototype.noneOf=function(){var a=Pe.apply(dn,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch{return Fe(this,qr)}var c=a.reduce(function(u,f){return u?u.concat([[u[u.length-1][1],f]]):[[-1/0,f]]},null);return c.push([a[a.length-1],this.db._maxKey]),this.inAnyRange(c,{includeLowers:!1,includeUppers:!1})},ce.prototype.inAnyRange=function(T,c){var u=this,f=this._cmp,h=this._ascending,g=this._descending,v=this._min,b=this._max;if(T.length===0)return zo(this);if(!T.every(function(M){return M[0]!==void 0&&M[1]!==void 0&&h(M[0],M[1])<=0}))return Fe(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ot.InvalidArgument);var x=!c||c.includeLowers!==!1,C=c&&c.includeUppers===!0,E,_=h;function I(M,N){return _(M[0],N[0])}try{(E=T.reduce(function(M,N){for(var B=0,V=M.length;B<V;++B){var K=M[B];if(f(N[0],K[1])<0&&0<f(N[1],K[0])){K[0]=v(K[0],N[0]),K[1]=b(K[1],N[1]);break}}return B===V&&M.push(N),M},[])).sort(I)}catch{return Fe(this,qr)}var w=0,O=C?function(M){return 0<h(M,E[w][1])}:function(M){return 0<=h(M,E[w][1])},A=x?function(M){return 0<g(M,E[w][0])}:function(M){return 0<=g(M,E[w][0])},R=O,T=new this.Collection(this,function(){return yn(E[0][0],E[E.length-1][1],!x,!C)});return T._ondirectionchange=function(M){_=M==="next"?(R=O,h):(R=A,g),E.sort(I)},T._addAlgorithm(function(M,N,B){for(var V,K=M.key;R(K);)if(++w===E.length)return N(B),!1;return!O(V=K)&&!A(V)||(u._cmp(K,E[w][1])===0||u._cmp(K,E[w][0])===0||N(function(){_===h?M.continue(E[w][0]):M.continue(E[w][1])}),!1)}),T},ce.prototype.startsWithAnyOf=function(){var a=Pe.apply(dn,arguments);return a.every(function(c){return typeof c=="string"})?a.length===0?zo(this):this.inAnyRange(a.map(function(c){return[c,c+to]})):Fe(this,"startsWithAnyOf() only works with strings")},ce);function ce(){}function Sr(a){return Ut(function(c){return Qi(c),a(c.target.error),!1})}function Qi(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var Yi="storagemutated",pu="x-storagemutated-1",bn=Wi(null,Yi),ox=(Rr.prototype._lock=function(){return rt(!et.global),++this._reculock,this._reculock!==1||et.global||(et.lockOwnerFor=this),this},Rr.prototype._unlock=function(){if(rt(!et.global),--this._reculock==0)for(et.global||(et.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var a=this._blockedFuncs.shift();try{Jn(a[1],a[0])}catch{}}return this},Rr.prototype._locked=function(){return this._reculock&&et.lockOwnerFor!==this},Rr.prototype.create=function(a){var c=this;if(!this.mode)return this;var u=this.db.idbdb,f=this.db._state.dbOpenError;if(rt(!this.idbtrans),!a&&!u)switch(f&&f.name){case"DatabaseClosedError":throw new ot.DatabaseClosed(f);case"MissingAPIError":throw new ot.MissingAPI(f.message,f);default:throw new ot.OpenFailed(f)}if(!this.active)throw new ot.TransactionInactive;return rt(this._completion._state===null),(a=this.idbtrans=a||(this.db.core||u).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ut(function(h){Qi(h),c._reject(a.error)}),a.onabort=Ut(function(h){Qi(h),c.active&&c._reject(new ot.Abort(a.error)),c.active=!1,c.on("abort").fire(h)}),a.oncomplete=Ut(function(){c.active=!1,c._resolve(),"mutatedParts"in a&&bn.storagemutated.fire(a.mutatedParts)}),this},Rr.prototype._promise=function(a,c,u){var f=this;if(a==="readwrite"&&this.mode!=="readwrite")return Kt(new ot.ReadOnly("Transaction is readonly"));if(!this.active)return Kt(new ot.TransactionInactive);if(this._locked())return new Y(function(g,v){f._blockedFuncs.push([function(){f._promise(a,c,u).then(g,v)},et])});if(u)return mn(function(){var g=new Y(function(v,b){f._lock();var x=c(v,b,f);x&&x.then&&x.then(v,b)});return g.finally(function(){return f._unlock()}),g._lib=!0,g});var h=new Y(function(g,v){var b=c(g,v,f);b&&b.then&&b.then(g,v)});return h._lib=!0,h},Rr.prototype._root=function(){return this.parent?this.parent._root():this},Rr.prototype.waitFor=function(a){var c,u=this._root(),f=Y.resolve(a);u._waitingFor?u._waitingFor=u._waitingFor.then(function(){return f}):(u._waitingFor=f,u._waitingQueue=[],c=u.idbtrans.objectStore(u.storeNames[0]),function g(){for(++u._spinCount;u._waitingQueue.length;)u._waitingQueue.shift()();u._waitingFor&&(c.get(-1/0).onsuccess=g)}());var h=u._waitingFor;return new Y(function(g,v){f.then(function(b){return u._waitingQueue.push(Ut(g.bind(null,b)))},function(b){return u._waitingQueue.push(Ut(v.bind(null,b)))}).finally(function(){u._waitingFor===h&&(u._waitingFor=null)})})},Rr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ot.Abort))},Rr.prototype.table=function(a){var c=this._memoizedTables||(this._memoizedTables={});if(p(c,a))return c[a];var u=this.schema[a];if(!u)throw new ot.NotFound("Table "+a+" not part of transaction");return u=new this.db.Table(a,u,this),u.core=this.db.core.table(a),c[a]=u},Rr);function Rr(){}function mu(a,c,u,f,h,g,v){return{name:a,keyPath:c,unique:u,multi:f,auto:h,compound:g,src:(u&&!v?"&":"")+(f?"*":"")+(h?"++":"")+ep(c)}}function ep(a){return typeof a=="string"?a:a?"["+[].join.call(a,"+")+"]":""}function gu(a,c,u){return{name:a,primKey:c,indexes:u,mappedClass:null,idxByName:(f=function(h){return[h.name,h]},u.reduce(function(h,g,v){return v=f(g,v),v&&(h[v[0]]=v[1]),h},{}))};var f}var Xi=function(a){try{return a.only([[]]),Xi=function(){return[[]]},[[]]}catch{return Xi=function(){return to},to}};function vu(a){return a==null?function(){}:typeof a=="string"?(c=a).split(".").length===1?function(u){return u[c]}:function(u){return At(u,c)}:function(u){return At(u,a)};var c}function rp(a){return[].slice.call(a)}var ix=0;function Zi(a){return a==null?":id":typeof a=="string"?a:"[".concat(a.join("+"),"]")}function ax(a,c,x){function f(R){if(R.type===3)return null;if(R.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var w=R.lower,O=R.upper,A=R.lowerOpen,R=R.upperOpen;return w===void 0?O===void 0?null:c.upperBound(O,!!R):O===void 0?c.lowerBound(w,!!A):c.bound(w,O,!!A,!!R)}function h(I){var w,O=I.name;return{name:O,schema:I,mutate:function(A){var R=A.trans,T=A.type,M=A.keys,N=A.values,B=A.range;return new Promise(function(V,K){V=Ut(V);var q=R.objectStore(O),H=q.keyPath==null,Q=T==="put"||T==="add";if(!Q&&T!=="delete"&&T!=="deleteRange")throw new Error("Invalid operation type: "+T);var W,Z=(M||N||{length:1}).length;if(M&&N&&M.length!==N.length)throw new Error("Given keys array must have same length as given values array.");if(Z===0)return V({numFailures:0,failures:{},results:[],lastResult:void 0});function mt(Ee){++je,Qi(Ee)}var vt=[],yt=[],je=0;if(T==="deleteRange"){if(B.type===4)return V({numFailures:je,failures:yt,results:[],lastResult:void 0});B.type===3?vt.push(W=q.clear()):vt.push(W=q.delete(f(B)))}else{var H=Q?H?[N,M]:[N,null]:[M,null],pt=H[0],_e=H[1];if(Q)for(var xe=0;xe<Z;++xe)vt.push(W=_e&&_e[xe]!==void 0?q[T](pt[xe],_e[xe]):q[T](pt[xe])),W.onerror=mt;else for(xe=0;xe<Z;++xe)vt.push(W=q[T](pt[xe])),W.onerror=mt}function Ns(Ee){Ee=Ee.target.result,vt.forEach(function(oo,Nu){return oo.error!=null&&(yt[Nu]=oo.error)}),V({numFailures:je,failures:yt,results:T==="delete"?M:vt.map(function(oo){return oo.result}),lastResult:Ee})}W.onerror=function(Ee){mt(Ee),Ns(Ee)},W.onsuccess=Ns})},getMany:function(A){var R=A.trans,T=A.keys;return new Promise(function(M,N){M=Ut(M);for(var B,V=R.objectStore(O),K=T.length,q=new Array(K),H=0,Q=0,W=function(vt){vt=vt.target,q[vt._pos]=vt.result,++Q===H&&M(q)},Z=Sr(N),mt=0;mt<K;++mt)T[mt]!=null&&((B=V.get(T[mt]))._pos=mt,B.onsuccess=W,B.onerror=Z,++H);H===0&&M(q)})},get:function(A){var R=A.trans,T=A.key;return new Promise(function(M,N){M=Ut(M);var B=R.objectStore(O).get(T);B.onsuccess=function(V){return M(V.target.result)},B.onerror=Sr(N)})},query:(w=C,function(A){return new Promise(function(R,T){R=Ut(R);var M,N,B,H=A.trans,V=A.values,K=A.limit,W=A.query,q=K===1/0?void 0:K,Q=W.index,W=W.range,H=H.objectStore(O),Q=Q.isPrimaryKey?H:H.index(Q.name),W=f(W);if(K===0)return R({result:[]});w?((q=V?Q.getAll(W,q):Q.getAllKeys(W,q)).onsuccess=function(Z){return R({result:Z.target.result})},q.onerror=Sr(T)):(M=0,N=!V&&"openKeyCursor"in Q?Q.openKeyCursor(W):Q.openCursor(W),B=[],N.onsuccess=function(Z){var mt=N.result;return mt?(B.push(V?mt.value:mt.primaryKey),++M===K?R({result:B}):void mt.continue()):R({result:B})},N.onerror=Sr(T))})}),openCursor:function(A){var R=A.trans,T=A.values,M=A.query,N=A.reverse,B=A.unique;return new Promise(function(V,K){V=Ut(V);var Q=M.index,q=M.range,H=R.objectStore(O),H=Q.isPrimaryKey?H:H.index(Q.name),Q=N?B?"prevunique":"prev":B?"nextunique":"next",W=!T&&"openKeyCursor"in H?H.openKeyCursor(f(q),Q):H.openCursor(f(q),Q);W.onerror=Sr(K),W.onsuccess=Ut(function(Z){var mt,vt,yt,je,pt=W.result;pt?(pt.___id=++ix,pt.done=!1,mt=pt.continue.bind(pt),vt=(vt=pt.continuePrimaryKey)&&vt.bind(pt),yt=pt.advance.bind(pt),je=function(){throw new Error("Cursor not stopped")},pt.trans=R,pt.stop=pt.continue=pt.continuePrimaryKey=pt.advance=function(){throw new Error("Cursor not started")},pt.fail=Ut(K),pt.next=function(){var _e=this,xe=1;return this.start(function(){return xe--?_e.continue():_e.stop()}).then(function(){return _e})},pt.start=function(_e){function xe(){if(W.result)try{_e()}catch(Ee){pt.fail(Ee)}else pt.done=!0,pt.start=function(){throw new Error("Cursor behind last entry")},pt.stop()}var Ns=new Promise(function(Ee,oo){Ee=Ut(Ee),W.onerror=Sr(oo),pt.fail=oo,pt.stop=function(Nu){pt.stop=pt.continue=pt.continuePrimaryKey=pt.advance=je,Ee(Nu)}});return W.onsuccess=Ut(function(Ee){W.onsuccess=xe,xe()}),pt.continue=mt,pt.continuePrimaryKey=vt,pt.advance=yt,xe(),Ns},V(pt)):V(null)},K)})},count:function(A){var R=A.query,T=A.trans,M=R.index,N=R.range;return new Promise(function(B,V){var K=T.objectStore(O),q=M.isPrimaryKey?K:K.index(M.name),K=f(N),q=K?q.count(K):q.count();q.onsuccess=Ut(function(H){return B(H.target.result)}),q.onerror=Sr(V)})}}}var g,v,b,E=(v=x,b=rp((g=a).objectStoreNames),{schema:{name:g.name,tables:b.map(function(I){return v.objectStore(I)}).map(function(I){var w=I.keyPath,R=I.autoIncrement,O=i(w),A={},R={name:I.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:w==null,compound:O,keyPath:w,autoIncrement:R,unique:!0,extractKey:vu(w)},indexes:rp(I.indexNames).map(function(T){return I.index(T)}).map(function(B){var M=B.name,N=B.unique,V=B.multiEntry,B=B.keyPath,V={name:M,compound:i(B),keyPath:B,unique:N,multiEntry:V,extractKey:vu(B)};return A[Zi(B)]=V}),getIndexByKeyPath:function(T){return A[Zi(T)]}};return A[":id"]=R.primaryKey,w!=null&&(A[Zi(w)]=R.primaryKey),R})},hasGetAll:0<b.length&&"getAll"in v.objectStore(b[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),x=E.schema,C=E.hasGetAll,E=x.tables.map(h),_={};return E.forEach(function(I){return _[I.name]=I}),{stack:"dbcore",transaction:a.transaction.bind(a),table:function(I){if(!_[I])throw new Error("Table '".concat(I,"' not found"));return _[I]},MIN_KEY:-1/0,MAX_KEY:Xi(c),schema:x}}function sx(a,c,u,f){var h=u.IDBKeyRange;return u.indexedDB,{dbcore:(f=ax(c,h,f),a.dbcore.reduce(function(g,v){return v=v.create,e(e({},g),v(g))},f))}}function Cs(a,f){var u=f.db,f=sx(a._middlewares,u,a._deps,f);a.core=f.dbcore,a.tables.forEach(function(h){var g=h.name;a.core.schema.tables.some(function(v){return v.name===g})&&(h.core=a.core.table(g),a[g]instanceof a.Table&&(a[g].core=h.core))})}function Ss(a,c,u,f){u.forEach(function(h){var g=f[h];c.forEach(function(v){var b=function x(C,E){return P(C,E)||(C=l(C))&&x(C,E)}(v,h);(!b||"value"in b&&b.value===void 0)&&(v===a.Transaction.prototype||v instanceof a.Transaction?S(v,h,{get:function(){return this.table(h)},set:function(x){y(this,h,{value:x,writable:!0,configurable:!0,enumerable:!0})}}):v[h]=new a.Table(h,g))})})}function yu(a,c){c.forEach(function(u){for(var f in u)u[f]instanceof a.Table&&delete u[f]})}function cx(a,c){return a._cfg.version-c._cfg.version}function lx(a,c,u,f){var h=a._dbSchema;u.objectStoreNames.contains("$meta")&&!h.$meta&&(h.$meta=gu("$meta",op("")[0],[]),a._storeNames.push("$meta"));var g=a._createTransaction("readwrite",a._storeNames,h);g.create(u),g._completion.catch(f);var v=g._reject.bind(g),b=et.transless||et;mn(function(){return et.trans=g,et.transless=b,c!==0?(Cs(a,u),C=c,((x=g).storeNames.includes("$meta")?x.table("$meta").get("version").then(function(E){return E??C}):Y.resolve(C)).then(function(E){return I=E,w=g,O=u,A=[],E=(_=a)._versions,R=_._dbSchema=Os(0,_.idbdb,O),(E=E.filter(function(T){return T._cfg.version>=I})).length!==0?(E.forEach(function(T){A.push(function(){var M=R,N=T._cfg.dbschema;Es(_,M,O),Es(_,N,O),R=_._dbSchema=N;var B=bu(M,N);B.add.forEach(function(Q){_u(O,Q[0],Q[1].primKey,Q[1].indexes)}),B.change.forEach(function(Q){if(Q.recreate)throw new ot.Upgrade("Not yet support for changing primary key");var W=O.objectStore(Q.name);Q.add.forEach(function(Z){return Rs(W,Z)}),Q.change.forEach(function(Z){W.deleteIndex(Z.name),Rs(W,Z)}),Q.del.forEach(function(Z){return W.deleteIndex(Z)})});var V=T._cfg.contentUpgrade;if(V&&T._cfg.version>I){Cs(_,O),w._memoizedTables={};var K=Mt(N);B.del.forEach(function(Q){K[Q]=M[Q]}),yu(_,[_.Transaction.prototype]),Ss(_,[_.Transaction.prototype],o(K),K),w.schema=K;var q,H=fn(V);return H&&Fo(),B=Y.follow(function(){var Q;(q=V(w))&&H&&(Q=gn.bind(null,null),q.then(Q,Q))}),q&&typeof q.then=="function"?Y.resolve(q):B.then(function(){return q})}}),A.push(function(M){var N,B,V=T._cfg.dbschema;N=V,B=M,[].slice.call(B.db.objectStoreNames).forEach(function(K){return N[K]==null&&B.db.deleteObjectStore(K)}),yu(_,[_.Transaction.prototype]),Ss(_,[_.Transaction.prototype],_._storeNames,_._dbSchema),w.schema=_._dbSchema}),A.push(function(M){_.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(_.idbdb.version/10)===T._cfg.version?(_.idbdb.deleteObjectStore("$meta"),delete _._dbSchema.$meta,_._storeNames=_._storeNames.filter(function(N){return N!=="$meta"})):M.objectStore("$meta").put(T._cfg.version,"version"))})}),function T(){return A.length?Y.resolve(A.shift()(w.idbtrans)).then(T):Y.resolve()}().then(function(){np(R,O)})):Y.resolve();var _,I,w,O,A,R}).catch(v)):(o(h).forEach(function(E){_u(u,E,h[E].primKey,h[E].indexes)}),Cs(a,u),void Y.follow(function(){return a.on.populate.fire(g)}).catch(v));var x,C})}function ux(a,c){np(a._dbSchema,c),c.db.version%10!=0||c.objectStoreNames.contains("$meta")||c.db.createObjectStore("$meta").add(Math.ceil(c.db.version/10-1),"version");var u=Os(0,a.idbdb,c);Es(a,a._dbSchema,c);for(var f=0,h=bu(u,a._dbSchema).change;f<h.length;f++){var g=function(v){if(v.change.length||v.recreate)return console.warn("Unable to patch indexes of table ".concat(v.name," because it has changes on the type of index or primary key.")),{value:void 0};var b=c.objectStore(v.name);v.add.forEach(function(x){Cr&&console.debug("Dexie upgrade patch: Creating missing index ".concat(v.name,".").concat(x.src)),Rs(b,x)})}(h[f]);if(typeof g=="object")return g.value}}function bu(a,c){var u,f={del:[],add:[],change:[]};for(u in a)c[u]||f.del.push(u);for(u in c){var h=a[u],g=c[u];if(h){var v={name:u,def:g,recreate:!1,del:[],add:[],change:[]};if(""+(h.primKey.keyPath||"")!=""+(g.primKey.keyPath||"")||h.primKey.auto!==g.primKey.auto)v.recreate=!0,f.change.push(v);else{var b=h.idxByName,x=g.idxByName,C=void 0;for(C in b)x[C]||v.del.push(C);for(C in x){var E=b[C],_=x[C];E?E.src!==_.src&&v.change.push(_):v.add.push(_)}(0<v.del.length||0<v.add.length||0<v.change.length)&&f.change.push(v)}}else f.add.push([u,g])}return f}function _u(a,c,u,f){var h=a.db.createObjectStore(c,u.keyPath?{keyPath:u.keyPath,autoIncrement:u.auto}:{autoIncrement:u.auto});return f.forEach(function(g){return Rs(h,g)}),h}function np(a,c){o(a).forEach(function(u){c.db.objectStoreNames.contains(u)||(Cr&&console.debug("Dexie: Creating missing table",u),_u(c,u,a[u].primKey,a[u].indexes))})}function Rs(a,c){a.createIndex(c.name,c.keyPath,{unique:c.unique,multiEntry:c.multi})}function Os(a,c,u){var f={};return G(c.objectStoreNames,0).forEach(function(h){for(var g=u.objectStore(h),v=mu(ep(C=g.keyPath),C||"",!0,!1,!!g.autoIncrement,C&&typeof C!="string",!0),b=[],x=0;x<g.indexNames.length;++x){var E=g.index(g.indexNames[x]),C=E.keyPath,E=mu(E.name,C,!!E.unique,!!E.multiEntry,!1,C&&typeof C!="string",!1);b.push(E)}f[h]=gu(h,v,b)}),f}function Es(a,c,u){for(var f=u.db.objectStoreNames,h=0;h<f.length;++h){var g=f[h],v=u.objectStore(g);a._hasGetAll="getAll"in v;for(var b=0;b<v.indexNames.length;++b){var x=v.indexNames[b],C=v.index(x).keyPath,E=typeof C=="string"?C:"["+G(C).join("+")+"]";!c[g]||(C=c[g].idxByName[E])&&(C.name=x,delete c[g].idxByName[E],c[g].idxByName[x]=C)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&n.WorkerGlobalScope&&n instanceof n.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function op(a){return a.split(",").map(function(c,u){var f=(c=c.trim()).replace(/([&*]|\+\+)/g,""),h=/^\[/.test(f)?f.match(/^\[(.*)\]$/)[1].split("+"):f;return mu(f,h||null,/\&/.test(c),/\*/.test(c),/\+\+/.test(c),i(h),u===0)})}var dx=(Ds.prototype._parseStoresSpec=function(a,c){o(a).forEach(function(u){if(a[u]!==null){var f=op(a[u]),h=f.shift();if(h.unique=!0,h.multi)throw new ot.Schema("Primary key cannot be multi-valued");f.forEach(function(g){if(g.auto)throw new ot.Schema("Only primary key can be marked as autoIncrement (++)");if(!g.keyPath)throw new ot.Schema("Index must have a name and cannot be an empty string")}),c[u]=gu(u,h,f)}})},Ds.prototype.stores=function(u){var c=this.db;this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,u):u;var u=c._versions,f={},h={};return u.forEach(function(g){s(f,g._cfg.storesSource),h=g._cfg.dbschema={},g._parseStoresSpec(f,h)}),c._dbSchema=h,yu(c,[c._allTables,c,c.Transaction.prototype]),Ss(c,[c._allTables,c,c.Transaction.prototype,this._cfg.tables],o(h),h),c._storeNames=o(h),this},Ds.prototype.upgrade=function(a){return this._cfg.contentUpgrade=tu(this._cfg.contentUpgrade||It,a),this},Ds);function Ds(){}function xu(a,c){var u=a._dbNamesDB;return u||(u=a._dbNamesDB=new Wr(ys,{addons:[],indexedDB:a,IDBKeyRange:c})).version(1).stores({dbnames:"name"}),u.table("dbnames")}function wu(a){return a&&typeof a.databases=="function"}function Cu(a){return mn(function(){return et.letThrough=!0,a()})}function Su(a){return!("from"in a)}var be=function(a,c){if(!this){var u=new be;return a&&"d"in a&&s(u,a),u}s(this,arguments.length?{d:1,from:a,to:1<arguments.length?c:a}:{d:0})};function Ji(a,c,u){var f=_t(c,u);if(!isNaN(f)){if(0<f)throw RangeError();if(Su(a))return s(a,{from:c,to:u,d:1});var h=a.l,f=a.r;if(_t(u,a.from)<0)return h?Ji(h,c,u):a.l={from:c,to:u,d:1,l:null,r:null},ap(a);if(0<_t(c,a.to))return f?Ji(f,c,u):a.r={from:c,to:u,d:1,l:null,r:null},ap(a);_t(c,a.from)<0&&(a.from=c,a.l=null,a.d=f?f.d+1:1),0<_t(u,a.to)&&(a.to=u,a.r=null,a.d=a.l?a.l.d+1:1),u=!a.r,h&&!a.l&&ta(a,h),f&&u&&ta(a,f)}}function ta(a,c){Su(c)||function u(f,x){var g=x.from,v=x.to,b=x.l,x=x.r;Ji(f,g,v),b&&u(f,b),x&&u(f,x)}(a,c)}function ip(a,c){var u=ks(c),f=u.next();if(f.done)return!1;for(var h=f.value,g=ks(a),v=g.next(h.from),b=v.value;!f.done&&!v.done;){if(_t(b.from,h.to)<=0&&0<=_t(b.to,h.from))return!0;_t(h.from,b.from)<0?h=(f=u.next(b.from)).value:b=(v=g.next(h.from)).value}return!1}function ks(a){var c=Su(a)?null:{s:0,n:a};return{next:function(u){for(var f=0<arguments.length;c;)switch(c.s){case 0:if(c.s=1,f)for(;c.n.l&&_t(u,c.n.from)<0;)c={up:c,n:c.n.l,s:1};else for(;c.n.l;)c={up:c,n:c.n.l,s:1};case 1:if(c.s=2,!f||_t(u,c.n.to)<=0)return{value:c.n,done:!1};case 2:if(c.n.r){c.s=3,c={up:c,n:c.n.r,s:0};continue}case 3:c=c.up}return{done:!0}}}}function ap(a){var c,u,f=(((c=a.r)===null||c===void 0?void 0:c.d)||0)-(((u=a.l)===null||u===void 0?void 0:u.d)||0),h=1<f?"r":f<-1?"l":"";h&&(c=h=="r"?"l":"r",u=e({},a),f=a[h],a.from=f.from,a.to=f.to,a[h]=f[h],u[h]=f[c],(a[c]=u).d=sp(u)),a.d=sp(a)}function sp(u){var c=u.r,u=u.l;return(c?u?Math.max(c.d,u.d):c.d:u?u.d:0)+1}function As(a,c){return o(c).forEach(function(u){a[u]?ta(a[u],c[u]):a[u]=function f(h){var g,v,b={};for(g in h)p(h,g)&&(v=h[g],b[g]=!v||typeof v!="object"||he.has(v.constructor)?v:f(v));return b}(c[u])}),a}function Ru(a,c){return a.all||c.all||Object.keys(a).some(function(u){return c[u]&&ip(c[u],a[u])})}m(be.prototype,((Xe={add:function(a){return ta(this,a),this},addKey:function(a){return Ji(this,a,a),this},addKeys:function(a){var c=this;return a.forEach(function(u){return Ji(c,u,u)}),this},hasKey:function(a){var c=ks(this).next(a).value;return c&&_t(c.from,a)<=0&&0<=_t(c.to,a)}})[Fi]=function(){return ks(this)},Xe));var ro={},Ou={},Eu=!1;function Is(a){As(Ou,a),Eu||(Eu=!0,setTimeout(function(){Eu=!1,Du(Ou,!(Ou={}))},0))}function Du(a,c){c===void 0&&(c=!1);var u=new Set;if(a.all)for(var f=0,h=Object.values(ro);f<h.length;f++)cp(v=h[f],a,u,c);else for(var g in a){var v,b=/^idb\:\/\/(.*)\/(.*)\//.exec(g);b&&(g=b[1],b=b[2],(v=ro["idb://".concat(g,"/").concat(b)])&&cp(v,a,u,c))}u.forEach(function(x){return x()})}function cp(a,c,u,f){for(var h=[],g=0,v=Object.entries(a.queries.query);g<v.length;g++){for(var b=v[g],x=b[0],C=[],E=0,_=b[1];E<_.length;E++){var I=_[E];Ru(c,I.obsSet)?I.subscribers.forEach(function(R){return u.add(R)}):f&&C.push(I)}f&&h.push([x,C])}if(f)for(var w=0,O=h;w<O.length;w++){var A=O[w],x=A[0],C=A[1];a.queries.query[x]=C}}function fx(a){var c=a._state,u=a._deps.indexedDB;if(c.isBeingOpened||a.idbdb)return c.dbReadyPromise.then(function(){return c.dbOpenError?Kt(c.dbOpenError):a});c.isBeingOpened=!0,c.dbOpenError=null,c.openComplete=!1;var f=c.openCanceller,h=Math.round(10*a.verno),g=!1;function v(){if(c.openCanceller!==f)throw new ot.DatabaseClosed("db.open() was cancelled")}function b(){return new Y(function(I,w){if(v(),!u)throw new ot.MissingAPI;var O=a.name,A=c.autoSchema||!h?u.open(O):u.open(O,h);if(!A)throw new ot.MissingAPI;A.onerror=Sr(w),A.onblocked=Ut(a._fireOnBlocked),A.onupgradeneeded=Ut(function(R){var T;E=A.transaction,c.autoSchema&&!a._options.allowEmptyDB?(A.onerror=Qi,E.abort(),A.result.close(),(T=u.deleteDatabase(O)).onsuccess=T.onerror=Ut(function(){w(new ot.NoSuchDatabase("Database ".concat(O," doesnt exist")))})):(E.onerror=Sr(w),R=R.oldVersion>Math.pow(2,62)?0:R.oldVersion,_=R<1,a.idbdb=A.result,g&&ux(a,E),lx(a,R/10,E,w))},w),A.onsuccess=Ut(function(){E=null;var R,T,M,N,B,V=a.idbdb=A.result,K=G(V.objectStoreNames);if(0<K.length)try{var q=V.transaction((N=K).length===1?N[0]:N,"readonly");if(c.autoSchema)T=V,M=q,(R=a).verno=T.version/10,M=R._dbSchema=Os(0,T,M),R._storeNames=G(T.objectStoreNames,0),Ss(R,[R._allTables],o(M),M);else if(Es(a,a._dbSchema,q),((B=bu(Os(0,(B=a).idbdb,q),B._dbSchema)).add.length||B.change.some(function(H){return H.add.length||H.change.length}))&&!g)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),V.close(),h=V.version+1,g=!0,I(b());Cs(a,q)}catch{}jo.push(a),V.onversionchange=Ut(function(H){c.vcFired=!0,a.on("versionchange").fire(H)}),V.onclose=Ut(function(H){a.on("close").fire(H)}),_&&(B=a._deps,q=O,V=B.indexedDB,B=B.IDBKeyRange,wu(V)||q===ys||xu(V,B).put({name:q}).catch(It)),I()},w)}).catch(function(I){switch(I?.name){case"UnknownError":if(0<c.PR1398_maxLoop)return c.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),b();break;case"VersionError":if(0<h)return h=0,b()}return Y.reject(I)})}var x,C=c.dbReadyResolve,E=null,_=!1;return Y.race([f,(typeof navigator>"u"?Y.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(I){function w(){return indexedDB.databases().finally(I)}x=setInterval(w,100),w()}).finally(function(){return clearInterval(x)}):Promise.resolve()).then(b)]).then(function(){return v(),c.onReadyBeingFired=[],Y.resolve(Cu(function(){return a.on.ready.fire(a.vip)})).then(function I(){if(0<c.onReadyBeingFired.length){var w=c.onReadyBeingFired.reduce(tu,It);return c.onReadyBeingFired=[],Y.resolve(Cu(function(){return w(a.vip)})).then(I)}})}).finally(function(){c.openCanceller===f&&(c.onReadyBeingFired=null,c.isBeingOpened=!1)}).catch(function(I){c.dbOpenError=I;try{E&&E.abort()}catch{}return f===c.openCanceller&&a._close(),Kt(I)}).finally(function(){c.openComplete=!0,C()}).then(function(){var I;return _&&(I={},a.tables.forEach(function(w){w.schema.indexes.forEach(function(O){O.name&&(I["idb://".concat(a.name,"/").concat(w.name,"/").concat(O.name)]=new be(-1/0,[[[]]]))}),I["idb://".concat(a.name,"/").concat(w.name,"/")]=I["idb://".concat(a.name,"/").concat(w.name,"/:dels")]=new be(-1/0,[[[]]])}),bn(Yi).fire(I),Du(I,!0)),a})}function ku(a){function c(g){return a.next(g)}var u=h(c),f=h(function(g){return a.throw(g)});function h(g){return function(x){var b=g(x),x=b.value;return b.done?x:x&&typeof x.then=="function"?x.then(u,f):i(x)?Promise.all(x).then(u,f):u(x)}}return h(c)()}function Ts(a,c,u){for(var f=i(a)?a.slice():[a],h=0;h<u;++h)f.push(c);return f}var hx={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(a){return e(e({},a),{table:function(c){var u=a.table(c),f=u.schema,h={},g=[];function v(_,I,w){var O=Zi(_),A=h[O]=h[O]||[],R=_==null?0:typeof _=="string"?1:_.length,T=0<I,T=e(e({},w),{name:T?"".concat(O,"(virtual-from:").concat(w.name,")"):w.name,lowLevelIndex:w,isVirtual:T,keyTail:I,keyLength:R,extractKey:vu(_),unique:!T&&w.unique});return A.push(T),T.isPrimaryKey||g.push(T),1<R&&v(R===2?_[0]:_.slice(0,R-1),I+1,w),A.sort(function(M,N){return M.keyTail-N.keyTail}),T}c=v(f.primaryKey.keyPath,0,f.primaryKey),h[":id"]=[c];for(var b=0,x=f.indexes;b<x.length;b++){var C=x[b];v(C.keyPath,0,C)}function E(_){var I,w=_.query.index;return w.isVirtual?e(e({},_),{query:{index:w.lowLevelIndex,range:(I=_.query.range,w=w.keyTail,{type:I.type===1?2:I.type,lower:Ts(I.lower,I.lowerOpen?a.MAX_KEY:a.MIN_KEY,w),lowerOpen:!0,upper:Ts(I.upper,I.upperOpen?a.MIN_KEY:a.MAX_KEY,w),upperOpen:!0})}}):_}return e(e({},u),{schema:e(e({},f),{primaryKey:c,indexes:g,getIndexByKeyPath:function(_){return(_=h[Zi(_)])&&_[0]}}),count:function(_){return u.count(E(_))},query:function(_){return u.query(E(_))},openCursor:function(_){var I=_.query.index,w=I.keyTail,O=I.isVirtual,A=I.keyLength;return O?u.openCursor(E(_)).then(function(T){return T&&R(T)}):u.openCursor(_);function R(T){return Object.create(T,{continue:{value:function(M){M!=null?T.continue(Ts(M,_.reverse?a.MAX_KEY:a.MIN_KEY,w)):_.unique?T.continue(T.key.slice(0,A).concat(_.reverse?a.MIN_KEY:a.MAX_KEY,w)):T.continue()}},continuePrimaryKey:{value:function(M,N){T.continuePrimaryKey(Ts(M,a.MAX_KEY,w),N)}},primaryKey:{get:function(){return T.primaryKey}},key:{get:function(){var M=T.key;return A===1?M[0]:M.slice(0,A)}},value:{get:function(){return T.value}}})}}})}})}};function Au(a,c,u,f){return u=u||{},f=f||"",o(a).forEach(function(h){var g,v,b;p(c,h)?(g=a[h],v=c[h],typeof g=="object"&&typeof v=="object"&&g&&v?(b=dr(g))!==dr(v)?u[f+h]=c[h]:b==="Object"?Au(g,v,u,f+h+"."):g!==v&&(u[f+h]=c[h]):g!==v&&(u[f+h]=c[h])):u[f+h]=void 0}),o(c).forEach(function(h){p(a,h)||(u[f+h]=c[h])}),u}function Iu(a,c){return c.type==="delete"?c.keys:c.keys||c.values.map(a.extractKey)}var px={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return e(e({},a),{table:function(c){var u=a.table(c),f=u.schema.primaryKey;return e(e({},u),{mutate:function(h){var g=et.trans,v=g.table(c).hook,b=v.deleting,x=v.creating,C=v.updating;switch(h.type){case"add":if(x.fire===It)break;return g._promise("readwrite",function(){return E(h)},!0);case"put":if(x.fire===It&&C.fire===It)break;return g._promise("readwrite",function(){return E(h)},!0);case"delete":if(b.fire===It)break;return g._promise("readwrite",function(){return E(h)},!0);case"deleteRange":if(b.fire===It)break;return g._promise("readwrite",function(){return function _(I,w,O){return u.query({trans:I,values:!1,query:{index:f,range:w},limit:O}).then(function(A){var R=A.result;return E({type:"delete",keys:R,trans:I}).then(function(T){return 0<T.numFailures?Promise.reject(T.failures[0]):R.length<O?{failures:[],numFailures:0,lastResult:void 0}:_(I,e(e({},w),{lower:R[R.length-1],lowerOpen:!0}),O)})})}(h.trans,h.range,1e4)},!0)}return u.mutate(h);function E(_){var I,w,O,A=et.trans,R=_.keys||Iu(f,_);if(!R)throw new Error("Keys missing");return(_=_.type==="add"||_.type==="put"?e(e({},_),{keys:R}):e({},_)).type!=="delete"&&(_.values=r([],_.values,!0)),_.keys&&(_.keys=r([],_.keys,!0)),I=u,O=R,((w=_).type==="add"?Promise.resolve([]):I.getMany({trans:w.trans,keys:O,cache:"immutable"})).then(function(T){var M=R.map(function(N,B){var V,K,q,H=T[B],Q={onerror:null,onsuccess:null};return _.type==="delete"?b.fire.call(Q,N,H,A):_.type==="add"||H===void 0?(V=x.fire.call(Q,N,_.values[B],A),N==null&&V!=null&&(_.keys[B]=N=V,f.outbound||st(_.values[B],f.keyPath,N))):(V=Au(H,_.values[B]),(K=C.fire.call(Q,V,N,H,A))&&(q=_.values[B],Object.keys(K).forEach(function(W){p(q,W)?q[W]=K[W]:st(q,W,K[W])}))),Q});return u.mutate(_).then(function(N){for(var B=N.failures,V=N.results,K=N.numFailures,N=N.lastResult,q=0;q<R.length;++q){var H=(V||R)[q],Q=M[q];H==null?Q.onerror&&Q.onerror(B[q]):Q.onsuccess&&Q.onsuccess(_.type==="put"&&T[q]?_.values[q]:H)}return{failures:B,results:V,numFailures:K,lastResult:N}}).catch(function(N){return M.forEach(function(B){return B.onerror&&B.onerror(N)}),Promise.reject(N)})})}}})}})}};function lp(a,c,u){try{if(!c||c.keys.length<a.length)return null;for(var f=[],h=0,g=0;h<c.keys.length&&g<a.length;++h)_t(c.keys[h],a[g])===0&&(f.push(u?ur(c.values[h]):c.values[h]),++g);return f.length===a.length?f:null}catch{return null}}var mx={stack:"dbcore",level:-1,create:function(a){return{table:function(c){var u=a.table(c);return e(e({},u),{getMany:function(f){if(!f.cache)return u.getMany(f);var h=lp(f.keys,f.trans._cache,f.cache==="clone");return h?Y.resolve(h):u.getMany(f).then(function(g){return f.trans._cache={keys:f.keys,values:f.cache==="clone"?ur(g):g},g})},mutate:function(f){return f.type!=="add"&&(f.trans._cache=null),u.mutate(f)}})}}}};function up(a,c){return a.trans.mode==="readonly"&&!!a.subscr&&!a.trans.explicit&&a.trans.db._options.cache!=="disabled"&&!c.schema.primaryKey.outbound}function dp(a,c){switch(a){case"query":return c.values&&!c.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var gx={stack:"dbcore",level:0,name:"Observability",create:function(a){var c=a.schema.name,u=new be(a.MIN_KEY,a.MAX_KEY);return e(e({},a),{transaction:function(f,h,g){if(et.subscr&&h!=="readonly")throw new ot.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(et.querier));return a.transaction(f,h,g)},table:function(f){var h=a.table(f),g=h.schema,v=g.primaryKey,_=g.indexes,b=v.extractKey,x=v.outbound,C=v.autoIncrement&&_.filter(function(w){return w.compound&&w.keyPath.includes(v.keyPath)}),E=e(e({},h),{mutate:function(w){function O(W){return W="idb://".concat(c,"/").concat(f,"/").concat(W),N[W]||(N[W]=new be)}var A,R,T,M=w.trans,N=w.mutatedParts||(w.mutatedParts={}),B=O(""),V=O(":dels"),K=w.type,Q=w.type==="deleteRange"?[w.range]:w.type==="delete"?[w.keys]:w.values.length<50?[Iu(v,w).filter(function(W){return W}),w.values]:[],q=Q[0],H=Q[1],Q=w.trans._cache;return i(q)?(B.addKeys(q),(Q=K==="delete"||q.length===H.length?lp(q,Q):null)||V.addKeys(q),(Q||H)&&(A=O,R=Q,T=H,g.indexes.forEach(function(W){var Z=A(W.name||"");function mt(yt){return yt!=null?W.extractKey(yt):null}function vt(yt){return W.multiEntry&&i(yt)?yt.forEach(function(je){return Z.addKey(je)}):Z.addKey(yt)}(R||T).forEach(function(yt,_e){var pt=R&&mt(R[_e]),_e=T&&mt(T[_e]);_t(pt,_e)!==0&&(pt!=null&&vt(pt),_e!=null&&vt(_e))})}))):q?(H={from:(H=q.lower)!==null&&H!==void 0?H:a.MIN_KEY,to:(H=q.upper)!==null&&H!==void 0?H:a.MAX_KEY},V.add(H),B.add(H)):(B.add(u),V.add(u),g.indexes.forEach(function(W){return O(W.name).add(u)})),h.mutate(w).then(function(W){return!q||w.type!=="add"&&w.type!=="put"||(B.addKeys(W.results),C&&C.forEach(function(Z){for(var mt=w.values.map(function(pt){return Z.extractKey(pt)}),vt=Z.keyPath.findIndex(function(pt){return pt===v.keyPath}),yt=0,je=W.results.length;yt<je;++yt)mt[yt][vt]=W.results[yt];O(Z.name).addKeys(mt)})),M.mutatedParts=As(M.mutatedParts||{},N),W})}}),_=function(O){var A=O.query,O=A.index,A=A.range;return[O,new be((O=A.lower)!==null&&O!==void 0?O:a.MIN_KEY,(A=A.upper)!==null&&A!==void 0?A:a.MAX_KEY)]},I={get:function(w){return[v,new be(w.key)]},getMany:function(w){return[v,new be().addKeys(w.keys)]},count:_,query:_,openCursor:_};return o(I).forEach(function(w){E[w]=function(O){var A=et.subscr,R=!!A,T=up(et,h)&&dp(w,O)?O.obsSet={}:A;if(R){var M=function(H){return H="idb://".concat(c,"/").concat(f,"/").concat(H),T[H]||(T[H]=new be)},N=M(""),B=M(":dels"),A=I[w](O),R=A[0],A=A[1];if((w==="query"&&R.isPrimaryKey&&!O.values?B:M(R.name||"")).add(A),!R.isPrimaryKey){if(w!=="count"){var V=w==="query"&&x&&O.values&&h.query(e(e({},O),{values:!1}));return h[w].apply(this,arguments).then(function(H){if(w==="query"){if(x&&O.values)return V.then(function(mt){return mt=mt.result,N.addKeys(mt),H});var Q=O.values?H.result.map(b):H.result;(O.values?N:B).addKeys(Q)}else if(w==="openCursor"){var W=H,Z=O.values;return W&&Object.create(W,{key:{get:function(){return B.addKey(W.primaryKey),W.key}},primaryKey:{get:function(){var mt=W.primaryKey;return B.addKey(mt),mt}},value:{get:function(){return Z&&N.addKey(W.primaryKey),W.value}}})}return H})}B.add(u)}}return h[w].apply(this,arguments)}}),E}})}};function fp(a,c,u){if(u.numFailures===0)return c;if(c.type==="deleteRange")return null;var f=c.keys?c.keys.length:"values"in c&&c.values?c.values.length:1;return u.numFailures===f?null:(c=e({},c),i(c.keys)&&(c.keys=c.keys.filter(function(h,g){return!(g in u.failures)})),"values"in c&&i(c.values)&&(c.values=c.values.filter(function(h,g){return!(g in u.failures)})),c)}function Tu(a,c){return u=a,((f=c).lower===void 0||(f.lowerOpen?0<_t(u,f.lower):0<=_t(u,f.lower)))&&(a=a,(c=c).upper===void 0||(c.upperOpen?_t(a,c.upper)<0:_t(a,c.upper)<=0));var u,f}function hp(a,c,I,f,h,g){if(!I||I.length===0)return a;var v=c.query.index,b=v.multiEntry,x=c.query.range,C=f.schema.primaryKey.extractKey,E=v.extractKey,_=(v.lowLevelIndex||v).extractKey,I=I.reduce(function(w,O){var A=w,R=[];if(O.type==="add"||O.type==="put")for(var T=new be,M=O.values.length-1;0<=M;--M){var N,B=O.values[M],V=C(B);T.hasKey(V)||(N=E(B),(b&&i(N)?N.some(function(W){return Tu(W,x)}):Tu(N,x))&&(T.addKey(V),R.push(B)))}switch(O.type){case"add":var K=new be().addKeys(c.values?w.map(function(Z){return C(Z)}):w),A=w.concat(c.values?R.filter(function(Z){return Z=C(Z),!K.hasKey(Z)&&(K.addKey(Z),!0)}):R.map(function(Z){return C(Z)}).filter(function(Z){return!K.hasKey(Z)&&(K.addKey(Z),!0)}));break;case"put":var q=new be().addKeys(O.values.map(function(Z){return C(Z)}));A=w.filter(function(Z){return!q.hasKey(c.values?C(Z):Z)}).concat(c.values?R:R.map(function(Z){return C(Z)}));break;case"delete":var H=new be().addKeys(O.keys);A=w.filter(function(Z){return!H.hasKey(c.values?C(Z):Z)});break;case"deleteRange":var Q=O.range;A=w.filter(function(Z){return!Tu(C(Z),Q)})}return A},a);return I===a?a:(I.sort(function(w,O){return _t(_(w),_(O))||_t(C(w),C(O))}),c.limit&&c.limit<1/0&&(I.length>c.limit?I.length=c.limit:a.length===c.limit&&I.length<c.limit&&(h.dirty=!0)),g?Object.freeze(I):I)}function pp(a,c){return _t(a.lower,c.lower)===0&&_t(a.upper,c.upper)===0&&!!a.lowerOpen==!!c.lowerOpen&&!!a.upperOpen==!!c.upperOpen}function vx(a,c){return function(u,f,h,g){if(u===void 0)return f!==void 0?-1:0;if(f===void 0)return 1;if((f=_t(u,f))===0){if(h&&g)return 0;if(h)return 1;if(g)return-1}return f}(a.lower,c.lower,a.lowerOpen,c.lowerOpen)<=0&&0<=function(u,f,h,g){if(u===void 0)return f!==void 0?1:0;if(f===void 0)return-1;if((f=_t(u,f))===0){if(h&&g)return 0;if(h)return-1;if(g)return 1}return f}(a.upper,c.upper,a.upperOpen,c.upperOpen)}function yx(a,c,u,f){a.subscribers.add(u),f.addEventListener("abort",function(){var h,g;a.subscribers.delete(u),a.subscribers.size===0&&(h=a,g=c,setTimeout(function(){h.subscribers.size===0&&Vr(g,h)},3e3))})}var bx={stack:"dbcore",level:0,name:"Cache",create:function(a){var c=a.schema.name;return e(e({},a),{transaction:function(u,f,h){var g,v,b=a.transaction(u,f,h);return f==="readwrite"&&(v=(g=new AbortController).signal,h=function(x){return function(){if(g.abort(),f==="readwrite"){for(var C=new Set,E=0,_=u;E<_.length;E++){var I=_[E],w=ro["idb://".concat(c,"/").concat(I)];if(w){var O=a.table(I),A=w.optimisticOps.filter(function(Z){return Z.trans===b});if(b._explicit&&x&&b.mutatedParts)for(var R=0,T=Object.values(w.queries.query);R<T.length;R++)for(var M=0,N=(K=T[R]).slice();M<N.length;M++)Ru((q=N[M]).obsSet,b.mutatedParts)&&(Vr(K,q),q.subscribers.forEach(function(Z){return C.add(Z)}));else if(0<A.length){w.optimisticOps=w.optimisticOps.filter(function(Z){return Z.trans!==b});for(var B=0,V=Object.values(w.queries.query);B<V.length;B++)for(var K,q,H,Q=0,W=(K=V[B]).slice();Q<W.length;Q++)(q=W[Q]).res!=null&&b.mutatedParts&&(x&&!q.dirty?(H=Object.isFrozen(q.res),H=hp(q.res,q.req,A,O,q,H),q.dirty?(Vr(K,q),q.subscribers.forEach(function(Z){return C.add(Z)})):H!==q.res&&(q.res=H,q.promise=Y.resolve({result:H}))):(q.dirty&&Vr(K,q),q.subscribers.forEach(function(Z){return C.add(Z)})))}}}C.forEach(function(Z){return Z()})}}},b.addEventListener("abort",h(!1),{signal:v}),b.addEventListener("error",h(!1),{signal:v}),b.addEventListener("complete",h(!0),{signal:v})),b},table:function(u){var f=a.table(u),h=f.schema.primaryKey;return e(e({},f),{mutate:function(g){var v=et.trans;if(h.outbound||v.db._options.cache==="disabled"||v.explicit||v.idbtrans.mode!=="readwrite")return f.mutate(g);var b=ro["idb://".concat(c,"/").concat(u)];return b?(v=f.mutate(g),g.type!=="add"&&g.type!=="put"||!(50<=g.values.length||Iu(h,g).some(function(x){return x==null}))?(b.optimisticOps.push(g),g.mutatedParts&&Is(g.mutatedParts),v.then(function(x){0<x.numFailures&&(Vr(b.optimisticOps,g),(x=fp(0,g,x))&&b.optimisticOps.push(x),g.mutatedParts&&Is(g.mutatedParts))}),v.catch(function(){Vr(b.optimisticOps,g),g.mutatedParts&&Is(g.mutatedParts)})):v.then(function(x){var C=fp(0,e(e({},g),{values:g.values.map(function(E,_){var I;return x.failures[_]?E:(E=(I=h.keyPath)!==null&&I!==void 0&&I.includes(".")?ur(E):e({},E),st(E,h.keyPath,x.results[_]),E)})}),x);b.optimisticOps.push(C),queueMicrotask(function(){return g.mutatedParts&&Is(g.mutatedParts)})}),v):f.mutate(g)},query:function(g){if(!up(et,f)||!dp("query",g))return f.query(g);var v=((C=et.trans)===null||C===void 0?void 0:C.db._options.cache)==="immutable",_=et,b=_.requery,x=_.signal,C=function(O,A,R,T){var M=ro["idb://".concat(O,"/").concat(A)];if(!M)return[];if(!(A=M.queries[R]))return[null,!1,M,null];var N=A[(T.query?T.query.index.name:null)||""];if(!N)return[null,!1,M,null];switch(R){case"query":var B=N.find(function(V){return V.req.limit===T.limit&&V.req.values===T.values&&pp(V.req.query.range,T.query.range)});return B?[B,!0,M,N]:[N.find(function(V){return("limit"in V.req?V.req.limit:1/0)>=T.limit&&(!T.values||V.req.values)&&vx(V.req.query.range,T.query.range)}),!1,M,N];case"count":return B=N.find(function(V){return pp(V.req.query.range,T.query.range)}),[B,!!B,M,N]}}(c,u,"query",g),E=C[0],_=C[1],I=C[2],w=C[3];return E&&_?E.obsSet=g.obsSet:(_=f.query(g).then(function(O){var A=O.result;if(E&&(E.res=A),v){for(var R=0,T=A.length;R<T;++R)Object.freeze(A[R]);Object.freeze(A)}else O.result=ur(A);return O}).catch(function(O){return w&&E&&Vr(w,E),Promise.reject(O)}),E={obsSet:g.obsSet,promise:_,subscribers:new Set,type:"query",req:g,dirty:!1},w?w.push(E):(w=[E],(I=I||(ro["idb://".concat(c,"/").concat(u)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[g.query.index.name||""]=w)),yx(E,w,b,x),E.promise.then(function(O){return{result:hp(O.result,g,I?.optimisticOps,f,E,v)}})}})}})}};function Ms(a,c){return new Proxy(a,{get:function(u,f,h){return f==="db"?c:Reflect.get(u,f,h)}})}var Wr=(Gt.prototype.version=function(a){if(isNaN(a)||a<.1)throw new ot.Type("Given version is not a positive number");if(a=Math.round(10*a)/10,this.idbdb||this._state.isBeingOpened)throw new ot.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var c=this._versions,u=c.filter(function(f){return f._cfg.version===a})[0];return u||(u=new this.Version(a),c.push(u),c.sort(cx),u.stores({}),this._state.autoSchema=!1,u)},Gt.prototype._whenReady=function(a){var c=this;return this.idbdb&&(this._state.openComplete||et.letThrough||this._vip)?a():new Y(function(u,f){if(c._state.openComplete)return f(new ot.DatabaseClosed(c._state.dbOpenError));if(!c._state.isBeingOpened){if(!c._state.autoOpen)return void f(new ot.DatabaseClosed);c.open().catch(It)}c._state.dbReadyPromise.then(u,f)}).then(a)},Gt.prototype.use=function(a){var c=a.stack,u=a.create,f=a.level,h=a.name;return h&&this.unuse({stack:c,name:h}),a=this._middlewares[c]||(this._middlewares[c]=[]),a.push({stack:c,create:u,level:f??10,name:h}),a.sort(function(g,v){return g.level-v.level}),this},Gt.prototype.unuse=function(a){var c=a.stack,u=a.name,f=a.create;return c&&this._middlewares[c]&&(this._middlewares[c]=this._middlewares[c].filter(function(h){return f?h.create!==f:!!u&&h.name!==u})),this},Gt.prototype.open=function(){var a=this;return Jn(pn,function(){return fx(a)})},Gt.prototype._close=function(){var a=this._state,c=jo.indexOf(this);if(0<=c&&jo.splice(c,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}a.isBeingOpened||(a.dbReadyPromise=new Y(function(u){a.dbReadyResolve=u}),a.openCanceller=new Y(function(u,f){a.cancelOpen=f}))},Gt.prototype.close=function(u){var c=(u===void 0?{disableAutoOpen:!0}:u).disableAutoOpen,u=this._state;c?(u.isBeingOpened&&u.cancelOpen(new ot.DatabaseClosed),this._close(),u.autoOpen=!1,u.dbOpenError=new ot.DatabaseClosed):(this._close(),u.autoOpen=this._options.autoOpen||u.isBeingOpened,u.openComplete=!1,u.dbOpenError=null)},Gt.prototype.delete=function(a){var c=this;a===void 0&&(a={disableAutoOpen:!0});var u=0<arguments.length&&typeof arguments[0]!="object",f=this._state;return new Y(function(h,g){function v(){c.close(a);var b=c._deps.indexedDB.deleteDatabase(c.name);b.onsuccess=Ut(function(){var x,C,E;x=c._deps,C=c.name,E=x.indexedDB,x=x.IDBKeyRange,wu(E)||C===ys||xu(E,x).delete(C).catch(It),h()}),b.onerror=Sr(g),b.onblocked=c._fireOnBlocked}if(u)throw new ot.InvalidArgument("Invalid closeOptions argument to db.delete()");f.isBeingOpened?f.dbReadyPromise.then(v):v()})},Gt.prototype.backendDB=function(){return this.idbdb},Gt.prototype.isOpen=function(){return this.idbdb!==null},Gt.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"},Gt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Gt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Gt.prototype,"tables",{get:function(){var a=this;return o(this._allTables).map(function(c){return a._allTables[c]})},enumerable:!1,configurable:!0}),Gt.prototype.transaction=function(){var a=(function(c,u,f){var h=arguments.length;if(h<2)throw new ot.InvalidArgument("Too few arguments");for(var g=new Array(h-1);--h;)g[h-1]=arguments[h];return f=g.pop(),[c,Ft(g),f]}).apply(this,arguments);return this._transaction.apply(this,a)},Gt.prototype._transaction=function(a,c,u){var f=this,h=et.trans;h&&h.db===this&&a.indexOf("!")===-1||(h=null);var g,v,b=a.indexOf("?")!==-1;a=a.replace("!","").replace("?","");try{if(v=c.map(function(C){if(C=C instanceof f.Table?C.name:C,typeof C!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return C}),a=="r"||a===lu)g=lu;else{if(a!="rw"&&a!=uu)throw new ot.InvalidArgument("Invalid transaction mode: "+a);g=uu}if(h){if(h.mode===lu&&g===uu){if(!b)throw new ot.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");h=null}h&&v.forEach(function(C){if(h&&h.storeNames.indexOf(C)===-1){if(!b)throw new ot.SubTransaction("Table "+C+" not included in parent transaction.");h=null}}),b&&h&&!h.active&&(h=null)}}catch(C){return h?h._promise(null,function(E,_){_(C)}):Kt(C)}var x=(function C(E,_,I,w,O){return Y.resolve().then(function(){var A=et.transless||et,R=E._createTransaction(_,I,E._dbSchema,w);if(R.explicit=!0,A={trans:R,transless:A},w)R.idbtrans=w.idbtrans;else try{R.create(),R.idbtrans._explicit=!0,E._state.PR1398_maxLoop=3}catch(N){return N.name===hn.InvalidState&&E.isOpen()&&0<--E._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),E.close({disableAutoOpen:!1}),E.open().then(function(){return C(E,_,I,null,O)})):Kt(N)}var T,M=fn(O);return M&&Fo(),A=Y.follow(function(){var N;(T=O.call(R,R))&&(M?(N=gn.bind(null,null),T.then(N,N)):typeof T.next=="function"&&typeof T.throw=="function"&&(T=ku(T)))},A),(T&&typeof T.then=="function"?Y.resolve(T).then(function(N){return R.active?N:Kt(new ot.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):A.then(function(){return T})).then(function(N){return w&&R._resolve(),R._completion.then(function(){return N})}).catch(function(N){return R._reject(N),Kt(N)})})}).bind(null,this,g,v,h,u);return h?h._promise(g,x,"lock"):et.trans?Jn(et.transless,function(){return f._whenReady(x)}):this._whenReady(x)},Gt.prototype.table=function(a){if(!p(this._allTables,a))throw new ot.InvalidTable("Table ".concat(a," does not exist"));return this._allTables[a]},Gt);function Gt(a,c){var u=this;this._middlewares={},this.verno=0;var f=Gt.dependencies;this._options=c=e({addons:Gt.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange,cache:"cloned"},c),this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange},f=c.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var h,g,v,b,x,C={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:It,dbReadyPromise:null,cancelOpen:It,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:c.autoOpen};C.dbReadyPromise=new Y(function(_){C.dbReadyResolve=_}),C.openCanceller=new Y(function(_,I){C.cancelOpen=I}),this._state=C,this.name=a,this.on=Wi(this,"populate","blocked","versionchange","close",{ready:[tu,It]}),this.on.ready.subscribe=J(this.on.ready.subscribe,function(_){return function(I,w){Gt.vip(function(){var O,A=u._state;A.openComplete?(A.dbOpenError||Y.resolve().then(I),w&&_(I)):A.onReadyBeingFired?(A.onReadyBeingFired.push(I),w&&_(I)):(_(I),O=u,w||_(function R(){O.on.ready.unsubscribe(I),O.on.ready.unsubscribe(R)}))})}}),this.Collection=(h=this,Ki(ex.prototype,function(T,R){this.db=h;var w=Hh,O=null;if(R)try{w=R()}catch(M){O=M}var A=T._ctx,R=A.table,T=R.hook.reading.fire;this._ctx={table:R,index:A.index,isPrimKey:!A.index||R.schema.primKey.keyPath&&A.index===R.schema.primKey.name,range:w,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:O,or:A.or,valueMapper:T!==Ui?T:null}})),this.Table=(g=this,Ki(Qh.prototype,function(_,I,w){this.db=g,this._tx=w,this.name=_,this.schema=I,this.hook=g._allTables[_]?g._allTables[_].hook:Wi(null,{creating:[W_,It],reading:[H_,Ui],updating:[G_,It],deleting:[K_,It]})})),this.Transaction=(v=this,Ki(ox.prototype,function(_,I,w,O,A){var R=this;this.db=v,this.mode=_,this.storeNames=I,this.schema=w,this.chromeTransactionDurability=O,this.idbtrans=null,this.on=Wi(this,"complete","error","abort"),this.parent=A||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Y(function(T,M){R._resolve=T,R._reject=M}),this._completion.then(function(){R.active=!1,R.on.complete.fire()},function(T){var M=R.active;return R.active=!1,R.on.error.fire(T),R.parent?R.parent._reject(T):M&&R.idbtrans&&R.idbtrans.abort(),Kt(T)})})),this.Version=(b=this,Ki(dx.prototype,function(_){this.db=b,this._cfg={version:_,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(x=this,Ki(tp.prototype,function(_,I,w){if(this.db=x,this._ctx={table:_,index:I===":id"?null:I,or:w},this._cmp=this._ascending=_t,this._descending=function(O,A){return _t(A,O)},this._max=function(O,A){return 0<_t(O,A)?O:A},this._min=function(O,A){return _t(O,A)<0?O:A},this._IDBKeyRange=x._deps.IDBKeyRange,!this._IDBKeyRange)throw new ot.MissingAPI})),this.on("versionchange",function(_){0<_.newVersion?console.warn("Another connection wants to upgrade database '".concat(u.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(u.name,"'. Closing db now to resume the delete request.")),u.close({disableAutoOpen:!1})}),this.on("blocked",function(_){!_.newVersion||_.newVersion<_.oldVersion?console.warn("Dexie.delete('".concat(u.name,"') was blocked")):console.warn("Upgrade '".concat(u.name,"' blocked by other connection holding version ").concat(_.oldVersion/10))}),this._maxKey=Xi(c.IDBKeyRange),this._createTransaction=function(_,I,w,O){return new u.Transaction(_,I,w,u._options.chromeTransactionDurability,O)},this._fireOnBlocked=function(_){u.on("blocked").fire(_),jo.filter(function(I){return I.name===u.name&&I!==u&&!I._state.vcFired}).map(function(I){return I.on("versionchange").fire(_)})},this.use(mx),this.use(bx),this.use(gx),this.use(hx),this.use(px);var E=new Proxy(this,{get:function(_,I,w){if(I==="_vip")return!0;if(I==="table")return function(A){return Ms(u.table(A),E)};var O=Reflect.get(_,I,w);return O instanceof Qh?Ms(O,E):I==="tables"?O.map(function(A){return Ms(A,E)}):I==="_createTransaction"?function(){return Ms(O.apply(this,arguments),E)}:O}});this.vip=E,f.forEach(function(_){return _(u)})}var Ps,Xe=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",_x=(Mu.prototype.subscribe=function(a,c,u){return this._subscribe(a&&typeof a!="function"?a:{next:a,error:c,complete:u})},Mu.prototype[Xe]=function(){return this},Mu);function Mu(a){this._subscribe=a}try{Ps={indexedDB:n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB,IDBKeyRange:n.IDBKeyRange||n.webkitIDBKeyRange}}catch{Ps={indexedDB:null,IDBKeyRange:null}}function mp(a){var c,u=!1,f=new _x(function(h){var g=fn(a),v,b=!1,x={},C={},E={get closed(){return b},unsubscribe:function(){b||(b=!0,v&&v.abort(),_&&bn.storagemutated.unsubscribe(w))}};h.start&&h.start(E);var _=!1,I=function(){return cu(O)},w=function(A){As(x,A),Ru(C,x)&&I()},O=function(){var A,R,T;!b&&Ps.indexedDB&&(x={},A={},v&&v.abort(),v=new AbortController,T=function(M){var N=$o();try{g&&Fo();var B=mn(a,M);return B=g?B.finally(gn):B}finally{N&&Bo()}}(R={subscr:A,signal:v.signal,requery:I,querier:a,trans:null}),Promise.resolve(T).then(function(M){u=!0,c=M,b||R.signal.aborted||(x={},function(N){for(var B in N)if(p(N,B))return;return 1}(C=A)||_||(bn(Yi,w),_=!0),cu(function(){return!b&&h.next&&h.next(M)}))},function(M){u=!1,["DatabaseClosedError","AbortError"].includes(M?.name)||b||cu(function(){b||h.error&&h.error(M)})}))};return setTimeout(I,0),E});return f.hasValue=function(){return u},f.getValue=function(){return c},f}var no=Wr;function Pu(a){var c=_n;try{_n=!0,bn.storagemutated.fire(a),Du(a,!0)}finally{_n=c}}m(no,e(e({},ls),{delete:function(a){return new no(a,{addons:[]}).delete()},exists:function(a){return new no(a,{addons:[]}).open().then(function(c){return c.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return c=no.dependencies,u=c.indexedDB,c=c.IDBKeyRange,(wu(u)?Promise.resolve(u.databases()).then(function(f){return f.map(function(h){return h.name}).filter(function(h){return h!==ys})}):xu(u,c).toCollection().primaryKeys()).then(a)}catch{return Kt(new ot.MissingAPI)}var c,u},defineClass:function(){return function(a){s(this,a)}},ignoreTransaction:function(a){return et.trans?Jn(et.transless,a):a()},vip:Cu,async:function(a){return function(){try{var c=ku(a.apply(this,arguments));return c&&typeof c.then=="function"?c:Y.resolve(c)}catch(u){return Kt(u)}}},spawn:function(a,c,u){try{var f=ku(a.apply(u,c||[]));return f&&typeof f.then=="function"?f:Y.resolve(f)}catch(h){return Kt(h)}},currentTransaction:{get:function(){return et.trans||null}},waitFor:function(a,c){return c=Y.resolve(typeof a=="function"?no.ignoreTransaction(a):a).timeout(c||6e4),et.trans?et.trans.waitFor(c):c},Promise:Y,debug:{get:function(){return Cr},set:function(a){Bh(a)}},derive:D,extend:s,props:m,override:J,Events:Wi,on:bn,liveQuery:mp,extendObservabilitySet:As,getByKeyPath:At,setByKeyPath:st,delByKeyPath:function(a,c){typeof c=="string"?st(a,c,void 0):"length"in c&&[].map.call(c,function(u){st(a,u,void 0)})},shallowClone:Mt,deepClone:ur,getObjectDiff:Au,cmp:_t,asap:tt,minKey:-1/0,addons:[],connections:jo,errnames:hn,dependencies:Ps,cache:ro,semVer:"4.0.10",version:"4.0.10".split(".").map(function(a){return parseInt(a)}).reduce(function(a,c,u){return a+c/Math.pow(10,2*u)})})),no.maxKey=Xi(no.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(bn(Yi,function(a){_n||(a=new CustomEvent(pu,{detail:a}),_n=!0,dispatchEvent(a),_n=!1)}),addEventListener(pu,function(a){a=a.detail,_n||Pu(a)}));var Vo,_n=!1,gp=function(){};return typeof BroadcastChannel<"u"&&((gp=function(){(Vo=new BroadcastChannel(pu)).onmessage=function(a){return a.data&&Pu(a.data)}})(),typeof Vo.unref=="function"&&Vo.unref(),bn(Yi,function(a){_n||Vo.postMessage(a)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(a){if(!Wr.disableBfCache&&a.persisted){Cr&&console.debug("Dexie: handling persisted pagehide"),Vo?.close();for(var c=0,u=jo;c<u.length;c++)u[c].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(a){!Wr.disableBfCache&&a.persisted&&(Cr&&console.debug("Dexie: handling persisted pageshow"),gp(),Pu({all:new be(-1/0,[[]])}))})),Y.rejectionMapper=function(a,c){return!a||a instanceof fr||a instanceof TypeError||a instanceof SyntaxError||!a.name||!$h[a.name]?a:(c=new $h[a.name](c||a.message,a),"stack"in a&&S(c,"stack",{get:function(){return this.inner.stack}}),c)},Bh(Cr),e(Wr,Object.freeze({__proto__:null,Dexie:Wr,liveQuery:mp,Entity:Wh,cmp:_t,PropModSymbol:Hr,PropModification:Gi,replacePrefix:function(a,c){return new Gi({replacePrefix:[a,c]})},add:function(a){return new Gi({add:a})},remove:function(a){return new Gi({remove:a})},default:Wr,RangeSet:be,mergeRanges:ta,rangesOverlap:ip}),{default:Wr}),Wr})});var da=class{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},tn=class extends da{component;viewContainerRef;injector;projectableNodes;constructor(e,r,n,o){super(),this.component=e,this.viewContainerRef=r,this.injector=n,this.projectableNodes=o}},Ar=class extends da{templateRef;viewContainerRef;context;injector;constructor(e,r,n,o){super(),this.templateRef=e,this.viewContainerRef=r,this.context=n,this.injector=o}get origin(){return this.templateRef.elementRef}attach(e,r=this.context){return this.context=r,super.attach(e)}detach(){return this.context=void 0,super.detach()}},td=class extends da{element;constructor(e){super(),this.element=e instanceof Yt?e.nativeElement:e}},Rn=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof tn)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof Ar)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof td)return this._attachedPortal=e,this.attachDomPortal(e)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},Gs=class extends Rn{outletElement;_appRef;_defaultInjector;constructor(e,r,n){super(),this.outletElement=e,this._appRef=r,this._defaultInjector=n}attachComponentPortal(e){let r;if(e.viewContainerRef){let n=e.injector||e.viewContainerRef.injector,o=n.get(zu,null,{optional:!0})||void 0;r=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:n,ngModuleRef:o,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>r.destroy())}else{let n=this._appRef,o=e.injector||this._defaultInjector||xt.NULL,i=o.get(pr,n.injector);r=Zp(e.component,{elementInjector:o,environmentInjector:i,projectableNodes:e.projectableNodes||void 0}),n.attachView(r.hostView),this.setDisposeFn(()=>{n.viewCount>0&&n.detachView(r.hostView),r.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let r=e.viewContainerRef,n=r.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return n.rootNodes.forEach(o=>this.outletElement.appendChild(o)),n.detectChanges(),this.setDisposeFn(()=>{let o=r.indexOf(n);o!==-1&&r.remove(o)}),this._attachedPortal=e,n}attachDomPortal=e=>{let r=e.element;r.parentNode;let n=this.outletElement.ownerDocument.createComment("dom-portal");r.parentNode.insertBefore(n,r),this.outletElement.appendChild(r),this._attachedPortal=e,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(r,n)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}},hE=(()=>{class t extends Ar{constructor(){let r=k(Qr),n=k(Cn);super(r,n)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[Se]})}return t})();var On=(()=>{class t extends Rn{_moduleRef=k(zu,{optional:!0});_document=k(le);_viewContainerRef=k(Cn);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(r){this.hasAttached()&&!r&&!this._isInitialized||(this.hasAttached()&&super.detach(),r&&super.attach(r),this._attachedPortal=r||null)}attached=new re;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(r){r.setAttachedHost(this);let n=r.viewContainerRef!=null?r.viewContainerRef:this._viewContainerRef,o=n.createComponent(r.component,{index:n.length,injector:r.injector||n.injector,projectableNodes:r.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return n!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=r,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(r){r.setAttachedHost(this);let n=this._viewContainerRef.createEmbeddedView(r.templateRef,r.context,{injector:r.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=r,this._attachedRef=n,this.attached.emit(n),n}attachDomPortal=r=>{let n=r.element;n.parentNode;let o=this._document.createComment("dom-portal");r.setAttachedHost(this),n.parentNode.insertBefore(o,n),this._getRootNode().appendChild(n),this._attachedPortal=r,super.setDisposeFn(()=>{o.parentNode&&o.parentNode.replaceChild(n,o)})};_getRootNode(){let r=this._viewContainerRef.element.nativeElement;return r.nodeType===r.ELEMENT_NODE?r:r.parentNode}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Se]})}return t})();var en=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Xt({type:t});static \u0275inj=Qt({})}return t})();var vr=function(t){return t[t.NORMAL=0]="NORMAL",t[t.NEGATED=1]="NEGATED",t[t.INVERTED=2]="INVERTED",t}(vr||{}),Qs,go;function Ys(){if(go==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return go=!1,go;if("scrollBehavior"in document.documentElement.style)go=!0;else{let t=Element.prototype.scrollTo;t?go=!/\{\s*\[native code\]\s*\}/.test(t.toString()):go=!1}}return go}function ti(){if(typeof document!="object"||!document)return vr.NORMAL;if(Qs==null){let t=document.createElement("div"),e=t.style;t.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";let r=document.createElement("div"),n=r.style;n.width="2px",n.height="1px",t.appendChild(r),document.body.appendChild(t),Qs=vr.NORMAL,t.scrollLeft===0&&(t.scrollLeft=1,Qs=t.scrollLeft===0?vr.NEGATED:vr.INVERTED),t.remove()}return Qs}function ed(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var ei,gm=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function _E(){if(ei)return ei;if(typeof document!="object"||!document)return ei=new Set(gm),ei;let t=document.createElement("input");return ei=new Set(gm.filter(e=>(t.setAttribute("type",e),t.type===e))),ei}var vm={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};var Sx=new lt("MATERIAL_ANIMATIONS");function rr(){return k(Sx,{optional:!0})?.animationsDisabled||k(js,{optional:!0})==="NoopAnimations"?!0:k(Zu).matchMedia("(prefers-reduced-motion)").matches}function Zt(t){return t==null?"":typeof t=="string"?t:`${t}px`}function TE(t){return t!=null&&`${t}`!="false"}var nr=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(nr||{}),rd=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=nr.HIDDEN;constructor(e,r,n,o=!1){this._renderer=e,this.element=r,this.config=n,this._animationForciblyDisabledThroughCss=o}fadeOut(){this._renderer.fadeOutRipple(this)}},ym=Ws({passive:!0,capture:!0}),nd=class{_events=new Map;addHandler(e,r,n,o){let i=this._events.get(r);if(i){let s=i.get(n);s?s.add(o):i.set(n,new Set([o]))}else this._events.set(r,new Map([[n,new Set([o])]])),e.runOutsideAngular(()=>{document.addEventListener(r,this._delegateEventHandler,ym)})}removeHandler(e,r,n){let o=this._events.get(e);if(!o)return;let i=o.get(r);i&&(i.delete(n),i.size===0&&o.delete(r),o.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,ym)))}_delegateEventHandler=e=>{let r=Zr(e);r&&this._events.get(e.type)?.forEach((n,o)=>{(o===r||o.contains(r))&&n.forEach(i=>i.handleEvent(e))})}},fa={enterDuration:225,exitDuration:150},Rx=800,bm=Ws({passive:!0,capture:!0}),_m=["mousedown","touchstart"],xm=["mouseup","mouseleave","touchend","touchcancel"],Ox=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Jt({type:t,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(n,o){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return t})(),ha=class t{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new nd;constructor(e,r,n,o,i){this._target=e,this._ngZone=r,this._platform=o,o.isBrowser&&(this._containerElement=Zo(n)),i&&i.get(mo).load(Ox)}fadeInRipple(e,r,n={}){let o=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),i=F(F({},fa),n.animation);n.centered&&(e=o.left+o.width/2,r=o.top+o.height/2);let s=n.radius||Ex(e,r,o),l=e-o.left,d=r-o.top,p=i.enterDuration,m=document.createElement("div");m.classList.add("mat-ripple-element"),m.style.left=`${l-s}px`,m.style.top=`${d-s}px`,m.style.height=`${s*2}px`,m.style.width=`${s*2}px`,n.color!=null&&(m.style.backgroundColor=n.color),m.style.transitionDuration=`${p}ms`,this._containerElement.appendChild(m);let y=window.getComputedStyle(m),S=y.transitionProperty,D=y.transitionDuration,P=S==="none"||D==="0s"||D==="0s, 0s"||o.width===0&&o.height===0,j=new rd(this,m,n,P);m.style.transform="scale3d(1, 1, 1)",j.state=nr.FADING_IN,n.persistent||(this._mostRecentTransientRipple=j);let G=null;return!P&&(p||i.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let J=()=>{G&&(G.fallbackTimer=null),clearTimeout(tt),this._finishRippleTransition(j)},rt=()=>this._destroyRipple(j),tt=setTimeout(rt,p+100);m.addEventListener("transitionend",J),m.addEventListener("transitioncancel",rt),G={onTransitionEnd:J,onTransitionCancel:rt,fallbackTimer:tt}}),this._activeRipples.set(j,G),(P||!p)&&this._finishRippleTransition(j),j}fadeOutRipple(e){if(e.state===nr.FADING_OUT||e.state===nr.HIDDEN)return;let r=e.element,n=F(F({},fa),e.config.animation);r.style.transitionDuration=`${n.exitDuration}ms`,r.style.opacity="0",e.state=nr.FADING_OUT,(e._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let r=Zo(e);!this._platform.isBrowser||!r||r===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=r,_m.forEach(n=>{t._eventManager.addHandler(this._ngZone,n,r,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{xm.forEach(r=>{this._triggerElement.addEventListener(r,this,bm)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===nr.FADING_IN?this._startFadeOutTransition(e):e.state===nr.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let r=e===this._mostRecentTransientRipple,{persistent:n}=e.config;e.state=nr.VISIBLE,!n&&(!r||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let r=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=nr.HIDDEN,r!==null&&(e.element.removeEventListener("transitionend",r.onTransitionEnd),e.element.removeEventListener("transitioncancel",r.onTransitionCancel),r.fallbackTimer!==null&&clearTimeout(r.fallbackTimer)),e.element.remove()}_onMousedown(e){let r=cm(e),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+Rx;!this._target.rippleDisabled&&!r&&!n&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!lm(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let r=e.changedTouches;if(r)for(let n=0;n<r.length;n++)this.fadeInRipple(r[n].clientX,r[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let r=e.state===nr.VISIBLE||e.config.terminateOnPointerUp&&e.state===nr.FADING_IN;!e.config.persistent&&r&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(_m.forEach(r=>t._eventManager.removeHandler(r,e,this)),this._pointerUpEventsRegistered&&(xm.forEach(r=>e.removeEventListener(r,this,bm)),this._pointerUpEventsRegistered=!1))}};function Ex(t,e,r){let n=Math.max(Math.abs(t-r.left),Math.abs(t-r.right)),o=Math.max(Math.abs(e-r.top),Math.abs(e-r.bottom));return Math.sqrt(n*n+o*o)}var od=new lt("mat-ripple-global-options"),WE=(()=>{class t{_elementRef=k(Yt);_animationsDisabled=rr();color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(r){r&&this.fadeOutAllNonPersistent(),this._disabled=r,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(r){this._trigger=r,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){let r=k(qt),n=k(Re),o=k(od,{optional:!0}),i=k(xt);this._globalOptions=o||{},this._rippleRenderer=new ha(this,r,this._elementRef,n,i)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:F(F(F({},this._globalOptions.animation),this._animationsDisabled?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(r,n=0,o){return typeof r=="number"?this._rippleRenderer.fadeInRipple(r,n,F(F({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,F(F({},this.rippleConfig),r))}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(n,o){n&2&&tr("mat-ripple-unbounded",o.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return t})();var Dx={capture:!0},kx=["focus","mousedown","mouseenter","touchstart"],id="mat-ripple-loader-uninitialized",ad="mat-ripple-loader-class-name",wm="mat-ripple-loader-centered",Xs="mat-ripple-loader-disabled",Cm=(()=>{class t{_document=k(le);_animationsDisabled=rr();_globalRippleOptions=k(od,{optional:!0});_platform=k(Re);_ngZone=k(qt);_injector=k(xt);_eventCleanups;_hosts=new Map;constructor(){let r=k(Yr).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>kx.map(n=>r.listen(this._document,n,this._onInteraction,Dx)))}ngOnDestroy(){let r=this._hosts.keys();for(let n of r)this.destroyRipple(n);this._eventCleanups.forEach(n=>n())}configureRipple(r,n){r.setAttribute(id,this._globalRippleOptions?.namespace??""),(n.className||!r.hasAttribute(ad))&&r.setAttribute(ad,n.className||""),n.centered&&r.setAttribute(wm,""),n.disabled&&r.setAttribute(Xs,"")}setDisabled(r,n){let o=this._hosts.get(r);o?(o.target.rippleDisabled=n,!n&&!o.hasSetUpEvents&&(o.hasSetUpEvents=!0,o.renderer.setupTriggerEvents(r))):n?r.setAttribute(Xs,""):r.removeAttribute(Xs)}_onInteraction=r=>{let n=Zr(r);if(n instanceof HTMLElement){let o=n.closest(`[${id}="${this._globalRippleOptions?.namespace??""}"]`);o&&this._createRipple(o)}};_createRipple(r){if(!this._document||this._hosts.has(r))return;r.querySelector(".mat-ripple")?.remove();let n=this._document.createElement("span");n.classList.add("mat-ripple",r.getAttribute(ad)),r.append(n);let o=this._globalRippleOptions,i=this._animationsDisabled?0:o?.animation?.enterDuration??fa.enterDuration,s=this._animationsDisabled?0:o?.animation?.exitDuration??fa.exitDuration,l={rippleDisabled:this._animationsDisabled||o?.disabled||r.hasAttribute(Xs),rippleConfig:{centered:r.hasAttribute(wm),terminateOnPointerUp:o?.terminateOnPointerUp,animation:{enterDuration:i,exitDuration:s}}},d=new ha(l,this._ngZone,n,this._platform,this._injector),p=!l.rippleDisabled;p&&d.setupTriggerEvents(r),this._hosts.set(r,{target:l,renderer:d,hasSetUpEvents:p}),r.removeAttribute(id)}destroyRipple(r){let n=this._hosts.get(r);n&&(n.renderer._removeTriggerEvents(),this._hosts.delete(r))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Sm=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Jt({type:t,selectors:[["structural-styles"]],decls:0,vars:0,template:function(n,o){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return t})();var Ax=["mat-icon-button",""],Ix=["*"],Tx=new lt("MAT_BUTTON_CONFIG");function Rm(t){return t==null?void 0:Xp(t)}var sd=(()=>{class t{_elementRef=k(Yt);_ngZone=k(qt);_animationsDisabled=rr();_config=k(Tx,{optional:!0});_focusMonitor=k(Ks);_cleanupClick;_renderer=k(Er);_rippleLoader=k(Cm);_isAnchor;_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(r){this._disableRipple=r,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(r){this._disabled=r,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;tabIndex;set _tabindex(r){this.tabIndex=r}constructor(){k(mo).load(Sm);let r=this._elementRef.nativeElement;this._isAnchor=r.tagName==="A",this.disabledInteractive=this._config?.disabledInteractive??!1,this.color=this._config?.color??null,this._rippleLoader?.configureRipple(r,{className:"mat-mdc-button-ripple"})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0),this._isAnchor&&this._setupAsAnchor()}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(r="program",n){r?this._focusMonitor.focusVia(this._elementRef.nativeElement,r,n):this._elementRef.nativeElement.focus(n)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this._isAnchor?this.disabled||null:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}_getTabIndex(){return this._isAnchor?this.disabled&&!this.disabledInteractive?-1:this.tabIndex:this.tabIndex}_setupAsAnchor(){this._cleanupClick=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"click",r=>{this.disabled&&(r.preventDefault(),r.stopImmediatePropagation())}))}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,hostAttrs:[1,"mat-mdc-button-base"],hostVars:13,hostBindings:function(n,o){n&2&&(gr("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled())("tabindex",o._getTabIndex()),Wp(o.color?"mat-"+o.color:""),tr("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("mat-unthemed",!o.color)("_mat-animation-noopable",o._animationsDisabled))},inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",ge],disabled:[2,"disabled","disabled",ge],ariaDisabled:[2,"aria-disabled","ariaDisabled",ge],disabledInteractive:[2,"disabledInteractive","disabledInteractive",ge],tabIndex:[2,"tabIndex","tabIndex",Rm],_tabindex:[2,"tabindex","_tabindex",Rm]}})}return t})(),Mx=(()=>{class t extends sd{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Jt({type:t,selectors:[["button","mat-icon-button",""],["a","mat-icon-button",""],["button","matIconButton",""],["a","matIconButton",""]],hostAttrs:[1,"mdc-icon-button","mat-mdc-icon-button"],exportAs:["matButton","matAnchor"],features:[Se],attrs:Ax,ngContentSelectors:Ix,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,o){n&1&&(aa(),lo(0,"span",0),fo(1),lo(2,"span",1)(3,"span",2))},styles:[`.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%));flex-shrink:0;text-align:center;width:var(--mat-icon-button-state-layer-size, 40px);height:var(--mat-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mat-icon-button-state-layer-size, 40px) - var(--mat-icon-button-icon-size, 24px)) / 2);font-size:var(--mat-icon-button-icon-size, 24px);color:var(--mat-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-icon-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-icon-button-touch-target-display, block);left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mat-icon-button-icon-size, 24px);height:var(--mat-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%))}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return t})();var Om=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Xt({type:t});static \u0275inj=Qt({imports:[er,er]})}return t})();var Px=["matButton",""],Nx=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Lx=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var Em=new Map([["text",["mat-mdc-button"]],["filled",["mdc-button--unelevated","mat-mdc-unelevated-button"]],["elevated",["mdc-button--raised","mat-mdc-raised-button"]],["outlined",["mdc-button--outlined","mat-mdc-outlined-button"]],["tonal",["mat-tonal-button"]]]),Dm=(()=>{class t extends sd{get appearance(){return this._appearance}set appearance(r){this.setAppearance(r||this._config?.defaultAppearance||"text")}_appearance=null;constructor(){super();let r=$x(this._elementRef.nativeElement);r&&this.setAppearance(r)}setAppearance(r){if(r===this._appearance)return;let n=this._elementRef.nativeElement.classList,o=this._appearance?Em.get(this._appearance):null,i=Em.get(r);o&&n.remove(...o),n.add(...i),this._appearance=r}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Jt({type:t,selectors:[["button","matButton",""],["a","matButton",""],["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""],["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostAttrs:[1,"mdc-button"],inputs:{appearance:[0,"matButton","appearance"]},exportAs:["matButton","matAnchor"],features:[Se],attrs:Px,ngContentSelectors:Lx,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,o){n&1&&(aa(Nx),lo(0,"span",0),fo(1),Hu(2,"span",1),fo(3,1),Wu(),fo(4,2),lo(5,"span",2)(6,"span",3)),n&2&&tr("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:[`.mat-mdc-button-base{text-decoration:none}.mat-mdc-button-base .mat-icon{min-height:fit-content;flex-shrink:0}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-button-text-horizontal-padding, 12px);height:var(--mat-button-text-container-height, 40px);font-family:var(--mat-button-text-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-text-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-text-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-text-label-text-transform);font-weight:var(--mat-button-text-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mat-button-text-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mat-button-text-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-text-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-button-text-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-button-text-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-button-text-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-filled-container-height, 40px);font-family:var(--mat-button-filled-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-filled-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-filled-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-filled-label-text-transform);font-weight:var(--mat-button-filled-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-filled-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-button-filled-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-button-filled-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mat-button-filled-label-text-color, var(--mat-sys-on-primary));background-color:var(--mat-button-filled-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mat-button-filled-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mat-button-protected-container-elevation-shadow, var(--mat-sys-level1));height:var(--mat-button-protected-container-height, 40px);font-family:var(--mat-button-protected-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-protected-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-protected-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-protected-label-text-transform);font-weight:var(--mat-button-protected-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-protected-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-button-protected-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-button-protected-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-raised-button:not(:disabled){color:var(--mat-button-protected-label-text-color, var(--mat-sys-primary));background-color:var(--mat-button-protected-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mat-button-protected-container-shape, var(--mat-sys-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mat-button-protected-hover-container-elevation-shadow, var(--mat-sys-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mat-button-protected-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mat-button-protected-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-protected-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-protected-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mat-button-protected-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-outlined-container-height, 40px);font-family:var(--mat-button-outlined-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-outlined-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-outlined-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-outlined-label-text-transform);font-weight:var(--mat-button-outlined-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mat-button-outlined-container-shape, var(--mat-sys-corner-full));border-width:var(--mat-button-outlined-outline-width, 1px);padding:0 var(--mat-button-outlined-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-button-outlined-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-button-outlined-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-outlined-button:not(:disabled){color:var(--mat-button-outlined-label-text-color, var(--mat-sys-primary));border-color:var(--mat-button-outlined-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mat-button-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-tonal-container-height, 40px);font-family:var(--mat-button-tonal-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-tonal-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-tonal-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-tonal-label-text-transform);font-weight:var(--mat-button-tonal-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-tonal-horizontal-padding, 24px)}.mat-tonal-button:not(:disabled){color:var(--mat-button-tonal-label-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-button-tonal-container-color, var(--mat-sys-secondary-container))}.mat-tonal-button,.mat-tonal-button .mdc-button__ripple{border-radius:var(--mat-button-tonal-container-shape, var(--mat-sys-corner-full))}.mat-tonal-button[disabled],.mat-tonal-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-tonal-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-tonal-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-tonal-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}[dir=rtl] .mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}.mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}[dir=rtl] .mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}.mat-tonal-button .mat-ripple-element{background-color:var(--mat-button-tonal-ripple-color, color-mix(in srgb, var(--mat-sys-on-secondary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-tonal-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-tonal-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-tonal-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-tonal-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-tonal-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-tonal-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-button-tonal-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button,.mat-tonal-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon,.mat-tonal-button .mdc-button__label,.mat-tonal-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator,.mat-tonal-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-button:focus>.mat-focus-indicator::before,.mat-mdc-unelevated-button:focus>.mat-focus-indicator::before,.mat-mdc-raised-button:focus>.mat-focus-indicator::before,.mat-mdc-outlined-button:focus>.mat-focus-indicator::before,.mat-tonal-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable,.mat-tonal-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon,.mat-tonal-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-tonal-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return t})();function $x(t){return t.hasAttribute("mat-raised-button")?"elevated":t.hasAttribute("mat-stroked-button")?"outlined":t.hasAttribute("mat-flat-button")?"filled":t.hasAttribute("mat-button")?"text":null}var km=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Xt({type:t});static \u0275inj=Qt({imports:[er,Om,er]})}return t})();var dt="primary",Oa=Symbol("RouteTitle"),fd=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let r=this.params[e];return Array.isArray(r)?r[0]:r}return null}getAll(e){if(this.has(e)){let r=this.params[e];return Array.isArray(r)?r:[r]}return[]}get keys(){return Object.keys(this.params)}};function bo(t){return new fd(t)}function $m(t,e,r){let n=r.path.split("/");if(n.length>t.length||r.pathMatch==="full"&&(e.hasChildren()||n.length<t.length))return null;let o={};for(let i=0;i<n.length;i++){let s=n[i],l=t[i];if(s[0]===":")o[s.substring(1)]=l;else if(s!==l.path)return null}return{consumed:t.slice(0,n.length),posParams:o}}function Bx(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!Ir(t[r],e[r]))return!1;return!0}function Ir(t,e){let r=t?hd(t):void 0,n=e?hd(e):void 0;if(!r||!n||r.length!=n.length)return!1;let o;for(let i=0;i<r.length;i++)if(o=r[i],!Bm(t[o],e[o]))return!1;return!0}function hd(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Bm(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let r=[...t].sort(),n=[...e].sort();return r.every((o,i)=>n[i]===o)}else return t===e}function Fm(t){return t.length>0?t[t.length-1]:null}function rn(t){return na(t)?t:Up(t)?pe(Promise.resolve(t)):nt(t)}var Fx={exact:Um,subset:zm},jm={exact:jx,subset:Ux,ignored:()=>!0};function Am(t,e,r){return Fx[r.paths](t.root,e.root,r.matrixParams)&&jm[r.queryParams](t.queryParams,e.queryParams)&&!(r.fragment==="exact"&&t.fragment!==e.fragment)}function jx(t,e){return Ir(t,e)}function Um(t,e,r){if(!vo(t.segments,e.segments)||!tc(t.segments,e.segments,r)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let n in e.children)if(!t.children[n]||!Um(t.children[n],e.children[n],r))return!1;return!0}function Ux(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(r=>Bm(t[r],e[r]))}function zm(t,e,r){return Vm(t,e,e.segments,r)}function Vm(t,e,r,n){if(t.segments.length>r.length){let o=t.segments.slice(0,r.length);return!(!vo(o,r)||e.hasChildren()||!tc(o,r,n))}else if(t.segments.length===r.length){if(!vo(t.segments,r)||!tc(t.segments,r,n))return!1;for(let o in e.children)if(!t.children[o]||!zm(t.children[o],e.children[o],n))return!1;return!0}else{let o=r.slice(0,t.segments.length),i=r.slice(t.segments.length);return!vo(t.segments,o)||!tc(t.segments,o,n)||!t.children[dt]?!1:Vm(t.children[dt],e,i,n)}}function tc(t,e,r){return e.every((n,o)=>jm[r](t[o].parameters,n.parameters))}var Tr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Rt([],{}),r={},n=null){this.root=e,this.queryParams=r,this.fragment=n}get queryParamMap(){return this._queryParamMap??=bo(this.queryParams),this._queryParamMap}toString(){return qx.serialize(this)}},Rt=class{segments;children;parent=null;constructor(e,r){this.segments=e,this.children=r,Object.values(r).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ec(this)}},En=class{path;parameters;_parameterMap;constructor(e,r){this.path=e,this.parameters=r}get parameterMap(){return this._parameterMap??=bo(this.parameters),this._parameterMap}toString(){return Hm(this)}};function zx(t,e){return vo(t,e)&&t.every((r,n)=>Ir(r.parameters,e[n].parameters))}function vo(t,e){return t.length!==e.length?!1:t.every((r,n)=>r.path===e[n].path)}function Vx(t,e){let r=[];return Object.entries(t.children).forEach(([n,o])=>{n===dt&&(r=r.concat(e(o,n)))}),Object.entries(t.children).forEach(([n,o])=>{n!==dt&&(r=r.concat(e(o,n)))}),r}var _o=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:()=>new Dn,providedIn:"root"})}return t})(),Dn=class{parse(e){let r=new md(e);return new Tr(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}serialize(e){let r=`/${pa(e.root,!0)}`,n=Kx(e.queryParams),o=typeof e.fragment=="string"?`#${Hx(e.fragment)}`:"";return`${r}${n}${o}`}},qx=new Dn;function ec(t){return t.segments.map(e=>Hm(e)).join("/")}function pa(t,e){if(!t.hasChildren())return ec(t);if(e){let r=t.children[dt]?pa(t.children[dt],!1):"",n=[];return Object.entries(t.children).forEach(([o,i])=>{o!==dt&&n.push(`${o}:${pa(i,!1)}`)}),n.length>0?`${r}(${n.join("//")})`:r}else{let r=Vx(t,(n,o)=>o===dt?[pa(t.children[dt],!1)]:[`${o}:${pa(n,!1)}`]);return Object.keys(t.children).length===1&&t.children[dt]!=null?`${ec(t)}/${r[0]}`:`${ec(t)}/(${r.join("//")})`}}function qm(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Zs(t){return qm(t).replace(/%3B/gi,";")}function Hx(t){return encodeURI(t)}function pd(t){return qm(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rc(t){return decodeURIComponent(t)}function Im(t){return rc(t.replace(/\+/g,"%20"))}function Hm(t){return`${pd(t.path)}${Wx(t.parameters)}`}function Wx(t){return Object.entries(t).map(([e,r])=>`;${pd(e)}=${pd(r)}`).join("")}function Kx(t){let e=Object.entries(t).map(([r,n])=>Array.isArray(n)?n.map(o=>`${Zs(r)}=${Zs(o)}`).join("&"):`${Zs(r)}=${Zs(n)}`).filter(r=>r);return e.length?`?${e.join("&")}`:""}var Gx=/^[^\/()?;#]+/;function cd(t){let e=t.match(Gx);return e?e[0]:""}var Qx=/^[^\/()?;=#]+/;function Yx(t){let e=t.match(Qx);return e?e[0]:""}var Xx=/^[^=?&#]+/;function Zx(t){let e=t.match(Xx);return e?e[0]:""}var Jx=/^[^&#]+/;function tw(t){let e=t.match(Jx);return e?e[0]:""}var md=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Rt([],{}):new Rt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(r).length>0)&&(n[dt]=new Rt(e,r)),n}parseSegment(){let e=cd(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Ce(4009,!1);return this.capture(e),new En(rc(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let r=Yx(this.remaining);if(!r)return;this.capture(r);let n="";if(this.consumeOptional("=")){let o=cd(this.remaining);o&&(n=o,this.capture(n))}e[rc(r)]=rc(n)}parseQueryParam(e){let r=Zx(this.remaining);if(!r)return;this.capture(r);let n="";if(this.consumeOptional("=")){let s=tw(this.remaining);s&&(n=s,this.capture(n))}let o=Im(r),i=Im(n);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){let r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=cd(this.remaining),o=this.remaining[n.length];if(o!=="/"&&o!==")"&&o!==";")throw new Ce(4010,!1);let i;n.indexOf(":")>-1?(i=n.slice(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=dt);let s=this.parseChildren();r[i]=Object.keys(s).length===1?s[dt]:new Rt([],s),this.consumeOptional("//")}return r}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Ce(4011,!1)}};function Wm(t){return t.segments.length>0?new Rt([],{[dt]:t}):t}function Km(t){let e={};for(let[n,o]of Object.entries(t.children)){let i=Km(o);if(n===dt&&i.segments.length===0&&i.hasChildren())for(let[s,l]of Object.entries(i.children))e[s]=l;else(i.segments.length>0||i.hasChildren())&&(e[n]=i)}let r=new Rt(t.segments,e);return ew(r)}function ew(t){if(t.numberOfChildren===1&&t.children[dt]){let e=t.children[dt];return new Rt(t.segments.concat(e.segments),e.children)}return t}function kn(t){return t instanceof Tr}function Gm(t,e,r=null,n=null){let o=Qm(t);return Ym(o,e,r,n)}function Qm(t){let e;function r(i){let s={};for(let d of i.children){let p=r(d);s[d.outlet]=p}let l=new Rt(i.url,s);return i===t&&(e=l),l}let n=r(t.root),o=Wm(n);return e??o}function Ym(t,e,r,n){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return ld(o,o,o,r,n);let i=rw(e);if(i.toRoot())return ld(o,o,new Rt([],{}),r,n);let s=nw(i,o,t),l=s.processChildren?ga(s.segmentGroup,s.index,i.commands):Zm(s.segmentGroup,s.index,i.commands);return ld(o,s.segmentGroup,l,r,n)}function nc(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ya(t){return typeof t=="object"&&t!=null&&t.outlets}function ld(t,e,r,n,o){let i={};n&&Object.entries(n).forEach(([d,p])=>{i[d]=Array.isArray(p)?p.map(m=>`${m}`):`${p}`});let s;t===e?s=r:s=Xm(t,e,r);let l=Wm(Km(s));return new Tr(l,i,o)}function Xm(t,e,r){let n={};return Object.entries(t.children).forEach(([o,i])=>{i===e?n[o]=r:n[o]=Xm(i,e,r)}),new Rt(t.segments,n)}var oc=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,r,n){if(this.isAbsolute=e,this.numberOfDoubleDots=r,this.commands=n,e&&n.length>0&&nc(n[0]))throw new Ce(4003,!1);let o=n.find(ya);if(o&&o!==Fm(n))throw new Ce(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function rw(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new oc(!0,0,t);let e=0,r=!1,n=t.reduce((o,i,s)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let l={};return Object.entries(i.outlets).forEach(([d,p])=>{l[d]=typeof p=="string"?p.split("/"):p}),[...o,{outlets:l}]}if(i.segmentPath)return[...o,i.segmentPath]}return typeof i!="string"?[...o,i]:s===0?(i.split("/").forEach((l,d)=>{d==0&&l==="."||(d==0&&l===""?r=!0:l===".."?e++:l!=""&&o.push(l))}),o):[...o,i]},[]);return new oc(r,e,n)}var oi=class{segmentGroup;processChildren;index;constructor(e,r,n){this.segmentGroup=e,this.processChildren=r,this.index=n}};function nw(t,e,r){if(t.isAbsolute)return new oi(e,!0,0);if(!r)return new oi(e,!1,NaN);if(r.parent===null)return new oi(r,!0,0);let n=nc(t.commands[0])?0:1,o=r.segments.length-1+n;return ow(r,o,t.numberOfDoubleDots)}function ow(t,e,r){let n=t,o=e,i=r;for(;i>o;){if(i-=o,n=n.parent,!n)throw new Ce(4005,!1);o=n.segments.length}return new oi(n,!1,o-i)}function iw(t){return ya(t[0])?t[0].outlets:{[dt]:t}}function Zm(t,e,r){if(t??=new Rt([],{}),t.segments.length===0&&t.hasChildren())return ga(t,e,r);let n=aw(t,e,r),o=r.slice(n.commandIndex);if(n.match&&n.pathIndex<t.segments.length){let i=new Rt(t.segments.slice(0,n.pathIndex),{});return i.children[dt]=new Rt(t.segments.slice(n.pathIndex),t.children),ga(i,0,o)}else return n.match&&o.length===0?new Rt(t.segments,{}):n.match&&!t.hasChildren()?gd(t,e,r):n.match?ga(t,0,o):gd(t,e,r)}function ga(t,e,r){if(r.length===0)return new Rt(t.segments,{});{let n=iw(r),o={};if(Object.keys(n).some(i=>i!==dt)&&t.children[dt]&&t.numberOfChildren===1&&t.children[dt].segments.length===0){let i=ga(t.children[dt],e,r);return new Rt(t.segments,i.children)}return Object.entries(n).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[i]=Zm(t.children[i],e,s))}),Object.entries(t.children).forEach(([i,s])=>{n[i]===void 0&&(o[i]=s)}),new Rt(t.segments,o)}}function aw(t,e,r){let n=0,o=e,i={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(n>=r.length)return i;let s=t.segments[o],l=r[n];if(ya(l))break;let d=`${l}`,p=n<r.length-1?r[n+1]:null;if(o>0&&d===void 0)break;if(d&&p&&typeof p=="object"&&p.outlets===void 0){if(!Mm(d,p,s))return i;n+=2}else{if(!Mm(d,{},s))return i;n++}o++}return{match:!0,pathIndex:o,commandIndex:n}}function gd(t,e,r){let n=t.segments.slice(0,e),o=0;for(;o<r.length;){let i=r[o];if(ya(i)){let d=sw(i.outlets);return new Rt(n,d)}if(o===0&&nc(r[0])){let d=t.segments[e];n.push(new En(d.path,Tm(r[0]))),o++;continue}let s=ya(i)?i.outlets[dt]:`${i}`,l=o<r.length-1?r[o+1]:null;s&&l&&nc(l)?(n.push(new En(s,Tm(l))),o+=2):(n.push(new En(s,{})),o++)}return new Rt(n,{})}function sw(t){let e={};return Object.entries(t).forEach(([r,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(e[r]=gd(new Rt([],{}),0,n))}),e}function Tm(t){let e={};return Object.entries(t).forEach(([r,n])=>e[r]=`${n}`),e}function Mm(t,e,r){return t==r.path&&Ir(e,r.parameters)}var ii="imperative",ne=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ne||{}),qe=class{id;url;constructor(e,r){this.id=e,this.url=r}},Mr=class extends qe{type=ne.NavigationStart;navigationTrigger;restoredState;constructor(e,r,n="imperative",o=null){super(e,r),this.navigationTrigger=n,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ir=class extends qe{urlAfterRedirects;type=ne.NavigationEnd;constructor(e,r,n){super(e,r),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},De=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(De||{}),si=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(si||{}),or=class extends qe{reason;code;type=ne.NavigationCancel;constructor(e,r,n,o){super(e,r),this.reason=n,this.code=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Pr=class extends qe{reason;code;type=ne.NavigationSkipped;constructor(e,r,n,o){super(e,r),this.reason=n,this.code=o}},ci=class extends qe{error;target;type=ne.NavigationError;constructor(e,r,n,o){super(e,r),this.error=n,this.target=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ba=class extends qe{urlAfterRedirects;state;type=ne.RoutesRecognized;constructor(e,r,n,o){super(e,r),this.urlAfterRedirects=n,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ic=class extends qe{urlAfterRedirects;state;type=ne.GuardsCheckStart;constructor(e,r,n,o){super(e,r),this.urlAfterRedirects=n,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ac=class extends qe{urlAfterRedirects;state;shouldActivate;type=ne.GuardsCheckEnd;constructor(e,r,n,o,i){super(e,r),this.urlAfterRedirects=n,this.state=o,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},sc=class extends qe{urlAfterRedirects;state;type=ne.ResolveStart;constructor(e,r,n,o){super(e,r),this.urlAfterRedirects=n,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cc=class extends qe{urlAfterRedirects;state;type=ne.ResolveEnd;constructor(e,r,n,o){super(e,r),this.urlAfterRedirects=n,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lc=class{route;type=ne.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},uc=class{route;type=ne.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},dc=class{snapshot;type=ne.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fc=class{snapshot;type=ne.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hc=class{snapshot;type=ne.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pc=class{snapshot;type=ne.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},li=class{routerEvent;position;anchor;type=ne.Scroll;constructor(e,r,n){this.routerEvent=e,this.position=r,this.anchor=n}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},_a=class{},ui=class{url;navigationBehaviorOptions;constructor(e,r){this.url=e,this.navigationBehaviorOptions=r}};function cw(t){return!(t instanceof _a)&&!(t instanceof ui)}function lw(t,e){return t.providers&&!t._injector&&(t._injector=zs(t.providers,e,`Route: ${t.path}`)),t._injector??e}function yr(t){return t.outlet||dt}function uw(t,e){let r=t.filter(n=>yr(n)===e);return r.push(...t.filter(n=>yr(n)!==e)),r}function hi(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let r=e.routeConfig;if(r?._loadedInjector)return r._loadedInjector;if(r?._injector)return r._injector}return null}var mc=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return hi(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new xo(this.rootInjector)}},xo=(()=>{class t{rootInjector;contexts=new Map;constructor(r){this.rootInjector=r}onChildOutletCreated(r,n){let o=this.getOrCreateContext(r);o.outlet=n,this.contexts.set(r,o)}onChildOutletDestroyed(r){let n=this.getContext(r);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let n=this.getContext(r);return n||(n=new mc(this.rootInjector),this.contexts.set(r,n)),n}getContext(r){return this.contexts.get(r)||null}static \u0275fac=function(n){return new(n||t)(zt(pr))};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),gc=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let r=this.pathFromRoot(e);return r.length>1?r[r.length-2]:null}children(e){let r=vd(e,this._root);return r?r.children.map(n=>n.value):[]}firstChild(e){let r=vd(e,this._root);return r&&r.children.length>0?r.children[0].value:null}siblings(e){let r=yd(e,this._root);return r.length<2?[]:r[r.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return yd(e,this._root).map(r=>r.value)}};function vd(t,e){if(t===e.value)return e;for(let r of e.children){let n=vd(t,r);if(n)return n}return null}function yd(t,e){if(t===e.value)return[e];for(let r of e.children){let n=yd(t,r);if(n.length)return n.unshift(e),n}return[]}var Ve=class{value;children;constructor(e,r){this.value=e,this.children=r}toString(){return`TreeNode(${this.value})`}};function ni(t){let e={};return t&&t.children.forEach(r=>e[r.value.outlet]=r),e}var xa=class extends gc{snapshot;constructor(e,r){super(e),this.snapshot=r,Od(this,e)}toString(){return this.snapshot.toString()}};function Jm(t){let e=dw(t),r=new we([new En("",{})]),n=new we({}),o=new we({}),i=new we({}),s=new we(""),l=new ar(r,n,i,s,o,dt,t,e.root);return l.snapshot=e.root,new xa(new Ve(l,[]),e)}function dw(t){let e={},r={},n={},o="",i=new yo([],e,n,o,r,dt,t,null,{});return new wa("",new Ve(i,[]))}var ar=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,r,n,o,i,s,l,d){this.urlSubject=e,this.paramsSubject=r,this.queryParamsSubject=n,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=l,this._futureSnapshot=d,this.title=this.dataSubject?.pipe(ut(p=>p[Oa]))??nt(void 0),this.url=e,this.params=r,this.queryParams=n,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ut(e=>bo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ut(e=>bo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function vc(t,e,r="emptyOnly"){let n,{routeConfig:o}=t;return e!==null&&(r==="always"||o?.path===""||!e.component&&!e.routeConfig?.loadComponent)?n={params:F(F({},e.params),t.params),data:F(F({},e.data),t.data),resolve:F(F(F(F({},t.data),e.data),o?.data),t._resolvedData)}:n={params:F({},t.params),data:F({},t.data),resolve:F(F({},t.data),t._resolvedData??{})},o&&eg(o)&&(n.resolve[Oa]=o.title),n}var yo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Oa]}constructor(e,r,n,o,i,s,l,d,p){this.url=e,this.params=r,this.queryParams=n,this.fragment=o,this.data=i,this.outlet=s,this.component=l,this.routeConfig=d,this._resolve=p}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=bo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=bo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(n=>n.toString()).join("/"),r=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${r}')`}},wa=class extends gc{url;constructor(e,r){super(r),this.url=e,Od(this,r)}toString(){return tg(this._root)}};function Od(t,e){e.value._routerState=t,e.children.forEach(r=>Od(t,r))}function tg(t){let e=t.children.length>0?` { ${t.children.map(tg).join(", ")} } `:"";return`${t.value}${e}`}function ud(t){if(t.snapshot){let e=t.snapshot,r=t._futureSnapshot;t.snapshot=r,Ir(e.queryParams,r.queryParams)||t.queryParamsSubject.next(r.queryParams),e.fragment!==r.fragment&&t.fragmentSubject.next(r.fragment),Ir(e.params,r.params)||t.paramsSubject.next(r.params),Bx(e.url,r.url)||t.urlSubject.next(r.url),Ir(e.data,r.data)||t.dataSubject.next(r.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function bd(t,e){let r=Ir(t.params,e.params)&&zx(t.url,e.url),n=!t.parent!=!e.parent;return r&&!n&&(!t.parent||bd(t.parent,e.parent))}function eg(t){return typeof t.title=="string"||t.title===null}var rg=new lt(""),Ed=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=dt;activateEvents=new re;deactivateEvents=new re;attachEvents=new re;detachEvents=new re;routerOutletData=Qp(void 0);parentContexts=k(xo);location=k(Cn);changeDetector=k(Dr);inputBinder=k(Ea,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(r){if(r.name){let{firstChange:n,previousValue:o}=r.name;if(n)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ce(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ce(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ce(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,n){this.activated=r,this._activatedRoute=n,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,n){if(this.isActivated)throw new Ce(4013,!1);this._activatedRoute=r;let o=this.location,s=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,d=new _d(r,l,o.injector,this.routerOutletData);this.activated=o.createComponent(s,{index:o.length,injector:d,environmentInjector:n}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Gr]})}return t})(),_d=class{route;childContexts;parent;outletData;constructor(e,r,n,o){this.route=e,this.childContexts=r,this.parent=n,this.outletData=o}get(e,r){return e===ar?this.route:e===xo?this.childContexts:e===rg?this.outletData:this.parent.get(e,r)}},Ea=new lt(""),Dd=(()=>{class t{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:n}=r,o=$s([n.queryParams,n.params,n.data]).pipe(Ue(([i,s,l],d)=>(l=F(F(F({},i),s),l),d===0?nt(l):Promise.resolve(l)))).subscribe(i=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==n||n.component===null){this.unsubscribeFromRouteData(r);return}let s=Jp(n.component);if(!s){this.unsubscribeFromRouteData(r);return}for(let{templateName:l}of s.inputs)r.activatedComponentRef.setInput(l,i[l])});this.outletDataSubscriptions.set(r,o)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac})}return t})(),Da=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Jt({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(n,o){n&1&&qs(0,"router-outlet")},dependencies:[Ed],encapsulation:2})}return t})();function kd(t){let e=t.children&&t.children.map(kd),r=e?gt(F({},t),{children:e}):F({},t);return!r.component&&!r.loadComponent&&(e||r.loadChildren)&&r.outlet&&r.outlet!==dt&&(r.component=Da),r}function fw(t,e,r){let n=Ca(t,e._root,r?r._root:void 0);return new xa(n,e)}function Ca(t,e,r){if(r&&t.shouldReuseRoute(e.value,r.value.snapshot)){let n=r.value;n._futureSnapshot=e.value;let o=hw(t,e,r);return new Ve(n,o)}else{if(t.shouldAttach(e.value)){let i=t.retrieve(e.value);if(i!==null){let s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(l=>Ca(t,l)),s}}let n=pw(e.value),o=e.children.map(i=>Ca(t,i));return new Ve(n,o)}}function hw(t,e,r){return e.children.map(n=>{for(let o of r.children)if(t.shouldReuseRoute(n.value,o.value.snapshot))return Ca(t,n,o);return Ca(t,n)})}function pw(t){return new ar(new we(t.url),new we(t.params),new we(t.queryParams),new we(t.fragment),new we(t.data),t.outlet,t.component,t)}var di=class{redirectTo;navigationBehaviorOptions;constructor(e,r){this.redirectTo=e,this.navigationBehaviorOptions=r}},ng="ngNavigationCancelingError";function yc(t,e){let{redirectTo:r,navigationBehaviorOptions:n}=kn(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=og(!1,De.Redirect);return o.url=r,o.navigationBehaviorOptions=n,o}function og(t,e){let r=new Error(`NavigationCancelingError: ${t||""}`);return r[ng]=!0,r.cancellationCode=e,r}function mw(t){return ig(t)&&kn(t.url)}function ig(t){return!!t&&t[ng]}var gw=(t,e,r,n)=>ut(o=>(new xd(e,o.targetRouterState,o.currentRouterState,r,n).activate(t),o)),xd=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,r,n,o,i){this.routeReuseStrategy=e,this.futureState=r,this.currState=n,this.forwardEvent=o,this.inputBindingEnabled=i}activate(e){let r=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,n,e),ud(this.futureState.root),this.activateChildRoutes(r,n,e)}deactivateChildRoutes(e,r,n){let o=ni(r);e.children.forEach(i=>{let s=i.value.outlet;this.deactivateRoutes(i,o[s],n),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,n)})}deactivateRoutes(e,r,n){let o=e.value,i=r?r.value:null;if(o===i)if(o.component){let s=n.getContext(o.outlet);s&&this.deactivateChildRoutes(e,r,s.children)}else this.deactivateChildRoutes(e,r,n);else i&&this.deactivateRouteAndItsChildren(r,n)}deactivateRouteAndItsChildren(e,r){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,r):this.deactivateRouteAndOutlet(e,r)}detachAndStoreRouteSubtree(e,r){let n=r.getContext(e.value.outlet),o=n&&e.value.component?n.children:r,i=ni(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(n&&n.outlet){let s=n.outlet.detach(),l=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:l})}}deactivateRouteAndOutlet(e,r){let n=r.getContext(e.value.outlet),o=n&&e.value.component?n.children:r,i=ni(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(e,r,n){let o=ni(r);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],n),this.forwardEvent(new pc(i.value.snapshot))}),e.children.length&&this.forwardEvent(new fc(e.value.snapshot))}activateRoutes(e,r,n){let o=e.value,i=r?r.value:null;if(ud(o),o===i)if(o.component){let s=n.getOrCreateContext(o.outlet);this.activateChildRoutes(e,r,s.children)}else this.activateChildRoutes(e,r,n);else if(o.component){let s=n.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let l=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(l.contexts),s.attachRef=l.componentRef,s.route=l.route.value,s.outlet&&s.outlet.attach(l.componentRef,l.route.value),ud(l.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,n)}},bc=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ai=class{component;route;constructor(e,r){this.component=e,this.route=r}};function vw(t,e,r){let n=t._root,o=e?e._root:null;return ma(n,o,r,[n.value])}function yw(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function pi(t,e){let r=Symbol(),n=e.get(t,r);return n===r?typeof t=="function"&&!Op(t)?t:e.get(t):n}function ma(t,e,r,n,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=ni(e);return t.children.forEach(s=>{bw(s,i[s.value.outlet],r,n.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,l])=>va(l,r.getContext(s),o)),o}function bw(t,e,r,n,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=t.value,s=e?e.value:null,l=r?r.getContext(t.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){let d=_w(s,i,i.routeConfig.runGuardsAndResolvers);d?o.canActivateChecks.push(new bc(n)):(i.data=s.data,i._resolvedData=s._resolvedData),i.component?ma(t,e,l?l.children:null,n,o):ma(t,e,r,n,o),d&&l&&l.outlet&&l.outlet.isActivated&&o.canDeactivateChecks.push(new ai(l.outlet.component,s))}else s&&va(e,l,o),o.canActivateChecks.push(new bc(n)),i.component?ma(t,null,l?l.children:null,n,o):ma(t,null,r,n,o);return o}function _w(t,e,r){if(typeof r=="function")return r(t,e);switch(r){case"pathParamsChange":return!vo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!vo(t.url,e.url)||!Ir(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bd(t,e)||!Ir(t.queryParams,e.queryParams);case"paramsChange":default:return!bd(t,e)}}function va(t,e,r){let n=ni(t),o=t.value;Object.entries(n).forEach(([i,s])=>{o.component?e?va(s,e.children.getContext(i),r):va(s,null,r):va(s,e,r)}),o.component?e&&e.outlet&&e.outlet.isActivated?r.canDeactivateChecks.push(new ai(e.outlet.component,o)):r.canDeactivateChecks.push(new ai(null,o)):r.canDeactivateChecks.push(new ai(null,o))}function ka(t){return typeof t=="function"}function xw(t){return typeof t=="boolean"}function ww(t){return t&&ka(t.canLoad)}function Cw(t){return t&&ka(t.canActivate)}function Sw(t){return t&&ka(t.canActivateChild)}function Rw(t){return t&&ka(t.canDeactivate)}function Ow(t){return t&&ka(t.canMatch)}function ag(t){return t instanceof bp||t?.name==="EmptyError"}var Js=Symbol("INITIAL_VALUE");function fi(){return Ue(t=>$s(t.map(e=>e.pipe(Ze(1),hr(Js)))).pipe(ut(e=>{for(let r of e)if(r!==!0){if(r===Js)return Js;if(r===!1||Ew(r))return r}return!0}),bt(e=>e!==Js),Ze(1)))}function Ew(t){return kn(t)||t instanceof di}function Dw(t,e){return Wt(r=>{let{targetSnapshot:n,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=r;return s.length===0&&i.length===0?nt(gt(F({},r),{guardsResult:!0})):kw(s,n,o,t).pipe(Wt(l=>l&&xw(l)?Aw(n,i,t,e):nt(l)),ut(l=>gt(F({},r),{guardsResult:l})))})}function kw(t,e,r,n){return pe(t).pipe(Wt(o=>Nw(o.component,o.route,r,e,n)),wn(o=>o!==!0,!0))}function Aw(t,e,r,n){return pe(e).pipe(so(o=>xp(Tw(o.route.parent,n),Iw(o.route,n),Pw(t,o.path,r),Mw(t,o.route,r))),wn(o=>o!==!0,!0))}function Iw(t,e){return t!==null&&e&&e(new hc(t)),nt(!0)}function Tw(t,e){return t!==null&&e&&e(new dc(t)),nt(!0)}function Mw(t,e,r){let n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||n.length===0)return nt(!0);let o=n.map(i=>xn(()=>{let s=hi(e)??r,l=pi(i,s),d=Cw(l)?l.canActivate(e,t):Je(s,()=>l(e,t));return rn(d).pipe(wn())}));return nt(o).pipe(fi())}function Pw(t,e,r){let n=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>yw(s)).filter(s=>s!==null).map(s=>xn(()=>{let l=s.guards.map(d=>{let p=hi(s.node)??r,m=pi(d,p),y=Sw(m)?m.canActivateChild(n,t):Je(p,()=>m(n,t));return rn(y).pipe(wn())});return nt(l).pipe(fi())}));return nt(i).pipe(fi())}function Nw(t,e,r,n,o){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return nt(!0);let s=i.map(l=>{let d=hi(e)??o,p=pi(l,d),m=Rw(p)?p.canDeactivate(t,e,r,n):Je(d,()=>p(t,e,r,n));return rn(m).pipe(wn())});return nt(s).pipe(fi())}function Lw(t,e,r,n){let o=e.canLoad;if(o===void 0||o.length===0)return nt(!0);let i=o.map(s=>{let l=pi(s,t),d=ww(l)?l.canLoad(e,r):Je(t,()=>l(e,r));return rn(d)});return nt(i).pipe(fi(),sg(n))}function sg(t){return vp(me(e=>{if(typeof e!="boolean")throw yc(t,e)}),ut(e=>e===!0))}function $w(t,e,r,n){let o=e.canMatch;if(!o||o.length===0)return nt(!0);let i=o.map(s=>{let l=pi(s,t),d=Ow(l)?l.canMatch(e,r):Je(t,()=>l(e,r));return rn(d)});return nt(i).pipe(fi(),sg(n))}var Sa=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Ra=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ri(t){return ra(new Sa(t))}function Bw(t){return ra(new Ce(4e3,!1))}function Fw(t){return ra(og(!1,De.GuardRejected))}var wd=class{urlSerializer;urlTree;constructor(e,r){this.urlSerializer=e,this.urlTree=r}lineralizeSegments(e,r){let n=[],o=r.root;for(;;){if(n=n.concat(o.segments),o.numberOfChildren===0)return nt(n);if(o.numberOfChildren>1||!o.children[dt])return Bw(`${e.redirectTo}`);o=o.children[dt]}}applyRedirectCommands(e,r,n,o,i){return jw(r,o,i).pipe(ut(s=>{if(s instanceof Tr)throw new Ra(s);let l=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,n);if(s[0]==="/")throw new Ra(l);return l}))}applyRedirectCreateUrlTree(e,r,n,o){let i=this.createSegmentGroup(e,r.root,n,o);return new Tr(i,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}createQueryParams(e,r){let n={};return Object.entries(e).forEach(([o,i])=>{if(typeof i=="string"&&i[0]===":"){let l=i.substring(1);n[o]=r[l]}else n[o]=i}),n}createSegmentGroup(e,r,n,o){let i=this.createSegments(e,r.segments,n,o),s={};return Object.entries(r.children).forEach(([l,d])=>{s[l]=this.createSegmentGroup(e,d,n,o)}),new Rt(i,s)}createSegments(e,r,n,o){return r.map(i=>i.path[0]===":"?this.findPosParam(e,i,o):this.findOrReturn(i,n))}findPosParam(e,r,n){let o=n[r.path.substring(1)];if(!o)throw new Ce(4001,!1);return o}findOrReturn(e,r){let n=0;for(let o of r){if(o.path===e.path)return r.splice(n),o;n++}return e}};function jw(t,e,r){if(typeof t=="string")return nt(t);let n=t,{queryParams:o,fragment:i,routeConfig:s,url:l,outlet:d,params:p,data:m,title:y}=e;return rn(Je(r,()=>n({params:p,data:m,queryParams:o,fragment:i,routeConfig:s,url:l,outlet:d,title:y})))}var Cd={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Uw(t,e,r,n,o){let i=cg(t,e,r);return i.matched?(n=lw(e,n),$w(n,e,r,o).pipe(ut(s=>s===!0?i:F({},Cd)))):nt(i)}function cg(t,e,r){if(e.path==="**")return zw(r);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||r.length>0)?F({},Cd):{matched:!0,consumedSegments:[],remainingSegments:r,parameters:{},positionalParamSegments:{}};let o=(e.matcher||$m)(r,t,e);if(!o)return F({},Cd);let i={};Object.entries(o.posParams??{}).forEach(([l,d])=>{i[l]=d.path});let s=o.consumed.length>0?F(F({},i),o.consumed[o.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:r.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function zw(t){return{matched:!0,parameters:t.length>0?Fm(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Pm(t,e,r,n){return r.length>0&&Hw(t,r,n)?{segmentGroup:new Rt(e,qw(n,new Rt(r,t.children))),slicedSegments:[]}:r.length===0&&Ww(t,r,n)?{segmentGroup:new Rt(t.segments,Vw(t,r,n,t.children)),slicedSegments:r}:{segmentGroup:new Rt(t.segments,t.children),slicedSegments:r}}function Vw(t,e,r,n){let o={};for(let i of r)if(xc(t,e,i)&&!n[yr(i)]){let s=new Rt([],{});o[yr(i)]=s}return F(F({},n),o)}function qw(t,e){let r={};r[dt]=e;for(let n of t)if(n.path===""&&yr(n)!==dt){let o=new Rt([],{});r[yr(n)]=o}return r}function Hw(t,e,r){return r.some(n=>xc(t,e,n)&&yr(n)!==dt)}function Ww(t,e,r){return r.some(n=>xc(t,e,n))}function xc(t,e,r){return(t.hasChildren()||e.length>0)&&r.pathMatch==="full"?!1:r.path===""}function Kw(t,e,r){return e.length===0&&!t.children[r]}var Sd=class{};function Gw(t,e,r,n,o,i,s="emptyOnly"){return new Rd(t,e,r,n,o,s,i).recognize()}var Qw=31,Rd=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,r,n,o,i,s,l){this.injector=e,this.configLoader=r,this.rootComponentType=n,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=l,this.applyRedirects=new wd(this.urlSerializer,this.urlTree)}noMatchError(e){return new Ce(4002,`'${e.segmentGroup}'`)}recognize(){let e=Pm(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ut(({children:r,rootSnapshot:n})=>{let o=new Ve(n,r),i=new wa("",o),s=Gm(n,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),{state:i,tree:s}}))}match(e){let r=new yo([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),dt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,dt,r).pipe(ut(n=>({children:n,rootSnapshot:r})),ao(n=>{if(n instanceof Ra)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof Sa?this.noMatchError(n):n}))}processSegmentGroup(e,r,n,o,i){return n.segments.length===0&&n.hasChildren()?this.processChildren(e,r,n,i):this.processSegment(e,r,n,n.segments,o,!0,i).pipe(ut(s=>s instanceof Ve?[s]:[]))}processChildren(e,r,n,o){let i=[];for(let s of Object.keys(n.children))s==="primary"?i.unshift(s):i.push(s);return pe(i).pipe(so(s=>{let l=n.children[s],d=uw(r,s);return this.processSegmentGroup(e,d,l,s,o)}),Sp((s,l)=>(s.push(...l),s)),Bu(null),wp(),Wt(s=>{if(s===null)return ri(n);let l=lg(s);return Yw(l),nt(l)}))}processSegment(e,r,n,o,i,s,l){return pe(r).pipe(so(d=>this.processSegmentAgainstRoute(d._injector??e,r,d,n,o,i,s,l).pipe(ao(p=>{if(p instanceof Sa)return nt(null);throw p}))),wn(d=>!!d),ao(d=>{if(ag(d))return Kw(n,o,i)?nt(new Sd):ri(n);throw d}))}processSegmentAgainstRoute(e,r,n,o,i,s,l,d){return yr(n)!==s&&(s===dt||!xc(o,i,n))?ri(o):n.redirectTo===void 0?this.matchSegmentAgainstRoute(e,o,n,i,s,d):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(e,o,r,n,i,s,d):ri(o)}expandSegmentAgainstRouteUsingRedirect(e,r,n,o,i,s,l){let{matched:d,parameters:p,consumedSegments:m,positionalParamSegments:y,remainingSegments:S}=cg(r,o,i);if(!d)return ri(r);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Qw&&(this.allowRedirects=!1));let D=new yo(i,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Nm(o),yr(o),o.component??o._loadedComponent??null,o,Lm(o)),P=vc(D,l,this.paramsInheritanceStrategy);return D.params=Object.freeze(P.params),D.data=Object.freeze(P.data),this.applyRedirects.applyRedirectCommands(m,o.redirectTo,y,D,e).pipe(Ue(G=>this.applyRedirects.lineralizeSegments(o,G)),Wt(G=>this.processSegment(e,n,r,G.concat(S),s,!1,l)))}matchSegmentAgainstRoute(e,r,n,o,i,s){let l=Uw(r,n,o,e,this.urlSerializer);return n.path==="**"&&(r.children={}),l.pipe(Ue(d=>d.matched?(e=n._injector??e,this.getChildConfig(e,n,o).pipe(Ue(({routes:p})=>{let m=n._loadedInjector??e,{parameters:y,consumedSegments:S,remainingSegments:D}=d,P=new yo(S,y,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Nm(n),yr(n),n.component??n._loadedComponent??null,n,Lm(n)),j=vc(P,s,this.paramsInheritanceStrategy);P.params=Object.freeze(j.params),P.data=Object.freeze(j.data);let{segmentGroup:G,slicedSegments:J}=Pm(r,S,D,p);if(J.length===0&&G.hasChildren())return this.processChildren(m,p,G,P).pipe(ut(tt=>new Ve(P,tt)));if(p.length===0&&J.length===0)return nt(new Ve(P,[]));let rt=yr(n)===i;return this.processSegment(m,p,G,J,rt?dt:i,!0,P).pipe(ut(tt=>new Ve(P,tt instanceof Ve?[tt]:[])))}))):ri(r)))}getChildConfig(e,r,n){return r.children?nt({routes:r.children,injector:e}):r.loadChildren?r._loadedRoutes!==void 0?nt({routes:r._loadedRoutes,injector:r._loadedInjector}):Lw(e,r,n,this.urlSerializer).pipe(Wt(o=>o?this.configLoader.loadChildren(e,r).pipe(me(i=>{r._loadedRoutes=i.routes,r._loadedInjector=i.injector})):Fw(r))):nt({routes:[],injector:e})}};function Yw(t){t.sort((e,r)=>e.value.outlet===dt?-1:r.value.outlet===dt?1:e.value.outlet.localeCompare(r.value.outlet))}function Xw(t){let e=t.value.routeConfig;return e&&e.path===""}function lg(t){let e=[],r=new Set;for(let n of t){if(!Xw(n)){e.push(n);continue}let o=e.find(i=>n.value.routeConfig===i.value.routeConfig);o!==void 0?(o.children.push(...n.children),r.add(o)):e.push(n)}for(let n of r){let o=lg(n.children);e.push(new Ve(n.value,o))}return e.filter(n=>!r.has(n))}function Nm(t){return t.data||{}}function Lm(t){return t.resolve||{}}function Zw(t,e,r,n,o,i){return Wt(s=>Gw(t,e,r,n,s.extractedUrl,o,i).pipe(ut(({state:l,tree:d})=>gt(F({},s),{targetSnapshot:l,urlAfterRedirects:d}))))}function Jw(t,e){return Wt(r=>{let{targetSnapshot:n,guards:{canActivateChecks:o}}=r;if(!o.length)return nt(r);let i=new Set(o.map(d=>d.route)),s=new Set;for(let d of i)if(!s.has(d))for(let p of ug(d))s.add(p);let l=0;return pe(s).pipe(so(d=>i.has(d)?t0(d,n,t,e):(d.data=vc(d,d.parent,t).resolve,nt(void 0))),me(()=>l++),Fu(1),Wt(d=>l===s.size?nt(r):Kr))})}function ug(t){let e=t.children.map(r=>ug(r)).flat();return[t,...e]}function t0(t,e,r,n){let o=t.routeConfig,i=t._resolve;return o?.title!==void 0&&!eg(o)&&(i[Oa]=o.title),xn(()=>(t.data=vc(t,t.parent,r).resolve,e0(i,t,e,n).pipe(ut(s=>(t._resolvedData=s,t.data=F(F({},t.data),s),null)))))}function e0(t,e,r,n){let o=hd(t);if(o.length===0)return nt({});let i={};return pe(o).pipe(Wt(s=>r0(t[s],e,r,n).pipe(wn(),me(l=>{if(l instanceof di)throw yc(new Dn,l);i[s]=l}))),Fu(1),ut(()=>i),ao(s=>ag(s)?Kr:ra(s)))}function r0(t,e,r,n){let o=hi(e)??n,i=pi(t,o),s=i.resolve?i.resolve(e,r):Je(o,()=>i(e,r));return rn(s)}function dd(t){return Ue(e=>{let r=t(e);return r?pe(r).pipe(ut(()=>e)):nt(e)})}var Ad=(()=>{class t{buildTitle(r){let n,o=r.root;for(;o!==void 0;)n=this.getResolvedTitleForRoute(o)??n,o=o.children.find(i=>i.outlet===dt);return n}getResolvedTitleForRoute(r){return r.data[Oa]}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:()=>k(dg),providedIn:"root"})}return t})(),dg=(()=>{class t extends Ad{title;constructor(r){super(),this.title=r}updateTitle(r){let n=this.buildTitle(r);n!==void 0&&this.title.setTitle(n)}static \u0275fac=function(n){return new(n||t)(zt(sm))};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),An=new lt("",{providedIn:"root",factory:()=>({})}),Nr=new lt(""),wc=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(Hs);loadComponent(r,n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return nt(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let o=rn(Je(r,()=>n.loadComponent())).pipe(ut(hg),me(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),Wo(()=>{this.componentLoaders.delete(n)})),i=new io(o,()=>new at).pipe(ea());return this.componentLoaders.set(n,i),i}loadChildren(r,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return nt({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let i=fg(n,this.compiler,r,this.onLoadEndListener).pipe(Wo(()=>{this.childrenLoaders.delete(n)})),s=new io(i,()=>new at).pipe(ea());return this.childrenLoaders.set(n,s),s}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function fg(t,e,r,n){return rn(Je(r,()=>t.loadChildren())).pipe(ut(hg),Wt(o=>o instanceof Us||Array.isArray(o)?nt(o):pe(e.compileModuleAsync(o))),ut(o=>{n&&n(t);let i,s,l=!1;return Array.isArray(o)?(s=o,l=!0):(i=o.create(r).injector,s=i.get(Nr,[],{optional:!0,self:!0}).flat()),{routes:s.map(kd),injector:i}}))}function n0(t){return t&&typeof t=="object"&&"default"in t}function hg(t){return n0(t)?t.default:t}var Cc=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:()=>k(o0),providedIn:"root"})}return t})(),o0=(()=>{class t{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,n){return r}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Id=new lt(""),Td=new lt("");function pg(t,e,r){let n=t.get(Td),o=t.get(le);if(!o.startViewTransition||n.skipNextTransition)return n.skipNextTransition=!1,new Promise(p=>setTimeout(p));let i,s=new Promise(p=>{i=p}),l=o.startViewTransition(()=>(i(),i0(t)));l.ready.catch(p=>{});let{onViewTransitionCreated:d}=n;return d&&Je(t,()=>d({transition:l,from:e,to:r})),s}function i0(t){return new Promise(e=>{mr({read:()=>setTimeout(e)},{injector:t})})}var Md=new lt(""),Sc=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new at;transitionAbortWithErrorSubject=new at;configLoader=k(wc);environmentInjector=k(pr);destroyRef=k(Ap);urlSerializer=k(_o);rootContexts=k(xo);location=k(kr);inputBindingEnabled=k(Ea,{optional:!0})!==null;titleStrategy=k(Ad);options=k(An,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(Cc);createViewTransition=k(Id,{optional:!0});navigationErrorHandler=k(Md,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>nt(void 0);rootComponentType=null;destroyed=!1;constructor(){let r=o=>this.events.next(new lc(o)),n=o=>this.events.next(new uc(o));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=r,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(r){let n=++this.navigationId;this.transitions?.next(gt(F({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:n}))}setupNavigations(r){return this.transitions=new we(null),this.transitions.pipe(bt(n=>n!==null),Ue(n=>{let o=!1;return nt(n).pipe(Ue(i=>{if(this.navigationId>n.id)return this.cancelNavigationTransition(n,"",De.SupersededByNewNavigation),Kr;this.currentTransition=n,this.currentNavigation={id:i.id,initialUrl:i.rawUrl,extractedUrl:i.extractedUrl,targetBrowserUrl:typeof i.extras.browserUrl=="string"?this.urlSerializer.parse(i.extras.browserUrl):i.extras.browserUrl,trigger:i.source,extras:i.extras,previousNavigation:this.lastSuccessfulNavigation?gt(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>i.abortController.abort()};let s=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=i.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!s&&l!=="reload"){let d="";return this.events.next(new Pr(i.id,this.urlSerializer.serialize(i.rawUrl),d,si.IgnoredSameUrlNavigation)),i.resolve(!1),Kr}if(this.urlHandlingStrategy.shouldProcessUrl(i.rawUrl))return nt(i).pipe(Ue(d=>(this.events.next(new Mr(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?Kr:Promise.resolve(d))),Zw(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),me(d=>{n.targetSnapshot=d.targetSnapshot,n.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=gt(F({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let p=new ba(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(i.currentRawUrl)){let{id:d,extractedUrl:p,source:m,restoredState:y,extras:S}=i,D=new Mr(d,this.urlSerializer.serialize(p),m,y);this.events.next(D);let P=Jm(this.rootComponentType).snapshot;return this.currentTransition=n=gt(F({},i),{targetSnapshot:P,urlAfterRedirects:p,extras:gt(F({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,nt(n)}else{let d="";return this.events.next(new Pr(i.id,this.urlSerializer.serialize(i.extractedUrl),d,si.IgnoredByUrlHandlingStrategy)),i.resolve(!1),Kr}}),me(i=>{let s=new ic(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot);this.events.next(s)}),ut(i=>(this.currentTransition=n=gt(F({},i),{guards:vw(i.targetSnapshot,i.currentSnapshot,this.rootContexts)}),n)),Dw(this.environmentInjector,i=>this.events.next(i)),me(i=>{if(n.guardsResult=i.guardsResult,i.guardsResult&&typeof i.guardsResult!="boolean")throw yc(this.urlSerializer,i.guardsResult);let s=new ac(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot,!!i.guardsResult);this.events.next(s)}),bt(i=>i.guardsResult?!0:(this.cancelNavigationTransition(i,"",De.GuardRejected),!1)),dd(i=>{if(i.guards.canActivateChecks.length!==0)return nt(i).pipe(me(s=>{let l=new sc(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(l)}),Ue(s=>{let l=!1;return nt(s).pipe(Jw(this.paramsInheritanceStrategy,this.environmentInjector),me({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(s,"",De.NoDataFromResolver)}}))}),me(s=>{let l=new cc(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(l)}))}),dd(i=>{let s=l=>{let d=[];if(l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent){let p=hi(l)??this.environmentInjector;d.push(this.configLoader.loadComponent(p,l.routeConfig).pipe(me(m=>{l.component=m}),ut(()=>{})))}for(let p of l.children)d.push(...s(p));return d};return $s(s(i.targetSnapshot.root)).pipe(Bu(null),Ze(1))}),dd(()=>this.afterPreactivation()),Ue(()=>{let{currentSnapshot:i,targetSnapshot:s}=n,l=this.createViewTransition?.(this.environmentInjector,i.root,s.root);return l?pe(l).pipe(ut(()=>n)):nt(n)}),ut(i=>{let s=fw(r.routeReuseStrategy,i.targetSnapshot,i.currentRouterState);return this.currentTransition=n=gt(F({},i),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,n}),me(()=>{this.events.next(new _a)}),gw(this.rootContexts,r.routeReuseStrategy,i=>this.events.next(i),this.inputBindingEnabled),Ze(1),Ko(new qo(i=>{let s=n.abortController.signal,l=()=>i.next();return s.addEventListener("abort",l),()=>s.removeEventListener("abort",l)}).pipe(bt(()=>!o&&!n.targetRouterState),me(()=>{this.cancelNavigationTransition(n,n.abortController.signal.reason+"",De.Aborted)}))),me({next:i=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ir(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects))),this.titleStrategy?.updateTitle(i.targetRouterState.snapshot),i.resolve(!0)},complete:()=>{o=!0}}),Ko(this.transitionAbortWithErrorSubject.pipe(me(i=>{throw i}))),Wo(()=>{o||this.cancelNavigationTransition(n,"",De.SupersededByNewNavigation),this.currentTransition?.id===n.id&&(this.currentNavigation=null,this.currentTransition=null)}),ao(i=>{if(this.destroyed)return n.resolve(!1),Kr;if(o=!0,ig(i))this.events.next(new or(n.id,this.urlSerializer.serialize(n.extractedUrl),i.message,i.cancellationCode)),mw(i)?this.events.next(new ui(i.url,i.navigationBehaviorOptions)):n.resolve(!1);else{let s=new ci(n.id,this.urlSerializer.serialize(n.extractedUrl),i,n.targetSnapshot??void 0);try{let l=Je(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(l instanceof di){let{message:d,cancellationCode:p}=yc(this.urlSerializer,l);this.events.next(new or(n.id,this.urlSerializer.serialize(n.extractedUrl),d,p)),this.events.next(new ui(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(s),i}catch(l){this.options.resolveNavigationPromiseOnError?n.resolve(!1):n.reject(l)}}return Kr}))}))}cancelNavigationTransition(r,n,o){let i=new or(r.id,this.urlSerializer.serialize(r.extractedUrl),n,o);this.events.next(i),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),n=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==n?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function a0(t){return t!==ii}var Rc=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:()=>k(s0),providedIn:"root"})}return t})(),_c=class{shouldDetach(e){return!1}store(e,r){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,r){return e.routeConfig===r.routeConfig}},s0=(()=>{class t extends _c{static \u0275fac=(()=>{let r;return function(o){return(r||(r=ze(t)))(o||t)}})();static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),mg=(()=>{class t{urlSerializer=k(_o);options=k(An,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=k(kr);urlHandlingStrategy=k(Cc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Tr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:r,initialUrl:n,targetBrowserUrl:o}){let i=r!==void 0?this.urlHandlingStrategy.merge(r,n):n,s=o??i;return s instanceof Tr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:r,finalUrl:n,initialUrl:o}){n&&r?(this.currentUrlTree=n,this.rawUrlTree=this.urlHandlingStrategy.merge(n,o),this.routerState=r):this.rawUrlTree=o}routerState=Jm(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:r}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r??this.rawUrlTree)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:()=>k(c0),providedIn:"root"})}return t})(),c0=(()=>{class t extends mg{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(n=>{n.type==="popstate"&&setTimeout(()=>{r(n.url,n.state,"popstate")})})}handleRouterEvent(r,n){r instanceof Mr?this.updateStateMemento():r instanceof Pr?this.commitTransition(n):r instanceof ba?this.urlUpdateStrategy==="eager"&&(n.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(n),n)):r instanceof _a?(this.commitTransition(n),this.urlUpdateStrategy==="deferred"&&!n.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(n),n)):r instanceof or&&r.code!==De.SupersededByNewNavigation&&r.code!==De.Redirect?this.restoreHistory(n):r instanceof ci?this.restoreHistory(n,!0):r instanceof ir&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,{extras:n,id:o}){let{replaceUrl:i,state:s}=n;if(this.location.isCurrentPathEqualTo(r)||i){let l=this.browserPageId,d=F(F({},s),this.generateNgRouterState(o,l));this.location.replaceState(r,"",d)}else{let l=F(F({},s),this.generateNgRouterState(o,this.browserPageId+1));this.location.go(r,"",l)}}restoreHistory(r,n=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,i=this.currentPageId-o;i!==0?this.location.historyGo(i):this.getCurrentUrlTree()===r.finalUrl&&i===0&&(this.resetInternalState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetInternalState(r),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,n){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:n}:{navigationId:r}}static \u0275fac=(()=>{let r;return function(o){return(r||(r=ze(t)))(o||t)}})();static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Oc(t,e){t.events.pipe(bt(r=>r instanceof ir||r instanceof or||r instanceof ci||r instanceof Pr),ut(r=>r instanceof ir||r instanceof Pr?0:(r instanceof or?r.code===De.Redirect||r.code===De.SupersededByNewNavigation:!1)?2:1),bt(r=>r!==2),Ze(1)).subscribe(()=>{e()})}var l0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},u0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ke=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k(jp);stateManager=k(mg);options=k(An,{optional:!0})||{};pendingTasks=k(Ip);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(Sc);urlSerializer=k(_o);location=k(kr);urlHandlingStrategy=k(Cc);injector=k(pr);_events=new at;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k(Rc);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k(Nr,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(Ea,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Or;subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(n=>{try{let o=this.navigationTransitions.currentTransition,i=this.navigationTransitions.currentNavigation;if(o!==null&&i!==null){if(this.stateManager.handleRouterEvent(n,i),n instanceof or&&n.code!==De.Redirect&&n.code!==De.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof ir)this.navigated=!0;else if(n instanceof ui){let s=n.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(n.url,o.currentRawUrl),d=F({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||a0(o.source)},s);this.scheduleNavigation(l,ii,null,d,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}cw(n)&&this._events.next(n)}catch(o){this.navigationTransitions.transitionAbortWithErrorSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ii,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,n,o)=>{this.navigateToSyncWithBrowser(r,o,n)})}navigateToSyncWithBrowser(r,n,o){let i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let d=F({},o);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(i.state=d)}let l=this.parseUrl(r);this.scheduleNavigation(l,n,s,i).catch(d=>{this.disposed||this.injector.get(Fs)(d)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(kd),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,n={}){let{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:l,preserveFragment:d}=n,p=d?this.currentUrlTree.fragment:s,m=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":m=F(F({},this.currentUrlTree.queryParams),i);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=i||null}m!==null&&(m=this.removeEmptyProps(m));let y;try{let S=o?o.snapshot:this.routerState.snapshot.root;y=Qm(S)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),y=this.currentUrlTree.root}return Ym(y,r,m,p??null)}navigateByUrl(r,n={skipLocationChange:!1}){let o=kn(r)?r:this.parseUrl(r),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,ii,null,n)}navigate(r,n={skipLocationChange:!1}){return d0(r),this.navigateByUrl(this.createUrlTree(r,n),n)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,n){let o;if(n===!0?o=F({},l0):n===!1?o=F({},u0):o=n,kn(r))return Am(this.currentUrlTree,r,o);let i=this.parseUrl(r);return Am(this.currentUrlTree,i,o)}removeEmptyProps(r){return Object.entries(r).reduce((n,[o,i])=>(i!=null&&(n[o]=i),n),{})}scheduleNavigation(r,n,o,i,s){if(this.disposed)return Promise.resolve(!1);let l,d,p;s?(l=s.resolve,d=s.reject,p=s.promise):p=new Promise((y,S)=>{l=y,d=S});let m=this.pendingTasks.add();return Oc(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:i,resolve:l,reject:d,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(y=>Promise.reject(y))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function d0(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Ce(4008,!1)}var gg=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=ia(null);get href(){return Kp(this.reactiveHref)}set href(r){this.reactiveHref.set(r)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new at;applicationErrorHandler=k(Fs);options=k(An,{optional:!0});constructor(r,n,o,i,s,l){this.router=r,this.route=n,this.tabIndexAttribute=o,this.renderer=i,this.el=s,this.locationStrategy=l,this.reactiveHref.set(k(new Gp("href"),{optional:!0}));let d=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=d==="a"||d==="area"||!!(typeof customElements=="object"&&customElements.get(d)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let r=this.preserveFragment,n=o=>o==="merge"||o==="preserve";r||=n(this.queryParamsHandling),r||=!this.queryParamsHandling&&!n(this.options?.defaultQueryParamsHandling),r&&(this.subscription=this.router.events.subscribe(o=>{o instanceof ir&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(r){r==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(kn(r)?this.routerLinkInput=r:this.routerLinkInput=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0"))}onClick(r,n,o,i,s){let l=this.urlTree;if(l===null||this.isAnchorElement&&(r!==0||n||o||i||s||typeof this.target=="string"&&this.target!="_self"))return!0;let d={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,d)?.catch(p=>{this.applicationErrorHandler(p)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.reactiveHref.set(r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r))??"":null)}applyAttributeValue(r,n){let o=this.renderer,i=this.el.nativeElement;n!==null?o.setAttribute(i,r,n):o.removeAttribute(i,r)}get urlTree(){return this.routerLinkInput===null?null:kn(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(n){return new(n||t)(Xr(ke),Xr(ar),Mp("tabindex"),Xr(Er),Xr(Yt),Xr(sa))};static \u0275dir=Nt({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(n,o){n&1&&uo("click",function(s){return o.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),n&2&&gr("href",o.reactiveHref(),Np)("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ge],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ge],replaceUrl:[2,"replaceUrl","replaceUrl",ge],routerLink:"routerLink"},features:[Gr]})}return t})();var Aa=class{};var vg=(()=>{class t{router;injector;preloadingStrategy;loader;subscription;constructor(r,n,o,i){this.router=r,this.injector=n,this.preloadingStrategy=o,this.loader=i}setUpPreloading(){this.subscription=this.router.events.pipe(bt(r=>r instanceof ir),so(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,n){let o=[];for(let i of n){i.providers&&!i._injector&&(i._injector=zs(i.providers,r,`Route: ${i.path}`));let s=i._injector??r,l=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&i.canLoad===void 0||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(l,i.children??i._loadedRoutes))}return pe(o).pipe(Lu())}preloadConfig(r,n){return this.preloadingStrategy.preload(n,()=>{let o;n.loadChildren&&n.canLoad===void 0?o=this.loader.loadChildren(r,n):o=nt(null);let i=o.pipe(Wt(s=>s===null?nt(void 0):(n._loadedRoutes=s.routes,n._loadedInjector=s.injector,this.processRoutes(s.injector??r,s.routes))));if(n.loadComponent&&!n._loadedComponent){let s=this.loader.loadComponent(r,n);return pe([i,s]).pipe(Lu())}else return i})}static \u0275fac=function(n){return new(n||t)(zt(ke),zt(pr),zt(Aa),zt(wc))};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),yg=new lt(""),f0=(()=>{class t{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=ii;restoredId=0;store={};constructor(r,n,o,i,s={}){this.urlSerializer=r,this.transitions=n,this.viewportScroller=o,this.zone=i,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Mr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof ir?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Pr&&r.code===si.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof li&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,n){this.zone.runOutsideAngular(()=>U(this,null,function*(){yield new Promise(o=>{setTimeout(o),typeof requestAnimationFrame<"u"&&requestAnimationFrame(o)}),this.zone.run(()=>{this.transitions.events.next(new li(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,n))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(n){Lp()};static \u0275prov=ct({token:t,factory:t.\u0275fac})}return t})();function h0(t,...e){return Ep([{provide:Nr,multi:!0,useValue:t},[],{provide:ar,useFactory:bg,deps:[ke]},{provide:qu,multi:!0,useFactory:_g},e.map(r=>r.\u0275providers)])}function bg(t){return t.routerState.root}function Ia(t,e){return{\u0275kind:t,\u0275providers:e}}function _g(){let t=k(xt);return e=>{let r=t.get(Vs);if(e!==r.components[0])return;let n=t.get(ke),o=t.get(xg);t.get(Nd)===1&&n.initialNavigation(),t.get(Sg,null,{optional:!0})?.setUpPreloading(),t.get(yg,null,{optional:!0})?.init(),n.resetRootComponentType(r.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var xg=new lt("",{factory:()=>new at}),Nd=new lt("",{providedIn:"root",factory:()=>1});function wg(){let t=[{provide:Nd,useValue:0},Vu(()=>{let e=k(xt);return e.get(tm,Promise.resolve()).then(()=>new Promise(n=>{let o=e.get(ke),i=e.get(xg);Oc(o,()=>{n(!0)}),e.get(Sc).afterPreactivation=()=>(n(!0),i.closed?nt(void 0):i),o.initialNavigation()}))})];return Ia(2,t)}function Cg(){let t=[Vu(()=>{k(ke).setUpLocationChangeListener()}),{provide:Nd,useValue:2}];return Ia(3,t)}var Sg=new lt("");function Rg(t){return Ia(0,[{provide:Sg,useExisting:vg},{provide:Aa,useExisting:t}])}function Og(){return Ia(8,[Dd,{provide:Ea,useExisting:Dd}])}function Eg(t){$p("NgRouterViewTransitions");let e=[{provide:Id,useValue:pg},{provide:Td,useValue:F({skipNextTransition:!!t?.skipInitialTransition},t)}];return Ia(9,e)}var Dg=[kr,{provide:_o,useClass:Dn},ke,xo,{provide:ar,useFactory:bg,deps:[ke]},wc,[]],Ld=(()=>{class t{constructor(){}static forRoot(r,n){return{ngModule:t,providers:[Dg,[],{provide:Nr,multi:!0,useValue:r},[],n?.errorHandler?{provide:Md,useValue:n.errorHandler}:[],{provide:An,useValue:n||{}},n?.useHash?m0():g0(),p0(),n?.preloadingStrategy?Rg(n.preloadingStrategy).\u0275providers:[],n?.initialNavigation?v0(n):[],n?.bindToComponentInputs?Og().\u0275providers:[],n?.enableViewTransitions?Eg().\u0275providers:[],y0()]}}static forChild(r){return{ngModule:t,providers:[{provide:Nr,multi:!0,useValue:r}]}}static \u0275fac=function(n){return new(n||t)};static \u0275mod=Xt({type:t});static \u0275inj=Qt({})}return t})();function p0(){return{provide:yg,useFactory:()=>{let t=k(im),e=k(qt),r=k(An),n=k(Sc),o=k(_o);return r.scrollOffset&&t.setOffset(r.scrollOffset),new f0(o,n,t,e,r)}}}function m0(){return{provide:sa,useClass:rm}}function g0(){return{provide:sa,useClass:em}}function v0(t){return[t.initialNavigation==="disabled"?Cg().\u0275providers:[],t.initialNavigation==="enabledBlocking"?wg().\u0275providers:[]]}var Pd=new lt("");function y0(){return[{provide:Pd,useFactory:_g},{provide:qu,multi:!0,useExisting:Pd}]}var b0=new lt("LOCALIZE_ROUTER_FORROOT_GUARD"),$d=new lt("RAW_ROUTES"),In=function(t){return t.LocalStorage="LocalStorage",t.SessionStorage="SessionStorage",t.Cookie="Cookie",t}(In||{}),Ag=new lt("USE_CACHED_LANG"),Ig=new lt("CACHE_MECHANISM"),Tg=new lt("CACHE_NAME"),Mg=new lt("COOKIE_FORMAT"),Pg=new lt("INITIAL_NAVIGATION"),Ng=new lt("DEFAULT_LANG_FUNCTION"),Lg=new lt("ALWAYS_SET_PREFIX"),_0="LOCALIZE_DEFAULT_LANGUAGE",x0="{{value}};{{expires}}",w0=!1,Dc=(()=>{let e=class e{constructor(n=!0,o=!0,i=In.LocalStorage,s=_0,l=void 0,d=x0,p=w0){this.useCachedLang=n,this.alwaysSetPrefix=o,this.cacheName=s,this.cookieFormat=d,this.initialNavigation=p,this.cacheMechanism=i,this.defaultLangFunction=l}};e.\u0275fac=function(o){return new(o||e)(zt(Ag),zt(Lg),zt(Ig),zt(Tg),zt(Ng),zt(Mg),zt(Pg))},e.\u0275prov=ct({token:e,factory:e.\u0275fac});let t=e;return t})(),C0=30,Ta=(()=>{let e=class e{constructor(n,o,i){this.translate=n,this.location=o,this.settings=i}init(n){let o;if(this.routes=n,!this.locales||!this.locales.length)return Promise.resolve();let i=this.getLocationLang(),s=this._getBrowserLang();this.settings.defaultLangFunction?this.defaultLang=this.settings.defaultLangFunction(this.locales,this._cachedLang,s):this.defaultLang=this._cachedLang||s||this.locales[0],o=i||this.defaultLang,this.translate.setDefaultLang(this.defaultLang);let l=[];if(this.settings.alwaysSetPrefix){let d={path:"",redirectTo:this.defaultLang,pathMatch:"full"},p=n.findIndex(m=>m.path==="**");p!==-1&&(this._wildcardRoute=n.splice(p,1)[0]),l=this.routes.splice(0,this.routes.length,d)}else l=[...this.routes];for(let d=l.length-1;d>=0;d--)l[d].data&&l[d].data.skipRouteLocalization&&(this.settings.alwaysSetPrefix&&this.routes.push(l[d]),(l[d].redirectTo===void 0||!l[d].data.skipRouteLocalization.localizeRedirectTo||typeof l[d].redirectTo=="function")&&l.splice(d,1));return l&&l.length&&(this.locales.length>1||this.settings.alwaysSetPrefix)&&(this._languageRoute={children:l},this.routes.unshift(this._languageRoute)),this._wildcardRoute&&this.settings.alwaysSetPrefix&&this.routes.push(this._wildcardRoute),_p(this.translateRoutes(o))}initChildRoutes(n){return this._translateRouteTree(n),n}translateRoutes(n){return new qo(o=>{this._cachedLang=n,this._languageRoute&&(this._languageRoute.path=n),this.translate.use(n).subscribe(i=>{this._translationObject=i,this.currentLang=n,this._languageRoute?(this._translateRouteTree(this._languageRoute.children,!0),this._wildcardRoute&&this._wildcardRoute.redirectTo&&this._translateProperty(this._wildcardRoute,"redirectTo",!0)):this._translateRouteTree(this.routes,!0),o.next(void 0),o.complete()})})}_translateRouteTree(n,o){n.forEach(i=>{let s=i.data&&i.data.skipRouteLocalization,l=!s||s.localizeRedirectTo;if(i.redirectTo&&l&&typeof i.redirectTo!="function"){let d=i.redirectTo.indexOf("/")===0||o;this._translateProperty(i,"redirectTo",d)}s||(i.path!==null&&i.path!==void 0&&this._translateProperty(i,"path"),i.children&&this._translateRouteTree(i.children),i.loadChildren&&i._loadedRoutes?.length&&this._translateRouteTree(i._loadedRoutes))})}_translateProperty(n,o,i){let s=n.data=n.data||{};s.localizeRouter||(s.localizeRouter={}),s.localizeRouter[o]||(s.localizeRouter=gt(F({},s.localizeRouter),{[o]:n[o]}));let l=this.translateRoute(s.localizeRouter[o]);n[o]=i?this.addPrefixToUrl(l):l}get urlPrefix(){return this.settings.alwaysSetPrefix||this.currentLang!==this.defaultLang?this.currentLang?this.currentLang:this.defaultLang:""}addPrefixToUrl(n){let o=n.split("?"),i=o[0].length===1&&o[0]==="/";o[0]=o[0].replace(/\/$/,"");let s=o.join("?");return this.urlPrefix===""?s:!s.startsWith("/")&&!i?`${this.urlPrefix}/${s}`:`/${this.urlPrefix}${s}`}translateRoute(n){let o=n.split("?");if(o.length>2)throw Error("There should be only one query parameter block in the URL");return o[0].split("/").map(s=>s.length?this.translateText(s):s).join("/")+(o.length>1?`?${o[1]}`:"")}getLocationLang(n){let o=(n||this.location.path()).split(/[\?;]/),i=[];return o.length>0&&(i=o[0].split("/")),i.length>1&&this.locales.indexOf(i[1])!==-1?i[1]:i.length&&this.locales.indexOf(i[0])!==-1?i[0]:null}_getBrowserLang(){return this._returnIfInLocales(this.translate.getBrowserLang())}get _cachedLang(){if(this.settings.useCachedLang){if(this.settings.cacheMechanism===In.LocalStorage)return this._cacheWithLocalStorage();if(this.settings.cacheMechanism===In.SessionStorage)return this._cacheWithSessionStorage();if(this.settings.cacheMechanism===In.Cookie)return this._cacheWithCookies()}}set _cachedLang(n){this.settings.useCachedLang&&(this.settings.cacheMechanism===In.LocalStorage&&this._cacheWithLocalStorage(n),this.settings.cacheMechanism===In.SessionStorage&&this._cacheWithSessionStorage(n),this.settings.cacheMechanism===In.Cookie&&this._cacheWithCookies(n))}_cacheWithLocalStorage(n){try{if(typeof window>"u"||typeof window.localStorage>"u")return;if(n){window.localStorage.setItem(this.settings.cacheName,n);return}return this._returnIfInLocales(window.localStorage.getItem(this.settings.cacheName))}catch{return}}_cacheWithSessionStorage(n){try{if(typeof window>"u"||typeof window.sessionStorage>"u")return;if(n){window.sessionStorage.setItem(this.settings.cacheName,n);return}return this._returnIfInLocales(window.sessionStorage.getItem(this.settings.cacheName))}catch{return}}_cacheWithCookies(n){try{if(typeof document>"u"||typeof document.cookie>"u")return;let o=encodeURIComponent(this.settings.cacheName);if(n){let l=`${this.settings.cookieFormat}`;l=l.replace("{{value}}",`${o}=${encodeURIComponent(n)}`).replace(/{{expires:?(\d+)?}}/g,(d,p)=>{let m=p===void 0?C0:parseInt(p,10),y=new Date;return y.setTime(y.getTime()+m*864e5),`expires=${y.toUTCString()}`}),document.cookie=l;return}let s=new RegExp("(?:^"+o+"|;\\s*"+o+")=(.*?)(?:;|$)","g").exec(document.cookie);return decodeURIComponent(s[1])}catch{return}}_returnIfInLocales(n){return n&&this.locales.indexOf(n)!==-1?n:null}translateText(n){if(this.escapePrefix&&n.startsWith(this.escapePrefix))return n.replace(this.escapePrefix,"");{if(!this._translationObject)return n;let o=this.prefix+n,i=this.translate.getParsedResult(this._translationObject,o);return i!==o?i:n}}chooseQueryParams(n,o){let i;return n&&n.queryParams?i=n.queryParams:o&&(i=o),i}formatQueryParams(n){return new am({fromObject:n}).toString()}getPrefix(){return this.prefix}getEscapePrefix(){return this.escapePrefix}};e.\u0275fac=function(o){return new(o||e)(zt(pm),zt(kr),zt(Dc))},e.\u0275prov=ct({token:e,factory:e.\u0275fac});let t=e;return t})();var S0=(()=>{let e=class e extends Ta{load(n){return new Promise(o=>{this.init(n).then(o)})}};e.\u0275fac=(()=>{let n;return function(i){return(n||(n=ze(e)))(i||e)}})(),e.\u0275prov=ct({token:e,factory:e.\u0275fac});let t=e;return t})();function Ec(t,e){if(t===e)return!0;if(t===null||e===null)return!1;if(t!==t&&e!==e)return!0;let r=typeof t,n=typeof e,o,i,s;if(r===n&&r==="object")if(Array.isArray(t)){if(!Array.isArray(e))return!1;if((o=t.length)===e.length){for(i=0;i<o;i++)if(!Ec(t[i],e[i]))return!1;return!0}}else{if(Array.isArray(e))return!1;s=Object.create(null);for(i in t)if(t.hasOwnProperty(i)){if(!Ec(t[i],e[i]))return!1;s[i]=!0}for(i in e)if(e.hasOwnProperty(i)&&!(i in s)&&typeof e[i]<"u")return!1;return!0}return!1}function R0(t){return!!t&&typeof t.then=="function"}function Fd(t){let e=Array.isArray(t)?[]:{};for(let r in t)if(r){let n=t[r];e[r]=typeof n=="object"?Fd(n):n}return e}var jd=(()=>{let e=class e{constructor(n,o,i,s){this.parser=n,this.settings=o,this.router=i,this.route=s,this.routerEvents=new at;let l=new yp(1);this.hooks={_initializedSubject:l,initialized:l.asObservable()}}init(){this.applyConfigToRouter(this.parser.routes),this.router.events.pipe(bt(n=>n instanceof Mr),ju()).subscribe(this._routeChanged()),this.settings.initialNavigation&&this.router.initialNavigation()}changeLanguage(n,o,i){if(n!==this.parser.currentLang){let s=this.router.routerState.snapshot.root;this.parser.translateRoutes(n).subscribe(()=>{let l=this.traverseRouteSnapshot(s);if(l=this.translateRoute(l),!this.settings.alwaysSetPrefix){let m=l.split("/"),y=m.indexOf(this.parser.currentLang);if(this.parser.currentLang===this.parser.defaultLang)(y===0||y===1&&m[0]==="")&&(m=m.slice(0,y).concat(m.slice(y+1)));else if(y===-1){let S=m[0]===""?1:0;m=m.slice(0,S).concat(this.parser.currentLang,m.slice(S))}l=m.join("/")}l=l.replace(/\/+/g,"/");let d=l.lastIndexOf("/");d>0&&d===l.length-1&&(l=l.slice(0,-1));let p=this.parser.chooseQueryParams(o,this.route.snapshot.queryParams);if(this.applyConfigToRouter(this.parser.routes),this.lastExtras=o,i){let m=o?F({},o):{};p&&(m.queryParams=p),this.router.navigate([l],m)}else{let m=this.parser.formatQueryParams(p);m=m?`?${m}`:"",this.router.navigateByUrl(`${l}${m}`,o)}})}}traverseRouteSnapshot(n){return n.firstChild&&n.routeConfig?`${this.parseSegmentValue(n)}/${this.traverseRouteSnapshot(n.firstChild)}`:n.firstChild?this.traverseRouteSnapshot(n.firstChild):this.parseSegmentValue(n)}buildUrlFromSegments(n,o){return o.map((i,s)=>i.indexOf(":")===0?n.url[s].path:i).join("/")}parseSegmentValue(n){if(n.routeConfig&&n.routeConfig.matcher){let o=this.parseSegmentValueMatcher(n);return this.buildUrlFromSegments(n,o)}else if(n.data.localizeRouter){let i=n.data.localizeRouter.path.split("/");return this.buildUrlFromSegments(n,i)}else if(n.parent&&n.parent.parent){let i=n.routeConfig.path.split("/");return this.buildUrlFromSegments(n,i)}else return""}parseSegmentValueMatcher(n){let o=n.data&&n.data.localizeMatcher&&n.data.localizeMatcher.params||{};return n.url.map(s=>{let l=s.path,d=s.localizedParamName;return(d&&o[d]?o[d](l):null)||`${this.parser.getEscapePrefix()}${l}`})}translateRoute(n){if(typeof n=="string"){let i=this.parser.translateRoute(n);return n.indexOf("/")?i:this.parser.addPrefixToUrl(i)}let o=[];return n.forEach((i,s)=>{if(typeof i=="string"){let l=this.parser.translateRoute(i);!s&&!i.indexOf("/")?o.push(this.parser.addPrefixToUrl(l)):o.push(l)}else o.push(i)}),o}_routeChanged(){return([n,o])=>{let i=this.parser.getLocationLang(n.url)||this.parser.defaultLang,s=this.parser.getLocationLang(o.url)||this.parser.defaultLang,l=this.lastExtras;s!==i&&this.latestUrl!==o.url&&(this.latestUrl=o.url,this.cancelCurrentNavigation(),this.parser.translateRoutes(s).subscribe(()=>{this.applyConfigToRouter(this.parser.routes),this.lastExtras=void 0,this.router.navigateByUrl(o.url,l),this.routerEvents.next(s)})),this.latestUrl=o.url}}cancelCurrentNavigation(){let n=this.router.getCurrentNavigation(),o=this.router.serializeUrl(n.extractedUrl);this.router.events.next(new or(n.id,o,"")),this.router.navigationTransitions.transitions.next(gt(F({},this.router.navigationTransitions.transitions.getValue()),{id:0}))}applyConfigToRouter(n){this.router.resetConfig(Fd(n))}};e.\u0275fac=function(o){return new(o||e)(zt(Ta),zt(Dc),zt(ke),zt(ar))},e.\u0275prov=ct({token:e,factory:e.\u0275fac});let t=e;return t})(),O0=128,Rk=(()=>{let e=class e{constructor(n,o){this.localize=n,this._ref=o,this.value="",this.subscription=this.localize.routerEvents.subscribe(()=>{this.transform(this.lastKey)})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}transform(n){if(!n||n.length===0||!this.localize.parser.currentLang)return n;if(Ec(n,this.lastKey)&&Ec(this.lastLanguage,this.localize.parser.currentLang))return this.value;this.lastKey=n,this.lastLanguage=this.localize.parser.currentLang,this.value=this.localize.translateRoute(n),this.lastKey=n;let o=this._ref._view;return o&&o.state&O0?this.value:(setTimeout(()=>{this._ref.detectChanges()},0),this.value)}};e.\u0275fac=function(o){return new(o||e)(Xr(jd,16),Xr(Dr,16))},e.\u0275pipe=Bp({name:"localize",type:e,pure:!1});let t=e;return t})(),Bd=class{constructor(){}shouldDetach(e){return!1}store(e,r){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,r){return e&&r?this.getKey(e)===this.getKey(r):!1}getKey(e){if(e.firstChild&&e.firstChild.routeConfig&&e.firstChild.routeConfig.path&&e.firstChild.routeConfig.path.indexOf("**")!==-1)return"WILDCARD";if(!e.data.localizeRouter&&(!e.parent||!e.parent.parent)&&!e.data.skipRouteLocalization)return"LANG";if(e.routeConfig.matcher){let r=`${this.getKey(e.parent)}/${e.routeConfig.matcher.name}`;return e.data.discriminantPathKey&&(r=`${r}-${e.data.discriminantPathKey}`),r}else if(e.data.localizeRouter){let r=`${this.getKey(e.parent)}/${e.data.localizeRouter.path}`;return e.data.discriminantPathKey&&(r=`${r}-${e.data.discriminantPathKey}`),r}else{let r=e.routeConfig.path;return e.parent&&(r=`${this.getKey(e.parent)}/${e.routeConfig.path}`),e.data.discriminantPathKey&&(r=`${r}-${e.data.discriminantPathKey}`),r}}},E0=(()=>{let e=class e extends ke{constructor(){super(),this.platformId=k(Pp),this.compiler=k(Hs),this.localize=k(Ta),this.childrenLoaders=new WeakMap,this.loadModuleFactoryOrRoutes=(i,s)=>A0(s.loadChildren()).pipe(ut(k0),Wt(l=>l instanceof Us||Array.isArray(l)?nt(l):pe(this.compiler.compileModuleAsync(l))),ut(l=>{this.onLoadEndListener&&this.onLoadEndListener(s);let d,p;if(Array.isArray(l))p=this.localize.initChildRoutes([].concat(...l));else{d=l.create(i).injector;let y=d.get.bind(d);d.get=(S,D,P)=>{let j=y(S,D,P);return S===Nr?this.localize.initChildRoutes([].concat(...j)):j},p=d.get(Nr,[],{optional:!0,self:!0}).reduce((S,D)=>S.concat(D),[])}return{routes:p.map($g),injector:d}}));let o=om(this.platformId)?this.navigationTransitions.configLoader.__proto__:this.navigationTransitions.configLoader;o.loadChildren=(i,s)=>{if(this.childrenLoaders.get(s))return this.childrenLoaders.get(s);if(s._loadedRoutes)return nt({routes:s._loadedRoutes,injector:s._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(s);let d=this.loadModuleFactoryOrRoutes(i,s).pipe(Wo(()=>{this.childrenLoaders.delete(s)})),p=new io(d,()=>new at).pipe(ea());return this.childrenLoaders.set(s,p),p}}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function $g(t){let e=t.children&&t.children.map($g),r=e?gt(F({},t),{children:e}):F({},t);return!r.component&&!r.loadComponent&&(e||r.loadChildren)&&r.outlet&&r.outlet!==dt&&(r.component=Da),r}function D0(t){return t&&typeof t=="object"&&"default"in t}function k0(t){return D0(t)?t.default:t}function A0(t){return na(t)?t:R0(t)?pe(Promise.resolve(t)):nt(t)}var kg=(()=>{let e=class e{constructor(n){this.injector=n}appInitializer(){return this.parser.load(this.routes).then(()=>{let o=this.injector.get(jd),i=this.injector.get(ke),s=this.injector.get(Dc);if(o.init(),s.initialNavigation)return new Promise(l=>{let d=i.navigationTransitions.afterPreactivation,p=!0;i.navigationTransitions.afterPreactivation=()=>(p&&(l(),p=!1,o.hooks._initializedSubject.next(!0),o.hooks._initializedSubject.complete()),d())});o.hooks._initializedSubject.next(!0),o.hooks._initializedSubject.complete()})}generateInitializer(n,o){return this.parser=n,this.routes=o.reduce((i,s)=>i.concat(s)),this.appInitializer}};e.\u0275fac=function(o){return new(o||e)(zt(xt))},e.\u0275prov=ct({token:e,factory:e.\u0275fac});let t=e;return t})();function I0(t,e,r){let n=Fd(r);return t.generateInitializer(e,n).bind(t)}function T0(t,e){return[{provide:ke,useClass:E0},{provide:b0,useFactory:P0,deps:[[M0,new Uu,new Tp]]},{provide:Ag,useValue:e.useCachedLang},{provide:Lg,useValue:e.alwaysSetPrefix},{provide:Tg,useValue:e.cacheName},{provide:Ig,useValue:e.cacheMechanism},{provide:Ng,useValue:e.defaultLangFunction},{provide:Mg,useValue:e.cookieFormat},{provide:Pg,useValue:e.initialNavigation},Dc,e.parser||{provide:Ta,useClass:S0},{provide:$d,multi:!0,useValue:t},jd,kg,{provide:zp,multi:!0,useFactory:I0,deps:[kg,Ta,$d]},{provide:Rc,useClass:Bd}]}var M0=(()=>{let e=class e{static forRoot(n,o={}){return{ngModule:e,providers:T0(n,o)}}static forChild(n){return{ngModule:e,providers:[{provide:$d,multi:!0,useValue:n}]}}};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=Xt({type:e}),e.\u0275inj=Qt({imports:[nm,Ld,mm]});let t=e;return t})();function P0(t){if(t)throw new Error("LocalizeRouterModule.forRoot() called twice. Lazy loaded modules should use LocalizeRouterModule.forChild() instead.");return"guarded"}var kk=(()=>{let e=class e{constructor(){this.activePortal=new at,this.portal$=this.activePortal.asObservable()}setPortal(n){this.activePortal.next(n)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function wo(t){"@babel/helpers - typeof";return wo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wo(t)}function Bg(t,e){if(wo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(wo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fg(t){var e=Bg(t,"string");return wo(e)=="symbol"?e:e+""}function jg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fg(n.key),n)}}function Ae(t,e,r){return e&&jg(t.prototype,e),r&&jg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ma(t){return Array.isArray(t)?t.slice(0):[t]}function Lr(t){return Array.isArray(t)}function Ug(t){return t!=null}function kc(t,e){var r=0,n=-1;for(var o of t){n=n+1;var i=e(o,n);if(i)r=r+1;else break}return r}function br(t,e){var r=e.length;if(r!==0){var n=t.length;t.length=n+e.length;for(var o=0;o<r;++o)t[n+o]=e[o]}}function zg(t){return t.filter(function(e,r,n){return n.indexOf(e)===r})}function Vg(t){for(var e="",r=new Uint8Array(t),n=r.byteLength,o=0;o<n;o++)e+=String.fromCharCode(r[o]);return btoa(e)}function qg(t,e){return U(this,null,function*(){var r=yield fetch("data:"+e+";base64,"+t),n=yield r.blob();return n})}function Hg(t){var e=Object.prototype.toString.call(t);return e==="[object Uint8Array]"&&(t=new Blob([t])),typeof t=="string"?Promise.resolve(t):t.text()}function Wg(t){return U(this,null,function*(){if(typeof t=="string")return t;var e=Object.prototype.toString.call(t);e==="[object Uint8Array]"&&(t=new Blob([t]));var r=yield t.arrayBuffer();return Vg(r)})}function Kg(t){return t.size}function Co(t){for(var e="",r=0;r<t.length;r++){var n=t[r];if(n==="-")return parseInt(e,10);e+=n}throw new Error("malformatted revision: "+t)}function mi(t,e){var r=e?Co(e._rev)+1:1;return r+"-"+t}function zd(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&t[e]!==null&&(typeof t[e]=="object"||typeof t[e]=="function")&&!Object.isFrozen(t[e])&&zd(t[e])}),t}function Gg(t){var e=t.split("."),r=e.length;return r===1?n=>n[t]:n=>{for(var o=n,i=0;i<r;++i){var s=e[i];if(o=o[s],typeof o>"u")return o}return o}}function Ac(t){var e={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))if(typeof t[r]=="object"){var n=Ac(t[r]);for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[r+"."+o]=n[o])}else e[r]=t[r];return e}function kt(t){return Object.assign({},t)}function Qg(t){return Object.keys(t)[0]}function gi(t,e=!1){if(!t)return t;if(!e&&Array.isArray(t))return t.sort((n,o)=>typeof n=="string"&&typeof o=="string"?n.localeCompare(o):typeof n=="object"?1:-1).map(n=>gi(n,e));if(typeof t=="object"&&!Array.isArray(t)){var r={};return Object.keys(t).sort((n,o)=>n.localeCompare(o)).forEach(n=>{r[n]=gi(t[n],e)}),r}return t}function Ud(t){if(!t||t===null||typeof t!="object")return t;if(Array.isArray(t)){for(var e=new Array(t.length),r=e.length;r--;)e[r]=Ud(t[r]);return e}var n={};for(var o in t)n[o]=Ud(t[o]);return n}var sr=Ud;function He(t,e,r){return Object.defineProperty(t,e,{get:function(){return r}}),r}var Ic=1;function Tn(){return{lwt:Ic}}function nn(){return""}function Yg(t){return Object.assign({},t,{_meta:void 0,_deleted:void 0,_rev:void 0})}function Xg(t,e,r){if(e.length!==r.length)return!1;for(var n=0,o=e.length;n<o;){var i=e[n],s=r[n];if(n++,i._rev!==s._rev||i[t]!==s[t])return!1}return!0}var Gk=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});var Qk=Object.freeze(["prototype","__proto__","constructor"]);var N0="[native code] }",Yk=N0.length;var L0=Object.defineProperty,$0=(t,e,r)=>e in t?L0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vi=(t,e,r)=>($0(t,typeof e!="symbol"?e+"":e,r),r),Mn=class t{constructor(e,r){vi(this,"words"),vi(this,"sigBytes"),e=this.words=e||[],this.sigBytes=r===void 0?e.length*4:r}toString(e){return(e||B0).stringify(this)}concat(e){if(this.clamp(),this.sigBytes%4)for(let r=0;r<e.sigBytes;r++){let n=e.words[r>>>2]>>>24-r%4*8&255;this.words[this.sigBytes+r>>>2]|=n<<24-(this.sigBytes+r)%4*8}else for(let r=0;r<e.sigBytes;r+=4)this.words[this.sigBytes+r>>>2]=e.words[r>>>2];return this.sigBytes+=e.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new t([...this.words])}},B0={stringify(t){let e=[];for(let r=0;r<t.sigBytes;r++){let n=t.words[r>>>2]>>>24-r%4*8&255;e.push((n>>>4).toString(16),(n&15).toString(16))}return e.join("")}};var F0={parse(t){let e=t.length,r=[];for(let n=0;n<e;n++)r[n>>>2]|=(t.charCodeAt(n)&255)<<24-n%4*8;return new Mn(r,e)}},j0={parse(t){return F0.parse(unescape(encodeURIComponent(t)))}},Vd=class{constructor(){vi(this,"_data",new Mn),vi(this,"_nDataBytes",0),vi(this,"_minBufferSize",0),vi(this,"blockSize",512/32)}reset(){this._data=new Mn,this._nDataBytes=0}_append(e){typeof e=="string"&&(e=j0.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_doProcessBlock(e,r){}_process(e){let r,n=this._data.sigBytes/(this.blockSize*4);e?n=Math.ceil(n):n=Math.max((n|0)-this._minBufferSize,0);let o=n*this.blockSize,i=Math.min(o*4,this._data.sigBytes);if(o){for(let s=0;s<o;s+=this.blockSize)this._doProcessBlock(this._data.words,s);r=this._data.words.splice(0,o),this._data.sigBytes-=i}return new Mn(r,i)}},qd=class extends Vd{update(e){return this._append(e),this._process(),this}finalize(e){e&&this._append(e)}},U0=Object.defineProperty,z0=(t,e,r)=>e in t?U0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,V0=(t,e,r)=>(z0(t,typeof e!="symbol"?e+"":e,r),r),Zg=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],q0=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],So=[],Hd=class extends qd{constructor(){super(...arguments),V0(this,"_hash",new Mn([...Zg]))}reset(){super.reset(),this._hash=new Mn([...Zg])}_doProcessBlock(e,r){let n=this._hash.words,o=n[0],i=n[1],s=n[2],l=n[3],d=n[4],p=n[5],m=n[6],y=n[7];for(let S=0;S<64;S++){if(S<16)So[S]=e[r+S]|0;else{let tt=So[S-15],At=(tt<<25|tt>>>7)^(tt<<14|tt>>>18)^tt>>>3,st=So[S-2],Mt=(st<<15|st>>>17)^(st<<13|st>>>19)^st>>>10;So[S]=At+So[S-7]+Mt+So[S-16]}let D=d&p^~d&m,P=o&i^o&s^i&s,j=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),G=(d<<26|d>>>6)^(d<<21|d>>>11)^(d<<7|d>>>25),J=y+G+D+q0[S]+So[S],rt=j+P;y=m,m=p,p=d,d=l+J|0,l=s,s=i,i=o,o=J+rt|0}n[0]=n[0]+o|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+l|0,n[4]=n[4]+d|0,n[5]=n[5]+p|0,n[6]=n[6]+m|0,n[7]=n[7]+y|0}finalize(e){super.finalize(e);let r=this._nDataBytes*8,n=this._data.sigBytes*8;return this._data.words[n>>>5]|=128<<24-n%32,this._data.words[(n+64>>>9<<4)+14]=Math.floor(r/4294967296),this._data.words[(n+64>>>9<<4)+15]=r,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}};function Jg(t){return new Hd().finalize(t).toString()}function H0(t){return Promise.resolve(Jg(t))}function W0(t){return U(this,null,function*(){var e=new TextEncoder().encode(t),r=yield crypto.subtle.digest("SHA-256",e),n=Array.prototype.map.call(new Uint8Array(r),o=>("00"+o.toString(16)).slice(-2)).join("");return n})}var K0=typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof crypto.subtle.digest=="function",yi=K0?W0:H0;function tv(){return new Promise(t=>setTimeout(t,0))}function ev(t=0){return new Promise(e=>setTimeout(e,t))}var G0=Promise.resolve(!0),$r=Promise.resolve(!1),rv=Promise.resolve(null),Pn=Promise.resolve();function bi(t=1e4){return typeof requestIdleCallback=="function"?new Promise(e=>{requestIdleCallback(()=>e(),{timeout:t})}):ev(0)}var Wd=Pn;function nv(t=void 0){return Wd=Wd.then(()=>bi(t)),Wd}function ov(t,e){return t.reduce((r,n)=>r.then(n),Promise.resolve(e))}var iv=/\./g;var av="abcdefghijklmnopqrstuvwxyz";function Ro(t=10){for(var e="",r=0;r<t;r++)e+=av.charAt(Math.floor(Math.random()*av.length));return e}function Tc(t){t+="";var e=t.charAt(0).toUpperCase();return e+t.substr(1)}function _r(t){for(;t.charAt(0)===".";)t=t.substr(1);for(;t.slice(-1)===".";)t=t.slice(0,-1);return t}function Kd(t){return!!(t.includes("/")||t.includes("\\"))}function Nn(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var r,n;if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!Nn(t[n],e[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();var o=Object.keys(t);if(r=o.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,o[n]))return!1;for(n=r;n--!==0;){var i=o[n];if(!Nn(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}var Qd=t=>{var e=typeof t;return t!==null&&(e==="object"||e==="function")},Gd=new Set(["__proto__","prototype","constructor"]),Q0=new Set("0123456789");function sv(t){var e=[],r="",n="start",o=!1;for(var i of t)switch(i){case"\\":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");o&&(r+=i),n="property",o=!o;break}case".":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="property";break}if(o){o=!1,r+=i;break}if(Gd.has(r))return[];e.push(r),r="",n="property";break}case"[":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="index";break}if(o){o=!1,r+=i;break}if(n==="property"){if(Gd.has(r))return[];e.push(r),r=""}n="index";break}case"]":{if(n==="index"){e.push(Number.parseInt(r,10)),r="",n="indexEnd";break}if(n==="indexEnd")throw new Error("Invalid character after an index")}default:{if(n==="index"&&!Q0.has(i))throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");n==="start"&&(n="property"),o&&(o=!1,r+="\\"),r+=i}}switch(o&&(r+="\\"),n){case"property":{if(Gd.has(r))return[];e.push(r);break}case"index":throw new Error("Index was not closed");case"start":{e.push("");break}}return e}function cv(t,e){if(typeof e!="number"&&Array.isArray(t)){var r=Number.parseInt(e,10);return Number.isInteger(r)&&t[r]===t[e]}return!1}function Y0(t,e){if(cv(t,e))throw new Error("Cannot use string index")}function Ne(t,e,r){if(Array.isArray(e)&&(e=e.join(".")),!e.includes(".")&&!e.includes("["))return t[e];if(!Qd(t)||typeof e!="string")return r===void 0?t:r;var n=sv(e);if(n.length===0)return r;for(var o=0;o<n.length;o++){var i=n[o];if(cv(t,i)?t=o===n.length-1?void 0:null:t=t[i],t==null){if(o!==n.length-1)return r;break}}return t===void 0?r:t}function Yd(t,e,r){if(Array.isArray(e)&&(e=e.join(".")),!Qd(t)||typeof e!="string")return t;for(var n=t,o=sv(e),i=0;i<o.length;i++){var s=o[i];Y0(t,s),i===o.length-1?t[s]=r:Qd(t[s])||(t[s]=typeof o[i+1]=="number"?[]:{}),t=t[s]}return n}function Ln(t,e){var r=t.get(e);if(typeof r>"u")throw new Error("missing value from map "+e);return r}function We(t,e,r,n){var o=t.get(e);return typeof o>"u"?(o=r(),t.set(e,o)):n&&n(o),o}function Ot(t){var e=t.split("-"),r="RxDB";return e.forEach(n=>{r+=Tc(n)}),r+="Plugin",new Error(`You are using a function which must be overwritten by a plugin.
        You should either prevent the usage of this function or add the plugin via:
            import { `+r+" } from 'rxdb/plugins/"+t+`';
            addRxPlugin(`+r+`);
        `)}var Xd=0;function oe(){var t=Date.now();t=t+.01,t<=Xd&&(t=Xd+.01);var e=parseFloat(t.toFixed(2));return Xd=e,e}function Et(t,e){if(!t)throw e||(e=""),new Error("ensureNotFalsy() is falsy: "+e);return t}var Mc={bufferSize:1,refCount:!0};var Oo="15.39.0";var $n={},Pc="6da4936d1425ff3a5c44c02342c6daf791d266be3ae8479b8ec59e261df41b93";function Bn(t,e){return Bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Bn(t,e)}function Zd(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Bn(t,e)}function Nc(t){return Nc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nc(t)}function lv(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function Jd(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jd=function(){return!!t})()}function uv(t,e,r){if(Jd())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var o=new(t.bind.apply(t,n));return r&&Bn(o,r.prototype),o}function Pa(t){var e=typeof Map=="function"?new Map:void 0;return Pa=function(n){if(n===null||!lv(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,o)}function o(){return uv(n,arguments,Nc(this).constructor)}return o.prototype=Object.create(n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Bn(o,n)},Pa(t)}var Tt={isDevMode(){return!1},deepFreezeWhenDevMode(t){return t},tunnelErrorMessage(t){return"RxDB Error-Code "+t+`.
        Error messages are not included in RxDB core to reduce build size.
        `}};function X0(t){var e="";return Object.keys(t).length===0||(e+=`Given parameters: {
`,e+=Object.keys(t).map(r=>{var n="[object Object]";try{r==="errors"?n=t[r].map(o=>JSON.stringify(o,Object.getOwnPropertyNames(o))):n=JSON.stringify(t[r],function(o,i){return i===void 0?null:i},2)}catch{}return r+":"+n}).join(`
`),e+="}"),e}function dv(t,e,r){return"RxError ("+e+`):
`+t+`
`+X0(r)}var Z0=function(t){function e(n,o,i={}){var s,l=dv(o,n,i);return s=t.call(this,l)||this,s.code=n,s.message=l,s.url=tf(n),s.parameters=i,s.rxdb=!0,s}Zd(e,t);var r=e.prototype;return r.toString=function(){return this.message},Ae(e,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}])}(Pa(Error)),J0=function(t){function e(n,o,i={}){var s,l=dv(o,n,i);return s=t.call(this,l)||this,s.code=n,s.message=l,s.url=tf(n),s.parameters=i,s.rxdb=!0,s}Zd(e,t);var r=e.prototype;return r.toString=function(){return this.message},Ae(e,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}])}(Pa(TypeError));function tf(t){return"https://rxdb.info/errors.html?console=errors#"+t}function fv(t){return`
 You can find out more about this error here: `+tf(t)+" "}function L(t,e){return new Z0(t,Tt.tunnelErrorMessage(t)+fv(t),e)}function ue(t,e){return new J0(t,Tt.tunnelErrorMessage(t)+fv(t),e)}function Lc(t){return t&&t.status===409?t:!1}var tC={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};function hv(t){return L("COL20",{name:tC[t.status],document:t.documentId,writeError:t})}var _i={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],createRxState:[],postDestroyRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preStorageWrite:[],preMigrateDocument:[],postMigrateDocument:[],preDestroyRxDatabase:[],postRemoveRxDatabase:[],postCleanup:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function te(t,e){_i[t].length>0&&_i[t].forEach(r=>r(e))}function Fn(t,e){return Promise.all(_i[t].map(r=>r(e)))}function Le(t,e){var r=e;r=r.replace(iv,".properties."),r="properties."+r,r=_r(r);var n=Ne(t,r);return n}function $c(t,e,r){if(typeof e.primaryKey=="string")return r;var n=Na(e,r),o=r[t];if(o&&o!==n)throw L("DOC19",{args:{documentData:r,existingPrimary:o,newPrimary:n},schema:e});return r[t]=n,r}function ve(t){return typeof t=="string"?t:t.key}function Na(t,e){if(typeof t.primaryKey=="string")return e[t.primaryKey];var r=t.primaryKey;return r.fields.map(n=>{var o=Ne(e,n);if(typeof o>"u")throw L("DOC18",{args:{field:n,documentData:e}});return o}).join(r.separator)}function pv(t){var e=gi(t,!0);return e}function eC(t){return["_deleted",t]}function Bc(t){t=kt(t);var e=ve(t.primaryKey);t.properties=kt(t.properties),t.additionalProperties=!1,Object.prototype.hasOwnProperty.call(t,"keyCompression")||(t.keyCompression=!1),t.indexes=t.indexes?t.indexes.slice(0):[],t.required=t.required?t.required.slice(0):[],t.encrypted=t.encrypted?t.encrypted.slice(0):[],t.properties._rev={type:"string",minLength:1},t.properties._attachments={type:"object"},t.properties._deleted={type:"boolean"},t.properties._meta=rC,t.required=t.required?t.required.slice(0):[],t.required.push("_deleted"),t.required.push("_rev"),t.required.push("_meta"),t.required.push("_attachments");var r=ef(t);br(t.required,r),t.required=t.required.filter(i=>!i.includes(".")).filter((i,s,l)=>l.indexOf(i)===s),t.version=t.version||0;var n=t.indexes.map(i=>{var s=Lr(i)?i.slice(0):[i];return s.includes(e)||s.push(e),s[0]!=="_deleted"&&s.unshift("_deleted"),s});n.length===0&&n.push(eC(e)),n.push(["_meta.lwt",e]),t.internalIndexes&&t.internalIndexes.map(i=>{n.push(i)});var o=new Set;return n.filter(i=>{var s=i.join(",");return o.has(s)?!1:(o.add(s),!0)}),t.indexes=n,t}var rC={type:"object",properties:{lwt:{type:"number",minimum:Ic,maximum:1e15,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function ef(t){var e=Object.keys(t.properties).filter(n=>t.properties[n].final),r=ve(t.primaryKey);return e.push(r),typeof t.primaryKey!="string"&&t.primaryKey.fields.forEach(n=>e.push(n)),e}function mv(t,e){for(var r=Object.keys(t.defaultValues),n=0;n<r.length;++n){var o=r[n];(!Object.prototype.hasOwnProperty.call(e,o)||typeof e[o]>"u")&&(e[o]=t.defaultValues[o])}return e}var rf=function(){function t(r,n){this.jsonSchema=r,this.hashFunction=n,this.indexes=nC(this.jsonSchema),this.primaryPath=ve(this.jsonSchema.primaryKey),this.finalFields=ef(this.jsonSchema)}var e=t.prototype;return e.validateChange=function(n,o){this.finalFields.forEach(i=>{if(!Nn(n[i],o[i]))throw L("DOC9",{dataBefore:n,dataAfter:o,fieldName:i,schema:this.jsonSchema})})},e.getDocumentPrototype=function(){var n={},o=Le(this.jsonSchema,"");return Object.keys(o).forEach(i=>{var s=i;n.__defineGetter__(i,function(){if(!(!this.get||typeof this.get!="function")){var l=this.get(s);return l}}),Object.defineProperty(n,i+"$",{get:function(){return this.get$(s)},enumerable:!1,configurable:!1}),Object.defineProperty(n,i+"$$",{get:function(){return this.get$$(s)},enumerable:!1,configurable:!1}),Object.defineProperty(n,i+"_",{get:function(){return this.populate(s)},enumerable:!1,configurable:!1})}),He(this,"getDocumentPrototype",()=>n),n},e.getPrimaryOfDocumentData=function(n){return Na(this.jsonSchema,n)},Ae(t,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var r={};return Object.entries(this.jsonSchema.properties).filter(([,n])=>Object.prototype.hasOwnProperty.call(n,"default")).forEach(([n,o])=>r[n]=o.default),He(this,"defaultValues",r)}},{key:"hash",get:function(){return He(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}])}();function nC(t){return(t.indexes||[]).map(e=>Lr(e)?e:[e])}function gv(t){var e=t.version?t.version:0,r=0;return new Array(e).fill(0).map(()=>r++)}function vv(t,e,r=!0){r&&te("preCreateRxSchema",t);var n=Bc(t);n=pv(n),Tt.deepFreezeWhenDevMode(n);var o=new rf(n,e);return te("createRxSchema",o),o}function yv(t){return t.documentData?t.documentData:t.previousDocumentData}function bv(t){switch(t.operation){case"INSERT":return{operation:t.operation,id:t.documentId,doc:t.documentData,previous:null};case"UPDATE":return{operation:t.operation,id:t.documentId,doc:Tt.deepFreezeWhenDevMode(t.documentData),previous:t.previousDocumentData?t.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:t.operation,id:t.documentId,doc:null,previous:t.previousDocumentData}}}function Fc(t){return t[t.length-1]}function oC(t){let e=typeof t;return t!==null&&(e==="object"||e==="function")}function nf(t,e,r){if(Array.isArray(e)&&(e=e.join(".")),!oC(t)||typeof e!="string")return r===void 0?t:r;let n=e.split(".");if(n.length===0)return r;for(let o=0;o<n.length;o++){let i=n[o];if(iC(t,i)?t=o===n.length-1?void 0:null:t=t[i],t==null){if(o!==n.length-1)return r;break}}return t===void 0?r:t}function iC(t,e){if(typeof e!="number"&&Array.isArray(t)){let r=Number.parseInt(e,10);return Number.isInteger(r)&&t[r]===t[e]}return!1}var of=t=>!!t.queryParams.limit,_v=t=>t.queryParams.limit===1,xv=t=>!!(t.queryParams.skip&&t.queryParams.skip>0),wv=t=>t.changeEvent.operation==="DELETE",Cv=t=>t.changeEvent.operation==="INSERT",Sv=t=>t.changeEvent.operation==="UPDATE",Rv=t=>of(t)&&t.previousResults.length>=t.queryParams.limit,Ov=t=>{let e=t.queryParams.sortFields,r=t.changeEvent.previous,n=t.changeEvent.doc;if(!n)return!1;if(!r)return!0;for(let o=0;o<e.length;o++){let i=e[o],s=nf(r,i),l=nf(n,i);if(s!==l)return!0}return!1},Ev=t=>{let e=t.changeEvent.id;if(t.keyDocumentMap)return t.keyDocumentMap.has(e);{let r=t.queryParams.primaryKey,n=t.previousResults;for(let o=0;o<n.length;o++)if(n[o][r]===e)return!0;return!1}},Dv=t=>{let e=t.previousResults[0];return!!(e&&e[t.queryParams.primaryKey]===t.changeEvent.id)},kv=t=>{let e=Fc(t.previousResults);return!!(e&&e[t.queryParams.primaryKey]===t.changeEvent.id)},Av=t=>{let e=t.changeEvent.previous;if(!e)return!1;let r=t.previousResults[0];return r?r[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,r)<0:!1},Iv=t=>{let e=t.changeEvent.previous;if(!e)return!1;let r=Fc(t.previousResults);return r?r[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,r)>0:!1},Tv=t=>{let e=t.changeEvent.doc;if(!e)return!1;let r=t.previousResults[0];return r?r[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,r)<0:!1},Mv=t=>{let e=t.changeEvent.doc;if(!e)return!1;let r=Fc(t.previousResults);return r?r[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,r)>0:!1},Pv=t=>{let e=t.changeEvent.previous;return e?t.queryParams.queryMatcher(e):!1},Nv=t=>{let e=t.changeEvent.doc;return e?t.queryParams.queryMatcher(e):!1},Lv=t=>t.previousResults.length===0;var $v={0:Cv,1:Sv,2:wv,3:of,4:_v,5:xv,6:Lv,7:Rv,8:Dv,9:kv,10:Ov,11:Ev,12:Av,13:Iv,14:Tv,15:Mv,16:Pv,17:Nv};function Bv(t,e,r,n){var o=t.length,i=o-1,s=0;if(o===0)return t.push(e),0;for(var l;n<=i;)s=n+(i-n>>1),l=t[s],r(l,e)<=0?n=s+1:i=s-1;return r(l,e)<=0&&s++,t.splice(s,0,e),s}var Fv=t=>{},jc=t=>{t.previousResults.unshift(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},Uc=t=>{t.previousResults.push(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},zc=t=>{let e=t.previousResults.shift();t.keyDocumentMap&&e&&t.keyDocumentMap.delete(e[t.queryParams.primaryKey])},Vc=t=>{let e=t.previousResults.pop();t.keyDocumentMap&&e&&t.keyDocumentMap.delete(e[t.queryParams.primaryKey])},jv=t=>{zc(t),Uc(t)},Uv=t=>{Vc(t),jc(t)},zv=t=>{zc(t),jc(t)},Vv=t=>{Vc(t),Uc(t)},af=t=>{t.keyDocumentMap&&t.keyDocumentMap.delete(t.changeEvent.id);let e=t.queryParams.primaryKey,r=t.previousResults;for(let n=0;n<r.length;n++)if(r[n][e]===t.changeEvent.id){r.splice(n,1);break}},qv=t=>{let e=t.changeEvent.doc,r=t.queryParams.primaryKey,n=t.previousResults;for(let o=0;o<n.length;o++)if(n[o][r]===t.changeEvent.id){n[o]=e,t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,e);break}},Hv=t=>{let e={_id:"wrongHuman"+new Date().getTime()};t.previousResults.length=0,t.previousResults.push(e),t.keyDocumentMap&&(t.keyDocumentMap.clear(),t.keyDocumentMap.set(e._id,e))},sf=t=>{let e=t.changeEvent.id,r=t.changeEvent.doc;if(t.keyDocumentMap){if(t.keyDocumentMap.has(e))return;t.keyDocumentMap.set(e,r)}else if(t.previousResults.find(o=>o[t.queryParams.primaryKey]===e))return;Bv(t.previousResults,r,t.queryParams.sortComparator,0)},Wv=t=>{af(t),sf(t)},Kv=t=>{throw new Error("Action runFullQueryAgain must be implemented by yourself")},Gv=t=>{throw new Error("Action unknownAction should never be called")};var Qv=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],Yv={doNothing:Fv,insertFirst:jc,insertLast:Uc,removeFirstItem:zc,removeLastItem:Vc,removeFirstInsertLast:jv,removeLastInsertFirst:Uv,removeFirstInsertFirst:zv,removeLastInsertLast:Vv,removeExisting:af,replaceExisting:qv,alwaysWrong:Hv,insertAtSortPosition:sf,removeExistingAndInsertAtSortPosition:Wv,runFullQueryAgain:Kv,unknownAction:Gv};function qc(t){return t.charCodeAt(0)-40}function Xv(t){return t?"1":"0"}function aC(t=6){let e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length;for(let o=0;o<t;o++)e+=r.charAt(Math.floor(Math.random()*n));return e}var cI=aC(4);function cf(t,e){let r=[];for(let n=0,o=t.length;n<o;n+=e)r.push(t.substring(n,n+e));return r}function Zv(t){let e=new Map,n=2+parseInt(t.charAt(0)+t.charAt(1),10)*2,o=t.substring(2,n),i=cf(o,2);for(let j=0;j<i.length;j++){let G=i[j],J=G.charAt(0),rt=qc(G.charAt(1));e.set(J,rt)}let s=t.substring(n,t.length-3),l=cf(s,4);for(let j=0;j<l.length;j++){let G=l[j],J=G.charAt(0),rt=G.charAt(1),tt=G.charAt(2),At=qc(G.charAt(3));if(!e.has(rt))throw new Error("missing node with id "+rt);if(!e.has(tt))throw new Error("missing node with id "+tt);let st=e.get(rt),Mt=e.get(tt),Dt={l:At,0:st,1:Mt};e.set(J,Dt)}let d=t.slice(-3),p=d.charAt(0),m=d.charAt(1),y=qc(d.charAt(2)),S=e.get(p),D=e.get(m);return{l:y,0:S,1:D}}function Jv(t,e,r){let n=t,o=t.l;for(;;){let i=e[o](r),s=Xv(i);if(n=n[s],typeof n=="number"||typeof n=="string")return n;o=n.l}}var sC="14a1b,c+d2e5f0g/h.i4j*k-l)m(n6oeh6pnm6qen6ril6snh6tin6ubo9vce9wmh9xns9yne9zmi9{cm9|ad9}cp9~aq9\x7Fae9\xA1bf9\xA2bq9\xA3cg9\xA4ck9\xA5cn9\xA6nd9\xA7np9\xA8nq9\xA9nf9\xAAng9\xABnm9\xACnk9\xADmr9\xAEms9\xAFmt9\xB0mj9\xB1mk9\xB2ml9\xB3mn9\xB4mc8\xB5\xB3{8\xB6\xAF}8\xB7\xB0\xA48\xB8\xB3\xA78\xB9mn8\xBA\xB3\xAB8\xBB\xB3m8\xBCm\xB44\xBDz\xB24\xBE\xB3w4\xBFz\xB54\xC0\xAF\xB64\xC1\xB0\xB74\xC2\xB3\xBA4\xC3\xB3\xB84\xC4m\xB94\xC5v\xA47\xC6yn7\xC7\xC0\xC17\xC8~\x7F7\xC9\xA5\xA47\xCA\xC3\xC47\xCB\xA8n7\xCC\xBA\xB97\xCD\xAD\xB07\xCE\xAEm7\xCF\xAF\xB07\xD0\xB1m7\xD1\xB3m7\xD2\xBCm5\xD3\xC4m5\xD4\xB9m5\xD5\xBD\xB05\xD6\xBEm5\xD7\xBF\xB05\xD8\xC7\xCF5\xD9\xC2m5\xDA\xCA\xD15\xDB\xB1m5\xDC\xBAm5\xDD\xCC\xD15\xDE\xD5\xCD2\xDF|\x7F2\xE0\xA1u2\xE1\xA3\xC52\xE2\xD6\xCE2\xE3\xA6\xC62\xE4\xA9x2\xE5\xAA\xC62\xE6\xD7\xD82\xE7|\xC82\xE8\xA1\xA22\xE9\xA3\xC92\xEA\xA4\xA52\xEB\xD9\xDA2\xEC\xA6\xCB2\xED\xA9n2\xEE\xAAn2\xEF\xDB\xD02\xF0\xDC\xDD2\xF1\xACn2\xF2\xD2\xD3/\xF3an/\xF4bn/\xF5cn/\xF6\xDE\xE2/\xF7\xDF\xE3/\xF8\xE0\xE4/\xF9\xE1\xE5/\xFA\xE6\xEB/\xFB\xE7\xEC/\xFC\xE8\xED/\xFD\xE9\xEE/\xFE\xCD\xCE/\xFF\xCF\xD1/\u0100\xF2\xD4,\u0101cn,\u0102\xF6\xEF,\u0103\xA4\xF1,\u0104\xFA\xF0,\u0105\xEA\xF1,\u0106\xFE\xD0,\u0107\xFF\xD1,\u0108ac0\u0109bc0\u010A\xF3\xF50\u010B\xF4\u01010\u010C\xDF\xE10\u010D\xE0\xA40\u010E\xE7\xE90\u010F\xE8\xEA0\u0110\xF7\xF90\u0111\xF8\u01030\u0112\xFB\xFD0\u0113\xFC\u01050\u0114m\xD2-\u0115m\u0100-\u0116\xDE\xE6-\u0117\u010C\u010E-\u0118\u010D\u010F-\u0119\u0102\u0104-\u011A\u0110\u0112-\u011B\u0111\u0113-\u011C\xB2\xBB-\u011D\xCD\xCF-\u011E\u0106\u0107-\u011F\xB2\xB3-\u0120\u0114\u01083\u0121\u0115\u010A3\u0122\u0116\u01173\u0123\u0119\u011A3\u0124\u0122\u011D(\u0125\u011C\u011F(\u0126\u0123\u011E(\u0127\u0120\u0121+\u0128\u0109\u010B+\u0129\u0124\u0126+\u012A\u0118\u011B+\u012B\u0127\u01281\u012C\u0129\u012A1\u012D\u012C\u012B*\u012E\u0125m*\u012D\u012E.",lf;function cC(){return lf||(lf=Zv(sC)),lf}var ty=t=>Jv(cC(),$v,t);function ey(t){let e=ty(t);return Qv[e]}function ry(t,e,r,n,o){let i=Yv[t];return i({queryParams:e,changeEvent:r,previousResults:n,keyDocumentMap:o}),n}var Eo="\uFFFF",Do=Number.MIN_SAFE_INTEGER;function ny(t,e){var r=e.selector,n=t.indexes?t.indexes.slice(0):[];e.index&&(n=[e.index]);var o=!!e.sort.find(m=>Object.values(m)[0]==="desc"),i=new Set;Object.keys(r).forEach(m=>{var y=Le(t,m);y&&y.type==="boolean"&&Object.prototype.hasOwnProperty.call(r[m],"$eq")&&i.add(m)});var s=e.sort.map(m=>Object.keys(m)[0]),l=s.filter(m=>!i.has(m)).join(","),d=-1,p;if(n.forEach(m=>{var y=!0,S=!0,D=m.map(rt=>{var tt=r[rt],At=tt?Object.keys(tt):[],st={};if(!tt||!At.length){var Mt=S?Do:Eo;st={startKey:Mt,endKey:y?Eo:Do,inclusiveStart:!0,inclusiveEnd:!0}}else At.forEach(Dt=>{if(Hc.has(Dt)){var Ft=tt[Dt],he=fC(Dt,Ft);st=Object.assign(st,he)}});return typeof st.startKey>"u"&&(st.startKey=Do),typeof st.endKey>"u"&&(st.endKey=Eo),typeof st.inclusiveStart>"u"&&(st.inclusiveStart=!0),typeof st.inclusiveEnd>"u"&&(st.inclusiveEnd=!0),S&&!st.inclusiveStart&&(S=!1),y&&!st.inclusiveEnd&&(y=!1),st}),P=D.map(rt=>rt.startKey),j=D.map(rt=>rt.endKey),G={index:m,startKeys:P,endKeys:j,inclusiveEnd:y,inclusiveStart:S,sortSatisfiedByIndex:!o&&l===m.filter(rt=>!i.has(rt)).join(","),selectorSatisfiedByIndex:dC(m,e.selector,P,j)},J=hC(t,e,G);(J>=d||e.index)&&(d=J,p=G)}),!p)throw L("SNH",{query:e});return p}var Hc=new Set(["$eq","$gt","$gte","$lt","$lte"]),lC=new Set(["$eq","$gt","$gte"]),uC=new Set(["$eq","$lt","$lte"]);function dC(t,e,r,n){var o=Object.entries(e),i=o.find(([Dt,Ft])=>{if(!t.includes(Dt))return!0;var he=Object.entries(Ft).find(([Be,ur])=>!Hc.has(Be));return he});if(i||e.$and||e.$or)return!1;var s=[],l=new Set;for(var[d,p]of Object.entries(e)){if(!t.includes(d))return!1;var m=Object.keys(p).filter(Dt=>lC.has(Dt));if(m.length>1)return!1;var y=m[0];if(y&&l.add(d),y!=="$eq"){if(s.length>0)return!1;s.push(y)}}var S=[],D=new Set;for(var[P,j]of Object.entries(e)){if(!t.includes(P))return!1;var G=Object.keys(j).filter(Dt=>uC.has(Dt));if(G.length>1)return!1;var J=G[0];if(J&&D.add(P),J!=="$eq"){if(S.length>0)return!1;S.push(J)}}var rt=0;for(var tt of t){for(var At of[l,D]){if(!At.has(tt)&&At.size>0)return!1;At.delete(tt)}var st=r[rt],Mt=n[rt];if(st!==Mt&&l.size>0&&D.size>0)return!1;rt++}return!0}function fC(t,e){switch(t){case"$eq":return{startKey:e,endKey:e,inclusiveEnd:!0,inclusiveStart:!0};case"$lte":return{endKey:e,inclusiveEnd:!0};case"$gte":return{startKey:e,inclusiveStart:!0};case"$lt":return{endKey:e,inclusiveEnd:!1};case"$gt":return{startKey:e,inclusiveStart:!1};default:throw new Error("SNH")}}function hC(t,e,r){var n=0,o=m=>{m>0&&(n=n+m)},i=10,s=kc(r.startKeys,m=>m!==Do&&m!==Eo);o(s*i);var l=kc(r.startKeys,m=>m!==Eo&&m!==Do);o(l*i);var d=kc(r.startKeys,(m,y)=>m===r.endKeys[y]);o(d*i*1.5);var p=r.sortSatisfiedByIndex?5:0;return o(p),n}var de=class extends Error{},Qc=2147483647,Yc=-2147483648,pf=Number.MAX_SAFE_INTEGER,mf=Number.MIN_SAFE_INTEGER,on=Symbol("missing"),ay=Object.freeze(new Error("mingo: cycle detected while processing object/array")),pC="[object Object]",mC=/^\[object ([a-zA-Z0-9]+)\]$/,La=t=>{let e=_C(t),r=0,n=e.length;for(;n;)r=(r<<5)-r^e.charCodeAt(--n);return r>>>0},sy=new Set(["null","undefined","boolean","number","string","date","regexp"]),gC={null:0,undefined:0,number:1,string:2,object:3,array:4,boolean:5,date:6,regexp:7,function:8},Lt=(t,e)=>{t===on&&(t=void 0),e===on&&(e=void 0);let[r,n]=[t,e].map(o=>gC[jn(o).toLowerCase()]);return r!==n?r-n:r===1||r===2||r===6?t<e?-1:t>e?1:0:ye(t,e)?0:t<e?-1:t>e?1:0};function z(t,e){if(!t)throw new de(e)}var jn=t=>mC.exec(Object.prototype.toString.call(t))[1],$a=t=>typeof t=="boolean",Ct=t=>typeof t=="string";var ht=t=>!isNaN(t)&&typeof t=="number";var it=Array.isArray,ft=t=>{if(!t)return!1;let e=Object.getPrototypeOf(t);return(e===Object.prototype||e===null)&&pC===Object.prototype.toString.call(t)},Ba=t=>t===Object(t),Un=t=>t instanceof Date,Ci=t=>t instanceof RegExp,Fa=t=>typeof t=="function",X=t=>t==null,Br=(t,e)=>t.includes(e),Xc=(t,e)=>!Br(t,e),Ie=(t,e=!0)=>!!t||e&&t==="",Ke=t=>X(t)||Ct(t)&&!t||t instanceof Array&&t.length===0||ft(t)&&Object.keys(t).length===0,oy=t=>t===on,Fr=t=>t instanceof Array?t:[t],Vt=(t,e)=>!!t&&Object.prototype.hasOwnProperty.call(t,e),gf=t=>typeof ArrayBuffer<"u"&&ArrayBuffer.isView(t),vC=[Un,Ci,gf],df=(t,e)=>{if(X(t))return t;if(e.has(t))throw ay;let r=t.constructor;if(vC.some(n=>n(t)))return new r(t);try{if(e.add(t),it(t))return t.map(n=>df(n,e));if(ft(t)){let n={};for(let o in t)n[o]=df(t[o],e);return n}}finally{e.delete(t)}return t},Si=t=>df(t,new Set),yC=(t,e)=>ft(t)&&ft(e)||it(t)&&it(e);function Kc(t,e,r){if(r=r||{flatten:!1},oy(t)||X(t))return e;if(oy(e)||X(e))return t;if(!yC(t,e)){if(r.skipValidation)return e||t;throw Error("mismatched types. must both be array or object")}if(r.skipValidation=!0,it(t)){let n=t,o=e;if(r.flatten){let i=0,s=0;for(;i<n.length&&s<o.length;)n[i]=Kc(n[i++],o[s++],r);for(;s<o.length;)n.push(e[s++])}else cr(n,o)}else for(let n in e)t[n]=Kc(t[n],e[n],r);return t}function ff(t,e=La){let r=new Map;return t.forEach((n,o)=>{let i=Zc(n,e);r.has(i)?r.get(i).some(s=>ye(t[s],n))||r.get(i).push(o):r.set(i,[o])}),r}function an(t,e=La){if(t.some(l=>l.length==0))return[];if(t.length===1)return Array.from(t);let r=cy(t.map((l,d)=>[d,l.length]),l=>l[1]),n=t[r[0][0]],o=ff(n,e),i=new Map,s=new Array;return o.forEach((l,d)=>{let p=l.map(D=>n[D]),m=p.map(D=>0),y=p.map(D=>[r[0][0],0]),S=!1;for(let D=1;D<t.length;D++){let[P,j]=r[D],G=t[P];if(i.has(D)||i.set(D,ff(G)),i.get(D).has(d)){let J=i.get(D).get(d).map(rt=>G[rt]);S=p.map((rt,tt)=>J.some((At,st)=>{let Mt=m[tt];return ye(rt,At)&&(m[tt]++,P<y[tt][0]&&(y[tt]=[P,i.get(D).get(d)[st]])),Mt<m[tt]})).some(Boolean)}if(!S)return}S&&cr(s,m.map((D,P)=>D===t.length-1?[p[P],y[P]]:on).filter(D=>D!==on))}),s.sort((l,d)=>{let[p,[m,y]]=l,[S,[D,P]]=d,j=Lt(m,D);return j!==0?j:Lt(y,P)}).map(l=>l[0])}function vf(t,e=0){let r=new Array;function n(o,i){for(let s=0,l=o.length;s<l;s++)it(o[s])&&(i>0||i<0)?n(o[s],Math.max(-1,i-1)):r.push(o[s])}return n(t,e),r}var bC=t=>{let[e,r]=[Object.getPrototypeOf(t),Object.getOwnPropertyNames(t)],n=e;for(;!r.length&&e!==Object.prototype&&e!==Array.prototype;)n=e,r=Object.getOwnPropertyNames(e),e=Object.getPrototypeOf(e);let o={};return r.forEach(i=>o[i]=t[i]),[o,n]};function ye(t,e){if(t===e||Object.is(t,e))return!0;let r=!!t&&t.constructor||t;if(t===null||e===null||t===void 0||e===void 0||r!==e.constructor||r===Function)return!1;if(r===Array||r===Object){let i=Object.keys(t),s=Object.keys(e);if(i.length!==s.length||new Set([...i,...s]).size!=i.length)return!1;for(let l of i)if(!ye(t[l],e[l]))return!1;return!0}let n=Object.getPrototypeOf(t);return(gf(t)||n!==Object.prototype&&n!==Array.prototype&&Object.prototype.hasOwnProperty.call(n,"toString"))&&t.toString()===e.toString()}function ja(t,e=La){let r=t.map(n=>on);return ff(t,e).forEach((n,o)=>{n.forEach(i=>r[i]=t[i])}),r.filter(n=>n!==on)}var Wc=(t,e)=>{if(t===null)return"null";if(t===void 0)return"undefined";let r=t.constructor;switch(r){case RegExp:case Number:case Boolean:case Function:case Symbol:return t.toString();case String:return JSON.stringify(t);case Date:return t.toISOString()}if(gf(t))return r.name+"["+t.toString()+"]";if(e.has(t))throw ay;try{if(e.add(t),it(t))return"["+t.map(s=>Wc(s,e)).join(",")+"]";if(r===Object)return"{"+Object.keys(t).sort().map(s=>s+":"+Wc(t[s],e)).join(",")+"}";let n=Object.getPrototypeOf(t);if(n!==Object.prototype&&n!==Array.prototype&&Object.prototype.hasOwnProperty.call(n,"toString"))return r.name+"("+JSON.stringify(t.toString())+")";let[o,i]=bC(t);return r.name+Wc(o,e)}finally{e.delete(t)}},_C=t=>Wc(t,new Set);function Zc(t,e){return e=e||La,X(t)?null:e(t).toString()}function cy(t,e,r=Lt){if(Ke(t))return t;let n=new Array,o=new Array;for(let i=0;i<t.length;i++){let s=t[i],l=e(s,i);X(l)?o.push(s):n.push([l,s])}return n.sort((i,s)=>r(i[0],s[0])),cr(o,n.map(i=>i[1]))}function Jc(t,e,r=La){if(t.length<1)return new Map;let n=new Map,o=new Map;for(let i=0;i<t.length;i++){let s=t[i],l=e(s,i),d=Zc(l,r);if(d===null)o.has(null)?o.get(null).push(s):o.set(null,[s]);else{let p=n.has(d)?n.get(d).find(m=>ye(m,l)):null;X(p)?(o.set(l,[s]),n.has(d)?n.get(d).push(l):n.set(d,[l])):o.get(p).push(s)}}return o}var uf=5e4;function cr(t,...e){return t instanceof Array?e.reduce((r,n)=>{let o=Math.ceil(n.length/uf),i=0;for(;o-- >0;)Array.prototype.push.apply(r,n.slice(i,i+uf)),i+=uf;return r},t):e.filter(Ba).reduce((r,n)=>(Object.assign(r,n),r),t)}function hf(t,e){return Ba(t)?t[e]:void 0}function xC(t,e){if(e<1)return t;for(;e--&&t.length===1;)t=t[0];return t}function Te(t,e,r){let n=0;function o(s,l){let d=s;for(let p=0;p<l.length;p++){let m=l[p];if(/^\d+$/.exec(m)===null&&d instanceof Array){if(p===0&&n>0)break;n+=1;let S=l.slice(p);d=d.reduce((D,P)=>{let j=o(P,S);return j!==void 0&&D.push(j),D},[]);break}else d=hf(d,m);if(d===void 0)break}return d}let i=sy.has(jn(t).toLowerCase())?t:o(t,e.split("."));return i instanceof Array&&r?.unwrapArray?xC(i,n):i}function xi(t,e,r){let n=e.split("."),o=n[0],i=n.slice(1).join("."),s=/^\d+$/.exec(o)!==null,l=n.length>1,d,p;if(t instanceof Array)if(s)d=hf(t,Number(o)),l&&(d=xi(d,i,r)),d=[d];else{d=[];for(let m of t)p=xi(m,e,r),r?.preserveMissing?(p===void 0&&(p=on),d.push(p)):p!==void 0&&d.push(p)}else{if(p=hf(t,o),l&&(p=xi(p,i,r)),p===void 0)return;d=r?.preserveKeys?F({},t):{},d[o]=p}return d}function Gc(t){if(t instanceof Array)for(let e=t.length-1;e>=0;e--)t[e]===on?t.splice(e,1):Gc(t[e]);else if(ft(t))for(let e in t)Vt(t,e)&&Gc(t[e])}var iy=/^\d+$/;function wi(t,e,r,n){let o=e.split("."),i=o[0],s=o.slice(1).join(".");if(o.length===1)(ft(t)||it(t)&&iy.test(i))&&r(t,i);else{n?.buildGraph&&X(t[i])&&(t[i]={});let l=t[i];if(!l)return;let d=!!(o.length>1&&iy.test(o[1]));l instanceof Array&&n?.descendArray&&!d?l.forEach(p=>wi(p,s,r,n)):wi(l,s,r,n)}}function tl(t,e,r){wi(t,e,(n,o)=>{n[o]=Fa(r)?r(n[o]):r},{buildGraph:!0})}function Ua(t,e,r){wi(t,e,(n,o)=>{if(n instanceof Array){if(/^\d+$/.test(o))n.splice(parseInt(o),1);else if(r&&r.descendArray)for(let i of n)ft(i)&&delete i[o]}else ft(n)&&delete n[o]},r)}var wC=/^\$[a-zA-Z0-9_]+$/;function Ge(t){return wC.test(t)}function el(t){if(sy.has(jn(t).toLowerCase()))return Ci(t)?{$regex:t}:{$eq:t};if(Ba(t)){if(!Object.keys(t).some(Ge))return{$eq:t};if(Vt(t,"$regex")){let r=F({},t);return r.$regex=new RegExp(t.$regex,t.$options),delete r.$options,r}}return t}var Ao=(t=>(t.CLONE_ALL="CLONE_ALL",t.CLONE_INPUT="CLONE_INPUT",t.CLONE_OUTPUT="CLONE_OUTPUT",t.CLONE_OFF="CLONE_OFF",t))(Ao||{}),Ht=class t{constructor(e,r,n,o=Date.now()){this._opts=e,this._root=r,this._local=n,this.timestamp=o,this.update(r,n)}static init(e,r,n){return e instanceof t?new t(e._opts,X(e.root)?r:e.root,Object.assign({},e.local,n)):new t(e,r,n)}update(e,r){return this._root=e,this._local=r&&Object.assign({},r,{variables:Object.assign({},this._local?.variables,r?.variables)}),this}getOptions(){return Object.freeze(gt(F({},this._opts),{context:Ri.from(this._opts.context)}))}get root(){return this._root}get local(){return this._local}get idKey(){return this._opts.idKey}get collation(){return this._opts?.collation}get processingMode(){return this._opts?.processingMode||"CLONE_OFF"}get useStrictMode(){return this._opts?.useStrictMode}get scriptEnabled(){return this._opts?.scriptEnabled}get useGlobalContext(){return this._opts?.useGlobalContext}get hashFunction(){return this._opts?.hashFunction}get collectionResolver(){return this._opts?.collectionResolver}get jsonSchemaValidator(){return this._opts?.jsonSchemaValidator}get variables(){return this._opts?.variables}get context(){return this._opts?.context}};function sn(t){return t instanceof Ht?t.getOptions():Object.freeze(gt(F({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,useGlobalContext:!0,processingMode:"CLONE_OFF"},t),{context:t?.context?Ri.from(t?.context):Ri.init({})}))}var wr=(t=>(t.ACCUMULATOR="accumulator",t.EXPRESSION="expression",t.PIPELINE="pipeline",t.PROJECTION="projection",t.QUERY="query",t.WINDOW="window",t))(wr||{}),Ri=class t{constructor(e){this.operators={accumulator:{},expression:{},pipeline:{},projection:{},query:{},window:{}};for(let[r,n]of Object.entries(e))this.addOperators(r,n)}static init(e={}){return new t(e)}static from(e){return new t(e.operators)}addOperators(e,r){for(let[n,o]of Object.entries(r))this.getOperator(e,n)||(this.operators[e][n]=o);return this}addAccumulatorOps(e){return this.addOperators("accumulator",e)}addExpressionOps(e){return this.addOperators("expression",e)}addQueryOps(e){return this.addOperators("query",e)}addPipelineOps(e){return this.addOperators("pipeline",e)}addProjectionOps(e){return this.addOperators("projection",e)}addWindowOps(e){return this.addOperators("window",e)}getOperator(e,r){return e in this.operators&&this.operators[e][r]||null}},ko=Ri.init();function _f(t,e){for(let[r,n]of Object.entries(e)){z(Fa(n)&&Ge(r),`'${r}' is not a valid operator`);let o=xr(t,r,null);z(!o||n===o,`${r} already exists for '${t}' operators. Cannot change operator function once registered.`)}switch(t){case"accumulator":ko.addAccumulatorOps(e);break;case"expression":ko.addExpressionOps(e);break;case"pipeline":ko.addPipelineOps(e);break;case"projection":ko.addProjectionOps(e);break;case"query":ko.addQueryOps(e);break;case"window":ko.addWindowOps(e);break}}function xr(t,e,r){let{context:n,useGlobalContext:o}=r||{},i=n?n.getOperator(t,e):null;return!i&&o?ko.getOperator(t,e):i}var ly={$$ROOT(t,e,r){return r.root},$$CURRENT(t,e,r){return t},$$REMOVE(t,e,r){},$$NOW(t,e,r){return new Date(r.timestamp)}},yf={$$KEEP(t,e,r){return t},$$PRUNE(t,e,r){},$$DESCEND(t,e,r){if(!Vt(e,"$cond"))return t;let n;for(let[o,i]of Object.entries(t))if(Ba(i)){if(i instanceof Array){let s=[];for(let l of i)ft(l)&&(l=bf(l,e,r.update(l))),X(l)||s.push(l);n=s}else n=bf(i,e,r.update(i));X(n)?delete t[o]:t[o]=n}return t}};function $(t,e,r,n){let o=Ht.init(n,t);if(r=r||"",Ge(r)){let i=xr("expression",r,n);if(i)return i(t,e,o);let s=xr("accumulator",r,n);if(s)return t instanceof Array||(t=$(t,e,null,o),e=null),z(t instanceof Array,`'${r}' target must be an array.`),s(t,e,o.update(null,o.local));throw new de(`operator '${r}' is not registered`)}if(Ct(e)&&e.length>0&&e[0]==="$"){if(Vt(yf,e))return e;let i=o.root,s=e.split(".");if(Vt(ly,s[0]))i=ly[s[0]](t,null,o),e=e.slice(s[0].length+1);else if(s[0].slice(0,2)==="$$"){i=Object.assign({},o.variables,{this:t},o.local?.variables);let l=s[0].slice(2);z(Vt(i,l),`Use of undefined variable: ${l}`),e=e.slice(2)}else e=e.slice(1);return e===""?i:Te(i,e)}if(it(e))return e.map(i=>$(t,i,null,o));if(ft(e)){let i={};for(let[s,l]of Object.entries(e))if(i[s]=$(t,l,s,o),["expression","accumulator"].some(d=>!!xr(d,s,n)))return z(Object.keys(e).length===1,"Invalid aggregation expression '"+JSON.stringify(e)+"'"),i[s];return i}return e}function bf(t,e,r){let n=$(t,e,null,r);return Vt(yf,n)?yf[n](t,e,r):n}function Qe(t){return t instanceof za?t:new za(t)}function rl(...t){let e=0;return Qe(()=>{for(;e<t.length;){let r=t[e].next();if(!r.done)return r;e++}return{done:!0}})}function CC(t){return!!t&&typeof t=="object"&&t?.next instanceof Function}function SC(t,e){let r=t.slice(e+1);t.splice(e),Array.prototype.push.apply(t,r)}var xf=new Error;function RC(t,e,r){let n=!1,o=-1,i=0;return function(s){try{t:for(;!n;){let l=t();o++;let d=-1,p=e.length,m=!1;for(;++d<p;){let y=e[d];switch(y.action){case 0:l=y.func(l,o);break;case 1:if(!y.func(l,o))continue t;break;case 2:--y.count,y.count||(m=!0);break;case 3:--y.count,y.count||SC(e,d);continue t;default:break t}}if(n=m,s)r[i++]=l;else return{value:l,done:!1}}}catch(l){if(l!==xf)throw l}return n=!0,{done:n}}}var za=class{constructor(e){this.iteratees=[],this.yieldedValues=[],this.isDone=!1;let r;if(e instanceof Function&&(e={next:e}),CC(e)){let n=e;r=()=>{let o=n.next();if(o.done)throw xf;return o.value}}else if(e instanceof Array){let n=e,o=n.length,i=0;r=()=>{if(i<o)return n[i++];throw xf}}else if(!(e instanceof Function))throw new de("Lazy must be initialized with an array, generator, or function.");this.getNext=RC(r,this.iteratees,this.yieldedValues)}push(e,r){return typeof r=="function"?this.iteratees.push({action:e,func:r}):typeof r=="number"&&this.iteratees.push({action:e,count:r}),this}next(){return this.getNext()}map(e){return this.push(0,e)}filter(e){return this.push(1,e)}take(e){return e>0?this.push(2,e):this}drop(e){return e>0?this.push(3,e):this}transform(e){let r=this,n;return Qe(()=>(n||(n=Qe(e(r.value()))),n.next()))}value(){return this.isDone||(this.isDone=this.getNext(!0).done),this.yieldedValues}each(e){for(;;){let r=this.next();if(r.done)break;if(e(r.value)===!1)return!1}return!0}reduce(e,r){let n=this.next();for(r===void 0&&!n.done&&(r=n.value,n=this.next());!n.done;)r=e(r,n.value),n=this.next();return r}size(){return this.reduce((e,r)=>++e,0)}[Symbol.iterator](){return this}};var jr=class{constructor(e,r){this.pipeline=e,this.options=sn(r)}stream(e){let r=Qe(e),n=this.options.processingMode;(n==Ao.CLONE_ALL||n==Ao.CLONE_INPUT)&&r.map(Si);let o=new Array;if(!Ke(this.pipeline))for(let i of this.pipeline){let s=Object.keys(i),l=s[0],d=xr(wr.PIPELINE,l,this.options);z(s.length===1&&!!d,`invalid pipeline operator ${l}`),o.push(l),r=d(r,i[l],this.options)}return(n==Ao.CLONE_OUTPUT||n==Ao.CLONE_ALL&&an([["$group","$unwind"],o]).length)&&r.map(Si),r}run(e){return this.stream(e).value()}};var nl=class{constructor(e,r,n,o){this.source=e,this.predicate=r,this.projection=n,this.options=o,this.operators=[],this.result=null,this.buffer=[]}fetch(){return this.result?this.result:(ft(this.projection)&&this.operators.push({$project:this.projection}),this.result=Qe(this.source).filter(this.predicate),this.operators.length>0&&(this.result=new jr(this.operators,this.options).stream(this.result)),this.result)}fetchAll(){let e=Qe([...this.buffer]);return this.buffer=[],rl(e,this.fetch())}all(){return this.fetchAll().value()}count(){return this.all().length}skip(e){return this.operators.push({$skip:e}),this}limit(e){return this.operators.push({$limit:e}),this}sort(e){return this.operators.push({$sort:e}),this}collation(e){return this.options=gt(F({},this.options),{collation:e}),this}next(){if(this.buffer.length>0)return this.buffer.pop();let e=this.fetch().next();if(!e.done)return e.value}hasNext(){if(this.buffer.length>0)return!0;let e=this.fetch().next();return e.done?!1:(this.buffer.push(e.value),!0)}map(e){return this.all().map(e)}forEach(e){this.all().forEach(e)}[Symbol.iterator](){return this.fetchAll()}};var ee=class{constructor(e,r){this.condition=e,this.options=sn(r),this.compiled=[],this.compile()}compile(){z(ft(this.condition),`query criteria must be an object: ${JSON.stringify(this.condition)}`);let e={};for(let[r,n]of Object.entries(this.condition)){if(r==="$where")Object.assign(e,{field:r,expr:n});else if(Br(["$and","$or","$nor","$expr","$jsonSchema"],r))this.processOperator(r,r,n);else{z(!Ge(r),`unknown top level operator: ${r}`);for(let[o,i]of Object.entries(el(n)))this.processOperator(r,o,i)}e.field&&this.processOperator(e.field,e.field,e.expr)}}processOperator(e,r,n){let o=xr(wr.QUERY,r,this.options);if(!o)throw new de(`unknown query operator ${r}`);let i=o(e,n,this.options);this.compiled.push(i)}test(e){for(let r=0,n=this.compiled.length;r<n;r++)if(!this.compiled[r](e))return!1;return!0}find(e,r){return new nl(e,n=>this.test(n),r||{},this.options)}remove(e){return e.reduce((r,n)=>(this.test(n)||r.push(n),r),[])}};var Oi=1e3*60*60*24,uy={week:Oi*7,day:Oi,hour:1e3*60*60,minute:1e3*60,second:1e3,millisecond:1};var SP={week:Oi*7,day:Oi,hour:Oi/24,minute:6e4,second:1e3,millisecond:1};var il=(t,e,r)=>{if(Ke(e)||!ft(e))return t;let n=Lt,o=r.collation;return ft(o)&&Ct(o.locale)&&(n=NC(o)),t.transform(i=>{let s=Object.keys(e);for(let l of s.reverse()){let d=Jc(i,m=>Te(m,l),r.hashFunction),p=Array.from(d.keys()).sort(n);e[l]===-1&&p.reverse(),i=[],p.reduce((m,y)=>cr(m,d.get(y)),i)}return i})},PC={1:"base",2:"accent",3:"variant"};function NC(t){let e={sensitivity:PC[t.strength||3],caseFirst:t.caseFirst==="off"?"false":t.caseFirst||"false",numeric:t.numericOrdering||!1,ignorePunctuation:t.alternate==="shifted"};(t.caseLevel||!1)===!0&&(e.sensitivity==="base"&&(e.sensitivity="case"),e.sensitivity==="accent"&&(e.sensitivity="variant"));let r=new Intl.Collator(t.locale,e);return(n,o)=>{if(!Ct(n)||!Ct(o))return Lt(n,o);let i=r.compare(n,o);return i<0?-1:i>0?1:0}}function St(t){let e=(r,n,o)=>{let i={unwrapArray:!0},s=Math.max(1,r.split(".").length-1);return l=>{let d=Te(l,r,i);return t(d,n,gt(F({},o),{depth:s}))}};return e.op="query",e}function $e(t){return(e,r,n)=>{let o=$(e,r,null,n);return t(...o)}}function Va(t,e,r){if(ye(t,e)||X(t)&&X(e))return!0;if(t instanceof Array){let n=ye.bind(null,e);return t.some(n)||vf(t,r?.depth).some(n)}return!1}function al(t,e,r){return!Va(t,e,r)}function Cf(t,e,r){return X(t)?e.some(n=>n===null):an([Fr(t),e],r?.hashFunction).length>0}function sl(t,e,r){return!Cf(t,e,r)}function cl(t,e,r){return fl(t,e,(n,o)=>Lt(n,o)<0)}function ll(t,e,r){return fl(t,e,(n,o)=>Lt(n,o)<=0)}function ul(t,e,r){return fl(t,e,(n,o)=>Lt(n,o)>0)}function dl(t,e,r){return fl(t,e,(n,o)=>Lt(n,o)>=0)}function gy(t,e,r){return Fr(t).some(n=>e.length===2&&n%e[0]===e[1])}function vy(t,e,r){let n=Fr(t),o=i=>Ct(i)&&Ie(e.exec(i),r?.useStrictMode);return n.some(o)||vf(n,1).some(o)}function yy(t,e,r){return(e===!1||e===0)&&t===void 0||(e===!0||e===1)&&t!==void 0}function by(t,e,r){if(!it(t)||!it(e)||!t.length||!e.length)return!1;let n=!0;for(let o of e){if(!n)break;ft(o)&&Br(Object.keys(o),"$elemMatch")?n=Sf(t,o.$elemMatch,r):o instanceof RegExp?n=t.some(i=>typeof i=="string"&&o.test(i)):n=t.some(i=>ye(o,i))}return n}function _y(t,e,r){return Array.isArray(t)&&t.length===e}function FC(t){return Ge(t)&&["$and","$or","$nor"].indexOf(t)===-1}function Sf(t,e,r){if(it(t)&&!Ke(t)){let n=s=>s,o=e;Object.keys(e).every(FC)&&(o={temp:e},n=s=>({temp:s}));let i=new ee(o,r);for(let s=0,l=t.length;s<l;s++)if(i.test(n(t[s])))return!0}return!1}var fy=t=>t===null,hy=t=>ht(t)&&t>=Yc&&t<=Qc&&t.toString().indexOf(".")===-1,py=t=>ht(t)&&t>=mf&&t<=pf&&t.toString().indexOf(".")===-1,jC={array:it,bool:$a,boolean:$a,date:Un,decimal:ht,double:ht,int:hy,long:py,number:ht,null:fy,object:ft,regex:Ci,regexp:Ci,string:Ct,undefined:X,function:t=>{throw new de("unsupported type key `function`.")},1:ht,2:Ct,3:ft,4:it,6:X,8:$a,9:Un,10:fy,11:Ci,16:hy,18:py,19:ht};function my(t,e,r){let n=jC[e];return n?n(t):!1}function xy(t,e,r){return Array.isArray(e)?e.findIndex(n=>my(t,n,r))>=0:my(t,e,r)}function fl(t,e,r){return Fr(t).some(n=>jn(n)===jn(e)&&r(n,e))}var NL=$e(sl);var Ei=(t,e)=>(r,n,o)=>{z(it(n),`${t}: expression must be an array.`);let i=$(r,n,null,o);return i.some(X)?null:(z(i.every(ht),`${t}: expression must evalue to array of numbers.`),e(i))};var I$=Ei("$bitAnd",t=>t.reduce((e,r)=>e&r,-1));var $$=Ei("$bitOr",t=>t.reduce((e,r)=>e|r,0));var j$=Ei("$bitXor",t=>t.reduce((e,r)=>e^r,0));var Rf={};Ls(Rf,{$and:()=>UC,$not:()=>zC,$or:()=>VC});var UC=(t,e,r)=>{let n=$(t,e,null,r);return Ie(n,r.useStrictMode)&&n.every(o=>Ie(o,r.useStrictMode))};var zC=(t,e,r)=>{let n=Fr(e);if(n.length==0)return!1;if(n.length==1)return!$(t,n[0],null,r);throw"Expression $not takes exactly 1 argument"};var VC=(t,e,r)=>{let n=$(t,e,null,r),o=r.useStrictMode;return Ie(n,o)&&n.some(i=>Ie(i,o))};var Of={};Ls(Of,{$cmp:()=>qC,$eq:()=>HC,$gt:()=>WC,$gte:()=>KC,$lt:()=>GC,$lte:()=>QC,$ne:()=>YC});var qC=(t,e,r)=>{let n=$(t,e,null,r);return n[0]>n[1]?1:n[0]<n[1]?-1:0};var HC=$e(Va);var WC=$e(ul);var KC=$e(dl);var GC=$e(cl);var QC=$e(ll);var YC=$e(al);var wy=(t,e)=>{let r={};return t.split("").forEach((n,o)=>r[n]=e*(o+1)),r},XB=gt(F(F({},wy("ABCDEFGHIKLM",1)),wy("NOPQRSTUVWXY",-1)),{Z:0});var Oy={undefined:null,null:null,NaN:NaN,Infinity:new Error,"-Infinity":new Error};function $t(t,e=Oy){let r=Object.assign({},Oy,e),n=new Set(Object.keys(r));return(o,i,s)=>{let l=$(o,i,null,s);if(n.has(`${l}`)){let d=r[`${l}`];if(d instanceof Error)throw new de(`cannot apply $${t.name} to -inf, value must in (-inf,inf)`);return d}return t(l)}}var i2=$t(Math.acos,{Infinity:1/0,0:new Error});var c2=$t(Math.acosh,{Infinity:1/0,0:new Error});var d2=$t(Math.asin);var p2=$t(Math.asinh,{Infinity:1/0,"-Infinity":-1/0});var v2=$t(Math.atan);var C2=$t(Math.atanh,{1:1/0,"-1":-1/0});var O2=$t(Math.cos);var k2=$t(Math.cosh,{"-Infinity":1/0,Infinity:1/0});var tS=Math.PI/180,T2=$t(t=>t*tS,{Infinity:1/0,"-Infinity":1/0});var eS=180/Math.PI,N2=$t(t=>t*eS,{Infinity:1/0,"-Infinity":-1/0});var B2=$t(Math.sin);var U2=$t(Math.sinh,{"-Infinity":-1/0,Infinity:1/0});var q2=$t(Math.tan);var Df=(t,e,r)=>{if(Ke(e))return t;let n=Object.keys(e),o=!1;Dy(e,r);let i=r.idKey;if(Br(n,i)){let l=e[i];(l===0||l===!1)&&(n=n.filter(Xc.bind(null,[i])),o=n.length==0)}else n.push(i);let s=Ht.init(r);return t.map(l=>Ef(l,e,s.update(l),n,o))};function Ef(t,e,r,n,o){let i={},s=!1,l=!1,d=[];o&&d.push(r.idKey);for(let p of n){let m,y=e[p];if(p!==r.idKey&&Br([0,!1],y)&&(l=!0),p===r.idKey&&Ke(y))m=t[p];else if(Ct(y))m=$(t,y,p,r);else if(!Br([1,!0],y))if(y instanceof Array)m=y.map(D=>{let P=$(t,D,null,r);return X(P)?null:P});else if(ft(y)){let D=y,P=Object.keys(y),j=P.length==1?P[0]:"",G=xr(wr.PROJECTION,j,r);if(G)j==="$slice"?Fr(D[j]).every(ht)?(m=G(t,D[j],p,r),s=!0):m=$(t,D,p,r):m=G(t,D[j],p,r);else if(Ge(j))m=$(t,D[j],j,r);else if(Vt(t,p)){Dy(D,r);let J=t[p];J instanceof Array?m=J.map(rt=>Ef(rt,D,r,P,!1)):(J=ft(J)?J:t,m=Ef(J,D,r,P,!1))}else m=$(t,y,null,r)}else{d.push(p);continue}let S=xi(t,p,{preserveMissing:!0});S!==void 0&&Kc(i,S,{flatten:!0}),Xc([0,1,!1,!0],y)&&(m===void 0?Ua(i,p,{descendArray:!0}):tl(i,p,m))}if(Gc(i),(s||l||o)&&(i=cr({},t,i),d.length>0))for(let p of d)Ua(i,p,{descendArray:!0});return i}function Dy(t,e){let r=[!1,!1];for(let[n,o]of Object.entries(t)){if(n===e?.idKey)return;o===0||o===!1?r[0]=!0:(o===1||o===!0)&&(r[1]=!0),z(!(r[0]&&r[1]),"Projection cannot have a mix of inclusion and exclusion.")}}var kf=(t,e,r)=>{z(it(e),"Invalid expression: $and expects value to be an Array.");let n=e.map(o=>new ee(o,r));return o=>n.every(i=>i.test(o))};var qa=(t,e,r)=>{z(it(e),"Invalid expression. $or expects value to be an Array");let n=e.map(o=>new ee(o,r));return o=>n.some(i=>i.test(o))};var Af=(t,e,r)=>{z(it(e),"Invalid expression. $nor expects value to be an array.");let n=qa("$or",e,r);return o=>!n(o)};var If=(t,e,r)=>{let n={};n[t]=el(e);let o=new ee(n,r);return i=>!o.test(i)};var hl=St(Va);var pl=St(ul);var ml=St(dl);var gl=St(Cf);var vl=St(cl);var yl=St(ll);var bl=St(al);var _l=St(sl);function oS(t,e,r){return n=>$(n,e,null,r)}function iS(t,e,r){if(!r?.jsonSchemaValidator)throw new de("Missing option 'jsonSchemaValidator'. Configure to use '$jsonSchema' operator.");let n=r?.jsonSchemaValidator(e);return o=>n(o)}var Tf=St(gy);var Mf=St(vy);function aS(t,e,r){z(r.scriptEnabled,"$where operator requires 'scriptEnabled' option to be true");let n=e;return z(Fa(n),"$where only accepts a Function object"),o=>Ie(n.call(o),r?.useStrictMode)}var sS=St(by);var Pf=St(Sf);var Nf=St(_y);var Lf=St(yy);var $f=St(xy);var ky=!1;function Ay(t){return ky||(_f(wr.PIPELINE,{$sort:il,$project:Df}),_f(wr.QUERY,{$and:kf,$eq:hl,$elemMatch:Pf,$exists:Lf,$gt:pl,$gte:ml,$in:gl,$lt:vl,$lte:yl,$ne:bl,$nin:_l,$mod:Tf,$nor:Af,$not:If,$or:qa,$regex:Mf,$size:Nf,$type:$f}),ky=!0),new ee(t)}function Ha(t,e){var r=ve(t.primaryKey);e=kt(e);var n=sr(e);if(typeof n.skip!="number"&&(n.skip=0),n.selector?(n.selector=n.selector,Object.entries(n.selector).forEach(([p,m])=>{(typeof m!="object"||m===null)&&(n.selector[p]={$eq:m})})):n.selector={},n.index){var o=Ma(n.index);o.includes(r)||o.push(r),n.index=o}if(n.sort){var d=n.sort.find(p=>Qg(p)===r);d||(n.sort=n.sort.slice(0),n.sort.push({[r]:"asc"}))}else if(n.index)n.sort=n.index.map(p=>({[p]:"asc"}));else{if(t.indexes){var i=new Set;Object.entries(n.selector).forEach(([p,m])=>{var y=!1;typeof m=="object"&&m!==null?y=!!Object.keys(m).find(S=>Hc.has(S)):y=!0,y&&i.add(p)});var s=-1,l;t.indexes.forEach(p=>{var m=Lr(p)?p:[p],y=m.findIndex(S=>!i.has(S));y>0&&y>s&&(s=y,l=m)}),l&&(n.sort=l.map(p=>({[p]:"asc"})))}n.sort||(n.sort=[{[r]:"asc"}])}return n}function xl(t,e){if(!e.sort)throw L("SNH",{query:e});var r=[];e.sort.forEach(o=>{var i=Object.keys(o)[0],s=Object.values(o)[0];r.push({key:i,direction:s,getValueFn:Gg(i)})});var n=(o,i)=>{for(var s=0;s<r.length;++s){var l=r[s],d=l.getValueFn(o),p=l.getValueFn(i);if(d!==p){var m=l.direction==="asc"?Lt(d,p):Lt(p,d);return m}}};return n}function Di(t,e){if(!e.sort)throw L("SNH",{query:e});var r=Ay(e.selector),n=o=>r.test(o);return n}function zn(t,e){return U(this,null,function*(){var r=yield t.exec();if(!r)return null;if(Array.isArray(r))return Promise.all(r.map(o=>e(o)));if(r instanceof Map)return Promise.all([...r.values()].map(o=>e(o)));var n=yield e(r);return n})}function cS(t,e){return!e.sort||e.sort.length===0?[t]:e.sort.map(r=>Object.keys(r)[0])}var lS=new WeakMap;function uS(t){return We(lS,t,()=>{var e=t.collection,r=Ha(e.storageInstance.schema,sr(t.mangoQuery)),n=e.schema.primaryPath,o=xl(e.schema.jsonSchema,r),i=(p,m)=>{var y={docA:p,docB:m,rxQuery:t};return o(y.docA,y.docB)},s=Di(e.schema.jsonSchema,r),l=p=>{var m={doc:p,rxQuery:t};return s(m.doc)},d={primaryKey:t.collection.schema.primaryPath,skip:r.skip,limit:r.limit,sortFields:cS(n,r),sortComparator:i,queryMatcher:l};return d})}function Iy(t,e){if(!t.collection.database.eventReduce)return{runFullQueryAgain:!0};var r=uS(t),n=Et(t._result).docsData.slice(0),o=Et(t._result).docsDataMap,i=!1,s=e.map(d=>bv(d)).filter(Ug),l=s.find(d=>{var p={queryParams:r,changeEvent:d,previousResults:n,keyDocumentMap:o},m=ey(p);if(m==="runFullQueryAgain")return!0;if(m!=="doNothing")return i=!0,ry(m,r,d,n,o),!1});return l?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:i,newResults:n}}var dS=function(){function t(){this._map=new Map}var e=t.prototype;return e.getByQuery=function(n){var o=n.toString();return We(this._map,o,()=>n)},t}();function My(){return new dS}function Ty(t,e){e.uncached=!0;var r=e.toString();t._map.delete(r)}function fS(t){return t.refCount$.observers.length}var hS=100,pS=30*1e3,mS=(t,e)=>(r,n)=>{if(!(n._map.size<t)){var o=oe()-e,i=[],s=Array.from(n._map.values());for(var l of s)if(!(fS(l)>0)){if(l._lastEnsureEqual===0&&l._creationTime<o){Ty(n,l);continue}i.push(l)}var d=i.length-t;if(!(d<=0)){var p=i.sort((y,S)=>y._lastEnsureEqual-S._lastEnsureEqual),m=p.slice(0,d);m.forEach(y=>Ty(n,y))}}},Ff=mS(hS,pS),Bf=new WeakSet;function Py(t){Bf.has(t)||(Bf.add(t),tv().then(()=>nv(200)).then(()=>{t.destroyed||t.cacheReplacementPolicy(t,t._queryCache),Bf.delete(t)}))}var Ly=function(){function t(r,n,o){this.cacheItemByDocId=new Map,this.tasks=new Set,this.registry=typeof FinalizationRegistry=="function"?new FinalizationRegistry(i=>{var s=i.docId,l=this.cacheItemByDocId.get(s);l&&(l[0].delete(i.revisionHeight),l[0].size===0&&this.cacheItemByDocId.delete(s))}):void 0,this.primaryPath=r,this.changes$=n,this.documentCreator=o,n.subscribe(i=>{this.tasks.add(()=>{for(var s=this.cacheItemByDocId,l=0;l<i.length;l++){var d=i[l],p=s.get(d.documentId);if(p){var m=d.documentData;m||(m=d.previousDocumentData),p[1]=m}}}),this.tasks.size<=1&&bi().then(()=>{this.processTasks()})})}var e=t.prototype;return e.processTasks=function(){if(this.tasks.size!==0){var n=Array.from(this.tasks);n.forEach(o=>o()),this.tasks.clear()}},e.getLatestDocumentData=function(n){this.processTasks();var o=Ln(this.cacheItemByDocId,n);return o[1]},e.getLatestDocumentDataIfExists=function(n){this.processTasks();var o=this.cacheItemByDocId.get(n);if(o)return o[1]},Ae(t,[{key:"getCachedRxDocuments",get:function(){var r=Ny(this);return He(this,"getCachedRxDocuments",r)}},{key:"getCachedRxDocument",get:function(){var r=Ny(this);return He(this,"getCachedRxDocument",n=>r([n])[0])}}])}();function Ny(t){var e=t.primaryPath,r=t.cacheItemByDocId,n=t.registry,o=Tt.deepFreezeWhenDevMode,i=t.documentCreator,s=l=>{for(var d=new Array(l.length),p=[],m=0;m<l.length;m++){var y=l[m],S=y[e],D=Co(y._rev),P=void 0,j=void 0,G=r.get(S);G?(P=G[0],j=P.get(D)):(P=new Map,G=[P,y],r.set(S,G));var J=j?j.deref():void 0;J||(y=o(y),J=i(y),P.set(D,vS(J)),n&&p.push(J)),d[m]=J}return p.length>0&&n&&(t.tasks.add(()=>{for(var rt=0;rt<p.length;rt++){var tt=p[rt];n.register(tt,{docId:tt.primary,revisionHeight:Co(tt.revision)})}}),t.tasks.size<=1&&bi().then(()=>{t.processTasks()})),d};return s}function wl(t,e){var r=t.getCachedRxDocuments;return r(e)}var gS=typeof WeakRef=="function",vS=gS?yS:bS;function yS(t){return new WeakRef(t)}function bS(t){return{deref(){return t}}}var jf=function(){function t(r,n,o){this.time=oe(),this.query=r,this.count=o,this.documents=wl(this.query.collection._docCache,n)}var e=t.prototype;return e.getValue=function(n){var o=this.query.op;if(o==="count")return this.count;if(o==="findOne"){var i=this.documents.length===0?null:this.documents[0];if(!i&&n)throw L("QU10",{collection:this.query.collection.name,query:this.query.mangoQuery,op:o});return i}else return o==="findByIds"?this.docsMap:this.documents.slice(0)},Ae(t,[{key:"docsData",get:function(){return He(this,"docsData",this.documents.map(r=>r._data))}},{key:"docsDataMap",get:function(){var r=new Map;return this.documents.forEach(n=>{r.set(n.primary,n._data)}),He(this,"docsDataMap",r)}},{key:"docsMap",get:function(){for(var r=new Map,n=this.documents,o=0;o<n.length;o++){var i=n[o];r.set(i.primary,i)}return He(this,"docsMap",r)}}])}();var _S=0,xS=function(){return++_S},Uf=function(){function t(r,n,o,i={}){this.id=xS(),this._execOverDatabaseCount=0,this._creationTime=oe(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new we(null),this._result=null,this._latestChangeEvent=-1,this._lastExecStart=0,this._lastExecEnd=0,this._ensureEqualQueue=$r,this.op=r,this.mangoQuery=n,this.collection=o,this.other=i,n||(this.mangoQuery=Wa()),this.isFindOneByIdQuery=RS(this.collection.schema.primaryPath,n)}var e=t.prototype;return e._setResultData=function(n){if(typeof n>"u")throw L("QU18",{database:this.collection.database.name,collection:this.collection.name});if(typeof n=="number"){this._result=new jf(this,[],n);return}else n instanceof Map&&(n=Array.from(n.values()));var o=new jf(this,n,n.length);this._result=o},e._execOverDatabase=function(){return U(this,null,function*(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this._lastExecStart=oe(),this.op==="count"){var n=this.getPreparedQuery(),o=yield this.collection.storageInstance.count(n);if(o.mode==="slow"&&!this.collection.database.allowSlowCount)throw L("QU14",{collection:this.collection,queryObj:this.mangoQuery});return o.count}if(this.op==="findByIds"){var i=Et(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,s=new Map,l=[];if(i.forEach(m=>{var y=this.collection._docCache.getLatestDocumentDataIfExists(m);if(y){if(!y._deleted){var S=this.collection._docCache.getCachedRxDocument(y);s.set(m,S)}}else l.push(m)}),l.length>0){var d=yield this.collection.storageInstance.findDocumentsById(l,!1);d.forEach(m=>{var y=this.collection._docCache.getCachedRxDocument(m);s.set(y.primary,y)})}return s}var p=SS(this);return p.then(m=>(this._lastExecEnd=oe(),m))})},e.exec=function(n){return U(this,null,function*(){if(n&&this.op!=="findOne")throw L("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});yield $y(this);var o=Et(this._result);return o.getValue(n)})},e.toString=function(){var n=gi({op:this.op,query:this.mangoQuery,other:this.other},!0),o=JSON.stringify(n);return this.toString=()=>o,o},e.getPreparedQuery=function(){var n={rxQuery:this,mangoQuery:Ha(this.collection.schema.jsonSchema,this.mangoQuery)};n.mangoQuery.selector._deleted={$eq:!1},n.mangoQuery.index&&n.mangoQuery.index.unshift("_deleted"),te("prePrepareQuery",n);var o=Ka(this.collection.schema.jsonSchema,n.mangoQuery);return this.getPreparedQuery=()=>o,o},e.doesDocumentDataMatch=function(n){return n._deleted?!1:this.queryMatcher(n)},e.remove=function(){return this.exec().then(n=>Array.isArray(n)?Promise.all(n.map(o=>o.remove())):n.remove())},e.incrementalRemove=function(){return zn(this.asRxQuery,n=>n.incrementalRemove())},e.update=function(n){throw Ot("update")},e.patch=function(n){return zn(this.asRxQuery,o=>o.patch(n))},e.incrementalPatch=function(n){return zn(this.asRxQuery,o=>o.incrementalPatch(n))},e.modify=function(n){return zn(this.asRxQuery,o=>o.modify(n))},e.incrementalModify=function(n){return zn(this.asRxQuery,o=>o.incrementalModify(n))},e.where=function(n){throw Ot("query-builder")},e.sort=function(n){throw Ot("query-builder")},e.skip=function(n){throw Ot("query-builder")},e.limit=function(n){throw Ot("query-builder")},Ae(t,[{key:"$",get:function(){if(!this._$){var r=this.collection.$.pipe(bt(n=>!n.isLocal),hr(null),Wt(()=>$y(this)),ut(()=>this._result),oa(Mc),Ho((n,o)=>!!(n&&n.time===Et(o).time)),bt(n=>!!n),ut(n=>Et(n).getValue()));this._$=Bs(r,this.refCount$.pipe(bt(()=>!1)))}return this._$}},{key:"$$",get:function(){var r=this.collection.database.getReactivityFactory();return r.fromObservable(this.$,void 0,this.collection.database)}},{key:"queryMatcher",get:function(){var r=this.collection.schema.jsonSchema,n=Ha(this.collection.schema.jsonSchema,this.mangoQuery);return He(this,"queryMatcher",Di(r,n))}},{key:"asRxQuery",get:function(){return this}}])}();function Wa(){return{selector:{}}}function wS(t){return t.collection._queryCache.getByQuery(t)}function ki(t,e,r,n){te("preCreateRxQuery",{op:t,queryObj:e,collection:r,other:n});var o=new Uf(t,e,r,n);return o=wS(o),Py(r),o}function By(t){var e=t.asRxQuery.collection._changeEventBuffer.getCounter();return t._latestChangeEvent>=e}function $y(t){return U(this,null,function*(){return t.collection.awaitBeforeReads.size>0&&(yield Promise.all(Array.from(t.collection.awaitBeforeReads).map(e=>e()))),t.collection.database.destroyed||By(t)?!1:(t._ensureEqualQueue=t._ensureEqualQueue.then(()=>CS(t)),t._ensureEqualQueue)})}function CS(t){if(t._lastEnsureEqual=oe(),t.collection.database.destroyed||By(t))return $r;var e=!1,r=!1;if(t._latestChangeEvent===-1&&(r=!0),!r){var n=t.asRxQuery.collection._changeEventBuffer.getFrom(t._latestChangeEvent+1);if(n===null)r=!0;else{t._latestChangeEvent=t.asRxQuery.collection._changeEventBuffer.getCounter();var o=t.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(n);if(t.op==="count"){var i=Et(t._result).count,s=i;o.forEach(d=>{var p=d.previousDocumentData&&t.doesDocumentDataMatch(d.previousDocumentData),m=t.doesDocumentDataMatch(d.documentData);!p&&m&&s++,p&&!m&&s--}),s!==i&&(e=!0,t._setResultData(s))}else{var l=Iy(t,o);l.runFullQueryAgain?r=!0:l.changed&&(e=!0,t._setResultData(l.newResults))}}}return r?t._execOverDatabase().then(d=>(t._latestChangeEvent=t.collection._changeEventBuffer.getCounter(),typeof d=="number"?((!t._result||d!==t._result.count)&&(e=!0,t._setResultData(d)),e):((!t._result||!Xg(t.collection.schema.primaryPath,d,t._result.docsData))&&(e=!0,t._setResultData(d)),e))):Promise.resolve(e)}function Ka(t,e){if(!e.sort)throw L("SNH",{query:e});var r=ny(t,e);return{query:e,queryPlan:r}}function SS(t){return U(this,null,function*(){var e=[],r=t.collection;if(t.isFindOneByIdQuery)if(Array.isArray(t.isFindOneByIdQuery)){var n=t.isFindOneByIdQuery;if(n=n.filter(m=>{var y=t.collection._docCache.getLatestDocumentDataIfExists(m);return y?(y._deleted||e.push(y),!1):!0}),n.length>0){var o=yield r.storageInstance.findDocumentsById(n,!1);br(e,o)}}else{var i=t.isFindOneByIdQuery,s=t.collection._docCache.getLatestDocumentDataIfExists(i);if(!s){var l=yield r.storageInstance.findDocumentsById([i],!1);l[0]&&(s=l[0])}s&&!s._deleted&&e.push(s)}else{var d=t.getPreparedQuery(),p=yield r.storageInstance.query(d);e=p.documents}return e})}function RS(t,e){if(!e.skip&&e.selector&&Object.keys(e.selector).length===1&&e.selector[t]){var r=e.selector[t];if(typeof r=="string")return r;if(Object.keys(r).length===1&&typeof r.$eq=="string"||Object.keys(r).length===1&&Array.isArray(r.$eq)&&!r.$eq.find(n=>typeof n!="string"))return r.$eq}return!1}var Fy="_rxdb_internal";function Vf(t,e){return U(this,null,function*(){var r=yield t.findDocumentsById([e],!1),n=r[0];if(n)return n})}function Ai(t,e,r,n){if(n)throw n.status===409?L("CONFLICT",{collection:t.name,id:e,writeError:n,data:r}):n.status===422?L("VD2",{collection:t.name,id:e,writeError:n,data:r}):n}function jy(t,e,r,n,o,i,s){for(var l=!!t.schema.attachments,d=[],p=[],m=[],y=Ro(10),S={id:y,events:[],checkpoint:null,context:o,startTime:oe(),endTime:0},D=S.events,P=[],j=[],G=[],J=r.size>0,rt,tt=n.length,At=function(){var Mt=n[st],Dt=Mt.document,Ft=Mt.previous,he=Dt[e],Be=Dt._deleted,ur=Ft&&Ft._deleted,Gn=void 0;J&&(Gn=r.get(he));var dr;if(Gn){var Vr=Gn._rev;if(!Ft||Ft&&Vr!==Ft._rev){var dn={isError:!0,status:409,documentId:he,writeRow:Mt,documentInDb:Gn};return m.push(dn),1}var Pe=l?zf(Mt):Mt;l&&(Be?Ft&&Object.keys(Ft._attachments).forEach(ie=>{j.push({documentId:he,attachmentId:ie,digest:Et(Ft)._attachments[ie].digest})}):(Object.entries(Dt._attachments).find(([ie,ae])=>{var hn=Ft?Ft._attachments[ie]:void 0;return!hn&&!ae.data&&(dr={documentId:he,documentInDb:Gn,isError:!0,status:510,writeRow:Mt,attachmentId:ie}),!0}),dr||Object.entries(Dt._attachments).forEach(([ie,ae])=>{var hn=Ft?Ft._attachments[ie]:void 0;if(!hn)P.push({documentId:he,attachmentId:ie,attachmentData:ae,digest:ae.digest});else{var Jl=Pe.document._attachments[ie].digest;ae.data&&hn.digest!==Jl&&G.push({documentId:he,attachmentId:ie,attachmentData:ae,digest:ae.digest})}}))),dr?m.push(dr):(l?(p.push(zf(Pe)),s&&s(Dt)):(p.push(Pe),s&&s(Dt)),rt=Pe);var fn=null,ji=null,fr=null;if(ur&&!Be)fr="INSERT",fn=l?Ur(Dt):Dt;else if(Ft&&!ur&&!Be)fr="UPDATE",fn=l?Ur(Dt):Dt,ji=Ft;else if(Be)fr="DELETE",fn=Et(Dt),ji=Ft;else throw L("SNH",{args:{writeRow:Mt}});var cs={documentId:he,documentData:fn,previousDocumentData:ji,operation:fr};D.push(cs)}else{var Fi=!!Be;if(l&&Object.entries(Dt._attachments).forEach(([ie,ae])=>{ae.data?P.push({documentId:he,attachmentId:ie,attachmentData:ae,digest:ae.digest}):(dr={documentId:he,isError:!0,status:510,writeRow:Mt,attachmentId:ie},m.push(dr))}),dr||(l?(d.push(zf(Mt)),i&&i(Dt)):(d.push(Mt),i&&i(Dt)),rt=Mt),!Fi){var Zl={documentId:he,operation:"INSERT",documentData:l?Ur(Dt):Dt,previousDocumentData:l&&Ft?Ur(Ft):Ft};D.push(Zl)}}},st=0;st<tt;st++)At();return{bulkInsertDocs:d,bulkUpdateDocs:p,newestRow:rt,errors:m,eventBulk:S,attachmentsAdd:P,attachmentsRemove:j,attachmentsUpdate:G}}function zf(t){return{previous:t.previous,document:Ur(t.document)}}function OS(t){return atob(t).length}function ES(t){var e=t.data;if(!e)return t;var r={length:OS(e),digest:t.digest,type:t.type};return r}function Ur(t){if(!t._attachments||Object.keys(t._attachments).length===0)return t;var e=kt(t);return e._attachments={},Object.entries(t._attachments).forEach(([r,n])=>{e._attachments[r]=ES(n)}),e}function Io(t){return Object.assign({},t,{_meta:kt(t._meta)})}var Uy=new WeakMap;function Cl(t,e,r){Tt.deepFreezeWhenDevMode(r);var n=ve(e.schema.primaryKey),o={originalStorageInstance:e,schema:e.schema,internals:e.internals,collectionName:e.collectionName,databaseName:e.databaseName,options:e.options,bulkWrite(i,s){for(var l=t.token,d=new Array(i.length),p=oe(),m=0;m<i.length;m++){var y=i[m],S=Io(y.document);S._meta.lwt=p;var D=y.previous;S._rev=mi(l,D),d[m]={document:S,previous:D}}return te("preStorageWrite",{storageInstance:this.originalStorageInstance,rows:d}),t.lockedRun(()=>e.bulkWrite(d,s)).then(P=>{var j={error:[]},G=lr(n,d,P);Uy.set(j,G);var J=P.error.length===0?[]:P.error.filter(tt=>tt.status===409&&!tt.writeRow.previous&&!tt.writeRow.document._deleted&&Et(tt.documentInDb)._deleted?!0:(j.error.push(tt),!1));if(J.length>0){var rt=J.map(tt=>({previous:tt.documentInDb,document:Object.assign({},tt.writeRow.document,{_rev:mi(t.token,tt.documentInDb)})}));return t.lockedRun(()=>e.bulkWrite(rt,s)).then(tt=>{br(j.error,tt.error);var At=lr(n,rt,tt);return br(G,At),j})}return j})},query(i){return t.lockedRun(()=>e.query(i))},count(i){return t.lockedRun(()=>e.count(i))},findDocumentsById(i,s){return t.lockedRun(()=>e.findDocumentsById(i,s))},getAttachmentData(i,s,l){return t.lockedRun(()=>e.getAttachmentData(i,s,l))},getChangedDocumentsSince:e.getChangedDocumentsSince?(i,s)=>t.lockedRun(()=>e.getChangedDocumentsSince(Et(i),s)):void 0,cleanup(i){return t.lockedRun(()=>e.cleanup(i))},remove(){return t.storageInstances.delete(o),t.lockedRun(()=>e.remove())},close(){return t.storageInstances.delete(o),t.lockedRun(()=>e.close())},changeStream(){return e.changeStream()},conflictResultionTasks(){return e.conflictResultionTasks()},resolveConflictResultionTask(i){if(i.output.isEqual)return e.resolveConflictResultionTask(i);var s=Object.assign({},i.output.documentData,{_meta:Tn(),_rev:nn(),_attachments:{}}),l=kt(s);return delete l._meta,delete l._rev,delete l._attachments,e.resolveConflictResultionTask({id:i.id,output:{isEqual:!1,documentData:l}})}};return t.storageInstances.add(o),o}function zy(t){if(t.schema.keyCompression)throw L("UT5",{args:{params:t}});if(DS(t.schema))throw L("UT6",{args:{params:t}});if(t.schema.attachments&&t.schema.attachments.compression)throw L("UT7",{args:{params:t}})}function DS(t){return!!(t.encrypted&&t.encrypted.length>0||t.attachments&&t.attachments.encrypted)}function lr(t,e,r){var n=Uy.get(r);if(n)return n;var o=[];if(r.error.length>0){for(var i=new Set,s=0;s<r.error.length;s++){var l=r.error[s];i.add(l.documentId)}for(var d=0;d<e.length;d++){var p=e[d].document;i.has(p[t])||o.push(Ur(p))}}else{o.length=e.length-r.error.length;for(var m=0;m<e.length;m++){var y=e[m].document;o[m]=Ur(y)}}return o}var Vy=function(){function t(r,n,o,i){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=r,this.primaryPath=n,this.preWrite=o,this.postWrite=i}var e=t.prototype;return e.addWrite=function(n,o){var i=n[this.primaryPath],s=We(this.queueByDocId,i,()=>[]),l=new Promise((d,p)=>{var m={lastKnownDocumentState:n,modifier:o,resolve:d,reject:p};Et(s).push(m),this.triggerRun()});return l},e.triggerRun=function(){return U(this,null,function*(){if(!(this.isRunning===!0||this.queueByDocId.size===0)){this.isRunning=!0;var n=[],o=this.queueByDocId;this.queueByDocId=new Map,yield Promise.all(Array.from(o.entries()).map(d=>U(this,[d],function*([s,l]){var p=kS(l.map(S=>S.lastKnownDocumentState)),m=p;for(var y of l)try{m=yield y.modifier(sr(m))}catch(S){y.reject(S),y.reject=()=>{},y.resolve=()=>{}}try{yield this.preWrite(m,p)}catch(S){l.forEach(D=>D.reject(S));return}n.push({previous:p,document:m})})));var i=n.length>0?yield this.storageInstance.bulkWrite(n,"incremental-write"):{error:[]};return yield Promise.all(lr(this.primaryPath,n,i).map(s=>{var l=s[this.primaryPath];this.postWrite(s);var d=Ln(o,l);d.forEach(p=>p.resolve(s))})),i.error.forEach(s=>{var l=s.documentId,d=Ln(o,l),p=Lc(s);if(p){var m=We(this.queueByDocId,l,()=>[]);d.reverse().forEach(S=>{S.lastKnownDocumentState=Et(p.documentInDb),Et(m).unshift(S)})}else{var y=hv(s);d.forEach(S=>S.reject(y))}}),this.isRunning=!1,this.triggerRun()}})},t}();function qf(t){var e=r=>U(null,null,function*(){var n=Yg(r);n._deleted=r._deleted;var o=yield t(n),i=Object.assign({},o,{_meta:r._meta,_attachments:r._attachments,_rev:r._rev,_deleted:typeof o._deleted<"u"?o._deleted:r._deleted});return typeof i._deleted>"u"&&(i._deleted=!1),i});return e}function kS(t){var e=t[0],r=Co(e._rev);return t.forEach(n=>{var o=Co(n._rev);o>r&&(e=n,r=o)}),e}var Vn={get primaryPath(){var t=this;if(t.isInstanceOfRxDocument)return t.collection.schema.primaryPath},get primary(){var t=this;if(t.isInstanceOfRxDocument)return t._data[t.primaryPath]},get revision(){var t=this;if(t.isInstanceOfRxDocument)return t._data._rev},get deleted$(){var t=this;if(t.isInstanceOfRxDocument)return t.$.pipe(ut(e=>e._data._deleted))},get deleted$$(){var t=this,e=t.collection.database.getReactivityFactory();return e.fromObservable(t.deleted$,t.getLatest().deleted,t.collection.database)},get deleted(){var t=this;if(t.isInstanceOfRxDocument)return t._data._deleted},getLatest(){var t=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(t)},get $(){var t=this;return t.collection.$.pipe(bt(e=>!e.isLocal),bt(e=>e.documentId===this.primary),ut(e=>yv(e)),hr(t.collection._docCache.getLatestDocumentData(this.primary)),Ho((e,r)=>e._rev===r._rev),ut(e=>this.collection._docCache.getCachedRxDocument(e)),oa(Mc))},get $$(){var t=this,e=t.collection.database.getReactivityFactory();return e.fromObservable(t.$,t.getLatest()._data,t.collection.database)},get$(t){if(Tt.isDevMode()){if(t.includes(".item."))throw L("DOC1",{path:t});if(t===this.primaryPath)throw L("DOC2");if(this.collection.schema.finalFields.includes(t))throw L("DOC3",{path:t});var e=Le(this.collection.schema.jsonSchema,t);if(!e)throw L("DOC4",{path:t})}return this.$.pipe(ut(r=>Ne(r,t)),Ho())},get$$(t){var e=this.get$(t),r=this.collection.database.getReactivityFactory();return r.fromObservable(e,this.getLatest().get(t),this.collection.database)},populate(t){var e=Le(this.collection.schema.jsonSchema,t),r=this.get(t);if(!r)return rv;if(!e)throw L("DOC5",{path:t});if(!e.ref)throw L("DOC6",{path:t,schemaObj:e});var n=this.collection.database.collections[e.ref];if(!n)throw L("DOC7",{ref:e.ref,path:t,schemaObj:e});return e.type==="array"?n.findByIds(r).exec().then(o=>{var i=o.values();return Array.from(i)}):n.findOne(r).exec()},get(t){return Hy(this,t)},toJSON(t=!1){if(t)return Tt.deepFreezeWhenDevMode(this._data);var e=kt(this._data);return delete e._rev,delete e._attachments,delete e._deleted,delete e._meta,Tt.deepFreezeWhenDevMode(e)},toMutableJSON(t=!1){return sr(this.toJSON(t))},update(t){throw Ot("update")},incrementalUpdate(t){throw Ot("update")},updateCRDT(t){throw Ot("crdt")},putAttachment(){throw Ot("attachments")},getAttachment(){throw Ot("attachments")},allAttachments(){throw Ot("attachments")},get allAttachments$(){throw Ot("attachments")},modify(t,e){return U(this,null,function*(){var r=this._data,n=yield qf(t)(r);return this._saveData(n,r)})},incrementalModify(t,e){return this.collection.incrementalWriteQueue.addWrite(this._data,qf(t)).then(r=>this.collection._docCache.getCachedRxDocument(r))},patch(t){var e=this._data,r=sr(e);return Object.entries(t).forEach(([n,o])=>{r[n]=o}),this._saveData(r,e)},incrementalPatch(t){return this.incrementalModify(e=>(Object.entries(t).forEach(([r,n])=>{e[r]=n}),e))},_saveData(t,e){return U(this,null,function*(){if(t=kt(t),this._data._deleted)throw L("DOC11",{id:this.primary,document:this});yield Hf(this.collection,t,e);var r=[{previous:e,document:t}],n=yield this.collection.storageInstance.bulkWrite(r,"rx-document-save-data"),o=n.error[0];return Ai(this.collection,this.primary,t,o),yield this.collection._runHooks("post","save",t,this),this.collection._docCache.getCachedRxDocument(lr(this.collection.schema.primaryPath,r,n)[0])})},remove(){var t=this.collection;if(this.deleted)return Promise.reject(L("DOC13",{document:this,id:this.primary}));var e=kt(this._data),r;return t._runHooks("pre","remove",e,this).then(()=>U(this,null,function*(){e._deleted=!0;var n=[{previous:this._data,document:e}],o=yield t.storageInstance.bulkWrite(n,"rx-document-remove"),i=o.error[0];return Ai(t,this.primary,e,i),lr(this.collection.schema.primaryPath,n,o)[0]})).then(n=>(r=n,this.collection._runHooks("post","remove",e,this))).then(()=>this.collection._docCache.getCachedRxDocument(r))},incrementalRemove(){return this.incrementalModify(t=>U(this,null,function*(){return yield this.collection._runHooks("pre","remove",t,this),t._deleted=!0,t})).then(t=>U(this,null,function*(){return yield this.collection._runHooks("post","remove",t._data,t),t}))},destroy(){throw L("DOC14")}};function Sl(t=Vn){var e=function(n,o){this.collection=n,this._data=o,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return e.prototype=t,e}function qy(t,e,r){var n=new t(e,r);return te("createRxDocument",n),n}function Hf(t,e,r){return e._meta=Object.assign({},r._meta,e._meta),Tt.isDevMode()&&t.schema.validateChange(r,e),t._runHooks("pre","save",e,r)}function Hy(t,e){return We(t._propertyCache,e,()=>{var r=Ne(t._data,e);if(typeof r!="object"||r===null||Array.isArray(r))return Tt.deepFreezeWhenDevMode(r);var n=new Proxy(kt(r),{get(o,i){if(typeof i!="string")return o[i];var s=i.charAt(i.length-1);if(s==="$")if(i.endsWith("$$")){var l=i.slice(0,-2);return t.get$$(_r(e+"."+l))}else{var d=i.slice(0,-1);return t.get$(_r(e+"."+d))}else if(s==="_"){var p=i.slice(0,-1);return t.populate(_r(e+"."+p))}else{var m=o[i];return typeof m=="number"||typeof m=="string"||typeof m=="boolean"?m:Hy(t,_r(e+"."+i))}}});return n})}var Ii="collection",Wf="storage-token",AS="rx-migration-status",IS="RxInternalDocument",Rl=Bc({version:0,title:IS,primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[Ii,Wf,AS,"OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function Ol(t,e){return Na(Rl,{key:t,context:e})}function El(t){return U(this,null,function*(){var e=Ka(t.schema,{selector:{context:Ii,_deleted:{$eq:!1}},sort:[{id:"asc"}],skip:0}),r=yield t.query(e),n=r.documents;return n})}var Wy="storageToken",TS=Ol(Wy,Wf);function Ky(t){return U(this,null,function*(){var e=Ro(10),r=t.password?yield t.hashFunction(JSON.stringify(t.password)):void 0,n={id:TS,context:Wf,key:Wy,data:{rxdbVersion:t.rxdbVersion,token:e,instanceToken:t.token,passwordHash:r},_deleted:!1,_meta:Tn(),_rev:nn(),_attachments:{}},o=[{document:n}],i=yield t.internalStore.bulkWrite(o,"internal-add-storage-token");if(!i.error[0])return lr("id",o,i)[0];var s=Et(i.error[0]);if(s.isError&&Lc(s)){var l=s;if(!MS(l.documentInDb.data.rxdbVersion,t.rxdbVersion))throw L("DM5",{args:{database:t.name,databaseStateVersion:l.documentInDb.data.rxdbVersion,codeVersion:t.rxdbVersion}});if(r&&r!==l.documentInDb.data.passwordHash)throw L("DB1",{passwordHash:r,existingPasswordHash:l.documentInDb.data.passwordHash});var d=l.documentInDb;return Et(d)}throw s})}function MS(t,e){if(!t||e.includes("beta")&&e!==t)return!1;var r=t.split(".")[0],n=e.split(".")[0];return r===n}function Kf(t,e){return t+"-"+e.version}function Ga(t,e){return e=kt(e),e=mv(t,e),typeof t.jsonSchema.primaryKey!="string"&&(e=$c(t.primaryPath,t.jsonSchema,e)),e._meta=Tn(),Object.prototype.hasOwnProperty.call(e,"_deleted")||(e._deleted=!1),Object.prototype.hasOwnProperty.call(e,"_attachments")||(e._attachments={}),Object.prototype.hasOwnProperty.call(e,"_rev")||(e._rev=nn()),e}function Gy(t,e){return U(this,null,function*(){e.multiInstance=t.multiInstance;var r=yield t.storage.createStorageInstance(e);return r})}function Dl(t,e,r,n,o,i,s){return U(this,null,function*(){var l=yield El(e),d=l.filter(S=>S.data.name===o),p=[];d.forEach(S=>{p.push({collectionName:S.data.name,schema:S.data.schema,isCollection:!0}),S.data.connectedStorages.forEach(D=>p.push({collectionName:D.collectionName,isCollection:!1,schema:D.schema}))});var m=new Set;if(p=p.filter(S=>{var D=S.collectionName+"||"+S.schema.version;return m.has(D)?!1:(m.add(D),!0)}),yield Promise.all(p.map(S=>U(null,null,function*(){var D=yield t.createStorageInstance({collectionName:S.collectionName,databaseInstanceToken:r,databaseName:n,multiInstance:!1,options:{},schema:S.schema,password:i,devMode:Tt.isDevMode()});yield D.remove(),S.isCollection&&(yield Fn("postRemoveRxCollection",{storage:t,databaseName:n,collectionName:o}))}))),s){var y=d.map(S=>{var D=Io(S);return D._deleted=!0,D._meta.lwt=oe(),D._rev=mi(r,S),{previous:S,document:D}});yield e.bulkWrite(y,"rx-database-remove-collection-all")}})}function Ye(t){if(t.destroyed)throw L("COL21",{collection:t.name,version:t.schema.version})}var PS=function(){function t(r){this.subs=[],this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.limit=100,this.tasks=new Set,this.collection=r,this.subs.push(this.collection.database.eventBulks$.pipe(bt(n=>n.collectionName===this.collection.name),bt(n=>{var o=n.events[0];return!o.isLocal})).subscribe(n=>{this.tasks.add(()=>this._handleChangeEvents(n.events)),this.tasks.size<=1&&bi().then(()=>{this.processTasks()})}))}var e=t.prototype;return e.processTasks=function(){if(this.tasks.size!==0){var n=Array.from(this.tasks);n.forEach(o=>o()),this.tasks.clear()}},e._handleChangeEvents=function(n){var o=this.counter;this.counter=this.counter+n.length,n.length>this.limit?this.buffer=n.slice(n.length*-1):(br(this.buffer,n),this.buffer=this.buffer.slice(this.limit*-1));for(var i=o+1,s=this.eventCounterMap,l=0;l<n.length;l++){var d=n[l];s.set(d,i+l)}},e.getCounter=function(){return this.processTasks(),this.counter},e.getBuffer=function(){return this.processTasks(),this.buffer},e.getArrayIndexByPointer=function(n){this.processTasks();var o=this.buffer[0],i=this.eventCounterMap.get(o);if(n<i)return null;var s=n-i;return s},e.getFrom=function(n){this.processTasks();var o=[],i=this.getArrayIndexByPointer(n);if(i===null)return null;for(;;){var s=this.buffer[i];if(i++,s)o.push(s);else return o}},e.runFrom=function(n,o){this.processTasks();var i=this.getFrom(n);if(i===null)throw new Error("out of bounds");i.forEach(s=>o(s))},e.reduceByLastOfDoc=function(n){return this.processTasks(),n.slice(0);var o={};return n.forEach(i=>{o[i.documentId]=i}),Object.values(o)},e.destroy=function(){this.tasks.clear(),this.subs.forEach(n=>n.unsubscribe())},t}();function Qy(t){return new PS(t)}var NS=new WeakMap;function LS(t){var e=t.schema.getDocumentPrototype(),r=$S(t),n=Vn,o={};return[e,r,n].forEach(i=>{var s=Object.getOwnPropertyNames(i);s.forEach(l=>{var d=Object.getOwnPropertyDescriptor(i,l),p=!0;(l.startsWith("_")||l.endsWith("_")||l.startsWith("$")||l.endsWith("$"))&&(p=!1),typeof d.value=="function"?Object.defineProperty(o,l,{get(){return d.value.bind(this)},enumerable:p,configurable:!1}):(d.enumerable=p,d.configurable=!1,d.writable&&(d.writable=!1),Object.defineProperty(o,l,d))})}),o}function Yy(t){return We(NS,t,()=>Sl(LS(t)))}function Xy(t,e,r){var n=qy(e,t,Tt.deepFreezeWhenDevMode(r));return t._runHooksSync("post","create",r,n),te("postCreateRxDocument",n),n}function $S(t){var e={};return Object.entries(t.methods).forEach(([r,n])=>{e[r]=n}),e}var Gf=function(t,e){var r=Ur(t.newDocumentState),n=Ur(t.realMasterState);return Nn(r,n)?Promise.resolve({isEqual:!0}):Promise.resolve({isEqual:!1,documentData:t.realMasterState})};function kl(t){var e=t.collection.schema.jsonSchema;if(!e.attachments)throw L("AT1",{link:"https://pubkey.github.io/rxdb/rx-attachment.html"})}function Zy(t){Object.entries(t.doc.collection.attachments).forEach(([e,r])=>{Object.defineProperty(t,e,{get:()=>r.bind(t)})})}var BS=function(){function t({doc:r,id:n,type:o,length:i,digest:s}){this.doc=r,this.id=n,this.type=o,this.length=i,this.digest=s,Zy(this)}var e=t.prototype;return e.remove=function(){return this.doc.collection.incrementalWriteQueue.addWrite(this.doc._data,n=>(delete n._attachments[this.id],n)).then(()=>{})},e.getData=function(){return U(this,null,function*(){var n=yield this.doc.collection.storageInstance.getAttachmentData(this.doc.primary,this.id,this.digest),o=yield qg(n,this.type);return o})},e.getStringData=function(){return U(this,null,function*(){var n=yield this.getData(),o=yield Hg(n);return o})},t}();function Al(t,e,r){return new BS({doc:r,id:t,type:e.type,length:e.length,digest:e.digest})}function FS(t){return U(this,null,function*(){kl(this);var e=Kg(t.data),r=yield Wg(t.data),n=yield this.collection.database.hashFunction(r),o=t.id,i=t.type,s=r;return this.collection.incrementalWriteQueue.addWrite(this._data,l=>(l=kt(l),l._attachments=kt(l._attachments),l._attachments[o]={length:e,type:i,data:s,digest:n},l)).then(l=>{var d=this.collection._docCache.getCachedRxDocument(l),p=l._attachments[o],m=Al(o,p,d);return m})})}function jS(t){kl(this);var e=this._data;if(!e._attachments||!e._attachments[t])return null;var r=e._attachments[t],n=Al(t,r,this);return n}function US(){kl(this);var t=this._data;return t._attachments?Object.keys(t._attachments).map(e=>Al(e,t._attachments[e],this)):[]}function zS(t){return U(this,null,function*(){var e=t.docData._attachments;if(e){var r={};yield Promise.all(Object.keys(e).map(n=>U(null,null,function*(){var o=e[n],i=t.docData[t.oldCollection.schema.primaryPath],s=yield t.oldCollection.storageInstance.getAttachmentData(i,n,o.digest),l=yield t.oldCollection.database.hashFunction(s);r[n]={length:o.length,type:o.type,data:s,digest:l}}))),t.docData._attachments=r}})}function VS(t){return Pn}var Jy={name:"attachments",rxdb:!0,prototypes:{RxDocument:t=>{t.putAttachment=FS,t.getAttachment=jS,t.allAttachments=US,Object.defineProperty(t,"allAttachments$",{get:function(){return this.$.pipe(ut(r=>Object.entries(r.toJSON(!0)._attachments)),ut(r=>r.map(([n,o])=>Al(n,o,this))))}})}},overwritable:{},hooks:{preMigrateDocument:{after:zS},postMigrateDocument:{after:VS}}};var eb=["pre","post"],rb=["insert","save","remove","create"],tb=!1,Qa=function(){function t(r,n,o,i,s={},l={},d={},p={},m={},y=Ff,S={},D=Gf){this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this.awaitBeforeReads=new Set,this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=My(),this.$={},this.checkpoint$={},this._changeEventBuffer={},this.onDestroy=[],this.destroyed=!1,this.onRemove=[],this.database=r,this.name=n,this.schema=o,this.internalStorageInstance=i,this.instanceCreationOptions=s,this.migrationStrategies=l,this.methods=d,this.attachments=p,this.options=m,this.cacheReplacementPolicy=y,this.statics=S,this.conflictHandler=D,qS(this.asRxCollection)}var e=t.prototype;return e.prepare=function(){return U(this,null,function*(){this.storageInstance=Cl(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new Vy(this.storageInstance,this.schema.primaryPath,(d,p)=>Hf(this,d,p),d=>this._runHooks("post","save",d));var n=this.database.eventBulks$.pipe(bt(d=>d.collectionName===this.name));this.$=n.pipe(Wt(d=>d.events)),this.checkpoint$=n.pipe(ut(d=>d.checkpoint)),this._changeEventBuffer=Qy(this.asRxCollection);var o;this._docCache=new Ly(this.schema.primaryPath,this.database.eventBulks$.pipe(bt(d=>d.collectionName===this.name&&!d.events[0].isLocal),ut(d=>d.events)),d=>(o||(o=Yy(this.asRxCollection)),Xy(this.asRxCollection,o,d)));var i=this.database.internalStore.changeStream().pipe(bt(d=>{var p=this.name+"-"+this.schema.version,m=d.events.find(y=>y.documentData.context==="collection"&&y.documentData.key===p&&y.operation==="DELETE");return!!m})).subscribe(()=>U(this,null,function*(){yield this.destroy(),yield Promise.all(this.onRemove.map(d=>d()))}));this._subs.push(i);var s=yield this.database.storageToken,l=this.storageInstance.changeStream().subscribe(d=>{for(var p=new Array(d.events.length),m=d.events,y=this.name,S=Tt.deepFreezeWhenDevMode,D=0;D<m.length;D++){var P=m[D];p[D]={documentId:P.documentId,collectionName:y,isLocal:!1,operation:P.operation,documentData:S(P.documentData),previousDocumentData:S(P.previousDocumentData)}}var j={id:d.id,internal:!1,collectionName:this.name,storageToken:s,events:p,databaseToken:this.database.token,checkpoint:d.checkpoint,context:d.context,endTime:d.endTime,startTime:d.startTime};this.database.$emit(j)});return this._subs.push(l),this._subs.push(this.storageInstance.conflictResultionTasks().subscribe(d=>{this.conflictHandler(d.input,d.context).then(p=>{this.storageInstance.resolveConflictResultionTask({id:d.id,output:p})})})),Pn})},e.cleanup=function(n){throw Ye(this),Ot("cleanup")},e.migrationNeeded=function(){throw Ot("migration-schema")},e.getMigrationState=function(){throw Ot("migration-schema")},e.startMigration=function(n=10){return Ye(this),this.getMigrationState().startMigration(n)},e.migratePromise=function(n=10){return this.getMigrationState().migratePromise(n)},e.insert=function(n){return U(this,null,function*(){Ye(this);var o=yield this.bulkInsert([n]),i=o.error[0];Ai(this,n[this.schema.primaryPath],n,i);var s=Et(o.success[0]);return s})},e.bulkInsert=function(n){return U(this,null,function*(){if(Ye(this),n.length===0)return{success:[],error:[]};var o=this.schema.primaryPath,i=new Set,s;if(this.hasHooks("pre","insert"))s=yield Promise.all(n.map(G=>{var J=Ga(this.schema,G);return this._runHooks("pre","insert",J).then(()=>(i.add(J[o]),{document:J}))}));else{s=new Array(n.length);for(var l=this.schema,d=0;d<n.length;d++){var p=n[d],m=Ga(l,p);i.add(m[o]),s[d]={document:m}}}if(i.size!==n.length)throw L("COL22",{collection:this.name,args:{documents:n}});var y=yield this.storageInstance.bulkWrite(s,"rx-collection-bulk-insert"),S,D=this,P={get success(){if(!S){var G=lr(D.schema.primaryPath,s,y);S=wl(D._docCache,G)}return S},error:y.error};if(this.hasHooks("post","insert")){var j=new Map;s.forEach(G=>{var J=G.document;j.set(J[o],J)}),yield Promise.all(P.success.map(G=>this._runHooks("post","insert",j.get(G.primary),G)))}return P})},e.bulkRemove=function(n){return U(this,null,function*(){Ye(this);var o=this.schema.primaryPath;if(n.length===0)return{success:[],error:[]};var i=yield this.findByIds(n).exec(),s=[],l=new Map;Array.from(i.values()).forEach(D=>{var P=D.toMutableJSON(!0);s.push(P),l.set(D.primary,P)}),yield Promise.all(s.map(D=>{var P=D[this.schema.primaryPath];return this._runHooks("pre","remove",D,i.get(P))}));var d=s.map(D=>{var P=kt(D);return P._deleted=!0,{previous:D,document:P}}),p=yield this.storageInstance.bulkWrite(d,"rx-collection-bulk-remove"),m=lr(this.schema.primaryPath,d,p),y=m.map(D=>D[o]);yield Promise.all(y.map(D=>this._runHooks("post","remove",l.get(D),i.get(D))));var S=y.map(D=>Ln(i,D));return{success:S,error:p.error}})},e.bulkUpsert=function(n){return U(this,null,function*(){Ye(this);var o=[],i=new Map;n.forEach(p=>{var m=Ga(this.schema,p),y=m[this.schema.primaryPath];if(!y)throw L("COL3",{primaryPath:this.schema.primaryPath,data:m,schema:this.schema.jsonSchema});i.set(y,m),o.push(m)});var s=yield this.bulkInsert(o),l=s.success.slice(0),d=[];return yield Promise.all(s.error.map(p=>U(this,null,function*(){if(p.status!==409)d.push(p);else{var m=p.documentId,y=Ln(i,m),S=Et(p.documentInDb),D=this._docCache.getCachedRxDocuments([S])[0],P=yield D.incrementalModify(()=>y);l.push(P)}}))),{error:d,success:l}})},e.upsert=function(n){return U(this,null,function*(){Ye(this);var o=yield this.bulkUpsert([n]);return Ai(this.asRxCollection,n[this.schema.primaryPath],n,o.error[0]),o.success[0]})},e.incrementalUpsert=function(n){Ye(this);var o=Ga(this.schema,n),i=o[this.schema.primaryPath];if(!i)throw L("COL4",{data:n});var s=this._incrementalUpsertQueues.get(i);return s||(s=Pn),s=s.then(()=>WS(this,i,o)).then(l=>l.inserted?l.doc:HS(l.doc,o)),this._incrementalUpsertQueues.set(i,s),s},e.find=function(n){if(Ye(this),typeof n=="string")throw L("COL5",{queryObj:n});n||(n=Wa());var o=ki("find",n,this);return o},e.findOne=function(n){if(Ye(this),typeof n=="number"||Array.isArray(n))throw ue("COL6",{queryObj:n});var o;if(typeof n=="string")o=ki("findOne",{selector:{[this.schema.primaryPath]:n},limit:1},this);else{if(n||(n=Wa()),n.limit)throw L("QU6");n=kt(n),n.limit=1,o=ki("findOne",n,this)}return o},e.count=function(n){Ye(this),n||(n=Wa());var o=ki("count",n,this);return o},e.findByIds=function(n){Ye(this);var o={selector:{[this.schema.primaryPath]:{$in:n.slice(0)}}},i=ki("findByIds",o,this);return i},e.exportJSON=function(){throw Ot("json-dump")},e.importJSON=function(n){throw Ot("json-dump")},e.insertCRDT=function(n){throw Ot("crdt")},e.addPipeline=function(n){throw Ot("pipeline")},e.addHook=function(n,o,i,s=!1){if(typeof i!="function")throw ue("COL7",{key:o,when:n});if(!eb.includes(n))throw ue("COL8",{key:o,when:n});if(!rb.includes(o))throw L("COL9",{key:o});if(n==="post"&&o==="create"&&s===!0)throw L("COL10",{when:n,key:o,parallel:s});var l=i.bind(this),d=s?"parallel":"series";this.hooks[o]=this.hooks[o]||{},this.hooks[o][n]=this.hooks[o][n]||{series:[],parallel:[]},this.hooks[o][n][d].push(l)},e.getHooks=function(n,o){return!this.hooks[o]||!this.hooks[o][n]?{series:[],parallel:[]}:this.hooks[o][n]},e.hasHooks=function(n,o){if(!this.hooks[o]||!this.hooks[o][n])return!1;var i=this.getHooks(n,o);return i?i.series.length>0||i.parallel.length>0:!1},e._runHooks=function(n,o,i,s){var l=this.getHooks(n,o);if(!l)return Pn;var d=l.series.map(p=>()=>p(i,s));return ov(d).then(()=>Promise.all(l.parallel.map(p=>p(i,s))))},e._runHooksSync=function(n,o,i,s){if(this.hasHooks(n,o)){var l=this.getHooks(n,o);l&&l.series.forEach(d=>d(i,s))}},e.promiseWait=function(n){var o=new Promise(i=>{var s=setTimeout(()=>{this.timeouts.delete(s),i()},n);this.timeouts.add(s)});return o},e.destroy=function(){return U(this,null,function*(){return this.destroyed?$r:(yield Promise.all(this.onDestroy.map(n=>n())),this.destroyed=!0,Array.from(this.timeouts).forEach(n=>clearTimeout(n)),this._changeEventBuffer&&this._changeEventBuffer.destroy(),this.database.requestIdlePromise().then(()=>this.storageInstance.close()).then(()=>(this._subs.forEach(n=>n.unsubscribe()),delete this.database.collections[this.name],Fn("postDestroyRxCollection",this).then(()=>!0))))})},e.remove=function(){return U(this,null,function*(){yield this.destroy(),yield Promise.all(this.onRemove.map(n=>n())),yield Dl(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.password,this.database.hashFunction)})},Ae(t,[{key:"insert$",get:function(){return this.$.pipe(bt(r=>r.operation==="INSERT"))}},{key:"update$",get:function(){return this.$.pipe(bt(r=>r.operation==="UPDATE"))}},{key:"remove$",get:function(){return this.$.pipe(bt(r=>r.operation==="DELETE"))}},{key:"asRxCollection",get:function(){return this}}])}();function qS(t){if(!tb){tb=!0;var e=Object.getPrototypeOf(t);rb.forEach(r=>{eb.map(n=>{var o=n+Tc(r);e[o]=function(i,s){return this.addHook(n,r,i,s)}})})}}function HS(t,e){return t.incrementalModify(r=>e)}function WS(t,e,r){var n=t._docCache.getLatestDocumentDataIfExists(e);return n?Promise.resolve({doc:t._docCache.getCachedRxDocuments([n])[0],inserted:!1}):t.findOne(e).exec().then(o=>o?{doc:o,inserted:!1}:t.insert(r).then(i=>({doc:i,inserted:!0})))}function nb({database:t,name:e,schema:r,instanceCreationOptions:n={},migrationStrategies:o={},autoMigrate:i=!0,statics:s={},methods:l={},attachments:d={},options:p={},localDocuments:m=!1,cacheReplacementPolicy:y=Ff,conflictHandler:S=Gf}){var D={databaseInstanceToken:t.token,databaseName:t.name,collectionName:e,schema:r.jsonSchema,options:n,multiInstance:t.multiInstance,password:t.password,devMode:Tt.isDevMode()};return te("preCreateRxStorageInstance",D),Gy(t,D).then(P=>{var j=new Qa(t,e,r,P,n,o,l,d,p,y,s,S);return j.prepare().then(()=>{Object.entries(s).forEach(([J,rt])=>{Object.defineProperty(j,J,{get:()=>rt.bind(j)})});var G=Pn;return i&&j.schema.version!==0&&(G=j.migratePromise()),G}).then(()=>(te("createRxCollection",{collection:j,creator:{name:e,schema:r,storageInstance:P,instanceCreationOptions:n,migrationStrategies:o,methods:l,attachments:d,options:p,cacheReplacementPolicy:y,localDocuments:m,statics:s}}),j)).catch(G=>P.close().then(()=>Promise.reject(G)))})}var Xf=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this._parallels=e||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};Xf.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,Yf(this)},wrapCall:function(e){var r=this;this.lock();var n;try{n=e()}catch(o){throw this.unlock(),o}return!n.then||typeof n.then!="function"?(this.unlock(),n):n.then(function(o){return r.unlock(),o}).catch(function(o){throw r.unlock(),o})},requestIdlePromise:function(e){var r=this;e=e||{};var n,o=new Promise(function(l){return n=l}),i=function(){Qf(r,o),n()};if(o._manRes=i,e.timeout){var s=setTimeout(function(){o._manRes()},e.timeout);o._timeoutObj=s}return this._iC.add(o),Yf(this),o},cancelIdlePromise:function(e){Qf(this,e)},requestIdleCallback:function(e,r){var n=this._lHN++,o=this.requestIdlePromise(r);return this._hPM.set(n,o),this._pHM.set(o,n),o.then(function(){return e()}),n},cancelIdleCallback:function(e){var r=this._hPM.get(e);this.cancelIdlePromise(r)},clear:function(){var e=this;this._iC.forEach(function(r){return Qf(e,r)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}};function KS(t){if(t._iC.size!==0){var e=t._iC.values(),r=e.next().value;r._manRes(),setTimeout(function(){return Yf(t)},0)}}function Qf(t,e){if(e){if(e._timeoutObj&&clearTimeout(e._timeoutObj),t._pHM.has(e)){var r=t._pHM.get(e);t._hPM.delete(r),t._pHM.delete(e)}t._iC.delete(e)}}function Yf(t){t._tryIR||t._iC.size===0||(t._tryIR=!0,setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}KS(t),t._tryIR=!1},0)},0))}var qn=class{ttl;map=new Map;_to=!1;constructor(e){this.ttl=e}has(e){return this.map.has(e)}add(e){this.map.set(e,ob()),this._to||(this._to=!0,setTimeout(()=>{this._to=!1,GS(this)},0))}clear(){this.map.clear()}};function GS(t){let e=ob()-t.ttl,r=t.map[Symbol.iterator]();for(;;){let n=r.next().value;if(!n)return;let o=n[0];if(n[1]<e)t.map.delete(o);else return}}function ob(){return Date.now()}var Il=new Set,ib=0,Ya=function(){function t(r,n,o,i,s,l,d=!1,p={},m,y,S,D,P){this.idleQueue=new Xf,this.rxdbVersion=Oo,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onDestroy=[],this.destroyed=!1,this.collections={},this.states={},this.eventBulks$=new at,this.observable$=this.eventBulks$.pipe(Wt(j=>j.events)),this.storageToken=$r,this.storageTokenDocument=$r,this.emittedEventBulkIds=new qn(60*1e3),this.name=r,this.token=n,this.storage=o,this.instanceCreationOptions=i,this.password=s,this.multiInstance=l,this.eventReduce=d,this.options=p,this.internalStore=m,this.hashFunction=y,this.cleanupPolicy=S,this.allowSlowCount=D,this.reactivity=P,ib++,this.name!=="pseudoInstance"&&(this.internalStore=Cl(this.asRxDatabase,m,Rl),this.storageTokenDocument=Ky(this.asRxDatabase).catch(j=>this.startupErrors.push(j)),this.storageToken=this.storageTokenDocument.then(j=>j.data.token).catch(j=>this.startupErrors.push(j)))}var e=t.prototype;return e.getReactivityFactory=function(){if(!this.reactivity)throw L("DB14",{database:this.name});return this.reactivity},e.$emit=function(n){this.emittedEventBulkIds.has(n.id)||(this.emittedEventBulkIds.add(n.id),this.eventBulks$.next(n))},e.removeCollectionDoc=function(n,o){return U(this,null,function*(){var i=yield Vf(this.internalStore,Ol(Kf(n,o),Ii));if(!i)throw L("SNH",{name:n,schema:o});var s=Io(i);s._deleted=!0,yield this.internalStore.bulkWrite([{document:s,previous:i}],"rx-database-remove-collection")})},e.addCollections=function(n){return U(this,null,function*(){var o={},i={},s=[],l={};yield Promise.all(Object.entries(n).map(S=>U(this,[S],function*([m,y]){var D=m,P=y.schema;o[D]=P;var j=vv(P,this.hashFunction);if(i[D]=j,this.collections[m])throw L("DB3",{name:m});var G=Kf(m,P),J={id:Ol(G,Ii),key:G,context:Ii,data:{name:D,schemaHash:yield j.hash,schema:j.jsonSchema,version:j.version,connectedStorages:[]},_deleted:!1,_meta:Tn(),_rev:nn(),_attachments:{}};s.push({document:J});var rt=Object.assign({},y,{name:D,schema:j,database:this}),tt=kt(y);tt.database=this,tt.name=m,te("preCreateRxCollection",tt),rt.conflictHandler=tt.conflictHandler,l[D]=rt})));var d=yield this.internalStore.bulkWrite(s,"rx-database-add-collection");yield XS(this),yield Promise.all(d.error.map(m=>U(this,null,function*(){if(m.status!==409)throw L("DB12",{database:this.name,writeError:m});var y=Et(m.documentInDb),S=y.data.name,D=i[S];if(y.data.schemaHash!==(yield D.hash))throw L("DB6",{database:this.name,collection:S,previousSchemaHash:y.data.schemaHash,schemaHash:yield D.hash,previousSchema:y.data.schema,schema:Et(o[S])})})));var p={};return yield Promise.all(Object.keys(n).map(m=>U(this,null,function*(){var y=l[m],S=yield nb(y);p[m]=S,this.collections[m]=S,this[m]||Object.defineProperty(this,m,{get:()=>this.collections[m]})}))),p})},e.lockedRun=function(n){return this.idleQueue.wrapCall(n)},e.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},e.exportJSON=function(n){throw Ot("json-dump")},e.addState=function(n){throw Ot("state")},e.importJSON=function(n){throw Ot("json-dump")},e.backup=function(n){throw Ot("backup")},e.leaderElector=function(){throw Ot("leader-election")},e.isLeader=function(){throw Ot("leader-election")},e.waitForLeadership=function(){throw Ot("leader-election")},e.migrationStates=function(){throw Ot("migration-schema")},e.destroy=function(){return U(this,null,function*(){return this.destroyed?$r:(this.destroyed=!0,yield Fn("preDestroyRxDatabase",this),this.eventBulks$.complete(),ib--,this._subs.map(n=>n.unsubscribe()),this.name==="pseudoInstance"?$r:this.requestIdlePromise().then(()=>Promise.all(this.onDestroy.map(n=>n()))).then(()=>Promise.all(Object.keys(this.collections).map(n=>this.collections[n]).map(n=>n.destroy()))).then(()=>this.internalStore.close()).then(()=>Il.delete(this.storage.name+"|"+this.name)).then(()=>!0))})},e.remove=function(){return this.destroy().then(()=>YS(this.name,this.storage,this.password))},Ae(t,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}])}();function QS(t,e){var r=e.name+"|"+t;if(Il.has(r))throw L("DB8",{name:t,storage:e.name,link:"https://rxdb.info/rx-database.html#ignoreduplicate"})}function ab(t,e,r,n,o,i){return U(this,null,function*(){var s=yield e.createStorageInstance({databaseInstanceToken:t,databaseName:r,collectionName:Fy,schema:Rl,options:n,multiInstance:o,password:i,devMode:Tt.isDevMode()});return s})}function sb({storage:t,instanceCreationOptions:e,name:r,password:n,multiInstance:o=!0,eventReduce:i=!0,ignoreDuplicate:s=!1,options:l={},cleanupPolicy:d,allowSlowCount:p=!1,localDocuments:m=!1,hashFunction:y=yi,reactivity:S}){te("preCreateRxDatabase",{storage:t,instanceCreationOptions:e,name:r,password:n,multiInstance:o,eventReduce:i,ignoreDuplicate:s,options:l,localDocuments:m}),s||QS(r,t),Il.add(t.name+"|"+r);var D=Ro(10);return ab(D,t,r,e,o,n).catch(P=>{throw Il.delete(t.name+"|"+r),P}).then(P=>{var j=new Ya(r,D,t,e,n,o,i,l,P,y,d,p,S);return Fn("createRxDatabase",{database:j,creator:{storage:t,instanceCreationOptions:e,name:r,password:n,multiInstance:o,eventReduce:i,ignoreDuplicate:s,options:l,localDocuments:m}}).then(()=>j)})}function YS(t,e,r){return U(this,null,function*(){var n=Ro(10),o=yield ab(n,e,t,{},!1,r),i=yield El(o),s=new Set;i.forEach(d=>s.add(d.data.name));var l=Array.from(s);return yield Promise.all(l.map(d=>Dl(e,o,n,t,d,r))),yield Fn("postRemoveRxDatabase",{databaseName:t,storage:e}),yield o.remove(),l})}function XS(t){return U(this,null,function*(){if(yield t.storageToken,t.startupErrors[0])throw t.startupErrors[0]})}var ZS={RxSchema:rf.prototype,RxDocument:Vn,RxQuery:Uf.prototype,RxCollection:Qa.prototype,RxDatabase:Ya.prototype},Zf=new Set,cb=new Set;function Tl(t){if(te("preAddRxPlugin",{plugin:t,plugins:Zf}),!Zf.has(t)){{if(cb.has(t.name))throw L("PL3",{name:t.name,plugin:t});Zf.add(t),cb.add(t.name)}if(!t.rxdb)throw ue("PL1",{plugin:t});t.init&&t.init(),t.prototypes&&Object.entries(t.prototypes).forEach(([e,r])=>r(ZS[e])),t.overwritable&&Object.assign(Tt,t.overwritable),t.hooks&&Object.entries(t.hooks).forEach(([e,r])=>{r.after&&_i[e].push(r.after),r.before&&_i[e].unshift(r.before)})}}function lb(t){return t&&typeof t.then=="function"}var JS=Promise.resolve(!1),e5=Promise.resolve(!0),zr=Promise.resolve();function Ml(t,e){return t||(t=0),new Promise(function(r){return setTimeout(function(){return r(e)},t)})}function ub(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function Xa(){return Math.random().toString(36).substring(2)}var Jf=0;function cn(){var t=Date.now()*1e3;return t<=Jf&&(t=Jf+1),Jf=t,t}var tR=cn,eR="native";function rR(t){var e={time:cn(),messagesCallback:null,bc:new BroadcastChannel(t),subFns:[]};return e.bc.onmessage=function(r){e.messagesCallback&&e.messagesCallback(r.data)},e}function nR(t){t.bc.close(),t.subFns=[]}function oR(t,e){try{return t.bc.postMessage(e,!1),zr}catch(r){return Promise.reject(r)}}function iR(t,e){t.messagesCallback=e}function aR(){if(typeof globalThis<"u"&&globalThis.Deno&&globalThis.Deno.args)return!0;if((typeof window<"u"||typeof self<"u")&&typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function sR(){return 150}var db={create:rR,close:nR,onMessage:iR,postMessage:oR,canBeUsed:aR,type:eR,averageResponseTime:sR,microSeconds:tR};function Ti(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=JSON.parse(JSON.stringify(t));return typeof e.webWorkerSupport>"u"&&(e.webWorkerSupport=!0),e.idb||(e.idb={}),e.idb.ttl||(e.idb.ttl=1e3*45),e.idb.fallbackInterval||(e.idb.fallbackInterval=150),t.idb&&typeof t.idb.onclose=="function"&&(e.idb.onclose=t.idb.onclose),e.localstorage||(e.localstorage={}),e.localstorage.removeTimeout||(e.localstorage.removeTimeout=1e3*60),t.methods&&(e.methods=t.methods),e.node||(e.node={}),e.node.ttl||(e.node.ttl=1e3*60*2),e.node.maxParallelWrites||(e.node.maxParallelWrites=2048),typeof e.node.useFastPath>"u"&&(e.node.useFastPath=!0),e}var cR=cn,lR="pubkey.broadcast-channel-0-",ln="messages",Pl={durability:"relaxed"},uR="idb";function fb(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function th(t){t.commit&&t.commit()}function dR(t){var e=fb(),r=lR+t,n=e.open(r);return n.onupgradeneeded=function(o){var i=o.target.result;i.createObjectStore(ln,{keyPath:"id",autoIncrement:!0})},new Promise(function(o,i){n.onerror=function(s){return i(s)},n.onsuccess=function(){o(n.result)}})}function fR(t,e,r){var n=Date.now(),o={uuid:e,time:n,data:r},i=t.transaction([ln],"readwrite",Pl);return new Promise(function(s,l){i.oncomplete=function(){return s()},i.onerror=function(p){return l(p)};var d=i.objectStore(ln);d.add(o),th(i)})}function hR(t,e){var r=t.transaction(ln,"readonly",Pl),n=r.objectStore(ln),o=[],i=IDBKeyRange.bound(e+1,1/0);if(n.getAll){var s=n.getAll(i);return new Promise(function(d,p){s.onerror=function(m){return p(m)},s.onsuccess=function(m){d(m.target.result)}})}function l(){try{return i=IDBKeyRange.bound(e+1,1/0),n.openCursor(i)}catch{return n.openCursor()}}return new Promise(function(d,p){var m=l();m.onerror=function(y){return p(y)},m.onsuccess=function(y){var S=y.target.result;S?S.value.id<e+1?S.continue(e+1):(o.push(S.value),S.continue()):(th(r),d(o))}})}function pR(t,e){if(t.closed)return Promise.resolve([]);var r=t.db.transaction(ln,"readwrite",Pl),n=r.objectStore(ln);return Promise.all(e.map(function(o){var i=n.delete(o);return new Promise(function(s){i.onsuccess=function(){return s()}})}))}function mR(t,e){var r=Date.now()-e,n=t.transaction(ln,"readonly",Pl),o=n.objectStore(ln),i=[];return new Promise(function(s){o.openCursor().onsuccess=function(l){var d=l.target.result;if(d){var p=d.value;p.time<r?(i.push(p),d.continue()):(th(n),s(i))}else s(i)}})}function gR(t){return mR(t.db,t.options.idb.ttl).then(function(e){return pR(t,e.map(function(r){return r.id}))})}function vR(t,e){return e=Ti(e),dR(t).then(function(r){var n={closed:!1,lastCursorId:0,channelName:t,options:e,uuid:Xa(),eMIs:new qn(e.idb.ttl*2),writeBlockPromise:zr,messagesCallback:null,readQueuePromises:[],db:r};return r.onclose=function(){n.closed=!0,e.idb.onclose&&e.idb.onclose()},hb(n),n})}function hb(t){t.closed||pb(t).then(function(){return Ml(t.options.idb.fallbackInterval)}).then(function(){return hb(t)})}function yR(t,e){return!(t.uuid===e.uuid||e.eMIs.has(t.id)||t.data.time<e.messagesCallbackTime)}function pb(t){return t.closed?zr:t.messagesCallback?hR(t.db,t.lastCursorId).then(function(e){var r=e.filter(function(n){return!!n}).map(function(n){return n.id>t.lastCursorId&&(t.lastCursorId=n.id),n}).filter(function(n){return yR(n,t)}).sort(function(n,o){return n.time-o.time});return r.forEach(function(n){t.messagesCallback&&(t.eMIs.add(n.id),t.messagesCallback(n.data))}),zr}):zr}function bR(t){t.closed=!0,t.db.close()}function _R(t,e){return t.writeBlockPromise=t.writeBlockPromise.then(function(){return fR(t.db,t.uuid,e)}).then(function(){ub(0,10)===0&&gR(t)}),t.writeBlockPromise}function xR(t,e,r){t.messagesCallbackTime=r,t.messagesCallback=e,pb(t)}function wR(){return!!fb()}function CR(t){return t.idb.fallbackInterval*2}var mb={create:vR,close:bR,onMessage:xR,postMessage:_R,canBeUsed:wR,type:uR,averageResponseTime:CR,microSeconds:cR};var SR=cn,RR="pubkey.broadcastChannel-",OR="localstorage";function gb(){var t;if(typeof window>"u")return null;try{t=window.localStorage,t=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return t}function vb(t){return RR+t}function ER(t,e){return new Promise(function(r){Ml().then(function(){var n=vb(t.channelName),o={token:Xa(),time:Date.now(),data:e,uuid:t.uuid},i=JSON.stringify(o);gb().setItem(n,i);var s=document.createEvent("Event");s.initEvent("storage",!0,!0),s.key=n,s.newValue=i,window.dispatchEvent(s),r()})})}function DR(t,e){var r=vb(t),n=function(i){i.key===r&&e(JSON.parse(i.newValue))};return window.addEventListener("storage",n),n}function kR(t){window.removeEventListener("storage",t)}function AR(t,e){if(e=Ti(e),!yb())throw new Error("BroadcastChannel: localstorage cannot be used");var r=Xa(),n=new qn(e.localstorage.removeTimeout),o={channelName:t,uuid:r,eMIs:n};return o.listener=DR(t,function(i){o.messagesCallback&&i.uuid!==r&&(!i.token||n.has(i.token)||i.data.time&&i.data.time<o.messagesCallbackTime||(n.add(i.token),o.messagesCallback(i.data)))}),o}function IR(t){kR(t.listener)}function TR(t,e,r){t.messagesCallbackTime=r,t.messagesCallback=e}function yb(){var t=gb();if(!t)return!1;try{var e="__broadcastchannel_check";t.setItem(e,"works"),t.removeItem(e)}catch{return!1}return!0}function MR(){var t=120,e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?t*2:t}var bb={create:AR,close:IR,onMessage:TR,postMessage:ER,canBeUsed:yb,type:OR,averageResponseTime:MR,microSeconds:SR};var _b=cn,PR="simulate",eh=new Set;function NR(t){var e={time:_b(),name:t,messagesCallback:null};return eh.add(e),e}function LR(t){eh.delete(t)}var xb=5;function $R(t,e){return new Promise(function(r){return setTimeout(function(){var n=Array.from(eh);n.forEach(function(o){o.name===t.name&&o!==t&&o.messagesCallback&&o.time<e.time&&o.messagesCallback(e)}),r()},xb)})}function BR(t,e){t.messagesCallback=e}function FR(){return!0}function jR(){return xb}var wb={create:NR,close:LR,onMessage:BR,postMessage:$R,canBeUsed:FR,type:PR,averageResponseTime:jR,microSeconds:_b};var Cb=[db,mb,bb];function Sb(t){var e=[].concat(t.methods,Cb).filter(Boolean);if(t.type){if(t.type==="simulate")return wb;var r=e.find(function(o){return o.type===t.type});if(r)return r;throw new Error("method-type "+t.type+" not found")}t.webWorkerSupport||(e=e.filter(function(o){return o.type!=="idb"}));var n=e.find(function(o){return o.canBeUsed()});if(n)return n;throw new Error("No usable method found in "+JSON.stringify(Cb.map(function(o){return o.type})))}var rh=new Set,UR=0,Za=function(e,r){this.id=UR++,rh.add(this),this.name=e,Rb&&(r=Rb),this.options=Ti(r),this.method=Sb(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,zR(this)};Za._pubkey=!0;var Rb;Za.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(e));return Ob(this,"message",e)},postInternal:function(e){return Ob(this,"internal",e)},set onmessage(t){var e=this.method.microSeconds(),r={time:e,fn:t};Db(this,"message",this._onML),t&&typeof t=="function"?(this._onML=r,Eb(this,"message",r)):this._onML=null},addEventListener:function(e,r){var n=this.method.microSeconds(),o={time:n,fn:r};Eb(this,e,o)},removeEventListener:function(e,r){var n=this._addEL[e].find(function(o){return o.fn===r});Db(this,e,n)},close:function(){var e=this;if(!this.closed){rh.delete(this),this.closed=!0;var r=this._prepP?this._prepP:zr;return this._onML=null,this._addEL.message=[],r.then(function(){return Promise.all(Array.from(e._uMP))}).then(function(){return Promise.all(e._befC.map(function(n){return n()}))}).then(function(){return e.method.close(e._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function Ob(t,e,r){var n=t.method.microSeconds(),o={time:n,type:e,data:r},i=t._prepP?t._prepP:zr;return i.then(function(){var s=t.method.postMessage(t._state,o);return t._uMP.add(s),s.catch().then(function(){return t._uMP.delete(s)}),s})}function zR(t){var e=t.method.create(t.name,t.options);lb(e)?(t._prepP=e,e.then(function(r){t._state=r})):t._state=e}function kb(t){return t._addEL.message.length>0||t._addEL.internal.length>0}function Eb(t,e,r){t._addEL[e].push(r),VR(t)}function Db(t,e,r){t._addEL[e]=t._addEL[e].filter(function(n){return n!==r}),qR(t)}function VR(t){if(!t._iL&&kb(t)){var e=function(o){t._addEL[o.type].forEach(function(i){o.time>=i.time&&i.fn(o.data)})},r=t.method.microSeconds();t._prepP?t._prepP.then(function(){t._iL=!0,t.method.onMessage(t._state,e,r)}):(t._iL=!0,t.method.onMessage(t._state,e,r))}}function qR(t){if(t._iL&&!kb(t)){t._iL=!1;var e=t.method.microSeconds();t.method.onMessage(t._state,null,e)}}var Nl=new Map;function HR(t,e,r,n){var o=Nl.get(e);return o||(o={bc:new Za(["RxDB:",t,r].join("|")),refs:new Set},Nl.set(e,o)),o.refs.add(n),o.bc}function Ab(t,e){var r=Nl.get(t);if(r&&(r.refs.delete(e),r.refs.size===0))return Nl.delete(t),r.bc.close()}function Ib(t,e,r,n){if(e.multiInstance){var o=n||HR(t,e.databaseInstanceToken,r.databaseName,r),i=new at,s=S=>{S.storageName===t&&S.databaseName===e.databaseName&&S.collectionName===e.collectionName&&S.version===e.schema.version&&i.next(S.eventBulk)};o.addEventListener("message",s);var l=r.changeStream(),d=!1,p=l.subscribe(S=>{d||o.postMessage({storageName:t,databaseName:e.databaseName,collectionName:e.collectionName,version:e.schema.version,eventBulk:S})});r.changeStream=function(){return i.asObservable().pipe(Cp(l))};var m=r.close.bind(r);r.close=function(){return U(this,null,function*(){return d=!0,p.unsubscribe(),o.removeEventListener("message",s),n||(yield Ab(e.databaseInstanceToken,r)),m()})};var y=r.remove.bind(r);r.remove=function(){return U(this,null,function*(){return d=!0,p.unsubscribe(),o.removeEventListener("message",s),n||(yield Ab(e.databaseInstanceToken,r)),y()})}}}var nh={UT1:"given name is no string or empty",UT2:`collection- and database-names must match the regex to be compatible with couchdb databases.
    See https://neighbourhood.ie/blog/2020/10/13/everything-you-need-to-know-about-couchdb-database-names/
    info: if your database-name specifies a folder, the name must contain the slash-char '/' or '\\'`,UT3:"replication-direction must either be push or pull or both. But not none",UT4:"given leveldown is no valid adapter",UT5:"keyCompression is set to true in the schema but no key-compression handler is used in the storage",UT6:"schema contains encrypted fields but no encryption handler is used in the storage",UT7:"attachments.compression is enabled but no attachment-compression plugin is used",PL1:"Given plugin is not RxDB plugin.",PL3:"A plugin with the same name was already added but it was not the exact same JavaScript object",P2:"bulkWrite() cannot be called with an empty array",QU1:"RxQuery._execOverDatabase(): op not known",QU4:"RxQuery.regex(): You cannot use .regex() on the primary field",QU5:"RxQuery.sort(): does not work because key is not defined in the schema",QU6:"RxQuery.limit(): cannot be called on .findOne()",QU9:"throwIfMissing can only be used in findOne queries",QU10:"result empty and throwIfMissing: true",QU11:"RxQuery: no valid query params given",QU12:"Given index is not in schema",QU13:"A top level field of the query is not included in the schema",QU14:"Running a count() query in slow mode is now allowed. Either run a count() query with a selector that fully matches an index or set allowSlowCount=true when calling the createRxDatabase",QU15:"For count queries it is not allowed to use skip or limit",QU16:"$regex queries must be defined by a string, not an RegExp instance. This is because RegExp objects cannot be JSON stringified and also they are mutable which would be dangerous",QU17:"Chained queries cannot be used on findByIds() RxQuery instances",QU18:"Malformated query result data. This likely happens because you create a OPFS-storage RxDatabase inside of a worker but did not set the usesRxDatabaseInWorker setting. https://rxdb.info/rx-storage-opfs.html#setting-usesrxdatabaseinworker-when-a-rxdatabase-is-also-used-inside-of-the-worker ",MQ1:"path must be a string or object",MQ2:"Invalid argument",MQ3:"Invalid sort() argument. Must be a string, object, or array",MQ4:"Invalid argument. Expected instanceof mquery or plain object",MQ5:"method must be used after where() when called with these arguments",MQ6:"Can't mix sort syntaxes. Use either array or object | .sort([['field', 1], ['test', -1]]) | .sort({ field: 1, test: -1 })",MQ7:"Invalid sort value",MQ8:"Can't mix sort syntaxes. Use either array or object",DB1:"RxDocument.prepare(): another instance on this adapter has a different password",DB2:"RxDatabase.addCollections(): collection-names cannot start with underscore _",DB3:"RxDatabase.addCollections(): collection already exists. use myDatabase[collectionName] to get it",DB4:"RxDatabase.addCollections(): schema is missing",DB5:"RxDatabase.addCollections(): collection-name not allowed",DB6:"RxDatabase.addCollections(): another instance created this collection with a different schema. Read this https://rxdb.info/questions-answers.html?console=qa#cant-change-the-schema ",DB8:`createRxDatabase(): A RxDatabase with the same name and adapter already exists.
Make sure to use this combination only once or set ignoreDuplicate to true if you do this intentional-
This often happens in react projects with hot reload that reloads the code without reloading the process.`,DB11:"createRxDatabase(): Invalid db-name, folder-paths must not have an ending slash",DB12:"RxDatabase.addCollections(): could not write to internal store",DB13:"createRxDatabase(): Invalid db-name or collection name, name contains the dollar sign",DB14:"no custom reactivity factory added on database creation",COL1:"RxDocument.insert() You cannot insert an existing document",COL2:"RxCollection.insert() fieldName ._id can only be used as primaryKey",COL3:"RxCollection.upsert() does not work without primary",COL4:"RxCollection.incrementalUpsert() does not work without primary",COL5:"RxCollection.find() if you want to search by _id, use .findOne(_id)",COL6:"RxCollection.findOne() needs a queryObject or string",COL7:"hook must be a function",COL8:"hooks-when not known",COL9:"RxCollection.addHook() hook-name not known",COL10:"RxCollection .postCreate-hooks cannot be async",COL11:"migrationStrategies must be an object",COL12:"A migrationStrategy is missing or too much",COL13:"migrationStrategy must be a function",COL14:"given static method-name is not a string",COL15:"static method-names cannot start with underscore _",COL16:"given static method is not a function",COL17:"RxCollection.ORM: statics-name not allowed",COL18:"collection-method not allowed because fieldname is in the schema",COL20:"Storage write error",COL21:"The RxCollection is destroyed or removed already, either from this JavaScript realm or from another, like a browser tab",CONFLICT:"Document update conflict. When changing a document you must work on the previous revision",COL22:".bulkInsert() and .bulkUpsert() cannot be run with multiple documents that have the same primary key",DOC1:"RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed",DOC2:"cannot observe primary path",DOC3:"final fields cannot be observed",DOC4:"RxDocument.get$ cannot observe a non-existed field",DOC5:"RxDocument.populate() cannot populate a non-existed field",DOC6:"RxDocument.populate() cannot populate because path has no ref",DOC7:"RxDocument.populate() ref-collection not in database",DOC8:"RxDocument.set(): primary-key cannot be modified",DOC9:"final fields cannot be modified",DOC10:"RxDocument.set(): cannot set childpath when rootPath not selected",DOC11:"RxDocument.save(): can't save deleted document",DOC13:"RxDocument.remove(): Document is already deleted",DOC14:"RxDocument.destroy() does not exist",DOC15:"query cannot be an array",DOC16:"Since version 8.0.0 RxDocument.set() can only be called on temporary RxDocuments",DOC17:"Since version 8.0.0 RxDocument.save() can only be called on non-temporary documents",DOC18:"Document property for composed primary key is missing",DOC19:"Value of primary key(s) cannot be changed",DOC20:"PrimaryKey missing",DOC21:"PrimaryKey must be equal to PrimaryKey.trim(). It cannot start or end with a whitespace",DOC22:"PrimaryKey must not contain a linebreak",DOC23:'PrimaryKey must not contain a double-quote ["]',DOC24:"Given document data could not be structured cloned. This happens if you pass non-plain-json data into it, like a Date() object or a Function. In vue.js this happens if you use ref() on the document data which transforms it into a Proxy object.",DM1:"migrate() Migration has already run",DM2:"migration of document failed final document does not match final schema",DM3:"migration already running",DM4:"Migration errored",DM5:"Cannot open database state with newer RxDB version. You have to migrate your database state first. See https://rxdb.info/migration-storage.html?console=storage ",AT1:"to use attachments, please define this in your schema",EN1:"password is not valid",EN2:"validatePassword: min-length of password not complied",EN3:"Schema contains encrypted properties but no password is given",EN4:"Password not valid",JD1:"You must create the collections before you can import their data",JD2:"RxCollection.importJSON(): the imported json relies on a different schema",JD3:"RxCollection.importJSON(): json.passwordHash does not match the own",LD1:"RxDocument.allAttachments$ can't use attachments on local documents",LD2:"RxDocument.get(): objPath must be a string",LD3:"RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed",LD4:"cannot observe primary path",LD5:"RxDocument.set() id cannot be modified",LD6:"LocalDocument: Function is not usable on local documents",LD7:"Local document already exists",LD8:"localDocuments not activated. Set localDocuments=true on creation, when you want to store local documents on the RxDatabase or RxCollection.",RC1:"Replication: already added",RC2:"replicateCouchDB() query must be from the same RxCollection",RC4:"RxCouchDBReplicationState.awaitInitialReplication() cannot await initial replication when live: true",RC5:"RxCouchDBReplicationState.awaitInitialReplication() cannot await initial replication if multiInstance because the replication might run on another instance",RC6:"syncFirestore() serverTimestampField MUST NOT be part of the collections schema and MUST NOT be nested.",RC7:"SimplePeer requires to have process.nextTick() polyfilled, see https://rxdb.info/replication-webrtc.html?console=webrtc ",RC_PULL:"RxReplication pull handler threw an error - see .errors for more details",RC_STREAM:"RxReplication pull stream$ threw an error - see .errors for more details",RC_PUSH:"RxReplication push handler threw an error - see .errors for more details",RC_PUSH_NO_AR:"RxReplication push handler did not return an array with the conflicts",RC_WEBRTC_PEER:"RxReplication WebRTC Peer has error",RC_COUCHDB_1:"replicateCouchDB() url must end with a slash like 'https://example.com/mydatabase/'",RC_COUCHDB_2:"replicateCouchDB() did not get valid result with rows.",RC_OUTDATED:"Outdated client, update required. Replication was canceled",RC_UNAUTHORIZED:"Unauthorized client, update the replicationState.headers to set correct auth data",RC_FORBIDDEN:"Client behaves wrong so the replication was canceled. Mostly happens if the client tries to write data that it is not allowed to",SC1:"fieldnames do not match the regex",SC2:"SchemaCheck: name 'item' reserved for array-fields",SC3:"SchemaCheck: fieldname has a ref-array but items-type is not string",SC4:"SchemaCheck: fieldname has a ref but is not type string, [string,null] or array<string>",SC6:"SchemaCheck: primary can only be defined at top-level",SC7:"SchemaCheck: default-values can only be defined at top-level",SC8:"SchemaCheck: first level-fields cannot start with underscore _",SC10:"SchemaCheck: schema defines ._rev, this will be done automatically",SC11:"SchemaCheck: schema needs a number >=0 as version",SC13:"SchemaCheck: primary is always index, do not declare it as index",SC14:"SchemaCheck: primary is always unique, do not declare it as index",SC15:"SchemaCheck: primary cannot be encrypted",SC16:"SchemaCheck: primary must have type: string",SC17:"SchemaCheck: top-level fieldname is not allowed",SC18:"SchemaCheck: indexes must be an array",SC19:"SchemaCheck: indexes must contain strings or arrays of strings",SC20:"SchemaCheck: indexes.array must contain strings",SC21:"SchemaCheck: given index is not defined in schema",SC22:"SchemaCheck: given indexKey is not type:string",SC23:"SchemaCheck: fieldname is not allowed",SC24:"SchemaCheck: required fields must be set via array. See https://spacetelescope.github.io/understanding-json-schema/reference/object.html#required",SC25:"SchemaCheck: compoundIndexes needs to be specified in the indexes field",SC26:"SchemaCheck: indexes needs to be specified at collection schema level",SC27:"SchemaCheck: encrypted fields need to be specified at collection schema level",SC28:"SchemaCheck: encrypted fields is not defined in the schema",SC29:"SchemaCheck: missing object key 'properties'",SC30:"SchemaCheck: primaryKey is required",SC32:"SchemaCheck: primary field must have the type string/number/integer",SC33:"SchemaCheck: used primary key is not a property in the schema",SC34:"Fields of type string that are used in an index, must have set the maxLength attribute in the schema",SC35:"Fields of type number/integer that are used in an index, must have set the multipleOf attribute in the schema",SC36:"A field of this type cannot be used as index",SC37:"Fields of type number that are used in an index, must have set the minimum and maximum attribute in the schema",SC38:"Fields of type boolean that are used in an index, must be required in the schema",SC39:"The primary key must have the maxLength attribute set",SC40:"$ref fields in the schema are not allowed. RxDB cannot resolve related schemas because it would have a negative performance impact.It would have to run http requests on runtime. $ref fields should be resolved during build time.",SC41:"minimum, maximum and maxLength values for indexes must be real numbers, not Infinity or -Infinity",VD1:"Sub-schema not found, does the schemaPath exists in your schema?",VD2:"object does not match schema",S1:"You cannot create collections after calling RxDatabase.server()",GQL1:"GraphQL replication: cannot find sub schema by key",GQL3:"GraphQL replication: pull returns more documents then batchSize",CRDT1:"CRDT operations cannot be used because the crdt options are not set in the schema.",CRDT2:"RxDocument.incrementalModify() cannot be used when CRDTs are activated.",CRDT3:"To use CRDTs you MUST NOT set a conflictHandler because the default CRDT conflict handler must be used",SNH:"This should never happen"};var oh;function Tb(){if(!oh){var t=new Qa,e=Object.getOwnPropertyNames(t),r=Object.getOwnPropertyNames(Object.getPrototypeOf(t));oh=[...e,...r]}return oh}var ih;function Mb(){if(!ih){var t=new Ya("pseudoInstance","memory"),e=Object.getOwnPropertyNames(t),r=Object.getOwnPropertyNames(Object.getPrototypeOf(t));ih=[...e,...r],t.destroy()}return ih}var WR=Sl(Vn),KR=new WR,ah;function Ll(){if(!ah){var t=["deleted","synced"],e=Object.getOwnPropertyNames(KR),r=Object.getOwnPropertyNames(Vn);ah=[...e,...r,...t]}return ah}function GR(t){if(t!=="_deleted"){if(["properties"].includes(t))throw L("SC23",{fieldName:t});var e="^[a-zA-Z](?:[[a-zA-Z0-9_]*]?[a-zA-Z0-9])?$",r=new RegExp(e);if(t!=="_id"&&!t.match(r))throw L("SC1",{regex:e,fieldName:t})}}function QR(t){var e=ve(t.primaryKey);function r(o,i,s){if(typeof o=="string"&&typeof i=="object"&&!Array.isArray(i)&&s.split(".").pop()!=="patternProperties"&&GR(o),Object.prototype.hasOwnProperty.call(i,"item")&&i.type!=="array")throw L("SC2",{fieldName:o});if(Object.prototype.hasOwnProperty.call(i,"required")&&typeof i.required=="boolean")throw L("SC24",{fieldName:o});if(Object.prototype.hasOwnProperty.call(i,"$ref"))throw L("SC40",{fieldName:o});if(Object.prototype.hasOwnProperty.call(i,"ref"))if(Array.isArray(i.type)){if(i.type.length>2||!i.type.includes("string")||!i.type.includes("null"))throw L("SC4",{fieldName:o})}else switch(i.type){case"string":break;case"array":if(!i.items||!i.items.type||i.items.type!=="string")throw L("SC3",{fieldName:o});break;default:throw L("SC4",{fieldName:o})}var l=s.split(".").length>=2;if(l&&i.default)throw L("SC7",{path:s});if(!l){if(o==="_id"&&e!=="_id")throw L("COL2",{fieldName:o});if(o.charAt(0)==="_"){if(o==="_id"||o==="_deleted")return;throw L("SC8",{fieldName:o})}}}function n(o,i){!o||typeof o!="object"||Object.keys(o).forEach(s=>{var l=o[s];!o.properties&&l&&typeof l=="object"&&!Array.isArray(o)&&r(s,l,i);var d=i;s!=="properties"&&(d=d+"."+s),n(l,d)})}return n(t,""),!0}function YR(t){if(!t.primaryKey)throw L("SC30",{schema:t});function e(d){if(!d)throw L("SC33",{schema:t});var p=d.type;if(!p||!["string","number","integer"].includes(p))throw L("SC32",{schema:t,args:{schemaPart:d}})}if(typeof t.primaryKey=="string"){var r=t.primaryKey,n=t.properties[r];e(n)}else{var o=t.primaryKey,i=Le(t,o.key);e(i),o.fields.forEach(d=>{var p=Le(t,d);e(p)})}var s=ve(t.primaryKey),l=t.properties[s];if(l.maxLength){if(!isFinite(l.maxLength))throw L("SC41",{schema:t,args:{primaryPathSchemaPart:l}})}else throw L("SC39",{schema:t,args:{primaryPathSchemaPart:l}})}function Pb(t){for(var e=t.split("."),r="",n=0;n<e.length;n+=1)e[n]!=="[]"?r=r.concat(".properties.".concat(e[n])):r=r.concat(".items");return _r(r)}function Nb(t){if(!t.primaryKey)throw L("SC30",{schema:t});if(!Object.prototype.hasOwnProperty.call(t,"properties"))throw L("SC29",{schema:t});if(t.properties._rev)throw L("SC10",{schema:t});if(!Object.prototype.hasOwnProperty.call(t,"version")||typeof t.version!="number"||t.version<0)throw L("SC11",{version:t.version});if(QR(t),YR(t),Object.keys(t.properties).forEach(e=>{var r=t.properties[e];if(e===t.primaryKey){if(t.indexes&&t.indexes.includes(e))throw L("SC13",{value:r,schema:t});if(r.unique)throw L("SC14",{value:r,schema:t});if(t.encrypted&&t.encrypted.includes(e))throw L("SC15",{value:r,schema:t});if(r.type!=="string")throw L("SC16",{value:r,schema:t})}if(Ll().includes(e))throw L("SC17",{key:e,schema:t})}),t.indexes){if(!Lr(t.indexes))throw L("SC18",{indexes:t.indexes,schema:t});t.indexes.forEach(e=>{if(!(typeof e=="string"||Array.isArray(e)))throw L("SC19",{index:e,schema:t});if(Array.isArray(e)){for(var r=0;r<e.length;r+=1)if(typeof e[r]!="string")throw L("SC20",{index:e,schema:t})}var n=Lr(e)?e:[e];n.forEach(o=>{var i=Le(t,o),s=i.type;switch(s){case"string":var l=i.maxLength;if(!l)throw L("SC34",{index:e,field:o,schema:t});break;case"number":case"integer":var d=i.multipleOf;if(!d)throw L("SC35",{index:e,field:o,schema:t});var p=i.maximum,m=i.minimum;if(typeof p>"u"||typeof m>"u")throw L("SC37",{index:e,field:o,schema:t});if(!isFinite(p)||!isFinite(m))throw L("SC41",{index:e,field:o,schema:t});break;case"boolean":var y="",S=o;if(o.includes(".")){var D=o.split(".");S=D.pop(),y=D.join(".")}var P=y===""?t:Le(t,y);if(!P.required||!P.required.includes(S))throw L("SC38",{index:e,field:o,schema:t});break;default:throw L("SC36",{fieldName:o,type:i.type,schema:t})}})})}Object.keys(Ac(t)).map(e=>{var r=e.split(".");return r.pop(),r.join(".")}).filter(e=>e!=="").filter((e,r,n)=>n.indexOf(e)===r).filter(e=>{var r=Ne(t,e);return r&&!!r.index}).forEach(e=>{throw e=e.replace("properties.",""),e=e.replace(/\.properties\./g,"."),L("SC26",{index:_r(e),schema:t})}),(t.indexes||[]).reduce((e,r)=>(Lr(r)?br(e,r):e.push(r),e),[]).filter((e,r,n)=>n.indexOf(e)===r).map(e=>{var r=Pb(e),n=Ne(t,r);if(!n||typeof n!="object")throw L("SC21",{index:e,schema:t});return{indexPath:e,schemaObj:n}}).filter(e=>e.schemaObj.type!=="string"&&e.schemaObj.type!=="integer"&&e.schemaObj.type!=="number"&&e.schemaObj.type!=="boolean").forEach(e=>{throw L("SC22",{key:e.indexPath,type:e.schemaObj.type,schema:t})}),Object.keys(Ac(t)).map(e=>{var r=e.split(".");return r.pop(),r.join(".")}).filter(e=>e!==""&&e!=="attachments").filter((e,r,n)=>n.indexOf(e)===r).filter(e=>{var r=Ne(t,e);return r&&!!r.encrypted}).forEach(e=>{throw e=e.replace("properties.",""),e=e.replace(/\.properties\./g,"."),L("SC27",{index:_r(e),schema:t})}),t.encrypted&&t.encrypted.forEach(e=>{var r=Pb(e),n=Ne(t,r);if(!n||typeof n!="object")throw L("SC28",{field:e,schema:t})})}function $l(t){t&&Object.entries(t).forEach(([e,r])=>{if(typeof e!="string")throw ue("COL14",{name:e});if(e.startsWith("_"))throw ue("COL15",{name:e});if(typeof r!="function")throw ue("COL16",{name:e,type:typeof e});if(Tb().includes(e)||Ll().includes(e))throw L("COL17",{name:e})})}function Lb(t,e){var r=Object.keys(t.properties);e&&Object.keys(e).filter(n=>r.includes(n)).forEach(n=>{throw L("COL18",{funName:n})})}function $b(t,e){if(typeof e!="object"||Array.isArray(e))throw ue("COL11",{schema:t});var r=gv(t);if(r.length!==Object.keys(e).length)throw L("COL12",{have:Object.keys(e),should:r});return r.map(n=>({v:n,s:e[n+1]})).filter(n=>typeof n.s!="function").forEach(n=>{throw ue("COL13",{version:n.v,type:typeof n,schema:t})}),!0}function Bb(t){if(Mb().includes(t.name))throw L("DB5",{name:t.name});Ub(t.name)}function Fb(t){if(Ub(t.name),t.name.includes("$"))throw L("DB13",{name:t.name});if(Kd(t.name)&&(t.name.endsWith("/")||t.name.endsWith("\\")))throw L("DB11",{name:t.name})}var jb="^[a-z][_$a-z0-9\\-]*$",XR=new RegExp(jb);function Ub(t){if(typeof t!="string"||t.length===0)throw ue("UT1",{name:t});if(Kd(t))return!0;if(!t.match(XR)&&t!==":memory:")throw L("UT2",{regex:jb,givenName:t});return!0}function zb(t){var e=Object.prototype.toString.call(t.queryObj)==="[object Object]";if(!e)throw ue("QU11",{op:t.op,collection:t.collection.name,queryObj:t.queryObj});var r=["selector","limit","skip","sort","index"];if(Object.keys(t.queryObj).forEach(n=>{if(!r.includes(n))throw ue("QU11",{op:t.op,collection:t.collection.name,queryObj:t.queryObj,key:n,args:{validKeys:r}})}),t.op==="count"&&(t.queryObj.limit||t.queryObj.skip))throw L("QU15",{collection:t.collection.name,query:t.queryObj});Bl(t.queryObj)}function Vb(t){var e=t.rxQuery.collection.schema.jsonSchema,r=t.mangoQuery.selector,n=Object.keys(e.properties);Object.keys(r).filter(l=>!l.startsWith("$")).filter(l=>!l.includes(".")).forEach(l=>{if(!n.includes(l))throw L("QU13",{schema:e,field:l,query:t.mangoQuery})});var o=e.indexes?e.indexes:[],i=t.mangoQuery.index;if(i){var s=o.find(l=>Nn(l,i));if(!s)throw L("QU12",{collection:t.rxQuery.collection.name,query:t.mangoQuery,schema:e})}if(t.rxQuery.op==="count"&&!ZR(t.rxQuery.collection.schema.jsonSchema,t.mangoQuery)&&!t.rxQuery.collection.database.allowSlowCount)throw L("QU14",{collection:t.rxQuery.collection,query:t.mangoQuery});t.mangoQuery.sort&&t.mangoQuery.sort.map(l=>Object.keys(l)[0]).filter(l=>!l.includes(".")).forEach(l=>{if(!n.includes(l))throw L("QU13",{schema:e,field:l,query:t.mangoQuery})}),Bl(t.mangoQuery)}function ZR(t,e){var r=Ka(t,e);return r.queryPlan.selectorSatisfiedByIndex}function Bl(t){if(!(typeof t!="object"||t===null)){var e=Object.keys(t);e.forEach(r=>{var n=t[r];if(n instanceof RegExp)throw L("QU16",{field:r,query:t});Array.isArray(n)?n.forEach(o=>Bl(o)):Bl(n)})}}function qb(t,e){if(!t)throw L("DOC20",{primaryKey:t,document:e});if(t!==t.trim())throw L("DOC21",{primaryKey:t,document:e});if(t.includes("\r")||t.includes(`
`))throw L("DOC22",{primaryKey:t,document:e});if(t.includes('"'))throw L("DOC23",{primaryKey:t,document:e})}function Hb(t){if(typeof t!="object"||t===null)return!1;for(var e in t)if(t.hasOwnProperty(e)&&(t[e]instanceof Date||typeof t[e]=="object"&&Hb(t[e])))return!0;return!1}function Wb(t,e){var r=ve(t.schema.primaryKey),n=function(i){i.document=$c(r,t.schema,i.document),i.previous&&Object.keys(i.previous._meta).forEach(s=>{if(!Object.prototype.hasOwnProperty.call(i.document._meta,s))throw L("SNH",{dataBefore:i.previous,dataAfter:i.document,args:{metaFieldName:s}})});try{typeof structuredClone=="function"?structuredClone(i):JSON.parse(JSON.stringify(i))}catch{throw L("DOC24",{collection:t.collectionName,document:i.document})}if(Hb(i.document))throw L("DOC24",{collection:t.collectionName,document:i.document})};for(var o of e)n(o)}var Kb=!1;function Gb(t){return U(this,null,function*(){if(!(Kb||typeof window>"u"||typeof location>"u")&&!($n.premium&&typeof $n.premium=="string"&&(yield yi($n.premium))===Pc)){Kb=!0;var e=document.createElement("iframe");e.style.visibility="hidden",e.width="1px",e.height="1px",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.opacity="0.1",e.src="https://rxdb.info/html/dev-mode-iframe.html?version="+Oo,document.body.appendChild(e)}})}var JR=!0;function tO(t){return!t||typeof t=="string"||typeof t=="number"?t:zd(t)}var eO="dev-mode",Qb={name:eO,rxdb:!0,init:()=>{JR&&console.warn(["-------------- RxDB dev-mode warning -------------------------------","you are seeing this because you use the RxDB dev-mode plugin https://rxdb.info/dev-mode.html?console=dev-mode ","This is great in development mode, because it will run many checks to ensure","that you use RxDB correct. If you see this in production mode,","you did something wrong because the dev-mode plugin will decrease the performance.","","\u{1F917} Hint: To get the most out of RxDB, check out the Premium Plugins","to get access to faster storages and more professional features: https://rxdb.info/premium?console=dev-mode ","","You can disable this warning by calling disableWarnings() from the dev-mode plugin.","---------------------------------------------------------------------"].join(`
`))},overwritable:{isDevMode(){return!0},deepFreezeWhenDevMode:tO,tunnelErrorMessage(t){if(!nh[t])throw console.error("RxDB: Error-Code not known: "+t),new Error("Error-Code "+t+" not known, contact the maintainer");return nh[t]}},hooks:{preCreateRxSchema:{after:Nb},preCreateRxDatabase:{after:function(t){Fb(t)}},createRxDatabase:{after:function(t){return U(this,null,function*(){Gb(t.database)})}},preCreateRxCollection:{after:function(t){if(Bb(t),Lb(t.schema,t.methods),t.name.charAt(0)==="_")throw L("DB2",{name:t.name});if(!t.schema)throw L("DB4",{name:t.name,args:t})}},createRxDocument:{before:function(t){qb(t.primary,t.toJSON(!0))}},preCreateRxQuery:{after:function(t){zb(t)}},prePrepareQuery:{after:t=>{Vb(t)}},preStorageWrite:{before:t=>{Wb(t.storageInstance,t.rows)}},createRxCollection:{after:t=>{$l(t.creator.statics),$l(t.creator.methods),$l(t.creator.attachments),t.creator.schema&&t.creator.migrationStrategies&&$b(t.creator.schema,t.creator.migrationStrategies)}}}};var Fl=wx(Yb(),1),Xb=Symbol.for("Dexie"),Ja=globalThis[Xb]||(globalThis[Xb]=Fl.default);if(Fl.default.semVer!==Ja.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Fl.default.semVer} and ${Ja.semVer}`);var{liveQuery:R8,mergeRanges:O8,rangesOverlap:E8,RangeSet:D8,cmp:k8,Entity:A8,PropModSymbol:I8,PropModification:T8,replacePrefix:M8,add:P8,remove:N8}=Ja;var ts="docs",rO="changes",Zb="attachments",Ul="dexie",Jb=new Map,jl=new Map;function t_(t,e,r,n){var o="rxdb-dexie-"+t+"--"+n.version+"--"+e,i=We(Jb,o,()=>{var s=U(null,null,function*(){var l=kt(r);l.autoOpen=!1;var d=new Ja(o,l),p={[ts]:nO(n),[rO]:"++sequence, id",[Zb]:"id"};return d.version(1).stores(p),yield d.open(),{dexieDb:d,dexieTable:d[ts],dexieAttachmentsTable:d[Zb],booleanIndexes:oO(n)}});return Jb.set(o,i),jl.set(i,0),s});return i}function e_(t){return U(this,null,function*(){var e=yield t,r=jl.get(t),n=r-1;n===0?(e.dexieDb.close(),jl.delete(t)):jl.set(t,n)})}var lh="__";function To(t){var e=t.split(".");if(e.length>1)return e.map(n=>To(n)).join(".");if(t.startsWith("|")){var r=t.substring(1);return lh+r}else return t}function r_(t){var e=t.split(".");if(e.length>1)return e.map(n=>r_(n)).join(".");if(t.startsWith(lh)){var r=t.substring(lh.length);return"|"+r}else return t}function n_(t,e){if(!e)return e;var r=kt(e);return r=uh(r),t.forEach(n=>{var o=Ne(e,n),i=o?"1":"0",s=To(n);Yd(r,s,i)}),r}function fh(t,e){return e&&(e=kt(e),e=dh(e),t.forEach(r=>{var n=Ne(e,r),o=n==="1";Yd(e,r,o)}),e)}function uh(t){if(!t||typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(r=>uh(r));if(typeof t=="object"){var e={};return Object.entries(t).forEach(([r,n])=>{typeof n=="object"&&(n=uh(n)),e[To(r)]=n}),e}}function dh(t){if(!t||typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(r=>dh(r));if(typeof t=="object"){var e={};return Object.entries(t).forEach(([r,n])=>{(typeof n=="object"||Array.isArray(t))&&(n=dh(n)),e[r_(r)]=n}),e}}function nO(t){var e=[],r=ve(t.primaryKey);e.push([r]),e.push(["_deleted",r]),t.indexes&&t.indexes.forEach(i=>{var s=Ma(i);e.push(s)}),e.push(["_meta.lwt",r]),e.push(["_meta.lwt"]),e=e.map(i=>i.map(s=>To(s)));var n=e.map(i=>i.length===1?i[0]:"["+i.join("+")+"]");n=n.filter((i,s,l)=>l.indexOf(i)===s);var o=n.join(", ");return o}function hh(t,e){return U(this,null,function*(){var r=yield t,n=yield r.dexieTable.bulkGet(e);return n.map(o=>fh(r.booleanIndexes,o))})}function es(t,e){return t+"||"+e}function oO(t){var e=new Set,r=[];return t.indexes?(t.indexes.forEach(n=>{var o=Ma(n);o.forEach(i=>{if(!e.has(i)){e.add(i);var s=Le(t,i);s.type==="boolean"&&r.push(i)}})}),r.push("_deleted"),zg(r)):r}function o_(t){return t===Do?-1/0:t}function i_(t,e,r){if(t.includes(e)){var n=r===Eo||r===!0?"1":"0";return n}else return r}function a_(t,e,r){if(!r){if(typeof window>"u")throw new Error("IDBKeyRange missing");r=window.IDBKeyRange}var n=e.startKeys.map((s,l)=>{var d=e.index[l];return i_(t,d,s)}).map(o_),o=e.endKeys.map((s,l)=>{var d=e.index[l];return i_(t,d,s)}).map(o_),i=r.bound(n,o,!e.inclusiveStart,!e.inclusiveEnd);return i}function ph(t,e){return U(this,null,function*(){var r=yield t.internals,n=e.query,o=n.skip?n.skip:0,i=n.limit?n.limit:1/0,s=o+i,l=e.queryPlan,d=!1;l.selectorSatisfiedByIndex||(d=Di(t.schema,e.query));var p=a_(r.booleanIndexes,l,r.dexieDb._options.IDBKeyRange),m=l.index,y=[];if(yield r.dexieDb.transaction("r",r.dexieTable,D=>U(null,null,function*(){var P=D.idbtrans,j=P.objectStore(ts),G,J;J="["+m.map(tt=>To(tt)).join("+")+"]",G=j.index(J);var rt=G.openCursor(p);yield new Promise(tt=>{rt.onsuccess=function(At){var st=At.target.result;if(st){var Mt=fh(r.booleanIndexes,st.value);(!d||d(Mt))&&y.push(Mt),l.sortSatisfiedByIndex&&y.length===s?tt():st.continue()}else tt()}})})),!l.sortSatisfiedByIndex){var S=xl(t.schema,e.query);y=y.sort(S)}return y=y.slice(o,s),{documents:y}})}function s_(t,e){return U(this,null,function*(){var r=yield t.internals,n=e.queryPlan,o=n.index,i=a_(r.booleanIndexes,n,r.dexieDb._options.IDBKeyRange),s=-1;return yield r.dexieDb.transaction("r",r.dexieTable,l=>U(null,null,function*(){var d=l.idbtrans,p=d.objectStore(ts),m,y;y="["+o.map(D=>To(D)).join("+")+"]",m=p.index(y);var S=m.count(i);s=yield new Promise((D,P)=>{S.onsuccess=function(){D(S.result)},S.onerror=j=>P(j)})})),s})}var iO=oe(),mh=!1,aO=function(){function t(r,n,o,i,s,l,d,p){this.changes$=new at,this.instanceId=iO++,this.storage=r,this.databaseName=n,this.collectionName=o,this.schema=i,this.internals=s,this.options=l,this.settings=d,this.devMode=p,this.primaryPath=ve(this.schema.primaryKey)}var e=t.prototype;return e.bulkWrite=function(n,o){return U(this,null,function*(){Mo(this),!mh&&(!$n.premium||typeof $n.premium!="string"||(yield yi($n.premium))!==Pc)&&console.warn(["-------------- RxDB Open Core RxStorage -------------------------------","You are using the free Dexie.js based RxStorage implementation from RxDB https://rxdb.info/rx-storage-dexie.html?console=dexie ","While this is a great option, we want to let you know that there are faster storage solutions available in our premium plugins.","For professional users and production environments, we highly recommend considering these premium options to enhance performance and reliability."," https://rxdb.info/premium?console=dexie ","If you already purchased premium access you can disable this log by calling the setPremiumFlag() function from rxdb-premium/plugins/shared.","---------------------------------------------------------------------"].join(`
`)),mh=!0,n.forEach(m=>{if(!m.document._rev||m.previous&&!m.previous._rev)throw L("SNH",{args:{row:m}})});var i=yield this.internals,s={error:[]};this.devMode&&(n=n.map(m=>{var y=Io(m.document);return{previous:m.previous,document:y}}));var l=n.map(m=>m.document[this.primaryPath]),d;if(yield i.dexieDb.transaction("rw",i.dexieTable,i.dexieAttachmentsTable,()=>U(this,null,function*(){var m=new Map,y=yield hh(this.internals,l);y.forEach(P=>{var j=P;return j&&m.set(j[this.primaryPath],j),j}),d=jy(this,this.primaryPath,m,n,o),s.error=d.errors;var S=[];d.bulkInsertDocs.forEach(P=>{S.push(P.document)}),d.bulkUpdateDocs.forEach(P=>{S.push(P.document)}),S=S.map(P=>n_(i.booleanIndexes,P)),S.length>0&&(yield i.dexieTable.bulkPut(S));var D=[];d.attachmentsAdd.forEach(P=>{D.push({id:es(P.documentId,P.attachmentId),data:P.attachmentData.data})}),d.attachmentsUpdate.forEach(P=>{D.push({id:es(P.documentId,P.attachmentId),data:P.attachmentData.data})}),yield i.dexieAttachmentsTable.bulkPut(D),yield i.dexieAttachmentsTable.bulkDelete(d.attachmentsRemove.map(P=>es(P.documentId,P.attachmentId)))})),d=Et(d),d.eventBulk.events.length>0){var p=Et(d.newestRow).document;d.eventBulk.checkpoint={id:p[this.primaryPath],lwt:p._meta.lwt},d.eventBulk.endTime=oe(),this.changes$.next(d.eventBulk)}return s})},e.findDocumentsById=function(n,o){return U(this,null,function*(){Mo(this);var i=yield this.internals,s=[];return yield i.dexieDb.transaction("r",i.dexieTable,()=>U(this,null,function*(){var l=yield hh(this.internals,n);l.forEach(d=>{d&&(!d._deleted||o)&&s.push(d)})})),s})},e.query=function(n){return Mo(this),ph(this,n)},e.count=function(n){return U(this,null,function*(){if(n.queryPlan.selectorSatisfiedByIndex){var o=yield s_(this,n);return{count:o,mode:"fast"}}else{var i=yield ph(this,n);return{count:i.documents.length,mode:"slow"}}})},e.changeStream=function(){return Mo(this),this.changes$.asObservable()},e.cleanup=function(n){return U(this,null,function*(){Mo(this);var o=yield this.internals;return yield o.dexieDb.transaction("rw",o.dexieTable,()=>U(this,null,function*(){var i=oe()-n,s=yield o.dexieTable.where("_meta.lwt").below(i).toArray(),l=[];s.forEach(d=>{d._deleted==="1"&&l.push(d[this.primaryPath])}),yield o.dexieTable.bulkDelete(l)})),!0})},e.getAttachmentData=function(n,o,i){return U(this,null,function*(){Mo(this);var s=yield this.internals,l=es(n,o);return yield s.dexieDb.transaction("r",s.dexieAttachmentsTable,()=>U(this,null,function*(){var d=yield s.dexieAttachmentsTable.get(l);if(d)return d.data;throw new Error("attachment missing documentId: "+n+" attachmentId: "+o)}))})},e.remove=function(){return U(this,null,function*(){Mo(this);var n=yield this.internals;return yield n.dexieTable.clear(),this.close()})},e.close=function(){return this.closed?this.closed:(this.closed=U(this,null,function*(){this.changes$.complete(),yield e_(this.internals)}),this.closed)},e.conflictResultionTasks=function(){return new at},e.resolveConflictResultionTask=function(n){return U(this,null,function*(){})},t}();function c_(t,e,r){return U(this,null,function*(){var n=t_(e.databaseName,e.collectionName,r,e.schema),o=new aO(t,e.databaseName,e.collectionName,e.schema,n,e.options,r,e.devMode);return yield Ib(Ul,e,o),Promise.resolve(o)})}function Mo(t){if(t.closed)throw new Error("RxStorageInstanceDexie is closed "+t.databaseName+"-"+t.collectionName)}var sO=function(){function t(r){this.name=Ul,this.rxdbVersion=Oo,this.settings=r}var e=t.prototype;return e.createStorageInstance=function(n){return zy(n),c_(this,n,this.settings)},t}();function l_(t={}){var e=new sO(t);return e}var gh={};Ls(gh,{$all:()=>sS,$and:()=>kf,$bitsAllClear:()=>u_,$bitsAllSet:()=>d_,$bitsAnyClear:()=>f_,$bitsAnySet:()=>h_,$elemMatch:()=>Pf,$eq:()=>hl,$exists:()=>Lf,$expr:()=>oS,$gt:()=>pl,$gte:()=>ml,$in:()=>gl,$jsonSchema:()=>iS,$lt:()=>vl,$lte:()=>yl,$mod:()=>Tf,$ne:()=>bl,$nin:()=>_l,$nor:()=>Af,$not:()=>If,$or:()=>qa,$regex:()=>Mf,$size:()=>Nf,$type:()=>$f,$where:()=>aS});var Hn=t=>St((e,r,n)=>{let o=0;if(r instanceof Array)for(let i of r)o=o|1<<i;else o=r;return t(e&o,o)});var u_=Hn((t,e)=>t==0);var d_=Hn((t,e)=>t==e);var f_=Hn((t,e)=>t<e);var h_=Hn((t,e)=>t>0);var zl={};Ls(zl,{$addToSet:()=>lO,$bit:()=>dO,$currentDate:()=>fO,$inc:()=>hO,$max:()=>pO,$min:()=>mO,$mul:()=>gO,$pop:()=>vO,$pull:()=>vh,$pullAll:()=>yO,$push:()=>_O,$rename:()=>xO,$set:()=>yh,$unset:()=>wO});var Mi=(t,e)=>{switch(t){case"deep":return Si(e);case"copy":return Un(e)?new Date(e):it(e)?[...e]:ft(e)?F({},e):e;default:return e}},cO=/^[a-z]+[a-zA-Z0-9]*$/;function p_(t){if(!t.includes(".$"))return[{parent:t,selector:t},[]];let e=t.indexOf(".$"),r=t.indexOf("]"),n=t.substring(0,e),o=t.substring(e+3,r);z(o===""||cO.test(o),"The filter <identifier> must begin with a lowercase letter and contain only alphanumeric characters.");let i=t.substring(r+2),[s,l]=i?p_(i):[];return[{selector:t,parent:n,child:o||"$",next:s},[o,...l||[]].filter(Boolean)]}var Pt=(t,e,r,n,o)=>{let{parent:i,child:s,next:l}=e;if(!s){let p=!1;return wi(t,i,(y,S)=>p=!!n(y,S)||p,o),p}let d=Te(t,i);return it(d)?d.map((p,m)=>r[s]&&!r[s].test({[s]:p})?!1:l?Pt(p,l,r,n,o):n(d,m)).some(Boolean):!1};function Bt(t,e,r,n){let o=[];for(let[i,s]of Object.entries(t)){let[l,d]=p_(i);if(!d.length)n(s,l,{})&&o.push(l.parent);else{let p={};e.forEach(y=>{Object.keys(y).forEach(S=>{d.forEach(D=>{(S===D||S.startsWith(D+"."))&&(p[D]=p[D]||{},Object.assign(p[D],{[S]:y[S]}))})})});let m={};for(let[y,S]of Object.entries(p))m[y]=new ee(S,r.queryOptions);n(s,l,m)&&o.push(l.parent)}}return o}var lO=(t,e,r=[],n={})=>Bt(e,r,n,(o,i,s)=>{let l={$each:[o]};return ft(o)&&Vt(o,"$each")&&Object.assign(l,o),Pt(t,i,s,(d,p)=>{let m=d[p]||=[];return an([m,l.$each]).length===l.$each.length?!1:(d[p]=Mi(n.cloneMode,ja(m.concat(l.$each))),!0)},{buildGraph:!0})});var uO=new Set(["and","or","xor"]),dO=(t,e,r=[],n={})=>Bt(e,r,n,(o,i,s)=>{let l=Object.keys(o);return z(l.length===1&&uO.has(l[0]),`Invalid bit operator '${l[0]}'. Must be one of 'and', 'or', or 'xor'.`),Pt(t,i,s,(d,p)=>{let m=d[p],y=o[l[0]];if(m!==void 0&&!(ht(m)&&ht(y)))return!1;switch(m=m||0,l[0]){case"and":d[p]=m&y;break;case"or":d[p]=m|y;break;case"xor":d[p]=m^y;break}return d[p]!==m},{buildGraph:!0})});var fO=(t,e,r=[],n={})=>{let o=Date.now();return Bt(e,r,n,(i,s,l)=>Pt(t,s,l,(d,p)=>(d[p]=o,!0),{buildGraph:!0}))};var hO=(t,e,r=[],n={})=>Bt(e,r,n,(o,i,s)=>{if(!i.child){let l=Te(t,i.parent);z(l===void 0||ht(l),"cannot apply $inc to a value of non-numeric type")}return Pt(t,i,s,(l,d)=>(l[d]=(l[d]||=0)+o,!0),{buildGraph:!0})});var pO=(t,e,r=[],n={})=>Bt(e,r,n,(o,i,s)=>Pt(t,i,s,(l,d)=>l[d]!==void 0&&Lt(l[d],o)>-1?!1:(l[d]=o,!0),{buildGraph:!0}));var mO=(t,e,r=[],n={})=>Bt(e,r,n,(o,i,s)=>Pt(t,i,s,(l,d)=>l[d]!==void 0&&Lt(l[d],o)<1?!1:(l[d]=o,!0),{buildGraph:!0}));var gO=(t,e,r=[],n={})=>Bt(e,r,n,(o,i,s)=>Pt(t,i,s,(l,d)=>{let p=l[d];return l[d]=l[d]===void 0?0:l[d]*o,l[d]!==p},{buildGraph:!0}));var vO=(t,e,r=[],n={})=>Bt(e,r,n,(o,i,s)=>Pt(t,i,s,(l,d)=>{let p=l[d];return z(it(p),`path '${i.selector}' contains an element of non-array type.`),p.length?(o===-1?p.splice(0,1):p.pop(),!0):!1}));var vh=(t,e,r=[],n={})=>Bt(e,r,n,(o,i,s)=>{let l=!ft(o)||Object.keys(o).some(Ge),d=new ee(l?{k:o}:o,n.queryOptions),p=l?m=>d.test({k:m}):m=>d.test(m);return Pt(t,i,s,(m,y)=>{let S=m[y],D=new Array;return S.map(j=>{let G=p(j);return G||D.push(j),G}).some(Boolean)?(m[y]=D,!0):!1})});var yO=(t,e,r=[],n={})=>{let o={};return Object.entries(e).forEach(([i,s])=>{o[i]={$in:s}}),vh(t,o,r,n)};var bO=Object.freeze(["$each","$slice","$sort","$position"]),_O=(t,e,r=[],n={})=>Bt(e,r,n,(o,i,s)=>{let l={$each:[o]};return ft(o)&&bO.some(d=>Vt(o,d))&&Object.assign(l,o),Pt(t,i,s,(d,p)=>{let m=d[p]||=[],y=m.slice(0,l.$slice||m.length),S=m.length,D=ht(l.$position)?l.$position:m.length;if(m.splice(D,0,...Mi(n.cloneMode,l.$each)),l.$sort){let P=ft(l.$sort)?Object.keys(l.$sort||{}).pop():"",j=P?l.$sort[P]:l.$sort,G=P?J=>Te(J,P):J=>J;m.sort((J,rt)=>j*Lt(G(J),G(rt)))}return ht(l.$slice)&&(l.$slice<0?m.splice(0,m.length+l.$slice):m.splice(l.$slice)),S!=m.length||!ye(y,m)},{descendArray:!0,buildGraph:!0})});var yh=(t,e,r=[],n={})=>Bt(e,r,n,(o,i,s)=>Pt(t,i,s,(l,d)=>ye(l[d],o)?!1:(l[d]=Mi(n.cloneMode,o),!0),{buildGraph:!0}));var xO=(t,e,r=[],n={})=>{let o=[],i=Bt(e,r,n,(s,l,d)=>Pt(t,l,d,(p,m)=>Vt(p,m)?(o.push(...yh(t,{[s]:p[m]},r,n)),delete p[m],!0):!1));return Array.from(new Set(i.concat(o)))};var wO=(t,e,r=[],n={})=>Bt(e,r,n,(o,i,s)=>Pt(t,i,s,(l,d)=>Vt(l,d)?(it(l)?l[d]=null:delete l[d],!0):!1));function bh(t){return t=gt(F({},t),{queryOptions:sn(t.queryOptions)}),t.queryOptions.context.addQueryOps(gh).addExpressionOps(Rf).addExpressionOps(Of),(e,r,n=[],o={},i={})=>{let s=Object.assign({cloneMode:"copy"},t,i);Object.assign(s,{queryOptions:sn(Object.assign({useStrictMode:!1},s?.queryOptions))}),n=n||[],o=o||{};let l=Object.entries(r);z(l.length===1,"Update expression must contain only one operator.");let[d,p]=l[0];z(Vt(zl,d),`Update operator '${d}' is not supported.`);let m=zl[d];return Object.keys(o).length&&!(o instanceof ee?o:new ee(o,s.queryOptions)).test(e)?[]:m(e,p,n,s)}}var $9=bh({});var _h;function xh(t,e){if(!_h){var r=bh({cloneMode:"none"});_h=(n,o)=>{var i=sr(n);return r(i,o),i}}return _h(t,e)}function CO(t){return this.incrementalModify(e=>{var r=xh(e,t);return r})}function SO(t){var e=this._data,r=xh(e,t);return this._saveData(r,e)}function RO(t){return U(this,null,function*(){return zn(this.asRxQuery,e=>e.update(t))})}var m_={name:"update",rxdb:!0,prototypes:{RxDocument:t=>{t.update=SO,t.incrementalUpdate=CO},RxQuery:t=>{t.update=RO}}};var OO={title:"posts schema",version:0,type:"object",primaryKey:"id",properties:{id:{type:"string",primary:!0,maxLength:100},title:{type:"string"},body:{type:"string"}}};function EO(){return U(this,null,function*(){Tl(Jy),Tl(m_),Yp()&&Tl(Qb)})}EO();var eG=(()=>{let e=class e{constructor(){this.dataBaseReadySubj=new we(!1),this.dataBaseReady$=this.dataBaseReadySubj.asObservable()}getDatabaseCollection(n){if(!this.rxDatabase)throw new Error("Database is not initialized. Please make sure the database is initialized before getting the collection");return this.rxDatabase[n]}initDB(n){return U(this,null,function*(){return this.rxDatabase&&this.rxDatabase.name===n&&!this.rxDatabase.destroyed?this.rxDatabase:(this.rxDatabase=yield sb({name:n,storage:l_(),password:"myLongAndStupidPassword"}),yield this.rxDatabase.addCollections({posts:{schema:OO}}),this.dataBaseReadySubj.next(!0),this.rxDatabase)})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function iG(t){return t&&typeof t.connect=="function"&&!(t instanceof io)}var DO=function(t){return t[t.REPLACED=0]="REPLACED",t[t.INSERTED=1]="INSERTED",t[t.MOVED=2]="MOVED",t[t.REMOVED=3]="REMOVED",t}(DO||{}),cG=new lt("_ViewRepeater");var kO=20,rs=(()=>{class t{_ngZone=k(qt);_platform=k(Re);_renderer=k(Yr).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new at;_scrolledCount=0;scrollContainers=new Map;register(r){this.scrollContainers.has(r)||this.scrollContainers.set(r,r.elementScrolled().subscribe(()=>this._scrolled.next(r)))}deregister(r){let n=this.scrollContainers.get(r);n&&(n.unsubscribe(),this.scrollContainers.delete(r))}scrolled(r=kO){return this._platform.isBrowser?new qo(n=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let o=r>0?this._scrolled.pipe($u(r)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):nt()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((r,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(r,n){let o=this.getAncestorScrollContainers(r);return this.scrolled(n).pipe(bt(i=>!i||o.indexOf(i)>-1))}getAncestorScrollContainers(r){let n=[];return this.scrollContainers.forEach((o,i)=>{this._scrollableContainsElement(i,r)&&n.push(i)}),n}_scrollableContainsElement(r,n){let o=Zo(n),i=r.getElementRef().nativeElement;do if(o==i)return!0;while(o=o.parentElement);return!1}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ch=(()=>{class t{elementRef=k(Yt);scrollDispatcher=k(rs);ngZone=k(qt);dir=k(Sn,{optional:!0});_scrollElement=this.elementRef.nativeElement;_destroyed=new at;_renderer=k(Er);_cleanupScroll;_elementScrolled=new at;constructor(){}ngOnInit(){this._cleanupScroll=this.ngZone.runOutsideAngular(()=>this._renderer.listen(this._scrollElement,"scroll",r=>this._elementScrolled.next(r))),this.scrollDispatcher.register(this)}ngOnDestroy(){this._cleanupScroll?.(),this._elementScrolled.complete(),this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(r){let n=this.elementRef.nativeElement,o=this.dir&&this.dir.value=="rtl";r.left==null&&(r.left=o?r.end:r.start),r.right==null&&(r.right=o?r.start:r.end),r.bottom!=null&&(r.top=n.scrollHeight-n.clientHeight-r.bottom),o&&ti()!=vr.NORMAL?(r.left!=null&&(r.right=n.scrollWidth-n.clientWidth-r.left),ti()==vr.INVERTED?r.left=r.right:ti()==vr.NEGATED&&(r.left=r.right?-r.right:r.right)):r.right!=null&&(r.left=n.scrollWidth-n.clientWidth-r.right),this._applyScrollToOptions(r)}_applyScrollToOptions(r){let n=this.elementRef.nativeElement;Ys()?n.scrollTo(r):(r.top!=null&&(n.scrollTop=r.top),r.left!=null&&(n.scrollLeft=r.left))}measureScrollOffset(r){let n="left",o="right",i=this.elementRef.nativeElement;if(r=="top")return i.scrollTop;if(r=="bottom")return i.scrollHeight-i.clientHeight-i.scrollTop;let s=this.dir&&this.dir.value=="rtl";return r=="start"?r=s?o:n:r=="end"&&(r=s?n:o),s&&ti()==vr.INVERTED?r==n?i.scrollWidth-i.clientWidth-i.scrollLeft:i.scrollLeft:s&&ti()==vr.NEGATED?r==n?i.scrollLeft+i.scrollWidth-i.clientWidth:-i.scrollLeft:r==n?i.scrollLeft:i.scrollWidth-i.clientWidth-i.scrollLeft}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return t})(),AO=20,Pi=(()=>{class t{_platform=k(Re);_listeners;_viewportSize;_change=new at;_document=k(le);constructor(){let r=k(qt),n=k(Yr).createRenderer(null,null);r.runOutsideAngular(()=>{if(this._platform.isBrowser){let o=i=>this._change.next(i);this._listeners=[n.listen("window","resize",o),n.listen("window","orientationchange",o)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(r=>r()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let r={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),r}getViewportRect(){let r=this.getViewportScrollPosition(),{width:n,height:o}=this.getViewportSize();return{top:r.top,left:r.left,bottom:r.top+o,right:r.left+n,height:o,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let r=this._document,n=this._getWindow(),o=r.documentElement,i=o.getBoundingClientRect(),s=-i.top||r.body.scrollTop||n.scrollY||o.scrollTop||0,l=-i.left||r.body.scrollLeft||n.scrollX||o.scrollLeft||0;return{top:s,left:l}}change(r=AO){return r>0?this._change.pipe($u(r)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let r=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:r.innerWidth,height:r.innerHeight}:{width:0,height:0}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var wh=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Xt({type:t});static \u0275inj=Qt({})}return t})(),Sh=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Xt({type:t});static \u0275inj=Qt({imports:[ua,wh,ua,wh]})}return t})();var g_=Ys();function Li(t){return new Vl(t.get(Pi),t.get(le))}var Vl=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,r){this._viewportRuler=e,this._document=r}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Zt(-this._previousScrollPosition.left),e.style.top=Zt(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,r=this._document.body,n=e.style,o=r.style,i=n.scrollBehavior||"",s=o.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),g_&&(n.scrollBehavior=o.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),g_&&(n.scrollBehavior=i,o.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let r=this._document.documentElement,n=this._viewportRuler.getViewportSize();return r.scrollHeight>n.height||r.scrollWidth>n.width}};function C_(t,e){return new ql(t.get(rs),t.get(qt),t.get(Pi),e)}var ql=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,r,n,o){this._scrollDispatcher=e,this._ngZone=r,this._viewportRuler=n,this._config=o}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(bt(r=>!r||!this._overlayRef.overlayElement.contains(r.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let r=this._viewportRuler.getViewportScrollPosition().top;Math.abs(r-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var ns=class{enable(){}disable(){}attach(){}};function Rh(t,e){return e.some(r=>{let n=t.bottom<r.top,o=t.top>r.bottom,i=t.right<r.left,s=t.left>r.right;return n||o||i||s})}function v_(t,e){return e.some(r=>{let n=t.top<r.top,o=t.bottom>r.bottom,i=t.left<r.left,s=t.right>r.right;return n||o||i||s})}function Ql(t,e){return new Hl(t.get(rs),t.get(Pi),t.get(qt),e)}var Hl=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,r,n,o){this._scrollDispatcher=e,this._viewportRuler=r,this._ngZone=n,this._config=o}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let r=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:o}=this._viewportRuler.getViewportSize();Rh(r,[{width:n,height:o,bottom:o,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},S_=(()=>{class t{_injector=k(xt);constructor(){}noop=()=>new ns;close=r=>C_(this._injector,r);block=()=>Li(this._injector);reposition=r=>Ql(this._injector,r);static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),un=class{positionStrategy;scrollStrategy=new ns;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(e){if(e){let r=Object.keys(e);for(let n of r)e[n]!==void 0&&(this[n]=e[n])}}};var Wl=class{connectionPair;scrollableViewProperties;constructor(e,r){this.connectionPair=e,this.scrollableViewProperties=r}};var R_=(()=>{class t{_attachedOverlays=[];_document=k(le);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(r){this.remove(r),this._attachedOverlays.push(r)}remove(r){let n=this._attachedOverlays.indexOf(r);n>-1&&this._attachedOverlays.splice(n,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),O_=(()=>{class t extends R_{_ngZone=k(qt);_renderer=k(Yr).createRenderer(null,null);_cleanupKeydown;add(r){super.add(r),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=r=>{let n=this._attachedOverlays;for(let o=n.length-1;o>-1;o--)if(n[o]._keydownEvents.observers.length>0){this._ngZone.run(()=>n[o]._keydownEvents.next(r));break}};static \u0275fac=(()=>{let r;return function(o){return(r||(r=ze(t)))(o||t)}})();static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),E_=(()=>{class t extends R_{_platform=k(Re);_ngZone=k(qt);_renderer=k(Yr).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(r){if(super.add(r),!this._isAttached){let n=this._document.body,o={capture:!0},i=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[i.listen(n,"pointerdown",this._pointerDownListener,o),i.listen(n,"click",this._clickListener,o),i.listen(n,"auxclick",this._clickListener,o),i.listen(n,"contextmenu",this._clickListener,o)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(r=>r()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=r=>{this._pointerDownEventTarget=Zr(r)};_clickListener=r=>{let n=Zr(r),o=r.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:n;this._pointerDownEventTarget=null;let i=this._attachedOverlays.slice();for(let s=i.length-1;s>-1;s--){let l=i[s];if(l._outsidePointerEvents.observers.length<1||!l.hasAttached())continue;if(y_(l.overlayElement,n)||y_(l.overlayElement,o))break;let d=l._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(r)):d.next(r)}};static \u0275fac=(()=>{let r;return function(o){return(r||(r=ze(t)))(o||t)}})();static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function y_(t,e){let r=typeof ShadowRoot<"u"&&ShadowRoot,n=e;for(;n;){if(n===t)return!0;n=r&&n instanceof ShadowRoot?n.host:n.parentNode}return!1}var D_=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Jt({type:t,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(n,o){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return t})(),Yl=(()=>{class t{_platform=k(Re);_containerElement;_document=k(le);_styleLoader=k(mo);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let r="cdk-overlay-container";if(this._platform.isBrowser||ed()){let o=this._document.querySelectorAll(`.${r}[platform="server"], .${r}[platform="test"]`);for(let i=0;i<o.length;i++)o[i].remove()}let n=this._document.createElement("div");n.classList.add(r),ed()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}_loadStyles(){this._styleLoader.load(D_)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Oh=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(e,r,n,o){this._renderer=r,this._ngZone=n,this.element=e.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=r.listen(this.element,"click",o)}detach(){this._ngZone.runOutsideAngular(()=>{let e=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(e,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),e.style.pointerEvents="none",e.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},Ni=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new at;_attachments=new at;_detachments=new at;_positionStrategy;_scrollStrategy;_locationChanges=Or.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new at;_outsidePointerEvents=new at;_afterNextRenderRef;constructor(e,r,n,o,i,s,l,d,p,m=!1,y,S){this._portalOutlet=e,this._host=r,this._pane=n,this._config=o,this._ngZone=i,this._keyboardDispatcher=s,this._document=l,this._location=d,this._outsideClickDispatcher=p,this._animationsDisabled=m,this._injector=y,this._renderer=S,o.scrollStrategy&&(this._scrollStrategy=o.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=o.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let r=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=mr(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof r?.onDestroy=="function"&&r.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),r}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,e&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=F(F({},this._config),e),this._updateElementSize()}setDirection(e){this._config=gt(F({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Zt(this._config.width),e.height=Zt(this._config.height),e.minWidth=Zt(this._config.minWidth),e.minHeight=Zt(this._config.minHeight),e.maxWidth=Zt(this._config.maxWidth),e.maxHeight=Zt(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new Oh(this._document,this._renderer,this._ngZone,r=>{this._backdropClick.next(r)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(e))}):this._backdropRef.element.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(e,r,n){let o=Xu(r||[]).filter(i=>!!i);o.length&&(n?e.classList.add(...o):e.classList.remove(...o))}_detachContentWhenEmpty(){let e=!1;try{this._detachContentAfterRenderRef=mr(()=>{e=!0,this._detachContent()},{injector:this._injector})}catch(r){if(e)throw r;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let e=this._scrollStrategy;e?.disable(),e?.detach?.()}},b_="cdk-overlay-connected-position-bounding-box",TO=/([A-Za-z%]+)$/;function kh(t,e){return new Kl(e,t.get(Pi),t.get(le),t.get(Re),t.get(Yl))}var Kl=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new at;_resizeSubscription=Or.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,r,n,o,i){this._viewportRuler=r,this._document=n,this._platform=o,this._overlayContainer=i,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(b_),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,r=this._overlayRect,n=this._viewportRect,o=this._containerRect,i=[],s;for(let l of this._preferredPositions){let d=this._getOriginPoint(e,o,l),p=this._getOverlayPoint(d,r,l),m=this._getOverlayFit(p,r,n,l);if(m.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(l,d);return}if(this._canFitWithFlexibleDimensions(m,p,n)){i.push({position:l,origin:d,overlayRect:r,boundingBoxRect:this._calculateBoundingBoxRect(d,l)});continue}(!s||s.overlayFit.visibleArea<m.visibleArea)&&(s={overlayFit:m,overlayPoint:p,originPoint:d,position:l,overlayRect:r})}if(i.length){let l=null,d=-1;for(let p of i){let m=p.boundingBoxRect.width*p.boundingBoxRect.height*(p.position.weight||1);m>d&&(d=m,l=p)}this._isPushed=!1,this._applyPosition(l.position,l.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Po(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(b_),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let r=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,r)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,r,n){let o;if(n.originX=="center")o=e.left+e.width/2;else{let s=this._isRtl()?e.right:e.left,l=this._isRtl()?e.left:e.right;o=n.originX=="start"?s:l}r.left<0&&(o-=r.left);let i;return n.originY=="center"?i=e.top+e.height/2:i=n.originY=="top"?e.top:e.bottom,r.top<0&&(i-=r.top),{x:o,y:i}}_getOverlayPoint(e,r,n){let o;n.overlayX=="center"?o=-r.width/2:n.overlayX==="start"?o=this._isRtl()?-r.width:0:o=this._isRtl()?0:-r.width;let i;return n.overlayY=="center"?i=-r.height/2:i=n.overlayY=="top"?0:-r.height,{x:e.x+o,y:e.y+i}}_getOverlayFit(e,r,n,o){let i=x_(r),{x:s,y:l}=e,d=this._getOffset(o,"x"),p=this._getOffset(o,"y");d&&(s+=d),p&&(l+=p);let m=0-s,y=s+i.width-n.width,S=0-l,D=l+i.height-n.height,P=this._subtractOverflows(i.width,m,y),j=this._subtractOverflows(i.height,S,D),G=P*j;return{visibleArea:G,isCompletelyWithinViewport:i.width*i.height===G,fitsInViewportVertically:j===i.height,fitsInViewportHorizontally:P==i.width}}_canFitWithFlexibleDimensions(e,r,n){if(this._hasFlexibleDimensions){let o=n.bottom-r.y,i=n.right-r.x,s=__(this._overlayRef.getConfig().minHeight),l=__(this._overlayRef.getConfig().minWidth),d=e.fitsInViewportVertically||s!=null&&s<=o,p=e.fitsInViewportHorizontally||l!=null&&l<=i;return d&&p}return!1}_pushOverlayOnScreen(e,r,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let o=x_(r),i=this._viewportRect,s=Math.max(e.x+o.width-i.width,0),l=Math.max(e.y+o.height-i.height,0),d=Math.max(i.top-n.top-e.y,0),p=Math.max(i.left-n.left-e.x,0),m=0,y=0;return o.width<=i.width?m=p||-s:m=e.x<this._viewportMargin?i.left-n.left-e.x:0,o.height<=i.height?y=d||-l:y=e.y<this._viewportMargin?i.top-n.top-e.y:0,this._previousPushAmount={x:m,y},{x:e.x+m,y:e.y+y}}_applyPosition(e,r){if(this._setTransformOrigin(e),this._setOverlayElementStyles(r,e),this._setBoundingBoxStyles(r,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let n=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!MO(this._lastScrollVisibility,n)){let o=new Wl(e,n);this._positionChanges.next(o)}this._lastScrollVisibility=n}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let r=this._boundingBox.querySelectorAll(this._transformOriginSelector),n,o=e.overlayY;e.overlayX==="center"?n="center":this._isRtl()?n=e.overlayX==="start"?"right":"left":n=e.overlayX==="start"?"left":"right";for(let i=0;i<r.length;i++)r[i].style.transformOrigin=`${n} ${o}`}_calculateBoundingBoxRect(e,r){let n=this._viewportRect,o=this._isRtl(),i,s,l;if(r.overlayY==="top")s=e.y,i=n.height-s+this._viewportMargin;else if(r.overlayY==="bottom")l=n.height-e.y+this._viewportMargin*2,i=n.height-l+this._viewportMargin;else{let D=Math.min(n.bottom-e.y+n.top,e.y),P=this._lastBoundingBoxSize.height;i=D*2,s=e.y-D,i>P&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-P/2)}let d=r.overlayX==="start"&&!o||r.overlayX==="end"&&o,p=r.overlayX==="end"&&!o||r.overlayX==="start"&&o,m,y,S;if(p)S=n.width-e.x+this._viewportMargin*2,m=e.x-this._viewportMargin;else if(d)y=e.x,m=n.right-e.x;else{let D=Math.min(n.right-e.x+n.left,e.x),P=this._lastBoundingBoxSize.width;m=D*2,y=e.x-D,m>P&&!this._isInitialRender&&!this._growAfterOpen&&(y=e.x-P/2)}return{top:s,left:y,bottom:l,right:S,width:m,height:i}}_setBoundingBoxStyles(e,r){let n=this._calculateBoundingBoxRect(e,r);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));let o={};if(this._hasExactPosition())o.top=o.left="0",o.bottom=o.right=o.maxHeight=o.maxWidth="",o.width=o.height="100%";else{let i=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;o.height=Zt(n.height),o.top=Zt(n.top),o.bottom=Zt(n.bottom),o.width=Zt(n.width),o.left=Zt(n.left),o.right=Zt(n.right),r.overlayX==="center"?o.alignItems="center":o.alignItems=r.overlayX==="end"?"flex-end":"flex-start",r.overlayY==="center"?o.justifyContent="center":o.justifyContent=r.overlayY==="bottom"?"flex-end":"flex-start",i&&(o.maxHeight=Zt(i)),s&&(o.maxWidth=Zt(s))}this._lastBoundingBoxSize=n,Po(this._boundingBox.style,o)}_resetBoundingBoxStyles(){Po(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Po(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,r){let n={},o=this._hasExactPosition(),i=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(o){let m=this._viewportRuler.getViewportScrollPosition();Po(n,this._getExactOverlayY(r,e,m)),Po(n,this._getExactOverlayX(r,e,m))}else n.position="static";let l="",d=this._getOffset(r,"x"),p=this._getOffset(r,"y");d&&(l+=`translateX(${d}px) `),p&&(l+=`translateY(${p}px)`),n.transform=l.trim(),s.maxHeight&&(o?n.maxHeight=Zt(s.maxHeight):i&&(n.maxHeight="")),s.maxWidth&&(o?n.maxWidth=Zt(s.maxWidth):i&&(n.maxWidth="")),Po(this._pane.style,n)}_getExactOverlayY(e,r,n){let o={top:"",bottom:""},i=this._getOverlayPoint(r,this._overlayRect,e);if(this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n)),e.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;o.bottom=`${s-(i.y+this._overlayRect.height)}px`}else o.top=Zt(i.y);return o}_getExactOverlayX(e,r,n){let o={left:"",right:""},i=this._getOverlayPoint(r,this._overlayRect,e);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n));let s;if(this._isRtl()?s=e.overlayX==="end"?"left":"right":s=e.overlayX==="end"?"right":"left",s==="right"){let l=this._document.documentElement.clientWidth;o.right=`${l-(i.x+this._overlayRect.width)}px`}else o.left=Zt(i.x);return o}_getScrollVisibility(){let e=this._getOriginRect(),r=this._pane.getBoundingClientRect(),n=this._scrollables.map(o=>o.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:v_(e,n),isOriginOutsideView:Rh(e,n),isOverlayClipped:v_(r,n),isOverlayOutsideView:Rh(r,n)}}_subtractOverflows(e,...r){return r.reduce((n,o)=>n-Math.max(o,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,r=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+r-this._viewportMargin,width:e-2*this._viewportMargin,height:r-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,r){return r==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Xu(e).forEach(r=>{r!==""&&this._appliedPanelClasses.indexOf(r)===-1&&(this._appliedPanelClasses.push(r),this._pane.classList.add(r))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof Yt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let r=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+r,height:n,width:r}}};function Po(t,e){for(let r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function __(t){if(typeof t!="number"&&t!=null){let[e,r]=t.split(TO);return!r||r==="px"?parseFloat(e):null}return t||null}function x_(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function MO(t,e){return t===e?!0:t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}var w_="cdk-global-overlay-wrapper";function Wn(t){return new Gl}var Gl=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){let r=e.getConfig();this._overlayRef=e,this._width&&!r.width&&e.updateSize({width:this._width}),this._height&&!r.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(w_),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,r=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:o,height:i,maxWidth:s,maxHeight:l}=n,d=(o==="100%"||o==="100vw")&&(!s||s==="100%"||s==="100vw"),p=(i==="100%"||i==="100vh")&&(!l||l==="100%"||l==="100vh"),m=this._xPosition,y=this._xOffset,S=this._overlayRef.getConfig().direction==="rtl",D="",P="",j="";d?j="flex-start":m==="center"?(j="center",S?P=y:D=y):S?m==="left"||m==="end"?(j="flex-end",D=y):(m==="right"||m==="start")&&(j="flex-start",P=y):m==="left"||m==="start"?(j="flex-start",D=y):(m==="right"||m==="end")&&(j="flex-end",P=y),e.position=this._cssPosition,e.marginLeft=d?"0":D,e.marginTop=p?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=d?"0":P,r.justifyContent=j,r.alignItems=p?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,r=this._overlayRef.hostElement,n=r.style;r.classList.remove(w_),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},k_=(()=>{class t{_injector=k(xt);constructor(){}global(){return Wn()}flexibleConnectedTo(r){return kh(this._injector,r)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function No(t,e){t.get(mo).load(D_);let r=t.get(Yl),n=t.get(le),o=t.get(Jr),i=t.get(Vs),s=t.get(Sn),l=n.createElement("div"),d=n.createElement("div");d.id=o.getId("cdk-overlay-"),d.classList.add("cdk-overlay-pane"),l.appendChild(d),r.getContainerElement().appendChild(l);let p=new Gs(d,i,t),m=new un(e),y=t.get(Er,null,{optional:!0})||t.get(Yr).createRenderer(null,null);return m.direction=m.direction||s.value,new Ni(p,l,d,m,t.get(qt),t.get(O_),n,t.get(kr),t.get(E_),e?.disableAnimations??t.get(js,null,{optional:!0})==="NoopAnimations",t.get(pr),y)}var A_=(()=>{class t{scrollStrategies=k(S_);_positionBuilder=k(k_);_injector=k(xt);constructor(){}create(r){return No(this._injector,r)}position(){return this._positionBuilder}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),PO=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],I_=new lt("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=k(xt);return()=>Ql(t)}}),Eh=(()=>{class t{elementRef=k(Yt);constructor(){}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]})}return t})(),NO=(()=>{class t{_dir=k(Sn,{optional:!0});_injector=k(xt);_overlayRef;_templatePortal;_backdropSubscription=Or.EMPTY;_attachSubscription=Or.EMPTY;_detachSubscription=Or.EMPTY;_positionSubscription=Or.EMPTY;_offsetX;_offsetY;_position;_scrollStrategyFactory=k(I_);_disposeOnNavigation=!1;_ngZone=k(qt);origin;positions;positionStrategy;get offsetX(){return this._offsetX}set offsetX(r){this._offsetX=r,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(r){this._offsetY=r,this._position&&this._updatePositionStrategy(this._position)}width;height;minWidth;minHeight;backdropClass;panelClass;viewportMargin=0;scrollStrategy;open=!1;disableClose=!1;transformOriginSelector;hasBackdrop=!1;lockPosition=!1;flexibleDimensions=!1;growAfterOpen=!1;push=!1;get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(r){this._disposeOnNavigation=r}backdropClick=new re;positionChange=new re;attach=new re;detach=new re;overlayKeydown=new re;overlayOutsideClick=new re;constructor(){let r=k(Qr),n=k(Cn);this._templatePortal=new Ar(r,n),this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef?.dispose()}ngOnChanges(r){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef?.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),r.origin&&this.open&&this._position.apply()),r.open&&(this.open?this.attachOverlay():this.detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=PO);let r=this._overlayRef=No(this._injector,this._buildConfig());this._attachSubscription=r.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=r.detachments().subscribe(()=>this.detach.emit()),r.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),n.keyCode===27&&!this.disableClose&&!Jo(n)&&(n.preventDefault(),this.detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{let o=this._getOriginElement(),i=Zr(n);(!o||o!==i&&!o.contains(i))&&this.overlayOutsideClick.next(n)})}_buildConfig(){let r=this._position=this.positionStrategy||this._createPositionStrategy(),n=new un({direction:this._dir||"ltr",positionStrategy:r,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(n.width=this.width),(this.height||this.height===0)&&(n.height=this.height),(this.minWidth||this.minWidth===0)&&(n.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(r){let n=this.positions.map(o=>({originX:o.originX,originY:o.originY,overlayX:o.overlayX,overlayY:o.overlayY,offsetX:o.offsetX||this.offsetX,offsetY:o.offsetY||this.offsetY,panelClass:o.panelClass||void 0}));return r.setOrigin(this._getOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let r=kh(this._injector,this._getOrigin());return this._updatePositionStrategy(r),r}_getOrigin(){return this.origin instanceof Eh?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof Eh?this.origin.elementRef.nativeElement:this.origin instanceof Yt?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(r=>{this.backdropClick.emit(r)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(Rp(()=>this.positionChange.observers.length>0)).subscribe(r=>{this._ngZone.run(()=>this.positionChange.emit(r)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()})),this.open=!0}detachOverlay(){this._overlayRef?.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.open=!1}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",ge],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",ge],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",ge],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",ge],push:[2,"cdkConnectedOverlayPush","push",ge],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",ge]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Gr]})}return t})();function LO(t){let e=k(xt);return()=>Ql(e)}var $O={provide:I_,useFactory:LO},Lo=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Xt({type:t});static \u0275inj=Qt({providers:[A_,$O],imports:[ua,en,Sh,Sh]})}return t})();function BO(t,e){if(t&1){let r=Hp();Yo(0,"div",1)(1,"button",2),uo("click",function(){Dp(r);let o=Gu();return kp(o.action())}),Qu(2),co()()}if(t&2){let r=Gu();Go(2),Yu(" ",r.data.action," ")}}var FO=["label"];function jO(t,e){}var UO=Math.pow(2,31)-1,os=class{_overlayRef;instance;containerInstance;_afterDismissed=new at;_afterOpened=new at;_onAction=new at;_durationTimeoutId;_dismissedByAction=!1;constructor(e,r){this._overlayRef=r,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,UO))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},T_=new lt("MatSnackBarData"),$i=class{politeness="polite";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"},zO=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return t})(),VO=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return t})(),qO=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return t})(),M_=(()=>{class t{snackBarRef=k(os);data=k(T_);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Jt({type:t,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["matButton","","matSnackBarAction","",3,"click"]],template:function(n,o){n&1&&(Yo(0,"div",0),Qu(1),co(),Vp(2,BO,3,1,"div",1)),n&2&&(Go(),Yu(" ",o.data.message,`
`),Go(),qp(o.hasAction?2:-1))},dependencies:[Dm,zO,VO,qO],styles:[`.mat-mdc-simple-snack-bar{display:flex}
`],encapsulation:2,changeDetection:0})}return t})(),Ah="_mat-snack-bar-enter",Ih="_mat-snack-bar-exit",HO=(()=>{class t extends Rn{_ngZone=k(qt);_elementRef=k(Yt);_changeDetectorRef=k(Dr);_platform=k(Re);_animationsDisabled=rr();snackBarConfig=k($i);_document=k(le);_trackedModals=new Set;_enterFallback;_exitFallback;_injector=k(xt);_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new at;_onExit=new at;_onEnter=new at;_animationState="void";_live;_label;_role;_liveElementId=k(Jr).getId("mat-snack-bar-container-live-");constructor(){super();let r=this.snackBarConfig;r.politeness==="assertive"&&!r.announcementMessage?this._live="assertive":r.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(r){this._assertNotAttached();let n=this._portalOutlet.attachComponentPortal(r);return this._afterPortalAttached(),n}attachTemplatePortal(r){this._assertNotAttached();let n=this._portalOutlet.attachTemplatePortal(r);return this._afterPortalAttached(),n}attachDomPortal=r=>{this._assertNotAttached();let n=this._portalOutlet.attachDomPortal(r);return this._afterPortalAttached(),n};onAnimationEnd(r){r===Ih?this._completeExit():r===Ah&&(clearTimeout(this._enterFallback),this._ngZone.run(()=>{this._onEnter.next(),this._onEnter.complete()}))}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce(),this._animationsDisabled?mr(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(Ah)))},{injector:this._injector}):(clearTimeout(this._enterFallback),this._enterFallback=setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-snack-bar-fallback-visible"),this.onAnimationEnd(Ah)},200)))}exit(){return this._destroyed?nt(void 0):(this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._animationsDisabled?mr(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(Ih)))},{injector:this._injector}):(clearTimeout(this._exitFallback),this._exitFallback=setTimeout(()=>this.onAnimationEnd(Ih),200))}),this._onExit)}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){clearTimeout(this._exitFallback),queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let r=this._elementRef.nativeElement,n=this.snackBarConfig.panelClass;n&&(Array.isArray(n)?n.forEach(s=>r.classList.add(s)):r.classList.add(n)),this._exposeToModals();let o=this._label.nativeElement,i="mdc-snackbar__label";o.classList.toggle(i,!o.querySelector(`.${i}`))}_exposeToModals(){let r=this._liveElementId,n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<n.length;o++){let i=n[o],s=i.getAttribute("aria-owns");this._trackedModals.add(i),s?s.indexOf(r)===-1&&i.setAttribute("aria-owns",s+" "+r):i.setAttribute("aria-owns",r)}}_clearFromModals(){this._trackedModals.forEach(r=>{let n=r.getAttribute("aria-owns");if(n){let o=n.replace(this._liveElementId,"").trim();o.length>0?r.setAttribute("aria-owns",o):r.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{if(this._destroyed)return;let r=this._elementRef.nativeElement,n=r.querySelector("[aria-hidden]"),o=r.querySelector("[aria-live]");if(n&&o){let i=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&n.contains(document.activeElement)&&(i=document.activeElement),n.removeAttribute("aria-hidden"),o.appendChild(n),i?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Jt({type:t,selectors:[["mat-snack-bar-container"]],viewQuery:function(n,o){if(n&1&&(Xo(On,7),Xo(FO,7)),n&2){let i;ho(i=po())&&(o._portalOutlet=i.first),ho(i=po())&&(o._label=i.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:6,hostBindings:function(n,o){n&1&&uo("animationend",function(s){return o.onAnimationEnd(s.animationName)})("animationcancel",function(s){return o.onAnimationEnd(s.animationName)}),n&2&&tr("mat-snack-bar-container-enter",o._animationState==="visible")("mat-snack-bar-container-exit",o._animationState==="hidden")("mat-snack-bar-container-animations-enabled",!o._animationsDisabled)},features:[Se],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(n,o){n&1&&(Yo(0,"div",1)(1,"div",2,0)(3,"div",3),Qo(4,jO,0,0,"ng-template",4),co(),qs(5,"div"),co()()),n&2&&(Go(5),gr("aria-live",o._live)("role",o._role)("id",o._liveElementId))},dependencies:[On],styles:[`@keyframes _mat-snack-bar-enter{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _mat-snack-bar-exit{from{opacity:1}to{opacity:0}}.mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-snack-bar-container-animations-enabled{opacity:0}.mat-snack-bar-container-animations-enabled.mat-snack-bar-fallback-visible{opacity:1}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-enter{animation:_mat-snack-bar-enter 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-exit{animation:_mat-snack-bar-exit 75ms cubic-bezier(0.4, 0, 1, 1) forwards}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mat-snack-bar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mat-snack-bar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-snack-bar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mat-snack-bar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-snack-bar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-snack-bar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mat-snack-bar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-button-text-state-layer-color: currentColor;--mat-button-text-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}
`],encapsulation:2})}return t})();function WO(){return new $i}var KO=new lt("mat-snack-bar-default-options",{providedIn:"root",factory:WO}),GO=(()=>{class t{_live=k(fm);_injector=k(xt);_breakpointObserver=k(Ju);_parentSnackBar=k(t,{optional:!0,skipSelf:!0});_defaultConfig=k(KO);_animationsDisabled=rr();_snackBarRefAtThisLevel=null;simpleSnackBarComponent=M_;snackBarContainerComponent=HO;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){let r=this._parentSnackBar;return r?r._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(r){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=r:this._snackBarRefAtThisLevel=r}constructor(){}openFromComponent(r,n){return this._attach(r,n)}openFromTemplate(r,n){return this._attach(r,n)}open(r,n="",o){let i=F(F({},this._defaultConfig),o);return i.data={message:r,action:n},i.announcementMessage===r&&(i.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,i)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(r,n){let o=n&&n.viewContainerRef&&n.viewContainerRef.injector,i=xt.create({parent:o||this._injector,providers:[{provide:$i,useValue:n}]}),s=new tn(this.snackBarContainerComponent,n.viewContainerRef,i),l=r.attach(s);return l.instance.snackBarConfig=n,l.instance}_attach(r,n){let o=F(F(F({},new $i),this._defaultConfig),n),i=this._createOverlay(o),s=this._attachSnackBarContainer(i,o),l=new os(s,i);if(r instanceof Qr){let d=new Ar(r,null,{$implicit:o.data,snackBarRef:l});l.instance=s.attachTemplatePortal(d)}else{let d=this._createInjector(o,l),p=new tn(r,void 0,d),m=s.attachComponentPortal(p);l.instance=m.instance}return this._breakpointObserver.observe(vm.HandsetPortrait).pipe(Ko(i.detachments())).subscribe(d=>{i.overlayElement.classList.toggle(this.handsetCssClass,d.matches)}),o.announcementMessage&&s._onAnnounce.subscribe(()=>{this._live.announce(o.announcementMessage,o.politeness)}),this._animateSnackBar(l,o),this._openedSnackBarRef=l,this._openedSnackBarRef}_animateSnackBar(r,n){r.afterDismissed().subscribe(()=>{this._openedSnackBarRef==r&&(this._openedSnackBarRef=null),n.announcementMessage&&this._live.clear()}),n.duration&&n.duration>0&&r.afterOpened().subscribe(()=>r._dismissAfter(n.duration)),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{r.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):r.containerInstance.enter()}_createOverlay(r){let n=new un;n.direction=r.direction;let o=Wn(this._injector),i=r.direction==="rtl",s=r.horizontalPosition==="left"||r.horizontalPosition==="start"&&!i||r.horizontalPosition==="end"&&i,l=!s&&r.horizontalPosition!=="center";return s?o.left("0"):l?o.right("0"):o.centerHorizontally(),r.verticalPosition==="top"?o.top("0"):o.bottom("0"),n.positionStrategy=o,n.disableAnimations=this._animationsDisabled,No(this._injector,n)}_createInjector(r,n){let o=r&&r.viewContainerRef&&r.viewContainerRef.injector;return xt.create({parent:o||this._injector,providers:[{provide:os,useValue:n},{provide:T_,useValue:r.data}]})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var FQ=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Xt({type:t});static \u0275inj=Qt({providers:[GO],imports:[Lo,en,km,er,M_,er]})}return t})();var zQ={APP:{POSTS:"app.posts",NOT_FOUND:"app.not-found"},POSTS:{DETAIL:"posts.detail",CREATE:"posts.create",EDIT:"posts.edit"}};function QO(t,e){}var Kn=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;disableAnimations=!1;providers;container;templateContext};var Mh=(()=>{class t extends Rn{_elementRef=k(Yt);_focusTrapFactory=k(dm);_config;_interactivityChecker=k(um);_ngZone=k(qt);_focusMonitor=k(Ks);_renderer=k(Er);_changeDetectorRef=k(Dr);_injector=k(xt);_platform=k(Re);_document=k(le);_portalOutlet;_focusTrapped=new at;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_isDestroyed=!1;constructor(){super(),this._config=k(Kn,{optional:!0})||new Kn,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(r){this._ariaLabelledByQueue.push(r),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(r){let n=this._ariaLabelledByQueue.indexOf(r);n>-1&&(this._ariaLabelledByQueue.splice(n,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._focusTrapped.complete(),this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(r){this._portalOutlet.hasAttached();let n=this._portalOutlet.attachComponentPortal(r);return this._contentAttached(),n}attachTemplatePortal(r){this._portalOutlet.hasAttached();let n=this._portalOutlet.attachTemplatePortal(r);return this._contentAttached(),n}attachDomPortal=r=>{this._portalOutlet.hasAttached();let n=this._portalOutlet.attachDomPortal(r);return this._contentAttached(),n};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(r,n){this._interactivityChecker.isFocusable(r)||(r.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let o=()=>{i(),s(),r.removeAttribute("tabindex")},i=this._renderer.listen(r,"blur",o),s=this._renderer.listen(r,"mousedown",o)})),r.focus(n)}_focusByCssSelector(r,n){let o=this._elementRef.nativeElement.querySelector(r);o&&this._forceFocus(o,n)}_trapFocus(r){this._isDestroyed||mr(()=>{let n=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||n.focus(r);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(r)||this._focusDialogContainer(r);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',r);break;default:this._focusByCssSelector(this._config.autoFocus,r);break}this._focusTrapped.next()},{injector:this._injector})}_restoreFocus(){let r=this._config.restoreFocus,n=null;if(typeof r=="string"?n=this._document.querySelector(r):typeof r=="boolean"?n=r?this._elementFocusedBeforeDialogWasOpened:null:r&&(n=r),this._config.restoreFocus&&n&&typeof n.focus=="function"){let o=ca(),i=this._elementRef.nativeElement;(!o||o===this._document.body||o===i||i.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(n,this._closeInteractionType),this._closeInteractionType=null):n.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(r){this._elementRef.nativeElement.focus?.(r)}_containsFocus(){let r=this._elementRef.nativeElement,n=ca();return r===n||r.contains(n)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=ca()))}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Jt({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(n,o){if(n&1&&Xo(On,7),n&2){let i;ho(i=po())&&(o._portalOutlet=i.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(n,o){n&2&&gr("id",o._config.id||null)("role",o._config.role)("aria-modal",o._config.ariaModal)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null)},features:[Se],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(n,o){n&1&&Qo(0,QO,0,0,"ng-template",0)},dependencies:[On],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return t})(),is=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new at;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(e,r){this.overlayRef=e,this.config=r,this.disableClose=r.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=r.id,this.keydownEvents.subscribe(n=>{n.keyCode===27&&!this.disableClose&&!Jo(n)&&(n.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{!this.disableClose&&this._canClose()?this.close(void 0,{focusOrigin:"mouse"}):this.containerInstance._recaptureFocus?.()}),this._detachSubscription=e.detachments().subscribe(()=>{r.closeOnOverlayDetachments!==!1&&this.close()})}close(e,r){if(this._canClose(e)){let n=this.closed;this.containerInstance._closeInteractionType=r?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),n.next(e),n.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",r=""){return this.overlayRef.updateSize({width:e,height:r}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}_canClose(e){let r=this.config;return!!this.containerInstance&&(!r.closePredicate||r.closePredicate(e,r,this.componentInstance))}},YO=new lt("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=k(xt);return()=>Li(t)}}),XO=new lt("DialogData"),ZO=new lt("DefaultDialogConfig");function JO(t){let e=ia(t),r=new re;return{valueSignal:e,get value(){return e()},change:r,ngOnDestroy(){r.complete()}}}var Ph=(()=>{class t{_injector=k(xt);_defaultOptions=k(ZO,{optional:!0});_parentDialog=k(t,{optional:!0,skipSelf:!0});_overlayContainer=k(Yl);_idGenerator=k(Jr);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new at;_afterOpenedAtThisLevel=new at;_ariaHiddenElements=new Map;_scrollStrategy=k(YO);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=xn(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(hr(void 0)));constructor(){}open(r,n){let o=this._defaultOptions||new Kn;n=F(F({},o),n),n.id=n.id||this._idGenerator.getId("cdk-dialog-"),n.id&&this.getDialogById(n.id);let i=this._getOverlayConfig(n),s=No(this._injector,i),l=new is(s,n),d=this._attachContainer(s,l,n);if(l.containerInstance=d,!this.openDialogs.length){let p=this._overlayContainer.getContainerElement();d._focusTrapped?d._focusTrapped.pipe(Ze(1)).subscribe(()=>{this._hideNonDialogContentFromAssistiveTechnology(p)}):this._hideNonDialogContentFromAssistiveTechnology(p)}return this._attachDialogContent(r,l,d,n),this.openDialogs.push(l),l.closed.subscribe(()=>this._removeOpenDialog(l,!0)),this.afterOpened.next(l),l}closeAll(){Th(this.openDialogs,r=>r.close())}getDialogById(r){return this.openDialogs.find(n=>n.id===r)}ngOnDestroy(){Th(this._openDialogsAtThisLevel,r=>{r.config.closeOnDestroy===!1&&this._removeOpenDialog(r,!1)}),Th(this._openDialogsAtThisLevel,r=>r.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(r){let n=new un({positionStrategy:r.positionStrategy||Wn().centerHorizontally().centerVertically(),scrollStrategy:r.scrollStrategy||this._scrollStrategy(),panelClass:r.panelClass,hasBackdrop:r.hasBackdrop,direction:r.direction,minWidth:r.minWidth,minHeight:r.minHeight,maxWidth:r.maxWidth,maxHeight:r.maxHeight,width:r.width,height:r.height,disposeOnNavigation:r.closeOnNavigation,disableAnimations:r.disableAnimations});return r.backdropClass&&(n.backdropClass=r.backdropClass),n}_attachContainer(r,n,o){let i=o.injector||o.viewContainerRef?.injector,s=[{provide:Kn,useValue:o},{provide:is,useValue:n},{provide:Ni,useValue:r}],l;o.container?typeof o.container=="function"?l=o.container:(l=o.container.type,s.push(...o.container.providers(o))):l=Mh;let d=new tn(l,o.viewContainerRef,xt.create({parent:i||this._injector,providers:s}));return r.attach(d).instance}_attachDialogContent(r,n,o,i){if(r instanceof Qr){let s=this._createInjector(i,n,o,void 0),l={$implicit:i.data,dialogRef:n};i.templateContext&&(l=F(F({},l),typeof i.templateContext=="function"?i.templateContext():i.templateContext)),o.attachTemplatePortal(new Ar(r,null,l,s))}else{let s=this._createInjector(i,n,o,this._injector),l=o.attachComponentPortal(new tn(r,i.viewContainerRef,s));n.componentRef=l,n.componentInstance=l.instance}}_createInjector(r,n,o,i){let s=r.injector||r.viewContainerRef?.injector,l=[{provide:XO,useValue:r.data},{provide:is,useValue:n}];return r.providers&&(typeof r.providers=="function"?l.push(...r.providers(n,r,o)):l.push(...r.providers)),r.direction&&(!s||!s.get(Sn,null,{optional:!0}))&&l.push({provide:Sn,useValue:JO(r.direction)}),xt.create({parent:s||i,providers:l})}_removeOpenDialog(r,n){let o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((i,s)=>{i?s.setAttribute("aria-hidden",i):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),n&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(r){if(r.parentElement){let n=r.parentElement.children;for(let o=n.length-1;o>-1;o--){let i=n[o];i!==r&&i.nodeName!=="SCRIPT"&&i.nodeName!=="STYLE"&&!i.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let r=this._parentDialog;return r?r._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Th(t,e){let r=t.length;for(;r--;)e(t[r])}var P_=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Xt({type:t});static \u0275inj=Qt({providers:[Ph],imports:[Lo,en,hm,en]})}return t})();function tE(t,e){}var ss=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;enterAnimationDuration;exitAnimationDuration},Nh="mdc-dialog--open",N_="mdc-dialog--opening",L_="mdc-dialog--closing",eE=150,rE=75,F_=(()=>{class t extends Mh{_animationStateChanged=new re;_animationsEnabled=!rr();_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?B_(this._config.enterAnimationDuration)??eE:0;_exitAnimationDuration=this._animationsEnabled?B_(this._config.exitAnimationDuration)??rE:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty($_,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(N_,Nh)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(Nh),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(Nh),this._animationsEnabled?(this._hostElement.style.setProperty($_,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(L_)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(r){this._actionSectionCount+=r,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(N_,L_)}_waitForAnimationToComplete(r,n){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(n,r)}_requestAnimationFrame(r){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(r):r()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(r){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:r})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(r){let n=super.attachComponentPortal(r);return n.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),n}static \u0275fac=(()=>{let r;return function(o){return(r||(r=ze(t)))(o||t)}})();static \u0275cmp=Jt({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(n,o){n&2&&(Ku("id",o._config.id),gr("aria-modal",o._config.ariaModal)("role",o._config.role)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null),tr("_mat-animation-noopable",!o._animationsEnabled)("mat-mdc-dialog-container-with-actions",o._actionSectionCount>0))},features:[Se],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(n,o){n&1&&(Yo(0,"div",0)(1,"div",1),Qo(2,tE,0,0,"ng-template",2),co()())},dependencies:[On],styles:[`.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mat-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mat-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mat-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mat-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mat-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mat-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mat-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mat-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mat-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mat-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mat-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mat-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mat-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;box-sizing:border-box;min-height:52px;margin:0;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}
`],encapsulation:2})}return t})(),$_="--mat-dialog-transition-duration";function B_(t){return t==null?null:typeof t=="number"?t:t.endsWith("ms")?la(t.substring(0,t.length-2)):t.endsWith("s")?la(t.substring(0,t.length-1))*1e3:t==="0"?0:null}var as=function(t){return t[t.OPEN=0]="OPEN",t[t.CLOSING=1]="CLOSING",t[t.CLOSED=2]="CLOSED",t}(as||{}),Bi=class{_ref;_config;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new at;_beforeClosed=new at;_result;_closeFallbackTimeout;_state=as.OPEN;_closeInteractionType;constructor(e,r,n){this._ref=e,this._config=r,this._containerInstance=n,this.disableClose=r.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),n._animationStateChanged.pipe(bt(o=>o.state==="opened"),Ze(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),n._animationStateChanged.pipe(bt(o=>o.state==="closed"),Ze(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Bs(this.backdropClick(),this.keydownEvents().pipe(bt(o=>o.keyCode===27&&!this.disableClose&&!Jo(o)))).subscribe(o=>{this.disableClose||(o.preventDefault(),Lh(this,o.type==="keydown"?"keyboard":"mouse"))})}close(e){let r=this._config.closePredicate;r&&!r(e,this._config,this.componentInstance)||(this._result=e,this._containerInstance._animationStateChanged.pipe(bt(n=>n.state==="closing"),Ze(1)).subscribe(n=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=as.CLOSING,this._containerInstance._startExitAnimation())}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let r=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?r.left(e.left):r.right(e.right):r.centerHorizontally(),e&&(e.top||e.bottom)?e.top?r.top(e.top):r.bottom(e.bottom):r.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",r=""){return this._ref.updateSize(e,r),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=as.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function Lh(t,e,r){return t._closeInteractionType=e,t.close(r)}var j_=new lt("MatMdcDialogData"),U_=new lt("mat-mdc-dialog-default-options"),z_=new lt("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let t=k(xt);return()=>Li(t)}}),Xl=(()=>{class t{_defaultOptions=k(U_,{optional:!0});_scrollStrategy=k(z_);_parentDialog=k(t,{optional:!0,skipSelf:!0});_idGenerator=k(Jr);_injector=k(xt);_dialog=k(Ph);_animationsDisabled=rr();_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new at;_afterOpenedAtThisLevel=new at;dialogConfigClass=ss;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let r=this._parentDialog;return r?r._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=xn(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(hr(void 0)));constructor(){this._dialogRefConstructor=Bi,this._dialogContainerType=F_,this._dialogDataToken=j_}open(r,n){let o;n=F(F({},this._defaultOptions||new ss),n),n.id=n.id||this._idGenerator.getId("mat-mdc-dialog-"),n.scrollStrategy=n.scrollStrategy||this._scrollStrategy();let i=this._dialog.open(r,gt(F({},n),{positionStrategy:Wn(this._injector).centerHorizontally().centerVertically(),disableClose:!0,closePredicate:void 0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,disableAnimations:this._animationsDisabled||n.enterAnimationDuration?.toLocaleString()==="0"||n.exitAnimationDuration?.toString()==="0",container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:n},{provide:Kn,useValue:n}]},templateContext:()=>({dialogRef:o}),providers:(s,l,d)=>(o=new this._dialogRefConstructor(s,n,d),o.updatePosition(n?.position),[{provide:this._dialogContainerType,useValue:d},{provide:this._dialogDataToken,useValue:l.data},{provide:this._dialogRefConstructor,useValue:o}])}));return o.componentRef=i.componentRef,o.componentInstance=i.componentInstance,this.openDialogs.push(o),this.afterOpened.next(o),o.afterClosed().subscribe(()=>{let s=this.openDialogs.indexOf(o);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||this._getAfterAllClosed().next())}),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(r){return this.openDialogs.find(n=>n.id===r)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(r){let n=r.length;for(;n--;)r[n].close()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),nE=(()=>{class t{dialogRef=k(Bi,{optional:!0});_elementRef=k(Yt);_dialog=k(Xl);ariaLabel;type="button";dialogResult;_matDialogClose;constructor(){}ngOnInit(){this.dialogRef||(this.dialogRef=q_(this._elementRef,this._dialog.openDialogs))}ngOnChanges(r){let n=r._matDialogClose||r._matDialogCloseResult;n&&(this.dialogResult=n.currentValue)}_onButtonClick(r){Lh(this.dialogRef,r.screenX===0&&r.screenY===0?"keyboard":"mouse",this.dialogResult)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(n,o){n&1&&uo("click",function(s){return o._onButtonClick(s)}),n&2&&gr("aria-label",o.ariaLabel||null)("type",o.type)},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],type:"type",dialogResult:[0,"mat-dialog-close","dialogResult"],_matDialogClose:[0,"matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[Gr]})}return t})(),V_=(()=>{class t{_dialogRef=k(Bi,{optional:!0});_elementRef=k(Yt);_dialog=k(Xl);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=q_(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t})}return t})(),oE=(()=>{class t extends V_{id=k(Jr).getId("mat-mdc-dialog-title-");_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static \u0275fac=(()=>{let r;return function(o){return(r||(r=ze(t)))(o||t)}})();static \u0275dir=Nt({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(n,o){n&2&&Ku("id",o.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],features:[Se]})}return t})(),iE=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Nt({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],features:[Fp([Ch])]})}return t})(),aE=(()=>{class t extends V_{align;_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}static \u0275fac=(()=>{let r;return function(o){return(r||(r=ze(t)))(o||t)}})();static \u0275dir=Nt({type:t,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(n,o){n&2&&tr("mat-mdc-dialog-actions-align-start",o.align==="start")("mat-mdc-dialog-actions-align-center",o.align==="center")("mat-mdc-dialog-actions-align-end",o.align==="end")},inputs:{align:"align"},features:[Se]})}return t})();function q_(t,e){let r=t.nativeElement.parentElement;for(;r&&!r.classList.contains("mat-mdc-dialog-container");)r=r.parentElement;return r?e.find(n=>n.id===r.id):null}var sE=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Xt({type:t});static \u0275inj=Qt({providers:[Xl],imports:[P_,Lo,en,er,er]})}return t})();export{tn as a,Ar as b,hE as c,On as d,en as e,_E as f,rr as g,TE as h,WE as i,Sm as j,Mx as k,Om as l,Dm as m,km as n,ir as o,ar as p,Ed as q,Ad as r,ke as s,gg as t,h0 as u,Eg as v,Dc as w,Ta as x,jd as y,Rk as z,M0 as A,kk as B,eG as C,iG as D,DO as E,cG as F,rs as G,Pi as H,wh as I,Sh as J,Ql as K,un as L,kh as M,No as N,Eh as O,NO as P,Lo as Q,Bi as R,j_ as S,Xl as T,nE as U,oE as V,iE as W,aE as X,sE as Y,KO as Z,GO as _,FQ as $,zQ as aa};
